/*! For license information please see main.1a361501.js.LICENSE.txt */
!function(){var e={1337:function(e,t,n){"use strict";var r=n(7061).default,i=n(7156).default,a=n(6690).default,o=n(9728).default;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){if(a(this,e),!(t instanceof Blob))throw new Error("Expected file to be a File or Blob.");this._blob=t,this._size=t.size}return o(e,[{key:"read",value:function(){var e=i(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._blob.slice(t,t+n).arrayBuffer();case 2:return i=e.sent,e.abrupt("return",new Uint8Array(i));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"size",value:function(){return this._size}}]),e}();t.default=s},6527:function(e,t,n){var r=n(1337).default;e.exports={BlobReader:r}},153:function(e,t,n){var r,i,a,o,s,u,l,c,h,f,d,p,v,m,g=n(215).default,y=n(4704).default,b=n(9400).default,x=n(8416).default,w=n(861).default,_=n(7424).default,S=n(2122).default,k=["definitionType","name"];!function(){var t={417:function(e,t,n){"use strict";n.r(t),n.d(t,{Md5:function(){return r}});var r=function(){function e(){}return e.AddUnsigned=function(e,t){var n,r,i,a,o;return i=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^o^i^a:n|r?1073741824&o?3221225472^o^i^a:1073741824^o^i^a:o^i^a},e.FF=function(e,t,n,r,i,a,o){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.F(t,n,r),i),o)),this.AddUnsigned(this.RotateLeft(e,a),t)},e.GG=function(e,t,n,r,i,a,o){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.G(t,n,r),i),o)),this.AddUnsigned(this.RotateLeft(e,a),t)},e.HH=function(e,t,n,r,i,a,o){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.H(t,n,r),i),o)),this.AddUnsigned(this.RotateLeft(e,a),t)},e.II=function(e,t,n,r,i,a,o){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.I(t,n,r),i),o)),this.AddUnsigned(this.RotateLeft(e,a),t)},e.ConvertToWordArray=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),a=Array(i-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[i-2]=n<<3,a[i-1]=n>>>29,a},e.WordToHex=function(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n},e.Utf8Encode=function(e){var t,n="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n+=String.fromCharCode(t):t>127&&t<2048?(n+=String.fromCharCode(t>>6|192),n+=String.fromCharCode(63&t|128)):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128),n+=String.fromCharCode(63&t|128));return n},e.init=function(e){for("string"!==typeof e&&(e=JSON.stringify(e)),this._string=this.Utf8Encode(e),this.x=this.ConvertToWordArray(this._string),this.a=1732584193,this.b=4023233417,this.c=2562383102,this.d=271733878,this.k=0;this.k<this.x.length;this.k+=16)this.AA=this.a,this.BB=this.b,this.CC=this.c,this.DD=this.d,this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k],this.S11,3614090360),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+1],this.S12,3905402710),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S13,606105819),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+3],this.S14,3250441966),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S11,4118548399),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+5],this.S12,1200080426),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S13,2821735955),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+7],this.S14,4249261313),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S11,1770035416),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+9],this.S12,2336552879),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S13,4294925233),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+11],this.S14,2304563134),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S11,1804603682),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+13],this.S12,4254626195),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S13,2792965006),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+15],this.S14,1236535329),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S21,4129170786),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+6],this.S22,3225465664),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S23,643717713),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k],this.S24,3921069994),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S21,3593408605),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+10],this.S22,38016083),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S23,3634488961),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+4],this.S24,3889429448),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S21,568446438),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+14],this.S22,3275163606),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S23,4107603335),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+8],this.S24,1163531501),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S21,2850285829),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+2],this.S22,4243563512),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S23,1735328473),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+12],this.S24,2368359562),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S31,4294588738),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+8],this.S32,2272392833),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S33,1839030562),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+14],this.S34,4259657740),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S31,2763975236),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+4],this.S32,1272893353),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S33,4139469664),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+10],this.S34,3200236656),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S31,681279174),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k],this.S32,3936430074),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S33,3572445317),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+6],this.S34,76029189),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S31,3654602809),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+12],this.S32,3873151461),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S33,530742520),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+2],this.S34,3299628645),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k],this.S41,4096336452),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+7],this.S42,1126891415),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S43,2878612391),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+5],this.S44,4237533241),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S41,1700485571),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+3],this.S42,2399980690),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S43,4293915773),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+1],this.S44,2240044497),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S41,1873313359),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+15],this.S42,4264355552),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S43,2734768916),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+13],this.S44,1309151649),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S41,4149444226),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+11],this.S42,3174756917),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S43,718787259),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+9],this.S44,3951481745),this.a=this.AddUnsigned(this.a,this.AA),this.b=this.AddUnsigned(this.b,this.BB),this.c=this.AddUnsigned(this.c,this.CC),this.d=this.AddUnsigned(this.d,this.DD);return(this.WordToHex(this.a)+this.WordToHex(this.b)+this.WordToHex(this.c)+this.WordToHex(this.d)).toLowerCase()},e.x=Array(),e.S11=7,e.S12=12,e.S13=17,e.S14=22,e.S21=5,e.S22=9,e.S23=14,e.S24=20,e.S31=4,e.S32=11,e.S33=16,e.S34=23,e.S41=6,e.S42=10,e.S43=15,e.S44=21,e.RotateLeft=function(e,t){return e<<t|e>>>32-t},e.F=function(e,t,n){return e&t|~e&n},e.G=function(e,t,n){return e&n|t&~n},e.H=function(e,t,n){return e^t^n},e.I=function(e,t,n){return t^(e|~n)},e}()},271:function(e,t){var n,r,i;r=[],void 0===(i="function"===typeof(n=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n="boolean"===typeof(new RegExp).sticky;function r(e){return e&&"[object RegExp]"===t.call(e)}function i(e){return e&&"object"===typeof e&&!r(e)&&!Array.isArray(e)}function a(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(e){return new RegExp("|"+e).exec("").length-1}function s(e){return"("+e+")"}function u(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function l(e){if("string"===typeof e)return"(?:"+a(e)+")";if(r(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function c(e){for(var t=Object.getOwnPropertyNames(e),n=[],r=0;r<t.length;r++){var a=t[r],o=e[a],s=[].concat(o);if("include"!==a){var u=[];s.forEach((function(e){i(e)?(u.length&&n.push(f(a,u)),n.push(f(a,e)),u=[]):u.push(e)})),u.length&&n.push(f(a,u))}else for(var l=0;l<s.length;l++)n.push({include:s[l]})}return n}function h(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.include)for(var i=[].concat(r.include),a=0;a<i.length;a++)t.push({include:i[a]});else{if(!r.type)throw new Error("Rule has no type: "+JSON.stringify(r));t.push(f(r.type,r))}}return t}function f(t,n){if(i(n)||(n={match:n}),n.include)throw new Error("Matching rules cannot also include states");var a={defaultType:t,lineBreaks:!!n.error||!!n.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var o in n)e.call(n,o)&&(a[o]=n[o]);if("string"===typeof a.type&&t!==a.type)throw new Error("Type transform cannot be a string (type '"+a.type+"' for token '"+t+"')");var s=a.match;return a.match=Array.isArray(s)?s:s?[s]:[],a.match.sort((function(e,t){return r(e)&&r(t)?0:r(t)?-1:r(e)?1:t.length-e.length})),a}function d(e){return Array.isArray(e)?h(e):c(e)}var p=f("error",{lineBreaks:!0,shouldThrow:!0});function v(e,t){for(var i=null,a=Object.create(null),c=!0,h=null,f=[],d=[],v=0;v<e.length;v++)e[v].fallback&&(c=!1);for(v=0;v<e.length;v++){var m=e[v];if(m.include)throw new Error("Inheritance is not allowed in stateless lexers");if(m.error||m.fallback){if(i)throw!m.fallback===!i.fallback?new Error("Multiple "+(m.fallback?"fallback":"error")+" rules not allowed (for token '"+m.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+m.defaultType+"')");i=m}var g=m.match.slice();if(c)for(;g.length&&"string"===typeof g[0]&&1===g[0].length;)a[g.shift().charCodeAt(0)]=m;if(m.pop||m.push||m.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+m.defaultType+"')");if(m.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+m.defaultType+"')")}if(0!==g.length){c=!1,f.push(m);for(var y=0;y<g.length;y++){var b=g[y];if(r(b))if(null===h)h=b.unicode;else if(h!==b.unicode&&!1===m.fallback)throw new Error("If one rule is /u then all must be")}var x=u(g.map(l)),w=new RegExp(x);if(w.test(""))throw new Error("RegExp matches empty string: "+w);if(o(x)>0)throw new Error("RegExp has capture groups: "+w+"\nUse (?: \u2026 ) instead");if(!m.lineBreaks&&w.test("\n"))throw new Error("Rule should declare lineBreaks: "+w);d.push(s(x))}}var _=i&&i.fallback,S=n&&!_?"ym":"gm",k=n||_?"":"|";return!0===h&&(S+="u"),{regexp:new RegExp(u(d)+k,S),groups:f,fast:a,error:i||p}}function m(e){var t=v(d(e));return new x({start:t},"start")}function g(e,t,n){var r=e&&(e.push||e.next);if(r&&!n[r])throw new Error("Missing state '"+r+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!==+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}function y(e,t){var n=e.$all?d(e.$all):[];delete e.$all;var r=Object.getOwnPropertyNames(e);t||(t=r[0]);for(var i=Object.create(null),a=0;a<r.length;a++)i[y=r[a]]=d(e[y]).concat(n);for(a=0;a<r.length;a++)for(var o=i[y=r[a]],s=Object.create(null),u=0;u<o.length;u++){var l=o[u];if(l.include){var c=[u,1];if(l.include!==y&&!s[l.include]){s[l.include]=!0;var h=i[l.include];if(!h)throw new Error("Cannot include nonexistent state '"+l.include+"' (in state '"+y+"')");for(var f=0;f<h.length;f++){var p=h[f];-1===o.indexOf(p)&&c.push(p)}}o.splice.apply(o,c),u--}}var m=Object.create(null);for(a=0;a<r.length;a++){var y;m[y=r[a]]=v(i[y],!0)}for(a=0;a<r.length;a++){var b=r[a],w=m[b],_=w.groups;for(u=0;u<_.length;u++)g(_[u],b,m);var S=Object.getOwnPropertyNames(w.fast);for(u=0;u<S.length;u++)g(w.fast[S[u]],b,m)}return new x(m,t)}function b(e){for(var t=Object.create(null),n=Object.create(null),r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i],o=e[a];(Array.isArray(o)?o:[o]).forEach((function(e){if((n[e.length]=n[e.length]||[]).push(e),"string"!==typeof e)throw new Error("keyword must be string (in keyword '"+a+"')");t[e]=a}))}function s(e){return JSON.stringify(e)}var u="";for(var l in u+="switch (value.length) {\n",n){var c=n[l];u+="case "+l+":\n",u+="switch (value) {\n",c.forEach((function(e){var n=t[e];u+="case "+s(e)+": return "+s(n)+"\n"})),u+="}\n"}return u+="}\n",Function("value",u)}var x=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};x.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},x.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},x.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},x.prototype.popState=function(){this.setState(this.stack.pop())},x.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var w=n?function(e,t){return e.exec(t)}:function(e,t){var n=e.exec(t);return 0===n[0].length?null:n};function _(){return this.value}if(x.prototype._getGroup=function(e){for(var t=this.groups.length,n=0;n<t;n++)if(void 0!==e[n+1])return this.groups[n];throw new Error("Cannot find token type for matched text")},x.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var n=this.buffer;if(e!==n.length){if(o=this.fast[n.charCodeAt(e)])return this._token(o,n.charAt(e),e);var r=this.re;r.lastIndex=e;var i=w(r,n),a=this.error;if(null==i)return this._token(a,n.slice(e,n.length),e);var o=this._getGroup(i),s=i[0];return a.fallback&&i.index!==e?(this.queuedGroup=o,this.queuedText=s,this._token(a,n.slice(e,i.index),e)):this._token(o,s,e)}},x.prototype._token=function(e,t,n){var r=0;if(e.lineBreaks){var i=/\n/g,a=1;if("\n"===t)r=1;else for(;i.exec(t);)r++,a=i.lastIndex}var o={type:"function"===typeof e.type&&e.type(t)||e.defaultType,value:"function"===typeof e.value?e.value(t):t,text:t,toString:_,offset:n,lineBreaks:r,line:this.line,col:this.col},s=t.length;if(this.index+=s,this.line+=r,0!==r?this.col=s-a+1:this.col+=s,e.shouldThrow)throw new Error(this.formatError(o,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),o},"undefined"!==typeof Symbol&&Symbol.iterator){var S=function(e){this.lexer=e};S.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},S.prototype[Symbol.iterator]=function(){return this},x.prototype[Symbol.iterator]=function(){return new S(this)}}return x.prototype.formatError=function(e,t){if(null==e){var n=this.buffer.slice(this.index);e={text:n,offset:this.index,lineBreaks:-1===n.indexOf("\n")?0:1,line:this.line,col:this.col}}var r=Math.max(0,e.offset-e.col+1),i=e.lineBreaks?e.text.indexOf("\n"):e.text.length,a=this.buffer.substring(r,e.offset+i);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+a+"\n",t+="  "+Array(e.col).join(" ")+"^"},x.prototype.clone=function(){return new x(this.states,this.state)},x.prototype.has=function(e){return!0},{compile:m,states:y,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:b}})?n.apply(t,r):n)||(e.exports=i)},558:function(e,t,n){!function(){function t(e){return e[0]}var r=n(271).compile({space:{match:/\s+/,lineBreaks:!0},number:/-?(?:[0-9]|[1-9][0-9]+)(?:\.[0-9]+)?(?:[eE][-+]?[0-9]+)?\b/,comment:/#[^\n]*/,"[":"[","]":"]",assignment:/=[^\n]*/,fieldOrType:/[a-zA-Z_][a-zA-Z0-9_]*(?:\/[a-zA-Z][a-zA-Z0-9_]*)?/});function i(e){return e.reduce((function(e,t){return S(S({},e),t)}),{})}var a={Lexer:r,ParserRules:[{name:"main$ebnf$1",symbols:["comment"],postprocess:t},{name:"main$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","boolType","arrayType","__","field","_","main$ebnf$1","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$2",symbols:["comment"],postprocess:t},{name:"main$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","bigintType","arrayType","__","field","_","main$ebnf$2","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$3",symbols:["comment"],postprocess:t},{name:"main$ebnf$3",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","numericType","arrayType","__","field","_","main$ebnf$3","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$4",symbols:["comment"],postprocess:t},{name:"main$ebnf$4",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","stringType","arrayType","__","field","_","main$ebnf$4","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$5",symbols:["comment"],postprocess:t},{name:"main$ebnf$5",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","timeType","arrayType","__","field","_","main$ebnf$5","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$6",symbols:["comment"],postprocess:t},{name:"main$ebnf$6",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","customType","arrayType","__","field","_","main$ebnf$6","complex"],postprocess:function(e){return i(e)}},{name:"main$ebnf$7",symbols:["comment"],postprocess:t},{name:"main$ebnf$7",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","boolType","__","constantField","_","boolConstantValue","_","main$ebnf$7"],postprocess:function(e){return i(e)}},{name:"main$ebnf$8",symbols:["comment"],postprocess:t},{name:"main$ebnf$8",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","bigintType","__","constantField","_","bigintConstantValue","_","main$ebnf$8"],postprocess:function(e){return i(e)}},{name:"main$ebnf$9",symbols:["comment"],postprocess:t},{name:"main$ebnf$9",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","numericType","__","constantField","_","numericConstantValue","_","main$ebnf$9"],postprocess:function(e){return i(e)}},{name:"main$ebnf$10",symbols:["comment"],postprocess:t},{name:"main$ebnf$10",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","stringType","__","constantField","_","stringConstantValue","_","main$ebnf$10"],postprocess:function(e){return i(e)}},{name:"main",symbols:["comment"],postprocess:function(e){return null}},{name:"main",symbols:["blankLine"],postprocess:function(e){return null}},{name:"boolType",symbols:[{literal:"bool"}],postprocess:function(e){return{type:e[0].value}}},{name:"bigintType$subexpression$1",symbols:[{literal:"int64"}]},{name:"bigintType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"bigintType",symbols:["bigintType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"stringType",symbols:[{literal:"string"}],postprocess:function(e){return{type:e[0].value}}},{name:"timeType$subexpression$1",symbols:[{literal:"time"}]},{name:"timeType$subexpression$1",symbols:[{literal:"duration"}]},{name:"timeType",symbols:["timeType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"customType",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){var r=e[0].value;return["bool","byte","char","float32","float64","int8","uint8","int16","uint16","int32","uint32","int64","uint64","string","time","duration"].includes(r)?n:{type:r}}},{name:"arrayType",symbols:[{literal:"["},"_",{literal:"]"}],postprocess:function(e){return{isArray:!0}}},{name:"arrayType",symbols:[{literal:"["},"_","number","_",{literal:"]"}],postprocess:function(e){return{isArray:!0,arrayLength:e[2]}}},{name:"arrayType",symbols:["_"],postprocess:function(e){return{isArray:!1}}},{name:"field",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){var r=e[0].value;return void 0==r.match(/^[a-zA-Z][a-zA-Z0-9_]*$/)?n:{name:r}}},{name:"constantField",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){var r=e[0].value;return void 0==r.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?n:{name:r,isConstant:!0}}},{name:"boolConstantValue",symbols:["assignment"],postprocess:function(e,t,n){var r=e[0].split("#")[0].trim();return"True"===r||"1"===r?{value:!0,valueText:r}:"False"===r||"0"===r?{value:!1,valueText:r}:n}},{name:"numericConstantValue",symbols:["assignment"],postprocess:function(e,t,n){var r=e[0].split("#")[0].trim(),i=parseFloat(r);return isNaN(i)?n:{value:i,valueText:r}}},{name:"bigintConstantValue",symbols:["assignment"],postprocess:function(e,t,n){var r=e[0].split("#")[0].trim();try{return{value:BigInt(r),valueText:r}}catch(i){return n}}},{name:"stringConstantValue",symbols:["assignment"],postprocess:function(e){return{value:e[0],valueText:e[0]}}},{name:"bool$subexpression$1",symbols:[{literal:"True"}]},{name:"bool$subexpression$1",symbols:[{literal:"1"}]},{name:"bool",symbols:["bool$subexpression$1"],postprocess:function(e){return!0}},{name:"bool$subexpression$2",symbols:[{literal:"False"}]},{name:"bool$subexpression$2",symbols:[{literal:"0"}]},{name:"bool",symbols:["bool$subexpression$2"],postprocess:function(e){return!1}},{name:"number",symbols:[r.has("number")?{type:"number"}:number],postprocess:function(e){return parseFloat(e[0].value)}},{name:"assignment",symbols:[r.has("assignment")?{type:"assignment"}:assignment],postprocess:function(e){return e[0].value.substr(1).trim()}},{name:"comment",symbols:[r.has("comment")?{type:"comment"}:comment],postprocess:function(e){return null}},{name:"blankLine",symbols:["_"],postprocess:function(e){return null}},{name:"_$subexpression$1",symbols:[]},{name:"_$subexpression$1",symbols:[r.has("space")?{type:"space"}:space]},{name:"_",symbols:["_$subexpression$1"],postprocess:function(e){return null}},{name:"__",symbols:[r.has("space")?{type:"space"}:space],postprocess:function(e){return null}},{name:"simple",symbols:[],postprocess:function(){return{isComplex:!1}}},{name:"complex",symbols:[],postprocess:function(){return{isComplex:!0}}}],ParserStart:"main"};"undefined"!==typeof e.exports?e.exports=a:window.grammar=a}()},568:function(e,t,n){!function(){function t(e){return e[0]}var r,i=[,"struct","module","const","include","typedef","boolean","wstring","string","sequence","TRUE","FALSE","byte","octet","wchar","char","double","float","int8","uint8","int16","uint16","int32","uint32","int64","uint64","unsigned","short","long"].reduce((function(e,t){return e[t]=t,e}),{}),a=n(271),o=a.compile({SPACE:{match:/\s+/,lineBreaks:!0},DECIMALEXP:/(?:(?:\d+\.\d*)|(?:\d*\.\d+)|(?:[0-9]+))[eE](?:[+|-])?[0-9]+/,DECIMAL:/(?:(?:\d+\.\d*)|(?:\d*\.\d+))/,INTEGER:/\d+/,COMMENT:/(?:\/\/[^\n]*)|(?:\/\*(?:.|\n)+?\*\/)/,HEX_LITERAL:/0x(?:[0-9a-fA-F])+?/,STRING:{match:/"(?:\\["\\rnu]|[^"\\])*"/,value:function(e){return e.slice(1,-1)}},LCBR:"{",RCBR:"}",LBR:"[",RBR:"]",LT:"<",GT:">",LPAR:"(",RPAR:")",";":";",",":",",AT:"@",PND:"#",PT:".","/":"/",SIGN:/[+-]/,HEADER:/={80}\nIDL: [a-zA-Z][\w]+(?:\/[a-zA-Z][\w]+)*/,EQ:/=[^\n]*?/,NAME:{match:/[a-zA-Z_][a-zA-Z0-9_]*(?:\:\:[a-zA-Z][a-zA-Z0-9_]*)*/,type:a.keywords(i)}}),s=["SPACE","COMMENT"];o.next=(r=o.next,function(){for(var e;(e=r.call(o))&&s.includes(e.type););return e});var u={"unsigned short":"uint16","unsigned long":"uint32","unsigned long long":"uint64",short:"int16",long:"int32","long long":"int64",double:"float64",float:"float32",octet:"byte",wchar:"char"};function l(e){return e.join("")}function c(e){return e.reduce((function(e,t){return S(S({},e),t)}),{})}function h(){return null}function f(e){var t=parseInt(e);return isNaN(t)?null!==e&&void 0!==e&&e.value?{usesConstant:!0,name:e.value}:void 0:t}function d(e){var t=Object.entries(e).filter((function(e){var t=_(e,2),n=(t[0],t[1]);return!0===(null===n||void 0===n?void 0:n.usesConstant)})).map((function(e){var t=_(e,2);return[t[0],t[1].name]}));return S(S({},e),{},{constantUsage:t})}var p={Lexer:o,ParserRules:[{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:["header"],postprocess:t},{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main$ebnf$1$subexpression$1$ebnf$2",symbols:[]},{name:"main$ebnf$1$subexpression$1$ebnf$2",symbols:["main$ebnf$1$subexpression$1$ebnf$2","importDcl"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$1$ebnf$3",symbols:["definition"]},{name:"main$ebnf$1$subexpression$1$ebnf$3",symbols:["main$ebnf$1$subexpression$1$ebnf$3","definition"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","main$ebnf$1$subexpression$1$ebnf$2","main$ebnf$1$subexpression$1$ebnf$3"]},{name:"main$ebnf$1",symbols:["main$ebnf$1$subexpression$1"]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:["header"],postprocess:t},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main$ebnf$1$subexpression$2$ebnf$2",symbols:[]},{name:"main$ebnf$1$subexpression$2$ebnf$2",symbols:["main$ebnf$1$subexpression$2$ebnf$2","importDcl"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$2$ebnf$3",symbols:["definition"]},{name:"main$ebnf$1$subexpression$2$ebnf$3",symbols:["main$ebnf$1$subexpression$2$ebnf$3","definition"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$2",symbols:["main$ebnf$1$subexpression$2$ebnf$1","main$ebnf$1$subexpression$2$ebnf$2","main$ebnf$1$subexpression$2$ebnf$3"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","main$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main",symbols:["main$ebnf$1"],postprocess:function(e){return e[0].flatMap((function(e){return e[2].flat()}))}},{name:"header",symbols:[o.has("HEADER")?{type:"HEADER"}:HEADER],postprocess:h},{name:"importDcl$subexpression$1",symbols:[o.has("STRING")?{type:"STRING"}:STRING]},{name:"importDcl$subexpression$1$ebnf$1",symbols:[]},{name:"importDcl$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:"/"},o.has("NAME")?{type:"NAME"}:NAME]},{name:"importDcl$subexpression$1$ebnf$1",symbols:["importDcl$subexpression$1$ebnf$1","importDcl$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"importDcl$subexpression$1",symbols:[{literal:"<"},o.has("NAME")?{type:"NAME"}:NAME,"importDcl$subexpression$1$ebnf$1",{literal:"."},{literal:"idl"},{literal:">"}]},{name:"importDcl",symbols:[{literal:"#"},{literal:"include"},"importDcl$subexpression$1"],postprocess:h},{name:"moduleDcl$ebnf$1$subexpression$1",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1$subexpression$1"]},{name:"moduleDcl$ebnf$1$subexpression$2",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1","moduleDcl$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"moduleDcl",symbols:["multiAnnotations",{literal:"module"},"fieldName",{literal:"{"},"moduleDcl$ebnf$1",{literal:"}"}],postprocess:function(e){return{definitionType:"module",name:e[2].name,definitions:e[4].flat(1)}}},{name:"definition$subexpression$1",symbols:["typeDcl"]},{name:"definition$subexpression$1",symbols:["constantDcl"]},{name:"definition$subexpression$1",symbols:["moduleDcl"]},{name:"definition",symbols:["definition$subexpression$1","semi"],postprocess:function(e){return e[0][0]}},{name:"typeDcl$subexpression$1",symbols:["structWithAnnotations"]},{name:"typeDcl$subexpression$1",symbols:["typedefWithAnnotations"]},{name:"typeDcl",symbols:["typeDcl$subexpression$1"],postprocess:function(e){return e[0][0]}},{name:"structWithAnnotations",symbols:["multiAnnotations","struct"],postprocess:function(e){return e[1]}},{name:"struct$ebnf$1$subexpression$1",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1$subexpression$1"]},{name:"struct$ebnf$1$subexpression$2",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1","struct$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"struct",symbols:[{literal:"struct"},"fieldName",{literal:"{"},"struct$ebnf$1",{literal:"}"}],postprocess:function(e){return{definitionType:"struct",name:e[1].name,definitions:e[3].flat(2).filter((function(e){return null!==e}))}}},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","allTypes","fieldName","arrayLength"]},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","allTypes","fieldName"]},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","sequenceType","fieldName"]},{name:"typedefWithAnnotations",symbols:["multiAnnotations","typedefWithAnnotations$subexpression$1"],postprocess:function(e){var t=d(c(e.flat(1)));return S({definitionType:"typedef"},t)}},{name:"typedef",symbols:[{literal:"typedef"}],postprocess:h},{name:"constantDcl",symbols:["multiAnnotations","constType"],postprocess:function(e){return e[1]}},{name:"member",symbols:["fieldWithAnnotation","semi"],postprocess:function(e){return e[0]}},{name:"fieldWithAnnotation",symbols:["multiAnnotations","fieldDcl"],postprocess:function(e){var t=[];return e[0]&&(t=e[0]),e[1].map((function(e){return d(c([].concat(w(t),[e])))}))}},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames","arrayLength"]},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames"]},{name:"fieldDcl$subexpression$1",symbols:["sequenceType","multiFieldNames"]},{name:"fieldDcl",symbols:["fieldDcl$subexpression$1"],postprocess:function(e){return e[0].splice(1,1)[0].map((function(t){return c([].concat(w(e[0]),[t]))}))}},{name:"multiFieldNames$ebnf$1",symbols:[]},{name:"multiFieldNames$ebnf$1$subexpression$1",symbols:[{literal:","},"fieldName"]},{name:"multiFieldNames$ebnf$1",symbols:["multiFieldNames$ebnf$1","multiFieldNames$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiFieldNames",symbols:["fieldName","multiFieldNames$ebnf$1"],postprocess:function(e){return e.flat(2).filter((function(e){return null!==e&&e.name}))}},{name:"multiAnnotations$ebnf$1",symbols:[]},{name:"multiAnnotations$ebnf$1",symbols:["multiAnnotations$ebnf$1","annotation"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiAnnotations",symbols:["multiAnnotations$ebnf$1"],postprocess:function(e){return e[0]?e[0].filter((function(e){return null!==e})):null}},{name:"annotation$ebnf$1$subexpression$1",symbols:[{literal:"("},"multiAnnotationParams",{literal:")"}]},{name:"annotation$ebnf$1",symbols:["annotation$ebnf$1$subexpression$1"],postprocess:t},{name:"annotation$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"annotation",symbols:["at",o.has("NAME")?{type:"NAME"}:NAME,"annotation$ebnf$1"],postprocess:function(e){var t=e[2]?e[2][1]:{};return"default"===e[1].value?{defaultValue:t.value}:null}},{name:"multiAnnotationParams$ebnf$1",symbols:[]},{name:"multiAnnotationParams$ebnf$1$subexpression$1",symbols:[{literal:","},"annotationParam"]},{name:"multiAnnotationParams$ebnf$1",symbols:["multiAnnotationParams$ebnf$1","multiAnnotationParams$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiAnnotationParams",symbols:["annotationParam","multiAnnotationParams$ebnf$1"],postprocess:function(e){return c([e[0]].concat(w(e[1].flatMap((function(e){return _(e,2)[1]})))))}},{name:"annotationParam$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME,"assignment"]},{name:"annotationParam",symbols:["annotationParam$subexpression$1"],postprocess:function(e){return x({},e[0][0].value,e[0][1].value)}},{name:"annotationParam$subexpression$2",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"annotationParam",symbols:["annotationParam$subexpression$2"],postprocess:h},{name:"at",symbols:[{literal:"@"}],postprocess:h},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","floatAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","intAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","stringType","fieldName","stringAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","booleanType","fieldName","booleanAssignment","simple"]},{name:"constType",symbols:["constType$subexpression$1"],postprocess:function(e){var t=c(e[0]);t.name,t.value;return t}},{name:"constKeyword",symbols:[{literal:"const"}],postprocess:function(e){return{isConstant:!0}}},{name:"fieldName",symbols:[o.has("NAME")?{type:"NAME"}:NAME],postprocess:function(e){return{name:e[0].value}}},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"sequenceType$ebnf$1$subexpression$1",symbols:[{literal:","},"sequenceType$ebnf$1$subexpression$1$subexpression$1"]},{name:"sequenceType$ebnf$1",symbols:["sequenceType$ebnf$1$subexpression$1"],postprocess:t},{name:"sequenceType$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"sequenceType",symbols:[{literal:"sequence"},{literal:"<"},"allTypes","sequenceType$ebnf$1",{literal:">"}],postprocess:function(e){var t=null!==e[3]?f(e[3][1][0]):void 0,n=e[2];return S(S({},n),{},{isArray:!0,arrayUpperBound:t})}},{name:"arrayLength$subexpression$1",symbols:["INT"]},{name:"arrayLength$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"arrayLength",symbols:[{literal:"["},"arrayLength$subexpression$1",{literal:"]"}],postprocess:function(e){var t=_(e,2)[1];return{isArray:!0,arrayLength:f(t?t[0]:void 0)}}},{name:"assignment$subexpression$1",symbols:["floatAssignment"]},{name:"assignment$subexpression$1",symbols:["intAssignment"]},{name:"assignment$subexpression$1",symbols:["stringAssignment"]},{name:"assignment$subexpression$1",symbols:["booleanAssignment"]},{name:"assignment$subexpression$1",symbols:["variableAssignment"]},{name:"assignment",symbols:["assignment$subexpression$1"],postprocess:function(e){return e[0][0]}},{name:"floatAssignment$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatAssignment$subexpression$1",symbols:["FLOAT"]},{name:"floatAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"floatAssignment$subexpression$1"],postprocess:function(e){var t=_(e,2)[1];return{valueText:t[0],value:parseFloat(t[0])}}},{name:"intAssignment$subexpression$1",symbols:["SIGNED_INT"]},{name:"intAssignment$subexpression$1",symbols:["INT"]},{name:"intAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"intAssignment$subexpression$1"],postprocess:function(e){var t=_(e,2)[1];return{valueText:t[0],value:parseInt(t[0])}}},{name:"stringAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"STR"],postprocess:function(e){var t=_(e,2)[1];return{valueText:t,value:t}}},{name:"booleanAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"BOOLEAN"],postprocess:function(e){var t=_(e,2)[1];return{valueText:t,value:"TRUE"===t}}},{name:"variableAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,o.has("NAME")?{type:"NAME"}:NAME],postprocess:function(e){var t=_(e,2)[1];return{valueText:t.value,value:{usesConstant:!0,name:t.value}}}},{name:"allTypes$subexpression$1",symbols:["primitiveTypes"]},{name:"allTypes$subexpression$1",symbols:["customType"]},{name:"allTypes",symbols:["allTypes$subexpression$1"],postprocess:function(e){return e[0][0]}},{name:"primitiveTypes$subexpression$1",symbols:["stringType"]},{name:"primitiveTypes$subexpression$1",symbols:["numericType"]},{name:"primitiveTypes$subexpression$1",symbols:["booleanType"]},{name:"primitiveTypes",symbols:["primitiveTypes$subexpression$1"],postprocess:function(e){return S(S({},e[0][0]),{},{isComplex:!1})}},{name:"customType",symbols:[o.has("NAME")?{type:"NAME"}:NAME],postprocess:function(e){var t=e[0].value,n=t.includes("::");return{type:t,isComplex:n}}},{name:"stringType$subexpression$1",symbols:[{literal:"string"}]},{name:"stringType$subexpression$1",symbols:[{literal:"wstring"}]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"stringType$ebnf$1$subexpression$1",symbols:[{literal:"<"},"stringType$ebnf$1$subexpression$1$subexpression$1",{literal:">"}]},{name:"stringType$ebnf$1",symbols:["stringType$ebnf$1$subexpression$1"],postprocess:t},{name:"stringType$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"stringType",symbols:["stringType$subexpression$1","stringType$ebnf$1"],postprocess:function(e){var t=void 0;return null!==e[1]&&(t=f(e[1][1]?e[1][1][0]:void 0)),{type:"string",upperBound:t}}},{name:"booleanType",symbols:[{literal:"boolean"}],postprocess:function(e){return{type:"bool"}}},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"octet"}]},{name:"numericType$subexpression$1",symbols:[{literal:"wchar"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:function(e){var t=e[0].map((function(e){return null===e||void 0===e?void 0:e.value})).filter((function(e){return!!e})).join(" "),n=u[t];return{type:n||t}}},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"TRUE"}]},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"FALSE"}]},{name:"BOOLEAN",symbols:["BOOLEAN$subexpression$1"],postprocess:l},{name:"STR$ebnf$1",symbols:[o.has("STRING")?{type:"STRING"}:STRING]},{name:"STR$ebnf$1",symbols:["STR$ebnf$1",o.has("STRING")?{type:"STRING"}:STRING],postprocess:function(e){return e[0].concat([e[1]])}},{name:"STR",symbols:["STR$ebnf$1"],postprocess:function(e){return l(e.flat(1).filter((function(e){return null!==e})))}},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_FLOAT",symbols:["SIGNED_FLOAT$subexpression$1","FLOAT"],postprocess:l},{name:"FLOAT$subexpression$1",symbols:[o.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL]},{name:"FLOAT$subexpression$1",symbols:[o.has("DECIMALEXP")?{type:"DECIMALEXP"}:DECIMALEXP]},{name:"FLOAT",symbols:["FLOAT$subexpression$1"],postprocess:l},{name:"FLOAT$subexpression$2",symbols:[o.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL,{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$2"],postprocess:function(e){return e[0][0].value}},{name:"FLOAT$subexpression$3",symbols:["INT",{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$3"],postprocess:function(e){return e[0][0]}},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_INT",symbols:["SIGNED_INT$subexpression$1","INT"],postprocess:l},{name:"INT",symbols:[o.has("INTEGER")?{type:"INTEGER"}:INTEGER],postprocess:l},{name:"semi",symbols:[{literal:";"}],postprocess:h},{name:"simple",symbols:[],postprocess:function(){return{isComplex:!1}}}],ParserStart:"main"};"undefined"!==typeof e.exports?e.exports=p:window.grammar=p}()},654:function(e){var t,n;t=this,n=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach((function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)}))}function i(){this.reset("")}function a(e,t,a){if(e instanceof r){var o=e;a=t}else o=r.fromCompiled(e,t);for(var s in this.grammar=o,this.options={keepHistory:!1,lexer:o.lexer||new i},a||{})this.options[s]=a[s];this.lexer=this.options.lexer,this.lexerState=void 0;var u=new n(o,0);this.table=[u],u.wants[o.start]=[],u.predict(o.start),u.process(),this.current=0}function o(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t="undefined"===typeof e?this.symbols.map(o).join(" "):this.symbols.slice(0,e).map(o).join(" ")+" \u25cf "+this.symbols.slice(e).map(o).join(" ");return this.name+" \u2192 "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,a.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,i=0;i<t.length;i++){var o=t[i];if(o.isComplete){if(o.finish(),o.data!==a.fail){for(var s=o.wantedBy,u=s.length;u--;){var l=s[u];this.complete(l,o)}if(o.reference===this.index){var c=o.rule.name;(this.completed[c]=this.completed[c]||[]).push(o)}}}else{if("string"!==typeof(c=o.rule.symbols[o.dot])){this.scannable.push(o);continue}if(n[c]){if(n[c].push(o),r.hasOwnProperty(c)){var h=r[c];for(u=0;u<h.length;u++){var f=h[u];this.complete(o,f)}}}else n[c]=[o],this.predict(c)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var i=n[r],a=this.wants[e],o=new t(i,0,this.index,a);this.states.push(o)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var i=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var a=new r(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),n);return a.lexer=i,a},i.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(e,t){var n=this.buffer;if("string"===typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var a=this.index-this.lastLineBreak,o=String(this.line).length;return t+=" at line "+this.line+" col "+a+":\n\n",t+=r.map((function(e,t){return s(this.line-r.length+t+1,o)+" "+e}),this).join("\n"),t+="\n"+s("",o+a)+"^\n"}return t+" at index "+(this.index-1);function s(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},a.fail={},a.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(m){var a=new n(this.grammar,this.current+1);throw this.table.push(a),(u=new Error(this.reportLexerError(m))).offset=this.current,u.token=m.token,u}var o=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var s=this.current+1;a=new n(this.grammar,s),this.table.push(a);for(var u,l=void 0!==t.text?t.text:t.value,c=r.constructor===i?t.value:t,h=o.scannable,f=h.length;f--;){var d=h[f],p=d.rule.symbols[d.dot];if(p.test?p.test(c):p.type?p.type===t.type:p.literal===l){var v=d.nextState({data:c,token:t,isToken:!0,reference:s-1});a.states.push(v)}}if(a.process(),0===a.states.length)throw(u=new Error(this.reportError(t))).offset=this.current,u.token=t,u;this.options.keepHistory&&(o.lexerState=r.save()),this.current++}return o&&(this.lexerState=r.save()),this.results=this.finish(),this},a.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},a.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},a.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,i=this.table[r],a=i.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!==typeof t}));return 0===a.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),a.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],r=t.rule.symbols[t.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(e,n)}),this)),n.push(""),n.join("\n")},a.prototype.displayStateStack=function(e,t){for(var n,r=0,i=0;i<e.length;i++){var a=e[i],o=a.rule.toString(a.dot);o===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+o)),n=o}},a.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},a.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),i=this.buildFirstStateStack(n,r);return null===i?null:[e].concat(i)},a.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},a.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},a.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},a.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==a.fail&&e.push(n)})),e.map((function(e){return e.data}))},{Parser:a,Grammar:r,Rule:e}},e.exports?e.exports=n():t.nearley=n()},515:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRos2Type=void 0;var n=String.raw(r||(r=b(["(?<type>[a-zA-Z0-9_/]+)"]))),g=String.raw(i||(i=b(["(?:<=(?<stringBound>d+))"],["(?:<=(?<stringBound>\\d+))"]))),x=String.raw(a||(a=b(["(?:(?<unboundedArray>[])|[(?<arrayLength>d+)]|[<=(?<arrayBound>d+)])"],["(?:(?<unboundedArray>\\[\\])|\\[(?<arrayLength>\\d+)\\]|\\[<=(?<arrayBound>\\d+)\\])"]))),w=String.raw(o||(o=b(["(?<name>[a-zA-Z0-9_]+)"]))),_=String.raw(s||(s=b(["'(?:\\.|[^'\\])*'|\"(?:\\.|[^\"\\])*\""],["'(?:\\\\.|[^'\\\\])*'|\"(?:\\\\.|[^\"\\\\])*\""]))),S=String.raw(u||(u=b(["(?:","|(?:\\.|[^s'\"#\\])(?:\\.|[^#\\])*)"],["(?:","|(?:\\\\.|[^\\s'\"#\\\\])(?:\\\\.|[^#\\\\])*)"])),_),k=String.raw(l||(l=b(["(?:","|(?:\\.|[^s'\"],#\\])(?:\\.|[^],#\\])*)"],["(?:","|(?:\\\\.|[^\\s'\"\\],#\\\\])(?:\\\\.|[^\\],#\\\\])*)"])),_),M=String.raw(c||(c=b(["s*=s*(?<constantValue>","?)"],["\\s*=\\s*(?<constantValue>","?)"])),S),T=String.raw(h||(h=b(["[(?:",",)*","?]"],["\\[(?:",",)*","?\\]"])),k,k),E=String.raw(f||(f=b(["(?<defaultValue>","|",")"])),T,S),C=String.raw(d||(d=b(["(?:#.*)"]))),A=new RegExp(String.raw(p||(p=b(["^","","?","?s+","(?:","|s+",")?s*","?$"],["^","","?","?\\s+","(?:","|\\s+",")?\\s*","?$"])),n,g,x,w,M,E,C)),R=String.raw(v||(v=b(["\\(?<char>['\"abfnrtv\\])|\\(?<oct>[0-7]{1,3})|\\x(?<hex2>[a-fA-F0-9]{2})|\\u(?<hex4>[a-fA-F0-9]{4})|\\U(?<hex8>[a-fA-F0-9]{8})"],["\\\\(?<char>['\"abfnrtv\\\\])|\\\\(?<oct>[0-7]{1,3})|\\\\x(?<hex2>[a-fA-F0-9]{2})|\\\\u(?<hex4>[a-fA-F0-9]{4})|\\\\U(?<hex8>[a-fA-F0-9]{8})"]))),P=["bool","byte","char","float32","float64","int8","uint8","int16","uint16","int32","uint32","int64","uint64","string","wstring","time","duration","builtin_interfaces/Time","builtin_interfaces/Duration","builtin_interfaces/msg/Time","builtin_interfaces/msg/Duration"];function L(e,t,n){var r=BigInt(e);if(r<t||r>n)throw new Error("Number ".concat(e," out of range [").concat(t,", ").concat(n,"]"));return r}function O(e,t,n){var r=parseInt(e);if(Number.isNaN(r))throw new Error("Invalid numeric literal: ".concat(e));if(r<t||r>n)throw new Error("Number ".concat(e," out of range [").concat(t,", ").concat(n,"]"));return r}var N=new RegExp(k,"y"),D=new RegExp("\\s*(,)\\s*|\\s*$","y");function I(e,t){if(!t.startsWith("[")||!t.endsWith("]"))throw new Error("Array must start with [ and end with ]");var n=t.substring(1,t.length-1);if("string"===e||"wstring"===e){for(var r=[],i=0;i<n.length;){if(","===n[i])throw new Error("Expected array element before comma");N.lastIndex=i;var a=N.exec(n);if(a&&(r.push(j(a[0])),i=N.lastIndex),D.lastIndex=i,!(a=D.exec(n)))throw new Error("Expected comma or end of array");if(!a[1])break;i=D.lastIndex}return r}return n.split(",").map((function(t){return F(e,t.trim())}))}function j(e){for(var t="",n=e,r=0,i=["'",'"'];r<i.length;r++){var a=i[r];if(e.startsWith(a)){if(!e.endsWith(a))throw new Error("Expected terminating ".concat(a," in string literal: ").concat(e));t=a,n=e.substring(a.length,e.length-a.length);break}}if(void 0==!new RegExp(String.raw(m||(m=b(["^(?:[^\\","]|",")*$"],["^(?:[^\\\\","]|",")*$"])),t,R)).test(n))throw new Error("Invalid string literal: ".concat(n));return n.replace(new RegExp(R,"g"),(function(){var e,t,n=(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],r=n.char,i=n.oct,a=n.hex2,o=n.hex4,s=n.hex8,u=null!==(t=null!==a&&void 0!==a?a:o)&&void 0!==t?t:s;if(void 0!=r)return{"'":"'",'"':'"',a:"\x07",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","\\":"\\"}[r];if(void 0!=i)return String.fromCodePoint(parseInt(i,8));if(void 0!=u)return String.fromCodePoint(parseInt(u,16));throw new Error("Expected exactly one matched group")}))}function F(e,t){switch(e){case"bool":if(["true","True","1"].includes(t))return!0;if(["false","False","0"].includes(t))return!1;break;case"float32":case"float64":var n=parseFloat(t);if(!Number.isNaN(n))return n;break;case"int8":return O(t,-128,127);case"uint8":return O(t,0,255);case"int16":return O(t,-32768,32767);case"uint16":return O(t,0,65535);case"int32":return O(t,-2147483648,2147483647);case"uint32":return O(t,0,4294967295);case"int64":return L(t,~0x7fffffffffffffffn,0x7fffffffffffffffn);case"uint64":return L(t,0n,0xffffffffffffffffn);case"string":case"wstring":return j(t)}throw new Error("Invalid literal of type ".concat(e,": ").concat(t))}function z(e){switch(e){case"char":return"uint8";case"byte":return"int8";case"builtin_interfaces/Time":case"builtin_interfaces/msg/Time":return"time";case"builtin_interfaces/Duration":case"builtin_interfaces/msg/Duration":return"duration"}return e}t.buildRos2Type=function(e){var t,n,r=[],i=y(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.line,o=void 0;if(!a.startsWith("#"))if(o=/^MSG: ([^ ]+)\s*(?:#.+)?$/.exec(a))t=o[1];else{if(!(o=A.exec(a)))throw new Error("Could not parse line: '".concat(a,"'"));var s=o.groups,u=s.type,l=s.stringBound,c=s.unboundedArray,h=s.arrayLength,f=s.arrayBound,d=s.name,p=s.constantValue,v=s.defaultValue,m=z(u);if(void 0!=l&&"string"!==m&&"wstring"!==m)throw new Error("Invalid string bound for type ".concat(m));if(void 0!=p){if(!/^[A-Z](?:_?[A-Z0-9]+)*$/.test(d))throw new Error("Invalid constant name: ".concat(d))}else if(!/^[a-z](?:_?[a-z0-9]+)*$/.test(d))throw new Error("Invalid field name: ".concat(d));var g=!P.includes(m),b=void 0!=c||void 0!=h||void 0!=f;r.push({name:d,type:m,isComplex:void 0!=p?g||void 0:g,isConstant:void 0!=p||void 0,isArray:void 0!=p?b||void 0:b,arrayLength:void 0!=h?parseInt(h):void 0,arrayUpperBound:void 0!=f?parseInt(f):void 0,upperBound:void 0!=l?parseInt(l):void 0,defaultValue:void 0!=v?b?I(m,v.trim()):F(m,v.trim()):void 0,value:void 0!=p?F(m,p.trim()):void 0,valueText:null===p||void 0===p?void 0:p.trim()})}}}catch(x){i.e(x)}finally{i.f()}return{name:t,definitions:r}}},715:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(322),t),i(n(867),t),i(n(733),t),i(n(210),t)},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.md5=void 0;var r=n(417),i=new Set(["int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","string","bool","char","byte","time","duration"]);function a(e,t){var n,o="",s=e.definitions.filter((function(e){return e.isConstant})),u=e.definitions.filter((function(e){var t=e.isConstant;return void 0==t||!t})),l=y(s);try{for(l.s();!(n=l.n()).done;){var c,h=n.value;o+="".concat(h.type," ").concat(h.name,"=").concat(null!==(c=h.valueText)&&void 0!==c?c:String(h.value),"\n")}}catch(w){l.e(w)}finally{l.f()}var f,d,p=y(u);try{for(p.s();!(f=p.n()).done;){var v=f.value;if(d=v.type,i.has(d)){var m=void 0!=v.arrayLength?String(v.arrayLength):"",g=!0===v.isArray?"[".concat(m,"]"):"";o+="".concat(v.type).concat(g," ").concat(v.name,"\n")}else{var b=t.get(v.type);if(void 0==b)throw new Error('Missing definition for submessage type "'.concat(v.type,'"'));var x=a(b,t);o+="".concat(x," ").concat(v.name,"\n")}}}catch(w){p.e(w)}finally{p.f()}return o=o.trimEnd(),r.Md5.init(o)}t.md5=function(e){if(0===e.length)throw new Error("Cannot produce md5sum for empty msgDefs");var t,n=new Map,r=y(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!=i.name&&n.set(i.name,i)}}catch(o){r.e(o)}finally{r.f()}return a(e[0],n)}},867:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeType=t.fixupTypes=t.parse=t.ROS2IDL_GRAMMAR=void 0;var i=n(654),a=n(515),o=r(n(558)),s=r(n(568)),u=i.Grammar.fromCompiled(o.default);function l(e){e.forEach((function(t){t.definitions.forEach((function(t){if(!0===t.isComplex){var n=function(e,t){var n=e.filter((function(e){var n,r=null!==(n=e.name)&&void 0!==n?n:"";if(0===t.length)return 0===r.length;var i=t.includes("/")?t:"/".concat(t);return r.endsWith(i)}));if(void 0==n[0])throw new Error("Expected 1 top level type definition for '".concat(t,"' but found ").concat(n.length));return n[0]}(e,t.type).name;if(void 0==n)throw new Error("Missing type definition for ".concat(t.type));t.type=n}}))}))}function c(e,t){var n,r=[];return e.forEach((function(e){var a=e.line;if(a.startsWith("MSG:")){var o=function(e){return e.replace(/#.*/gi,"").split(" ").filter((function(e){return e}))}(a),s=_(o,2),u=(s[0],s[1]);n=null===u||void 0===u?void 0:u.trim()}else{var l=new i.Parser(t);l.feed(a);var c=l.finish();if(0===c.length)throw new Error("Could not parse line: '".concat(a,"'"));if(c.length>1)throw new Error("Ambiguous line: '".concat(a,"'"));var f=c[0];void 0!=f&&(f.type=h(f.type),r.push(f))}})),{name:n,definitions:r}}function h(e){return"char"===e?"uint8":"byte"===e?"int8":e}t.ROS2IDL_GRAMMAR=i.Grammar.fromCompiled(s.default),t.parse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e})),r=[],i=[];return n.forEach((function(e){e.startsWith("#")||(e.startsWith("==")?(i.push(!0===t.ros2?(0,a.buildRos2Type)(r):c(r,u)),r=[]):r.push({line:e}))})),i.push(!0===t.ros2?(0,a.buildRos2Type)(r):c(r,u)),!0!==t.skipTypeFixup&&l(i),i},t.fixupTypes=l,t.normalizeType=h},733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRos2idl=void 0;var r=n(654),i=n(867);function a(e,t){var n=e[e.length-1].definitions;n&&n.forEach((function(n){return a([].concat(w(e),[n]),t)})),t(e)}t.parseRos2idl=function(e){return function(e,t){var n=new r.Parser(t);n.feed(e);var o=n.finish();if(0===o.length)throw new Error("Could not parse message definition (unexpected end of input): '".concat(e,"'"));var s,u=function(e){var t,n=[],r=y(e);try{var i=function(){var e=t.value,r=new Map,i=new Map;a([e],(function(e){var t=e[e.length-1];if("typedef"===t.definitionType){t.definitionType,t.name;var n=g(t,k);r.set(t.name,n)}else!0===t.isConstant&&i.set(t.name,t.value)})),a([e],(function(t){var n,a=t[t.length-1];if(void 0==a.definitions){a.type&&r.has(a.type)&&Object.assign(a,S(S({},r.get(a.type)),{},{name:a.name}));var o,s=y(null!==(n=a.constantUsage)&&void 0!==n?n:[]);try{for(s.s();!(o=s.n()).done;){var u,l=_(o.value,2),c=l[0],h=l[1];if(!i.has(h))throw new Error("Could not find constant <".concat(h,"> for field <").concat(null!==(u=a.name)&&void 0!==u?u:"undefined","> in <").concat(e.name,">"));a[c]=i.get(h)}}catch(f){s.e(f)}finally{s.f()}delete a.constantUsage,void 0!=a.type&&(a.type=a.type.replace(/::/g,"/"))}}));var o=function(e){var t=[];return a([e],(function(e){var n=e[e.length-1];if("module"===n.definitionType){var r=n.definitions.filter((function(e){return"typedef"!==e.definitionType}));r.every((function(e){return e.isConstant}))&&t.push({name:e.map((function(e){return e.name})).join("/"),definitions:r})}else"struct"===n.definitionType&&t.push({name:e.map((function(e){return e.name})).join("/"),definitions:n.definitions})})),t}(e);n.push.apply(n,w(o))};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return n}(o[0]),l=y(u);try{for(l.s();!(s=l.n()).done;){var c,h=s.value.definitions,f=y(h);try{for(f.s();!(c=f.n()).done;){var d=c.value;d.type=(0,i.normalizeType)(d.type)}}catch(p){f.e(p)}finally{f.f()}}}catch(p){l.e(p)}finally{l.f()}return u}(e,i.ROS2IDL_GRAMMAR)}},210:function(e,t){"use strict";function n(e){return Array.isArray(e)?"[".concat(e.map((function(e){return"bigint"===typeof e?e.toString():JSON.stringify(e)})).join(", "),"]"):"bigint"===typeof e?e.toString():JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0,t.stringify=function(e){for(var t="",r=0;r<e.length;r++){var i,a=e[r],o=a.definitions.filter((function(e){return e.isConstant})),s=a.definitions.filter((function(e){var t=e.isConstant;return void 0==t||!t}));if(r>0)t+="\n================================================================================\n",t+="MSG: ".concat(null!==(i=a.name)&&void 0!==i?i:"","\n");var u,l=y(o);try{for(l.s();!(u=l.n()).done;){var c,h=u.value;t+="".concat(h.type," ").concat(h.name," = ").concat(null!==(c=h.valueText)&&void 0!==c?c:String(h.value),"\n")}}catch(x){l.e(x)}finally{l.f()}if(s.length>0){t.length>0&&(t+="\n");var f,d=y(s);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=void 0!=p.upperBound?"<=".concat(p.upperBound):"",m=void 0!=p.arrayLength?String(p.arrayLength):void 0!=p.arrayUpperBound?"<=".concat(p.arrayUpperBound):"",g=!0===p.isArray?"[".concat(m,"]"):"",b=void 0!=p.defaultValue?" ".concat(n(p.defaultValue)):"";t+="".concat(p.type).concat(v).concat(g," ").concat(p.name).concat(b,"\n")}}catch(x){d.e(x)}finally{d.f()}}}return t.trimEnd()}}},n={};function M(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,M),i.exports}M.d=function(e,t){for(var n in t)M.o(t,n)&&!M.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},M.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},M.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var T=M(715);e.exports=T}()},126:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7545:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(126),t),i(n(9745),t)},9745:function(e,t,n){"use strict";var r=n(7424).default;function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&(e.sec<0||e.nsec<0))throw new Error("Invalid negative time { sec: ".concat(e.sec,", nsec: ").concat(e.nsec," }"));var n=Math.floor(e.sec),r=Math.floor(e.nsec);return"".concat(n,".").concat(r.toFixed().padStart(9,"0"))}function a(e){var t=9-e.length;return Math.round(parseInt(e,10)*Math.pow(10,t))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.nsec,r=Math.floor(n/1e9),a=e.sec+r,o=n%1e9,s=Math.abs(-1===Math.sign(o)?1e9+o:o),u={sec:a,nsec:s};if(!t&&u.sec<0||u.nsec<0)throw new Error("Cannot normalize invalid time ".concat(i(u,!0)));return u}function s(e,t){var n=e.sec,r=e.nsec;return o({sec:n+t.sec,nsec:r+t.nsec})}function u(e,t){var n=e.sec,r=e.nsec;return o({sec:n-t.sec,nsec:r-t.nsec},!0)}function l(e){return e.sec+1e-9*e.nsec}function c(e){var t=Math.trunc(e),n=Math.round(1e9*(e-t));return{sec:t+=Math.trunc(n/1e9),nsec:n%=1e9}}function h(e,t){var n=e.sec-t.sec;return 0!==n?n:e.nsec-t.nsec}Object.defineProperty(t,"__esModule",{value:!0}),t.areEqual=t.isGreaterThan=t.isLessThan=t.compare=t.isTimeInRangeInclusive=t.clampTime=t.fromMicros=t.fromMillis=t.toMillis=t.fromNanoSec=t.fromSec=t.toSec=t.toMicroSec=t.toNanoSec=t.subtract=t.add=t.fixTime=t.interpolate=t.percentOf=t.fromDate=t.toDate=t.fromRFC3339String=t.toRFC3339String=t.fromString=t.toString=t.isTime=void 0,t.isTime=function(e){return"object"===typeof e&&!!e&&"sec"in e&&"nsec"in e&&2===Object.getOwnPropertyNames(e).length},t.toString=i,t.fromString=function(e){if(/^\d+\.?$/.test(e)){var t=parseInt(e,10);return{sec:isNaN(t)?0:t,nsec:0}}if(/^\d+\.\d+$/.test(e)){var n=e.split(".");if(0!==n.length){var i=r(n,2),s=i[0],u=i[1];if(void 0!=s&&void 0!=u){var l=parseInt(s,10),c=a(u);return o({sec:isNaN(l)?0:l,nsec:c})}}}},t.toRFC3339String=function(e){if(e.sec<0||e.nsec<0)throw new Error("Invalid negative time { sec: ".concat(e.sec,", nsec: ").concat(e.nsec," }"));if(e.nsec>=1e9)throw new Error("Invalid nanosecond value ".concat(e.nsec));var t=new Date(1e3*e.sec),n=t.getUTCFullYear(),r=(t.getUTCMonth()+1).toFixed().padStart(2,"0"),i=t.getUTCDate().toFixed().padStart(2,"0"),a=t.getUTCHours().toFixed().padStart(2,"0"),o=t.getUTCMinutes().toFixed().padStart(2,"0"),s=t.getUTCSeconds().toFixed().padStart(2,"0"),u=e.nsec.toFixed().padStart(9,"0");return"".concat(n,"-").concat(r,"-").concat(i,"T").concat(a,":").concat(o,":").concat(s,".").concat(u,"Z")},t.fromRFC3339String=function(e){var t=/^(\d{4,})-(\d\d)-(\d\d)[Tt](\d\d):(\d\d):(\d\d)(?:\.(\d+))?(?:[Zz]|([+-])(\d\d):(\d\d))$/.exec(e);if(null!=t){var n=r(t,11),i=n[1],s=n[2],u=n[3],l=n[4],c=n[5],h=n[6],f=n[7],d=n[8],p=n[9],v=n[10],m="-"===d?-1:1,g=Date.UTC(+i,+s-1,+u,+l-m*+(null!==p&&void 0!==p?p:0),+c-m*+(null!==v&&void 0!==v?v:0),+h);if(g%1e3===0)return o({sec:g/1e3,nsec:void 0!=f?a(f):0})}},t.toDate=function(e){var t=e.sec,n=e.nsec;return new Date(1e3*t+n/1e6)},t.fromDate=function(e){var t=e.getTime(),n=t%1e3;return{sec:Math.floor(t/1e3),nsec:1e6*n}},t.percentOf=function(e,t,n){var r=u(t,e);return l(u(n,e))/l(r)},t.interpolate=function(e,t,n){return s(e,c(n*l(u(t,e))))},t.fixTime=o,t.add=s,t.subtract=u,t.toNanoSec=function(e){var t=e.sec,n=e.nsec;return 1000000000n*BigInt(t)+BigInt(n)},t.toMicroSec=function(e){return(1e9*e.sec+e.nsec)/1e3},t.toSec=l,t.fromSec=c,t.fromNanoSec=function(e){return{sec:Number(e/1000000000n),nsec:Number(e%1000000000n)}},t.toMillis=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=1e3*e.sec,r=e.nsec/1e6;return t?n+Math.ceil(r):n+Math.floor(r)},t.fromMillis=function(e){var t=Math.trunc(e/1e3),n=Math.round(1e6*(e-1e3*t));return{sec:t+=Math.trunc(n/1e9),nsec:n%=1e9}},t.fromMicros=function(e){var t=Math.trunc(e/1e6),n=Math.round(1e3*(e-1e6*t));return{sec:t+=Math.trunc(n/1e9),nsec:n%=1e9}},t.clampTime=function(e,t,n){return h(t,e)>0?{sec:t.sec,nsec:t.nsec}:h(n,e)<0?{sec:n.sec,nsec:n.nsec}:{sec:e.sec,nsec:e.nsec}},t.isTimeInRangeInclusive=function(e,t,n){return!(h(t,e)>0||h(n,e)<0)},t.compare=h,t.isLessThan=function(e,t){return h(e,t)<0},t.isGreaterThan=function(e,t){return h(e,t)>0},t.areEqual=function(e,t){return e.sec===t.sec&&e.nsec===t.nsec}},4505:function(e,t,n){"use strict";var r=n(1725);function i(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return n.g.Buffer&&"function"===typeof n.g.Buffer.isBuffer?n.g.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=n(4613),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function h(e){return!a(e)&&("function"===typeof n.g.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=y,d=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(l)return e.name;var t=e.toString().match(d);return t&&t[1]}}function v(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(l||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function y(e,t){e||g(e,!0,t,"==",f.ok)}function b(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(h(e)&&h(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=x(e),a=x(t);if(i&&!a||!i&&a)return!1;if(i)return b(e=u.call(e),t=u.call(t),n);var s,l,c=S(e),h=S(t);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),l=c.length-1;l>=0;l--)if(c[l]!==h[l])return!1;for(l=c.length-1;l>=0;l--)if(!b(e[s=c[l]],t[s],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function x(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var a="string"===typeof r,s=!e&&i&&!n;if((!e&&o.isError(i)&&a&&w(i,n)||s)&&g(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}f.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return v(m(e.actual),128)+" "+e.operator+" "+v(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},o.inherits(f.AssertionError,Error),f.fail=g,f.ok=y,f.equal=function(e,t,n){e!=t&&g(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){b(e,t,!1)||g(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){b(e,t,!0)||g(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){b(e,t,!1)&&g(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){_(!0,e,t,n)},f.doesNotThrow=function(e,t,n){_(!1,e,t,n)},f.ifError=function(e){if(e)throw e},f.strict=r((function e(t,n){t||g(t,!0,n,"==",e)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var S=Object.keys||function(e){var t=[];for(var n in e)s.call(e,n)&&t.push(n);return t}},9842:function(e){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},6495:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},4613:function(e,t,n){var r=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,a=i.length,s=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}})),u=i[n];n<a;u=i[++n])p(u)||!b(u)?s+=" "+u:s+=" "+o(u);return s},t.deprecate=function(e,r){if(g(n.g.process))return function(){return t.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var i,a={};function o(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,e,r.depth)}function s(e,t){var n=o.styles[t];return n?"\x1b["+o.colors[n][0]+"m"+e+"\x1b["+o.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&_(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=l(e,i,r)),i}var a=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(p(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),w(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(n);if(0===o.length){if(_(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return c(n)}var b,S="",k=!1,M=["{","}"];(f(n)&&(k=!0,M=["[","]"]),_(n))&&(S=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(S=" "+RegExp.prototype.toString.call(n)),x(n)&&(S=" "+Date.prototype.toUTCString.call(n)),w(n)&&(S=" "+c(n)),0!==o.length||k&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),b=k?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)E(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return h(e,n,r,s,t,k)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(b,S,M)):M[0]+S+M[1]}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),E(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=p(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function f(e){return Array.isArray(e)}function d(e){return"boolean"===typeof e}function p(e){return null===e}function v(e){return"number"===typeof e}function m(e){return"string"===typeof e}function g(e){return void 0===e}function y(e){return b(e)&&"[object RegExp]"===S(e)}function b(e){return"object"===typeof e&&null!==e}function x(e){return b(e)&&"[object Date]"===S(e)}function w(e){return b(e)&&("[object Error]"===S(e)||e instanceof Error)}function _(e){return"function"===typeof e}function S(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(g(i)&&(i={NODE_ENV:"production",PUBLIC_URL:"/MotionComparator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=process.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=d,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=g,t.isRegExp=y,t.isObject=b,t.isDate=x,t.isError=w,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(6495);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=n(9842),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}},5524:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),a=e.getVersionPrecision(n),o=Math.max(i,a),s=0,u=e.map([t,n],(function(t){var n=o-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=o-Math.min(i,a)),o-=1;o>=s;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===s)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(a));var s=function(){var e=a[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=a.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},a=n(18);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}],(n=null)&&o(t.prototype,n),r&&o(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),a=u(n(94)),o=u(n(95)),s=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},a=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(i[t]=o,a+=1):"object"==typeof o&&(n[t]=o,r+=1)})),r>0){var o=Object.keys(n),u=s.default.find(o,(function(e){return t.isOS(e)}));if(u){var l=this.satisfies(n[u]);if(void 0!==l)return l}var c=s.default.find(o,(function(e){return t.isPlatform(e)}));if(c){var h=this.satisfies(n[c]);if(void 0!==h)return h}}if(a>0){var f=Object.keys(i),d=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==d)return this.compareVersion(i[d])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:a.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:a.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:a.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:a.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=o,e.exports=t.default}})},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},5641:function(e,t,n){e.exports=n(2132)},2132:function(e,t){var n,r,i;(function(){var a,o,s,u,l,c,h,f,d,p,v,m,g,y,b;s=Math.floor,p=Math.min,o=function(e,t){return e<t?-1:e>t?1:0},d=function(e,t,n,r,i){var a;if(null==n&&(n=0),null==i&&(i=o),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)i(t,e[a=s((n+r)/2)])<0?r=a:n=a+1;return[].splice.apply(e,[n,n-n].concat(t)),t},c=function(e,t,n){return null==n&&(n=o),e.push(t),y(e,0,e.length-1,n)},l=function(e,t){var n,r;return null==t&&(t=o),n=e.pop(),e.length?(r=e[0],e[0]=n,b(e,0,t)):r=n,r},f=function(e,t,n){var r;return null==n&&(n=o),r=e[0],e[0]=t,b(e,0,n),r},h=function(e,t,n){var r;return null==n&&(n=o),e.length&&n(e[0],t)<0&&(t=(r=[e[0],t])[0],e[0]=r[1],b(e,0,n)),t},u=function(e,t){var n,r,i,a,u,l;for(null==t&&(t=o),a=function(){l=[];for(var t=0,n=s(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],r=0,i=a.length;r<i;r++)n=a[r],u.push(b(e,n,t));return u},g=function(e,t,n){var r;if(null==n&&(n=o),-1!==(r=e.indexOf(t)))return y(e,0,r,n),b(e,r,n)},v=function(e,t,n){var r,i,a,s,l;if(null==n&&(n=o),!(i=e.slice(0,t)).length)return i;for(u(i,n),a=0,s=(l=e.slice(t)).length;a<s;a++)r=l[a],h(i,r,n);return i.sort(n).reverse()},m=function(e,t,n){var r,i,a,s,c,h,f,v,m;if(null==n&&(n=o),10*t<=e.length){if(!(a=e.slice(0,t).sort(n)).length)return a;for(i=a[a.length-1],s=0,h=(f=e.slice(t)).length;s<h;s++)n(r=f[s],i)<0&&(d(a,r,0,null,n),a.pop(),i=a[a.length-1]);return a}for(u(e,n),m=[],c=0,v=p(t,e.length);0<=v?c<v:c>v;0<=v?++c:--c)m.push(l(e,n));return m},y=function(e,t,n,r){var i,a,s;for(null==r&&(r=o),i=e[n];n>t&&r(i,a=e[s=n-1>>1])<0;)e[n]=a,n=s;return e[n]=i},b=function(e,t,n){var r,i,a,s,u;for(null==n&&(n=o),i=e.length,u=t,a=e[t],r=2*t+1;r<i;)(s=r+1)<i&&!(n(e[r],e[s])<0)&&(r=s),e[t]=e[r],r=2*(t=r)+1;return e[t]=a,y(e,u,t,n)},a=function(){function e(e){this.cmp=null!=e?e:o,this.nodes=[]}return e.push=c,e.pop=l,e.replace=f,e.pushpop=h,e.heapify=u,e.updateItem=g,e.nlargest=v,e.nsmallest=m,e.prototype.push=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pop=function(){return l(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return f(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return u(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return g(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),r=[],void 0===(i="function"===typeof(n=function(){return a})?n.apply(t,r):n)||(e.exports=i)}).call(this)},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{l(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case l:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===c},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},908:function(e,t,n){var r=n(8136)(n(7009),"DataView");e.exports=r},9676:function(e,t,n){var r=n(5403),i=n(2747),a=n(6037),o=n(4154),s=n(7728);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},8384:function(e,t,n){var r=n(3894),i=n(8699),a=n(4957),o=n(7184),s=n(7109);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},5797:function(e,t,n){var r=n(8136)(n(7009),"Map");e.exports=r},8059:function(e,t,n){var r=n(4086),i=n(9255),a=n(9186),o=n(3423),s=n(3739);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exports=u},8319:function(e,t,n){var r=n(8136)(n(7009),"Promise");e.exports=r},3924:function(e,t,n){var r=n(8136)(n(7009),"Set");e.exports=r},692:function(e,t,n){var r=n(8059),i=n(5774),a=n(1596);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},2854:function(e,t,n){var r=n(8384),i=n(511),a=n(835),o=n(707),s=n(8832),u=n(5077);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,e.exports=l},7197:function(e,t,n){var r=n(7009).Symbol;e.exports=r},6219:function(e,t,n){var r=n(7009).Uint8Array;e.exports=r},7091:function(e,t,n){var r=n(8136)(n(7009),"WeakMap");e.exports=r},4903:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},7538:function(e,t,n){var r=n(6478),i=n(4963),a=n(3629),o=n(5174),s=n(6800),u=n(9102),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),c=!n&&i(e),h=!n&&!c&&o(e),f=!n&&!c&&!h&&u(e),d=n||c||h||f,p=d?r(e.length,String):[],v=p.length;for(var m in e)!t&&!l.call(e,m)||d&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},1705:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},7897:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7112:function(e,t,n){var r=n(9231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1986:function(e,t,n){var r=n(1705),i=n(3629);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},9066:function(e,t,n){var r=n(7197),i=n(1587),a=n(3581),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},4906:function(e,t,n){var r=n(9066),i=n(3141);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},1848:function(e,t,n){var r=n(3355),i=n(3141);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,s))}},3355:function(e,t,n){var r=n(2854),i=n(5305),a=n(2206),o=n(8078),s=n(8383),u=n(3629),l=n(5174),c=n(9102),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var y=u(e),b=u(t),x=y?f:s(e),w=b?f:s(t),_=(x=x==h?d:x)==d,S=(w=w==h?d:w)==d,k=x==w;if(k&&l(e)){if(!l(t))return!1;y=!0,_=!1}if(k&&!_)return g||(g=new r),y||c(e)?i(e,t,n,v,m,g):a(e,t,x,n,v,m,g);if(!(1&n)){var M=_&&p.call(e,"__wrapped__"),T=S&&p.call(t,"__wrapped__");if(M||T){var E=M?e.value():e,C=T?t.value():t;return g||(g=new r),m(E,C,n,v,g)}}return!!k&&(g||(g=new r),o(e,t,n,v,m,g))}},6703:function(e,t,n){var r=n(4786),i=n(257),a=n(8092),o=n(7907),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?f:s).test(o(e))}},8150:function(e,t,n){var r=n(9066),i=n(4635),a=n(3141),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},3654:function(e,t,n){var r=n(2936),i=n(8836),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},6478:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},821:function(e,t,n){var r=n(6050),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},6194:function(e){e.exports=function(e){return function(t){return e(t)}}},75:function(e){e.exports=function(e,t){return e.has(t)}},5525:function(e,t,n){var r=n(7009)["__core-js_shared__"];e.exports=r},5305:function(e,t,n){var r=n(692),i=n(7897),a=n(75);e.exports=function(e,t,n,o,s,u){var l=1&n,c=e.length,h=t.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(e),d=u.get(t);if(f&&d)return f==t&&d==e;var p=-1,v=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<c;){var g=e[p],y=t[p];if(o)var b=l?o(y,g,p,t,e,u):o(g,y,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!i(t,(function(e,t){if(!a(m,t)&&(g===e||s(g,e,n,o,u)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!s(g,y,n,o,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},2206:function(e,t,n){var r=n(7197),i=n(6219),a=n(9231),o=n(5305),s=n(234),u=n(2230),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,h,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var p=1&r;if(d||(d=u),e.size!=t.size&&!p)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var m=o(d(e),d(t),r,l,h,f);return f.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},8078:function(e,t,n){var r=n(8248),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var u=1&n,l=r(e),c=l.length;if(c!=r(t).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in t:i.call(t,f)))return!1}var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=u;++h<c;){var g=e[f=l[h]],y=t[f];if(a)var b=u?a(y,g,f,t,e,s):a(g,y,f,e,t,s);if(!(void 0===b?g===y||o(g,y,n,a,s):b)){v=!1;break}m||(m="constructor"==f)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(e),s.delete(t),v}},1032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8248:function(e,t,n){var r=n(1986),i=n(5918),a=n(2742);e.exports=function(e){return r(e,a,i)}},2799:function(e,t,n){var r=n(5964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},8136:function(e,t,n){var r=n(6703),i=n(40);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},1587:function(e,t,n){var r=n(7197),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},5918:function(e,t,n){var r=n(4903),i=n(8174),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},8383:function(e,t,n){var r=n(908),i=n(5797),a=n(8319),o=n(3924),s=n(7091),u=n(9066),l=n(7907),c="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",v=l(r),m=l(i),g=l(a),y=l(o),b=l(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=c||a&&x(a.resolve())!=h||o&&x(new o)!=f||s&&x(new s)!=d)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return p;case m:return c;case g:return h;case y:return f;case b:return d}return t}),e.exports=x},40:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},5403:function(e,t,n){var r=n(9620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6037:function(e,t,n){var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},4154:function(e,t,n){var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},7728:function(e,t,n){var r=n(9620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},5964:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var r=n(5525),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},2936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var r=n(7112),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4957:function(e,t,n){var r=n(7112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7184:function(e,t,n){var r=n(7112);e.exports=function(e){return r(this.__data__,e)>-1}},7109:function(e,t,n){var r=n(7112);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4086:function(e,t,n){var r=n(9676),i=n(8384),a=n(5797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},9255:function(e,t,n){var r=n(2799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},9186:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).get(e)}},3423:function(e,t,n){var r=n(2799);e.exports=function(e){return r(this,e).has(e)}},3739:function(e,t,n){var r=n(2799);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},9620:function(e,t,n){var r=n(8136)(Object,"create");e.exports=r},8836:function(e,t,n){var r=n(2709)(Object.keys,Object);e.exports=r},9494:function(e,t,n){e=n.nmd(e);var r=n(1032),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7009:function(e,t,n){var r=n(1032),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},5774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1596:function(e){e.exports=function(e){return this.__data__.has(e)}},2230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},511:function(e,t,n){var r=n(8384);e.exports=function(){this.__data__=new r,this.size=0}},835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},707:function(e){e.exports=function(e){return this.__data__.get(e)}},8832:function(e){e.exports=function(e){return this.__data__.has(e)}},5077:function(e,t,n){var r=n(8384),i=n(5797),a=n(8059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},7907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},6050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8573:function(e,t,n){var r=n(8092),i=n(72),a=n(2582),o=Math.max,s=Math.min;e.exports=function(e,t,n){var u,l,c,h,f,d,p=0,v=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=u,r=l;return u=l=void 0,p=t,h=e.apply(r,n)}function b(e){return p=e,f=setTimeout(w,t),v?y(e):h}function x(e){var n=e-d;return void 0===d||n>=t||n<0||m&&e-p>=c}function w(){var e=i();if(x(e))return _(e);f=setTimeout(w,function(e){var n=t-(e-d);return m?s(n,c-(e-p)):n}(e))}function _(e){return f=void 0,g&&u?y(e):(u=l=void 0,h)}function S(){var e=i(),n=x(e);if(u=arguments,l=this,d=e,n){if(void 0===f)return b(d);if(m)return clearTimeout(f),f=setTimeout(w,t),y(d)}return void 0===f&&(f=setTimeout(w,t)),h}return t=a(t)||0,r(n)&&(v=!!n.leading,c=(m="maxWait"in n)?o(a(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g),S.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=d=l=f=void 0},S.flush=function(){return void 0===f?h:_(i())},S}},9231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},4963:function(e,t,n){var r=n(4906),i=n(3141),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},3629:function(e){var t=Array.isArray;e.exports=t},1473:function(e,t,n){var r=n(4786),i=n(4635);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},5174:function(e,t,n){e=n.nmd(e);var r=n(7009),i=n(9488),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u},8111:function(e,t,n){var r=n(1848);e.exports=function(e,t){return r(e,t)}},4786:function(e,t,n){var r=n(9066),i=n(8092);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,t,n){var r=n(9066),i=n(3141);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},9102:function(e,t,n){var r=n(8150),i=n(6194),a=n(9494),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},2742:function(e,t,n){var r=n(7538),i=n(3654),a=n(1473);e.exports=function(e){return a(e)?r(e):i(e)}},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,h=128,f=256,d=1/0,p=9007199254740991,v=NaN,m=4294967295,g=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",f]],y="[object Arguments]",b="[object Array]",x="[object Boolean]",w="[object Date]",_="[object Error]",S="[object Function]",k="[object GeneratorFunction]",M="[object Map]",T="[object Number]",E="[object Object]",C="[object Promise]",A="[object RegExp]",R="[object Set]",P="[object String]",L="[object Symbol]",O="[object WeakMap]",N="[object ArrayBuffer]",D="[object DataView]",I="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",W=/\b__p \+= '';/g,Z=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(q.source),K=RegExp(X.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Te="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="['\u2019]",Pe="[\\ud800-\\udfff]",Le="["+Ae+"]",Oe="["+ke+"]",Ne="\\d+",De="[\\u2700-\\u27bf]",Ie="["+Te+"]",je="[^\\ud800-\\udfff"+Ae+Ne+Me+Te+Ee+"]",Fe="\\ud83c[\\udffb-\\udfff]",ze="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ee+"]",Ge="(?:"+Ie+"|"+je+")",He="(?:"+Ve+"|"+je+")",We="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+Oe+"|"+Fe+")"+"?",qe="[\\ufe0e\\ufe0f]?",Xe=qe+$e+("(?:\\u200d(?:"+[ze,Be,Ue].join("|")+")"+qe+$e+")*"),Ye="(?:"+[De,Be,Ue].join("|")+")"+Xe,Ke="(?:"+[ze+Oe+"?",Oe,Be,Ue,Pe].join("|")+")",Je=RegExp(Re,"g"),Qe=RegExp(Oe,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Ke+Xe,"g"),tt=RegExp([Ve+"?"+Ie+"+"+We+"(?="+[Le,Ve,"$"].join("|")+")",He+"+"+Ze+"(?="+[Le,Ve+Ge,"$"].join("|")+")",Ve+"?"+Ge+"+"+We,Ve+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Ye].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+ke+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ot={};ot[I]=ot[j]=ot[F]=ot[z]=ot[B]=ot[U]=ot[V]=ot[G]=ot[H]=!0,ot[y]=ot[b]=ot[N]=ot[x]=ot[D]=ot[w]=ot[_]=ot[S]=ot[M]=ot[T]=ot[E]=ot[A]=ot[R]=ot[P]=ot[O]=!1;var st={};st[y]=st[b]=st[N]=st[D]=st[x]=st[w]=st[I]=st[j]=st[F]=st[z]=st[B]=st[M]=st[T]=st[E]=st[A]=st[R]=st[P]=st[L]=st[U]=st[V]=st[G]=st[H]=!0,st[_]=st[S]=st[O]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ht="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,dt=ht||ft||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,gt=mt&&ht.process,yt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),bt=yt&&yt.isArrayBuffer,xt=yt&&yt.isDate,wt=yt&&yt.isMap,_t=yt&&yt.isRegExp,St=yt&&yt.isSet,kt=yt&&yt.isTypedArray;function Mt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Dt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function It(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Wt("length");function zt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ut(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Gt,n)}function Vt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Gt(e){return e!==e}function Ht(e,t){var n=null==e?0:e.length;return n?qt(e,t)/n:v}function Wt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function $t(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function qt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Kt(e){return function(t){return e(t)}}function Jt(e,t){return Ot(t,(function(t){return e[t]}))}function Qt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n=(t=null==t?dt:gn.defaults(dt.Object(),t,gn.pick(dt,it))).Array,r=t.Date,se=t.Error,ke=t.Function,Me=t.Math,Te=t.Object,Ee=t.RegExp,Ce=t.String,Ae=t.TypeError,Re=n.prototype,Pe=ke.prototype,Le=Te.prototype,Oe=t["__core-js_shared__"],Ne=Pe.toString,De=Le.hasOwnProperty,Ie=0,je=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Le.toString,ze=Ne.call(Te),Be=dt._,Ue=Ee("^"+Ne.call(De).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=mt?t.Buffer:i,Ge=t.Symbol,He=t.Uint8Array,We=Ve?Ve.allocUnsafe:i,Ze=ln(Te.getPrototypeOf,Te),$e=Te.create,qe=Le.propertyIsEnumerable,Xe=Re.splice,Ye=Ge?Ge.isConcatSpreadable:i,Ke=Ge?Ge.iterator:i,et=Ge?Ge.toStringTag:i,nt=function(){try{var e=fa(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ht=r&&r.now!==dt.Date.now&&r.now,ft=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Me.ceil,vt=Me.floor,gt=Te.getOwnPropertySymbols,yt=Ve?Ve.isBuffer:i,Ft=t.isFinite,Zt=Re.join,yn=ln(Te.keys,Te),bn=Me.max,xn=Me.min,wn=r.now,_n=t.parseInt,Sn=Me.random,kn=Re.reverse,Mn=fa(t,"DataView"),Tn=fa(t,"Map"),En=fa(t,"Promise"),Cn=fa(t,"Set"),An=fa(t,"WeakMap"),Rn=fa(Te,"create"),Pn=An&&new An,Ln={},On=za(Mn),Nn=za(Tn),Dn=za(En),In=za(Cn),jn=za(An),Fn=Ge?Ge.prototype:i,zn=Fn?Fn.valueOf:i,Bn=Fn?Fn.toString:i;function Un(e){if(rs(e)&&!Zo(e)&&!(e instanceof Wn)){if(e instanceof Hn)return e;if(De.call(e,"__wrapped__"))return Ba(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!ns(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Gn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new $n(e);this.size=t.size}function Kn(e,t){var n=Zo(e),r=!n&&Wo(e),i=!n&&!r&&Yo(e),a=!n&&!r&&!i&&hs(e),o=n||r||i||a,s=o?Xt(e.length,Ce):[],u=s.length;for(var l in e)!t&&!De.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ba(l,u))||s.push(l);return s}function Jn(e){var t=e.length;return t?e[Xr(0,t-1)]:i}function Qn(e,t){return Ia(Ri(e),ur(t,0,e.length))}function er(e){return Ia(Ri(e))}function tr(e,t,n){(n!==i&&!Vo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&Vo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Vo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Pi(t,Os(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Cs(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,a,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ns(e))return e;var h=Zo(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ri(e,s)}else{var f=va(e),d=f==S||f==k;if(Yo(e))return ki(e,u);if(f==E||f==y||d&&!a){if(s=l||d?{}:ga(e),!u)return l?function(e,t){return Pi(e,pa(e),t)}(e,function(e,t){return e&&Pi(t,Ns(t),e)}(s,e)):function(e,t){return Pi(e,da(e),t)}(e,ar(s,e))}else{if(!st[f])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case N:return Mi(e);case x:case w:return new r(+e);case D:return function(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case I:case j:case F:case z:case B:case U:case V:case G:case H:return Ti(e,n);case M:return new r;case T:case P:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case L:return i=e,zn?Te(zn.call(i)):{}}var i}(e,f,u)}}o||(o=new Yn);var p=o.get(e);if(p)return p;o.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,o))})):is(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,o))}));var v=h?i:(c?l?aa:ia:l?Ns:Os)(e);return Et(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,lr(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function hr(e,t,n){if("function"!=typeof e)throw new Ae(a);return La((function(){e.apply(i,n)}),t)}function fr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Ot(t,Kt(n))),r?(a=Lt,o=!1):t.length>=200&&(a=Qt,o=!1,t=new Xn(t));e:for(;++i<s;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,o&&h===h){for(var f=l;f--;)if(t[f]===h)continue e;u.push(c)}else a(t,h,r)||u.push(c)}return u}Un.templateSettings={escape:J,evaluate:Q,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=Gn.prototype,Un.prototype.constructor=Un,Hn.prototype=Vn(Gn.prototype),Hn.prototype.constructor=Hn,Wn.prototype=Vn(Gn.prototype),Wn.prototype.constructor=Wn,Zn.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},Zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Zn.prototype.get=function(e){var t=this.__data__;if(Rn){var n=t[e];return n===o?i:n}return De.call(t,e)?t[e]:i},Zn.prototype.has=function(e){var t=this.__data__;return Rn?t[e]!==i:De.call(t,e)},Zn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&t===i?o:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},$n.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},$n.prototype.has=function(e){return rr(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Zn,map:new(Tn||$n),string:new Zn}},qn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ca(this,e).get(e)},qn.prototype.has=function(e){return ca(this,e).has(e)},qn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,o),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new $n,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ni(wr),pr=Ni(_r,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!cs(s):n(s,u)))var u=s,l=o}return l}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Nt(i,s):r||(i[i.length]=s)}return i}var br=Di(),xr=Di(!0);function wr(e,t){return e&&br(e,t,Os)}function _r(e,t){return e&&xr(e,t,Os)}function Sr(e,t){return Rt(t,(function(t){return Qo(e[t])}))}function kr(e,t){for(var n=0,r=(t=xi(t,e)).length;null!=e&&n<r;)e=e[Fa(t[n++])];return n&&n==r?e:i}function Mr(e,t,n){var r=t(e);return Zo(e)?r:Nt(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Te(e)?function(e){var t=De.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(o){}var a=Fe.call(e);r&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Fe.call(e)}(e)}function Er(e,t){return e>t}function Cr(e,t){return null!=e&&De.call(e,t)}function Ar(e,t){return null!=e&&t in Te(e)}function Rr(e,t,r){for(var a=r?Lt:Pt,o=e[0].length,s=e.length,u=s,l=n(s),c=1/0,h=[];u--;){var f=e[u];u&&t&&(f=Ot(f,Kt(t))),c=xn(f.length,c),l[u]=!r&&(t||o>=120&&f.length>=120)?new Xn(u&&f):i}f=e[0];var d=-1,p=l[0];e:for(;++d<o&&h.length<c;){var v=f[d],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?Qt(p,m):a(h,m,r))){for(u=s;--u;){var g=l[u];if(!(g?Qt(g,m):a(e[u],m,r)))continue e}p&&p.push(m),h.push(v)}}return h}function Pr(e,t,n){var r=null==(e=Ca(e,t=xi(t,e)))?e:e[Fa(Ka(t))];return null==r?i:Mt(r,e,n)}function Lr(e){return rs(e)&&Tr(e)==y}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Zo(e),u=Zo(t),l=s?b:va(e),c=u?b:va(t),h=(l=l==y?E:l)==E,f=(c=c==y?E:c)==E,d=l==c;if(d&&Yo(e)){if(!Yo(t))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Yn),s||hs(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!a(new He(e),new He(t)));case x:case w:case T:return Vo(+e,+t);case _:return e.name==t.name&&e.message==t.message;case A:case P:return e==t+"";case M:var s=un;case R:var u=1&r;if(s||(s=hn),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=na(s(e),s(t),r,i,a,o);return o.delete(e),c;case L:if(zn)return zn.call(e)==zn.call(t)}return!1}(e,t,l,n,r,a,o);if(!(1&n)){var p=h&&De.call(e,"__wrapped__"),v=f&&De.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return o||(o=new Yn),a(m,g,n,r,o)}}if(!d)return!1;return o||(o=new Yn),function(e,t,n,r,a,o){var s=1&n,u=ia(e),l=u.length,c=ia(t).length;if(l!=c&&!s)return!1;var h=l;for(;h--;){var f=u[h];if(!(s?f in t:De.call(t,f)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++h<l;){var g=e[f=u[h]],y=t[f];if(r)var b=s?r(y,g,f,t,e,o):r(g,y,f,e,t,o);if(!(b===i?g===y||a(g,y,n,r,o):b)){v=!1;break}m||(m="constructor"==f)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Or,a))}function Nr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Te(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var l=(u=n[a])[0],c=e[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var f=new Yn;if(r)var d=r(c,h,l,e,t,f);if(!(d===i?Or(h,c,3,r,f):d))return!1}}return!0}function Dr(e){return!(!ns(e)||(t=e,je&&je in t))&&(Qo(e)?Ue:ye).test(za(e));var t}function Ir(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Zo(e)?Vr(e[0],e[1]):Ur(e):pu(e)}function jr(e){if(!ka(e))return yn(e);var t=[];for(var n in Te(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function zr(e,t){return e<t}function Br(e,t){var r=-1,i=qo(e)?n(e.length):[];return dr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Ur(e){var t=ha(e);return 1==t.length&&t[0][2]?Ta(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Vr(e,t){return wa(e)&&Ma(t)?Ta(Fa(e),t):function(n){var r=Cs(n,e);return r===i&&r===t?As(n,e):Or(t,r,3)}}function Gr(e,t,n,r,a){e!==t&&br(t,(function(o,s){if(a||(a=new Yn),ns(o))!function(e,t,n,r,a,o,s){var u=Ra(e,n),l=Ra(t,n),c=s.get(l);if(c)return void tr(e,n,c);var h=o?o(u,l,n+"",e,t,s):i,f=h===i;if(f){var d=Zo(l),p=!d&&Yo(l),v=!d&&!p&&hs(l);h=l,d||p||v?Zo(u)?h=u:Xo(u)?h=Ri(u):p?(f=!1,h=ki(l,!0)):v?(f=!1,h=Ti(l,!0)):h=[]:os(l)||Wo(l)?(h=u,Wo(u)?h=bs(u):ns(u)&&!Qo(u)||(h=ga(l))):f=!1}f&&(s.set(l,h),a(h,l,r,o,s),s.delete(l));tr(e,n,h)}(e,t,s,n,Gr,r,a);else{var u=r?r(Ra(e,s),o,s+"",e,t,a):i;u===i&&(u=o),tr(e,s,u)}}),Ns)}function Hr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Wr(e,t,n){t=t.length?Ot(t,(function(e){return Zo(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[au];var r=-1;t=Ot(t,Kt(la()));var i=Br(e,(function(e,n,i){var a=Ot(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Ei(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Zr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&ei(a,xi(o,e),s)}return a}function $r(e,t,n,r){var i=r?Vt:Ut,a=-1,o=t.length,s=e;for(e===t&&(t=Ri(t)),n&&(s=Ot(e,Kt(n)));++a<o;)for(var u=0,l=t[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Xe.call(s,u,1),Xe.call(e,u,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?Xe.call(e,i,1):fi(e,i)}}return e}function Xr(e,t){return e+vt(Sn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Kr(e,t){return Oa(Ea(e,t,au),e+"")}function Jr(e){return Jn(Vs(e))}function Qr(e,t){var n=Vs(e);return Ia(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var a=-1,o=(t=xi(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var l=Fa(t[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(a!=s){var h=u[l];(c=r?r(h,l,u):i)===i&&(c=ns(h)?h:ba(t[a+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ti=Pn?function(e,t){return Pn.set(e,t),e}:au,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:au;function ri(e){return Ia(Vs(e))}function ii(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,au,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,l=cs(t),c=t===i;a<o;){var h=vt((a+o)/2),f=n(e[h]),d=f!==i,p=null===f,v=f===f,m=cs(f);if(s)var g=r||v;else g=c?v&&(r||d):u?v&&d&&(r||!p):l?v&&d&&!p&&(r||!m):!p&&!m&&(r?f<=t:f<t);g?a=h+1:o=h}return xn(o,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Vo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function li(e){return"number"==typeof e?e:cs(e)?v:+e}function ci(e){if("string"==typeof e)return e;if(Zo(e))return Ot(e,ci)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hi(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Lt;else if(a>=200){var l=t?null:Yi(e);if(l)return hn(l);o=!1,i=Qt,u=new Xn}else u=t?[]:s;e:for(;++r<a;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function fi(e,t){return null==(e=Ca(e,t=xi(t,e)))||delete e[Fa(Ka(t))]}function di(e,t,n,r){return ei(e,t,n(kr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?hi(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=fr(o[a]||s,e[u],t,r));return hi(yr(o,1),t,r)}function gi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function yi(e){return Xo(e)?e:[]}function bi(e){return"function"==typeof e?e:au}function xi(e,t){return Zo(e)?e:wa(e,t)?[e]:ja(xs(e))}var wi=Kr;function _i(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=ut||function(e){return dt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Mi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ti(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=cs(e),s=t!==i,u=null===t,l=t===t,c=cs(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!a)return 1;if(!r&&!o&&!c&&e<t||c&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}function Ci(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,l=t.length,c=bn(o-s,0),h=n(l+c),f=!i;++u<l;)h[u]=t[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=e[a]);for(;c--;)h[u++]=e[a++];return h}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,l=-1,c=t.length,h=bn(o-u,0),f=n(h+c),d=!i;++a<h;)f[a]=e[a];for(var p=a;++l<c;)f[p+l]=t[l];for(;++s<u;)(d||a<o)&&(f[p+r[s]]=e[a++]);return f}function Ri(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Pi(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):i;l===i&&(l=e[u]),a?or(n,u,l):nr(n,u,l)}return n}function Li(e,t){return function(n,r){var i=Zo(n)?Tt:ir,a=t?t():{};return i(n,e,la(r,2),a)}}function Oi(e){return Kr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&xa(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Te(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Ni(e,t){return function(n,r){if(null==n)return n;if(!qo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Te(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,a=Te(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Ii(e){return function(t){var n=sn(t=xs(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?_i(n,1).join(""):t.slice(1);return r[e]()+a}}function ji(e){return function(t){return Dt(Qs(Ws(t).replace(Je,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function zi(e){return function(t,n,r){var a=Te(t);if(!qo(t)){var o=la(n,3);t=Os(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ra((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ae(a);if(o&&!u&&"wrapper"==sa(s))var u=new Hn([],!0)}for(r=u?r:n;++r<n;){var l=sa(s=t[r]),c="wrapper"==l?oa(s):i;u=c&&_a(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[sa(c[0])].apply(u,c[3]):1==s.length&&_a(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Zo(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ui(e,t,r,a,o,s,u,l,c,f){var d=t&h,p=1&t,v=2&t,m=24&t,g=512&t,y=v?i:Fi(e);return function i(){for(var h=arguments.length,b=n(h),x=h;x--;)b[x]=arguments[x];if(m)var w=ua(i),_=nn(b,w);if(a&&(b=Ci(b,a,o,m)),s&&(b=Ai(b,s,u,m)),h-=_,m&&h<f){var S=cn(b,w);return qi(e,t,Ui,i.placeholder,r,b,S,l,c,f-h)}var k=p?r:this,M=v?k[e]:e;return h=b.length,l?b=Aa(b,l):g&&h>1&&b.reverse(),d&&c<h&&(b.length=c),this&&this!==dt&&this instanceof i&&(M=y||Fi(M)),M.apply(k,b)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Gi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),a=e(n,r)}return a}}function Hi(e){return ra((function(t){return t=Ot(t,Kt(la())),Kr((function(n){var r=this;return e(t,(function(e){return Mt(e,r,n)}))}))}))}function Wi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/dn(t)));return sn(t)?_i(pn(r),0,e).join(""):r.slice(0,e)}function Zi(e){return function(t,r,a){return a&&"number"!=typeof a&&xa(t,r,a)&&(r=a=i),t=vs(t),r===i?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var a=-1,o=bn(pt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:vs(a),e)}}function $i(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,u,h,f){var d=8&t;t|=d?l:c,4&(t&=~(d?c:l))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,h,f],v=n.apply(i,p);return _a(e)&&Pa(v,p),v.placeholder=r,Na(v,e,t)}function Xi(e){var t=Me[e];return function(e,n){if(e=ys(e),(n=null==n?0:xn(ms(n),292))&&Ft(e)){var r=(xs(e)+"e").split("e");return+((r=(xs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Cn&&1/hn(new Cn([,-0]))[1]==d?function(e){return new Cn(e)}:cu;function Ki(e){return function(t){var n=va(t);return n==M?un(t):n==R?fn(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,o,d,p,v,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Ae(a);var y=o?o.length:0;if(y||(t&=-97,o=d=i),v=v===i?v:bn(ms(v),0),m=m===i?m:ms(m),y-=d?d.length:0,t&c){var b=o,x=d;o=d=i}var w=g?i:oa(e),_=[e,t,r,o,d,b,x,p,v,m];if(w&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==h&&8==n||r==h&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ci(l,u,t[4]):u,e[4]=l?cn(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Ai(l,u,t[6]):u,e[6]=l?cn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&h&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(_,w),e=_[0],t=_[1],r=_[2],o=_[3],d=_[4],!(m=_[9]=_[9]===i?g?0:e.length:bn(_[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var a=Fi(e);return function o(){for(var s=arguments.length,u=n(s),l=s,c=ua(o);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:cn(u,c);return(s-=h.length)<r?qi(e,t,Ui,o.placeholder,i,u,h,i,i,r-s):Mt(this&&this!==dt&&this instanceof o?a:e,this,u)}}(e,t,m):t!=l&&33!=t||d.length?Ui.apply(i,_):function(e,t,r,i){var a=1&t,o=Fi(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=n(c+u),f=this&&this!==dt&&this instanceof t?o:e;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return Mt(f,a?r:this,h)}}(e,t,r,o);else var S=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Na((w?ti:Pa)(S,_),e,t)}function Qi(e,t,n,r){return e===i||Vo(e,Le[n])&&!De.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ns(e)&&ns(t)&&(o.set(t,e),Gr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return os(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),h=o.get(t);if(c&&h)return c==t&&h==e;var f=-1,d=!0,p=2&n?new Xn:i;for(o.set(e,t),o.set(t,e);++f<u;){var v=e[f],m=t[f];if(r)var g=s?r(m,v,f,t,e,o):r(v,m,f,e,t,o);if(g!==i){if(g)continue;d=!1;break}if(p){if(!jt(t,(function(e,t){if(!Qt(p,t)&&(v===e||a(v,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(v!==m&&!a(v,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ra(e){return Oa(Ea(e,i,Za),e+"")}function ia(e){return Mr(e,Os,da)}function aa(e){return Mr(e,Ns,pa)}var oa=Pn?function(e){return Pn.get(e)}:cu;function sa(e){for(var t=e.name+"",n=Ln[t],r=De.call(Ln,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ua(e){return(De.call(Un,"placeholder")?Un:e).placeholder}function la(){var e=Un.iteratee||ou;return e=e===ou?Ir:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ha(e){for(var t=Os(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ma(i)]}return t}function fa(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Dr(n)?n:i}var da=gt?function(e){return null==e?[]:(e=Te(e),Rt(gt(e),(function(t){return qe.call(e,t)})))}:gu,pa=gt?function(e){for(var t=[];e;)Nt(t,da(e)),e=Ze(e);return t}:gu,va=Tr;function ma(e,t,n){for(var r=-1,i=(t=xi(t,e)).length,a=!1;++r<i;){var o=Fa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&ts(i)&&ba(o,i)&&(Zo(e)||Wo(e))}function ga(e){return"function"!=typeof e.constructor||ka(e)?{}:Vn(Ze(e))}function ya(e){return Zo(e)||Wo(e)||!!(Ye&&e&&e[Ye])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xa(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?qo(n)&&ba(t,n.length):"string"==r&&t in n)&&Vo(n[t],e)}function wa(e,t){if(Zo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Te(t))}function _a(e){var t=sa(e),n=Un[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(Mn&&va(new Mn(new ArrayBuffer(1)))!=D||Tn&&va(new Tn)!=M||En&&va(En.resolve())!=C||Cn&&va(new Cn)!=R||An&&va(new An)!=O)&&(va=function(e){var t=Tr(e),n=t==E?e.constructor:i,r=n?za(n):"";if(r)switch(r){case On:return D;case Nn:return M;case Dn:return C;case In:return R;case jn:return O}return t});var Sa=Oe?Qo:yu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ma(e){return e===e&&!ns(e)}function Ta(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Te(n)))}}function Ea(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),Mt(e,this,u)}}function Ca(e,t){return t.length<2?e:kr(e,ii(t,0,-1))}function Aa(e,t){for(var n=e.length,r=xn(t.length,n),a=Ri(e);r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}function Ra(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Pa=Da(ti),La=ft||function(e,t){return dt.setTimeout(e,t)},Oa=Da(ni);function Na(e,t,n){var r=t+"";return Oa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Et(g,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function Da(e){var t=0,n=0;return function(){var r=wn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ia(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Xr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var ja=function(e){var t=Io(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Fa(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function za(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ba(e){if(e instanceof Wn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Ri(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ua=Kr((function(e,t){return Xo(e)?fr(e,yr(t,1,Xo,!0)):[]})),Va=Kr((function(e,t){var n=Ka(t);return Xo(n)&&(n=i),Xo(e)?fr(e,yr(t,1,Xo,!0),la(n,2)):[]})),Ga=Kr((function(e,t){var n=Ka(t);return Xo(n)&&(n=i),Xo(e)?fr(e,yr(t,1,Xo,!0),i,n):[]}));function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Bt(e,la(t,3),i)}function Wa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?bn(r+a,0):xn(a,r-1)),Bt(e,la(t,3),a,!0)}function Za(e){return(null==e?0:e.length)?yr(e,1):[]}function $a(e){return e&&e.length?e[0]:i}var qa=Kr((function(e){var t=Ot(e,yi);return t.length&&t[0]===e[0]?Rr(t):[]})),Xa=Kr((function(e){var t=Ka(e),n=Ot(e,yi);return t===Ka(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Rr(n,la(t,2)):[]})),Ya=Kr((function(e){var t=Ka(e),n=Ot(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Rr(n,i,t):[]}));function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ja=Kr(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?$r(e,t):e}var eo=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return qr(e,Ot(t,(function(e){return ba(e,n)?+e:e})).sort(Ei)),r}));function to(e){return null==e?e:kn.call(e)}var no=Kr((function(e){return hi(yr(e,1,Xo,!0))})),ro=Kr((function(e){var t=Ka(e);return Xo(t)&&(t=i),hi(yr(e,1,Xo,!0),la(t,2))})),io=Kr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,hi(yr(e,1,Xo,!0),i,t)}));function ao(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if(Xo(e))return t=bn(e.length,t),!0})),Xt(t,(function(t){return Ot(e,Wt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=ao(e);return null==t?n:Ot(n,(function(e){return Mt(t,i,e)}))}var so=Kr((function(e,t){return Xo(e)?fr(e,t):[]})),uo=Kr((function(e){return mi(Rt(e,Xo))})),lo=Kr((function(e){var t=Ka(e);return Xo(t)&&(t=i),mi(Rt(e,Xo),la(t,2))})),co=Kr((function(e){var t=Ka(e);return t="function"==typeof t?t:i,mi(Rt(e,Xo),i,t)})),ho=Kr(ao);var fo=Kr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oo(e,n)}));function po(e){var t=Un(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=Li((function(e,t,n){De.call(e,n)?++e[n]:or(e,n,1)}));var yo=zi(Ha),bo=zi(Wa);function xo(e,t){return(Zo(e)?Et:dr)(e,la(t,3))}function wo(e,t){return(Zo(e)?Ct:pr)(e,la(t,3))}var _o=Li((function(e,t,n){De.call(e,n)?e[n].push(t):or(e,n,[t])}));var So=Kr((function(e,t,r){var i=-1,a="function"==typeof t,o=qo(e)?n(e.length):[];return dr(e,(function(e){o[++i]=a?Mt(t,e,r):Pr(e,t,r)})),o})),ko=Li((function(e,t,n){or(e,n,t)}));function Mo(e,t){return(Zo(e)?Ot:Br)(e,la(t,3))}var To=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Eo=Kr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xa(e,t[0],t[1])?t=[]:n>2&&xa(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,yr(t,1),[])})),Co=ht||function(){return dt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Ro(e,t){var n;if("function"!=typeof t)throw new Ae(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Po=Kr((function(e,t,n){var r=1;if(n.length){var i=cn(n,ua(Po));r|=l}return Ji(e,r,t,n,i)})),Lo=Kr((function(e,t,n){var r=3;if(n.length){var i=cn(n,ua(Lo));r|=l}return Ji(t,r,e,n,i)}));function Oo(e,t,n){var r,o,s,u,l,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ae(a);function v(t){var n=r,a=o;return r=o=i,h=t,u=e.apply(a,n)}function m(e){return h=e,l=La(y,t),f?v(e):u}function g(e){var n=e-c;return c===i||n>=t||n<0||d&&e-h>=s}function y(){var e=Co();if(g(e))return b(e);l=La(y,function(e){var n=t-(e-c);return d?xn(n,s-(e-h)):n}(e))}function b(e){return l=i,p&&r?v(e):(r=o=i,u)}function x(){var e=Co(),n=g(e);if(r=arguments,o=this,c=e,n){if(l===i)return m(c);if(d)return Si(l),l=La(y,t),v(c)}return l===i&&(l=La(y,t)),u}return t=ys(t)||0,ns(n)&&(f=!!n.leading,s=(d="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){l!==i&&Si(l),h=0,r=c=o=l=i},x.flush=function(){return l===i?u:b(Co())},x}var No=Kr((function(e,t){return hr(e,1,t)})),Do=Kr((function(e,t,n){return hr(e,ys(t)||0,n)}));function Io(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Io.Cache||qn),n}function jo(e){if("function"!=typeof e)throw new Ae(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Io.Cache=qn;var Fo=wi((function(e,t){var n=(t=1==t.length&&Zo(t[0])?Ot(t[0],Kt(la())):Ot(yr(t,1),Kt(la()))).length;return Kr((function(r){for(var i=-1,a=xn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Mt(e,this,r)}))})),zo=Kr((function(e,t){var n=cn(t,ua(zo));return Ji(e,l,i,t,n)})),Bo=Kr((function(e,t){var n=cn(t,ua(Bo));return Ji(e,c,i,t,n)})),Uo=ra((function(e,t){return Ji(e,f,i,i,i,t)}));function Vo(e,t){return e===t||e!==e&&t!==t}var Go=$i(Er),Ho=$i((function(e,t){return e>=t})),Wo=Lr(function(){return arguments}())?Lr:function(e){return rs(e)&&De.call(e,"callee")&&!qe.call(e,"callee")},Zo=n.isArray,$o=bt?Kt(bt):function(e){return rs(e)&&Tr(e)==N};function qo(e){return null!=e&&ts(e.length)&&!Qo(e)}function Xo(e){return rs(e)&&qo(e)}var Yo=yt||yu,Ko=xt?Kt(xt):function(e){return rs(e)&&Tr(e)==w};function Jo(e){if(!rs(e))return!1;var t=Tr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Qo(e){if(!ns(e))return!1;var t=Tr(e);return t==S||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=wt?Kt(wt):function(e){return rs(e)&&va(e)==M};function as(e){return"number"==typeof e||rs(e)&&Tr(e)==T}function os(e){if(!rs(e)||Tr(e)!=E)return!1;var t=Ze(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==ze}var ss=_t?Kt(_t):function(e){return rs(e)&&Tr(e)==A};var us=St?Kt(St):function(e){return rs(e)&&va(e)==R};function ls(e){return"string"==typeof e||!Zo(e)&&rs(e)&&Tr(e)==P}function cs(e){return"symbol"==typeof e||rs(e)&&Tr(e)==L}var hs=kt?Kt(kt):function(e){return rs(e)&&ts(e.length)&&!!ot[Tr(e)]};var fs=$i(zr),ds=$i((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(qo(e))return ls(e)?pn(e):Ri(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=va(e);return(t==M?un:t==R?hn:Vs)(e)}function vs(e){return e?(e=ys(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?ur(ms(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(cs(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=ge.test(e);return n||be.test(e)?ct(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Pi(e,Ns(e))}function xs(e){return null==e?"":ci(e)}var ws=Oi((function(e,t){if(ka(t)||qo(t))Pi(t,Os(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),_s=Oi((function(e,t){Pi(t,Ns(t),e)})),Ss=Oi((function(e,t,n,r){Pi(t,Ns(t),e,r)})),ks=Oi((function(e,t,n,r){Pi(t,Os(t),e,r)})),Ms=ra(sr);var Ts=Kr((function(e,t){e=Te(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&xa(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Ns(o),u=-1,l=s.length;++u<l;){var c=s[u],h=e[c];(h===i||Vo(h,Le[c])&&!De.call(e,c))&&(e[c]=o[c])}return e})),Es=Kr((function(e){return e.push(i,ea),Mt(Is,i,e)}));function Cs(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ma(e,t,Ar)}var Rs=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),nu(au)),Ps=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),la),Ls=Kr(Pr);function Os(e){return qo(e)?Kn(e):jr(e)}function Ns(e){return qo(e)?Kn(e,!0):Fr(e)}var Ds=Oi((function(e,t,n){Gr(e,t,n)})),Is=Oi((function(e,t,n,r){Gr(e,t,n,r)})),js=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=xi(t,e),r||(r=t.length>1),t})),Pi(e,aa(e),n),r&&(n=lr(n,7,ta));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Fs=ra((function(e,t){return null==e?{}:function(e,t){return Zr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function zs(e,t){if(null==e)return{};var n=Ot(aa(e),(function(e){return[e]}));return t=la(t),Zr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=Ki(Os),Us=Ki(Ns);function Vs(e){return null==e?[]:Jt(e,Os(e))}var Gs=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return Js(xs(e).toLowerCase())}function Ws(e){return(e=xs(e))&&e.replace(we,rn).replace(Qe,"")}var Zs=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),$s=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ii("toLowerCase");var Xs=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ys=ji((function(e,t,n){return e+(n?" ":"")+Js(t)}));var Ks=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Js=Ii("toUpperCase");function Qs(e,t,n){return e=xs(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var eu=Kr((function(e,t){try{return Mt(e,i,t)}catch(n){return Jo(n)?n:new se(n)}})),tu=ra((function(e,t){return Et(t,(function(t){t=Fa(t),or(e,t,Po(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Bi(),iu=Bi(!0);function au(e){return e}function ou(e){return Ir("function"==typeof e?e:lr(e,1))}var su=Kr((function(e,t){return function(n){return Pr(n,e,t)}})),uu=Kr((function(e,t){return function(n){return Pr(e,n,t)}}));function lu(e,t,n){var r=Os(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Os(t)));var a=!(ns(n)&&"chain"in n)||!!n.chain,o=Qo(e);return Et(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=Ri(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})})),e}function cu(){}var hu=Hi(Ot),fu=Hi(At),du=Hi(jt);function pu(e){return wa(e)?Wt(Fa(e)):function(e){return function(t){return kr(t,e)}}(e)}var vu=Zi(),mu=Zi(!0);function gu(){return[]}function yu(){return!1}var bu=Gi((function(e,t){return e+t}),0),xu=Xi("ceil"),wu=Gi((function(e,t){return e/t}),1),_u=Xi("floor");var Su=Gi((function(e,t){return e*t}),1),ku=Xi("round"),Mu=Gi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ae(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Ao,Un.assign=ws,Un.assignIn=_s,Un.assignInWith=Ss,Un.assignWith=ks,Un.at=Ms,Un.before=Ro,Un.bind=Po,Un.bindAll=tu,Un.bindKey=Lo,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Zo(e)?e:[e]},Un.chain=po,Un.chunk=function(e,t,r){t=(r?xa(e,t,r):t===i)?1:bn(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(pt(a/t));o<a;)u[s++]=ii(e,o,o+=t);return u},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Zo(r)?Ri(r):[r],yr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=la();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ae(a);return[n(e[0]),e[1]]})):[],Kr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Mt(i[0],this,n))return Mt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Os(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Un.constant=nu,Un.countBy=go,Un.create=function(e,t){var n=Vn(e);return null==t?n:ar(n,t)},Un.curry=function e(t,n,r){var a=Ji(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.curryRight=function e(t,n,r){var a=Ji(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.debounce=Oo,Un.defaults=Ts,Un.defaultsDeep=Es,Un.defer=No,Un.delay=Do,Un.difference=Ua,Un.differenceBy=Va,Un.differenceWith=Ga,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0):[]},Un.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&xa(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Zo(e)?Rt:gr)(e,la(t,3))},Un.flatMap=function(e,t){return yr(Mo(e,t),1)},Un.flatMapDeep=function(e,t){return yr(Mo(e,t),d)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(Mo(e,t),n)},Un.flatten=Za,Un.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,d):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Un.flip=function(e){return Ji(e,512)},Un.flow=ru,Un.flowRight=iu,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:Sr(e,Os(e))},Un.functionsIn=function(e){return null==e?[]:Sr(e,Ns(e))},Un.groupBy=_o,Un.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Un.intersection=qa,Un.intersectionBy=Xa,Un.intersectionWith=Ya,Un.invert=Rs,Un.invertBy=Ps,Un.invokeMap=So,Un.iteratee=ou,Un.keyBy=ko,Un.keys=Os,Un.keysIn=Ns,Un.map=Mo,Un.mapKeys=function(e,t){var n={};return t=la(t,3),wr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=la(t,3),wr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(lr(e,1))},Un.matchesProperty=function(e,t){return Vr(e,lr(t,1))},Un.memoize=Io,Un.merge=Ds,Un.mergeWith=Is,Un.method=su,Un.methodOf=uu,Un.mixin=lu,Un.negate=jo,Un.nthArg=function(e){return e=ms(e),Kr((function(t){return Hr(t,e)}))},Un.omit=js,Un.omitBy=function(e,t){return zs(e,jo(la(t)))},Un.once=function(e){return Ro(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Zo(t)||(t=null==t?[]:[t]),Zo(n=r?i:n)||(n=null==n?[]:[n]),Wr(e,t,n))},Un.over=hu,Un.overArgs=Fo,Un.overEvery=fu,Un.overSome=du,Un.partial=zo,Un.partialRight=Bo,Un.partition=To,Un.pick=Fs,Un.pickBy=zs,Un.property=pu,Un.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Un.pull=Ja,Un.pullAll=Qa,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,la(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,i,n):e},Un.pullAt=eo,Un.range=vu,Un.rangeRight=mu,Un.rearg=Uo,Un.reject=function(e,t){return(Zo(e)?Rt:gr)(e,jo(la(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=la(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ae(a);return Kr(e,t=t===i?t:ms(t))},Un.reverse=to,Un.sampleSize=function(e,t,n){return t=(n?xa(e,t,n):t===i)?1:ms(t),(Zo(e)?Qn:Qr)(e,t)},Un.set=function(e,t,n){return null==e?e:ei(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Un.shuffle=function(e){return(Zo(e)?er:ri)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xa(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Un.sortBy=Eo,Un.sortedUniq=function(e){return e&&e.length?ui(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ui(e,la(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&xa(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ci(t))&&sn(e)?_i(pn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ae(a);return t=null==t?0:bn(ms(t),0),Kr((function(n){var r=n[t],i=_i(n,0,t);return r&&Nt(i,r),Mt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?pi(e,la(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ae(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oo(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=vo,Un.toArray=ps,Un.toPairs=Bs,Un.toPairsIn=Us,Un.toPath=function(e){return Zo(e)?Ot(e,Fa):cs(e)?[e]:Ri(ja(xs(e)))},Un.toPlainObject=bs,Un.transform=function(e,t,n){var r=Zo(e),i=r||Yo(e)||hs(e);if(t=la(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ns(e)&&Qo(a)?Vn(Ze(e)):{}}return(i?Et:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Ao(e,1)},Un.union=no,Un.unionBy=ro,Un.unionWith=io,Un.uniq=function(e){return e&&e.length?hi(e):[]},Un.uniqBy=function(e,t){return e&&e.length?hi(e,la(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?hi(e,i,t):[]},Un.unset=function(e,t){return null==e||fi(e,t)},Un.unzip=ao,Un.unzipWith=oo,Un.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},Un.values=Vs,Un.valuesIn=function(e){return null==e?[]:Jt(e,Ns(e))},Un.without=so,Un.words=Qs,Un.wrap=function(e,t){return zo(bi(t),e)},Un.xor=uo,Un.xorBy=lo,Un.xorWith=co,Un.zip=ho,Un.zipObject=function(e,t){return gi(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},Un.zipWith=fo,Un.entries=Bs,Un.entriesIn=Us,Un.extend=_s,Un.extendWith=Ss,lu(Un,Un),Un.add=bu,Un.attempt=eu,Un.camelCase=Gs,Un.capitalize=Hs,Un.ceil=xu,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ys(n))===n?n:0),t!==i&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},Un.clone=function(e){return lr(e,4)},Un.cloneDeep=function(e){return lr(e,5)},Un.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||cr(e,t,Os(t))},Un.deburr=Ws,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=wu,Un.endsWith=function(e,t,n){e=xs(e),t=ci(t);var r=e.length,a=n=n===i?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Un.eq=Vo,Un.escape=function(e){return(e=xs(e))&&K.test(e)?e.replace(X,an):e},Un.escapeRegExp=function(e){return(e=xs(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Un.every=function(e,t,n){var r=Zo(e)?At:vr;return n&&xa(e,t,n)&&(t=i),r(e,la(t,3))},Un.find=yo,Un.findIndex=Ha,Un.findKey=function(e,t){return zt(e,la(t,3),wr)},Un.findLast=bo,Un.findLastIndex=Wa,Un.findLastKey=function(e,t){return zt(e,la(t,3),_r)},Un.floor=_u,Un.forEach=xo,Un.forEachRight=wo,Un.forIn=function(e,t){return null==e?e:br(e,la(t,3),Ns)},Un.forInRight=function(e,t){return null==e?e:xr(e,la(t,3),Ns)},Un.forOwn=function(e,t){return e&&wr(e,la(t,3))},Un.forOwnRight=function(e,t){return e&&_r(e,la(t,3))},Un.get=Cs,Un.gt=Go,Un.gte=Ho,Un.has=function(e,t){return null!=e&&ma(e,t,Cr)},Un.hasIn=As,Un.head=$a,Un.identity=au,Un.includes=function(e,t,n,r){e=qo(e)?e:Vs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ut(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Ut(e,t,i)},Un.inRange=function(e,t,n){return t=vs(t),n===i?(n=t,t=0):n=vs(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Un.invoke=Ls,Un.isArguments=Wo,Un.isArray=Zo,Un.isArrayBuffer=$o,Un.isArrayLike=qo,Un.isArrayLikeObject=Xo,Un.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Tr(e)==x},Un.isBuffer=Yo,Un.isDate=Ko,Un.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},Un.isEmpty=function(e){if(null==e)return!0;if(qo(e)&&(Zo(e)||"string"==typeof e||"function"==typeof e.splice||Yo(e)||hs(e)||Wo(e)))return!e.length;var t=va(e);if(t==M||t==R)return!e.size;if(ka(e))return!jr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Or(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},Un.isError=Jo,Un.isFinite=function(e){return"number"==typeof e&&Ft(e)},Un.isFunction=Qo,Un.isInteger=es,Un.isLength=ts,Un.isMap=is,Un.isMatch=function(e,t){return e===t||Nr(e,t,ha(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Nr(e,t,ha(t),n)},Un.isNaN=function(e){return as(e)&&e!=+e},Un.isNative=function(e){if(Sa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=as,Un.isObject=ns,Un.isObjectLike=rs,Un.isPlainObject=os,Un.isRegExp=ss,Un.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},Un.isSet=us,Un.isString=ls,Un.isSymbol=cs,Un.isTypedArray=hs,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return rs(e)&&va(e)==O},Un.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Tr(e)},Un.join=function(e,t){return null==e?"":Zt.call(e,t)},Un.kebabCase=Zs,Un.last=Ka,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?bn(r+a,0):xn(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Bt(e,Gt,a,!0)},Un.lowerCase=$s,Un.lowerFirst=qs,Un.lt=fs,Un.lte=ds,Un.max=function(e){return e&&e.length?mr(e,au,Er):i},Un.maxBy=function(e,t){return e&&e.length?mr(e,la(t,2),Er):i},Un.mean=function(e){return Ht(e,au)},Un.meanBy=function(e,t){return Ht(e,la(t,2))},Un.min=function(e){return e&&e.length?mr(e,au,zr):i},Un.minBy=function(e,t){return e&&e.length?mr(e,la(t,2),zr):i},Un.stubArray=gu,Un.stubFalse=yu,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=Su,Un.nth=function(e,t){return e&&e.length?Hr(e,ms(t)):i},Un.noConflict=function(){return dt._===this&&(dt._=Be),this},Un.noop=cu,Un.now=Co,Un.pad=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(vt(i),n)+e+Wi(pt(i),n)},Un.padEnd=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?e+Wi(t-r,n):e},Un.padStart=function(e,t,n){e=xs(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?Wi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(xs(e).replace(oe,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xa(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vs(e),t===i?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=Sn();return xn(e+a*(t-e+lt("1e-"+((a+"").length-1))),t)}return Xr(e,t)},Un.reduce=function(e,t,n){var r=Zo(e)?Dt:$t,i=arguments.length<3;return r(e,la(t,4),n,i,dr)},Un.reduceRight=function(e,t,n){var r=Zo(e)?It:$t,i=arguments.length<3;return r(e,la(t,4),n,i,pr)},Un.repeat=function(e,t,n){return t=(n?xa(e,t,n):t===i)?1:ms(t),Yr(xs(e),t)},Un.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,a=(t=xi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Fa(t[r])];o===i&&(r=a,o=n),e=Qo(o)?o.call(e):o}return e},Un.round=ku,Un.runInContext=e,Un.sample=function(e){return(Zo(e)?Jn:Jr)(e)},Un.size=function(e){if(null==e)return 0;if(qo(e))return ls(e)?dn(e):e.length;var t=va(e);return t==M||t==R?e.size:jr(e).length},Un.snakeCase=Xs,Un.some=function(e,t,n){var r=Zo(e)?jt:ai;return n&&xa(e,t,n)&&(t=i),r(e,la(t,3))},Un.sortedIndex=function(e,t){return oi(e,t)},Un.sortedIndexBy=function(e,t,n){return si(e,t,la(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Vo(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return oi(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return si(e,t,la(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Vo(e[n],t))return n}return-1},Un.startCase=Ys,Un.startsWith=function(e,t,n){return e=xs(e),n=null==n?0:ur(ms(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Un.subtract=Mu,Un.sum=function(e){return e&&e.length?qt(e,au):0},Un.sumBy=function(e,t){return e&&e.length?qt(e,la(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&xa(e,t,n)&&(t=i),e=xs(e),t=Ss({},t,r,Qi);var a,o,s=Ss({},t.imports,r.imports,Qi),u=Os(s),l=Jt(s,u),c=0,h=t.interpolate||_e,f="__p += '",d=Ee((t.escape||_e).source+"|"+h.source+"|"+(h===ee?pe:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(c,u).replace(Se,on),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var v=De.call(t,"variable")&&t.variable;if(v){if(fe.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(W,""):f).replace(Z,"$1").replace($,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=eu((function(){return ke(u,p+"return "+f).apply(i,l)}));if(m.source=f,Jo(m))throw m;return m},Un.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=xn(e,m);t=la(t),e-=m;for(var i=Xt(r,t);++n<e;)t(n);return i},Un.toFinite=vs,Un.toInteger=ms,Un.toLength=gs,Un.toLower=function(e){return xs(e).toLowerCase()},Un.toNumber=ys,Un.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},Un.toString=xs,Un.toUpper=function(e){return xs(e).toUpperCase()},Un.trim=function(e,t,n){if((e=xs(e))&&(n||t===i))return Yt(e);if(!e||!(t=ci(t)))return e;var r=pn(e),a=pn(t);return _i(r,en(r,a),tn(r,a)+1).join("")},Un.trimEnd=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=pn(e);return _i(r,0,tn(r,pn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=pn(e);return _i(r,en(r,pn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(ns(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=xs(e)).length;if(sn(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-dn(r);if(u<1)return r;var l=s?_i(s,0,u).join(""):e.slice(0,u);if(a===i)return l+r;if(s&&(u+=l.length-u),ss(a)){if(e.slice(u).search(a)){var c,h=l;for(a.global||(a=Ee(a.source,xs(ve.exec(a))+"g")),a.lastIndex=0;c=a.exec(h);)var f=c.index;l=l.slice(0,f===i?u:f)}}else if(e.indexOf(ci(a),u)!=u){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+r},Un.unescape=function(e){return(e=xs(e))&&Y.test(e)?e.replace(q,mn):e},Un.uniqueId=function(e){var t=++Ie;return xs(e)+t},Un.upperCase=Ks,Un.upperFirst=Js,Un.each=xo,Un.eachRight=wo,Un.first=$a,lu(Un,function(){var e={};return wr(Un,(function(t,n){De.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Et(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:la(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Et(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(au)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Kr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Pr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(jo(la(e)))},Wn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(m)},wr(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Un[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Un.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Wn,l=s[0],c=u||Zo(t),h=function(e){var t=a.apply(Un,Nt([e],s));return r&&f?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,v=u&&!d;if(!o&&c){t=v?t:new Wn(this);var m=e.apply(t,s);return m.__actions__.push({func:vo,args:[h],thisArg:i}),new Hn(m,f)}return p&&v?e.apply(this,s):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Zo(i)?i:[],e)}return this[n]((function(n){return t.apply(Zo(n)?n:[],e)}))}})),wr(Wn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";De.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Ui(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ri(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ri(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ri(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Zo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=xn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var v=-1,m=e[l+=t];++v<h;){var g=c[v],y=g.iteratee,b=g.type,x=y(m);if(2==b)m=x;else if(!x){if(1==b)continue e;break e}}p[f++]=m}return p},Un.prototype.at=mo,Un.prototype.chain=function(){return po(this)},Un.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof Gn;){var r=Ba(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(to)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Ke&&(Un.prototype[Ke]=function(){return this}),Un}();dt._=gn,(r=function(){return gn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},72:function(e,t,n){var r=n(7009);e.exports=function(){return r.Date.now()}},8174:function(e){e.exports=function(){return[]}},9488:function(e){e.exports=function(){return!1}},2582:function(e,t,n){var r=n(821),i=n(8092),a=n(152),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}},2744:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var r=Object.prototype.toString;function i(e){return r.call(e).endsWith("Array]")}function a(e,t,n){for(var r=0,i=n(t),a=0;a<e.x.length;a++)r+=Math.abs(e.y[a]-i(e.x[a]));return r}var o=n(2963),s=n(136),u=n(4062),l=n(5671),c=n(3144),h=Object.prototype.toString;function f(e){var t=h.call(e);return t.endsWith("Array]")&&!t.includes("Big")}var d=Object.prototype.toString;function p(e){var t=d.call(e);return t.endsWith("Array]")&&!t.includes("Big")}var v=Object.prototype.toString;function m(e){var t=v.call(e);return t.endsWith("Array]")&&!t.includes("Big")}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!m(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,a=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[r],s=r+1;s<a;s++)e[s]>o&&(o=e[s]);return o}var y=Object.prototype.toString;function b(e){var t=y.call(e);return t.endsWith("Array]")&&!t.includes("Big")}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!b(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,a=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[r],s=r+1;s<a;s++)e[s]<o&&(o=e[s]);return o}function w(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!p(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!p(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=x(e),i=g(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=n.min,o=void 0===a?n.autoMinMax?r:0:a,s=n.max,u=void 0===s?n.autoMinMax?i:1:s;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-o)/(i-r),c=0;c<e.length;c++)t[c]=(e[c]-r)*l+o;return t}var _=" ".repeat(2),S=" ".repeat(4);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxRows,r=void 0===n?15:n,i=t.maxColumns,a=void 0===i?10:i,o=t.maxNumSize,s=void 0===o?8:o,u=t.padMinus,l=void 0===u?"auto":u;return"".concat(e.constructor.name," {\n").concat(_,"[\n").concat(S).concat(M(e,r,a,s,l),"\n").concat(_,"]\n").concat(_,"rows: ").concat(e.rows,"\n").concat(_,"columns: ").concat(e.columns,"\n}")}function M(e,t,n,r,i){var a=e.rows,o=e.columns,s=Math.min(a,t),u=Math.min(o,n),l=[];if("auto"===i){i=!1;e:for(var c=0;c<s;c++)for(var h=0;h<u;h++)if(e.get(c,h)<0){i=!0;break e}}for(var f=0;f<s;f++){for(var d=[],p=0;p<u;p++)d.push(T(e.get(f,p),r,i));l.push("".concat(d.join(" ")))}return u!==o&&(l[l.length-1]+=" ... ".concat(o-n," more columns")),s!==a&&l.push("... ".concat(a-t," more rows")),l.join("\n".concat(S))}function T(e,t,n){return(e>=0&&n?" ".concat(E(e,t-1)):E(e,t)).padEnd(t)}function E(e,t){var n=e.toString();if(n.length<=t)return n;var r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function C(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function A(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function R(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function P(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function L(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(N("startRow",t),N("endRow",n),N("startColumn",r),N("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function O(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function N(e,t){if("number"!==typeof t)throw new TypeError("".concat(e," must be a number"))}function D(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function I(e,t,n){for(var r=e.rows,i=e.columns,a=[],o=0;o<r;o++){for(var s=0,u=0,l=0,c=0;c<i;c++)s+=l=e.get(o,c)-n[o],u+=l*l;t?a.push((u-s*s/i)/(i-1)):a.push((u-s*s/i)/i)}return a}function j(e,t,n){for(var r=e.rows,i=e.columns,a=[],o=0;o<i;o++){for(var s=0,u=0,l=0,c=0;c<r;c++)s+=l=e.get(c,o)-n[o],u+=l*l;t?a.push((u-s*s/r)/(r-1)):a.push((u-s*s/r)/r)}return a}function F(e,t,n){for(var r=e.rows,i=e.columns,a=r*i,o=0,s=0,u=0,l=0;l<r;l++)for(var c=0;c<i;c++)o+=u=e.get(l,c)-n,s+=u*u;return t?(s-o*o/a)/(a-1):(s-o*o/a)/a}function z(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function B(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function U(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function V(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,i=0;i<e.columns;i++)r+=Math.pow(e.get(n,i),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}function G(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function H(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,i=0;i<e.rows;i++)r+=Math.pow(e.get(i,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}function W(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function Z(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var i=0;i<e.rows;i++)n+=Math.pow(e.get(i,r),2)/t;return Math.sqrt(n)}function $(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var q=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(e){if("function"!==typeof e)throw new TypeError("callback must be a function");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.call(this,t,n);return this}},{key:"to1DArray",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"to2DArray",value:function(){for(var e=[],t=0;t<this.rows;t++){e.push([]);for(var n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}},{key:"isReducedEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,i=!1;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(var a=t+1;a<this.rows;a++)0!==this.get(e,a)&&(r=!1);e++}return r}},{key:"echelonForm",value:function(){for(var e=this.clone(),t=0,n=0;t<e.rows&&n<e.columns;){for(var r=t,i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);for(var a=e.get(t,n),o=n;o<e.columns;o++)e.set(t,o,e.get(t,o)/a);for(var s=t+1;s<e.rows;s++){var u=e.get(s,n)/e.get(t,n);e.set(s,n,0);for(var l=n+1;l<e.columns;l++)e.set(s,l,e.get(s,l)-e.get(t,l)*u)}t++,n++}}return e}},{key:"reducedEchelonForm",value:function(){for(var e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;r>=0;)if(0===e.maxRow(r))r--;else{for(var i=0,a=!1;i<n&&!1===a;)1===e.get(r,i)?a=!0:i++;for(var o=0;o<r;o++)for(var s=e.get(o,i),u=i;u<t;u++){var l=e.get(o,u)-s*e.get(r,u);e.set(o,u,l)}r--}return e}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.rows,n=void 0===t?1:t,r=e.columns,i=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var a=new Y(this.rows*n,this.columns*i),o=0;o<n;o++)for(var s=0;s<i;s++)a.setSubMatrix(this,this.rows*o,this.columns*s);return a}},{key:"fill",value:function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,e);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(e){C(this,e);for(var t=[],n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"getRowVector",value:function(e){return Y.rowVector(this.getRow(e))}},{key:"setRow",value:function(e,t){C(this,e),t=R(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}},{key:"swapRows",value:function(e,t){C(this,e),C(this,t);for(var n=0;n<this.columns;n++){var r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}},{key:"getColumn",value:function(e){A(this,e);for(var t=[],n=0;n<this.rows;n++)t.push(this.get(n,e));return t}},{key:"getColumnVector",value:function(e){return Y.columnVector(this.getColumn(e))}},{key:"setColumn",value:function(e,t){A(this,e),t=P(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}},{key:"swapColumns",value:function(e,t){A(this,e),A(this,t);for(var n=0;n<this.rows;n++){var r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}},{key:"addRowVector",value:function(e){e=R(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}},{key:"subRowVector",value:function(e){e=R(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}},{key:"mulRowVector",value:function(e){e=R(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}},{key:"divRowVector",value:function(e){e=R(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}},{key:"addColumnVector",value:function(e){e=P(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}},{key:"subColumnVector",value:function(e){e=P(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}},{key:"mulColumnVector",value:function(e){e=P(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}},{key:"divColumnVector",value:function(e){e=P(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}},{key:"mulRow",value:function(e,t){C(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}},{key:"mulColumn",value:function(e,t){A(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}},{key:"max",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var i=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)>i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)>s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"maxIndex",value:function(){D(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"min",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var i=new Array(this.columns).fill(Number.POSITIVE_INFINITY),a=0;a<this.rows;a++)for(var o=0;o<this.columns;o++)this.get(a,o)<i[o]&&(i[o]=this.get(a,o));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)<s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"minIndex",value:function(){D(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"maxRow",value:function(e){if(C(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxRowIndex",value:function(e){C(this,e),D(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}},{key:"minRow",value:function(e){if(C(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minRowIndex",value:function(e){C(this,e),D(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}},{key:"maxColumn",value:function(e){if(A(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}},{key:"maxColumnIndex",value:function(e){A(this,e),D(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}},{key:"minColumn",value:function(e){if(A(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}},{key:"minColumnIndex",value:function(e){A(this,e),D(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}},{key:"diag",value:function(){for(var e=Math.min(this.rows,this.columns),t=[],n=0;n<e;n++)t.push(this.get(n,n));return t}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",t=0;if("max"===e)return this.max();if("frobenius"===e){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)t+=this.get(n,r)*this.get(n,r);return Math.sqrt(t)}throw new RangeError("unknown norm type: ".concat(e))}},{key:"cumulativeSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}},{key:"dot",value:function(t){e.isMatrix(t)&&(t=t.to1DArray());var n=this.to1DArray();if(n.length!==t.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<n.length;i++)r+=n[i]*t[i];return r}},{key:"mmul",value:function(e){e=Y.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.columns,i=new Y(t,r),a=new Float64Array(n),o=0;o<r;o++){for(var s=0;s<n;s++)a[s]=e.get(s,o);for(var u=0;u<t;u++){for(var l=0,c=0;c<n;c++)l+=this.get(u,c)*a[c];i.set(u,o,l)}}return i}},{key:"strassen2x2",value:function(e){e=Y.checkMatrix(e);var t=new Y(2,2),n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),a=e.get(0,1),o=this.get(1,0),s=e.get(1,0),u=this.get(1,1),l=e.get(1,1),c=(n+u)*(r+l),h=(o+u)*r,f=n*(a-l),d=u*(s-r),p=(n+i)*l,v=c+d-p+(i-u)*(s+l),m=f+p,g=h+d,y=c-h+f+(o-n)*(r+a);return t.set(0,0,v),t.set(0,1,m),t.set(1,0,g),t.set(1,1,y),t}},{key:"strassen3x3",value:function(e){e=Y.checkMatrix(e);var t=new Y(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),a=this.get(1,0),o=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),h=e.get(0,0),f=e.get(0,1),d=e.get(0,2),p=e.get(1,0),v=e.get(1,1),m=e.get(1,2),g=e.get(2,0),y=e.get(2,1),b=e.get(2,2),x=(n-a)*(-f+v),w=(-n+a+o)*(h-f+v),_=(a+o)*(-h+f),S=n*h,k=(-n+u+l)*(h-d+m),M=(-n+u)*(d-m),T=(u+l)*(-h+d),E=(-i+l+c)*(v+g-y),C=(i-c)*(v-y),A=i*g,R=(l+c)*(-g+y),P=(-i+o+s)*(m+g-b),L=(i-s)*(m-b),O=(o+s)*(-g+b),N=S+A+r*p,D=(n+r+i-a-o-l-c)*v+w+_+S+E+A+R,I=S+k+T+(n+r+i-o-s-u-l)*m+A+P+O,j=x+o*(-h+f+p-v-m-g+b)+w+S+A+P+L,F=x+w+_+S+s*y,z=A+P+L+O+a*d,B=S+k+M+l*(-h+d+p-v-m-g+y)+E+C+A,U=E+C+A+R+u*f,V=S+k+M+T+c*b;return t.set(0,0,N),t.set(0,1,D),t.set(0,2,I),t.set(1,0,j),t.set(1,1,F),t.set(1,2,z),t.set(2,0,B),t.set(2,1,U),t.set(2,2,V),t}},{key:"mmulStrassen",value:function(t){t=Y.checkMatrix(t);var n=this.clone(),r=n.rows,i=n.columns,a=t.rows,o=t.columns;function s(t,n,r){var i=t.rows,a=t.columns;if(i===n&&a===r)return t;var o=e.zeros(n,r);return o=o.setSubMatrix(t,0,0)}i!==a&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(a," x ").concat(o," matrix: dimensions do not match."));var u=Math.max(r,a),l=Math.max(i,o);return function t(n,r,i,a){if(i<=512||a<=512)return n.mmul(r);i%2===1&&a%2===1?(n=s(n,i+1,a+1),r=s(r,i+1,a+1)):i%2===1?(n=s(n,i+1,a),r=s(r,i+1,a)):a%2===1&&(n=s(n,i,a+1),r=s(r,i,a+1));var o=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),l=n.subMatrix(0,o-1,0,u-1),c=r.subMatrix(0,o-1,0,u-1),h=n.subMatrix(0,o-1,u,n.columns-1),f=r.subMatrix(0,o-1,u,r.columns-1),d=n.subMatrix(o,n.rows-1,0,u-1),p=r.subMatrix(o,r.rows-1,0,u-1),v=n.subMatrix(o,n.rows-1,u,n.columns-1),m=r.subMatrix(o,r.rows-1,u,r.columns-1),g=t(e.add(l,v),e.add(c,m),o,u),y=t(e.add(d,v),c,o,u),b=t(l,e.sub(f,m),o,u),x=t(v,e.sub(p,c),o,u),w=t(e.add(l,h),m,o,u),_=t(e.sub(d,l),e.add(c,f),o,u),S=t(e.sub(h,v),e.add(p,m),o,u),k=e.add(g,x);k.sub(w),k.add(S);var M=e.add(b,w),T=e.add(y,x),E=e.sub(g,y);E.add(b),E.add(_);var C=e.zeros(2*k.rows,2*k.columns);return(C=(C=(C=(C=C.setSubMatrix(k,0,0)).setSubMatrix(M,k.rows,0)).setSubMatrix(T,0,k.columns)).setSubMatrix(E,k.rows,k.columns)).subMatrix(0,i-1,0,a-1)}(n=s(n,u,l),t=s(t,u,l),u,l)}},{key:"scaleRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new Y(this.rows,this.columns),o=0;o<this.rows;o++){var s=this.getRow(o);s.length>0&&w(s,{min:n,max:i,output:s}),a.setRow(o,s)}return a}},{key:"scaleColumns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,r=e.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var a=new Y(this.rows,this.columns),o=0;o<this.columns;o++){var s=this.getColumn(o);s.length&&w(s,{min:n,max:i,output:s}),a.setColumn(o,s)}return a}},{key:"flipRows",value:function(){for(var e=Math.ceil(this.columns/2),t=0;t<this.rows;t++)for(var n=0;n<e;n++){var r=this.get(t,n),i=this.get(t,this.columns-1-n);this.set(t,n,i),this.set(t,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var e=Math.ceil(this.rows/2),t=0;t<this.columns;t++)for(var n=0;n<e;n++){var r=this.get(n,t),i=this.get(this.rows-1-n,t);this.set(n,t,i),this.set(this.rows-1-n,t,r)}return this}},{key:"kroneckerProduct",value:function(e){e=Y.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.rows,i=e.columns,a=new Y(t*r,n*i),o=0;o<t;o++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var l=0;l<i;l++)a.set(r*o+u,i*s+l,this.get(o,s)*e.get(u,l));return a}},{key:"kroneckerSum",value:function(e){if(e=Y.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var t=this.rows,n=e.rows,r=this.kroneckerProduct(Y.eye(n,n)),i=Y.eye(t,t).kroneckerProduct(e);return r.add(i)}},{key:"transpose",value:function(){for(var e=new Y(this.columns,this.rows),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}},{key:"sortRows",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}},{key:"sortColumns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}},{key:"subMatrix",value:function(e,t,n,r){L(this,e,t,n,r);for(var i=new Y(t-e+1,r-n+1),a=e;a<=t;a++)for(var o=n;o<=r;o++)i.set(a-e,o-n,this.get(a,o));return i}},{key:"subMatrixRow",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new Y(e.length,n-t+1),i=0;i<e.length;i++)for(var a=t;a<=n;a++){if(e[i]<0||e[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[i]));r.set(i,a-t,this.get(e[i],a))}return r}},{key:"subMatrixColumn",value:function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new Y(n-t+1,e.length),i=0;i<e.length;i++)for(var a=t;a<=n;a++){if(e[i]<0||e[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[i]));r.set(a-t,i,this.get(a,e[i]))}return r}},{key:"setSubMatrix",value:function(e,t,n){if((e=Y.checkMatrix(e)).isEmpty())return this;L(this,t,t+e.rows-1,n,n+e.columns-1);for(var r=0;r<e.rows;r++)for(var i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}},{key:"selection",value:function(e,t){!function(e,t){if(!f(t))throw new TypeError("row indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}(this,e),function(e,t){if(!f(t))throw new TypeError("column indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}(this,t);for(var n=new Y(e.length,t.length),r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++){var o=t[a];n.set(r,a,this.get(i,o))}return n}},{key:"trace",value:function(){for(var e=Math.min(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}},{key:"clone",value:function(){for(var e=new Y(this.rows,this.columns),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}},{key:"sum",value:function(e){switch(e){case"row":return function(e){for(var t=O(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}(this);case"column":return function(e){for(var t=O(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"product",value:function(e){switch(e){case"row":return function(e){for(var t=O(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}(this);case"column":return function(e){for(var t=O(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}(this);case void 0:return function(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"mean",value:function(e){var t=this.sum(e);switch(e){case"row":for(var n=0;n<this.rows;n++)t[n]/=this.columns;return t;case"column":for(var r=0;r<this.columns;r++)t[r]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}},{key:"variance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t,r=n.unbiased,i=void 0===r||r,a=n.mean,o=void 0===a?this.mean(e):a;if("boolean"!==typeof i)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!f(o))throw new TypeError("mean must be an array");return I(this,i,o);case"column":if(!f(o))throw new TypeError("mean must be an array");return j(this,i,o);case void 0:if("number"!==typeof o)throw new TypeError("mean must be a number");return F(this,i,o);default:throw new Error("invalid option: ".concat(e))}}},{key:"standardDeviation",value:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t,r=n.center,i=void 0===r?this.mean(e):r;switch(e){case"row":if(!f(i))throw new TypeError("center must be an array");return z(this,i),this;case"column":if(!f(i))throw new TypeError("center must be an array");return B(this,i),this;case void 0:if("number"!==typeof i)throw new TypeError("center must be a number");return U(this,i),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");var n=t.scale;switch(e){case"row":if(void 0===n)n=V(this);else if(!f(n))throw new TypeError("scale must be an array");return G(this,n),this;case"column":if(void 0===n)n=H(this);else if(!f(n))throw new TypeError("scale must be an array");return W(this,n),this;case void 0:if(void 0===n)n=Z(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return $(this,n),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"toString",value:function(e){return k(this,e)}}],[{key:"from1DArray",value:function(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new Y(e,t),i=0;i<e;i++)for(var a=0;a<t;a++)r.set(i,a,n[i*t+a]);return r}},{key:"rowVector",value:function(e){for(var t=new Y(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}},{key:"columnVector",value:function(e){for(var t=new Y(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}},{key:"zeros",value:function(e,t){return new Y(e,t)}},{key:"ones",value:function(e,t){return new Y(e,t).fill(1)}},{key:"rand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");for(var r=n.random,i=void 0===r?Math.random:r,a=new Y(e,t),o=0;o<e;o++)for(var s=0;s<t;s++)a.set(o,s,i());return a}},{key:"randInt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");var r=n.min,i=void 0===r?0:r,a=n.max,o=void 0===a?1e3:a,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(i>=o)throw new RangeError("min must be smaller than max");for(var l=o-i,c=new Y(e,t),h=0;h<e;h++)for(var f=0;f<t;f++){var d=i+Math.round(u()*l);c.set(h,f,d)}return c}},{key:"eye",value:function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);for(var r=Math.min(e,t),i=this.zeros(e,t),a=0;a<r;a++)i.set(a,a,n);return i}},{key:"diag",value:function(e,t,n){var r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);for(var i=Math.min(r,t,n),a=this.zeros(t,n),o=0;o<i;o++)a.set(o,o,e[o]);return a}},{key:"min",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new Y(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.min(e.get(a,o),t.get(a,o)));return i}},{key:"max",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,i=new this(n,r),a=0;a<n;a++)for(var o=0;o<r;o++)i.set(a,o,Math.max(e.get(a,o),t.get(a,o)));return i}},{key:"checkMatrix",value:function(t){return e.isMatrix(t)?t:new Y(t)}},{key:"isMatrix",value:function(e){return null!=e&&"Matrix"===e.klass}}]),e}();function X(e,t){return e-t}q.prototype.klass="Matrix","undefined"!==typeof Symbol&&(q.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return k(this)}),q.random=q.rand,q.randomInt=q.randInt,q.diagonal=q.diag,q.prototype.diagonal=q.prototype.diag,q.identity=q.eye,q.prototype.negate=q.prototype.neg,q.prototype.tensorProduct=q.prototype.kroneckerProduct;var Y=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i;if((0,l.Z)(this,n),i=t.call(this),n.isMatrix(e))return(0,o.Z)(i,e.clone());if(Number.isInteger(e)&&e>=0){if(i.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var a=0;a<e;a++)i.data.push(new Float64Array(r))}else{if(!f(e))throw new TypeError("First argument must be a positive number or an array");var s=e;if("number"!==typeof(r=(e=s.length)?s[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var u=0;u<e;u++){if(s[u].length!==r)throw new RangeError("Inconsistent array dimensions");if(!s[u].every((function(e){return"number"===typeof e})))throw new TypeError("Input data contains non-numeric values");i.data.push(Float64Array.from(s[u]))}}return i.rows=e,i.columns=r,i}return(0,c.Z)(n,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return C(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return void 0===t&&(t=e,e=this.rows),C(this,e,!0),t=Float64Array.from(R(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){A(this,e);for(var t=0;t<this.rows;t++){for(var n=new Float64Array(this.columns-1),r=0;r<e;r++)n[r]=this.data[t][r];for(var i=e+1;i<this.columns;i++)n[i-1]=this.data[t][i];this.data[t]=n}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){"undefined"===typeof t&&(t=e,e=this.columns),A(this,e,!0),t=P(this,t);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),i=0;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}]),n}(q);!function(e,t){e.prototype.add=function(e){return"number"===typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e.get(n,r));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return"number"===typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e.get(n,r));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"===typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e.get(n,r));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"===typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e.get(n,r));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"===typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)%e.get(n,r));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"===typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)&e.get(n,r));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return"number"===typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)|e.get(n,r));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return"number"===typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)^e.get(n,r));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return"number"===typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)<<e.get(n,r));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return"number"===typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>e.get(n,r));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return"number"===typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>>e.get(n,r));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return"number"===typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,Math.pow(this.get(n,r),e.get(n,r)));return this}}(q,Y);var K=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this)).data=e,r.rows=e.length,r.columns=e[0].length,r}return(0,c.Z)(n,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),n}(q),J=function(){function e(t){(0,l.Z)(this,e);var n,r,i,a,o,s,u,c,h,f=(t=K.checkMatrix(t)).clone(),d=f.rows,p=f.columns,v=new Float64Array(d),m=1;for(n=0;n<d;n++)v[n]=n;for(c=new Float64Array(d),r=0;r<p;r++){for(n=0;n<d;n++)c[n]=f.get(n,r);for(n=0;n<d;n++){for(h=Math.min(n,r),o=0,i=0;i<h;i++)o+=f.get(n,i)*c[i];c[n]-=o,f.set(n,r,c[n])}for(a=r,n=r+1;n<d;n++)Math.abs(c[n])>Math.abs(c[a])&&(a=n);if(a!==r){for(i=0;i<p;i++)s=f.get(a,i),f.set(a,i,f.get(r,i)),f.set(r,i,s);u=v[a],v[a]=v[r],v[r]=u,m=-m}if(r<d&&0!==f.get(r,r))for(n=r+1;n<d;n++)f.set(n,r,f.get(n,r)/f.get(r,r))}this.LU=f,this.pivotVector=v,this.pivotSign=m}return(0,c.Z)(e,[{key:"isSingular",value:function(){for(var e=this.LU,t=e.columns,n=0;n<t;n++)if(0===e.get(n,n))return!0;return!1}},{key:"solve",value:function(e){e=Y.checkMatrix(e);var t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,i,a=e.columns,o=e.subMatrixRow(this.pivotVector,0,a-1),s=t.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*t.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<a;r++)o.set(i,r,o.get(i,r)/t.get(i,i));for(n=0;n<i;n++)for(r=0;r<a;r++)o.set(n,r,o.get(n,r)-o.get(i,r)*t.get(n,i))}return o}},{key:"determinant",get:function(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,n=e.columns,r=0;r<n;r++)t*=e.get(r,r);return t}},{key:"lowerTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new Y(t,n),i=0;i<t;i++)for(var a=0;a<n;a++)i>a?r.set(i,a,e.get(i,a)):i===a?r.set(i,a,1):r.set(i,a,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new Y(t,n),i=0;i<t;i++)for(var a=0;a<n;a++)i<=a?r.set(i,a,e.get(i,a)):r.set(i,a,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),e}();function Q(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var ee=function(){function e(t){(0,l.Z)(this,e);var n,r,i,a,o=(t=K.checkMatrix(t)).clone(),s=t.rows,u=t.columns,c=new Float64Array(u);for(i=0;i<u;i++){var h=0;for(n=i;n<s;n++)h=Q(h,o.get(n,i));if(0!==h){for(o.get(i,i)<0&&(h=-h),n=i;n<s;n++)o.set(n,i,o.get(n,i)/h);for(o.set(i,i,o.get(i,i)+1),r=i+1;r<u;r++){for(a=0,n=i;n<s;n++)a+=o.get(n,i)*o.get(n,r);for(a=-a/o.get(i,i),n=i;n<s;n++)o.set(n,r,o.get(n,r)+a*o.get(n,i))}}c[i]=-h}this.QR=o,this.Rdiag=c}return(0,c.Z)(e,[{key:"solve",value:function(e){e=Y.checkMatrix(e);var t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,i,a,o,s=e.columns,u=e.clone(),l=t.columns;for(a=0;a<l;a++)for(i=0;i<s;i++){for(o=0,r=a;r<n;r++)o+=t.get(r,a)*u.get(r,i);for(o=-o/t.get(a,a),r=a;r<n;r++)u.set(r,i,u.get(r,i)+o*t.get(r,a))}for(a=l-1;a>=0;a--){for(i=0;i<s;i++)u.set(a,i,u.get(a,i)/this.Rdiag[a]);for(r=0;r<a;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(a,i)*t.get(r,a))}return u.subMatrix(0,l-1,0,s-1)}},{key:"isFullRank",value:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var e,t,n=this.QR,r=n.columns,i=new Y(r,r);for(e=0;e<r;e++)for(t=0;t<r;t++)e<t?i.set(e,t,n.get(e,t)):e===t?i.set(e,t,this.Rdiag[e]):i.set(e,t,0);return i}},{key:"orthogonalMatrix",get:function(){var e,t,n,r,i=this.QR,a=i.rows,o=i.columns,s=new Y(a,o);for(n=o-1;n>=0;n--){for(e=0;e<a;e++)s.set(e,n,0);for(s.set(n,n,1),t=n;t<o;t++)if(0!==i.get(n,n)){for(r=0,e=n;e<a;e++)r+=i.get(e,n)*s.get(e,t);for(r=-r/i.get(n,n),e=n;e<a;e++)s.set(e,t,s.get(e,t)+r*i.get(e,n))}}return s}}]),e}(),te=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,l.Z)(this,e),(t=K.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");var r,i=t.rows,a=t.columns,o=n.computeLeftSingularVectors,s=void 0===o||o,u=n.computeRightSingularVectors,c=void 0===u||u,h=n.autoTranspose,f=void 0!==h&&h,d=Boolean(s),p=Boolean(c),v=!1;if(i<a)if(f){i=(r=t.transpose()).rows,a=r.columns,v=!0;var m=d;d=p,p=m}else r=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=t.clone();for(var g=Math.min(i,a),y=Math.min(i+1,a),b=new Float64Array(y),x=new Y(i,g),w=new Y(a,a),_=new Float64Array(a),S=new Float64Array(i),k=new Float64Array(y),M=0;M<y;M++)k[M]=M;for(var T=Math.min(i-1,a),E=Math.max(0,Math.min(a-2,i)),C=Math.max(T,E),A=0;A<C;A++){if(A<T){b[A]=0;for(var R=A;R<i;R++)b[A]=Q(b[A],r.get(R,A));if(0!==b[A]){r.get(A,A)<0&&(b[A]=-b[A]);for(var P=A;P<i;P++)r.set(P,A,r.get(P,A)/b[A]);r.set(A,A,r.get(A,A)+1)}b[A]=-b[A]}for(var L=A+1;L<a;L++){if(A<T&&0!==b[A]){for(var O=0,N=A;N<i;N++)O+=r.get(N,A)*r.get(N,L);O=-O/r.get(A,A);for(var D=A;D<i;D++)r.set(D,L,r.get(D,L)+O*r.get(D,A))}_[L]=r.get(A,L)}if(d&&A<T)for(var I=A;I<i;I++)x.set(I,A,r.get(I,A));if(A<E){_[A]=0;for(var j=A+1;j<a;j++)_[A]=Q(_[A],_[j]);if(0!==_[A]){_[A+1]<0&&(_[A]=0-_[A]);for(var F=A+1;F<a;F++)_[F]/=_[A];_[A+1]+=1}if(_[A]=-_[A],A+1<i&&0!==_[A]){for(var z=A+1;z<i;z++)S[z]=0;for(var B=A+1;B<i;B++)for(var U=A+1;U<a;U++)S[B]+=_[U]*r.get(B,U);for(var V=A+1;V<a;V++)for(var G=-_[V]/_[A+1],H=A+1;H<i;H++)r.set(H,V,r.get(H,V)+G*S[H])}if(p)for(var W=A+1;W<a;W++)w.set(W,A,_[W])}}var Z=Math.min(a,i+1);if(T<a&&(b[T]=r.get(T,T)),i<Z&&(b[Z-1]=0),E+1<Z&&(_[E]=r.get(E,Z-1)),_[Z-1]=0,d){for(var $=T;$<g;$++){for(var q=0;q<i;q++)x.set(q,$,0);x.set($,$,1)}for(var X=T-1;X>=0;X--)if(0!==b[X]){for(var J=X+1;J<g;J++){for(var ee=0,te=X;te<i;te++)ee+=x.get(te,X)*x.get(te,J);ee=-ee/x.get(X,X);for(var ne=X;ne<i;ne++)x.set(ne,J,x.get(ne,J)+ee*x.get(ne,X))}for(var re=X;re<i;re++)x.set(re,X,-x.get(re,X));x.set(X,X,1+x.get(X,X));for(var ie=0;ie<X-1;ie++)x.set(ie,X,0)}else{for(var ae=0;ae<i;ae++)x.set(ae,X,0);x.set(X,X,1)}}if(p)for(var oe=a-1;oe>=0;oe--){if(oe<E&&0!==_[oe])for(var se=oe+1;se<a;se++){for(var ue=0,le=oe+1;le<a;le++)ue+=w.get(le,oe)*w.get(le,se);ue=-ue/w.get(oe+1,oe);for(var ce=oe+1;ce<a;ce++)w.set(ce,se,w.get(ce,se)+ue*w.get(ce,oe))}for(var he=0;he<a;he++)w.set(he,oe,0);w.set(oe,oe,1)}for(var fe=Z-1,de=Number.EPSILON;Z>0;){var pe=void 0,ve=void 0;for(pe=Z-2;pe>=-1&&-1!==pe;pe--){var me=Number.MIN_VALUE+de*Math.abs(b[pe]+Math.abs(b[pe+1]));if(Math.abs(_[pe])<=me||Number.isNaN(_[pe])){_[pe]=0;break}}if(pe===Z-2)ve=4;else{var ge=void 0;for(ge=Z-1;ge>=pe&&ge!==pe;ge--){var ye=(ge!==Z?Math.abs(_[ge]):0)+(ge!==pe+1?Math.abs(_[ge-1]):0);if(Math.abs(b[ge])<=de*ye){b[ge]=0;break}}ge===pe?ve=3:ge===Z-1?ve=1:(ve=2,pe=ge)}switch(pe++,ve){case 1:var be=_[Z-2];_[Z-2]=0;for(var xe=Z-2;xe>=pe;xe--){var we=Q(b[xe],be),_e=b[xe]/we,Se=be/we;if(b[xe]=we,xe!==pe&&(be=-Se*_[xe-1],_[xe-1]=_e*_[xe-1]),p)for(var ke=0;ke<a;ke++)we=_e*w.get(ke,xe)+Se*w.get(ke,Z-1),w.set(ke,Z-1,-Se*w.get(ke,xe)+_e*w.get(ke,Z-1)),w.set(ke,xe,we)}break;case 2:var Me=_[pe-1];_[pe-1]=0;for(var Te=pe;Te<Z;Te++){var Ee=Q(b[Te],Me),Ce=b[Te]/Ee,Ae=Me/Ee;if(b[Te]=Ee,Me=-Ae*_[Te],_[Te]=Ce*_[Te],d)for(var Re=0;Re<i;Re++)Ee=Ce*x.get(Re,Te)+Ae*x.get(Re,pe-1),x.set(Re,pe-1,-Ae*x.get(Re,Te)+Ce*x.get(Re,pe-1)),x.set(Re,Te,Ee)}break;case 3:var Pe=Math.max(Math.abs(b[Z-1]),Math.abs(b[Z-2]),Math.abs(_[Z-2]),Math.abs(b[pe]),Math.abs(_[pe])),Le=b[Z-1]/Pe,Oe=b[Z-2]/Pe,Ne=_[Z-2]/Pe,De=b[pe]/Pe,Ie=_[pe]/Pe,je=((Oe+Le)*(Oe-Le)+Ne*Ne)/2,Fe=Le*Ne*(Le*Ne),ze=0;0===je&&0===Fe||(ze=Fe/(je+(ze=je<0?0-Math.sqrt(je*je+Fe):Math.sqrt(je*je+Fe))));for(var Be=(De+Le)*(De-Le)+ze,Ue=De*Ie,Ve=pe;Ve<Z-1;Ve++){var Ge=Q(Be,Ue);0===Ge&&(Ge=Number.MIN_VALUE);var He=Be/Ge,We=Ue/Ge;if(Ve!==pe&&(_[Ve-1]=Ge),Be=He*b[Ve]+We*_[Ve],_[Ve]=He*_[Ve]-We*b[Ve],Ue=We*b[Ve+1],b[Ve+1]=He*b[Ve+1],p)for(var Ze=0;Ze<a;Ze++)Ge=He*w.get(Ze,Ve)+We*w.get(Ze,Ve+1),w.set(Ze,Ve+1,-We*w.get(Ze,Ve)+He*w.get(Ze,Ve+1)),w.set(Ze,Ve,Ge);if(0===(Ge=Q(Be,Ue))&&(Ge=Number.MIN_VALUE),He=Be/Ge,We=Ue/Ge,b[Ve]=Ge,Be=He*_[Ve]+We*b[Ve+1],b[Ve+1]=-We*_[Ve]+He*b[Ve+1],Ue=We*_[Ve+1],_[Ve+1]=He*_[Ve+1],d&&Ve<i-1)for(var $e=0;$e<i;$e++)Ge=He*x.get($e,Ve)+We*x.get($e,Ve+1),x.set($e,Ve+1,-We*x.get($e,Ve)+He*x.get($e,Ve+1)),x.set($e,Ve,Ge)}_[Z-2]=Be,1;break;case 4:if(b[pe]<=0&&(b[pe]=b[pe]<0?-b[pe]:0,p))for(var qe=0;qe<=fe;qe++)w.set(qe,pe,-w.get(qe,pe));for(;pe<fe&&!(b[pe]>=b[pe+1]);){var Xe=b[pe];if(b[pe]=b[pe+1],b[pe+1]=Xe,p&&pe<a-1)for(var Ye=0;Ye<a;Ye++)Xe=w.get(Ye,pe+1),w.set(Ye,pe+1,w.get(Ye,pe)),w.set(Ye,pe,Xe);if(d&&pe<i-1)for(var Ke=0;Ke<i;Ke++)Xe=x.get(Ke,pe+1),x.set(Ke,pe+1,x.get(Ke,pe)),x.set(Ke,pe,Xe);pe++}0,Z--}}if(v){var Je=w;w=x,x=Je}this.m=i,this.n=a,this.s=b,this.U=x,this.V=w}return(0,c.Z)(e,[{key:"solve",value:function(e){for(var t=e,n=this.threshold,r=this.s.length,i=Y.zeros(r,r),a=0;a<r;a++)Math.abs(this.s[a])<=n?i.set(a,a,0):i.set(a,a,1/this.s[a]);for(var o=this.U,s=this.rightSingularVectors,u=s.mmul(i),l=s.rows,c=o.rows,h=Y.zeros(l,c),f=0;f<l;f++)for(var d=0;d<c;d++){for(var p=0,v=0;v<r;v++)p+=u.get(f,v)*o.get(d,v);h.set(f,d,p)}return h.mmul(t)}},{key:"solveForDiagonal",value:function(e){return this.solve(Y.diag(e))}},{key:"inverse",value:function(){for(var e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new Y(n,this.s.length),a=0;a<n;a++)for(var o=0;o<r;o++)Math.abs(this.s[o])>t&&i.set(a,o,e.get(a,o)/this.s[o]);for(var s=this.U,u=s.rows,l=s.columns,c=new Y(n,u),h=0;h<n;h++)for(var f=0;f<u;f++){for(var d=0,p=0;p<l;p++)d+=i.get(h,p)*s.get(f,p);c.set(h,f,d)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Y.diag(this.s)}}]),e}();function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=K.checkMatrix(e),t=K.checkMatrix(t),n?new te(e).solve(t):e.isSquare()?new J(e).solve(t):new ee(e).solve(t)}function re(e,t,n,r,i){for(var a=n*r*r,o=Y.eye(t.length,t.length,a),s=i(t),u=new Float64Array(e.x.length),l=0;l<e.x.length;l++)u[l]=s(e.x[l]);var c=function(e,t,n,r,i){for(var a=n.length,o=e.x.length,s=new Array(a),u=0;u<a;u++){s[u]=new Array(o);var l=n.slice();l[u]+=r;for(var c=i(l),h=0;h<o;h++)s[u][h]=t[h]-c(e.x[h])}return new Y(s)}(e,u,t,r,i),h=function(e,t){for(var n=e.x.length,r=new Array(n),i=0;i<n;i++)r[i]=[e.y[i]-t[i]];return new Y(r)}(e,u),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=K.checkMatrix(e),t?new te(e).inverse():ne(e,Y.eye(e.rows))}(o.add(c.mmul(c.transpose())));return(t=(t=new Y([t])).sub(f.mmul(c).mmul(h).mul(r).transpose())).to1DArray()}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.maxIterations,o=void 0===r?100:r,s=n.gradientDifference,u=void 0===s?.1:s,l=n.damping,c=void 0===l?0:l,h=n.errorTolerance,f=void 0===h?.01:h,d=n.minValues,p=n.maxValues,v=n.initialValues;if(c<=0)throw new Error("The damping option must be a positive number");if(!e.x||!e.y)throw new Error("The data parameter must have x and y elements");if(!i(e.x)||e.x.length<2||!i(e.y)||e.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(e.x.length!==e.y.length)throw new Error("The data parameter elements must have the same size");var m=v||new Array(t.length).fill(1),g=m.length;if(p=p||new Array(g).fill(Number.MAX_SAFE_INTEGER),d=d||new Array(g).fill(Number.MIN_SAFE_INTEGER),p.length!==d.length)throw new Error("minValues and maxValues must be the same size");if(!i(m))throw new Error("initialValues must be an array");var y,b=a(e,m,t),x=b<=f;for(y=0;y<o&&!x;y++){m=re(e,m,c,u,t);for(var w=0;w<g;w++)m[w]=Math.min(Math.max(d[w],m[w]),p[w]);if(b=a(e,m,t),isNaN(b))break;x=b<=f}return{parameterValues:m,parameterError:b,iterations:y}}},9902:function(e,t,n){"use strict";e.exports=n(8062)},8062:function(e,t,n){"use strict";var r,i=n(2791),a=(r=i)&&"object"==typeof r&&"default"in r?r.default:r;function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.multiSelectContainer,.multiSelectContainer *,.multiSelectContainer :after,.multiSelectContainer :before{box-sizing:border-box}.multiSelectContainer{position:relative;text-align:left;width:100%}.disable_ms{opacity:.5;pointer-events:none}.display-none{display:none}.searchWrapper{border:1px solid #ccc;border-radius:4px;min-height:22px;padding:5px;position:relative}.multiSelectContainer input{background:transparent;border:none;margin-top:3px}.multiSelectContainer input:focus{outline:none}.chip{align-items:center;background:#0096fb;border-radius:11px;color:#fff;display:inline-flex;font-size:13px;line-height:19px;margin-bottom:5px;margin-right:5px;padding:4px 10px}.chip,.singleChip{white-space:nowrap}.singleChip{background:none;border-radius:none;color:inherit}.singleChip i{display:none}.closeIcon{cursor:pointer;float:right;height:13px;margin-left:5px;width:13px}.optionListContainer{background:#fff;border-radius:4px;margin-top:1px;position:absolute;width:100%;z-index:2}.multiSelectContainer ul{border:1px solid #ccc;border-radius:4px;display:block;margin:0;max-height:250px;overflow-y:auto;padding:0}.multiSelectContainer li{padding:10px}.multiSelectContainer li:hover{background:#0096fb;color:#fff;cursor:pointer}.checkbox{margin-right:10px}.disableSelection{opacity:.5;pointer-events:none}.highlightOption{background:#0096fb;color:#fff}.displayBlock{display:block}.displayNone{display:none}.notFound{display:block;padding:10px}.singleSelect{padding-right:20px}li.groupHeading{color:#908e8e;padding:5px 15px;pointer-events:none}li.groupChildEle{padding-left:30px}.icon_down_dir{position:absolute;right:10px;top:50%;transform:translateY(-50%);width:14px}.icon_down_dir:before{content:"\\e803"}.custom-close{display:flex}');var u={circle:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cg%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M256%2C33C132.3%2C33%2C32%2C133.3%2C32%2C257c0%2C123.7%2C100.3%2C224%2C224%2C224c123.7%2C0%2C224-100.3%2C224-224C480%2C133.3%2C379.7%2C33%2C256%2C33z%20%20%20%20M364.3%2C332.5c1.5%2C1.5%2C2.3%2C3.5%2C2.3%2C5.6c0%2C2.1-0.8%2C4.2-2.3%2C5.6l-21.6%2C21.7c-1.6%2C1.6-3.6%2C2.3-5.6%2C2.3c-2%2C0-4.1-0.8-5.6-2.3L256%2C289.8%20%20%20l-75.4%2C75.7c-1.5%2C1.6-3.6%2C2.3-5.6%2C2.3c-2%2C0-4.1-0.8-5.6-2.3l-21.6-21.7c-1.5-1.5-2.3-3.5-2.3-5.6c0-2.1%2C0.8-4.2%2C2.3-5.6l75.7-76%20%20%20l-75.9-75c-3.1-3.1-3.1-8.2%2C0-11.3l21.6-21.7c1.5-1.5%2C3.5-2.3%2C5.6-2.3c2.1%2C0%2C4.1%2C0.8%2C5.6%2C2.3l75.7%2C74.7l75.7-74.7%20%20%20c1.5-1.5%2C3.5-2.3%2C5.6-2.3c2.1%2C0%2C4.1%2C0.8%2C5.6%2C2.3l21.6%2C21.7c3.1%2C3.1%2C3.1%2C8.2%2C0%2C11.3l-75.9%2C75L364.3%2C332.5z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",circle2:"data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2096%2096%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cg%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M48%2C0A48%2C48%2C0%2C1%2C0%2C96%2C48%2C48.0512%2C48.0512%2C0%2C0%2C0%2C48%2C0Zm0%2C84A36%2C36%2C0%2C1%2C1%2C84%2C48%2C36.0393%2C36.0393%2C0%2C0%2C1%2C48%2C84Z%22%2F%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M64.2422%2C31.7578a5.9979%2C5.9979%2C0%2C0%2C0-8.4844%2C0L48%2C39.5156l-7.7578-7.7578a5.9994%2C5.9994%2C0%2C0%2C0-8.4844%2C8.4844L39.5156%2C48l-7.7578%2C7.7578a5.9994%2C5.9994%2C0%2C1%2C0%2C8.4844%2C8.4844L48%2C56.4844l7.7578%2C7.7578a5.9994%2C5.9994%2C0%2C0%2C0%2C8.4844-8.4844L56.4844%2C48l7.7578-7.7578A5.9979%2C5.9979%2C0%2C0%2C0%2C64.2422%2C31.7578Z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",close:"data:image/svg+xml,%3Csvg%20height%3D%22135.467mm%22%20style%3D%22shape-rendering%3AgeometricPrecision%3B%20text-rendering%3AgeometricPrecision%3B%20image-rendering%3AoptimizeQuality%3B%20fill-rule%3Aevenodd%3B%20clip-rule%3Aevenodd%22%20viewBox%3D%220%200%2013547%2013547%22%20width%3D%22135.467mm%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cdefs%3E%20%20%20%20%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20%20%20%20%20.fil0%20%7Bfill%3Anone%7D%20%20%20%20%20%20%20%20%20%20%20%20.fil1%20%7Bfill%3A%23fff%7D%20%20%20%20%20%20%20%20%3C%2Fstyle%3E%20%20%20%20%3C%2Fdefs%3E%20%20%20%20%3Cg%20id%3D%22Ebene_x0020_1%22%3E%20%20%20%20%20%20%20%20%3Cpolygon%20class%3D%22fil0%22%20points%3D%220%2C0%2013547%2C0%2013547%2C13547%200%2C13547%20%22%2F%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22fil1%22%20d%3D%22M714%2012832l12118%200%200%20-12117%20-12118%200%200%2012117zm4188%20-2990l1871%20-1871%201871%201871%201197%20-1197%20-1871%20-1871%201871%20-1871%20-1197%20-1197%20-1871%201871%20-1871%20-1871%20-1197%201197%201871%201871%20-1871%201871%201197%201197z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",cancel:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E"};function l(e){var t,n,r=i.useRef(null);return n=e.outsideClick,i.useEffect((function(){function e(e){t.current&&!t.current.contains(e.target)&&n()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t=r]),a.createElement("div",{ref:r},e.children)}var c=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={inputValue:"",options:t.options,filteredOptions:t.options,unfilteredOptions:t.options,selectedValues:Object.assign([],t.selectedValues),preSelectedValues:Object.assign([],t.selectedValues),toggleOptionsList:!1,highlightOption:t.avoidHighlightFirstOption?-1:0,showCheckbox:t.showCheckbox,keepSearchTerm:t.keepSearchTerm,groupedObject:[],closeIconType:u[t.closeIcon]||u.circle},n.optionTimeout=null,n.searchWrapper=a.createRef(),n.searchBox=a.createRef(),n.onChange=n.onChange.bind(s(n)),n.onKeyPress=n.onKeyPress.bind(s(n)),n.onFocus=n.onFocus.bind(s(n)),n.onBlur=n.onBlur.bind(s(n)),n.renderMultiselectContainer=n.renderMultiselectContainer.bind(s(n)),n.renderSelectedList=n.renderSelectedList.bind(s(n)),n.onRemoveSelectedItem=n.onRemoveSelectedItem.bind(s(n)),n.toggelOptionList=n.toggelOptionList.bind(s(n)),n.onArrowKeyNavigation=n.onArrowKeyNavigation.bind(s(n)),n.onSelectItem=n.onSelectItem.bind(s(n)),n.filterOptionsByInput=n.filterOptionsByInput.bind(s(n)),n.removeSelectedValuesFromOptions=n.removeSelectedValuesFromOptions.bind(s(n)),n.isSelectedValue=n.isSelectedValue.bind(s(n)),n.fadeOutSelection=n.fadeOutSelection.bind(s(n)),n.isDisablePreSelectedValues=n.isDisablePreSelectedValues.bind(s(n)),n.renderGroupByOptions=n.renderGroupByOptions.bind(s(n)),n.renderNormalOption=n.renderNormalOption.bind(s(n)),n.listenerCallback=n.listenerCallback.bind(s(n)),n.resetSelectedValues=n.resetSelectedValues.bind(s(n)),n.getSelectedItems=n.getSelectedItems.bind(s(n)),n.getSelectedItemsCount=n.getSelectedItemsCount.bind(s(n)),n.hideOnClickOutside=n.hideOnClickOutside.bind(s(n)),n.onCloseOptionList=n.onCloseOptionList.bind(s(n)),n.isVisible=n.isVisible.bind(s(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var i=r.prototype;return i.initialSetValue=function(){var e=this.props,t=e.groupBy,n=this.state.options;e.showCheckbox||e.singleSelect||this.removeSelectedValuesFromOptions(!1),t&&this.groupByOptions(n)},i.resetSelectedValues=function(){var e=this,t=this.state.unfilteredOptions;return new Promise((function(n){e.setState({selectedValues:[],preSelectedValues:[],options:t,filteredOptions:t},(function(){n(),e.initialSetValue()}))}))},i.getSelectedItems=function(){return this.state.selectedValues},i.getSelectedItemsCount=function(){return this.state.selectedValues.length},i.componentDidMount=function(){this.initialSetValue(),this.searchWrapper.current.addEventListener("click",this.listenerCallback)},i.componentDidUpdate=function(e){var t=this.props,n=t.options,r=t.selectedValues,i=e.selectedValues;JSON.stringify(e.options)!==JSON.stringify(n)&&this.setState({options:n,filteredOptions:n,unfilteredOptions:n},this.initialSetValue),JSON.stringify(i)!==JSON.stringify(r)&&this.setState({selectedValues:Object.assign([],r),preSelectedValues:Object.assign([],r)},this.initialSetValue)},i.listenerCallback=function(){this.searchBox.current.focus()},i.componentWillUnmount=function(){this.optionTimeout&&clearTimeout(this.optionTimeout),this.searchWrapper.current.removeEventListener("click",this.listenerCallback)},i.removeSelectedValuesFromOptions=function(e){var t=this.props,n=t.isObject,r=t.displayValue,i=t.groupBy,a=this.state,o=a.selectedValues,s=void 0===o?[]:o,u=a.unfilteredOptions;if(!e&&i&&this.groupByOptions(a.options),s.length||e){if(n){var l=u.filter((function(e){return-1===s.findIndex((function(t){return t[r]===e[r]}))}));return i&&this.groupByOptions(l),void this.setState({options:l,filteredOptions:l},this.filterOptionsByInput)}var c=u.filter((function(e){return-1===s.indexOf(e)}));this.setState({options:c,filteredOptions:c},this.filterOptionsByInput)}},i.groupByOptions=function(e){var t=this.props.groupBy,n=e.reduce((function(e,n){var r=n[t]||"Others";return e[r]=e[r]||[],e[r].push(n),e}),Object.create({}));this.setState({groupedObject:n})},i.onChange=function(e){var t=this.props.onSearch;this.setState({inputValue:e.target.value},this.filterOptionsByInput),t&&t(e.target.value)},i.onKeyPress=function(e){var t=this.props.onKeyPressFn;t&&t(e,e.target.value)},i.filterOptionsByInput=function(){var e,t=this,n=this.state,r=n.inputValue,i=this.props,a=i.displayValue;e=n.filteredOptions.filter(i.isObject?function(e){return t.matchValues(e[a],r)}:function(e){return t.matchValues(e,r)}),this.groupByOptions(e),this.setState({options:e})},i.matchValues=function(e,t){return this.props.caseSensitiveSearch?e.indexOf(t)>-1:e.toLowerCase?e.toLowerCase().indexOf(t.toLowerCase())>-1:e.toString().indexOf(t)>-1},i.onArrowKeyNavigation=function(e){var t=this.state,n=t.options,r=t.highlightOption,i=t.toggleOptionsList,a=t.selectedValues;if(8!==e.keyCode||t.inputValue||this.props.disablePreSelectedValues||!a.length||this.onRemoveSelectedItem(a.length-1),n.length)if(38===e.keyCode)this.setState(r>0?function(e){return{highlightOption:e.highlightOption-1}}:{highlightOption:n.length-1});else if(40===e.keyCode)this.setState(r<n.length-1?function(e){return{highlightOption:e.highlightOption+1}}:{highlightOption:0});else if("Enter"===e.key&&n.length&&i){if(-1===r)return;this.onSelectItem(n[r])}},i.onRemoveSelectedItem=function(e){var t,n=this,r=this.state.selectedValues,i=this.props,a=i.onRemove,o=i.showCheckbox,s=i.displayValue;t=i.isObject?r.findIndex((function(t){return t[s]===e[s]})):r.indexOf(e),r.splice(t,1),a(r,e),this.setState({selectedValues:r},(function(){o||n.removeSelectedValuesFromOptions(!0)})),this.props.closeOnSelect||this.searchBox.current.focus()},i.onSelectItem=function(e){var t=this,n=this.state.selectedValues,r=this.props,i=r.selectionLimit,a=r.onSelect,o=r.singleSelect,s=r.showCheckbox;if(this.state.keepSearchTerm||this.setState({inputValue:""}),o)return this.onSingleSelect(e),void a([e],e);this.isSelectedValue(e)?this.onRemoveSelectedItem(e):i!=n.length&&(n.push(e),a(n,e),this.setState({selectedValues:n},(function(){s?t.filterOptionsByInput():t.removeSelectedValuesFromOptions(!0)})),this.props.closeOnSelect||this.searchBox.current.focus())},i.onSingleSelect=function(e){this.setState({selectedValues:[e],toggleOptionsList:!1})},i.isSelectedValue=function(e){var t=this.props,n=t.displayValue,r=this.state.selectedValues;return t.isObject?r.filter((function(t){return t[n]===e[n]})).length>0:r.filter((function(t){return t===e})).length>0},i.renderOptionList=function(){var e=this.props,t=e.groupBy,n=e.style,r=e.emptyRecordMsg,i=e.loadingMessage,o=void 0===i?"loading...":i,s=this.state.options;return e.loading?a.createElement("ul",{className:"optionContainer",style:n.optionContainer},"string"==typeof o&&a.createElement("span",{style:n.loadingMessage,className:"notFound"},o),"string"!=typeof o&&o):a.createElement("ul",{className:"optionContainer",style:n.optionContainer},0===s.length&&a.createElement("span",{style:n.notFound,className:"notFound"},r),t?this.renderGroupByOptions():this.renderNormalOption())},i.renderGroupByOptions=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,o=t.showCheckbox,s=t.style,u=t.singleSelect,l=this.state.groupedObject;return Object.keys(l).map((function(t){return a.createElement(a.Fragment,{key:t},a.createElement("li",{className:"groupHeading",style:s.groupHeading},t),l[t].map((function(t,n){var l=e.isSelectedValue(t);return a.createElement("li",{key:"option"+n,style:s.option,className:"groupChildEle option "+(l?"selected":"")+" "+(e.fadeOutSelection(t)?"disableSelection":"")+" "+(e.isDisablePreSelectedValues(t)?"disableSelection":""),onClick:function(){return e.onSelectItem(t)}},o&&!u&&a.createElement("input",{type:"checkbox",className:"checkbox",readOnly:!0,checked:l}),e.props.optionValueDecorator(r?t[i]:(t||"").toString(),t))})))}))},i.renderNormalOption=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,o=t.showCheckbox,s=t.style,u=t.singleSelect,l=this.state.highlightOption;return this.state.options.map((function(t,n){var c=e.isSelectedValue(t);return a.createElement("li",{key:"option"+n,style:s.option,className:"option "+(c?"selected":"")+" "+(l===n?"highlightOption highlight":"")+" "+(e.fadeOutSelection(t)?"disableSelection":"")+" "+(e.isDisablePreSelectedValues(t)?"disableSelection":""),onClick:function(){return e.onSelectItem(t)}},o&&!u&&a.createElement("input",{type:"checkbox",readOnly:!0,className:"checkbox",checked:c}),e.props.optionValueDecorator(r?t[i]:(t||"").toString(),t))}))},i.renderSelectedList=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,o=t.style,s=t.singleSelect,u=t.customCloseIcon,l=this.state,c=l.closeIconType;return l.selectedValues.map((function(t,n){return a.createElement("span",{className:"chip  "+(s&&"singleChip")+" "+(e.isDisablePreSelectedValues(t)&&"disableSelection"),key:n,style:o.chips},e.props.selectedValueDecorator(r?t[i]:(t||"").toString(),t),!e.isDisablePreSelectedValues(t)&&(u?a.createElement("i",{className:"custom-close",onClick:function(){return e.onRemoveSelectedItem(t)}},u):a.createElement("img",{className:"icon_cancel closeIcon",src:c,onClick:function(){return e.onRemoveSelectedItem(t)}})))}))},i.isDisablePreSelectedValues=function(e){var t=this.props,n=t.displayValue,r=this.state.preSelectedValues;return!(!t.disablePreSelectedValues||!r.length)&&(t.isObject?r.filter((function(t){return t[n]===e[n]})).length>0:r.filter((function(t){return t===e})).length>0)},i.fadeOutSelection=function(e){var t=this.props,n=t.selectionLimit;if(!t.singleSelect){var r=this.state.selectedValues;return-1!=n&&n==r.length&&(n==r.length?!t.showCheckbox||!this.isSelectedValue(e):void 0)}},i.toggelOptionList=function(){this.setState({toggleOptionsList:!this.state.toggleOptionsList,highlightOption:this.props.avoidHighlightFirstOption?-1:0})},i.onCloseOptionList=function(){this.setState({toggleOptionsList:!1,highlightOption:this.props.avoidHighlightFirstOption?-1:0,inputValue:""})},i.onFocus=function(){this.state.toggleOptionsList?clearTimeout(this.optionTimeout):this.toggelOptionList()},i.onBlur=function(){this.setState({inputValue:""},this.filterOptionsByInput),this.optionTimeout=setTimeout(this.onCloseOptionList,250)},i.isVisible=function(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},i.hideOnClickOutside=function(){var e=this,t=document.getElementsByClassName("multiselect-container")[0];document.addEventListener("click",(function(n){t&&!t.contains(n.target)&&e.isVisible(t)&&e.toggelOptionList()}))},i.renderMultiselectContainer=function(){var e=this.state,t=e.inputValue,n=e.toggleOptionsList,r=e.selectedValues,i=this.props,o=i.placeholder,s=i.style,u=i.singleSelect,l=i.id,c=i.name,h=i.hidePlaceholder,f=i.disable,d=i.showArrow,p=i.customArrow;return a.createElement("div",{className:"multiselect-container multiSelectContainer "+(f?"disable_ms":"")+" "+(i.className||""),id:l||"multiselectContainerReact",style:s.multiselectContainer},a.createElement("div",{className:"search-wrapper searchWrapper "+(u?"singleSelect":""),ref:this.searchWrapper,style:s.searchBox,onClick:u?this.toggelOptionList:function(){}},!i.hideSelectedList&&this.renderSelectedList(),a.createElement("input",{type:"text",ref:this.searchBox,className:"searchBox "+(u&&r.length?"display-none":""),id:(l||"search")+"_input",name:(c||"search_name")+"_input",onChange:this.onChange,onKeyPress:this.onKeyPress,value:t,onFocus:this.onFocus,onBlur:this.onBlur,placeholder:u&&r.length||h&&r.length?"":o,onKeyDown:this.onArrowKeyNavigation,style:s.inputField,autoComplete:"off",disabled:u||f}),(u||d)&&a.createElement(a.Fragment,null,p?a.createElement("span",{className:"icon_down_dir"},p):a.createElement("img",{src:"data:image/svg+xml,%3Csvg%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20width%3D%2232%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cg%20id%3D%22background%22%3E%20%20%20%20%20%20%20%20%3Crect%20fill%3D%22none%22%20height%3D%2232%22%20width%3D%2232%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%20%20%3Cg%20id%3D%22arrow_x5F_down%22%3E%20%20%20%20%20%20%20%20%3Cpolygon%20points%3D%222.002%2C10%2016.001%2C24%2030.002%2C10%20%20%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",className:"icon_cancel icon_down_dir"}))),a.createElement("div",{className:"optionListContainer "+(n?"displayBlock":"displayNone"),onMouseDown:function(e){e.preventDefault()}},this.renderOptionList()))},i.render=function(){return a.createElement(l,{outsideClick:this.onCloseOptionList},this.renderMultiselectContainer())},r}(a.Component);c.defaultProps={options:[],disablePreSelectedValues:!1,selectedValues:[],isObject:!0,displayValue:"model",showCheckbox:!1,selectionLimit:-1,placeholder:"Select",groupBy:"",style:{},emptyRecordMsg:"No Options Available",onSelect:function(){},onRemove:function(){},onKeyPressFn:function(){},closeIcon:"circle2",singleSelect:!1,caseSensitiveSearch:!1,id:"",name:"",closeOnSelect:!0,avoidHighlightFirstOption:!1,hidePlaceholder:!1,showArrow:!1,keepSearchTerm:!1,customCloseIcon:"",className:"",customArrow:void 0,selectedValueDecorator:function(e){return e},optionValueDecorator:function(e){return e}},t.default=c},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5743:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.popupWindowBorder=t.popupSupported=t.isSafari=t.gerWindowBorder=void 0;var i=r(n(5524)),a="object"===typeof window?i.default.getParser(window.navigator.userAgent):null;function o(){switch(null===a||void 0===a?void 0:a.getOSName(!0)){case"windows":var e;switch(a.getBrowserName(!0)){case"firefox":e=[68,8,8];break;case"microsoft edge":e=[62,8,8];break;default:e=[60,8,8]}return window.devicePixelRatio>1&&(e[0]-=2,e[1]-=1,e[2]-=1),e;case"macos":switch(a.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}t.gerWindowBorder=o,t.isSafari="safari"===(null===a||void 0===a?void 0:a.getBrowserName(!0)),t.popupSupported="desktop"===(null===a||void 0===a?void 0:a.getPlatformType()),t.popupWindowBorder=o()},2270:function(e,t,n){"use strict";var r=n(6690).default,i=n(9728).default,a=n(7424).default;t.fA=t.xj=void 0;var o=n(5743);function s(e){var t=o.gerWindowBorder(),n=a(t,3),r=n[0],i=n[1],s=n[2];e.outerWidth===e.screen.availWidth&&(i=0,s=0);var u=(e.outerWidth-2*i)/e.innerWidth,l=(e.outerHeight-r-s)/e.innerHeight,c=Math.min(l,u);return c=c>1.8?Math.round(c):c>.73?Math.round(20*c)/20:2/Math.round(2/c)}function u(e){var t=e?s(e):1,n=e.outerWidth-e.innerWidth*t>>1,r=Math.round(e.outerHeight-e.innerHeight*t);return n>32?n=8:r-=n,[n,r,t]}var l=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,t,n,r,i,a,o,s){this.scaleX=o/n,this.scaleY=s/r,this.offsetX=i-e*this.scaleX,this.offsetY=a-t*this.scaleY}},{key:"map",value:function(e){return{x:e.x*this.scaleX+this.offsetX,y:e.y*this.scaleY+this.offsetY}}},{key:"revertMap",value:function(e){return{x:(e.x-this.offsetX)/this.scaleX,y:(e.y-this.offsetY)/this.scaleY}}}]),e}();t.xj=function e(t,n){if(!t)return null;var r,i=t.getBoundingClientRect(),o=new l;if(o.init(0,0,t.offsetWidth,t.offsetHeight,i.x,i.y,i.width,i.height),n){var s=o.map({x:n.left,y:n.top}),c=s.x,h=s.y,f=o.map({x:n.left+n.width,y:n.top+n.height});r={left:c,top:h,width:f.x-c,height:f.y-h}}else r={left:i.left,top:i.top,width:i.width,height:i.height};var d=t.ownerDocument.defaultView;if(!d)return i;if(d.frameElement)return e(d.frameElement,r);var p=u(d),v=a(p,3),m=v[0],g=v[1],y=v[2];return 1!==y&&(r.left*=y,r.top*=y,r.width*=y,r.height*=y),r.left+=d.screenX+m,r.top+=d.screenY+g,r},t.fA=function e(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!t)return null;if(n){if(r={left:n.screenX,top:n.screenY,width:n.outerWidth,height:n.outerHeight},i){var s=a(o.popupWindowBorder,3),c=s[0],h=s[1],f=s[2];r.left+=h,r.top+=c,r.width-=2*h,r.height-=c+f}}else if(!r)return null;var d=t.ownerDocument,p=d.defaultView;if(!p)return r;if(p.frameElement)r=e(p.frameElement,null,r);else{var v=u(p),m=a(v,3),g=m[0],y=m[1],b=m[2];r.left-=p.screenX+g,r.top-=p.screenY+y,1!==b&&(r.left/=b,r.top/=b,r.width/=b,r.height/=b)}var x=t.getBoundingClientRect(),w=new l;w.init(0,0,t.offsetWidth,t.offsetHeight,x.x,x.y,x.width,x.height);var _=w.revertMap({x:r.left,y:r.top}),S=_.x,k=_.y,M=w.revertMap({x:r.left+r.width,y:r.top+r.height}),T=M.x,E=M.y;return{left:S,top:k,width:T-S,height:E-k}}},4501:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case l:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.isFragment=function(e){return w(e)===a},t.isMemo=function(e){return w(e)===v}},3873:function(e,t,n){"use strict";e.exports=n(4501)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var I,j=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case M:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){K(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,ke=null;function Me(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Ee(){if(Se){var e=Se,t=ke;if(ke=Se=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Se||null!==ke)&&(Ae(),Ee())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Oe=!1}function De(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Ie=!1,je=null,Fe=!1,ze=null,Be={onError:function(e){Ie=!0,je=e}};function Ue(e,t,n,r,i,a,o,s,u){Ie=!1,je=null,De.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ze(e):null}function Ze(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ze(e);if(null!==t)return t;e=e.sibling}return null}var $e=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,kt,Mt,Tt=!1,Et=[],Ct=null,At=null,Rt=null,Pt=new Map,Lt=new Map,Ot=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function It(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Mt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(zt),Lt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==At&&Ut(At,e),null!==Rt&&Ut(Rt,e),Pt.forEach(t),Lt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var Gt=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=1,$t(e,t,n,r)}finally{bt=i,Gt.transition=a}}function Zt(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=4,$t(e,t,n,r)}finally{bt=i,Gt.transition=a}}function $t(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=It(Ct,e,t,n,r,i),!0;case"dragenter":return At=It(At,e,t,n,r,i),!0;case"mouseover":return Rt=It(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,It(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Lt.set(a,It(Lt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Hr(e,t,r,qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=yi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=j({},ln,{view:0,detail:0}),fn=an(hn),dn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(j({},dn,{dataTransfer:0})),mn=an(j({},hn,{relatedTarget:0})),gn=an(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(j({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Mn(){return kn}var Tn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Cn=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Rn=an(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Pn),On=[9,13,27,32],Nn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var In=c&&"TextEvent"in window&&!Dn,jn=c&&(!Nn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Zr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zn=null,$n=null;function qn(e){Fr(e,0)}function Xn(e){if($(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Kn=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Zn&&(Zn.detachEvent("onpropertychange",nr),$n=Zn=null)}function nr(e){if("value"===e.propertyName&&Xn($n)){var t=[];Wn(t,$n,e,we(e)),Pe(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Zn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Zr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},kr={};function Mr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Mr("animationend"),Er=Mr("animationiteration"),Cr=Mr("animationstart"),Ar=Mr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Nr=Pr[Or];Lr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Er,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(a(198));var c=je;Ie=!1,je=null,Fe||(Fe=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;jr(i,s,l),a=u}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ir.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Zt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Tr:case Er:case Cr:u=gn;break;case Ar:u=Rn;break;case"scroll":u=fn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Le(p,f))&&c.push(Wr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:xi(u),d=null==l?s:xi(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,yi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=$r(d))p++;for(d=0,v=f;v;v=$r(v))d++;for(;0<p-d;)c=$r(c),p--;for(;0<d-p;)f=$r(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=$r(c),f=$r(f)}c=null}else c=null;null!==u&&qr(o,s,u,c,!1),null!==l&&null!==h&&qr(o,h,l,c,!0)}if("select"===(u=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Hn(s))if(Kn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xi(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,Vn=!0)),0<(g=Zr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Nn&&Bn(e,t)?(e=en(),Qt=Jt=Kt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Zr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Le(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Le(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Le(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Le(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],Si=-1;function ki(e){return{current:e}}function Mi(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ti(e,t){Si++,_i[Si]=e.current,e.current=t}var Ei={},Ci=ki(Ei),Ai=ki(!1),Ri=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Mi(Ai),Mi(Ci)}function Ni(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return j({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ri=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Mi(Ai),Mi(Ci),Ti(Ci,e)):Mi(Ai),Ti(Ai,n)}var Fi=null,zi=!1,Bi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),$e(Qe,Vi),i}finally{bt=t,Bi=!1}}return null}var Gi=[],Hi=0,Wi=null,Zi=0,$i=[],qi=0,Xi=null,Yi=1,Ki="";function Ji(e,t){Gi[Hi++]=Zi,Gi[Hi++]=Wi,Wi=e,Zi=t}function Qi(e,t,n){$i[qi++]=Yi,$i[qi++]=Ki,$i[qi++]=Xi,Xi=e;var r=Yi;e=Ki;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ki=a+e}else Yi=1<<a|n<<i|r,Ki=e}function ea(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Gi[--Hi],Gi[Hi]=null,Zi=Gi[--Hi],Gi[Hi]=null;for(;e===Xi;)Xi=$i[--qi],$i[qi]=null,Ki=$i[--qi],$i[qi]=null,Yi=$i[--qi],$i[qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=x.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=ki(null),ya=null,ba=null,xa=null;function wa(){xa=ba=ya=null}function _a(e){var t=ga.current;Mi(ga),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ka(e,t){ya=e,xa=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ta=null;function Ea(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Na(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=j({},h,f);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Iu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var za=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Na(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Na(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Na(e,i,r))&&(nl(t,e,r,n),Da(t,e,r))}};function Va(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ga(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(i=Li(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=za,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ma(a):(a=Li(t)?Ri:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ua.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===za&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function $a(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&qa(a)===t.type)?((r=i(t,n.props)).ref=Za(e,t,n),r.return=e,r):((r=Nl(n.type,n.key,n.props,null,e.mode,r)).ref=Za(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Dl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Nl(t.type,t.key,t.props,null,e.mode,n)).ref=Za(e,null,t),n.return=e,n;case _:return(t=Fl(t,e.mode,n)).return=e,t;case L:return f(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dl(t,e.mode,n,null)).return=e,t;$a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case L:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);$a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);$a(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function m(i,s,u,l){var c=D(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(i,v,y.value,l);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===h?c=b:h.sibling=b,h=b,v=g}if(y.done)return n(i,v),ia&&Ji(i,m),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,l))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return ia&&Ji(i,m),c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===L&&qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Za(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((a=Dl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Nl(o.type,o.key,o.props,null,r.mode,u)).ref=Za(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case L:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(D(o))return m(r,a,o,u);$a(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=Xa(!0),Ka=Xa(!1),Ja={},Qa=ki(Ja),eo=ki(Ja),to=ki(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Qa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi(Qa),Ti(Qa,t)}function io(){Mi(Qa),Mi(eo),Mi(to)}function ao(e){no(to.current);var t=no(Qa.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti(Qa,n))}function oo(e){eo.current===e&&(Mi(Qa),Mi(eo))}var so=ki(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=x.ReactCurrentDispatcher,fo=x.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function _o(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(bo)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Mo(){var e=0!==xo;return xo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Eo(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Iu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Iu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Lo(e,t){var n=vo,r=Eo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,Ho(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,zo(9,No.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&jo(e)}function Do(e,t,n){return n((function(){Io(t)&&jo(e)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Eo().memoizedState}function Uo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=zo(t,n,a,r))}vo.flags|=e,i.memoizedState=zo(1|t,n,a,r)}function Go(e,t){return Uo(8390656,8,e,t)}function Ho(e,t){return Vo(2048,8,e,t)}function Wo(e,t){return Vo(4,2,e,t)}function Zo(e,t){return Vo(4,4,e,t)}function $o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,$o.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Iu|=n,e.baseState=!0),t)}function Qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return Eo().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ea(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ca(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ma,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ma,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Fo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Qo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Go(Do.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Au.identifierPrefix;if(ia){var n=Ki;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ma,useCallback:Yo,useContext:Ma,useEffect:Ho,useImperativeHandle:qo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Ko,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Eo(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Lo,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ma,useCallback:Yo,useContext:Ma,useEffect:Ho,useImperativeHandle:qo,useInsertionEffect:Wo,useLayoutEffect:Zo,useMemo:Ko,useReducer:Ro,useRef:Bo,useState:function(){return Ro(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=Eo();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Lo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Zu?Zu=new Set([this]):Zu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ml.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Na(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Ka(t,null,n,r):Ya(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return ka(t,i),r=ko(e,t,n,r,a,i),n=Mo(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ll(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Es(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ou,Lu),Lu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ou,Lu),Lu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ou,Lu),Lu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ou,Lu),Lu|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Li(n)?Ri:Ci.current;return a=Pi(t,a),ka(t,i),n=ko(e,t,n,r,a,i),r=Mo(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Cs(e,t,n,r,i){if(Li(n)){var a=!0;Ii(t)}else a=!1;if(ka(t,i),null===t.stateNode)Gs(e,t),Ga(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ma(l):l=Pi(t,l=Li(n)?Ri:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Ha(t,o,r,l),Ra=!1;var f=t.memoizedState;o.state=f,ja(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ai.current||Ra?("function"===typeof c&&(Ba(t,n,c,r),u=t.memoizedState),(s=Ra||Va(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,La(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ma(u):u=Pi(t,u=Li(n)?Ri:Ci.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ha(t,o,r,u),Ra=!1,f=t.memoizedState,o.state=f,ja(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||Ra?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(l=Ra||Va(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Hs(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Ls,Os,Ns,Ds={dehydrated:null,treeContext:null,retryLane:0};function Is(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Il(u,i,0,null),e=Dl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Is(n),t.memoizedState=Ds,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Il({mode:"visible",children:r.children},i,0,null),(o=Dl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Is(s),t.memoizedState=Ds,o);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,zs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nl(r,e,i,-1))}return vl(),zs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=El.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&($i[qi++]=Yi,$i[qi++]=Ki,$i[qi++]=Xi,Yi=e.id,Ki=e.overflow,Xi=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ol(r,s):(s=Dl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Is(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Ol(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Il({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Us(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,a);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Iu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(t),null;case 1:case 17:return Li(t.type)&&Oi(),Zs(t),null;case 3:return r=t.stateNode,io(),Mi(Ai),Mi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Zs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Zs(t),null}if(e=no(Qa.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":Z(r),Q(r,o,!0);break;case"textarea":Z(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ls(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":Z(e),Q(e,r,!1);break;case"textarea":Z(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Zs(t),null;case 6:if(e&&null!=t.stateNode)Ns(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Qa.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Zs(t),null;case 13:if(Mi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Zs(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Nu&&(Nu=3):vl())),null!==t.updateQueue&&(t.flags|=4),Zs(t),null);case 4:return io(),null===e&&Vr(t.stateNode.containerInfo),Zs(t),null;case 10:return _a(t.type._context),Zs(t),null;case 19:if(Mi(so),null===(o=t.memoizedState))return Zs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Nu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>Vu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Zs(t),null}else 2*Ke()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(Zs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Lu)&&(Zs(t),6&t.subtreeFlags&&(t.flags|=8192)):Zs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function qs(e,t){switch(ta(t),t.tag){case 1:return Li(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Mi(Ai),Mi(Ci),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Mi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Qa.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Ys=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){kl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Qs(n,t);case 6:var r=cu,i=hu;cu=null,fu(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Vt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kl(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){kl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){kl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){kl(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){kl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&K(i,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):b(i,h,f,c)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){kl(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){kl(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){kl(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Uu=Ke())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,vu(t,e),Ys=c):vu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(f=Js=h;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Qs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){kl(r,n,m)}}break;case 5:Qs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==p?(p.return=d,Js=p):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){kl(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){kl(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){kl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Js=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Xs;var l=Ys;if(Xs=o,(Ys=u)&&!l)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Js=u):_u(i);for(;null!==a;)Js=a,bu(a,t,n),a=a.sibling;Js=i,Xs=s,Ys=l}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):xu(e)}}function xu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&iu(t)}catch(d){kl(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _u(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){kl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){kl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){kl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){kl(t,o,u)}}}catch(u){kl(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Su,ku=Math.ceil,Mu=x.ReactCurrentDispatcher,Tu=x.ReactCurrentOwner,Eu=x.ReactCurrentBatchConfig,Cu=0,Au=null,Ru=null,Pu=0,Lu=0,Ou=ki(0),Nu=0,Du=null,Iu=0,ju=0,Fu=0,zu=null,Bu=null,Uu=0,Vu=1/0,Gu=null,Hu=!1,Wu=null,Zu=null,$u=!1,qu=null,Xu=0,Yu=0,Ku=null,Ju=-1,Qu=0;function el(){return 0!==(6&Cu)?Ke():-1!==Ju?Ju:Ju=Ke()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Qu&&(Qu=vt()),Qu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yu)throw Yu=0,Ku=null,Error(a(185));gt(e,n,r),0!==(2&Cu)&&e===Au||(e===Au&&(0===(2&Cu)&&(ju|=n),4===Nu&&sl(e,Pu)),rl(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(Vu=Ke()+500,zi&&Vi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Au?Pu:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(ul.bind(null,e)):Ui(ul.bind(null,e)),oi((function(){0===(6&Cu)&&Vi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ju=-1,Qu=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ft(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Cu;Cu|=2;var o=pl();for(Au===e&&Pu===t||(Gu=null,Vu=Ke()+500,fl(e,t));;)try{yl();break}catch(u){dl(e,u)}wa(),Mu.current=o,Cu=i,null!==Ru?t=0:(Au=null,Pu=0,t=Nu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Du,fl(e,0),sl(e,r),rl(e,Ke()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Du,fl(e,0),sl(e,r),rl(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wl(e,Bu,Gu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Uu+500-Ke())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wl.bind(null,e,Bu,Gu),t);break}wl(e,Bu,Gu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ri(wl.bind(null,e,Bu,Gu),r);break}wl(e,Bu,Gu);break;default:throw Error(a(329))}}}return rl(e,Ke()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Bu,Bu=n,null!==t&&ol(t)),e}function ol(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function sl(e,t){for(t&=~Fu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Cu))throw Error(a(327));_l();var t=ft(e,0);if(0===(1&t))return rl(e,Ke()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Du,fl(e,0),sl(e,t),rl(e,Ke()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wl(e,Bu,Gu),rl(e,Ke()),null}function ll(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Vu=Ke()+500,zi&&Vi())}}function cl(e){null!==qu&&0===qu.tag&&0===(6&Cu)&&_l();var t=Cu;Cu|=1;var n=Eu.transition,r=bt;try{if(Eu.transition=null,bt=1,e)return e()}finally{bt=r,Eu.transition=n,0===(6&(Cu=t))&&Vi()}}function hl(){Lu=Ou.current,Mi(Ou)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Mi(Ai),Mi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Mi(so);break;case 10:_a(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Au=e,Ru=e=Ol(e.current,null),Pu=Lu=t,Nu=0,Du=null,Fu=ju=Iu=0,Bu=zu=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dl(e,t){for(;;){var n=Ru;try{if(wa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,bo=!1,xo=0,Tu.current=null,null===n||null===n.return){Nu=1,Du=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Nu&&(Nu=2),null===zu?zu=[o]:zu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,ps(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Zu||!Zu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ia(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}xl(n)}catch(x){t=x,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Mu.current;return Mu.current=os,null===e?os:e}function vl(){0!==Nu&&3!==Nu&&2!==Nu||(Nu=4),null===Au||0===(268435455&Iu)&&0===(268435455&ju)||sl(Au,Pu)}function ml(e,t){var n=Cu;Cu|=2;var r=pl();for(Au===e&&Pu===t||(Gu=null,fl(e,t));;)try{gl();break}catch(i){dl(e,i)}if(wa(),Cu=n,Mu.current=r,null!==Ru)throw Error(a(261));return Au=null,Pu=0,Nu}function gl(){for(;null!==Ru;)bl(Ru)}function yl(){for(;null!==Ru&&!Xe();)bl(Ru)}function bl(e){var t=Su(e.alternate,e,Lu);e.memoizedProps=e.pendingProps,null===t?xl(e):Ru=t,Tu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$s(n,t,Lu)))return void(Ru=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Nu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Nu&&(Nu=5)}function wl(e,t,n){var r=bt,i=Eu.transition;try{Eu.transition=null,bt=1,function(e,t,n,r){do{_l()}while(null!==qu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Ru=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$u||($u=!0,Al(tt,(function(){return _l(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Eu.transition,Eu.transition=null;var s=bt;bt=1;var u=Cu;Cu|=4,Tu.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){kl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Ye(),Cu=u,bt=s,Eu.transition=o}else e.current=n;if($u&&($u=!1,qu=e,Xu=i),0===(o=e.pendingLanes)&&(Zu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Wu,Wu=null,e;0!==(1&Xu)&&0!==e.tag&&_l(),0!==(1&(o=e.pendingLanes))?e===Ku?Yu++:(Yu=0,Ku=e):Yu=0,Vi()}(e,t,n,r)}finally{Eu.transition=i,bt=r}return null}function _l(){if(null!==qu){var e=xt(Xu),t=Eu.transition,n=bt;try{if(Eu.transition=null,bt=16>e?16:e,null===qu)var r=!1;else{if(e=qu,qu=null,Xu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Js=f;else for(;null!==Js;){var d=(h=Js).sibling,p=h.return;if(au(h),h===c){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){kl(u,u.return,_)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Cu=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Eu.transition=t}}return!1}function Sl(e,t,n){e=Na(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function kl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zu||!Zu.has(r))){t=Na(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Nu||3===Nu&&(130023424&Pu)===Pu&&500>Ke()-Uu?fl(e,0):Fu|=n),rl(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Aa(e,t))&&(gt(e,t,n),rl(e,n))}function El(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Cl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tl(e,n)}function Al(e,t){return $e(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ll(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Dl(n.children,i,o,t);case k:s=8,i|=8;break;case M:return(e=Pl(12,n,t,2|i)).elementType=M,e.lanes=o,e;case A:return(e=Pl(13,n,t,i)).elementType=A,e.lanes=o,e;case R:return(e=Pl(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Il(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case E:s=9;break e;case C:s=11;break e;case P:s=14;break e;case L:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dl(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Il(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,a,o,s,u){return e=new zl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Ul(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vl(e){if(!e)return Ei;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Li(n))return Di(e,n,t)}return t}function Gl(e,t,n,r,i,a,o,s,u){return(e=Bl(n,r,!0,e,0,a,0,s,u)).context=Vl(null),n=e.current,(a=Oa(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Na(n,a,i),e.current.lanes=i,gt(e,i,r),rl(e,r),e}function Hl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Na(i,t,o))&&(nl(e,i,o,a),Da(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $l(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Li(t.type)&&Ii(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ti(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Zi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);ka(t,n),i=ko(null,t,r,e,i,n);var o=Mo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Ii(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ua,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,La(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Oa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Sa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ka(t,n),r=r(i=Ma(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Ss(e,t,r,i=ma(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Li(r)?(e=!0,Ii(t)):e=!1,ka(t,n),Ga(t,r,i),Wa(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wl(o);s.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wl(o);a.call(e)}}var o=Gl(t,r,e,0,null,!1,0,"",Ql);return e._reactRootContainer=o,e[pi]=o.current,Vr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wl(u);s.call(e)}}var u=Bl(e,0,!1,null,0,!1,0,"",Ql);return e._reactRootContainer=u,e[pi]=u.current,Vr(8===e.nodeType?e.parentNode:e),cl((function(){Hl(t,u,n,r)})),u}(n,t,e,i,r);return Wl(o)}Yl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},Yl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Hl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Ke()),0===(6&Cu)&&(Vu=Ke()+500,Vi()))}break;case 13:cl((function(){var t=Aa(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),$l(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nl(t,e,134217728,el());$l(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Aa(e,t);if(null!==n)nl(n,e,t,el());$l(e,t)}},kt=function(){return bt},Mt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));$(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ll,Ae=cl;var tc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Te,Ee,ll]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(t))throw Error(a(200));return Ul(e,t,null,n)},t.createRoot=function(e,t){if(!Kl(e))throw Error(a(299));var n=!1,r="",i=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,v(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+C(s=e[l],l);u+=A(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,c=a+C(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},O={transition:null},N={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(m=!1,x(e),!v)if(null!==r(l))v=!0,O(_);else{var t=r(c);null!==t&&N(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(T),T=-1),p=!0;var a=d;try{for(x(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),x(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&N(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,M=null,T=-1,E=5,C=-1;function A(){return!(t.unstable_now()-C<E)}function R(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?S():(k=!1,M=null)}}else k=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,S=function(){L.postMessage(null)}}else S=function(){g(R,0)};function O(e){M=e,k||(k=!0,S())}function N(e,n){T=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(y(T),T=-1):m=!0,N(w,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var l=a[u];if(!s(l))return!1;var c=e[l],h=t[l];if(!1===(i=n?n.call(r,c,h,l):void 0)||void 0===i&&c!==h)return!1}return!0}},8562:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1667));function a(e,t){var n=function(n){return i.empty(e).map((function(){return i.filled(t,n)}))},r=[];return r.push(n(-1)),r.push(n(1/0)),r.push(n(0)),r}function o(e,t,n,r,i){t=Math.floor(t);var a=e[0][t],o=e[1][t];e[2][t];if(n>=o[0])return 0;for(var u=0;u<a.length;u++)if(r===a[u])return 0;return s(e,t,n,r,i)}function s(e,t,n,r,i){var a=e[0][t],o=e[1][t],s=e[2][t];if(n>=o[0])return 0;o[0]=n,a[0]=r,s[0]=i;for(var u=0,l=0;;){var c=2*u+1,h=c+1,f=e[0][0].length;if(c>=f)break;if(h>=f){if(!(o[c]>n))break;l=c}else if(o[c]>=o[h]){if(!(n<o[c]))break;l=c}else{if(!(n<o[h]))break;l=h}o[u]=o[l],a[u]=a[l],s[u]=s[l],u=l}return o[u]=n,a[u]=r,s[u]=i,1}function u(e,t,n,r){for(;2*r+1<n;){var i=2*r+1,a=i+1,o=r;if(e[o]<e[i]&&(o=i),a<n&&e[o]<e[a]&&(o=a),o===r)break;var s=e[r];e[r]=e[o],e[o]=s;var u=t[r];t[r]=t[o],t[o]=u,r=o}}t.makeHeap=a,t.rejectionSample=function(e,t,n){for(var r=i.zeros(e),a=0;a<e;a++){for(var o=!0,s=0;o;){s=i.tauRandInt(t,n);for(var u=!1,l=0;l<a;l++)if(s===r[l]){u=!0;break}u||(o=!1)}r[a]=s}return r},t.heapPush=o,t.uncheckedHeapPush=s,t.buildCandidates=function(e,t,n,r,s){for(var u=a(t,r),l=0;l<t;l++)for(var c=0;c<n;c++)if(!(e[0][l][c]<0)){var h=e[0][l][c],f=e[2][l][c],d=i.tauRand(s);o(u,l,d,h,f),o(u,h,d,l,f),e[2][l][c]=0}return u},t.deheapSort=function(e){for(var t=e[0],n=e[1],r=0;r<t.length;r++)for(var i=t[r],a=n[r],o=0;o<i.length-1;o++){var s=i.length-o-1,l=a.length-o-1,c=i[0];i[0]=i[s],i[s]=c;var h=a[0];a[0]=a[l],a[l]=h,u(a,i,l,0)}return{indices:t,weights:n}},t.smallestFlagged=function(e,t){for(var n=e[0][t],r=e[1][t],i=e[2][t],a=1/0,o=-1,s=0;s>n.length;s++)1===i[s]&&r[s]<a&&(a=r[s],o=s);return o>=0?(i[o]=0,Math.floor(n[o])):-1}},1842:function(e,t,n){"use strict";var r=n(3858);t.u=r.UMAP},3901:function(e,t,n){"use strict";var r,i=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1667)),u=function(){function e(e,t,n,r){if(this.entries=new Map,this.nRows=0,this.nCols=0,e.length!==t.length||e.length!==n.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=r[0],this.nCols=r[1];for(var i=0;i<n.length;i++){var a=e[i],o=t[i];this.checkDims(a,o);var s=this.makeKey(a,o);this.entries.set(s,{value:n[i],row:a,col:o})}}return e.prototype.makeKey=function(e,t){return e+":"+t},e.prototype.checkDims=function(e,t){if(!(e<this.nRows&&t<this.nCols))throw new Error("row and/or col specified outside of matrix dimensions")},e.prototype.set=function(e,t,n){this.checkDims(e,t);var r=this.makeKey(e,t);this.entries.has(r)?this.entries.get(r).value=n:this.entries.set(r,{value:n,row:e,col:t})},e.prototype.get=function(e,t,n){void 0===n&&(n=0),this.checkDims(e,t);var r=this.makeKey(e,t);return this.entries.has(r)?this.entries.get(r).value:n},e.prototype.getAll=function(e){void 0===e&&(e=!0);var t=[];return this.entries.forEach((function(e){t.push(e)})),e&&t.sort((function(e,t){return e.row===t.row?e.col-t.col:e.row-t.row})),t},e.prototype.getDims=function(){return[this.nRows,this.nCols]},e.prototype.getRows=function(){return Array.from(this.entries,(function(e){var t=i(e,2);t[0];return t[1].row}))},e.prototype.getCols=function(){return Array.from(this.entries,(function(e){var t=i(e,2);t[0];return t[1].col}))},e.prototype.getValues=function(){return Array.from(this.entries,(function(e){var t=i(e,2);t[0];return t[1].value}))},e.prototype.forEach=function(e){this.entries.forEach((function(t){return e(t.value,t.row,t.col)}))},e.prototype.map=function(t){var n=[];this.entries.forEach((function(e){n.push(t(e.value,e.row,e.col))}));var r=[this.nRows,this.nCols];return new e(this.getRows(),this.getCols(),n,r)},e.prototype.toArray=function(){var e=this,t=s.empty(this.nRows).map((function(){return s.zeros(e.nCols)}));return this.entries.forEach((function(e){t[e.row][e.col]=e.value})),t},e}();t.SparseMatrix=u,t.transpose=function(e){var t=[],n=[],r=[];e.forEach((function(e,i,a){t.push(i),n.push(a),r.push(e)}));var i=[e.nCols,e.nRows];return new u(n,t,r,i)},t.identity=function(e){for(var t=i(e,1)[0],n=new u([],[],[],e),r=0;r<t;r++)n.set(r,r,1);return n},t.pairwiseMultiply=function(e,t){return c(e,t,(function(e,t){return e*t}))},t.add=function(e,t){return c(e,t,(function(e,t){return e+t}))},t.subtract=function(e,t){return c(e,t,(function(e,t){return e-t}))},t.maximum=function(e,t){return c(e,t,(function(e,t){return e>t?e:t}))},t.multiplyScalar=function(e,t){return e.map((function(e){return e*t}))},t.eliminateZeros=function(e){for(var t=new Set,n=e.getValues(),r=e.getRows(),i=e.getCols(),a=0;a<n.length;a++)0===n[a]&&t.add(a);var o=function(e,n){return!t.has(n)},s=n.filter(o),l=r.filter(o),c=i.filter(o);return new u(l,c,s,e.getDims())},t.normalize=function(e,t){var n,r;void 0===t&&(t="l2");var i=l[t],o=new Map;e.forEach((function(e,t,n){var r=o.get(t)||[];r.push(n),o.set(t,r)}));var s=new u([],[],[],e.getDims()),c=function(t){for(var n=o.get(t).sort(),r=n.map((function(n){return e.get(t,n)})),a=i(r),u=0;u<a.length;u++)s.set(t,n[u],a[u])};try{for(var h=a(o.keys()),f=h.next();!f.done;f=h.next()){c(f.value)}}catch(d){n={error:d}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return s};var l=((r={}).max=function(e){for(var t=-1/0,n=0;n<e.length;n++)t=e[n]>t?e[n]:t;return e.map((function(e){return e/t}))},r.l1=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return e.map((function(e){return e/t}))},r.l2=function(e){for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return e.map((function(e){return Math.sqrt(Math.pow(e,2)/t)}))},r);function c(e,t,n){for(var r=new Set,i=[],a=[],o=[],s=function(r,s){i.push(r),a.push(s);var u=n(e.get(r,s),t.get(r,s));o.push(u)},l=e.getValues(),c=e.getRows(),h=e.getCols(),f=0;f<l.length;f++){var d=(g=c[f])+":"+(y=h[f]);r.add(d),s(g,y)}var p=t.getValues(),v=t.getRows(),m=t.getCols();for(f=0;f<p.length;f++){var g,y;d=(g=v[f])+":"+(y=m[f]);r.has(d)||s(g,y)}var b=[e.nRows,e.nCols];return new u(i,a,o,b)}t.getCSR=function(e){var t=[];e.forEach((function(e,n,r){t.push({value:e,row:n,col:r})})),t.sort((function(e,t){return e.row===t.row?e.col-t.col:e.row-t.row}));for(var n=[],r=[],i=[],a=-1,o=0;o<t.length;o++){var s=t[o],u=s.row,l=s.col,c=s.value;u!==a&&(a=u,i.push(o)),n.push(l),r.push(c)}return{indices:n,values:r,indptr:i}}},1790:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(8562)),o=i(n(3901)),s=i(n(4083)),u=i(n(1667));t.makeNNDescent=function(e,t){return function(n,r,i,o,s,l,c,h){void 0===o&&(o=10),void 0===s&&(s=50),void 0===l&&(l=.001),void 0===c&&(c=.5),void 0===h&&(h=!0);for(var f=n.length,d=a.makeHeap(n.length,i),p=0;p<n.length;p++)for(var v=a.rejectionSample(i,n.length,t),m=0;m<v.length;m++){var g=e(n[p],n[v[m]]);a.heapPush(d,p,g,v[m],1),a.heapPush(d,v[m],g,p,1)}if(h)for(var y=0;y<r.length;y++)for(p=0;p<r[y].length&&!(r[y][p]<0);p++)for(m=p+1;m<r[y].length&&!(r[y][m]<0);m++){g=e(n[r[y][p]],n[r[y][m]]);a.heapPush(d,r[y][p],g,r[y][m],1),a.heapPush(d,r[y][m],g,r[y][p],1)}for(y=0;y<o;y++){var b=a.buildCandidates(d,f,i,s,t),x=0;for(p=0;p<f;p++)for(m=0;m<s;m++){var w=Math.floor(b[0][p][m]);if(!(w<0||u.tauRand(t)<c))for(var _=0;_<s;_++){var S=Math.floor(b[0][p][_]),k=b[2][p][m],M=b[2][p][_];if(!(S<0||!k&&!M)){g=e(n[w],n[S]);x+=a.heapPush(d,w,g,S,1),x+=a.heapPush(d,S,g,w,1)}}}if(x<=l*i*n.length)break}return a.deheapSort(d)}},t.makeInitializations=function(e){return{initFromRandom:function(t,n,r,i,o){for(var s=0;s<r.length;s++)for(var l=u.rejectionSample(t,n.length,o),c=0;c<l.length;c++)if(!(l[c]<0)){var h=e(n[l[c]],r[s]);a.heapPush(i,s,h,l[c],1)}},initFromTree:function(t,n,r,i,o){for(var u=0;u<r.length;u++)for(var l=s.searchFlatTree(r[u],t,o),c=0;c<l.length;c++){if(l[c]<0)return;var h=e(n[l[c]],r[u]);a.heapPush(i,u,h,l[c],1)}}}},t.makeInitializedNNSearch=function(e){return function(t,n,i,s){for(var u,l,c=o.getCSR(n),h=c.indices,f=c.indptr,d=0;d<s.length;d++)for(var p=new Set(i[0][d]);;){var v=a.smallestFlagged(i,d);if(-1===v)break;var m=h.slice(f[v],f[v+1]);try{for(var g=r(m),y=g.next();!y.done;y=g.next()){var b=y.value;if(b!==v&&-1!==b&&!p.has(b)){var x=e(t[b],s[d]);a.uncheckedHeapPush(i,d,x,b,1),p.add(b)}}}catch(w){u={error:w}}finally{try{y&&!y.done&&(l=g.return)&&l.call(g)}finally{if(u)throw u.error}}}return i}},t.initializeSearch=function(e,t,n,i,o,s,u){var l,c,h=a.makeHeap(n.length,i);if(o(i,t,n,h,u),e)try{for(var f=r(e),d=f.next();!d.done;d=f.next()){s(d.value,t,n,h,u)}}catch(p){l={error:p}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return h}},4083:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1667)),u=function(e,t,n,r){this.hyperplanes=e,this.offsets=t,this.children=n,this.indices=r};function l(e,t,n,r,i){if(void 0===n&&(n=30),t.length>n){var a=function(e,t,n){var r=e[0].length,i=s.tauRandInt(t.length,n),a=s.tauRandInt(t.length,n);a=(a+=i===a?1:0)%t.length;for(var o=t[i],u=t[a],l=0,c=s.zeros(r),h=0;h<c.length;h++)c[h]=e[o][h]-e[u][h],l-=c[h]*(e[o][h]+e[u][h])/2;var f=0,d=0,p=s.zeros(t.length);for(h=0;h<t.length;h++){for(var v=l,m=0;m<r;m++)v+=c[m]*e[t[h]][m];0===v?(p[h]=s.tauRandInt(2,n),0===p[h]?f+=1:d+=1):v>0?(p[h]=0,f+=1):(p[h]=1,d+=1)}var g=s.zeros(f),y=s.zeros(d);f=0,d=0;for(h=0;h<p.length;h++)0===p[h]?(g[f]=t[h],f+=1):(y[d]=t[h],d+=1);return{indicesLeft:g,indicesRight:y,hyperplane:c,offset:l}}(e,t,i),o=a.indicesLeft,u=a.indicesRight,c=a.hyperplane,h=a.offset;return{leftChild:l(e,o,n,r+1,i),rightChild:l(e,u,n,r+1,i),isLeaf:!1,hyperplane:c,offset:h}}return{indices:t,isLeaf:!0}}function c(e,t,n,r,a,o,s){var u;if(e.isLeaf)return r[o][0]=-s,(u=a[s]).splice.apply(u,i([0,e.indices.length],e.indices)),{nodeNum:o,leafNum:s+=1};t[o]=e.hyperplane,n[o]=e.offset,r[o][0]=o+1;var l=o,h=c(e.leftChild,t,n,r,a,o+1,s);return o=h.nodeNum,s=h.leafNum,r[l][1]=o+1,{nodeNum:(h=c(e.rightChild,t,n,r,a,o+1,s)).nodeNum,leafNum:h.leafNum}}function h(e){return e.isLeaf?1:1+h(e.leftChild)+h(e.rightChild)}function f(e){return e.isLeaf?1:f(e.leftChild)+f(e.rightChild)}function d(e,t,n,r){for(var i=t,a=0;a<n.length;a++)i+=e[a]*n[a];return 0===i?s.tauRandInt(2,r):i>0?0:1}t.FlatTree=u,t.makeForest=function(e,t,n,r){var i=Math.max(10,t),a=s.range(n).map((function(t,n){return function(e,t,n,r){void 0===t&&(t=30);var i=s.range(e.length);return l(e,i,t,n,r)}(e,i,n,r)})),o=a.map((function(e){return function(e,t){var n=h(e),r=f(e),i=s.range(n).map((function(){return s.zeros(e.hyperplane?e.hyperplane.length:0)})),a=s.zeros(n),o=s.range(n).map((function(){return[-1,-1]})),l=s.range(r).map((function(){return s.range(t).map((function(){return-1}))}));return c(e,i,a,o,l,0,0),new u(i,a,o,l)}(e,i)}));return o},t.makeLeafArray=function(e){var t,n;if(e.length>0){var r=[];try{for(var o=a(e),s=o.next();!s.done;s=o.next()){var u=s.value;r.push.apply(r,i(u.indices))}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return[[-1]]},t.searchFlatTree=function(e,t,n){for(var r=0;t.children[r][0]>0;){r=0===d(t.hyperplanes[r],t.offsets[r],e,n)?t.children[r][0]:t.children[r][1]}var i=-1*t.children[r][0];return t.indices[i]}},3858:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(8562)),c=s(n(3901)),h=s(n(1790)),f=s(n(4083)),d=s(n(1667)),p=u(n(2744)),v=1e-5,m=.001,g=function(){function e(e){void 0===e&&(e={});var t=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=y,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new b;var n=function(n){void 0!==e[n]&&(t[n]=e[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return e.prototype.fit=function(e){return this.initializeFit(e),this.optimizeLayout(),this.embedding},e.prototype.fitAsync=function(e,t){return void 0===t&&(t=function(){return!0}),r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.initializeFit(e),[4,this.optimizeLayoutAsync(t)];case 1:return n.sent(),[2,this.embedding]}}))}))},e.prototype.setSupervisedProjection=function(e,t){void 0===t&&(t={}),this.Y=e,this.targetMetric=t.targetMetric||this.targetMetric,this.targetWeight=t.targetWeight||this.targetWeight,this.targetNNeighbors=t.targetNNeighbors||this.targetNNeighbors},e.prototype.setPrecomputedKNN=function(e,t){this.knnIndices=e,this.knnDistances=t},e.prototype.initializeFit=function(e){if(e.length<=this.nNeighbors)throw new Error("Not enough data points ("+e.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===e&&this.isInitialized)return this.getNEpochs();if(this.X=e,!this.knnIndices&&!this.knnDistances){var t=this.nearestNeighbors(e);this.knnIndices=t.knnIndices,this.knnDistances=t.knnDistances}this.graph=this.fuzzySimplicialSet(e,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(e),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),r=n.head,i=n.tail,a=n.epochsPerSample;return this.optimizationState.head=r,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=a,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},e.prototype.makeSearchFns=function(){var e=h.makeInitializations(this.distanceFn),t=e.initFromTree,n=e.initFromRandom;this.initFromTree=t,this.initFromRandom=n,this.search=h.makeInitializedNNSearch(this.distanceFn)},e.prototype.makeSearchGraph=function(e){for(var t=this.knnIndices,n=this.knnDistances,r=[e.length,e.length],i=new c.SparseMatrix([],[],[],r),a=0;a<t.length;a++)for(var o=t[a],s=n[a],u=0;u<o.length;u++){var l=o[u],h=s[u];h>0&&i.set(a,l,h)}var f=c.transpose(i);return c.maximum(i,f)},e.prototype.transform=function(e){var t=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var r=Math.floor(this.nNeighbors*this.transformQueueSize);r=Math.min(n.length,r);var i=h.initializeSearch(this.rpForest,n,e,r,this.initFromRandom,this.initFromTree,this.random),a=this.search(n,this.searchGraph,i,e),o=l.deheapSort(a),s=o.indices,u=o.weights;s=s.map((function(e){return e.slice(0,t.nNeighbors)})),u=u.map((function(e){return e.slice(0,t.nNeighbors)}));var f=Math.max(0,this.localConnectivity-1),p=this.smoothKNNDistance(u,this.nNeighbors,f),v=p.sigmas,m=p.rhos,g=this.computeMembershipStrengths(s,u,v,m),y=g.rows,b=g.cols,x=g.vals,w=[e.length,n.length],_=new c.SparseMatrix(y,b,x,w),S=c.normalize(_,"l1"),k=c.getCSR(S),T=e.length,E=M(d.reshape2d(k.indices,T,this.nNeighbors),d.reshape2d(k.values,T,this.nNeighbors),this.embedding),C=this.nEpochs?this.nEpochs/3:_.nRows<=1e4?100:30,A=_.getValues().reduce((function(e,t){return t>e?t:e}),0);_=_.map((function(e){return e<A/C?0:e})),_=c.eliminateZeros(_);var R=this.makeEpochsPerSample(_.getValues(),C),P=_.getRows(),L=_.getCols();return this.assignOptimizationStateParameters({headEmbedding:E,tailEmbedding:this.embedding,head:P,tail:L,currentEpoch:0,nEpochs:C,nVertices:_.getDims()[1],epochsPerSample:R}),this.prepareForOptimizationLoop(),this.optimizeLayout()},e.prototype.processGraphForSupervisedProjection=function(){var e=this.Y,t=this.X;if(e){if(e.length!==t.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var n=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,e,n)}}},e.prototype.step=function(){var e=this.optimizationState.currentEpoch;return e<this.getNEpochs()&&this.optimizeLayoutStep(e),this.optimizationState.currentEpoch},e.prototype.getEmbedding=function(){return this.embedding},e.prototype.nearestNeighbors=function(e){var t,n=this.distanceFn,r=this.nNeighbors,i=h.makeNNDescent(n,this.random),a=5+Math.floor(.5===(t=Math.pow(e.length,.5)/20)?0:Math.round(t)),o=Math.max(5,Math.floor(Math.round(function(e){return Math.log(e)/Math.log(2)}(e.length))));this.rpForest=f.makeForest(e,r,a,this.random);var s=i(e,f.makeLeafArray(this.rpForest),r,o);return{knnIndices:s.indices,knnDistances:s.weights}},e.prototype.fuzzySimplicialSet=function(e,t,n){void 0===n&&(n=1);var r=this,i=r.knnIndices,a=void 0===i?[]:i,o=r.knnDistances,s=void 0===o?[]:o,u=r.localConnectivity,l=this.smoothKNNDistance(s,t,u),h=l.sigmas,f=l.rhos,d=this.computeMembershipStrengths(a,s,h,f),p=d.rows,v=d.cols,m=d.vals,g=[e.length,e.length],y=new c.SparseMatrix(p,v,m,g),b=c.transpose(y),x=c.pairwiseMultiply(y,b),w=c.subtract(c.add(y,b),x),_=c.multiplyScalar(w,n),S=c.multiplyScalar(x,1-n);return c.add(_,S)},e.prototype.categoricalSimplicialSetIntersection=function(e,t,n,r){void 0===r&&(r=1);var i=S(e,t,r,n);return k(i=c.eliminateZeros(i))},e.prototype.smoothKNNDistance=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=64),void 0===i&&(i=1);for(var a=Math.log(t)/Math.log(2)*i,o=d.zeros(e.length),s=d.zeros(e.length),u=0;u<e.length;u++){var l=0,c=1/0,h=1,f=e[u],p=f.filter((function(e){return e>0}));if(p.length>=n){var g=Math.floor(n),y=n-g;g>0?(o[u]=p[g-1],y>v&&(o[u]+=y*(p[g]-p[g-1]))):o[u]=y*p[0]}else p.length>0&&(o[u]=d.max(p));for(var b=0;b<r;b++){for(var x=0,w=1;w<e[u].length;w++){var _=e[u][w]-o[u];x+=_>0?Math.exp(-_/h):1}if(Math.abs(x-a)<v)break;x>a?h=(l+(c=h))/2:(l=h,c===1/0?h*=2:h=(l+c)/2)}if(s[u]=h,o[u]>0){var S=d.mean(f);s[u]<m*S&&(s[u]=m*S)}else{var k=d.mean(e.map(d.mean));s[u]<m*k&&(s[u]=m*k)}}return{sigmas:s,rhos:o}},e.prototype.computeMembershipStrengths=function(e,t,n,r){for(var i=e.length,a=e[0].length,o=d.zeros(i*a),s=d.zeros(i*a),u=d.zeros(i*a),l=0;l<i;l++)for(var c=0;c<a;c++){var h=0;-1!==e[l][c]&&(h=e[l][c]===l?0:t[l][c]-r[l]<=0?1:Math.exp(-(t[l][c]-r[l])/n[l]),o[l*a+c]=l,s[l*a+c]=e[l][c],u[l*a+c]=h)}return{rows:o,cols:s,vals:u}},e.prototype.initializeSimplicialSetEmbedding=function(){for(var e=this,t=this.getNEpochs(),n=this.nComponents,r=this.graph.getValues(),i=0,a=0;a<r.length;a++){var o=r[a];i<r[a]&&(i=o)}var s=this.graph.map((function(e){return e<i/t?0:e}));this.embedding=d.zeros(s.nRows).map((function(){return d.zeros(n).map((function(){return 20*d.tauRand(e.random)-10}))}));var u=[],l=[],c=[],h=s.getAll();for(a=0;a<h.length;a++){var f=h[a];f.value&&(u.push(f.value),c.push(f.row),l.push(f.col))}return{head:l,tail:c,epochsPerSample:this.makeEpochsPerSample(u,t)}},e.prototype.makeEpochsPerSample=function(e,t){var n=d.filled(e.length,-1),r=d.max(e),i=e.map((function(e){return e/r*t}));return i.forEach((function(e,r){e>0&&(n[r]=t/i[r])})),n},e.prototype.assignOptimizationStateParameters=function(e){Object.assign(this.optimizationState,e)},e.prototype.prepareForOptimizationLoop=function(){var e=this,t=e.repulsionStrength,n=e.learningRate,r=e.negativeSampleRate,i=this.optimizationState,a=i.epochsPerSample,s=i.headEmbedding,u=i.tailEmbedding,l=s[0].length,c=s.length===u.length,h=a.map((function(e){return e/r})),f=o(h),d=o(a);this.assignOptimizationStateParameters({epochOfNextSample:d,epochOfNextNegativeSample:f,epochsPerNegativeSample:h,moveOther:c,initialAlpha:n,alpha:n,gamma:t,dim:l})},e.prototype.initializeOptimization=function(){var e=this.embedding,t=this.embedding,n=this.optimizationState,r=n.head,i=n.tail,a=n.epochsPerSample,o=this.getNEpochs(),s=this.graph.nCols,u=_(this.spread,this.minDist),l=u.a,c=u.b;this.assignOptimizationStateParameters({headEmbedding:e,tailEmbedding:t,head:r,tail:i,epochsPerSample:a,a:l,b:c,nEpochs:o,nVertices:s})},e.prototype.optimizeLayoutStep=function(e){for(var t=this.optimizationState,n=t.head,r=t.tail,i=t.headEmbedding,a=t.tailEmbedding,o=t.epochsPerSample,s=t.epochOfNextSample,u=t.epochOfNextNegativeSample,l=t.epochsPerNegativeSample,c=t.moveOther,h=t.initialAlpha,f=t.alpha,p=t.gamma,v=t.a,m=t.b,g=t.dim,y=t.nEpochs,b=t.nVertices,_=0;_<o.length;_++)if(!(s[_]>e)){var S=n[_],k=r[_],M=i[S],T=a[k],E=w(M,T),C=0;E>0&&(C=-2*v*m*Math.pow(E,m-1),C/=v*Math.pow(E,m)+1);for(var A=0;A<g;A++){var R=x(C*(M[A]-T[A]),4);M[A]+=R*f,c&&(T[A]+=-R*f)}s[_]+=o[_];for(var P=Math.floor((e-u[_])/l[_]),L=0;L<P;L++){var O=d.tauRandInt(b,this.random),N=a[O],D=w(M,N),I=0;if(D>0)I=2*p*m,I/=(.001+D)*(v*Math.pow(D,m)+1);else if(S===O)continue;for(A=0;A<g;A++){R=4;I>0&&(R=x(I*(M[A]-N[A]),4)),M[A]+=R*f}}u[_]+=P*l[_]}return t.alpha=h*(1-e/y),t.currentEpoch+=1,i},e.prototype.optimizeLayoutAsync=function(e){var t=this;return void 0===e&&(e=function(){return!0}),new Promise((function(n,a){var o=function o(){return r(t,void 0,void 0,(function(){var t,r,s,u,l,c;return i(this,(function(i){try{if(t=this.optimizationState,r=t.nEpochs,s=t.currentEpoch,this.embedding=this.optimizeLayoutStep(s),u=this.optimizationState.currentEpoch,l=!1===e(u),c=u===r,l||c)return[2,n(c)];setTimeout((function(){return o()}),0)}catch(h){a(h)}return[2]}))}))};setTimeout((function(){return o()}),0)}))},e.prototype.optimizeLayout=function(e){void 0===e&&(e=function(){return!0});for(var t=!1,n=[];!t;){var r=this.optimizationState,i=r.nEpochs,a=r.currentEpoch;n=this.optimizeLayoutStep(a);var o=this.optimizationState.currentEpoch,s=!1===e(o);t=o===i||s}return n},e.prototype.getNEpochs=function(){var e=this.graph;if(this.nEpochs>0)return this.nEpochs;var t=e.nRows;return t<=2500?500:t<=5e3?400:t<=7500?300:200},e}();function y(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return Math.sqrt(n)}t.UMAP=g,t.euclidean=y,t.cosine=function(e,t){for(var n=0,r=0,i=0,a=0;a<e.length;a++)n+=e[a]*t[a],r+=Math.pow(e[a],2),i+=Math.pow(t[a],2);return 0===r&&0===i?0:0===r||0===i?1:1-n/Math.sqrt(r*i)};var b=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function x(e,t){return e>t?t:e<-t?-t:e}function w(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n}function _(e,t){var n=d.linear(0,3*e,300).map((function(e){return e<t?1:e})),r=d.zeros(n.length).map((function(r,i){return n[i]>=t?Math.exp(-(n[i]-t)/e):r})),i={x:n,y:r},o={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},s=p.default(i,(function(e){var t=a(e,2),n=t[0],r=t[1];return function(e){return 1/(1+n*Math.pow(e,2*r))}}),o).parameterValues,u=a(s,2);return{a:u[0],b:u[1]}}function S(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=5),e.map((function(e,i,a){return-1===t[i]||-1===t[a]?e*Math.exp(-n):t[i]!==t[a]?e*Math.exp(-r):e}))}function k(e){e=c.normalize(e,"max");var t=c.transpose(e),n=c.pairwiseMultiply(t,e);return e=c.add(e,c.subtract(t,n)),c.eliminateZeros(e)}function M(e,t,n){for(var r=d.zeros(e.length).map((function(e){return d.zeros(n[0].length)})),i=0;i<e.length;i++)for(var a=0;a<e[0].length;a++)for(var o=0;o<n[0].length;o++){var s=e[i][a];r[i][o]+=t[i][a]*n[s][o]}return r}t.findABParams=_,t.fastIntersection=S,t.resetLocalConnectivity=k,t.initTransform=M},1667:function(e,t){"use strict";var n=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};function r(e,t){return Math.floor(t()*e)}function i(e){for(var t=[],n=0;n<e;n++)t.push(void 0);return t}function a(e,t){return i(e).map((function(){return t}))}function o(e){return a(e,0)}function s(e){return e.reduce((function(e,t){return e+t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.tauRandInt=r,t.tauRand=function(e){return e()},t.norm=function(e){var t,r,i=0;try{for(var a=n(e),o=a.next();!o.done;o=a.next()){var s=o.value;i+=Math.pow(s,2)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return Math.sqrt(i)},t.empty=i,t.range=function(e){return i(e).map((function(e,t){return t}))},t.filled=a,t.zeros=o,t.ones=function(e){return a(e,1)},t.linear=function(e,t,n){return i(n).map((function(r,i){return e+i*((t-e)/(n-1))}))},t.sum=s,t.mean=function(e){return s(e)/e.length},t.max=function(e){for(var t=0,n=0;n<e.length;n++)t=e[n]>t?e[n]:t;return t},t.max2d=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)t=e[n][r]>t?e[n][r]:t;return t},t.rejectionSample=function(e,t,n){for(var i=o(e),a=0;a<e;a++)for(var s=!0;s;){for(var u=r(t,n),l=!1,c=0;c<a;c++)if(u===i[c]){l=!0;break}l||(s=!1),i[a]=u}return i},t.reshape2d=function(e,t,n){var r=[],i=0;if(e.length!==t*n)throw new Error("Array dimensions must match input length.");for(var a=0;a<t;a++){for(var o=[],s=0;s<n;s++)o.push(e[i]),i+=1;r.push(o),1}return r}},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(2192);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(2192);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,n){var r=n(8416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,n){var r=n(7071);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),o=new L(r||[]);return s(a,"_invoke",{value:C(e,n,o)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v="suspendedStart",m="executing",g="completed",y={};function b(){}function x(){}function w(){}var _={};f(_,l,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(O([])));k&&k!==a&&o.call(k,l)&&(_=k);var M=w.prototype=b.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,s,u){var l=p(e[i],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==r(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function C(e,n,r){var i=v;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?g:"suspendedYield",l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=g,r.method="throw",r.arg=l.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=p(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return x.prototype=w,s(M,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:x,configurable:!0}),x.displayName=f(w,h,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,h,"GeneratorFunction")),e.prototype=Object.create(M),e},n.awrap=function(e){return{__await:e}},T(E.prototype),f(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new E(d(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(M),f(M,h,"Generator"),f(M,l,(function(){return this})),f(M,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=O,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},9400:function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2192:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},1501:function(e){e.exports=function(){"use strict";for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t=e,n=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},r={},i=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<a.length;i+=1){var o=a[i];r["[object "+o+"]"]=o.toLowerCase()}var s=function(e){return r[Object.prototype.toString.call(e)]||"object"},u=s,l=function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==u(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},c=s,h=function(e){if(e.length<2)return null;var t=e.length-1;return"string"==c(e[t])?e[t].toLowerCase():null},f=Math.PI,d={clip_rgb:n,limit:e,type:s,unpack:l,last:h,PI:f,TWOPI:2*f,PITHIRD:f/3,DEG2RAD:f/180,RAD2DEG:180/f},p={format:{},autodetect:[]},v=d.last,m=d.clip_rgb,g=d.type,y=p,b=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===g(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=v(e),i=!1;if(!r){i=!0,y.sorted||(y.autodetect=y.autodetect.sort((function(e,t){return t.p-e.p})),y.sorted=!0);for(var a=0,o=y.autodetect;a<o.length;a+=1){var s=o[a];if(r=s.test.apply(s,e))break}}if(!y.format[r])throw new Error("unknown format: "+e);var u=y.format[r].apply(null,i?e:e.slice(0,-1));n._rgb=m(u),3===n._rgb.length&&n._rgb.push(1)};b.prototype.toString=function(){return"function"==g(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var x=b,w=function e(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(e.Color,[null].concat(t)))};w.Color=x,w.version="2.4.2";var _=w,S=d.unpack,k=Math.max,M=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=S(e,"rgb"),r=n[0],i=n[1],a=n[2],o=1-k(r/=255,k(i/=255,a/=255)),s=o<1?1/(1-o):0;return[(1-r-o)*s,(1-i-o)*s,(1-a-o)*s,o]},T=M,E=d.unpack,C=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=E(e,"cmyk"))[0],r=e[1],i=e[2],a=e[3],o=e.length>4?e[4]:1;return 1===a?[0,0,0,o]:[n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),i>=1?0:255*(1-i)*(1-a),o]},A=C,R=_,P=x,L=p,O=d.unpack,N=d.type,D=T;P.prototype.cmyk=function(){return D(this._rgb)},R.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["cmyk"])))},L.format.cmyk=A,L.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=O(e,"cmyk"),"array"===N(e)&&4===e.length)return"cmyk"}});var I=d.unpack,j=d.last,F=function(e){return Math.round(100*e)/100},z=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=I(e,"hsla"),r=j(e)||"lsa";return n[0]=F(n[0]||0),n[1]=F(100*n[1])+"%",n[2]=F(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},B=z,U=d.unpack,V=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=U(e,"rgba"))[0],r=e[1],i=e[2];n/=255,r/=255,i/=255;var a,o,s=Math.min(n,r,i),u=Math.max(n,r,i),l=(u+s)/2;return u===s?(a=0,o=Number.NaN):a=l<.5?(u-s)/(u+s):(u-s)/(2-u-s),n==u?o=(r-i)/(u-s):r==u?o=2+(i-n)/(u-s):i==u&&(o=4+(n-r)/(u-s)),(o*=60)<0&&(o+=360),e.length>3&&void 0!==e[3]?[o,a,l,e[3]]:[o,a,l]},G=V,H=d.unpack,W=d.last,Z=B,$=G,q=Math.round,X=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=H(e,"rgba"),r=W(e)||"rgb";return"hsl"==r.substr(0,3)?Z($(n),r):(n[0]=q(n[0]),n[1]=q(n[1]),n[2]=q(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},Y=X,K=d.unpack,J=Math.round,Q=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,a,o=(t=K(t,"hsl"))[0],s=t[1],u=t[2];if(0===s)r=i=a=255*u;else{var l=[0,0,0],c=[0,0,0],h=u<.5?u*(1+s):u+s-u*s,f=2*u-h,d=o/360;l[0]=d+1/3,l[1]=d,l[2]=d-1/3;for(var p=0;p<3;p++)l[p]<0&&(l[p]+=1),l[p]>1&&(l[p]-=1),6*l[p]<1?c[p]=f+6*(h-f)*l[p]:2*l[p]<1?c[p]=h:3*l[p]<2?c[p]=f+(h-f)*(2/3-l[p])*6:c[p]=f;r=(e=[J(255*c[0]),J(255*c[1]),J(255*c[2])])[0],i=e[1],a=e[2]}return t.length>3?[r,i,a,t[3]]:[r,i,a,1]},ee=Q,te=ee,ne=p,re=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ie=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ae=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,oe=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,se=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ue=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,le=Math.round,ce=function(e){var t;if(e=e.toLowerCase().trim(),ne.format.named)try{return ne.format.named(e)}catch(p){}if(t=e.match(re)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(ie)){for(var i=t.slice(1,5),a=0;a<4;a++)i[a]=+i[a];return i}if(t=e.match(ae)){for(var o=t.slice(1,4),s=0;s<3;s++)o[s]=le(2.55*o[s]);return o[3]=1,o}if(t=e.match(oe)){for(var u=t.slice(1,5),l=0;l<3;l++)u[l]=le(2.55*u[l]);return u[3]=+u[3],u}if(t=e.match(se)){var c=t.slice(1,4);c[1]*=.01,c[2]*=.01;var h=te(c);return h[3]=1,h}if(t=e.match(ue)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var d=te(f);return d[3]=+t[4],d}};ce.test=function(e){return re.test(e)||ie.test(e)||ae.test(e)||oe.test(e)||se.test(e)||ue.test(e)};var he=ce,fe=_,de=x,pe=p,ve=d.type,me=Y,ge=he;de.prototype.css=function(e){return me(this._rgb,e)},fe.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(de,[null].concat(e,["css"])))},pe.format.css=ge,pe.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ve(e)&&ge.test(e))return"css"}});var ye=x,be=_,xe=p,we=d.unpack;xe.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=we(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},be.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ye,[null].concat(e,["gl"])))},ye.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var _e=d.unpack,Se=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=_e(e,"rgb"),i=r[0],a=r[1],o=r[2],s=Math.min(i,a,o),u=Math.max(i,a,o),l=u-s,c=100*l/255,h=s/(255-l)*100;return 0===l?n=Number.NaN:(i===u&&(n=(a-o)/l),a===u&&(n=2+(o-i)/l),o===u&&(n=4+(i-a)/l),(n*=60)<0&&(n+=360)),[n,c,h]},ke=Se,Me=d.unpack,Te=Math.floor,Ee=function(){for(var e,t,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var u,l,c,h=(o=Me(o,"hcg"))[0],f=o[1],d=o[2];d*=255;var p=255*f;if(0===f)u=l=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var v=Te(h/=60),m=h-v,g=d*(1-f),y=g+p*(1-m),b=g+p*m,x=g+p;switch(v){case 0:u=(e=[x,b,g])[0],l=e[1],c=e[2];break;case 1:u=(t=[y,x,g])[0],l=t[1],c=t[2];break;case 2:u=(n=[g,x,b])[0],l=n[1],c=n[2];break;case 3:u=(r=[g,y,x])[0],l=r[1],c=r[2];break;case 4:u=(i=[b,g,x])[0],l=i[1],c=i[2];break;case 5:u=(a=[x,g,y])[0],l=a[1],c=a[2]}}return[u,l,c,o.length>3?o[3]:1]},Ce=Ee,Ae=d.unpack,Re=d.type,Pe=_,Le=x,Oe=p,Ne=ke;Le.prototype.hcg=function(){return Ne(this._rgb)},Pe.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Le,[null].concat(e,["hcg"])))},Oe.format.hcg=Ce,Oe.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ae(e,"hcg"),"array"===Re(e)&&3===e.length)return"hcg"}});var De=d.unpack,Ie=d.last,je=Math.round,Fe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=De(e,"rgba"),r=n[0],i=n[1],a=n[2],o=n[3],s=Ie(e)||"auto";void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb");var u="000000"+((r=je(r))<<16|(i=je(i))<<8|(a=je(a))).toString(16);u=u.substr(u.length-6);var l="0"+je(255*o).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return"#"+u+l;case"argb":return"#"+l+u;default:return"#"+u}},ze=Fe,Be=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ue=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ve=function(e){if(e.match(Be)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(Ue)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},Ge=_,He=x,We=d.type,Ze=p,$e=ze;He.prototype.hex=function(e){return $e(this._rgb,e)},Ge.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(He,[null].concat(e,["hex"])))},Ze.format.hex=Ve,Ze.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===We(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var qe=d.unpack,Xe=d.TWOPI,Ye=Math.min,Ke=Math.sqrt,Je=Math.acos,Qe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=qe(e,"rgb"),i=r[0],a=r[1],o=r[2],s=Ye(i/=255,a/=255,o/=255),u=(i+a+o)/3,l=u>0?1-s/u:0;return 0===l?n=NaN:(n=(i-a+(i-o))/2,n/=Ke((i-a)*(i-a)+(i-o)*(a-o)),n=Je(n),o>a&&(n=Xe-n),n/=Xe),[360*n,l,u]},et=Qe,tt=d.unpack,nt=d.limit,rt=d.TWOPI,it=d.PITHIRD,at=Math.cos,ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=tt(e,"hsi"))[0],o=e[1],s=e[2];return isNaN(a)&&(a=0),isNaN(o)&&(o=0),a>360&&(a-=360),a<0&&(a+=360),(a/=360)<1/3?r=1-((i=(1-o)/3)+(n=(1+o*at(rt*a)/at(it-rt*a))/3)):a<2/3?i=1-((n=(1-o)/3)+(r=(1+o*at(rt*(a-=1/3))/at(it-rt*a))/3)):n=1-((r=(1-o)/3)+(i=(1+o*at(rt*(a-=2/3))/at(it-rt*a))/3)),[255*(n=nt(s*n*3)),255*(r=nt(s*r*3)),255*(i=nt(s*i*3)),e.length>3?e[3]:1]},st=ot,ut=d.unpack,lt=d.type,ct=_,ht=x,ft=p,dt=et;ht.prototype.hsi=function(){return dt(this._rgb)},ct.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ht,[null].concat(e,["hsi"])))},ft.format.hsi=st,ft.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ut(e,"hsi"),"array"===lt(e)&&3===e.length)return"hsi"}});var pt=d.unpack,vt=d.type,mt=_,gt=x,yt=p,bt=G;gt.prototype.hsl=function(){return bt(this._rgb)},mt.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(gt,[null].concat(e,["hsl"])))},yt.format.hsl=ee,yt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=pt(e,"hsl"),"array"===vt(e)&&3===e.length)return"hsl"}});var xt=d.unpack,wt=Math.min,_t=Math.max,St=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=xt(e,"rgb"))[0],o=e[1],s=e[2],u=wt(a,o,s),l=_t(a,o,s),c=l-u;return i=l/255,0===l?(n=Number.NaN,r=0):(r=c/l,a===l&&(n=(o-s)/c),o===l&&(n=2+(s-a)/c),s===l&&(n=4+(a-o)/c),(n*=60)<0&&(n+=360)),[n,r,i]},kt=St,Mt=d.unpack,Tt=Math.floor,Et=function(){for(var e,t,n,r,i,a,o=[],s=arguments.length;s--;)o[s]=arguments[s];var u,l,c,h=(o=Mt(o,"hsv"))[0],f=o[1],d=o[2];if(d*=255,0===f)u=l=c=d;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var p=Tt(h/=60),v=h-p,m=d*(1-f),g=d*(1-f*v),y=d*(1-f*(1-v));switch(p){case 0:u=(e=[d,y,m])[0],l=e[1],c=e[2];break;case 1:u=(t=[g,d,m])[0],l=t[1],c=t[2];break;case 2:u=(n=[m,d,y])[0],l=n[1],c=n[2];break;case 3:u=(r=[m,g,d])[0],l=r[1],c=r[2];break;case 4:u=(i=[y,m,d])[0],l=i[1],c=i[2];break;case 5:u=(a=[d,m,g])[0],l=a[1],c=a[2]}}return[u,l,c,o.length>3?o[3]:1]},Ct=Et,At=d.unpack,Rt=d.type,Pt=_,Lt=x,Ot=p,Nt=kt;Lt.prototype.hsv=function(){return Nt(this._rgb)},Pt.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lt,[null].concat(e,["hsv"])))},Ot.format.hsv=Ct,Ot.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=At(e,"hsv"),"array"===Rt(e)&&3===e.length)return"hsv"}});var Dt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},It=Dt,jt=d.unpack,Ft=Math.pow,zt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=jt(e,"rgb"),r=n[0],i=n[1],a=n[2],o=Vt(r,i,a),s=o[0],u=o[1],l=116*u-16;return[l<0?0:l,500*(s-u),200*(u-o[2])]},Bt=function(e){return(e/=255)<=.04045?e/12.92:Ft((e+.055)/1.055,2.4)},Ut=function(e){return e>It.t3?Ft(e,1/3):e/It.t2+It.t0},Vt=function(e,t,n){return e=Bt(e),t=Bt(t),n=Bt(n),[Ut((.4124564*e+.3575761*t+.1804375*n)/It.Xn),Ut((.2126729*e+.7151522*t+.072175*n)/It.Yn),Ut((.0193339*e+.119192*t+.9503041*n)/It.Zn)]},Gt=zt,Ht=Dt,Wt=d.unpack,Zt=Math.pow,$t=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,a=(e=Wt(e,"lab"))[0],o=e[1],s=e[2];return r=(a+16)/116,n=isNaN(o)?r:r+o/500,i=isNaN(s)?r:r-s/200,r=Ht.Yn*Xt(r),n=Ht.Xn*Xt(n),i=Ht.Zn*Xt(i),[qt(3.2404542*n-1.5371385*r-.4985314*i),qt(-.969266*n+1.8760108*r+.041556*i),qt(.0556434*n-.2040259*r+1.0572252*i),e.length>3?e[3]:1]},qt=function(e){return 255*(e<=.00304?12.92*e:1.055*Zt(e,1/2.4)-.055)},Xt=function(e){return e>Ht.t1?e*e*e:Ht.t2*(e-Ht.t0)},Yt=$t,Kt=d.unpack,Jt=d.type,Qt=_,en=x,tn=p,nn=Gt;en.prototype.lab=function(){return nn(this._rgb)},Qt.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(en,[null].concat(e,["lab"])))},tn.format.lab=Yt,tn.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Kt(e,"lab"),"array"===Jt(e)&&3===e.length)return"lab"}});var rn=d.unpack,an=d.RAD2DEG,on=Math.sqrt,sn=Math.atan2,un=Math.round,ln=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=rn(e,"lab"),r=n[0],i=n[1],a=n[2],o=on(i*i+a*a),s=(sn(a,i)*an+360)%360;return 0===un(1e4*o)&&(s=Number.NaN),[r,o,s]},cn=ln,hn=d.unpack,fn=Gt,dn=cn,pn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=hn(e,"rgb"),r=n[0],i=n[1],a=n[2],o=fn(r,i,a),s=o[0],u=o[1],l=o[2];return dn(s,u,l)},vn=pn,mn=d.unpack,gn=d.DEG2RAD,yn=Math.sin,bn=Math.cos,xn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=mn(e,"lch"),r=n[0],i=n[1],a=n[2];return isNaN(a)&&(a=0),[r,bn(a*=gn)*i,yn(a)*i]},wn=xn,_n=d.unpack,Sn=wn,kn=Yt,Mn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=_n(e,"lch"))[0],r=e[1],i=e[2],a=Sn(n,r,i),o=a[0],s=a[1],u=a[2],l=kn(o,s,u);return[l[0],l[1],l[2],e.length>3?e[3]:1]},Tn=Mn,En=d.unpack,Cn=Tn,An=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=En(e,"hcl").reverse();return Cn.apply(void 0,n)},Rn=An,Pn=d.unpack,Ln=d.type,On=_,Nn=x,Dn=p,In=vn;Nn.prototype.lch=function(){return In(this._rgb)},Nn.prototype.hcl=function(){return In(this._rgb).reverse()},On.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Nn,[null].concat(e,["lch"])))},On.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Nn,[null].concat(e,["hcl"])))},Dn.format.lch=Tn,Dn.format.hcl=Rn,["lch","hcl"].forEach((function(e){return Dn.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=Pn(t,e),"array"===Ln(t)&&3===t.length)return e}})}));var jn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Fn=x,zn=p,Bn=d.type,Un=jn,Vn=Ve,Gn=ze;Fn.prototype.name=function(){for(var e=Gn(this._rgb,"rgb"),t=0,n=Object.keys(Un);t<n.length;t+=1){var r=n[t];if(Un[r]===e)return r.toLowerCase()}return e},zn.format.named=function(e){if(e=e.toLowerCase(),Un[e])return Vn(Un[e]);throw new Error("unknown color name: "+e)},zn.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===Bn(e)&&Un[e.toLowerCase()])return"named"}});var Hn=d.unpack,Wn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Hn(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Zn=Wn,$n=d.type,qn=function(e){if("number"==$n(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},Xn=qn,Yn=_,Kn=x,Jn=p,Qn=d.type,er=Zn;Kn.prototype.num=function(){return er(this._rgb)},Yn.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Kn,[null].concat(e,["num"])))},Jn.format.num=Xn,Jn.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===Qn(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var tr=_,nr=x,rr=p,ir=d.unpack,ar=d.type,or=Math.round;nr.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(or)},nr.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:or(t):t}))},tr.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(nr,[null].concat(e,["rgb"])))},rr.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ir(e,"rgba");return void 0===n[3]&&(n[3]=1),n},rr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ir(e,"rgba"),"array"===ar(e)&&(3===e.length||4===e.length&&"number"==ar(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var sr=Math.log,ur=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=i<6?0:-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*sr(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*sr(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*sr(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*sr(n),r=255),[t,n,r,1]},lr=ur,cr=d.unpack,hr=Math.round,fr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=cr(e,"rgb"),i=r[0],a=r[2],o=1e3,s=4e4,u=.4;s-o>u;){var l=lr(n=.5*(s+o));l[2]/l[0]>=a/i?s=n:o=n}return hr(n)},dr=_,pr=x,vr=p,mr=fr;pr.prototype.temp=pr.prototype.kelvin=pr.prototype.temperature=function(){return mr(this._rgb)},dr.temp=dr.kelvin=dr.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(pr,[null].concat(e,["temp"])))},vr.format.temp=vr.format.kelvin=vr.format.temperature=ur;var gr=d.unpack,yr=Math.cbrt,br=Math.pow,xr=Math.sign,wr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=gr(e,"rgb"),r=n[0],i=n[1],a=n[2],o=[Sr(r/255),Sr(i/255),Sr(a/255)],s=o[0],u=o[1],l=o[2],c=yr(.4122214708*s+.5363325363*u+.0514459929*l),h=yr(.2119034982*s+.6806995451*u+.1073969566*l),f=yr(.0883024619*s+.2817188376*u+.6299787005*l);return[.2104542553*c+.793617785*h-.0040720468*f,1.9779984951*c-2.428592205*h+.4505937099*f,.0259040371*c+.7827717662*h-.808675766*f]},_r=wr;function Sr(e){var t=Math.abs(e);return t<.04045?e/12.92:(xr(e)||1)*br((t+.055)/1.055,2.4)}var kr=d.unpack,Mr=Math.pow,Tr=Math.sign,Er=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=kr(e,"lab"))[0],r=e[1],i=e[2],a=Mr(n+.3963377774*r+.2158037573*i,3),o=Mr(n-.1055613458*r-.0638541728*i,3),s=Mr(n-.0894841775*r-1.291485548*i,3);return[255*Ar(4.0767416621*a-3.3077115913*o+.2309699292*s),255*Ar(-1.2684380046*a+2.6097574011*o-.3413193965*s),255*Ar(-.0041960863*a-.7034186147*o+1.707614701*s),e.length>3?e[3]:1]},Cr=Er;function Ar(e){var t=Math.abs(e);return t>.0031308?(Tr(e)||1)*(1.055*Mr(t,1/2.4)-.055):12.92*e}var Rr=d.unpack,Pr=d.type,Lr=_,Or=x,Nr=p,Dr=_r;Or.prototype.oklab=function(){return Dr(this._rgb)},Lr.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Or,[null].concat(e,["oklab"])))},Nr.format.oklab=Cr,Nr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Rr(e,"oklab"),"array"===Pr(e)&&3===e.length)return"oklab"}});var Ir=d.unpack,jr=_r,Fr=cn,zr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ir(e,"rgb"),r=n[0],i=n[1],a=n[2],o=jr(r,i,a),s=o[0],u=o[1],l=o[2];return Fr(s,u,l)},Br=zr,Ur=d.unpack,Vr=wn,Gr=Cr,Hr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Ur(e,"lch"))[0],r=e[1],i=e[2],a=Vr(n,r,i),o=a[0],s=a[1],u=a[2],l=Gr(o,s,u);return[l[0],l[1],l[2],e.length>3?e[3]:1]},Wr=Hr,Zr=d.unpack,$r=d.type,qr=_,Xr=x,Yr=p,Kr=Br;Xr.prototype.oklch=function(){return Kr(this._rgb)},qr.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Xr,[null].concat(e,["oklch"])))},Yr.format.oklch=Wr,Yr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Zr(e,"oklch"),"array"===$r(e)&&3===e.length)return"oklch"}});var Jr=x,Qr=d.type;Jr.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Qr(e)?t?(this._rgb[3]=e,this):new Jr([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};var ei=x,ti=Dt;ei.prototype.darken=function(e){void 0===e&&(e=1);var t=this,n=t.lab();return n[0]-=ti.Kn*e,new ei(n,"lab").alpha(t.alpha(),!0)},ei.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},ei.prototype.darker=ei.prototype.darken,ei.prototype.brighter=ei.prototype.brighten,x.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],i=this[n]();if(r){var a=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(a>-1)return i[a];throw new Error("unknown channel "+r+" in mode "+n)}return i};var ni=x,ri=d.type,ii=Math.pow,ai=1e-7,oi=20;ni.prototype.luminance=function(e){if(void 0!==e&&"number"===ri(e)){if(0===e)return new ni([0,0,0,this._rgb[3]],"rgb");if(1===e)return new ni([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n="rgb",r=oi,i=function t(i,a){var o=i.interpolate(a,.5,n),s=o.luminance();return Math.abs(e-s)<ai||!r--?o:s>e?t(i,o):t(o,a)},a=(t>e?i(new ni([0,0,0]),this):i(this,new ni([255,255,255]))).rgb();return new ni(a.concat([this._rgb[3]]))}return si.apply(void 0,this._rgb.slice(0,3))};var si=function(e,t,n){return.2126*(e=ui(e))+.7152*(t=ui(t))+.0722*(n=ui(n))},ui=function(e){return(e/=255)<=.03928?e/12.92:ii((e+.055)/1.055,2.4)},li={},ci=x,hi=d.type,fi=li,di=function(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var a=r[0]||"lrgb";if(fi[a]||r.length||(a=Object.keys(fi)[0]),!fi[a])throw new Error("interpolation mode "+a+" is not defined");return"object"!==hi(e)&&(e=new ci(e)),"object"!==hi(t)&&(t=new ci(t)),fi[a](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))},pi=x,vi=di;pi.prototype.mix=pi.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return vi.apply(void 0,[this,e,t].concat(n))};var mi=x;mi.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new mi([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};var gi=x,yi=Dt;gi.prototype.saturate=function(e){void 0===e&&(e=1);var t=this,n=t.lch();return n[1]+=yi.Kn*e,n[1]<0&&(n[1]=0),new gi(n,"lch").alpha(t.alpha(),!0)},gi.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var bi=x,xi=d.type;bi.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),i=r[0],a=r[1],o=this[i]();if(a){var s=i.indexOf(a)-("ok"===i.substr(0,2)?2:0);if(s>-1){if("string"==xi(t))switch(t.charAt(0)){case"+":case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else{if("number"!==xi(t))throw new Error("unsupported value for Color.set");o[s]=t}var u=new bi(o,i);return n?(this._rgb=u._rgb,this):u}throw new Error("unknown channel "+a+" in mode "+i)}return o};var wi=x,_i=function(e,t,n){var r=e._rgb,i=t._rgb;return new wi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};li.rgb=_i;var Si=x,ki=Math.sqrt,Mi=Math.pow,Ti=function(e,t,n){var r=e._rgb,i=r[0],a=r[1],o=r[2],s=t._rgb,u=s[0],l=s[1],c=s[2];return new Si(ki(Mi(i,2)*(1-n)+Mi(u,2)*n),ki(Mi(a,2)*(1-n)+Mi(l,2)*n),ki(Mi(o,2)*(1-n)+Mi(c,2)*n),"rgb")};li.lrgb=Ti;var Ei=x,Ci=function(e,t,n){var r=e.lab(),i=t.lab();return new Ei(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};li.lab=Ci;var Ai=x,Ri=function(e,t,n,r){var i,a,o,s,u,l,c,h,f,d,p,v,m;return"hsl"===r?(o=e.hsl(),s=t.hsl()):"hsv"===r?(o=e.hsv(),s=t.hsv()):"hcg"===r?(o=e.hcg(),s=t.hcg()):"hsi"===r?(o=e.hsi(),s=t.hsi()):"lch"===r||"hcl"===r?(r="hcl",o=e.hcl(),s=t.hcl()):"oklch"===r&&(o=e.oklch().reverse(),s=t.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(u=(i=o)[0],c=i[1],f=i[2],l=(a=s)[0],h=a[1],d=a[2]),isNaN(u)||isNaN(l)?isNaN(u)?isNaN(l)?v=Number.NaN:(v=l,1!=f&&0!=f||"hsv"==r||(p=h)):(v=u,1!=d&&0!=d||"hsv"==r||(p=c)):v=u+n*(l>u&&l-u>180?l-(u+360):l<u&&u-l>180?l+360-u:l-u),void 0===p&&(p=c+n*(h-c)),m=f+n*(d-f),new Ai("oklch"===r?[m,p,v]:[v,p,m],r)},Pi=Ri,Li=function(e,t,n){return Pi(e,t,n,"lch")};li.lch=Li,li.hcl=Li;var Oi=x,Ni=function(e,t,n){var r=e.num(),i=t.num();return new Oi(r+n*(i-r),"num")};li.num=Ni;var Di=Ri,Ii=function(e,t,n){return Di(e,t,n,"hcg")};li.hcg=Ii;var ji=Ri,Fi=function(e,t,n){return ji(e,t,n,"hsi")};li.hsi=Fi;var zi=Ri,Bi=function(e,t,n){return zi(e,t,n,"hsl")};li.hsl=Bi;var Ui=Ri,Vi=function(e,t,n){return Ui(e,t,n,"hsv")};li.hsv=Vi;var Gi=x,Hi=function(e,t,n){var r=e.oklab(),i=t.oklab();return new Gi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};li.oklab=Hi;var Wi=Ri,Zi=function(e,t,n){return Wi(e,t,n,"oklch")};li.oklch=Zi;var $i=x,qi=d.clip_rgb,Xi=Math.pow,Yi=Math.sqrt,Ki=Math.PI,Ji=Math.cos,Qi=Math.sin,ea=Math.atan2,ta=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=i})),e=e.map((function(e){return new $i(e)})),"lrgb"===t)return na(e,n);for(var a=e.shift(),o=a.get(t),s=[],u=0,l=0,c=0;c<o.length;c++)if(o[c]=(o[c]||0)*n[0],s.push(isNaN(o[c])?0:n[0]),"h"===t.charAt(c)&&!isNaN(o[c])){var h=o[c]/180*Ki;u+=Ji(h)*n[0],l+=Qi(h)*n[0]}var f=a.alpha()*n[0];e.forEach((function(e,r){var i=e.get(t);f+=e.alpha()*n[r+1];for(var a=0;a<o.length;a++)if(!isNaN(i[a]))if(s[a]+=n[r+1],"h"===t.charAt(a)){var c=i[a]/180*Ki;u+=Ji(c)*n[r+1],l+=Qi(c)*n[r+1]}else o[a]+=i[a]*n[r+1]}));for(var d=0;d<o.length;d++)if("h"===t.charAt(d)){for(var p=ea(l/s[d],u/s[d])/Ki*180;p<0;)p+=360;for(;p>=360;)p-=360;o[d]=p}else o[d]=o[d]/s[d];return f/=r,new $i(o,t).alpha(f>.99999?1:f,!0)},na=function(e,t){for(var n=e.length,r=[0,0,0,0],i=0;i<e.length;i++){var a=e[i],o=t[i]/n,s=a._rgb;r[0]+=Xi(s[0],2)*o,r[1]+=Xi(s[1],2)*o,r[2]+=Xi(s[2],2)*o,r[3]+=s[3]*o}return r[0]=Yi(r[0]),r[1]=Yi(r[1]),r[2]=Yi(r[2]),r[3]>.9999999&&(r[3]=1),new $i(qi(r))},ra=_,ia=d.type,aa=Math.pow,oa=function(e){var t="rgb",n=ra("#ccc"),r=0,i=[0,1],a=[],o=[0,0],s=!1,u=[],l=!1,c=0,h=1,f=!1,d={},p=!0,v=1,m=function(e){if((e=e||["#fff","#000"])&&"string"===ia(e)&&ra.brewer&&ra.brewer[e.toLowerCase()]&&(e=ra.brewer[e.toLowerCase()]),"array"===ia(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=ra(e[t]);a.length=0;for(var n=0;n<e.length;n++)a.push(n/(e.length-1))}return w(),u=e},g=function(e){if(null!=s){for(var t=s.length-1,n=0;n<t&&e>=s[n];)n++;return n-1}return 0},y=function(e){return e},b=function(e){return e},x=function(e,r){var i,l;if(null==r&&(r=!1),isNaN(e)||null===e)return n;l=r?e:s&&s.length>2?g(e)/(s.length-2):h!==c?(e-c)/(h-c):1,l=b(l),r||(l=y(l)),1!==v&&(l=aa(l,v)),l=o[0]+l*(1-o[0]-o[1]),l=Math.min(1,Math.max(0,l));var f=Math.floor(1e4*l);if(p&&d[f])i=d[f];else{if("array"===ia(u))for(var m=0;m<a.length;m++){var x=a[m];if(l<=x){i=u[m];break}if(l>=x&&m===a.length-1){i=u[m];break}if(l>x&&l<a[m+1]){l=(l-x)/(a[m+1]-x),i=ra.interpolate(u[m],u[m+1],l,t);break}}else"function"===ia(u)&&(i=u(l));p&&(d[f]=i)}return i},w=function(){return d={}};m(e);var _=function(e){var t=ra(x(e));return l&&t[l]?t[l]():t};return _.classes=function(e){if(null!=e){if("array"===ia(e))s=e,i=[e[0],e[e.length-1]];else{var t=ra.analyze(i);s=0===e?[t.min,t.max]:ra.limits(t,"e",e)}return _}return s},_.domain=function(e){if(!arguments.length)return i;c=e[0],h=e[e.length-1],a=[];var t=u.length;if(e.length===t&&c!==h)for(var n=0,r=Array.from(e);n<r.length;n+=1){var o=r[n];a.push((o-c)/(h-c))}else{for(var s=0;s<t;s++)a.push(s/(t-1));if(e.length>2){var l=e.map((function(t,n){return n/(e.length-1)})),f=e.map((function(e){return(e-c)/(h-c)}));f.every((function(e,t){return l[t]===e}))||(b=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=f[t+1];)t++;var n=(e-f[t])/(f[t+1]-f[t]);return l[t]+n*(l[t+1]-l[t])})}}return i=[c,h],_},_.mode=function(e){return arguments.length?(t=e,w(),_):t},_.range=function(e,t){return m(e),_},_.out=function(e){return l=e,_},_.spread=function(e){return arguments.length?(r=e,_):r},_.correctLightness=function(e){return null==e&&(e=!0),f=e,w(),y=f?function(e){for(var t=x(0,!0).lab()[0],n=x(1,!0).lab()[0],r=t>n,i=x(e,!0).lab()[0],a=t+(n-t)*e,o=i-a,s=0,u=1,l=20;Math.abs(o)>.01&&l-- >0;)r&&(o*=-1),o<0?(s=e,e+=.5*(u-e)):(u=e,e+=.5*(s-e)),i=x(e,!0).lab()[0],o=i-a;return e}:function(e){return e},_},_.padding=function(e){return null!=e?("number"===ia(e)&&(e=[e,e]),o=e,_):o},_.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=u.slice(0);else if(1===t)r=[_(.5)];else if(t>1){var a=i[0],o=i[1]-a;r=sa(0,t,!1).map((function(e){return _(a+e/(t-1)*o)}))}else{e=[];var l=[];if(s&&s.length>2)for(var c=1,h=s.length,f=1<=h;f?c<h:c>h;f?c++:c--)l.push(.5*(s[c-1]+s[c]));else l=i;r=l.map((function(e){return _(e)}))}return ra[n]&&(r=r.map((function(e){return e[n]()}))),r},_.cache=function(e){return null!=e?(p=e,_):p},_.gamma=function(e){return null!=e?(v=e,_):v},_.nodata=function(e){return null!=e?(n=ra(e),_):n},_};function sa(e,t,n){for(var r=[],i=e<t,a=n?i?t+1:t-1:t,o=e;i?o<a:o>a;i?o++:o--)r.push(o);return r}var ua=x,la=oa,ca=function(e){for(var t=[1,1],n=1;n<e;n++){for(var r=[1],i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},ha=function(e){var t,n,r,i,a,o,s;if(2===(e=e.map((function(e){return new ua(e)}))).length)t=e.map((function(e){return e.lab()})),a=t[0],o=t[1],i=function(e){var t=[0,1,2].map((function(t){return a[t]+e*(o[t]-a[t])}));return new ua(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),a=n[0],o=n[1],s=n[2],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*a[t]+2*(1-e)*e*o[t]+e*e*s[t]}));return new ua(t,"lab")};else if(4===e.length){var u;r=e.map((function(e){return e.lab()})),a=r[0],o=r[1],s=r[2],u=r[3],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*s[t]+e*e*e*u[t]}));return new ua(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");var l,c,h;l=e.map((function(e){return e.lab()})),h=e.length-1,c=ca(h),i=function(e){var t=1-e,n=[0,1,2].map((function(n){return l.reduce((function(r,i,a){return r+c[a]*Math.pow(t,h-a)*Math.pow(e,a)*i[n]}),0)}));return new ua(n,"lab")}}return i},fa=function(e){var t=ha(e);return t.scale=function(){return la(t)},t},da=_,pa=function e(t,n,r){if(!e[r])throw new Error("unknown blend mode "+r);return e[r](t,n)},va=function(e){return function(t,n){var r=da(n).rgb(),i=da(t).rgb();return da.rgb(e(r,i))}},ma=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}},ga=function(e){return e},ya=function(e,t){return e*t/255},ba=function(e,t){return e>t?t:e},xa=function(e,t){return e>t?e:t},wa=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},_a=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},Sa=function(e,t){return 255*(1-(1-t/255)/(e/255))},ka=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e};pa.normal=va(ma(ga)),pa.multiply=va(ma(ya)),pa.screen=va(ma(wa)),pa.overlay=va(ma(_a)),pa.darken=va(ma(ba)),pa.lighten=va(ma(xa)),pa.dodge=va(ma(ka)),pa.burn=va(ma(Sa));for(var Ma=pa,Ta=d.type,Ea=d.clip_rgb,Ca=d.TWOPI,Aa=Math.pow,Ra=Math.sin,Pa=Math.cos,La=_,Oa=function(e,t,n,r,i){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var a,o=0;"array"===Ta(i)?a=i[1]-i[0]:(a=0,i=[i,i]);var s=function(s){var u=Ca*((e+120)/360+t*s),l=Aa(i[0]+a*s,r),c=(0!==o?n[0]+s*o:n)*l*(1-l)/2,h=Pa(u),f=Ra(u);return La(Ea([255*(l+c*(-.14861*h+1.78277*f)),255*(l+c*(-.29227*h-.90649*f)),255*(l+c*(1.97294*h)),1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Ta(n=e)?0===(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===Ta(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return La.scale(s)},s.hue(n),s},Na=x,Da="0123456789abcdef",Ia=Math.floor,ja=Math.random,Fa=function(){for(var e="#",t=0;t<6;t++)e+=Da.charAt(Ia(16*ja()));return new Na(e,"hex")},za=s,Ba=Math.log,Ua=Math.pow,Va=Math.floor,Ga=Math.abs,Ha=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===za(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===za(e)&&(e=e[t]),void 0===e||null===e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return Wa(n,e,t)},n},Wa=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==za(e)&&(e=Ha(e));var r=e.min,i=e.max,a=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,i];var o=[];if("c"===t.substr(0,1)&&(o.push(r),o.push(i)),"e"===t.substr(0,1)){o.push(r);for(var s=1;s<n;s++)o.push(r+s/n*(i-r));o.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*Ba(r),l=Math.LOG10E*Ba(i);o.push(r);for(var c=1;c<n;c++)o.push(Ua(10,u+c/n*(l-u)));o.push(i)}else if("q"===t.substr(0,1)){o.push(r);for(var h=1;h<n;h++){var f=(a.length-1)*h/n,d=Va(f);if(d===f)o.push(a[d]);else{var p=f-d;o.push(a[d]*(1-p)+a[d+1]*p)}}o.push(i)}else if("k"===t.substr(0,1)){var v,m=a.length,g=new Array(m),y=new Array(n),b=!0,x=0,w=null;(w=[]).push(r);for(var _=1;_<n;_++)w.push(r+_/n*(i-r));for(w.push(i);b;){for(var S=0;S<n;S++)y[S]=0;for(var k=0;k<m;k++)for(var M=a[k],T=Number.MAX_VALUE,E=void 0,C=0;C<n;C++){var A=Ga(w[C]-M);A<T&&(T=A,E=C),y[E]++,g[k]=E}for(var R=new Array(n),P=0;P<n;P++)R[P]=null;for(var L=0;L<m;L++)null===R[v=g[L]]?R[v]=a[L]:R[v]+=a[L];for(var O=0;O<n;O++)R[O]*=1/y[O];b=!1;for(var N=0;N<n;N++)if(R[N]!==w[N]){b=!0;break}w=R,++x>200&&(b=!1)}for(var D={},I=0;I<n;I++)D[I]=[];for(var j=0;j<m;j++)D[v=g[j]].push(a[j]);for(var F=[],z=0;z<n;z++)F.push(D[z][0]),F.push(D[z][D[z].length-1]);F=F.sort((function(e,t){return e-t})),o.push(F[0]);for(var B=1;B<F.length;B+=2){var U=F[B];isNaN(U)||-1!==o.indexOf(U)||o.push(U)}}return o},Za={analyze:Ha,limits:Wa},$a=x,qa=function(e,t){e=new $a(e),t=new $a(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Xa=x,Ya=Math.sqrt,Ka=Math.pow,Ja=Math.min,Qa=Math.max,eo=Math.atan2,to=Math.abs,no=Math.cos,ro=Math.sin,io=Math.exp,ao=Math.PI,oo=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);var a=function(e){return 360*e/(2*ao)},o=function(e){return 2*ao*e/360};e=new Xa(e),t=new Xa(t);var s=Array.from(e.lab()),u=s[0],l=s[1],c=s[2],h=Array.from(t.lab()),f=h[0],d=h[1],p=h[2],v=(u+f)/2,m=(Ya(Ka(l,2)+Ka(c,2))+Ya(Ka(d,2)+Ka(p,2)))/2,g=.5*(1-Ya(Ka(m,7)/(Ka(m,7)+Ka(25,7)))),y=l*(1+g),b=d*(1+g),x=Ya(Ka(y,2)+Ka(c,2)),w=Ya(Ka(b,2)+Ka(p,2)),_=(x+w)/2,S=a(eo(c,y)),k=a(eo(p,b)),M=S>=0?S:S+360,T=k>=0?k:k+360,E=to(M-T)>180?(M+T+360)/2:(M+T)/2,C=1-.17*no(o(E-30))+.24*no(o(2*E))+.32*no(o(3*E+6))-.2*no(o(4*E-63)),A=T-M;A=to(A)<=180?A:T<=M?A+360:A-360,A=2*Ya(x*w)*ro(o(A)/2);var R=f-u,P=w-x,L=1+.015*Ka(v-50,2)/Ya(20+Ka(v-50,2)),O=1+.045*_,N=1+.015*_*C,D=30*io(-Ka((E-275)/25,2)),I=-2*Ya(Ka(_,7)/(Ka(_,7)+Ka(25,7)))*ro(2*o(D)),j=Ya(Ka(R/(n*L),2)+Ka(P/(r*O),2)+Ka(A/(i*N),2)+I*(P/(r*O))*(A/(i*N)));return Qa(0,Ja(100,j))},so=x,uo=function(e,t,n){void 0===n&&(n="lab"),e=new so(e),t=new so(t);var r=e.get(n),i=t.get(n),a=0;for(var o in r){var s=(r[o]||0)-(i[o]||0);a+=s*s}return Math.sqrt(a)},lo=x,co=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(lo,[null].concat(e))),!0}catch(n){return!1}},ho=_,fo=oa,po={cool:function(){return fo([ho.hsl(180,1,.9),ho.hsl(250,.7,.4)])},hot:function(){return fo(["#000","#f00","#ff0","#fff"]).mode("rgb")}},vo={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},mo=0,go=Object.keys(vo);mo<go.length;mo+=1){var yo=go[mo];vo[yo.toLowerCase()]=vo[yo]}var bo=vo,xo=_;return xo.average=ta,xo.bezier=fa,xo.blend=Ma,xo.cubehelix=Oa,xo.mix=xo.interpolate=di,xo.random=Fa,xo.scale=oa,xo.analyze=Za.analyze,xo.contrast=qa,xo.deltaE=oo,xo.distance=uo,xo.limits=Za.limits,xo.valid=co,xo.scales=po,xo.colors=jn,xo.brewer=bo,xo}()},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4062:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1120);var i=n(2963);function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002),i=n(7326);function a(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".9064070b.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="MotionComparator:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/MotionComparator/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkMotionComparator=self.webpackChunkMotionComparator||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return Ci},AddEquation:function(){return Kr},AddOperation:function(){return Si},AdditiveAnimationBlendMode:function(){return bo},AdditiveBlending:function(){return $r},AlphaFormat:function(){return ua},AlwaysDepth:function(){return pi},AlwaysStencilFunc:function(){return Xo},AmbientLight:function(){return Dm},AmbientLightProbe:function(){return Jm},AnimationClip:function(){return om},AnimationLoader:function(){return pm},AnimationMixer:function(){return Lg},AnimationObjectGroup:function(){return Rg},AnimationUtils:function(){return $v},ArcCurve:function(){return Tp},ArrayCamera:function(){return Xf},ArrowHelper:function(){return wy},Audio:function(){return cg},AudioAnalyser:function(){return mg},AudioContext:function(){return Xm},AudioListener:function(){return lg},AudioLoader:function(){return Ym},AxesHelper:function(){return _y},AxisHelper:function(){return Ky},BackSide:function(){return Ur},BasicDepthPacking:function(){return Ro},BasicShadowMap:function(){return Ir},BinaryTextureLoader:function(){return nb},Bone:function(){return Id},BooleanKeyframeTrack:function(){return Qv},BoundingBoxHelper:function(){return Jy},Box2:function(){return Vg},Box3:function(){return Us},Box3Helper:function(){return yy},BoxBufferGeometry:function(){return ql},BoxGeometry:function(){return ql},BoxHelper:function(){return gy},BufferAttribute:function(){return cl},BufferGeometry:function(){return Cl},BufferGeometryLoader:function(){return Gm},ByteType:function(){return Ki},Cache:function(){return um},Camera:function(){return Ql},CameraHelper:function(){return fy},CanvasRenderer:function(){return ib},CanvasTexture:function(){return dp},CatmullRomCurve3:function(){return Lp},CineonToneMapping:function(){return Ei},CircleBufferGeometry:function(){return pp},CircleGeometry:function(){return pp},ClampToEdgeWrapping:function(){return Fi},Clock:function(){return rg},Color:function(){return ol},ColorKeyframeTrack:function(){return em},CompressedTexture:function(){return fp},CompressedTextureLoader:function(){return vm},ConeBufferGeometry:function(){return mp},ConeGeometry:function(){return mp},CubeCamera:function(){return nc},CubeReflectionMapping:function(){return Pi},CubeRefractionMapping:function(){return Li},CubeTexture:function(){return rc},CubeTextureLoader:function(){return gm},CubeUVReflectionMapping:function(){return Di},CubeUVRefractionMapping:function(){return Ii},CubicBezierCurve:function(){return Ip},CubicBezierCurve3:function(){return jp},CubicInterpolant:function(){return Xv},CullFaceBack:function(){return Or},CullFaceFront:function(){return Nr},CullFaceFrontBack:function(){return Dr},CullFaceNone:function(){return Lr},Curve:function(){return kp},CurvePath:function(){return Hp},CustomBlending:function(){return Yr},CustomToneMapping:function(){return Ai},CylinderBufferGeometry:function(){return vp},CylinderGeometry:function(){return vp},Cylindrical:function(){return Bg},DataTexture:function(){return jd},DataTexture2DArray:function(){return Qc},DataTexture3D:function(){return ah},DataTextureLoader:function(){return ym},DataUtils:function(){return Ty},DecrementStencilOp:function(){return Fo},DecrementWrapStencilOp:function(){return Bo},DefaultLoadingManager:function(){return cm},DepthFormat:function(){return pa},DepthStencilFormat:function(){return va},DepthTexture:function(){return Qf},DirectionalLight:function(){return Nm},DirectionalLightHelper:function(){return ly},DiscreteInterpolant:function(){return Kv},DodecahedronBufferGeometry:function(){return yp},DodecahedronGeometry:function(){return yp},DoubleSide:function(){return Vr},DstAlphaFactor:function(){return ui},DstColorFactor:function(){return ci},DynamicBufferAttribute:function(){return Uy},DynamicCopyUsage:function(){return rs},DynamicDrawUsage:function(){return Ko},DynamicReadUsage:function(){return es},EdgesGeometry:function(){return Sp},EdgesHelper:function(){return Qy},EllipseCurve:function(){return Mp},EqualDepth:function(){return gi},EqualStencilFunc:function(){return Ho},EquirectangularReflectionMapping:function(){return Oi},EquirectangularRefractionMapping:function(){return Ni},Euler:function(){return Mu},EventDispatcher:function(){return ss},ExtrudeBufferGeometry:function(){return _v},ExtrudeGeometry:function(){return _v},FaceColors:function(){return Ry},FileLoader:function(){return dm},FlatShading:function(){return Gr},Float16BufferAttribute:function(){return yl},Float32Attribute:function(){return Xy},Float32BufferAttribute:function(){return bl},Float64Attribute:function(){return Yy},Float64BufferAttribute:function(){return xl},FloatType:function(){return na},Fog:function(){return od},FogExp2:function(){return ad},Font:function(){return hb},FontLoader:function(){return cb},FrontSide:function(){return Br},Frustum:function(){return hc},GLBufferAttribute:function(){return Dg},GLSL1:function(){return as},GLSL3:function(){return os},GammaEncoding:function(){return Mo},GreaterDepth:function(){return bi},GreaterEqualDepth:function(){return yi},GreaterEqualStencilFunc:function(){return qo},GreaterStencilFunc:function(){return Zo},GridHelper:function(){return iy},Group:function(){return Yf},HalfFloatType:function(){return ra},HemisphereLight:function(){return wm},HemisphereLightHelper:function(){return ry},HemisphereLightProbe:function(){return Km},IcosahedronBufferGeometry:function(){return kv},IcosahedronGeometry:function(){return kv},ImageBitmapLoader:function(){return qm},ImageLoader:function(){return mm},ImageUtils:function(){return As},ImmediateRenderObject:function(){return fb},IncrementStencilOp:function(){return jo},IncrementWrapStencilOp:function(){return zo},InstancedBufferAttribute:function(){return Ud},InstancedBufferGeometry:function(){return Um},InstancedInterleavedBuffer:function(){return Ng},InstancedMesh:function(){return Zd},Int16Attribute:function(){return Wy},Int16BufferAttribute:function(){return pl},Int32Attribute:function(){return $y},Int32BufferAttribute:function(){return ml},Int8Attribute:function(){return Vy},Int8BufferAttribute:function(){return hl},IntType:function(){return ea},InterleavedBuffer:function(){return ud},InterleavedBufferAttribute:function(){return cd},Interpolant:function(){return qv},InterpolateDiscrete:function(){return ho},InterpolateLinear:function(){return fo},InterpolateSmooth:function(){return po},InvertStencilOp:function(){return Uo},JSONLoader:function(){return ab},KeepStencilOp:function(){return Do},KeyframeTrack:function(){return Jv},LOD:function(){return Ad},LatheBufferGeometry:function(){return Mv},LatheGeometry:function(){return Mv},Layers:function(){return Tu},LensFlare:function(){return sb},LessDepth:function(){return vi},LessEqualDepth:function(){return mi},LessEqualStencilFunc:function(){return Wo},LessStencilFunc:function(){return Go},Light:function(){return xm},LightProbe:function(){return Fm},Line:function(){return Qd},Line3:function(){return Wg},LineBasicMaterial:function(){return $d},LineCurve:function(){return Fp},LineCurve3:function(){return zp},LineDashedMaterial:function(){return Wv},LineLoop:function(){return rp},LinePieces:function(){return Cy},LineSegments:function(){return np},LineStrip:function(){return Ey},LinearEncoding:function(){return So},LinearFilter:function(){return Wi},LinearInterpolant:function(){return Yv},LinearMipMapLinearFilter:function(){return Xi},LinearMipMapNearestFilter:function(){return $i},LinearMipmapLinearFilter:function(){return qi},LinearMipmapNearestFilter:function(){return Zi},LinearToneMapping:function(){return Mi},Loader:function(){return hm},LoaderUtils:function(){return Bm},LoadingManager:function(){return lm},LoopOnce:function(){return uo},LoopPingPong:function(){return co},LoopRepeat:function(){return lo},LuminanceAlphaFormat:function(){return fa},LuminanceFormat:function(){return ha},MOUSE:function(){return Rr},Material:function(){return Qu},MaterialLoader:function(){return zm},Math:function(){return xs},MathUtils:function(){return xs},Matrix3:function(){return _s},Matrix4:function(){return vu},MaxEquation:function(){return ti},Mesh:function(){return Zl},MeshBasicMaterial:function(){return sl},MeshDepthMaterial:function(){return Gf},MeshDistanceMaterial:function(){return Hf},MeshFaceMaterial:function(){return Ly},MeshLambertMaterial:function(){return Gv},MeshMatcapMaterial:function(){return Hv},MeshNormalMaterial:function(){return Vv},MeshPhongMaterial:function(){return Bv},MeshPhysicalMaterial:function(){return zv},MeshStandardMaterial:function(){return Fv},MeshToonMaterial:function(){return Uv},MinEquation:function(){return ei},MirroredRepeatWrapping:function(){return zi},MixOperation:function(){return _i},MultiMaterial:function(){return Oy},MultiplyBlending:function(){return Xr},MultiplyOperation:function(){return wi},NearestFilter:function(){return Bi},NearestMipMapLinearFilter:function(){return Hi},NearestMipMapNearestFilter:function(){return Vi},NearestMipmapLinearFilter:function(){return Gi},NearestMipmapNearestFilter:function(){return Ui},NeverDepth:function(){return di},NeverStencilFunc:function(){return Vo},NoBlending:function(){return Wr},NoColors:function(){return Ay},NoToneMapping:function(){return ki},NormalAnimationBlendMode:function(){return yo},NormalBlending:function(){return Zr},NotEqualDepth:function(){return xi},NotEqualStencilFunc:function(){return $o},NumberKeyframeTrack:function(){return tm},Object3D:function(){return Bu},ObjectLoader:function(){return Hm},ObjectSpaceNormalMap:function(){return Oo},OctahedronBufferGeometry:function(){return Tv},OctahedronGeometry:function(){return Tv},OneFactor:function(){return ri},OneMinusDstAlphaFactor:function(){return li},OneMinusDstColorFactor:function(){return hi},OneMinusSrcAlphaFactor:function(){return si},OneMinusSrcColorFactor:function(){return ai},OrthographicCamera:function(){return kc},PCFShadowMap:function(){return jr},PCFSoftShadowMap:function(){return Fr},PMREMGenerator:function(){return Uc},ParametricGeometry:function(){return ub},Particle:function(){return Dy},ParticleBasicMaterial:function(){return Fy},ParticleSystem:function(){return Iy},ParticleSystemMaterial:function(){return zy},Path:function(){return Wp},PerspectiveCamera:function(){return ec},Plane:function(){return uc},PlaneBufferGeometry:function(){return pc},PlaneGeometry:function(){return pc},PlaneHelper:function(){return by},PointCloud:function(){return Ny},PointCloudMaterial:function(){return jy},PointLight:function(){return Lm},PointLightHelper:function(){return Qg},Points:function(){return lp},PointsMaterial:function(){return ip},PolarGridHelper:function(){return ay},PolyhedronBufferGeometry:function(){return gp},PolyhedronGeometry:function(){return gp},PositionalAudio:function(){return vg},PropertyBinding:function(){return Ag},PropertyMixer:function(){return gg},QuadraticBezierCurve:function(){return Bp},QuadraticBezierCurve3:function(){return Up},Quaternion:function(){return js},QuaternionKeyframeTrack:function(){return rm},QuaternionLinearInterpolant:function(){return nm},REVISION:function(){return Ar},RGBADepthPacking:function(){return Po},RGBAFormat:function(){return ca},RGBAIntegerFormat:function(){return wa},RGBA_ASTC_10x10_Format:function(){return Ha},RGBA_ASTC_10x5_Format:function(){return Ua},RGBA_ASTC_10x6_Format:function(){return Va},RGBA_ASTC_10x8_Format:function(){return Ga},RGBA_ASTC_12x10_Format:function(){return Wa},RGBA_ASTC_12x12_Format:function(){return Za},RGBA_ASTC_4x4_Format:function(){return Oa},RGBA_ASTC_5x4_Format:function(){return Na},RGBA_ASTC_5x5_Format:function(){return Da},RGBA_ASTC_6x5_Format:function(){return Ia},RGBA_ASTC_6x6_Format:function(){return ja},RGBA_ASTC_8x5_Format:function(){return Fa},RGBA_ASTC_8x6_Format:function(){return za},RGBA_ASTC_8x8_Format:function(){return Ba},RGBA_BPTC_Format:function(){return $a},RGBA_ETC2_EAC_Format:function(){return La},RGBA_PVRTC_2BPPV1_Format:function(){return Aa},RGBA_PVRTC_4BPPV1_Format:function(){return Ca},RGBA_S3TC_DXT1_Format:function(){return Sa},RGBA_S3TC_DXT3_Format:function(){return ka},RGBA_S3TC_DXT5_Format:function(){return Ma},RGBDEncoding:function(){return Ao},RGBEEncoding:function(){return To},RGBEFormat:function(){return da},RGBFormat:function(){return la},RGBIntegerFormat:function(){return xa},RGBM16Encoding:function(){return Co},RGBM7Encoding:function(){return Eo},RGB_ETC1_Format:function(){return Ra},RGB_ETC2_Format:function(){return Pa},RGB_PVRTC_2BPPV1_Format:function(){return Ea},RGB_PVRTC_4BPPV1_Format:function(){return Ta},RGB_S3TC_DXT1_Format:function(){return _a},RGFormat:function(){return ya},RGIntegerFormat:function(){return ba},RawShaderMaterial:function(){return Mc},Ray:function(){return pu},Raycaster:function(){return Ig},RectAreaLight:function(){return Im},RedFormat:function(){return ma},RedIntegerFormat:function(){return ga},ReinhardToneMapping:function(){return Ti},RepeatWrapping:function(){return ji},ReplaceStencilOp:function(){return Io},ReverseSubtractEquation:function(){return Qr},RingBufferGeometry:function(){return Ev},RingGeometry:function(){return Ev},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return ao},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return no},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return ro},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return io},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return oo},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return so},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return qa},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return Xa},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return Ya},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return Ka},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return Ja},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return Qa},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return eo},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return to},Scene:function(){return sd},SceneUtils:function(){return ob},ShaderChunk:function(){return vc},ShaderLib:function(){return gc},ShaderMaterial:function(){return Jl},ShadowMaterial:function(){return jv},Shape:function(){return Zp},ShapeBufferGeometry:function(){return Cv},ShapeGeometry:function(){return Cv},ShapePath:function(){return Sy},ShapeUtils:function(){return bv},ShortType:function(){return Ji},Skeleton:function(){return Bd},SkeletonHelper:function(){return Kg},SkinnedMesh:function(){return Dd},SmoothShading:function(){return Hr},Sphere:function(){return ou},SphereBufferGeometry:function(){return Av},SphereGeometry:function(){return Av},Spherical:function(){return zg},SphericalHarmonics3:function(){return jm},SplineCurve:function(){return Vp},SpotLight:function(){return Em},SpotLightHelper:function(){return $g},Sprite:function(){return Md},SpriteMaterial:function(){return fd},SrcAlphaFactor:function(){return oi},SrcAlphaSaturateFactor:function(){return fi},SrcColorFactor:function(){return ii},StaticCopyUsage:function(){return ns},StaticDrawUsage:function(){return Yo},StaticReadUsage:function(){return Qo},StereoCamera:function(){return ng},StreamCopyUsage:function(){return is},StreamDrawUsage:function(){return Jo},StreamReadUsage:function(){return ts},StringKeyframeTrack:function(){return im},SubtractEquation:function(){return Jr},SubtractiveBlending:function(){return qr},TOUCH:function(){return Pr},TangentSpaceNormalMap:function(){return Lo},TetrahedronBufferGeometry:function(){return Rv},TetrahedronGeometry:function(){return Rv},TextGeometry:function(){return lb},Texture:function(){return Ps},TextureLoader:function(){return bm},TorusBufferGeometry:function(){return Pv},TorusGeometry:function(){return Pv},TorusKnotBufferGeometry:function(){return Lv},TorusKnotGeometry:function(){return Lv},Triangle:function(){return Ku},TriangleFanDrawMode:function(){return _o},TriangleStripDrawMode:function(){return wo},TrianglesDrawMode:function(){return xo},TubeBufferGeometry:function(){return Ov},TubeGeometry:function(){return Ov},UVMapping:function(){return Ri},Uint16Attribute:function(){return Zy},Uint16BufferAttribute:function(){return vl},Uint32Attribute:function(){return qy},Uint32BufferAttribute:function(){return gl},Uint8Attribute:function(){return Gy},Uint8BufferAttribute:function(){return fl},Uint8ClampedAttribute:function(){return Hy},Uint8ClampedBufferAttribute:function(){return dl},Uniform:function(){return Og},UniformsLib:function(){return mc},UniformsUtils:function(){return Kl},UnsignedByteType:function(){return Yi},UnsignedInt248Type:function(){return sa},UnsignedIntType:function(){return ta},UnsignedShort4444Type:function(){return ia},UnsignedShort5551Type:function(){return aa},UnsignedShort565Type:function(){return oa},UnsignedShortType:function(){return Qi},VSMShadowMap:function(){return zr},Vector2:function(){return ws},Vector3:function(){return Fs},Vector4:function(){return Os},VectorKeyframeTrack:function(){return am},Vertex:function(){return By},VertexColors:function(){return Py},VideoTexture:function(){return hp},WebGL1Renderer:function(){return id},WebGLCubeRenderTarget:function(){return ic},WebGLMultipleRenderTargets:function(){return Ds},WebGLMultisampleRenderTarget:function(){return Is},WebGLRenderTarget:function(){return Ns},WebGLRenderTargetCube:function(){return rb},WebGLRenderer:function(){return rd},WebGLUtils:function(){return qf},WireframeGeometry:function(){return Nv},WireframeHelper:function(){return eb},WrapAroundEnding:function(){return go},XHRLoader:function(){return tb},ZeroCurvatureEnding:function(){return vo},ZeroFactor:function(){return ni},ZeroSlopeEnding:function(){return mo},ZeroStencilOp:function(){return No},sRGBEncoding:function(){return ko}});var t=n(2791),r=n.t(t,2),i=n(1250);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}var u=n(5671),l=n(3144),c=n(7326),h=n(136),f=n(4062),d=n(4505),p=n.n(d);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(){},M={},T={},E=null,C={mark:k,measure:k};try{"undefined"!==typeof window&&(M=window),"undefined"!==typeof document&&(T=document),"undefined"!==typeof MutationObserver&&(E=MutationObserver),"undefined"!==typeof performance&&(C=performance)}catch(jq){}var A,R,P,L,O,N=(M.navigator||{}).userAgent,D=void 0===N?"":N,I=M,j=T,F=E,z=C,B=(I.document,!!j.documentElement&&!!j.head&&"function"===typeof j.addEventListener&&"function"===typeof j.createElement),U=~D.indexOf("MSIE")||~D.indexOf("Trident/"),V="svg-inline--fa",G="data-fa-i2svg",H="data-fa-pseudo-element",W="data-prefix",Z="data-icon",$="fontawesome-i2svg",q=["HTML","HEAD","STYLE","SCRIPT"],X=function(){try{return!0}catch(jq){return!1}}(),Y="classic",K="sharp",J=[Y,K];function Q(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e.classic}})}var ee=Q((b(A={},Y,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),b(A,K,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),A)),te=Q((b(R={},Y,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),b(R,K,{solid:"fass",regular:"fasr",light:"fasl"}),R)),ne=Q((b(P={},Y,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),b(P,K,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),P)),re=Q((b(L={},Y,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),b(L,K,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),L)),ie=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,ae="fa-layers-text",oe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,se=Q((b(O={},Y,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),b(O,K,{900:"fass",400:"fasr",300:"fasl"}),O)),ue=[1,2,3,4,5,6,7,8,9,10],le=ue.concat([11,12,13,14,15,16,17,18,19,20]),ce=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],he="duotone-group",fe="swap-opacity",de="primary",pe="secondary",ve=new Set;Object.keys(te.classic).map(ve.add.bind(ve)),Object.keys(te.sharp).map(ve.add.bind(ve));var me=[].concat(J,w(ve),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",he,fe,de,pe]).concat(ue.map((function(e){return"".concat(e,"x")}))).concat(le.map((function(e){return"w-".concat(e)}))),ge=I.FontAwesomeConfig||{};if(j&&"function"===typeof j.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=x(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=j.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(ge[r]=i)}))}var ye={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:V,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ge.familyPrefix&&(ge.cssPrefix=ge.familyPrefix);var be=m(m({},ye),ge);be.autoReplaceSvg||(be.observeMutations=!1);var xe={};Object.keys(ye).forEach((function(e){Object.defineProperty(xe,e,{enumerable:!0,set:function(t){be[e]=t,we.forEach((function(e){return e(xe)}))},get:function(){return be[e]}})})),Object.defineProperty(xe,"familyPrefix",{enumerable:!0,set:function(e){be.cssPrefix=e,we.forEach((function(e){return e(xe)}))},get:function(){return be.cssPrefix}}),I.FontAwesomeConfig=xe;var we=[];var _e=16,Se={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function ke(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Me(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Te(e){return e.classList?Me(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function Ee(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ce(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function Ae(e){return e.size!==Se.size||e.x!==Se.x||e.y!==Se.y||e.rotate!==Se.rotate||e.flipX||e.flipY}function Re(){var e="fa",t=V,n=xe.cssPrefix,r=xe.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var Pe=!1;function Le(){xe.autoAddCss&&!Pe&&(!function(e){if(e&&B){var t=j.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=j.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}j.head.insertBefore(t,r)}}(Re()),Pe=!0)}var Oe={mixout:function(){return{dom:{css:Re,insertCss:Le}}},hooks:function(){return{beforeDOMElementCreation:function(){Le()},beforeI2svg:function(){Le()}}}},Ne=I||{};Ne.___FONT_AWESOME___||(Ne.___FONT_AWESOME___={}),Ne.___FONT_AWESOME___.styles||(Ne.___FONT_AWESOME___.styles={}),Ne.___FONT_AWESOME___.hooks||(Ne.___FONT_AWESOME___.hooks={}),Ne.___FONT_AWESOME___.shims||(Ne.___FONT_AWESOME___.shims=[]);var De=Ne.___FONT_AWESOME___,Ie=[],je=!1;function Fe(e){B&&(je?setTimeout(e,0):Ie.push(e))}function ze(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?Ee(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Ee(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(ze).join(""),"</").concat(t,">")}function Be(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}B&&((je=(j.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(j.readyState))||j.addEventListener("DOMContentLoaded",(function e(){j.removeEventListener("DOMContentLoaded",e),je=1,Ie.map((function(e){return e()}))})));var Ue=function(e,t,n,r){var i,a,o,s=Object.keys(e),u=s.length,l=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<u;i++)o=l(o,e[a=s[i]],a,e);return o};function Ve(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function Ge(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=Ge(t);"function"!==typeof De.hooks.addPack||i?De.styles[e]=m(m({},De.styles[e]||{}),a):De.hooks.addPack(e,Ge(t)),"fas"===e&&He("fa",t)}var We,Ze,$e,qe=De.styles,Xe=De.shims,Ye=(b(We={},Y,Object.values(ne.classic)),b(We,K,Object.values(ne.sharp)),We),Ke=null,Je={},Qe={},et={},tt={},nt={},rt=(b(Ze={},Y,Object.keys(ee.classic)),b(Ze,K,Object.keys(ee.sharp)),Ze);function it(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~me.indexOf(n))?null:a}var at,ot=function(){var e=function(e){return Ue(qe,(function(t,n,r){return t[r]=Ue(n,e,{}),t}),{})};Je=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),Qe=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),nt=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in qe||xe.autoFetchSvg,n=Ue(Xe,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});et=n.names,tt=n.unicodes,Ke=ht(xe.styleDefault,{family:xe.familyDefault})};function st(e,t){return(Je[e]||{})[t]}function ut(e,t){return(nt[e]||{})[t]}function lt(e){return et[e]||{prefix:null,iconName:null}}function ct(){return Ke}at=function(e){Ke=ht(e.styleDefault,{family:xe.familyDefault})},we.push(at),ot();function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.family,r=void 0===n?Y:n,i=ee[r][e],a=te[r][e]||te[r][i],o=e in De.styles?e:null;return a||o||null}var ft=(b($e={},Y,Object.keys(ne.classic)),b($e,K,Object.keys(ne.sharp)),$e);function dt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.skipLookups,i=void 0!==r&&r,a=(b(t={},Y,"".concat(xe.cssPrefix,"-").concat(Y)),b(t,K,"".concat(xe.cssPrefix,"-").concat(K)),t),o=null,s=Y;(e.includes(a.classic)||e.some((function(e){return ft.classic.includes(e)})))&&(s=Y),(e.includes(a.sharp)||e.some((function(e){return ft.sharp.includes(e)})))&&(s=K);var u=e.reduce((function(e,t){var n=it(xe.cssPrefix,t);if(qe[t]?(t=Ye[s].includes(t)?re[s][t]:t,o=t,e.prefix=t):rt[s].indexOf(t)>-1?(o=t,e.prefix=ht(t,{family:s})):n?e.iconName=n:t!==xe.replacementClass&&t!==a.classic&&t!==a.sharp&&e.rest.push(t),!i&&e.prefix&&e.iconName){var r="fa"===o?lt(e.iconName):{},u=ut(e.prefix,e.iconName);r.prefix&&(o=null),e.iconName=r.iconName||u||e.iconName,e.prefix=r.prefix||e.prefix,"far"!==e.prefix||qe.far||!qe.fas||xe.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return(e.includes("fa-brands")||e.includes("fab"))&&(u.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(u.prefix="fad"),u.prefix||s!==K||!qe.fass&&!xe.autoFetchSvg||(u.prefix="fass",u.iconName=ut(u.prefix,u.iconName)||u.iconName),"fa"!==u.prefix&&"fa"!==o||(u.prefix=ct()||"fas"),u}var pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=m(m({},e.definitions[t]||{}),i[t]),He(t,i[t]);var n=ne.classic[t];n&&He(n,i[t]),ot()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vt=[],mt={},gt={},yt=Object.keys(gt);function bt(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=mt[e]||[];return a.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=mt[e]||[];i.forEach((function(e){e.apply(null,n)}))}function wt(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return gt[e]?gt[e].apply(null,t):void 0}function _t(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||ct();if(t)return t=ut(n,t)||t,Be(St.definitions,n,t)||Be(De.styles,n,t)}var St=new pt,kt={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return B?(xt("beforeI2svg",e),wt("pseudoElements2svg",e),wt("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===xe.autoReplaceSvg&&(xe.autoReplaceSvg=!0),xe.observeMutations=!0,Fe((function(){Tt({autoReplaceSvgRoot:t}),xt("watch",e)}))}},Mt={noAuto:function(){xe.autoReplaceSvg=!1,xe.observeMutations=!1,xt("noAuto")},config:xe,dom:kt,parse:{icon:function(e){if(null===e)return null;if("object"===g(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:ut(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=ht(e[0]);return{prefix:n,iconName:ut(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(xe.cssPrefix,"-"))>-1||e.match(ie))){var r=dt(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||ct(),iconName:ut(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=ct();return{prefix:i,iconName:ut(i,e)||e}}}},library:St,findIconDefinition:_t,toHtml:ze},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?j:t;(Object.keys(De.styles).length>0||xe.autoFetchSvg)&&B&&xe.autoReplaceSvg&&Mt.dom.i2svg({node:n})};function Et(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ze(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(B){var t=j.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Ct(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,u=e.title,l=e.maskId,c=e.titleId,h=e.extra,f=e.watchable,d=void 0!==f&&f,p=r.found?r:n,v=p.width,g=p.height,y="fak"===i,b=[xe.replacementClass,a?"".concat(xe.cssPrefix,"-").concat(a):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),x={children:[],attributes:m(m({},h.attributes),{},{"data-prefix":i,"data-icon":a,class:b,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(g)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(v/g*16*.0625,"em")}:{};d&&(x.attributes[G]=""),u&&(x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||ke())},children:[u]}),delete x.attributes.title);var _=m(m({},x),{},{prefix:i,iconName:a,main:n,mask:r,maskId:l,transform:o,symbol:s,styles:m(m({},w),h.styles)}),S=r.found&&n.found?wt("generateAbstractMask",_)||{children:[],attributes:{}}:wt("generateAbstractIcon",_)||{children:[],attributes:{}},k=S.children,M=S.attributes;return _.children=k,_.attributes=M,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(xe.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:m(m({},i),{},{id:o}),children:r}]}]}(_):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(Ae(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=Ce(m(m({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(_)}function At(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,u=void 0!==s&&s,l=m(m(m({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});u&&(l[G]="");var c=m({},o.styles);Ae(i)&&(c.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,a=void 0===i?16:i,o=e.startCentered,s=void 0!==o&&o,u="";return u+=s&&U?"translate(".concat(t.x/_e-r/2,"em, ").concat(t.y/_e-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/_e,"em), calc(-50% + ").concat(t.y/_e,"em)) "):"translate(".concat(t.x/_e,"em, ").concat(t.y/_e,"em) "),u+="scale(".concat(t.size/_e*(t.flipX?-1:1),", ").concat(t.size/_e*(t.flipY?-1:1),") "),u+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var h=Ce(c);h.length>0&&(l.style=h);var f=[];return f.push({tag:"span",attributes:l,children:[t]}),a&&f.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),f}function Rt(e){var t=e.content,n=e.title,r=e.extra,i=m(m(m({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=Ce(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var Pt=De.styles;function Lt(e){var t=e[0],n=e[1],r=x(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(xe.cssPrefix,"-").concat(he)},children:[{tag:"path",attributes:{class:"".concat(xe.cssPrefix,"-").concat(pe),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(xe.cssPrefix,"-").concat(de),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Ot={found:!1,width:512,height:512};function Nt(e,t){var n=t;return"fa"===t&&null!==xe.styleDefault&&(t=ct()),new Promise((function(r,i){wt("missingIconAbstract");if("fa"===n){var a=lt(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&Pt[t]&&Pt[t][e])return r(Lt(Pt[t][e]));!function(e,t){X||xe.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(m(m({},Ot),{},{icon:xe.showMissingIcons&&e&&wt("missingIconAbstract")||{}}))}))}var Dt=function(){},It=xe.measurePerformance&&z&&z.mark&&z.measure?z:{mark:Dt,measure:Dt},jt='FA "6.4.0"',Ft=function(e){It.mark("".concat(jt," ").concat(e," ends")),It.measure("".concat(jt," ").concat(e),"".concat(jt," ").concat(e," begins"),"".concat(jt," ").concat(e," ends"))},zt=function(e){return It.mark("".concat(jt," ").concat(e," begins")),function(){return Ft(e)}},Bt=function(){};function Ut(e){return"string"===typeof(e.getAttribute?e.getAttribute(G):null)}function Vt(e){return j.createElementNS("http://www.w3.org/2000/svg",e)}function Gt(e){return j.createElement(e)}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?Vt:Gt:n;if("string"===typeof e)return j.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var a=e.children||[];return a.forEach((function(e){i.appendChild(Ht(e,{ceFn:r}))})),i}var Wt={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Ht(e),t)})),null===t.getAttribute(G)&&xe.keepOriginalSource){var n=j.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~Te(t).indexOf(xe.replacementClass))return Wt.replace(e);var r=new RegExp("".concat(xe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===xe.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return ze(e)})).join("\n");t.setAttribute(G,""),t.innerHTML=a}};function Zt(e){e()}function $t(e,t){var n="function"===typeof t?t:Bt;if(0===e.length)n();else{var r=Zt;"async"===xe.mutateApproach&&(r=I.requestAnimationFrame||Zt),r((function(){var t=!0===xe.autoReplaceSvg?Wt.replace:Wt[xe.autoReplaceSvg]||Wt.replace,r=zt("mutate");e.map(t),r(),n()}))}}var qt=!1;function Xt(){qt=!0}function Yt(){qt=!1}var Kt=null;function Jt(e){if(F&&xe.observeMutations){var t=e.treeCallback,n=void 0===t?Bt:t,r=e.nodeCallback,i=void 0===r?Bt:r,a=e.pseudoElementsCallback,o=void 0===a?Bt:a,s=e.observeMutationsRoot,u=void 0===s?j:s;Kt=new F((function(e){if(!qt){var t=ct();Me(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!Ut(e.addedNodes[0])&&(xe.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&xe.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&Ut(e.target)&&~ce.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(W):null,n=e.getAttribute?e.getAttribute(Z):null;return t&&n}(e.target)){var r=dt(Te(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(W,a||t),s&&e.target.setAttribute(Z,s)}else(function(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(xe.replacementClass)})(e.target)&&i(e.target)}))}})),B&&Kt.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Qt(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function en(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=dt(Te(e));return i.prefix||(i.prefix=ct()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Qe[e]||{})[t]}(i.prefix,e.innerText)||st(i.prefix,Ve(e.innerText))),!i.iconName&&xe.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function tn(e){var t=Me(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return xe.autoA11y&&(n?t["aria-labelledby"]="".concat(xe.replacementClass,"-title-").concat(r||ke()):(t["aria-hidden"]="true",t.focusable="false")),t}function nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=en(e),r=n.iconName,i=n.prefix,a=n.rest,o=tn(e),s=bt("parseNodeAttributes",{},e),u=t.styleParser?Qt(e):[];return m({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Se,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:o}},s)}var rn=De.styles;function an(e){var t="nest"===xe.autoReplaceSvg?nn(e,{styleParser:!1}):nn(e);return~t.extra.classes.indexOf(ae)?wt("generateLayersText",e,t):wt("generateSvgReplacementMutation",e,t)}var on=new Set;function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!B)return Promise.resolve();var n=j.documentElement.classList,r=function(e){return n.add("".concat($,"-").concat(e))},i=function(e){return n.remove("".concat($,"-").concat(e))},a=xe.autoFetchSvg?on:J.map((function(e){return"fa-".concat(e)})).concat(Object.keys(rn));a.includes("fa")||a.push("fa");var o=[".".concat(ae,":not([").concat(G,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(G,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=Me(e.querySelectorAll(o))}catch(jq){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var u=zt("onTree"),l=s.reduce((function(e,t){try{var n=an(t);n&&e.push(n)}catch(jq){X||"MissingIcon"===jq.name&&console.error(jq)}return e}),[]);return new Promise((function(e,n){Promise.all(l).then((function(n){$t(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),u(),e()}))})).catch((function(e){u(),n(e)}))}))}function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;an(e).then((function(e){e&&$t([e],t)}))}function ln(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:_t(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:_t(i||{})),e(r,m(m({},n),{},{mask:i}))}}J.map((function(e){on.add("fa-".concat(e))})),Object.keys(ee.classic).map(on.add.bind(on)),Object.keys(ee.sharp).map(on.add.bind(on)),on=w(on);var cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Se:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,u=t.maskId,l=void 0===u?null:u,c=t.title,h=void 0===c?null:c,f=t.titleId,d=void 0===f?null:f,p=t.classes,v=void 0===p?[]:p,g=t.attributes,y=void 0===g?{}:g,b=t.styles,x=void 0===b?{}:b;if(e){var w=e.prefix,_=e.iconName,S=e.icon;return Et(m({type:"icon"},e),(function(){return xt("beforeDOMElementCreation",{iconDefinition:e,params:t}),xe.autoA11y&&(h?y["aria-labelledby"]="".concat(xe.replacementClass,"-title-").concat(d||ke()):(y["aria-hidden"]="true",y.focusable="false")),Ct({icons:{main:Lt(S),mask:s?Lt(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:_,transform:m(m({},Se),r),symbol:a,title:h,maskId:l,titleId:d,extra:{attributes:y,styles:x,classes:v}})}))}},hn={mixout:function(){return{icon:ln(cn)}},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=sn,e.nodeCallback=un,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?j:t,r=e.callback;return sn(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,u=t.mask,l=t.maskId,c=t.extra;return new Promise((function(t,h){Promise.all([Nt(n,a),u.iconName?Nt(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var h=x(u,2),f=h[0],d=h[1];t([e,Ct({icons:{main:f,mask:d},prefix:a,iconName:n,transform:o,symbol:s,maskId:l,title:r,titleId:i,extra:c,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=Ce(e.styles);return o.length>0&&(r.style=o),Ae(a)&&(t=wt("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},fn={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return Et({type:"layer"},(function(){xt("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(xe.cssPrefix,"-layers")].concat(w(r)).join(" ")},children:n}]}))}}}},dn={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,u=t.styles,l=void 0===u?{}:u;return Et({type:"counter",content:e},(function(){return xt("beforeDOMElementCreation",{content:e,params:t}),Rt({content:e.toString(),title:r,extra:{attributes:s,styles:l,classes:["".concat(xe.cssPrefix,"-layers-counter")].concat(w(a))}})}))}}}},pn={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Se:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,u=t.attributes,l=void 0===u?{}:u,c=t.styles,h=void 0===c?{}:c;return Et({type:"text",content:e},(function(){return xt("beforeDOMElementCreation",{content:e,params:t}),At({content:e,transform:m(m({},Se),r),title:a,extra:{attributes:l,styles:h,classes:["".concat(xe.cssPrefix,"-layers-text")].concat(w(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(U){var s=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();a=u.width/s,o=u.height/s}return xe.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,At({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},vn=new RegExp('"',"ug"),mn=[1105920,1112319];function gn(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=Me(e.children).filter((function(e){return e.getAttribute(H)===t}))[0],o=I.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(oe),u=o.getPropertyValue("font-weight"),l=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==l&&""!==l){var c=o.getPropertyValue("content"),h=~["Sharp"].indexOf(s[2])?K:Y,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?te[h][s[2].toLowerCase()]:se[h][u],d=function(e){var t=e.replace(vn,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=mn[0]&&n<=mn[1],i=2===t.length&&t[0]===t[1];return{value:Ve(i?t[0]:t),isSecondary:r||i}}(c),p=d.value,v=d.isSecondary,g=s[0].startsWith("FontAwesome"),y=st(f,p),b=y;if(g){var x=function(e){var t=tt[e],n=st("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);x.iconName&&x.prefix&&(y=x.iconName,f=x.prefix)}if(!y||v||a&&a.getAttribute(W)===f&&a.getAttribute(Z)===b)r();else{e.setAttribute(n,b),a&&e.removeChild(a);var w={iconName:null,title:null,titleId:null,prefix:null,transform:Se,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},_=w.extra;_.attributes[H]=t,Nt(y,f).then((function(i){var a=Ct(m(m({},w),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:b,extra:_,watchable:!0})),o=j.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return ze(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function yn(e){return Promise.all([gn(e,"::before"),gn(e,"::after")])}function bn(e){return e.parentNode!==document.head&&!~q.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(H)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function xn(e){if(B)return new Promise((function(t,n){var r=Me(e.querySelectorAll("*")).filter(bn).map(yn),i=zt("searchPseudoElements");Xt(),Promise.all(r).then((function(){i(),Yt(),t()})).catch((function(){i(),Yt(),n()}))}))}var wn={hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=xn,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?j:t;xe.searchPseudoElements&&xn(n)}}},_n=!1,Sn=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},kn={mixout:function(){return{parse:{transform:function(e){return Sn(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=Sn(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),l={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:m({},l.outer),children:[{tag:"g",attributes:m({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:m(m({},t.icon.attributes),l.path)}]}]}}}},Mn={x:0,y:0,width:"100%",height:"100%"};function Tn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var En={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?dt(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=ct()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,u=i.width,l=i.icon,c=a.width,h=a.icon,f=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:c,iconWidth:u}),d={tag:"rect",attributes:m(m({},Mn),{},{fill:"white"})},p=l.children?{children:l.children.map(Tn)}:{},v={tag:"g",attributes:m({},f.inner),children:[Tn(m({tag:l.tag,attributes:m(m({},l.attributes),f.path)},p))]},g={tag:"g",attributes:m({},f.outer),children:[v]},y="mask-".concat(o||ke()),b="clip-".concat(o||ke()),x={tag:"mask",attributes:m(m({},Mn),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,g]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=h,"g"===t.tag?t.children:[t])},x]};return n.push(w,{tag:"rect",attributes:m({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},Mn)}),{children:n,attributes:r}}}},Cn={provides:function(e){var t=!1;I.matchMedia&&(t=I.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:m(m({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=m(m({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:m(m({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:m(m({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:m(m({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:m(m({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:m(m({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:m(m({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:m(m({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},An=[Oe,hn,fn,dn,pn,wn,{mixout:function(){return{dom:{unwatch:function(){Xt(),_n=!0}}}},hooks:function(){return{bootstrap:function(){Jt(bt("mutationObserverCallbacks",{}))},noAuto:function(){Kt&&Kt.disconnect()},watch:function(e){var t=e.observeMutationsRoot;_n?Yt():Jt(bt("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},kn,En,Cn,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}];!function(e,t){var n=t.mixoutsTo;vt=e,mt={},Object.keys(gt).forEach((function(e){-1===yt.indexOf(e)&&delete gt[e]})),vt.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===g(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){mt[e]||(mt[e]=[]),mt[e].push(r[e])}))}e.provides&&e.provides(gt)}))}(An,{mixoutsTo:Mt});var Rn=Mt.parse,Pn=Mt.icon,Ln=n(2007),On=n.n(Ln);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zn(e){return function(e){if(Array.isArray(e))return Bn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Vn=["style"];function Gn(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Un(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var Hn=!1;try{Hn=!0}catch(jq){}function Wn(e){return e&&"object"===In(e)&&e.prefix&&e.iconName&&e.icon?e:Rn.icon?Rn.icon(e):null===e?null:e&&"object"===In(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Zn(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?jn({},e,t):{}}var $n=t.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,s=e.titleId,u=e.maskId,l=Wn(n),c=Zn("classes",[].concat(zn(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,u=e.spin,l=e.spinPulse,c=e.spinReverse,h=e.pulse,f=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,m=e.flip,g=e.size,y=e.rotation,b=e.pull,x=(jn(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":h,"fa-fw":f,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(g),"undefined"!==typeof g&&null!==g),jn(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),jn(t,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),jn(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(x).map((function(e){return x[e]?e:null})).filter((function(e){return e}))}(e)),zn(a.split(" ")))),h=Zn("transform","string"===typeof e.transform?Rn.transform(e.transform):e.transform),f=Zn("mask",Wn(r)),d=Pn(l,Dn(Dn(Dn(Dn({},c),h),f),{},{symbol:i,title:o,titleId:s,maskId:u}));if(!d)return function(){var e;!Hn&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var p=d.abstract,v={ref:t};return Object.keys(e).forEach((function(t){$n.defaultProps.hasOwnProperty(t)||(v[t]=e[t])})),Xn(p[0],v)}));$n.displayName="FontAwesomeIcon",$n.propTypes={beat:On().bool,border:On().bool,beatFade:On().bool,bounce:On().bool,className:On().string,fade:On().bool,flash:On().bool,mask:On().oneOfType([On().object,On().array,On().string]),maskId:On().string,fixedWidth:On().bool,inverse:On().bool,flip:On().oneOf([!0,!1,"horizontal","vertical","both"]),icon:On().oneOfType([On().object,On().array,On().string]),listItem:On().bool,pull:On().oneOf(["right","left"]),pulse:On().bool,rotation:On().oneOf([0,90,180,270]),shake:On().bool,size:On().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:On().bool,spinPulse:On().bool,spinReverse:On().bool,symbol:On().oneOfType([On().bool,On().string]),title:On().string,titleId:On().string,transform:On().oneOfType([On().string,On().object]),swapOpacity:On().bool},$n.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var qn,Xn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=Gn(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Un(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=Fn(r,Vn);return a.attrs.style=Dn(Dn({},a.attrs.style),s),t.apply(void 0,[n.tag,Dn(Dn({},a.attrs),u)].concat(zn(i)))}.bind(null,t.createElement),Yn={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},Kn=Yn,Jn={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},Qn={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},er={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"]},tr={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},nr={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},rr=n(184);function ir(e){var t="string"===typeof e?{page:e}:e,n=t.page.replaceAll(" ",""),r=lr(t);return null===r?(0,rr.jsx)(rr.Fragment,{}):(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"HelpPopup HelpPopup-".concat(n),children:[t.page!==qn.LoadingStarted&&(0,rr.jsx)("button",{className:"Xmark",onClick:function(){return dr.setPopupHelpPage(qn.None)},children:(0,rr.jsx)($n,{icon:nr})}),(0,rr.jsx)("div",{className:"content",children:r})]}),(0,rr.jsx)("div",{className:"overlay"})]})}function ar(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="string"===typeof e?e:e.page;return(0,rr.jsx)("span",{children:(0,rr.jsx)("button",{className:n,onClick:function(){return dr.setPopupHelpPage(e)},children:t||r})})}function or(){return(0,rr.jsx)(rr.Fragment,{children:(0,rr.jsx)("p",{children:ar(qn.Home)})})}!function(e){e.None="None",e.Home="Home",e.LoadAndSavePanel="Load&Save",e.DifferenceGraphPanel="Difference Graph",e.GraphOptionPanel="Graph Options",e.GraphPanel="Graph",e.UmapGraphOptionPanel="Umap Graph Option",e.UmapGraphPanel="Umap Graph",e.TimeWarpedGraphPanel="Time Warped Graph",e.SelectionPanel="Selection",e.RobotOptionPanel="Robot Options",e.QSceneOptionPanel="Quaternion Options",e.SceneOptionPanel="Scene Options",e.LegendPanel="Legend",e.TimeBarPanel="Time Bar",e.WarpedTimeBarPanel="Time Warped Time Bar",e.TimeWarping="Time Warping",e.Umap="UMAP",e.Qscene="Quaternion Space Scene",e.AnimationCSV="Animation CSV",e.AnimationRosbag="Animation Rosbag",e.PageNotFound="Page Not Found",e.LoadingStarted="Loading Started",e.LoadingFailed="Loading Failed",e.LoadingSuccess="Loading Success"}(qn||(qn={}));var sr="HelpBody",ur="HelpTitle";function lr(e){return e.page===qn.None?null:e.page===qn.Home?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Motion Comparator"}),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("h3",{children:"Key Features"}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:"Viewable 3D scenes"}),(0,rr.jsx)("li",{children:"Convenient time-series plots"}),(0,rr.jsx)("li",{children:"Scrubbable time bars"}),(0,rr.jsx)("li",{children:"Object traces in cartesian space"}),(0,rr.jsx)("li",{children:"Quaternion traces"}),(0,rr.jsx)("li",{children:"UMAP graphs of robot joint states"}),(0,rr.jsx)("li",{children:"Time warping for temporary motion alignment"}),(0,rr.jsx)("li",{children:"Juxtaposition, superposition, and explicit encoding designs"}),(0,rr.jsx)("li",{children:"Hyper-customizable and sharable layouts"})]}),(0,rr.jsx)("br",{}),(0,rr.jsx)("h3",{children:" Panels "}),"Panels are modular visualization interfaces that can be configured and arranged into customizable layouts. Each panel has its own help page that you can get to either from here or from the panel itself.",(0,rr.jsxs)("ul",{children:[(0,rr.jsxs)("li",{children:["A ",ar(qn.LoadAndSavePanel)," panel loads or saves motion data.  "]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.SelectionPanel)," panel allows you to see and select any part of any object in any scene. You can also create 3D scenes, traces, and various visualization using this panel."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.TimeBarPanel)," panel shows the current time, start time, and end time of of the application."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.DifferenceGraphPanel)," panel shows the differences between elements in a scene."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.GraphOptionPanel)," panel customizes the graph panel."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.GraphPanel)," panel visualizes robot motions in time-series plots."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.LegendPanel)," panel shows the legend of a graph."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.UmapGraphPanel)," panel maps the higher-dimentional joint data to a lower-dimensional graph."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.UmapGraphOptionPanel)," panel allows you to change the look details of a UMAP panel."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.TimeWarpedGraphPanel)," panel graphs the time warp between two time-warped scenes."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.RobotOptionPanel)," panel allows some aspects of a robot (such as its position and rotation) to be edited."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.SceneOptionPanel)," panel allows customization of the 3D scene. Aspects such as lighting, background color, and time-warping objectives can be edited using this panel."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.QSceneOptionPanel)," panel maps the rotation of an item (such as a robot or joint) over the course of its motion."]}),(0,rr.jsxs)("li",{children:["A ",ar(qn.WarpedTimeBarPanel)," panel is like the ",ar(qn.TimeBarPanel)," panel but with extra options for time warped data."]})]}),(0,rr.jsx)("h3",{children:" Other Pages "}),(0,rr.jsxs)("ul",{children:[(0,rr.jsxs)("li",{children:["The ",ar(qn.Umap),' page describes what a "UMAP" is. ']}),(0,rr.jsxs)("li",{children:["The ",ar(qn.TimeWarping),' page describes what "time warping" is. ']}),(0,rr.jsxs)("li",{children:["The ",ar(qn.AnimationCSV)," page describes the animation CSV format. "]})]})]})]}):e.page===qn.SelectionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Selection Panel"}),(0,rr.jsxs)("div",{className:sr,children:[or(),(0,rr.jsx)("p",{children:"This panel lists out all scenes, robots, and robot joints in a hierarchy so that they can be found and selected with ease."}),(0,rr.jsx)("br",{}),(0,rr.jsx)("h3",{children:" Openning a 3D scene "}),(0,rr.jsx)("p",{children:"Scenes are shown as the top level of the selection hierarchy."}),(0,rr.jsx)("p",{children:"You can open a scene by clicking and dragging it into the current workspace."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropToOpenA3DScene.gif",alt:"A gif showing how to open a 3D scene"}),(0,rr.jsx)("h3",{children:" Adding a ghost robot to a 3D scene "}),(0,rr.jsx)("p",{children:"Objects (such as robots) only exist within scenes and therefore appear as the children of scenes within the selection hierarchy."}),(0,rr.jsx)("p",{children:"You can add the ghost of an object to a scene by clicking and dragging the object's name into the scene you want its ghost to appear in."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddGhostToScene.gif",alt:"A gif showing how to add a ghost robot"}),(0,rr.jsx)("h3",{children:" Adding the Trace of a Joint "}),(0,rr.jsx)("p",{children:"Since joints can only appear as part of an object (since all robots are objects) joints appear as the children of objects within the selection hierarchy."}),(0,rr.jsx)("p",{children:"You can add the trace of an object's joint by clicking and dragging the joint's name into the scene you would like the trace to appear in."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddTraceToScene.gif",alt:"a gif showing a joint's trace being added to a scene"}),(0,rr.jsx)("h3",{children:" Deleting an Object "}),(0,rr.jsx)("p",{children:"An object can be deleted from a scene by clicking the trash icon next to it in the selection hierarchy."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DeleteObjectFromScene.gif",alt:"a gif showing the deletion of an object"}),(0,rr.jsx)("h3",{children:" Creating a new Scene "}),(0,rr.jsx)("p",{children:'A new, empty scene can be created by clicking the "New Scene" button.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreationOfNewEmptyScene.gif",alt:"a gif showing the creation of a scene"}),(0,rr.jsxs)("p",{children:["To learn about how to add objects/animations to the newly created scene, go to the ",ar(qn.LoadAndSavePanel)," page."]}),(0,rr.jsx)("h3",{children:" Cloning a Scene "}),(0,rr.jsx)("p",{children:'A scene can be cloned by clicking on the scene you desire to clone and then clicking the "Clone Scene" button.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CloningScene.gif",alt:"a gif of a scene being cloned"})]})]}):e.page===qn.GraphOptionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Graph Options Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsxs)("p",{children:["This panel is used to create new ",ar(qn.GraphPanel)," panels and new ",ar(qn.DifferenceGraphPanel)," panels. It also allows you to edit said panels."]}),(0,rr.jsx)("h3",{children:" Adding a Line "}),(0,rr.jsxs)("p",{children:["To learn how to add a line to a graph (i.e. graph some aspect of an object) go to the ",ar(qn.GraphPanel)," or ",ar(qn.DifferenceGraphPanel)," page."]}),(0,rr.jsx)("h3",{children:" Creating a Graph Panel "}),(0,rr.jsxs)("p",{children:["To create a new ",ar(qn.GraphPanel)," or ",ar(qn.DifferenceGraphPanel),' panel, click and drag the text that says "New Graph" or "Difference Graph" into the workspace.']}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreatingEmptyGraphs.gif",alt:"gif of a graph panel being clicked and dragged into the workspace"}),(0,rr.jsxs)("p",{children:['To edit the panel after you have created it, first select the graph panel you want to edit by clicking on it. Then, you can use the "property" dropbox of the ',ar(qn.GraphOptionPanel)," panel to edit what aspect of each joint/object is being graphed."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ChangingThePropertiesOfAGraph.gif",alt:"gif of person changing the properties of a graph"})]})]}):e.page===qn.GraphPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Graph Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"Each panel of this type contains a 2D plot where time is the x-axis and some other aspect of a robot (such as the position or rotation of its joint(s)) is graphed on the y-axis."}),(0,rr.jsxs)("p",{children:["You can create an empty graph via the",ar(qn.GraphOptionPanel)," panel."]}),(0,rr.jsx)("h3",{children:" Adding a Line"}),(0,rr.jsxs)("p",{children:["To graph an object's joint, click and drag it from the",ar(qn.SelectionPanel)," panel and into the graph panel."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddJointValueToGraph.gif",alt:"A gif showing an object's joint being clicked and dragged into a graph panel"}),(0,rr.jsx)("p",{children:"This can be done for as many joints as you wish."}),(0,rr.jsxs)("p",{children:["To learn more about how to edit the graph, go to the",ar(qn.GraphOptionPanel)," panel."]}),(0,rr.jsx)("h3",{children:" Opening a Legend "}),(0,rr.jsx)("p",{children:"In addition to the graph panel itself, a linked panel can be used to show the legend of the graph i.e. what the graph graphs."}),(0,rr.jsxs)("p",{children:['To see the legend of a graph, click and drag the button that says "Legend" into the workspace, and a',ar(qn.LegendPanel)," will appear."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropLegendOfGraph.gif",alt:"a gif to show how to click and drag to open a legend"})]})]}):e.page===qn.DifferenceGraphPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Difference Graph Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"Panels of this type graph the differences between two aspects of two motions."}),(0,rr.jsx)("p",{children:"For example, below you can see a graph of the end effector positions for two robots over the course of their animations."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/PictureOfDifferenceGraphWithDifferences.gif",alt:"picture of difference graph"}),(0,rr.jsx)("p",{children:"If we time warp the two scenes and then graph them again, you can now see that their end effectors follow the exact same path (i.e. the difference between their time-warped end effectors are now 0 at every time step), they just do so at different times."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/PictureOfDifferenceGraphWithNoDifferences.gif",alt:"picture of difference graph where end effector differences are now 0 at every time step"}),(0,rr.jsx)("h3",{children:" Graphing Elements "}),(0,rr.jsx)("p",{children:"When first created, the graph will be empty except for a red, vertical bar that shows the current time as it corresponds on the graph."}),(0,rr.jsx)("p",{children:"You can then graph the difference between two elements of two motions by dragging and dropping said elements into the difference graph."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreationAndPopulationOfDiffGraph.gif",alt:"gif of dragging and dropping said elements into the difference graph"}),(0,rr.jsx)("h3",{children:" Graph Legend "}),(0,rr.jsx)("p",{children:'You can open a legend for the graph by dragging and dropping the "Legend" text into the workspace.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropDifferenceGraphLegend.gif",alt:"gif of dragging and dropping a legend for the graph into the workspace"}),(0,rr.jsx)("h3",{children:" Editing the Graph "}),(0,rr.jsxs)("p",{children:["You can edit the graph using the ",ar(qn.GraphOptionPanel)," panel."]})]})]}):e.page===qn.UmapGraphOptionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"UMAP Graph Option Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:" This is the panel contains all the information about UMAP graphs. "}),(0,rr.jsx)("h3",{children:" Create a UMAP Graph Panel "}),(0,rr.jsx)("p",{children:'You can drag-and-drop the "New UMAP Graph" button to create a new UMAP Graph Panel.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_CreateUmap.gif"}),(0,rr.jsx)("h3",{children:" Control the settings of the selected UMAP Graph Panel "}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:'type the name in the text input field next to "Name" and press "enter" key to change the name of the UMAP Graph'}),(0,rr.jsx)("li",{children:'click on "Background Color" or "Axis Color" and then click on the color map to change the background color and the axis color (border color)'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeColor.gif"}),(0,rr.jsx)("li",{children:"drag the slide bar to change the line width of the curves shown in the graph"}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeLineWidth.gif"}),(0,rr.jsx)("li",{children:"drag the slide bar to change the three parameters (number of neighbors, minimum distance, and spread) in order to create a UMAP"}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeParams.gif"})]})]})]}):e.page===qn.UmapGraphPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"UMAP Graph Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsxs)("p",{children:["Panels of this type display the curves generated by a ",ar(qn.Umap),"."]}),(0,rr.jsx)("h3",{children:" Add a line"}),(0,rr.jsxs)("p",{children:["You can add a line by clicking and draging a robot (not robot part) from the ",ar(qn.SelectionPanel)," panel. Normally it takes a few seconds to calculate and display the line."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/Umap_AddLine.gif"}),(0,rr.jsx)("h3",{children:" Open a legend "}),(0,rr.jsx)("p",{children:"Click and drag the legend button to create a legend panel for this UMAP Graph Panel"}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/Umap_OpenLegend.gif"})]})]}):e.page===qn.SceneOptionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Scene Options Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:" This panel is used to edit the current scene. "}),(0,rr.jsx)("h3",{children:" Selecting the Scene to Edit "}),(0,rr.jsxs)("p",{children:["To edit a scene, you must first select one. To do so, click on a view of the scene you would like to edit. You will know that you have selected the scene when the view of it that you clicked is outlined. If possible, the ",ar(qn.SceneOptionPanel)," panel will also be switched to automatically."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ClickingOnSceneToSelectIt.gif",alt:"gif of selecting a scene"}),(0,rr.jsx)("h3",{children:" Editing the Scene "}),(0,rr.jsxs)("p",{children:["To edit the scene, use the buttons in the",ar(qn.SceneOptionPanel)," panel. They allow you to synchronize all views so that they have the same position/rotations, change the view, show and/or hide the ground plane, change the directional lighting, edit the sizes of traces, time warp the scene relative to another scene, and replace animations in the scene."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SceneOptionsEditingScene.gif",alt:'gif of editing the scene using the "Scene Options" panel'}),(0,rr.jsx)("h3",{children:" The Scene Legend "}),(0,rr.jsx)("p",{children:'The "legend" of a scene allows you to both see what traces are currently shown in a scene and to delete said traces at will.'}),(0,rr.jsx)("p",{children:'You can open the current scene\'s legend by clicking and dragging the "Legend" button into the workspace.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SceneLegendAndDeletionOfTraces.gif",alt:"gif of a scene's legend being created and then used to delete the traces in the scene"})]})]}):e.page===qn.LoadAndSavePanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Files Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("h3",{children:" Uploading and Downloading Workspaces "}),(0,rr.jsx)("p",{children:"This panel is used to load and/or save entire workspaces (including the current layout) as well as load objects and animations into the currently-selected scene."}),(0,rr.jsx)("p",{children:'You can upload a workspace by either by using a raw URL to the json file or by uploading it from a local file. You can also download the current workspace by clicking the "Download" button.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/LS_Workspace.gif",alt:"gif of loading and saving the workspace"}),(0,rr.jsx)("p",{children:'If you would like to load a robot or object into the current scene, you can do so by either selecting an example robot in the robot dropdown and clicking "Confirm" or by uploading one from a URL. Uploaded robots and/or objects can be in either the ".glb" or ".urdf" format.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/LooadingInExampleRobot.gif",alt:"gif of loading an example robot into the current scene"}),(0,rr.jsxs)("p",{children:['Once you have objects loaded into the current scene, you can add animations to them via the "Load motion data" section of the ',ar(qn.LoadAndSavePanel)," panel."]}),(0,rr.jsxs)("p",{children:["Robot motions must be in a special CSV format or rosbag to work. If you would like to learn more about motions and what the CSV format looks like, go ",ar(qn.AnimationCSV,"here"),". If you would like to learn more about how to load a rosbag, go ",ar(qn.AnimationRosbag,"here"),"."]})]})]}):e.page===qn.LegendPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Legend Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"Panels of this type are used to display the legend of whatever graph panel they came from."}),(0,rr.jsx)("h3",{children:" Graph Panels "}),(0,rr.jsxs)("ul",{children:[(0,rr.jsxs)("li",{children:[" ",ar(qn.GraphPanel)," "]}),(0,rr.jsxs)("li",{children:[" ",ar(qn.DifferenceGraphPanel)," "]}),(0,rr.jsxs)("li",{children:[" ",ar(qn.UmapGraphPanel)," "]}),(0,rr.jsxs)("li",{children:[" ",ar(qn.TimeWarpedGraphPanel)," "]})]})]})]}):e.page===qn.TimeWarpedGraphPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Timewarped Graph Panel"}),or(),(0,rr.jsx)("div",{className:sr,children:(0,rr.jsxs)("p",{children:["Panels of this type are like a",ar(qn.GraphPanel)," but for timewarped data."]})})]}):e.page===qn.RobotOptionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Robot Options Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"This panel allows you to edit some aspects of the currently-selected robot."}),(0,rr.jsx)("h3",{children:" Selecting a Robot "}),(0,rr.jsxs)("p",{children:["The easiest way to select an object is for you to first find/open a view of the scene with the object that you would like to select and then for you to click on said object. When an object is successfully selected, it will become highlighted in blue (which may or may not be difficult to see depending on the colors/textures of the robot). If possible, the ",ar(qn.RobotOptionPanel)," panel will also be switched to upon selection."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SelectingRobotByClickingOnIt.gif",alt:"gif of a robot being selected by clicking on it"}),(0,rr.jsxs)("p",{children:["For the purposes of this application, a robot is simply an object. The object may or may not have joints, but you can select it and manipulate it all the same. As such, to select a robot you can use the ",ar(qn.SelectionPanel)," panel and select what its help page refers to as an object."]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SelectingRobotViaSelectionPanel.gif",alt:"gif of selection panel being used to select the robot"}),(0,rr.jsx)("h3",{children:" Editing a Robot "}),(0,rr.jsxs)("p",{children:["A selected robot can be edited via the ",ar(qn.RobotOptionPanel)," panel."]}),(0,rr.jsx)("p",{children:"This panel allows you to edit the opacity of the robot and the position/rotation/scale of the robot. It also allows you to view any animation data that is animating the robot."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/RobotOptionsRobotEditing.gif",alt:"gif of a robot being edited using the Robot Options panel"})]})]}):e.page===qn.QSceneOptionPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Quaternion Options Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:" This is the panel contains all the information about Quaternion Space Scene. "}),(0,rr.jsxs)("h3",{children:[" Create a ",ar(qn.Qscene)," Panel "]}),(0,rr.jsx)("p",{children:'You can drag-and-drop the "New Quaternion Space" button to create a new Quaternion Space Scene Panel.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/QScene_CreateQScene.gif"}),(0,rr.jsx)("h3",{children:" Selecting a Quaternion Space Scene to Edit "}),(0,rr.jsxs)("p",{children:["To edit a scene, you must first select one. To do so, click on a view of the scene you would like to edit. You will know that you have selected the scene when the view of it that you clicked is outlined. If possible, the ",ar(qn.QSceneOptionPanel)," panel will also be switched to automatically."]}),(0,rr.jsx)("h3",{children:" Editing a Quaternion Space Scene "}),(0,rr.jsxs)("p",{children:["To edit the scene, use the buttons in the ",ar(qn.QSceneOptionPanel)," panel. They allow you to show/hide the world frame, change the opacity and color of the longitude and latitude lines displayed on the sphere, and change the background color of the scene"]}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/QScene_ChangeSettings.gif"})]})]}):e.page===qn.Qscene?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Quaternion Space Scene"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"Quaternion traces are lines in 4D Euclidean space that encode an object\u2019s orientation changes."}),(0,rr.jsx)("h3",{children:" Related Pages "}),(0,rr.jsx)("ul",{children:(0,rr.jsxs)("li",{children:[" ",ar(qn.QSceneOptionPanel)," "]})})]})]}):e.page===qn.TimeBarPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Time Bar Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("h3",{children:" The Time Bar "}),(0,rr.jsx)("p",{children:"The time bar of the Time Bar panel allows you to define both the start and end time of all animations as well as scrub through them."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/TimeBarBeingScrubbed.gif",alt:"gif of scrubbing the time bar"}),(0,rr.jsx)("p",{children:"In addition, if you would like to play, pause, or restart the animaions, you can do so using the buttons on this panel."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/TimeBarBeingPlayedPausedReset.gif",alt:"gif of playing, stopping, and resetting the animations via the time bar"})]})]}):e.page===qn.WarpedTimeBarPanel?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Time Warped Time Bar Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsxs)("p",{children:[" Panels of this type are similar to the ",ar(qn.TimeBarPanel)," panel but contain two extra time bar options.  These extra options are specifically meant to help visualize ",ar(qn.TimeWarping,"time warping")," and can be switched to via the drop-down menu next to the currently-shown time bar. "]}),(0,rr.jsx)("h3",{children:" The Default Time Bar "}),(0,rr.jsxs)("p",{children:["This time bar works exactly the same as the one in the",ar(qn.TimeBarPanel)," panel so it will not be further explained here."]}),(0,rr.jsx)("h3",{children:" Colored Time Bar "}),(0,rr.jsx)("p",{children:"This time bar has all the abilities that the default time bar has but also displays where the target scene of the time warping was slowed or sped up via colors. Blue means that it was slowed and red means that it was sped up. White means that it was unchanged."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ColoredTimeBarInUse.gif",alt:"gif of playing, stopping, and resetting the animations via the colored time bar"}),(0,rr.jsx)("h3",{children:" Double Time Bar "}),(0,rr.jsx)("p",{children:'The double time bar, as its name suggests, consists of two time bars -- one for the base scene and one for the target scene -- as well as the mapping between them. The mapping shows, generally, what each time in the base scene is mapped to in the target scene. We say "generally" because it actually only shows a small number of the actual number of mappings there are (otherwise the mapping area becomes too cluttered to be useful), but it is enough to get a good idea of what the mapping looks like.'}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DoubleTimeBarPlaying.gif",alt:"gif of the double time bars while the animations are playing"}),(0,rr.jsx)("p",{children:"Also of note is the fact that both time bars are accurate for their respective scenes so you can scrub around the target scene or base scene as you desire."}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DoubleTimeBarBeingScrubbed.gif",alt:"gif of the base and target scene time bars being scrubbed"})]})]}):e.page===qn.TimeWarping?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Time Warping"}),or(),(0,rr.jsx)("div",{className:sr,children:(0,rr.jsx)("p",{children:"Time warping takes certain aspects (joint positions, joint angles, object position, etc.) of two objects in two different scenes and time warps the scenes in order to best match the values of those aspects over the course of their animations. This is useful if, for example, you have two scenes with the same general motion but one had its events happen much slower than the other such that their corresponding events happened seconds apart. This offset makes it very difficult to juxtapose the animations as their relevant events happen seconds apart, but time warping can be used to ameliorate this and make their relevant events happen at the same time."})})]}):e.page===qn.Umap?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Legend Panel"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:"UMAP stands for Uniform Manifold Approximation and Projection and is a dimension reduction technique that can be used for visualisation similarly to t-SNE, but also for general non-linear dimension reduction."}),(0,rr.jsx)("h3",{children:" Related Pages "}),(0,rr.jsxs)("ul",{children:[(0,rr.jsxs)("li",{children:[" ",ar(qn.UmapGraphOptionPanel)," "]}),(0,rr.jsxs)("li",{children:[" ",ar(qn.UmapGraphPanel)," "]})]})]})]}):e.page===qn.AnimationCSV?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Animation CSV Format"}),or(),(0,rr.jsxs)("div",{className:sr,children:[(0,rr.jsx)("p",{children:'This application compares "robot motions". A "robot motion" is simply an object moving over time. To make an object move over time, the application must know what positions/angles/etc. an object has over time. To give it this information, we give it an "animation" in the form of an "animation CSV".'}),(0,rr.jsx)("p",{children:'Each "animation CSV" starts off with a row of column names and then a number of rows of column values, each value meaning something different depending on what its column\'s name is. For example, one of the columns must always be the "time" column, which gives the time stamp of each row. Then the other columns can manipulate positions, rotations, or any other features of an object that can be animated and the application will make sure that they are set to their given values at the given time stamp. In this way, every row (besides the first row which consists of column names) acts as a "frame" of the animation.'}),(0,rr.jsx)("h3",{children:" Animation CSV Format "}),(0,rr.jsx)("p",{children:"Each CSV must start with 1 row of column names (strings) and then 1 or more rows of column values (floats or integers)."}),(0,rr.jsx)("p",{children:'Each column name selects one attribute of one object and manipulates it over time (each row is a "frame" of the animation).'}),(0,rr.jsx)("p",{children:'As such, there must be a "time" column that has the time in either seconds, milliseconds, microseconds, or nanoseconds. The unit is inferred based on the ending time in the CSV.'}),(0,rr.jsxs)("table",{children:[(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"seconds"}),(0,rr.jsx)("td",{children:"by default"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"milliseconds"}),(0,rr.jsx)("td",{children:"if the total time is > 1000"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"microseconds"}),(0,rr.jsx)("td",{children:"if the total time is > 1000000"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"nanoseconds"}),(0,rr.jsx)("td",{children:"if the total time is > 1000000000"})]})]}),(0,rr.jsx)("br",{}),(0,rr.jsx)("p",{children:"The time column must be increasing as you go down the CSV, but the first time stamp does not have to be at time 0 (it can be -1234.5, 12.3, etc.)."}),(0,rr.jsx)("p",{children:"The animation CSV also has special column names to select different attributes of an object and animate them over time:"}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:' Position: "X_POS", "Y_POS", "Z_POS" '}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:" Used to select and animate the (x, y, z) position of an object. "}),(0,rr.jsx)("li",{children:" Expected values are between -10.0 and 10.0 inclusive. "})]})]}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:' Rotation: "X_ROT", "Y_ROT", "Z_ROT", "W_ROT" '}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:" Used to select and affect the (x, y, z) euler rotation of an object. "}),(0,rr.jsx)("li",{children:' If "W_ROT" is present, then it actually animates the (x, y, z, w) quaternion rotation of an object. '}),(0,rr.jsx)("li",{children:" All values should be in radians. "})]})]}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:' Scale: "X_SCALE", "Y_SCALE", "Z_SCALE" '}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:" Used to select and affect the (x, y, z) scale of an object. "}),(0,rr.jsx)("li",{children:" Values can be anything you want but keep in mind that the expected viewing area is a 10 by 10 by 10 cube so making the scale larger than 10 is going to make it take up the entire screen. "})]})]}),(0,rr.jsx)("p",{children:'Other than the "time" column, every other column name should start with the name of the object it is selecting (found in the "[Select Object](SelectObjectTab)" tab.) and then (if the column is for one of the special attributes listed above) the attribute selector (listed above) should be appended to the column name.'}),(0,rr.jsx)("p",{children:"If anything other than an attribute selector is appended to the URDF name, it is assumed to be the name of the joint on the URDF that the column is selecting."}),(0,rr.jsx)("p",{children:'Valid column names can be composed of any number of alphanumeric characters ("abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789") or underscores ("_").'}),(0,rr.jsx)("p",{children:'Additionally, you are allowed to use a hyphen "-" to seperate the object name from the position/rotation/scale/joint selector.'}),(0,rr.jsx)("h3",{children:" Example "}),(0,rr.jsx)("p",{children:"Below is an example animation CSV that you could put in a file and load directly into the application (there are explanations of its columns beneath it as well as a repeat of the CSV in a more readable format)."}),(0,rr.jsxs)("table",{children:[(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("th",{children:"time"}),(0,rr.jsx)("th",{children:"ik_solutions-right_j0"}),(0,rr.jsx)("th",{children:"ik_solutions-right_j1"}),(0,rr.jsx)("th",{children:"ik_solutions-X_POS"}),(0,rr.jsx)("th",{children:"ik_solutions-Y_POS"}),(0,rr.jsx)("th",{children:"ik_solutions-Z_POS"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"0.03330000000000003"}),(0,rr.jsx)("td",{children:"1.1204203532251877"}),(0,rr.jsx)("td",{children:"0.21976057475879832"}),(0,rr.jsx)("td",{children:"-0.5517561517071136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"0.50381920383039"}),(0,rr.jsx)("td",{children:"1.8204203732251877"}),(0,rr.jsx)("td",{children:"0.21973057475879832"}),(0,rr.jsx)("td",{children:"-0.35123049822136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"0.98992327397899"}),(0,rr.jsx)("td",{children:"1.8204203732251877"}),(0,rr.jsx)("td",{children:"0.21973057475879832"}),(0,rr.jsx)("td",{children:"-0.35123049822136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"1.12309487213904"}),(0,rr.jsx)("td",{children:"1.8204203732251877"}),(0,rr.jsx)("td",{children:"0.21973057475879832"}),(0,rr.jsx)("td",{children:"-0.35123049822136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"1.33091873829083"}),(0,rr.jsx)("td",{children:"1.8204203732251877"}),(0,rr.jsx)("td",{children:"0.21973057475879832"}),(0,rr.jsx)("td",{children:"-0.35123049822136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]}),(0,rr.jsxs)("tr",{children:[(0,rr.jsx)("td",{children:"1.43091283743249"}),(0,rr.jsx)("td",{children:"1.8204203732251877"}),(0,rr.jsx)("td",{children:"0.21973057475879832"}),(0,rr.jsx)("td",{children:"-0.35123049822136"}),(0,rr.jsx)("td",{children:"1.5517561462"}),(0,rr.jsx)("td",{children:"-2.1240893"})]})]}),(0,rr.jsx)("h4",{children:" Column Explanations: "}),(0,rr.jsxs)("ul",{children:[(0,rr.jsx)("li",{children:'"time"'}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:"Tells the time stamp of each row."})}),(0,rr.jsx)("li",{children:'"ik_solutions-right_j0"'}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:'Since this column\'s name does not possess any of the special column names, this column selects the "right_j0" joint of an object named "ik_solutions" and animates its angle.'})}),(0,rr.jsx)("li",{children:"ik_solutions-right_j1"}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:'Selects and animates the angle of a joint named "right_j1" on an object named "ik_solutions".'})}),(0,rr.jsx)("li",{children:"ik_solutions-X_POS"}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:'Animates the x-position of an object named "ik_solutions"'})}),(0,rr.jsx)("li",{children:"ik_solutions-Y_POS"}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:'Animates the y-position of an object named "ik_solutions"'})}),(0,rr.jsx)("li",{children:"ik_solutions-Z_POS"}),(0,rr.jsx)("ul",{children:(0,rr.jsx)("li",{children:'Animates the z-position of an object named "ik_solutions"'})})]}),(0,rr.jsx)("p",{children:"Below is the same CSV as above but in a more readable format."})]})]}):e.page===qn.AnimationRosbag?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{className:ur,children:"Animation Rosbag"}),or(),(0,rr.jsx)("div",{className:sr,children:(0,rr.jsxs)("p",{children:[(0,rr.jsxs)("li",{children:["1. load a rosbag file in the ",ar(qn.LoadAndSavePanel)]}),(0,rr.jsxs)("li",{children:["2. select a robot in the ",ar(qn.SelectionPanel)," "]}),(0,rr.jsxs)("li",{children:["3. in the ",ar(qn.RobotOptionPanel),', click "Edit Motion Data"']}),(0,rr.jsx)("li",{children:'4. select the robot joint motions and the transformations in the "Available Joint Motion" and "Available Transformations" dropdown menu respectively.'}),(0,rr.jsx)("li",{children:'5. click "confirm". The joint motions and transformations for the robot will be binded.'}),(0,rr.jsx)("li",{children:"Note: You do not need to select anything if there is no robot joint motions or transformations"}),(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/upload_rosbag.gif",alt:"A gif showing how to load motion from rosbag files"})]})})]}):e.page===qn.LoadingStarted?(0,rr.jsx)("div",{className:"LoadingMessage",children:(0,rr.jsxs)("p",{children:["UMAP"===e.type?"Calculating":"Loading"," ",e.type?"".concat(e.type):null," ",". Please wait a few seconds..."]})}):e.page===qn.LoadingSuccess?null:e.page===qn.LoadingFailed?(0,rr.jsx)("div",{className:"LoadingFailed",children:(0,rr.jsxs)("p",{children:["Failed to load ",e.type?"".concat(e.type):null," ",e.location?"from ".concat(e.location):null,"."]})}):e.page===qn.PageNotFound?(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{children:"Page Not Found"}),(0,rr.jsx)("p",{children:ar(qn.Home)}),(0,rr.jsxs)("p",{children:['The page named "',e.pageName?e.pageName:e.page,'" could not be found.']})]}):lr({page:qn.PageNotFound,pageName:e.page})}var cr=60,hr=(0,l.Z)((function e(){(0,u.Z)(this,e)}));hr.INIT="INIT",hr.VIEW_LOAD="VIEW_LOAD";var fr=(0,l.Z)((function e(){(0,u.Z)(this,e)}));fr.BUILD_PAGE="BUILD_PAGE",fr.VIEW_PAGE="VIEW_PAGE";var dr=new(function(){function e(){(0,u.Z)(this,e),this._app=void 0}return(0,l.Z)(e,[{key:"setApp",value:function(e){this._app=e}},{key:"app",value:function(){return this._app}},{key:"popupHelpPage",value:function(){return this._app?this._app.popupHelpPage():{page:qn.None}}},{key:"setPopupHelpPage",value:function(e){this._app?this._app.setPopupHelpPage(e):console.error('Could not set the current popup page to "'.concat(e,'" because `AppProxy._app` is undefined.'))}},{key:"warn",value:function(e){this._app?this._app.warn(e):console.warn(e)}},{key:"assert",value:function(e,t){if(!1===e)throw dr.error(t),new d.AssertionError({message:t})}},{key:"error",value:function(e){this._app?this._app.error(e):console.error(e)}},{key:"recalculateTimeWarping",value:function(){void 0!==this._app&&this._app.recalculateTimeWarping()}},{key:"updateUI",value:function(){void 0!==this._app&&this._app.updateUI()}},{key:"disallowUpdateUI",value:function(){void 0!==this._app&&this._app.disallowUpdateUI()}},{key:"allowUpdateUI",value:function(){void 0!==this._app&&this._app.allowUpdateUI()}},{key:"render",value:function(){void 0!==this._app&&this._app.renderScenes()}},{key:"addAnimationTable",value:function(e){void 0!==this._app&&this._app.robotSceneManager().addAnimationTable(e)}},{key:"removeAnimationTable",value:function(e){void 0!==this._app&&this._app.robotSceneManager().removeAnimationTable(e)}}]),e}());function pr(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vr=n(1002);function mr(){mr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new A(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};l(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(R([])));w&&w!==n&&r.call(w,o)&&(b=w);var _=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==(0,vr.Z)(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function M(t,n,r){var i=f;return function(a,o){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=T(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?p:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=p,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,vr.Z)(t)+" is not iterable")}return g.prototype=y,i(_,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(_),l(_,u,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function gr(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function yr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gr(a,r,i,o,s,"next",e)}function s(e){gr(a,r,i,o,s,"throw",e)}o(void 0)}))}}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xr=n(9142);function wr(e,t,n){return(t=(0,xr.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r,Sr=n(2963),kr=n(1120);function Mr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,kr.Z)(e)););return e}function Tr(){return Tr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Mr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Tr.apply(this,arguments)}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}for(var Ar="135",Rr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Lr=0,Or=1,Nr=2,Dr=3,Ir=0,jr=1,Fr=2,zr=3,Br=0,Ur=1,Vr=2,Gr=1,Hr=2,Wr=0,Zr=1,$r=2,qr=3,Xr=4,Yr=5,Kr=100,Jr=101,Qr=102,ei=103,ti=104,ni=200,ri=201,ii=202,ai=203,oi=204,si=205,ui=206,li=207,ci=208,hi=209,fi=210,di=0,pi=1,vi=2,mi=3,gi=4,yi=5,bi=6,xi=7,wi=0,_i=1,Si=2,ki=0,Mi=1,Ti=2,Ei=3,Ci=4,Ai=5,Ri=300,Pi=301,Li=302,Oi=303,Ni=304,Di=306,Ii=307,ji=1e3,Fi=1001,zi=1002,Bi=1003,Ui=1004,Vi=1004,Gi=1005,Hi=1005,Wi=1006,Zi=1007,$i=1007,qi=1008,Xi=1008,Yi=1009,Ki=1010,Ji=1011,Qi=1012,ea=1013,ta=1014,na=1015,ra=1016,ia=1017,aa=1018,oa=1019,sa=1020,ua=1021,la=1022,ca=1023,ha=1024,fa=1025,da=ca,pa=1026,va=1027,ma=1028,ga=1029,ya=1030,ba=1031,xa=1032,wa=1033,_a=33776,Sa=33777,ka=33778,Ma=33779,Ta=35840,Ea=35841,Ca=35842,Aa=35843,Ra=36196,Pa=37492,La=37496,Oa=37808,Na=37809,Da=37810,Ia=37811,ja=37812,Fa=37813,za=37814,Ba=37815,Ua=37816,Va=37817,Ga=37818,Ha=37819,Wa=37820,Za=37821,$a=36492,qa=37840,Xa=37841,Ya=37842,Ka=37843,Ja=37844,Qa=37845,eo=37846,to=37847,no=37848,ro=37849,io=37850,ao=37851,oo=37852,so=37853,uo=2200,lo=2201,co=2202,ho=2300,fo=2301,po=2302,vo=2400,mo=2401,go=2402,yo=2500,bo=2501,xo=0,wo=1,_o=2,So=3e3,ko=3001,Mo=3007,To=3002,Eo=3004,Co=3005,Ao=3006,Ro=3200,Po=3201,Lo=0,Oo=1,No=0,Do=7680,Io=7681,jo=7682,Fo=7683,zo=34055,Bo=34056,Uo=5386,Vo=512,Go=513,Ho=514,Wo=515,Zo=516,$o=517,qo=518,Xo=519,Yo=35044,Ko=35048,Jo=35040,Qo=35045,es=35049,ts=35041,ns=35046,rs=35050,is=35042,as="100",os="300 es",ss=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),us=[],ls=0;ls<256;ls++)us[ls]=(ls<16?"0":"")+ls.toString(16);var cs=1234567,hs=Math.PI/180,fs=180/Math.PI;function ds(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(us[255&e]+us[e>>8&255]+us[e>>16&255]+us[e>>24&255]+"-"+us[255&t]+us[t>>8&255]+"-"+us[t>>16&15|64]+us[t>>24&255]+"-"+us[63&n|128]+us[n>>8&255]+"-"+us[n>>16&255]+us[n>>24&255]+us[255&r]+us[r>>8&255]+us[r>>16&255]+us[r>>24&255]).toUpperCase()}function ps(e,t,n){return Math.max(t,Math.min(n,e))}function vs(e,t){return(e%t+t)%t}function ms(e,t,n){return(1-n)*e+n*t}function gs(e){return 0===(e&e-1)&&0!==e}function ys(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function bs(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var xs=Object.freeze({__proto__:null,DEG2RAD:hs,RAD2DEG:fs,generateUUID:ds,clamp:ps,euclideanModulo:vs,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ms,damp:function(e,t,n,r){return ms(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(vs(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(cs=e%2147483647),((cs=16807*cs%2147483647)-1)/2147483646},degToRad:function(e){return e*hs},radToDeg:function(e){return e*fs},isPowerOfTwo:gs,ceilPowerOfTwo:ys,floorPowerOfTwo:bs,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),f=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*f,s*l);break;case"YZY":e.set(u*f,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*f,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),ws=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,t),this.x=e,this.y=n}return(0,l.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);ws.prototype.isVector2=!0;var _s=function(){function e(){(0,u.Z)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,l.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=a*p+o*g+s*x,i[3]=a*v+o*y+s*w,i[6]=a*m+o*b+s*_,i[1]=u*p+l*g+c*x,i[4]=u*v+l*y+c*w,i[7]=u*m+l*b+c*_,i[2]=h*p+f*g+d*x,i[5]=h*v+f*y+d*w,i[8]=h*m+f*b+d*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,f=u*i-a*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function Ss(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}_s.prototype.isMatrix3=!0;var ks,Ms={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ts(e,t){return new Ms[e](t)}function Es(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Cs(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,i=1103547991^n,a=0;a<e.length;a++)t=e.charCodeAt(a),r=Math.imul(r^t,2654435761),i=Math.imul(i^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&(i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909)))+(r>>>0)}var As=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ks&&(ks=Es("canvas")),ks.width=e.width,ks.height=e.height;var n=ks.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ks}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),Rs=0,Ps=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fi,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fi,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wi,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qi,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ca,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Yi,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:So;return(0,u.Z)(this,n),e=t.call(this),Object.defineProperty((0,c.Z)(e),"id",{value:Rs++}),e.uuid=ds(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=h,e.internalFormat=null,e.type=f,e.offset=new ws(0,0),e.repeat=new ws(1,1),e.center=new ws(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new _s,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=p,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return(0,l.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=ds()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Ls(r[a].image)):i.push(Ls(r[a]))}else i=Ls(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Ri)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ji:e.x=e.x-Math.floor(e.x);break;case Fi:e.x=e.x<0?0:1;break;case zi:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ji:e.y=e.y-Math.floor(e.y);break;case Fi:e.y=e.y<0?0:1;break;case zi:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(ss);function Ls(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?As.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ps.DEFAULT_IMAGE=void 0,Ps.DEFAULT_MAPPING=Ri,Ps.prototype.isTexture=!0;var Os=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return(0,l.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(d-v)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(d+v)<o&&Math.abs(u+f+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(m+1)/2,x=(l+h)/4,w=(c+p)/4,_=(d+v)/4;return g>y&&g>b?g<a?(n=0,r=.707106781,i=.707106781):(r=x/(n=Math.sqrt(g)),i=w/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=x/(r=Math.sqrt(y)),i=_/r):b<a?(n=.707106781,r=.707106781,i=0):(n=w/(i=Math.sqrt(b)),r=_/i),this.set(n,r,i,t),this}var S=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(c-p)/S,this.z=(h-l)/S,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Os.prototype.isVector4=!0;var Ns=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,u.Z)(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new Os(0,0,e,r),i.scissorTest=!1,i.viewport=new Os(0,0,e,r),i.texture=new Ps(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:Wi,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i}return(0,l.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Cr({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(ss);Ns.prototype.isWebGLRenderTarget=!0;var Ds=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n);var o=(a=t.call(this,e,r)).texture;a.texture=[];for(var s=0;s<i;s++)a.texture[s]=o.clone();return a}return(0,l.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Ns);Ds.prototype.isWebGLMultipleRenderTargets=!0;var Is=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,u.Z)(this,n),(i=t.call(this,e,r,a)).samples=4,i.ignoreDepthForMultisampleCopy=void 0===a.ignoreDepth||a.ignoreDepth,i.useRenderToTexture=void 0!==a.useRenderToTexture&&a.useRenderToTexture,i.useRenderbuffer=!1===i.useRenderToTexture,i}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}]),n}(Ns);Is.prototype.isWebGLMultisampleRenderTarget=!0;var js=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return(0,l.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(ps(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){var v=1-o,m=s*h+u*f+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,m*g);v=Math.sin(v*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*v+h*w,u=u*v+f*w,l=l*v+d*w,c=c*v+p*w,v===1-o){var _=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=_,u*=_,l*=_,c*=_}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-o*f,e[t+2]=u*d+l*f+o*h-s*c,e[t+3]=l*d-o*c-s*h-u*f,e}}]),e}();js.prototype.isQuaternion=!0;var Fs=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.Z)(this,t),this.x=e,this.y=n,this.z=r}return(0,l.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bs.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Bs.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return zs.copy(this).projectOnVector(e),this.sub(zs)}},{key:"reflect",value:function(e){return this.sub(zs.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(ps(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:mr().mark((function e(){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);Fs.prototype.isVector3=!0;var zs=new Fs,Bs=new js,Us=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs(-1/0,-1/0,-1/0);(0,u.Z)(this,e),this.min=t,this.max=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Gs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Hs.copy(t.boundingBox),Hs.applyMatrix4(e.matrixWorld),this.union(Hs));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Gs),Gs.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Ks),Js.subVectors(this.max,Ks),Ws.subVectors(e.a,Ks),Zs.subVectors(e.b,Ks),$s.subVectors(e.c,Ks),qs.subVectors(Zs,Ws),Xs.subVectors($s,Zs),Ys.subVectors(Ws,$s);var t=[0,-qs.z,qs.y,0,-Xs.z,Xs.y,0,-Ys.z,Ys.y,qs.z,0,-qs.x,Xs.z,0,-Xs.x,Ys.z,0,-Ys.x,-qs.y,qs.x,0,-Xs.y,Xs.x,0,-Ys.y,Ys.x,0];return!!tu(t,Ws,Zs,$s,Js)&&(!!tu(t=[1,0,0,0,1,0,0,0,1],Ws,Zs,$s,Js)&&(Qs.crossVectors(qs,Xs),tu(t=[Qs.x,Qs.y,Qs.z],Ws,Zs,$s,Js)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Gs.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Gs).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Vs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vs)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Us.prototype.isBox3=!0;var Vs=[new Fs,new Fs,new Fs,new Fs,new Fs,new Fs,new Fs,new Fs],Gs=new Fs,Hs=new Us,Ws=new Fs,Zs=new Fs,$s=new Fs,qs=new Fs,Xs=new Fs,Ys=new Fs,Ks=new Fs,Js=new Fs,Qs=new Fs,eu=new Fs;function tu(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){eu.fromArray(e,a);var s=i.x*Math.abs(eu.x)+i.y*Math.abs(eu.y)+i.z*Math.abs(eu.z),u=t.dot(eu),l=n.dot(eu),c=r.dot(eu);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var nu=new Us,ru=new Fs,iu=new Fs,au=new Fs,ou=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,u.Z)(this,e),this.center=t,this.radius=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):nu.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){au.subVectors(e,this.center);var t=au.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(au.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return iu.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ru.copy(e.center).add(iu)),this.expandByPoint(ru.copy(e.center).sub(iu)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),su=new Fs,uu=new Fs,lu=new Fs,cu=new Fs,hu=new Fs,fu=new Fs,du=new Fs,pu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs(0,0,-1);(0,u.Z)(this,e),this.origin=t,this.direction=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,su)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=su.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(su.copy(this.direction).multiplyScalar(t).add(this.origin),su.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){uu.copy(e).add(t).multiplyScalar(.5),lu.copy(t).sub(e).normalize(),cu.copy(this.origin).sub(uu);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(lu),c=cu.dot(this.direction),h=-cu.dot(lu),f=cu.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-h,s=u*d,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(lu).multiplyScalar(a).add(uu),o}},{key:"intersectSphere",value:function(e,t){su.subVectors(e.center,this.origin);var n=su.dot(this.direction),r=su.dot(su)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,su)}},{key:"intersectTriangle",value:function(e,t,n,r,i){hu.subVectors(t,e),fu.subVectors(n,e),du.crossVectors(hu,fu);var a,o=this.direction.dot(du);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}cu.subVectors(this.origin,e);var s=a*this.direction.dot(fu.crossVectors(cu,fu));if(s<0)return null;var u=a*this.direction.dot(hu.cross(cu));if(u<0)return null;if(s+u>o)return null;var l=-a*cu.dot(du);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),vu=function(){function e(){(0,u.Z)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,l.Z)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/mu.setFromMatrixColumn(e,0).length(),i=1/mu.setFromMatrixColumn(e,1).length(),a=1/mu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,f=a*c,d=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,x=s*c,w=u*l,_=u*c;t[0]=b-_*o,t[4]=-a*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=a*l,t[9]=_-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var S=a*l,k=a*c,M=o*l,T=o*c;t[0]=s*l,t[4]=M*u-k,t[8]=S*u+T,t[1]=s*c,t[5]=T*u+S,t[9]=k*u-M,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var E=a*s,C=a*u,A=o*s,R=o*u;t[0]=s*l,t[4]=R-E*c,t[8]=A*c+C,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=C*c+A,t[10]=E-R*c}else if("XZY"===e.order){var P=a*s,L=a*u,O=o*s,N=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=P*c+N,t[5]=a*l,t[9]=L*c-O,t[2]=O*c-L,t[6]=o*l,t[10]=N*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(yu,e,bu)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return _u.subVectors(e,t),0===_u.lengthSq()&&(_u.z=1),_u.normalize(),xu.crossVectors(n,_u),0===xu.lengthSq()&&(1===Math.abs(n.z)?_u.x+=1e-4:_u.z+=1e-4,_u.normalize(),xu.crossVectors(n,_u)),xu.normalize(),wu.crossVectors(_u,xu),r[0]=xu.x,r[4]=wu.x,r[8]=_u.x,r[1]=xu.y,r[5]=wu.y,r[9]=_u.y,r[2]=xu.z,r[6]=wu.z,r[10]=_u.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],k=r[12],M=r[1],T=r[5],E=r[9],C=r[13],A=r[2],R=r[6],P=r[10],L=r[14],O=r[3],N=r[7],D=r[11],I=r[15];return i[0]=a*w+o*M+s*A+u*O,i[4]=a*_+o*T+s*R+u*N,i[8]=a*S+o*E+s*P+u*D,i[12]=a*k+o*C+s*L+u*I,i[1]=l*w+c*M+h*A+f*O,i[5]=l*_+c*T+h*R+f*N,i[9]=l*S+c*E+h*P+f*D,i[13]=l*k+c*C+h*L+f*I,i[2]=d*w+p*M+v*A+m*O,i[6]=d*_+p*T+v*R+m*N,i[10]=d*S+p*E+v*P+m*D,i[14]=d*k+p*C+v*L+m*I,i[3]=g*w+y*M+b*A+x*O,i[7]=g*_+y*T+b*R+x*N,i[11]=g*S+y*E+b*P+x*D,i[15]=g*k+y*C+b*L+x*I,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*f-i*a*c+n*a*f+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*h*u+p*s*f-o*v*f-c*s*m+o*h*m,y=d*h*u-l*v*u-d*s*f+a*v*f+l*s*m-a*h*m,b=l*p*u-d*c*u+d*o*f-a*p*f-l*o*m+a*c*m,x=d*c*s-l*p*s-d*o*h+a*p*h+l*o*v-a*c*v,w=t*g+n*y+r*b+i*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/w;return e[0]=g*_,e[1]=(p*h*i-c*v*i-p*r*f+n*v*f+c*r*m-n*h*m)*_,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*_,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*f-n*s*f)*_,e[4]=y*_,e[5]=(l*v*i-d*h*i+d*r*f-t*v*f-l*r*m+t*h*m)*_,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*_,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*f+t*s*f)*_,e[8]=b*_,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*m-t*c*m)*_,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*_,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*f-t*o*f)*_,e[12]=x*_,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*v+t*c*v)*_,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*_,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,v=a*c,m=o*c,g=s*u,y=s*l,b=s*c,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+m))*x,r[1]=(f+b)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+m))*w,r[6]=(v+g)*w,r[7]=0,r[8]=(d+y)*_,r[9]=(v-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=mu.set(r[0],r[1],r[2]).length(),a=mu.set(r[4],r[5],r[6]).length(),o=mu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],gu.copy(this);var s=1/i,u=1/a,l=1/o;return gu.elements[0]*=s,gu.elements[1]*=s,gu.elements[2]*=s,gu.elements[4]*=u,gu.elements[5]*=u,gu.elements[6]*=u,gu.elements[8]*=l,gu.elements[9]*=l,gu.elements[10]*=l,t.setFromRotationMatrix(gu),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,h=(n+r)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();vu.prototype.isMatrix4=!0;var mu=new Fs,gu=new vu,yu=new Fs(0,0,0),bu=new Fs(1,1,1),xu=new Fs,wu=new Fs,_u=new Fs,Su=new vu,ku=new js,Mu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;(0,u.Z)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return(0,l.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(ps(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ps(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(ps(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-ps(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ps(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-ps(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Su.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Su,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return ku.setFromEuler(this),this.setFromQuaternion(ku,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new Fs(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();Mu.prototype.isEuler=!0,Mu.DefaultOrder="XYZ",Mu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Tu=function(){function e(){(0,u.Z)(this,e),this.mask=1}return(0,l.Z)(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Eu=0,Cu=new Fs,Au=new js,Ru=new vu,Pu=new Fs,Lu=new Fs,Ou=new Fs,Nu=new js,Du=new Fs(1,0,0),Iu=new Fs(0,1,0),ju=new Fs(0,0,1),Fu={type:"added"},zu={type:"removed"},Bu=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n),e=t.call(this),Object.defineProperty((0,c.Z)(e),"id",{value:Eu++}),e.uuid=ds(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Fs,i=new Mu,a=new js,o=new Fs(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties((0,c.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new vu},normalMatrix:{value:new _s}}),e.matrix=new vu,e.matrixWorld=new vu,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new Tu,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,l.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Au.setFromAxisAngle(e,t),this.quaternion.multiply(Au),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Au.setFromAxisAngle(e,t),this.quaternion.premultiply(Au),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Du,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Iu,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(ju,e)}},{key:"translateOnAxis",value:function(e,t){return Cu.copy(e).applyQuaternion(this.quaternion),this.position.add(Cu.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Du,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Iu,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(ju,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Ru.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Pu.copy(e):Pu.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Lu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ru.lookAt(Lu,Pu,this.up):Ru.lookAt(Pu,Lu,this.up),this.quaternion.setFromRotationMatrix(Ru),r&&(Ru.extractRotation(r.matrixWorld),Au.setFromRotationMatrix(Ru),this.quaternion.premultiply(Au.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Fu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(zu)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(zu)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Ru.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ru.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ru),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,e,Ou),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,Nu,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,f=this.material.length;h<f;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=S(e.geometries),g=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),w=S(e.skeletons),_=S(e.animations);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),_.length>0&&(n.animations=_)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(ss);Bu.DefaultUp=new Fs(0,1,0),Bu.DefaultMatrixAutoUpdate=!0,Bu.prototype.isObject3D=!0;var Uu=new Fs,Vu=new Fs,Gu=new Fs,Hu=new Fs,Wu=new Fs,Zu=new Fs,$u=new Fs,qu=new Fs,Xu=new Fs,Yu=new Fs,Ku=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fs;(0,u.Z)(this,e),this.a=t,this.b=n,this.c=r}return(0,l.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Uu.subVectors(this.c,this.b),Vu.subVectors(this.a,this.b),.5*Uu.cross(Vu).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Wu.subVectors(a,i),Zu.subVectors(o,i),qu.subVectors(e,i);var s=Wu.dot(qu),u=Zu.dot(qu);if(s<=0&&u<=0)return t.copy(i);Xu.subVectors(e,a);var l=Wu.dot(Xu),c=Zu.dot(Xu);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(Wu,n);Yu.subVectors(e,o);var f=Wu.dot(Yu),d=Zu.dot(Yu);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Zu,r);var v=l*d-f*c;if(v<=0&&c-l>=0&&f-d>=0)return $u.subVectors(o,a),r=(c-l)/(c-l+(f-d)),t.copy(a).addScaledVector($u,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(Wu,n).addScaledVector(Zu,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Uu.subVectors(e,t),r.cross(Uu);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Uu.subVectors(r,t),Vu.subVectors(n,t),Gu.subVectors(e,t);var a=Uu.dot(Uu),o=Uu.dot(Vu),s=Uu.dot(Gu),u=Vu.dot(Vu),l=Vu.dot(Gu),c=a*u-o*o;if(0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-o*l)*h,d=(a*l-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Hu),Hu.x>=0&&Hu.y>=0&&Hu.x+Hu.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Hu),s.set(0,0),s.addScaledVector(i,Hu.x),s.addScaledVector(a,Hu.y),s.addScaledVector(o,Hu.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Uu.subVectors(n,t),Vu.subVectors(e,t),Uu.cross(Vu).dot(r)<0}}]),e}(),Ju=0,Qu=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),Object.defineProperty((0,c.Z)(e),"id",{value:Ju++}),e.uuid=ds(),e.name="",e.type="Material",e.fog=!0,e.blending=Zr,e.side=Br,e.vertexColors=!1,e.opacity=1,e.format=ca,e.transparent=!1,e.blendSrc=oi,e.blendDst=si,e.blendEquation=Kr,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=mi,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Xo,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Do,e.stencilZFail=Do,e.stencilZPass=Do,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,l.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Gr;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zr&&(n.blending=this.blending),this.side!==Br&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==ca&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(ss);Qu.prototype.isMaterial=!0;var el={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tl={h:0,s:0,l:0},nl={h:0,s:0,l:0};function rl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function il(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function al(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var ol=function(){function e(t,n,r){return(0,u.Z)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,l.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=vs(e,1),t=ps(t,0,1),n=ps(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=rl(i,r,e+1/3),this.g=rl(i,r,e),this.b=rl(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=el[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=il(e.r),this.g=il(e.g),this.b=il(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=al(e.r),this.g=al(e.g),this.b=al(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(tl),tl.h+=e,tl.s+=t,tl.l+=n,this.setHSL(tl.h,tl.s,tl.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(tl),e.getHSL(nl);var n=ms(tl.h,nl.h,t),r=ms(tl.s,nl.s,t),i=ms(tl.l,nl.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();ol.NAMES=el,ol.prototype.isColor=!0,ol.prototype.r=1,ol.prototype.g=1,ol.prototype.b=1;var sl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new ol(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=wi,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Qu);sl.prototype.isMeshBasicMaterial=!0;var ul=new Fs,ll=new ws,cl=function(){function e(t,n,r){if((0,u.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Yo,this.updateRange={offset:0,count:-1},this.version=0}return(0,l.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ol),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new ws),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Fs),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Os),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)ll.fromBufferAttribute(this,t),ll.applyMatrix3(e),this.setXY(t,ll.x,ll.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)ul.fromBufferAttribute(this,r),ul.applyMatrix3(e),this.setXYZ(r,ul.x,ul.y,ul.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)ul.x=this.getX(t),ul.y=this.getY(t),ul.z=this.getZ(t),ul.applyMatrix4(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)ul.x=this.getX(t),ul.y=this.getY(t),ul.z=this.getZ(t),ul.applyNormalMatrix(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)ul.x=this.getX(t),ul.y=this.getY(t),ul.z=this.getZ(t),ul.transformDirection(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Yo&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();cl.prototype.isBufferAttribute=!0;var hl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int8Array(e),r,i)}return(0,l.Z)(n)}(cl),fl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint8Array(e),r,i)}return(0,l.Z)(n)}(cl),dl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return(0,l.Z)(n)}(cl),pl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int16Array(e),r,i)}return(0,l.Z)(n)}(cl),vl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,l.Z)(n)}(cl),ml=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Int32Array(e),r,i)}return(0,l.Z)(n)}(cl),gl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint32Array(e),r,i)}return(0,l.Z)(n)}(cl),yl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Uint16Array(e),r,i)}return(0,l.Z)(n)}(cl);yl.prototype.isFloat16BufferAttribute=!0;var bl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Float32Array(e),r,i)}return(0,l.Z)(n)}(cl),xl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){return(0,u.Z)(this,n),t.call(this,new Float64Array(e),r,i)}return(0,l.Z)(n)}(cl),wl=0,_l=new vu,Sl=new Bu,kl=new Fs,Ml=new Us,Tl=new Us,El=new Fs,Cl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.call(this),Object.defineProperty((0,c.Z)(e),"id",{value:wl++}),e.uuid=ds(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,l.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Ss(e)>65535?gl:vl)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new _s).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return _l.makeRotationFromQuaternion(e),this.applyMatrix4(_l),this}},{key:"rotateX",value:function(e){return _l.makeRotationX(e),this.applyMatrix4(_l),this}},{key:"rotateY",value:function(e){return _l.makeRotationY(e),this.applyMatrix4(_l),this}},{key:"rotateZ",value:function(e){return _l.makeRotationZ(e),this.applyMatrix4(_l),this}},{key:"translate",value:function(e,t,n){return _l.makeTranslation(e,t,n),this.applyMatrix4(_l),this}},{key:"scale",value:function(e,t,n){return _l.makeScale(e,t,n),this.applyMatrix4(_l),this}},{key:"lookAt",value:function(e){return Sl.lookAt(e),Sl.updateMatrix(),this.applyMatrix4(Sl.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(kl).negate(),this.translate(kl.x,kl.y,kl.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new bl(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Us);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Fs(-1/0,-1/0,-1/0),new Fs(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Ml.setFromBufferAttribute(i),this.morphTargetsRelative?(El.addVectors(this.boundingBox.min,Ml.min),this.boundingBox.expandByPoint(El),El.addVectors(this.boundingBox.max,Ml.max),this.boundingBox.expandByPoint(El)):(this.boundingBox.expandByPoint(Ml.min),this.boundingBox.expandByPoint(Ml.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new ou);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Fs,1/0);if(e){var n=this.boundingSphere.center;if(Ml.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];Tl.setFromBufferAttribute(a),this.morphTargetsRelative?(El.addVectors(Ml.min,Tl.min),Ml.expandByPoint(El),El.addVectors(Ml.max,Tl.max),Ml.expandByPoint(El)):(Ml.expandByPoint(Tl.min),Ml.expandByPoint(Tl.max))}Ml.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)El.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(El));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],f=this.morphTargetsRelative,d=0,p=h.count;d<p;d++)El.fromBufferAttribute(h,d),f&&(kl.fromBufferAttribute(e,d),El.add(kl)),o=Math.max(o,n.distanceToSquared(El));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new cl(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<o;c++)u[c]=new Fs,l[c]=new Fs;var h=new Fs,f=new Fs,d=new Fs,p=new ws,v=new ws,m=new ws,g=new Fs,y=new Fs,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,w=b.length;x<w;++x)for(var _=b[x],S=_.start,k=S,M=S+_.count;k<M;k+=3)I(n[k+0],n[k+1],n[k+2]);for(var T=new Fs,E=new Fs,C=new Fs,A=new Fs,R=0,P=b.length;R<P;++R)for(var L=b[R],O=L.start,N=O,D=O+L.count;N<D;N+=3)j(n[N+0]),j(n[N+1]),j(n[N+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function j(e){C.fromArray(i,3*e),A.copy(C);var t=u[e];T.copy(t),T.sub(C.multiplyScalar(C.dot(t))).normalize(),E.crossVectors(A,t);var n=E.dot(l[e])<0?-1:1;s[4*e]=T.x,s[4*e+1]=T.y,s[4*e+2]=T.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new cl(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Fs,o=new Fs,s=new Fs,u=new Fs,l=new Fs,c=new Fs,h=new Fs,f=new Fs;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)El.fromBufferAttribute(e,t),El.normalize(),e.setXYZ(t,El.x,El.y,El.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new cl(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,f=c.length;h<f;h++){var d=e(c[h],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],f=0,d=c.length;f<d;f++){var p=c[f];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var f=e.groups,d=0,p=f.length;d<p;d++){var v=f[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(ss);Cl.prototype.isBufferGeometry=!0;var Al=new vu,Rl=new pu,Pl=new ou,Ll=new Fs,Ol=new Fs,Nl=new Fs,Dl=new Fs,Il=new Fs,jl=new Fs,Fl=new Fs,zl=new Fs,Bl=new Fs,Ul=new ws,Vl=new ws,Gl=new ws,Hl=new Fs,Wl=new Fs,Zl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cl,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sl;return(0,u.Z)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Pl.copy(r.boundingSphere),Pl.applyMatrix4(a),!1!==e.ray.intersectsSphere(Pl)&&(Al.copy(a).invert(),Rl.copy(e.ray).applyMatrix4(Al),null===r.boundingBox||!1!==Rl.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(o.count,Math.min(m.start+m.count,d.start+d.count));y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),_=o.getX(y+2);(n=$l(this,g,e,Rl,s,u,l,c,h,x,w,_))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var S=Math.max(0,d.start),k=Math.min(o.count,d.start+d.count);S<k;S+=3){var M=o.getX(S),T=o.getX(S+1),E=o.getX(S+2);(n=$l(this,i,e,Rl,s,u,l,c,h,M,T,E))&&(n.faceIndex=Math.floor(S/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,A=f.length;C<A;C++)for(var R=f[C],P=i[R.materialIndex],L=Math.max(R.start,d.start),O=Math.min(s.count,Math.min(R.start+R.count,d.start+d.count));L<O;L+=3){(n=$l(this,P,e,Rl,s,u,l,c,h,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),n.face.materialIndex=R.materialIndex,t.push(n))}else for(var N=Math.max(0,d.start),D=Math.min(s.count,d.start+d.count);N<D;N+=3){(n=$l(this,i,e,Rl,s,u,l,c,h,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),t.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Bu);function $l(e,t,n,r,i,a,o,s,u,l,c,h){Ll.fromBufferAttribute(i,l),Ol.fromBufferAttribute(i,c),Nl.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(a&&f){Fl.set(0,0,0),zl.set(0,0,0),Bl.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=f[d],m=a[d];0!==v&&(Dl.fromBufferAttribute(m,l),Il.fromBufferAttribute(m,c),jl.fromBufferAttribute(m,h),o?(Fl.addScaledVector(Dl,v),zl.addScaledVector(Il,v),Bl.addScaledVector(jl,v)):(Fl.addScaledVector(Dl.sub(Ll),v),zl.addScaledVector(Il.sub(Ol),v),Bl.addScaledVector(jl.sub(Nl),v)))}Ll.add(Fl),Ol.add(zl),Nl.add(Bl)}e.isSkinnedMesh&&(e.boneTransform(l,Ll),e.boneTransform(c,Ol),e.boneTransform(h,Nl));var g=function(e,t,n,r,i,a,o,s){if(null===(t.side===Ur?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==Vr,s)))return null;Wl.copy(s),Wl.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Wl);return u<n.near||u>n.far?null:{distance:u,point:Wl.clone(),object:e}}(e,t,n,r,Ll,Ol,Nl,Hl);if(g){s&&(Ul.fromBufferAttribute(s,l),Vl.fromBufferAttribute(s,c),Gl.fromBufferAttribute(s,h),g.uv=Ku.getUV(Hl,Ll,Ol,Nl,Ul,Vl,Gl,new ws)),u&&(Ul.fromBufferAttribute(u,l),Vl.fromBufferAttribute(u,c),Gl.fromBufferAttribute(u,h),g.uv2=Ku.getUV(Hl,Ll,Ol,Nl,Ul,Vl,Gl,new ws));var y={a:l,b:c,c:h,normal:new Fs,materialIndex:0};Ku.getNormal(Ll,Ol,Nl,y.normal),g.face=y}return g}Zl.prototype.isMesh=!0;var ql=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,u.Z)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var h=(0,c.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var f=[],d=[],p=[],v=[],m=0,g=0;function y(e,t,n,r,i,a,o,s,u,l,c){for(var y=a/u,b=o/l,x=a/2,w=o/2,_=s/2,S=u+1,k=l+1,M=0,T=0,E=new Fs,C=0;C<k;C++)for(var A=C*b-w,R=0;R<S;R++){var P=R*y-x;E[e]=P*r,E[t]=A*i,E[n]=_,d.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,p.push(E.x,E.y,E.z),v.push(R/u),v.push(1-C/l),M+=1}for(var L=0;L<l;L++)for(var O=0;O<u;O++){var N=m+O+S*L,D=m+O+S*(L+1),I=m+(O+1)+S*(L+1),j=m+(O+1)+S*L;f.push(N,D,j),f.push(D,I,j),T+=6}h.addGroup(g,T,c),g+=T,m+=M}return y("z","y","x",-1,-1,a,i,r,l,s,0),y("z","y","x",1,-1,a,i,-r,l,s,1),y("x","z","y",1,1,r,a,i,o,l,2),y("x","z","y",1,-1,r,a,-i,o,l,3),y("x","y","z",1,-1,r,i,a,o,s,4),y("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(f),e.setAttribute("position",new bl(d,3)),e.setAttribute("normal",new bl(p,3)),e.setAttribute("uv",new bl(v,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Cl);function Xl(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Yl(e){for(var t={},n=0;n<e.length;n++){var r=Xl(e[n]);for(var i in r)t[i]=r[i]}return t}var Kl={clone:Xl,merge:Yl},Jl=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Qu);Jl.prototype.isShaderMaterial=!0;var Ql=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new vu,e.projectionMatrix=new vu,e.projectionMatrixInverse=new vu,e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Tr((0,kr.Z)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Bu);Ql.prototype.isCamera=!0;var ec=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,u.Z)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*fs*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*hs*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*fs*Math.atan(Math.tan(.5*hs*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*hs*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ql);ec.prototype.isPerspectiveCamera=!0;var tc=90,nc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;if((0,u.Z)(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),(0,Sr.Z)(a);a.renderTarget=i;var o=new ec(tc,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Fs(1,0,0)),a.add(o);var s=new ec(tc,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Fs(-1,0,0)),a.add(s);var l=new ec(tc,1,e,r);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(new Fs(0,1,0)),a.add(l);var c=new ec(tc,1,e,r);c.layers=a.layers,c.up.set(0,0,-1),c.lookAt(new Fs(0,-1,0)),a.add(c);var h=new ec(tc,1,e,r);h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new Fs(0,0,1)),a.add(h);var f=new ec(tc,1,e,r);return f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new Fs(0,0,-1)),a.add(f),a}return(0,l.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=br(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(h),e.xr.enabled=c}}]),n}(Bu),rc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s,l,c,h,f){var d;return(0,u.Z)(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Pi,(d=t.call(this,e,r,i,a,o,s,l,c,h,f)).flipY=!1,d}return(0,l.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Ps);rc.prototype.isCubeTexture=!0;var ic=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),a=t.call(this,e,e,r),r=r||{},a.texture=new rc(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.isRenderTargetTexture=!0,a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:Wi,a.texture._needsFlipEnvMap=!1,a}return(0,l.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=ca,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new ql(5,5,5),o=new Jl({name:"CubemapFromEquirect",uniforms:Xl(n),vertexShader:r,fragmentShader:i,side:Ur,blending:Wr});o.uniforms.tEquirect.value=t;var s=new Zl(a,o),u=t.minFilter;return t.minFilter===qi&&(t.minFilter=Wi),new nc(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Ns);ic.prototype.isWebGLCubeRenderTarget=!0;var ac=new Fs,oc=new Fs,sc=new _s,uc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,e),this.normal=t,this.constant=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=ac.subVectors(n,t).cross(oc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(ac),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||sc.getNormalMatrix(e),r=this.coplanarPoint(ac).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();uc.prototype.isPlane=!0;var lc=new ou,cc=new Fs,hc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uc,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uc,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uc,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new uc,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new uc;(0,u.Z)(this,e),this.planes=[t,n,r,i,a,o]}return(0,l.Z)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-v).normalize(),t[1].setComponents(o+r,c+s,p+h,y+v).normalize(),t[2].setComponents(o+i,c+u,p+f,y+m).normalize(),t[3].setComponents(o-i,c-u,p-f,y-m).normalize(),t[4].setComponents(o-a,c-l,p-d,y-g).normalize(),t[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),lc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lc)}},{key:"intersectsSprite",value:function(e){return lc.center.set(0,0,0),lc.radius=.7071067811865476,lc.applyMatrix4(e.matrixWorld),this.intersectsSphere(lc)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(cc.x=r.normal.x>0?e.max.x:e.min.x,cc.y=r.normal.y>0?e.max.y:e.min.y,cc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(cc)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function fc(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function dc(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var pc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,l=i/2,c=Math.floor(a),h=Math.floor(o),f=c+1,d=h+1,p=r/c,v=i/h,m=[],g=[],y=[],b=[],x=0;x<d;x++)for(var w=x*v-l,_=0;_<f;_++){var S=_*p-s;g.push(S,-w,0),y.push(0,0,1),b.push(_/c),b.push(1-x/h)}for(var k=0;k<h;k++)for(var M=0;M<c;M++){var T=M+f*k,E=M+f*(k+1),C=M+1+f*(k+1),A=M+1+f*k;m.push(T,E,A),m.push(E,C,A)}return e.setIndex(m),e.setAttribute("position",new bl(g,3)),e.setAttribute("normal",new bl(y,3)),e.setAttribute("uv",new bl(b,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Cl),vc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},mc={common:{diffuse:{value:new ol(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _s},uv2Transform:{value:new _s},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ws(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ol(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ol(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _s}},sprite:{diffuse:{value:new ol(16777215)},opacity:{value:1},center:{value:new ws(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _s}}},gc={basic:{uniforms:Yl([mc.common,mc.specularmap,mc.envmap,mc.aomap,mc.lightmap,mc.fog]),vertexShader:vc.meshbasic_vert,fragmentShader:vc.meshbasic_frag},lambert:{uniforms:Yl([mc.common,mc.specularmap,mc.envmap,mc.aomap,mc.lightmap,mc.emissivemap,mc.fog,mc.lights,{emissive:{value:new ol(0)}}]),vertexShader:vc.meshlambert_vert,fragmentShader:vc.meshlambert_frag},phong:{uniforms:Yl([mc.common,mc.specularmap,mc.envmap,mc.aomap,mc.lightmap,mc.emissivemap,mc.bumpmap,mc.normalmap,mc.displacementmap,mc.fog,mc.lights,{emissive:{value:new ol(0)},specular:{value:new ol(1118481)},shininess:{value:30}}]),vertexShader:vc.meshphong_vert,fragmentShader:vc.meshphong_frag},standard:{uniforms:Yl([mc.common,mc.envmap,mc.aomap,mc.lightmap,mc.emissivemap,mc.bumpmap,mc.normalmap,mc.displacementmap,mc.roughnessmap,mc.metalnessmap,mc.fog,mc.lights,{emissive:{value:new ol(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vc.meshphysical_vert,fragmentShader:vc.meshphysical_frag},toon:{uniforms:Yl([mc.common,mc.aomap,mc.lightmap,mc.emissivemap,mc.bumpmap,mc.normalmap,mc.displacementmap,mc.gradientmap,mc.fog,mc.lights,{emissive:{value:new ol(0)}}]),vertexShader:vc.meshtoon_vert,fragmentShader:vc.meshtoon_frag},matcap:{uniforms:Yl([mc.common,mc.bumpmap,mc.normalmap,mc.displacementmap,mc.fog,{matcap:{value:null}}]),vertexShader:vc.meshmatcap_vert,fragmentShader:vc.meshmatcap_frag},points:{uniforms:Yl([mc.points,mc.fog]),vertexShader:vc.points_vert,fragmentShader:vc.points_frag},dashed:{uniforms:Yl([mc.common,mc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vc.linedashed_vert,fragmentShader:vc.linedashed_frag},depth:{uniforms:Yl([mc.common,mc.displacementmap]),vertexShader:vc.depth_vert,fragmentShader:vc.depth_frag},normal:{uniforms:Yl([mc.common,mc.bumpmap,mc.normalmap,mc.displacementmap,{opacity:{value:1}}]),vertexShader:vc.meshnormal_vert,fragmentShader:vc.meshnormal_frag},sprite:{uniforms:Yl([mc.sprite,mc.fog]),vertexShader:vc.sprite_vert,fragmentShader:vc.sprite_frag},background:{uniforms:{uvTransform:{value:new _s},t2D:{value:null}},vertexShader:vc.background_vert,fragmentShader:vc.background_frag},cube:{uniforms:Yl([mc.envmap,{opacity:{value:1}}]),vertexShader:vc.cube_vert,fragmentShader:vc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vc.equirect_vert,fragmentShader:vc.equirect_frag},distanceRGBA:{uniforms:Yl([mc.common,mc.displacementmap,{referencePosition:{value:new Fs},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vc.distanceRGBA_vert,fragmentShader:vc.distanceRGBA_frag},shadow:{uniforms:Yl([mc.lights,mc.fog,{color:{value:new ol(0)},opacity:{value:1}}]),vertexShader:vc.shadow_vert,fragmentShader:vc.shadow_frag}};function yc(e,t,n,r,i){var a,o,s=new ol(0),u=0,l=null,c=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),f(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(s,u=e)},render:function(n,i){var d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?f(s,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Di)?(void 0===o&&((o=new Zl(new ql(1,1,1),new Jl({name:"BackgroundCubeMaterial",uniforms:Xl(gc.cube.uniforms),vertexShader:gc.cube.vertexShader,fragmentShader:gc.cube.fragmentShader,side:Ur,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l===p&&c===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new Zl(new pc(2,2),new Jl({name:"BackgroundMaterial",uniforms:Xl(gc.background.uniforms),vertexShader:gc.background.vertexShader,fragmentShader:gc.background.fragmentShader,side:Br,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function bc(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){b(),l!==u&&c((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){var x=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(y,h,u);l!==w&&c((l=w).object),x=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b),x&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{var _=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===_||(l.geometry=y.id,l.program=h.id,l.wireframe=_,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(!function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var f=l[h];if(f.location>=0){var y=u[h];if(void 0===y&&("instanceMatrix"===h&&i.instanceMatrix&&(y=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(y=i.instanceColor)),void 0!==y){var b=y.normalized,x=y.itemSize,w=n.get(y);if(void 0===w)continue;var _=w.buffer,S=w.type,k=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var M=y.data,T=M.stride,E=y.offset;if(M&&M.isInstancedInterleavedBuffer){for(var C=0;C<f.locationSize;C++)v(f.location+C,M.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var A=0;A<f.locationSize;A++)p(f.location+A);e.bindBuffer(34962,_);for(var R=0;R<f.locationSize;R++)g(f.location+R,x/f.locationSize,S,b,T*k,(E+x/f.locationSize*R)*k)}else{if(y.isInstancedBufferAttribute){for(var P=0;P<f.locationSize;P++)v(f.location+P,y.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var L=0;L<f.locationSize;L++)p(f.location+L);e.bindBuffer(34962,_);for(var O=0;O<f.locationSize;O++)g(f.location+O,x/f.locationSize,S,b,x*k,x/f.locationSize*O*k)}}else if(void 0!==c){var N=c[h];if(void 0!==N)switch(N.length){case 2:e.vertexAttrib2fv(f.location,N);break;case 3:e.vertexAttrib3fv(f.location,N);break;case 4:e.vertexAttrib4fv(f.location,N);break;default:e.vertexAttrib1fv(f.location,N)}}}}m()}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function xc(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function wc(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function _c(e){var t=this,n=null,r=0,i=!1,a=!1,o=new uc,s=new _s,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||a&&!d)a?c(null):l();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function Sc(e){var t=new WeakMap;function n(e,t){return t===Oi?e.mapping=Pi:t===Ni&&(e.mapping=Li),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===Oi||a===Ni){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new ic(o.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}gc.physical={uniforms:Yl([gc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ws(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ol(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ws},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ol(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ol(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vc.meshphysical_vert,fragmentShader:vc.meshphysical_frag};var kc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,u.Z)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ql);kc.prototype.isOrthographicCamera=!0;var Mc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,l.Z)(n)}(Jl);Mc.prototype.isRawShaderMaterial=!0;var Tc=Math.pow(2,8),Ec=[.125,.215,.35,.446,.526,.582],Cc=5+Ec.length,Ac=20,Rc=(wr(_r={},So,0),wr(_r,ko,1),wr(_r,To,2),wr(_r,Eo,3),wr(_r,Co,4),wr(_r,Ao,5),wr(_r,Mo,6),_r),Pc=new kc,Lc=Gc(),Oc=Lc._lodPlanes,Nc=Lc._sizeLods,Dc=Lc._sigmas,Ic=new ol,jc=null,Fc=(1+Math.sqrt(5))/2,zc=1/Fc,Bc=[new Fs(1,1,1),new Fs(-1,1,1),new Fs(1,1,-1),new Fs(-1,1,-1),new Fs(0,Fc,zc),new Fs(0,Fc,-zc),new Fs(zc,0,Fc),new Fs(-zc,0,Fc),new Fs(Fc,zc,0),new Fs(-Fc,zc,0)],Uc=function(){function e(t){(0,u.Z)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(e),n=new Fs(0,1,0);return new Mc({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Rc[So]},outputEncoding:{value:Rc[So]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Wr,depthTest:!1,depthWrite:!1})}(Ac),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,l.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;jc=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=$c(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Zc(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<Oc.length;e++)Oc[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(jc),e.scissorTest=!1,Wc(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){jc=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:Bi,minFilter:Bi,generateMipmaps:!1,type:Yi,format:da,encoding:Vc(e)?e.encoding:To,depthBuffer:!1},n=Hc(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Hc(t),n}},{key:"_compileMaterial",value:function(e){var t=new Zl(Oc[0],e);this._renderer.compile(t,Pc)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new ec(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.outputEncoding,c=s.toneMapping;s.getClearColor(Ic),s.toneMapping=ki,s.outputEncoding=So,s.autoClear=!1;var h=new sl({name:"PMREM.Background",side:Ur,depthWrite:!1,depthTest:!1}),f=new Zl(new ql,h),d=!1,p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(Ic),d=!0);for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),Wc(r,m*Tc,v>2?Tc:0,Tc,Tc),s.setRenderTarget(r),d&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=c,s.outputEncoding=l,s.autoClear=u,e.background=p}},{key:"_setEncoding",value:function(e,t){e.value=Rc[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===Pi||e.mapping===Li;r?null==this._cubemapShader&&(this._cubemapShader=$c()):null==this._equirectShader&&(this._equirectShader=Zc());var i=r?this._cubemapShader:this._equirectShader,a=new Zl(Oc[0],i),o=i.uniforms;o.envMap.value=e,r||o.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(o.inputEncoding,e),this._setEncoding(o.outputEncoding,t.texture),Wc(t,0,0,3*Tc,2*Tc),n.setRenderTarget(t),n.render(a,Pc)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<Cc;r++){var i=Math.sqrt(Dc[r]*Dc[r]-Dc[r-1]*Dc[r-1]),a=Bc[(r-1)%Bc.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Zl(Oc[r],u),c=u.uniforms,h=Nc[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):Ac;p>Ac&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Ac));for(var v=[],m=0,g=0;g<Ac;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0==g?m+=b:g<p&&(m+=2*b)}for(var x=0;x<v.length;x++)v[x]=v[x]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=f,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);var w=Nc[r];Wc(t,3*Math.max(0,Tc-2*w),(0===r?0:2*Tc)+2*w*(r>4?r-8+4:0),3*w,2*w),s.setRenderTarget(t),s.render(l,Pc)}}]),e}();function Vc(e){return void 0!==e&&e.type===Yi&&(e.encoding===So||e.encoding===ko||e.encoding===Mo)}function Gc(){for(var e=[],t=[],n=[],r=8,i=0;i<Cc;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>4?o=Ec[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1,g=[v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0];h.set(g,18*p),f.set(c,12*p);var y=[p,p,p,p,p,p];d.set(y,6*p)}var b=new Cl;b.setAttribute("position",new cl(h,3)),b.setAttribute("uv",new cl(f,2)),b.setAttribute("faceIndex",new cl(d,1)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Hc(e){var t=new Ns(3*Tc,3*Tc,e);return t.texture.mapping=Di,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Wc(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Zc(){var e=new ws(1,1);return new Mc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Rc[So]},outputEncoding:{value:Rc[So]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Wr,depthTest:!1,depthWrite:!1})}function $c(){return new Mc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Rc[So]},outputEncoding:{value:Rc[So]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:Wr,depthTest:!1,depthWrite:!1})}function qc(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping,o=a===Oi||a===Ni,s=a===Pi||a===Li;if(o||s){if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(u)){var l=e.getRenderTarget();null===n&&(n=new Uc(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),e.setRenderTarget(l),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Xc(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Yc(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var b=new(Ss(n)>65535?gl:vl)(n,1);b.version=o;var x=a.get(e);x&&t.remove(x),a.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Kc(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*o,l),n.update(u,i,l)}}}function Jc(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var Qc=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=Bi,e.minFilter=Bi,e.wrapR=Fi,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,l.Z)(n)}(Ps);function eh(e,t){return e[0]-t[0]}function th(e,t){return Math.abs(t[1])-Math.abs(e[1])}function nh(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function rh(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new Fs,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,h){var f=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position.length,p=a.get(l);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var v=void 0!==l.morphAttributes.normal,m=l.morphAttributes.position,g=l.morphAttributes.normal||[],y=!0===v?2:1,b=l.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var w=new Float32Array(b*x*4*d),_=new Qc(w,b,x,d);_.format=ca,_.type=na;for(var S=4*y,k=0;k<d;k++)for(var M=m[k],T=g[k],E=b*x*4*k,C=0;C<M.count;C++){o.fromBufferAttribute(M,C),!0===M.normalized&&nh(o,M);var A=C*S;w[E+A+0]=o.x,w[E+A+1]=o.y,w[E+A+2]=o.z,w[E+A+3]=0,!0===v&&(o.fromBufferAttribute(T,C),!0===T.normalized&&nh(o,T),w[E+A+4]=o.x,w[E+A+5]=o.y,w[E+A+6]=o.z,w[E+A+7]=0)}p={count:d,texture:_,size:new ws(b,x)},a.set(l,p)}for(var R=0,P=0;P<f.length;P++)R+=f[P];var L=l.morphTargetsRelative?1:1-R;h.getUniforms().setValue(e,"morphTargetBaseInfluence",L),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var O=void 0===f?0:f.length,N=r[l.id];if(void 0===N||N.length!==O){N=[];for(var D=0;D<O;D++)N[D]=[D,0];r[l.id]=N}for(var I=0;I<O;I++){var j=N[I];j[0]=I,j[1]=f[I]}N.sort(th);for(var F=0;F<8;F++)F<O&&N[F][1]?(s[F][0]=N[F][0],s[F][1]=N[F][1]):(s[F][0]=Number.MAX_SAFE_INTEGER,s[F][1]=0);s.sort(eh);for(var z=l.morphAttributes.position,B=l.morphAttributes.normal,U=0,V=0;V<8;V++){var G=s[V],H=G[0],W=G[1];H!==Number.MAX_SAFE_INTEGER&&W?(z&&l.getAttribute("morphTarget"+V)!==z[H]&&l.setAttribute("morphTarget"+V,z[H]),B&&l.getAttribute("morphNormal"+V)!==B[H]&&l.setAttribute("morphNormal"+V,B[H]),i[V]=W,U+=W):(z&&!0===l.hasAttribute("morphTarget"+V)&&l.deleteAttribute("morphTarget"+V),B&&!0===l.hasAttribute("morphNormal"+V)&&l.deleteAttribute("morphNormal"+V),i[V]=0)}var Z=l.morphTargetsRelative?1:1-U;h.getUniforms().setValue(e,"morphTargetBaseInfluence",Z),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function ih(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==o&&(t.update(u),i.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}Qc.prototype.isDataTexture2DArray=!0;var ah=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=Bi,e.minFilter=Bi,e.wrapR=Fi,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,l.Z)(n)}(Ps);ah.prototype.isDataTexture3D=!0;var oh=new Ps,sh=new Qc,uh=new ah,lh=new rc,ch=[],hh=[],fh=new Float32Array(16),dh=new Float32Array(9),ph=new Float32Array(4);function vh(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=ch[i];if(void 0===a&&(a=new Float32Array(i),ch[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function mh(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function gh(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function yh(e,t){var n=hh[t];void 0===n&&(n=new Int32Array(t),hh[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function bh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function xh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mh(n,t))return;e.uniform2fv(this.addr,t),gh(n,t)}}function wh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(mh(n,t))return;e.uniform3fv(this.addr,t),gh(n,t)}}function _h(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mh(n,t))return;e.uniform4fv(this.addr,t),gh(n,t)}}function Sh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mh(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),gh(n,t)}else{if(mh(n,r))return;ph.set(r),e.uniformMatrix2fv(this.addr,!1,ph),gh(n,r)}}function kh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mh(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),gh(n,t)}else{if(mh(n,r))return;dh.set(r),e.uniformMatrix3fv(this.addr,!1,dh),gh(n,r)}}function Mh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mh(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),gh(n,t)}else{if(mh(n,r))return;fh.set(r),e.uniformMatrix4fv(this.addr,!1,fh),gh(n,r)}}function Th(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Eh(e,t){var n=this.cache;mh(n,t)||(e.uniform2iv(this.addr,t),gh(n,t))}function Ch(e,t){var n=this.cache;mh(n,t)||(e.uniform3iv(this.addr,t),gh(n,t))}function Ah(e,t){var n=this.cache;mh(n,t)||(e.uniform4iv(this.addr,t),gh(n,t))}function Rh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ph(e,t){var n=this.cache;mh(n,t)||(e.uniform2uiv(this.addr,t),gh(n,t))}function Lh(e,t){var n=this.cache;mh(n,t)||(e.uniform3uiv(this.addr,t),gh(n,t))}function Oh(e,t){var n=this.cache;mh(n,t)||(e.uniform4uiv(this.addr,t),gh(n,t))}function Nh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||oh,i)}function Dh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||uh,i)}function Ih(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||lh,i)}function jh(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||sh,i)}function Fh(e,t){e.uniform1fv(this.addr,t)}function zh(e,t){var n=vh(t,this.size,2);e.uniform2fv(this.addr,n)}function Bh(e,t){var n=vh(t,this.size,3);e.uniform3fv(this.addr,n)}function Uh(e,t){var n=vh(t,this.size,4);e.uniform4fv(this.addr,n)}function Vh(e,t){var n=vh(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Gh(e,t){var n=vh(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Hh(e,t){var n=vh(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Wh(e,t){e.uniform1iv(this.addr,t)}function Zh(e,t){e.uniform2iv(this.addr,t)}function $h(e,t){e.uniform3iv(this.addr,t)}function qh(e,t){e.uniform4iv(this.addr,t)}function Xh(e,t){e.uniform1uiv(this.addr,t)}function Yh(e,t){e.uniform2uiv(this.addr,t)}function Kh(e,t){e.uniform3uiv(this.addr,t)}function Jh(e,t){e.uniform4uiv(this.addr,t)}function Qh(e,t,n){var r=t.length,i=yh(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||oh,i[a])}function ef(e,t,n){var r=t.length,i=yh(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture3D(t[a]||uh,i[a])}function tf(e,t,n){var r=t.length,i=yh(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||lh,i[a])}function nf(e,t,n){var r=t.length,i=yh(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2DArray(t[a]||sh,i[a])}function rf(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return bh;case 35664:return xh;case 35665:return wh;case 35666:return _h;case 35674:return Sh;case 35675:return kh;case 35676:return Mh;case 5124:case 35670:return Th;case 35667:case 35671:return Eh;case 35668:case 35672:return Ch;case 35669:case 35673:return Ah;case 5125:return Rh;case 36294:return Ph;case 36295:return Lh;case 36296:return Oh;case 35678:case 36198:case 36298:case 36306:case 35682:return Nh;case 35679:case 36299:case 36307:return Dh;case 35680:case 36300:case 36308:case 36293:return Ih;case 36289:case 36303:case 36311:case 36292:return jh}}(t.type)}function af(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Fh;case 35664:return zh;case 35665:return Bh;case 35666:return Uh;case 35674:return Vh;case 35675:return Gh;case 35676:return Hh;case 5124:case 35670:return Wh;case 35667:case 35671:return Zh;case 35668:case 35672:return $h;case 35669:case 35673:return qh;case 5125:return Xh;case 36294:return Yh;case 36295:return Kh;case 36296:return Jh;case 35678:case 36198:case 36298:case 36306:case 35682:return Qh;case 35679:case 36299:case 36307:return ef;case 35680:case 36300:case 36308:case 36293:return tf;case 36289:case 36303:case 36311:case 36292:return nf}}(t.type)}function of(e){this.id=e,this.seq=[],this.map={}}af.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),gh(t,e)},of.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var sf=/(\w+)(\])?(\[|\.)?/g;function uf(e,t){e.seq.push(t),e.map[t.id]=t}function lf(e,t,n){var r=e.name,i=r.length;for(sf.lastIndex=0;;){var a=sf.exec(r),o=sf.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){uf(n,void 0===l?new rf(s,e,t):new af(s,e,t));break}var c=n.map[s];void 0===c&&uf(n,c=new of(s)),n=c}}function cf(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);lf(i,e.getUniformLocation(t,i.name),this)}}function hf(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}cf.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},cf.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},cf.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},cf.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var ff=0;function df(e){switch(e){case So:return["Linear","( value )"];case ko:return["sRGB","( value )"];case To:return["RGBE","( value )"];case Eo:return["RGBM","( value, 7.0 )"];case Co:return["RGBM","( value, 16.0 )"];case Ao:return["RGBD","( value, 256.0 )"];case Mo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function pf(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function vf(e,t){var n=df(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function mf(e,t){var n=df(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function gf(e,t){var n;switch(t){case Mi:n="Linear";break;case Ti:n="Reinhard";break;case Ei:n="OptimizedCineon";break;case Ci:n="ACESFilmic";break;case Ai:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function yf(e){return""!==e}function bf(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function xf(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var wf=/^[ \t]*#include +<([\w\d./]+)>/gm;function _f(e){return e.replace(wf,Sf)}function Sf(e,t){var n=vc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return _f(n)}var kf=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Mf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tf(e){return e.replace(Mf,Cf).replace(kf,Ef)}function Ef(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Cf(e,t,n,r)}function Cf(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Af(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Rf(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===jr?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Fr?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===zr&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Pi:case Li:t="ENVMAP_TYPE_CUBE";break;case Di:case Ii:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Li:case Ii:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case wi:t="ENVMAP_BLENDING_MULTIPLY";break;case _i:t="ENVMAP_BLENDING_MIX";break;case Si:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yf).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(yf).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(yf).join("\n")).length>0&&(a+="\n")):(i=[Af(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yf).join("\n"),a=[v,Af(n),"#define SHADER_NAME "+n.shaderName,m,"#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ki?"#define TONE_MAPPING":"",n.toneMapping!==ki?vc.tonemapping_pars_fragment:"",n.toneMapping!==ki?gf("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===la?"#define OPAQUE":"",vc.encodings_pars_fragment,n.map?vf("mapTexelToLinear",n.mapEncoding):"",n.matcap?vf("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?vf("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?vf("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?vf("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?vf("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?vf("lightMapTexelToLinear",n.lightMapEncoding):"",mf("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(yf).join("\n")),u=xf(u=bf(u=_f(u),n),n),l=xf(l=bf(l=_f(l),n),n),u=Tf(u),l=Tf(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===os?"":"out highp vec4 pc_fragColor;",n.glslVersion===os?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var b,x,w=y+a+l,_=hf(o,35633,y+i+u),S=hf(o,35632,w);if(o.attachShader(g,_),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var k=o.getProgramInfoLog(g).trim(),M=o.getShaderInfoLog(_).trim(),T=o.getShaderInfoLog(S).trim(),E=!0,C=!0;if(!1===o.getProgramParameter(g,35714)){E=!1;var A=pf(o,_,"vertex"),R=pf(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+k+"\n"+A+"\n"+R)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):""!==M&&""!==T||(C=!1);C&&(this.diagnostics={runnable:E,programLog:k,vertexShader:{log:M,prefix:i},fragmentShader:{log:T,prefix:a}})}return o.deleteShader(_),o.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new cf(o,g)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=ff++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=_,this.fragmentShader=S,this}function Pf(e,t,n,r,i,a,o){var s=[],u=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=So,t}return{getParameters:function(a,s,v,g,y){var b,x,w=g.fog,_=a.isMeshStandardMaterial?g.environment:null,S=(a.isMeshStandardMaterial?n:t).get(a.envMap||_),k=p[a.type],M=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=h,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(y):0;if(null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."),k){var T=gc[k];b=T.vertexShader,x=T.fragmentShader}else b=a.vertexShader,x=a.fragmentShader;var E=e.getRenderTarget(),C=a.alphaTest>0,A=a.clearcoat>0;return{isWebGL2:u,shaderID:k,shaderName:a.type,vertexShader:b,fragmentShader:x,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null!==E?m(E.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:m(S),envMapCubeUV:!!S&&(S.mapping===Di||S.mapping===Ii),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Oo,tangentSpaceNormalMap:a.normalMapType===Lo,clearcoat:A,clearcoatMap:A&&!!a.clearcoatMap,clearcoatRoughnessMap:A&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:A&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,specularColorMapEncoding:m(a.specularColorMap),alphaMap:!!a.alphaMap,alphaTest:C,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenColorMapEncoding:m(a.sheenColorMap),sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!w,useFog:a.fog,fogExp2:w&&w.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===y.isSkinnedMesh&&M>0,maxBones:M,useVertexTexture:c,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:ki,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Vr,flipSided:a.side===Ur,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(Cs(t.fragmentShader)),n.push(Cs(t.vertexShader))),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=gc[n];t=Kl.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=s.length;i<o;i++){var u=s[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new Rf(e,n,t,a),s.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Lf(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Of(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Nf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Df(e){var t=[],n=0,r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,u,l){var c=t[n],h=e.get(a);return void 0===c?(c={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=a,c.program=h.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.push(c):!0===n.transparent?a.push(c):r.push(c)},unshift:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?a.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Of),i.length>1&&i.sort(t||Nf),a.length>1&&a.sort(t||Nf)}}}function If(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new Df(e),t.set(n,[i])):r>=t.get(n).length?(i=new Df(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function jf(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Fs,color:new ol};break;case"SpotLight":n={position:new Fs,direction:new Fs,color:new ol,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fs,color:new ol,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fs,skyColor:new ol,groundColor:new ol};break;case"RectAreaLight":n={color:new ol,position:new Fs,halfWidth:new Fs,halfHeight:new Fs}}return e[t.id]=n,n}}}var Ff=0;function zf(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Bf(e,t){for(var n=new jf,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ws};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ws,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new Fs);var o=new Fs,s=new vu,u=new vu;return{setup:function(a,o){for(var s=0,u=0,l=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,v=0,m=0,g=0,y=0;a.sort(zf);for(var b=!0!==o?Math.PI:1,x=0,w=a.length;x<w;x++){var _=a[x],S=_.color,k=_.intensity,M=_.distance,T=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)s+=S.r*k*b,u+=S.g*k*b,l+=S.b*k*b;else if(_.isLightProbe)for(var E=0;E<9;E++)i.probe[E].addScaledVector(_.sh.coefficients[E],k);else if(_.isDirectionalLight){var C=n.get(_);if(C.color.copy(_.color).multiplyScalar(_.intensity*b),_.castShadow){var A=_.shadow,R=r.get(_);R.shadowBias=A.bias,R.shadowNormalBias=A.normalBias,R.shadowRadius=A.radius,R.shadowMapSize=A.mapSize,i.directionalShadow[h]=R,i.directionalShadowMap[h]=T,i.directionalShadowMatrix[h]=_.shadow.matrix,m++}i.directional[h]=C,h++}else if(_.isSpotLight){var P=n.get(_);if(P.position.setFromMatrixPosition(_.matrixWorld),P.color.copy(S).multiplyScalar(k*b),P.distance=M,P.coneCos=Math.cos(_.angle),P.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),P.decay=_.decay,_.castShadow){var L=_.shadow,O=r.get(_);O.shadowBias=L.bias,O.shadowNormalBias=L.normalBias,O.shadowRadius=L.radius,O.shadowMapSize=L.mapSize,i.spotShadow[d]=O,i.spotShadowMap[d]=T,i.spotShadowMatrix[d]=_.shadow.matrix,y++}i.spot[d]=P,d++}else if(_.isRectAreaLight){var N=n.get(_);N.color.copy(S).multiplyScalar(k),N.halfWidth.set(.5*_.width,0,0),N.halfHeight.set(0,.5*_.height,0),i.rectArea[p]=N,p++}else if(_.isPointLight){var D=n.get(_);if(D.color.copy(_.color).multiplyScalar(_.intensity*b),D.distance=_.distance,D.decay=_.decay,_.castShadow){var I=_.shadow,j=r.get(_);j.shadowBias=I.bias,j.shadowNormalBias=I.normalBias,j.shadowRadius=I.radius,j.shadowMapSize=I.mapSize,j.shadowCameraNear=I.camera.near,j.shadowCameraFar=I.camera.far,i.pointShadow[f]=j,i.pointShadowMap[f]=T,i.pointShadowMatrix[f]=_.shadow.matrix,g++}i.point[f]=D,f++}else if(_.isHemisphereLight){var F=n.get(_);F.skyColor.copy(_.color).multiplyScalar(k*b),F.groundColor.copy(_.groundColor).multiplyScalar(k*b),i.hemi[v]=F,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=mc.LTC_FLOAT_1,i.rectAreaLTC2=mc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=mc.LTC_HALF_1,i.rectAreaLTC2=mc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=l;var z=i.hash;z.directionalLength===h&&z.pointLength===f&&z.spotLength===d&&z.rectAreaLength===p&&z.hemiLength===v&&z.numDirectionalShadows===m&&z.numPointShadows===g&&z.numSpotShadows===y||(i.directional.length=h,i.spot.length=d,i.rectArea.length=p,i.point.length=f,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,z.directionalLength=h,z.pointLength=f,z.spotLength=d,z.rectAreaLength=p,z.hemiLength=v,z.numDirectionalShadows=m,z.numPointShadows=g,z.numSpotShadows=y,i.version=Ff++)},setupView:function(e,t){for(var n=0,r=0,a=0,l=0,c=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(h),a++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),u.identity(),s.copy(p.matrixWorld),s.premultiply(h),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=i.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),b.direction.normalize(),c++}}},state:i}}function Uf(e,t){var n=new Bf(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Vf(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Uf(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new Uf(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var Gf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=Ro,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Qu);Gf.prototype.isMeshDepthMaterial=!0;var Hf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new Fs,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Qu);Hf.prototype.isMeshDistanceMaterial=!0;function Wf(e,t,n){var r=new hc,i=new ws,a=new ws,o=new Os,s=new Gf({depthPacking:Po}),u=new Hf,l={},c=n.maxTextureSize,h={0:Ur,1:Br,2:Vr},f=new Jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ws},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new Cl;p.setAttribute("position",new cl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Zl(p,f),m=this;function g(n,r){var i=t.update(v);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,a,o,c){var f=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(f=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var p=f.uuid,v=r.uuid,m=l[p];void 0===m&&(m={},l[p]=m);var g=m[v];void 0===g&&(g=f.clone(),m[v]=g),f=g}return f.visible=r.visible,f.wireframe=r.wireframe,f.side=c===zr?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],f.alphaMap=r.alphaMap,f.alphaTest=r.alphaTest,f.clipShadows=r.clipShadows,f.clippingPlanes=r.clippingPlanes,f.clipIntersection=r.clipIntersection,f.displacementMap=r.displacementMap,f.displacementScale=r.displacementScale,f.displacementBias=r.displacementBias,f.wireframeLinewidth=r.wireframeLinewidth,f.linewidth=r.linewidth,!0===i.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=a,f.farDistance=o),f}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===zr)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(l.visible){var m=y(n,0,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,x=0,w=g.length;x<w;x++)b(g[x],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jr,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(Wr),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/x.x),i.x=a.x*x.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/x.y),i.y=a.y*x.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&this.type===zr){var w={minFilter:Wi,magFilter:Wi,format:ca};y.map=new Ns(i.x,i.y,w),y.map.texture.name=v.name+".shadowMap",y.mapPass=new Ns(i.x,i.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){var _={minFilter:Bi,magFilter:Bi,format:ca};y.map=new Ns(i.x,i.y,_),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var S=y.getViewportCount(),k=0;k<S;k++){var M=y.getViewport(k);o.set(a.x*M.x,a.y*M.y,a.x*M.z,a.y*M.w),f.viewport(o),y.updateMatrices(v,k),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||this.type!==zr||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function Zf(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new Os,r=null,i=new Os(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?F(2929):z(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case di:e.depthFunc(512);break;case pi:e.depthFunc(519);break;case vi:e.depthFunc(513);break;case mi:e.depthFunc(515);break;case gi:e.depthFunc(514);break;case yi:e.depthFunc(518);break;case bi:e.depthFunc(516);break;case xi:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?F(2960):z(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},l={},c={},h=null,f=!1,d=null,p=null,v=null,m=null,g=null,y=null,b=null,x=!1,w=null,_=null,S=null,k=null,M=null,T=e.getParameter(35661),E=!1,C=0,A=e.getParameter(7938);-1!==A.indexOf("WebGL")?(C=parseFloat(/^WebGL (\d)/.exec(A)[1]),E=C>=1):-1!==A.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(A)[1]),E=C>=2);var R=null,P={},L=e.getParameter(3088),O=e.getParameter(2978),N=(new Os).fromArray(L),D=(new Os).fromArray(O);function I(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var j={};function F(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function z(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}j[3553]=I(3553,3553,1),j[34067]=I(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),F(2929),s.setFunc(mi),H(!1),W(Or),F(2884),G(Wr);var B=(wr(r={},Kr,32774),wr(r,Jr,32778),wr(r,Qr,32779),r);if(a)B[ei]=32775,B[ti]=32776;else{var U=t.get("EXT_blend_minmax");null!==U&&(B[ei]=U.MIN_EXT,B[ti]=U.MAX_EXT)}var V=(wr(i={},ni,0),wr(i,ri,1),wr(i,ii,768),wr(i,oi,770),wr(i,fi,776),wr(i,ci,774),wr(i,ui,772),wr(i,ai,769),wr(i,si,771),wr(i,hi,775),wr(i,li,773),i);function G(t,n,r,i,a,o,s,u){if(t!==Wr){if(!1===f&&(F(3042),f=!0),t===Yr)a=a||n,o=o||r,s=s||i,n===p&&a===g||(e.blendEquationSeparate(B[n],B[a]),p=n,g=a),r===v&&i===m&&o===y&&s===b||(e.blendFuncSeparate(V[r],V[i],V[o],V[s]),v=r,m=i,y=o,b=s),d=t,x=null;else if(t!==d||u!==x){if(p===Kr&&g===Kr||(e.blendEquation(32774),p=Kr,g=Kr),u)switch(t){case Zr:e.blendFuncSeparate(1,771,1,771);break;case $r:e.blendFunc(1,1);break;case qr:e.blendFuncSeparate(0,0,769,771);break;case Xr:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Zr:e.blendFuncSeparate(770,771,1,771);break;case $r:e.blendFunc(770,1);break;case qr:e.blendFunc(0,769);break;case Xr:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,m=null,y=null,b=null,d=t,x=u}}else!0===f&&(z(3042),f=!1)}function H(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function W(t){t!==Lr?(F(2884),t!==_&&(t===Or?e.cullFace(1029):t===Nr?e.cullFace(1028):e.cullFace(1032))):z(2884),_=t}function Z(t,n,r){t?(F(32823),k===n&&M===r||(e.polygonOffset(n,r),k=n,M=r)):z(32823)}function $(t){void 0===t&&(t=33984+T-1),R!==t&&(e.activeTexture(t),R=t)}return{buffers:{color:o,depth:s,stencil:u},enable:F,disable:z,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,a&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(e,t){e.side===Vr?z(2884):F(2884);var n=e.side===Ur;t&&(n=!n),H(n),e.blending===Zr&&!1===e.transparent?G(Wr):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Z(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):z(32926)},setFlipSided:H,setCullFace:W,setLineWidth:function(t){t!==S&&(E&&e.lineWidth(t),S=t)},setPolygonOffset:Z,setScissorTest:function(e){e?F(3089):z(3089)},activeTexture:$,bindTexture:function(t,n){null===R&&$();var r=P[R];void 0===r&&(r={type:void 0,texture:void 0},P[R]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=P[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},R=null,P={},c={},h=null,f=!1,d=null,p=null,v=null,m=null,g=null,y=null,b=null,x=!1,w=null,_=null,S=null,k=null,M=null,N.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function $f(e,t,n,r,i,a,o){var s,u,l,c=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,m=new WeakMap,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function y(e,t){return g?new OffscreenCanvas(e,t):Es("canvas")}function b(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?bs:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===l&&(l=y(o,s));var u=n?y(o,s):l;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return gs(e.width)&&gs(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Bi&&e.minFilter!==Wi}function _(t){e.generateMipmap(t)}function S(n,r,i){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function k(e){return e===Bi||e===Ui||e===Gi?9728:9729}function M(t){var n=t.target;n.removeEventListener("dispose",M),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&m.delete(n),o.memory.textures--}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(!t)return;void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}(n)}var E=0;function C(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function A(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;O(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=o||s?s?r.image[l].image:r.image[l]:b(r.image[l],!1,!0,f);var h,d=x(u[0])||c,p=a.convert(r.format),v=a.convert(r.type),m=S(r.internalFormat,p,v,r.encoding);if(L(34067,r,d),o)for(var g=0;g<6;g++){h=u[g].mipmaps;for(var y=0;y<h.length;y++){var k=h[y];r.format!==ca&&r.format!==la?null!==p?n.compressedTexImage2D(34069+g,y,m,k.width,k.height,0,k.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+g,y,m,k.width,k.height,0,p,v,k.data)}}else{h=r.mipmaps;for(var M=0;M<6;M++)if(s){n.texImage2D(34069+M,0,m,u[M].width,u[M].height,0,p,v,u[M].data);for(var T=0;T<h.length;T++){var E=h[T].image[M].image;n.texImage2D(34069+M,T+1,m,E.width,E.height,0,p,v,E.data)}}else{n.texImage2D(34069+M,0,m,p,v,u[M]);for(var C=0;C<h.length;C++){var A=h[C];n.texImage2D(34069+M,C+1,m,p,v,A.image[M])}}}w(r,d)&&_(34067);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}var R=(wr(s={},ji,10497),wr(s,Fi,33071),wr(s,zi,33648),s),P=(wr(u={},Bi,9728),wr(u,Ui,9984),wr(u,Gi,9986),wr(u,Wi,9729),wr(u,Zi,9985),wr(u,qi,9987),u);function L(n,a,o){if(o?(e.texParameteri(n,10242,R[a.wrapS]),e.texParameteri(n,10243,R[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,R[a.wrapR]),e.texParameteri(n,10240,P[a.magFilter]),e.texParameteri(n,10241,P[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Fi&&a.wrapT===Fi||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,k(a.magFilter)),e.texParameteri(n,10241,k(a.minFilter)),a.minFilter!==Bi&&a.minFilter!==Wi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===na&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===ra&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function O(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M),t.__webglTexture=e.createTexture(),o.memory.textures++)}function N(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),O(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!c&&(e.wrapS!==Fi||e.wrapT!==Fi||e.minFilter!==Bi&&e.minFilter!==Wi)}(r)&&!1===x(r.image),l=b(r.image,u,!1,d),h=x(l)||c,f=a.convert(r.format),p=a.convert(r.type),v=S(r.internalFormat,f,p,r.encoding);L(o,r,h);var m=r.mipmaps;if(r.isDepthTexture)v=6402,c?v=r.type===na?36012:r.type===ta?33190:r.type===sa?35056:33189:r.type===na&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===pa&&6402===v&&r.type!==Qi&&r.type!==ta&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Qi,p=a.convert(r.type)),r.format===va&&6402===v&&(v=34041,r.type!==sa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=sa,p=a.convert(r.type))),n.texImage2D(3553,0,v,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(m.length>0&&h){for(var g=0,y=m.length;g<y;g++)s=m[g],n.texImage2D(3553,g,v,s.width,s.height,0,f,p,s.data);r.generateMipmaps=!1}else n.texImage2D(3553,0,v,l.width,l.height,0,f,p,l.data);else if(r.isCompressedTexture)for(var k=0,M=m.length;k<M;k++)s=m[k],r.format!==ca&&r.format!==la?null!==f?n.compressedTexImage2D(3553,k,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,k,v,s.width,s.height,0,f,p,s.data);else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,f,p,l.data);else if(r.isDataTexture3D)n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,f,p,l.data);else{var T=function(e,t,n){return!0===w(e,n)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(r,l,h),E=c&&!0!==r.isVideoTexture,C=void 0===t.__version;if(m.length>0&&h){E&&C&&n.texStorage2D(3553,T,v,m[0].width,m[0].height);for(var A=0,R=m.length;A<R;A++)s=m[A],E?n.texSubImage2D(3553,A,0,0,f,p,s):n.texImage2D(3553,A,v,f,p,s);r.generateMipmaps=!1}else E?(C&&n.texStorage2D(3553,T,v,l.width,l.height),n.texSubImage2D(3553,0,0,0,f,p,l)):n.texImage2D(3553,0,v,f,p,l)}w(r,h)&&_(o),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function D(t,i,o,s,u){var l=a.convert(o.format),c=a.convert(o.type),h=S(o.internalFormat,l,c,o.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(o).__webglTexture,0,F(i)):e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||n.useRenderToTexture){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===na?i=36012:o.type===ta&&(i=33190));var s=F(n);n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=F(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=a.convert(l.format),h=a.convert(l.type),f=S(l.internalFormat,c,h,l.encoding),d=F(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,d,f,n.width,n.height):n.useRenderToTexture?v.renderbufferStorageMultisampleEXT(36161,d,f,n.width,n.height):e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function j(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=F(i);if(i.depthTexture.format===pa)i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==va)throw new Error("Unknown depthTexture format");i.useRenderToTexture?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),I(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(p,e.samples):0}var z=!1,B=!1;this.allocateTextureUnit=function(){var e=E;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=C,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&D(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&j(e)},this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=s.isDataTexture3D||s.isDataTexture2DArray,p=x(t)||c;if(!c||s.format!==la||s.type!==na&&s.type!==ra||(s.format=ca,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var m=t.texture,g=0,y=m.length;g<y;g++){var b=r.get(m[g]);void 0===b.__webglTexture&&(b.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var k=a.convert(s.format),M=a.convert(s.type),E=S(s.internalFormat,k,M,s.encoding),C=F(t);e.renderbufferStorageMultisample(36161,C,E,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),I(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,l.__webglTexture),L(34067,s,p);for(var A=0;A<6;A++)D(u.__webglFramebuffer[A],t,s,36064,34069+A);w(s,p)&&_(34067),n.unbindTexture()}else if(f){for(var R=t.texture,P=0,O=R.length;P<O;P++){var N=R[P],z=r.get(N);n.bindTexture(3553,z.__webglTexture),L(3553,N,p),D(u.__webglFramebuffer,t,N,36064+P,3553),w(N,p)&&_(3553)}n.unbindTexture()}else{var B=3553;if(d)if(c)B=s.isDataTexture3D?32879:35866;else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(B,l.__webglTexture),L(B,s,p),D(u.__webglFramebuffer,t,s,36064,B),w(s,p)&&_(B),n.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(e){for(var t=x(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(w(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),_(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){var i=t.width,a=t.height,o=16384,s=[36064],u=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(u),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024));var l=r.get(t);n.bindFramebuffer(36008,l.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,l.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),e.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,l.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=D,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),C(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),A(e,t)}}function qf(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Yi)return 5121;if(e===ia)return 32819;if(e===aa)return 32820;if(e===oa)return 33635;if(e===Ki)return 5120;if(e===Ji)return 5122;if(e===Qi)return 5123;if(e===ea)return 5124;if(e===ta)return 5125;if(e===na)return 5126;if(e===ra)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===ua)return 6406;if(e===la)return 6407;if(e===ca)return 6408;if(e===ha)return 6409;if(e===fa)return 6410;if(e===pa)return 6402;if(e===va)return 34041;if(e===ma)return 6403;if(e===ga)return 36244;if(e===ya)return 33319;if(e===ba)return 33320;if(e===xa)return 36248;if(e===wa)return 36249;if(e===_a||e===Sa||e===ka||e===Ma){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===_a)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Sa)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ka)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ma)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Ta||e===Ea||e===Ca||e===Aa){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===Ta)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Ea)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ca)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Aa)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Ra)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===Pa||e===La)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(e===Pa)return n.COMPRESSED_RGB8_ETC2;if(e===La)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Oa||e===Na||e===Da||e===Ia||e===ja||e===Fa||e===za||e===Ba||e===Ua||e===Va||e===Ga||e===Ha||e===Wa||e===Za||e===qa||e===Xa||e===Ya||e===Ka||e===Ja||e===Qa||e===eo||e===to||e===no||e===ro||e===io||e===ao||e===oo||e===so?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===$a?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===sa?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var Xf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,u.Z)(this,n),(e=t.call(this)).cameras=r,e}return(0,l.Z)(n)}(ec);Xf.prototype.isArrayCamera=!0;var Yf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="Group",e}return(0,l.Z)(n)}(Bu);Yf.prototype.isGroup=!0;var Kf={type:"move"},Jf=function(){function e(){(0,u.Z)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,l.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Yf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Yf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fs,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fs),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Yf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fs,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fs),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,u=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Kf)),l&&e.hand){a=!0;var c,h=s(e.hand.values());try{for(h.s();!(c=h.n()).done;){var f=c.value,d=t.getJointPose(f,n);if(void 0===l.joints[f.jointName]){var p=new Yf;p.matrixAutoUpdate=!1,p.visible=!1,l.joints[f.jointName]=p,l.add(p)}var v=l.joints[f.jointName];null!==d&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=d.radius),v.visible=null!==d}}catch(b){h.e(b)}finally{h.f()}var m=l.joints["index-finger-tip"],g=l.joints["thumb-tip"],y=m.position.distanceTo(g.position);l.inputState.pinching&&y>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&y<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==u&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==r),null!==u&&(u.visible=null!==i),null!==l&&(l.visible=null!==a),this}}]),e}(),Qf=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s,l,c,h,f){var d;if((0,u.Z)(this,n),(f=void 0!==f?f:pa)!==pa&&f!==va)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&f===pa&&(i=Qi),void 0===i&&f===va&&(i=sa),(d=t.call(this,null,a,o,s,l,c,f,i,h)).image={width:e,height:r},d.magFilter=void 0!==l?l:Bi,d.minFilter=void 0!==c?c:Bi,d.flipY=!1,d.generateMipmaps=!1,d}return(0,l.Z)(n)}(Ps);Qf.prototype.isDepthTexture=!0;var ed=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),i=t.call(this);var a=(0,c.Z)(i),o=null,s=1,l=null,h="local-floor",f=e.extensions.has("WEBGL_multisampled_render_to_texture"),d=null,p=null,v=null,m=null,g=!1,y=null,b=r.getContextAttributes(),x=null,w=null,_=[],S=new Map,k=new ec;k.layers.enable(1),k.viewport=new Os;var M=new ec;M.layers.enable(2),M.viewport=new Os;var T=[k,M],E=new Xf;E.layers.enable(1),E.layers.enable(2);var C=null,A=null;function R(e){var t=S.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function P(){S.forEach((function(e,t){e.disconnect(t)})),S.clear(),C=null,A=null,e.setRenderTarget(x),m=null,v=null,p=null,o=null,w=null,j.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function L(e){for(var t=o.inputSources,n=0;n<_.length;n++)S.set(t[n],_[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=S.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),S.delete(i))}for(var s=0;s<e.added.length;s++){var u=e.added[s],l=S.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=_[e];return void 0===t&&(t=new Jf,_[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=_[e];return void 0===t&&(t=new Jf,_[e]=t),t.getGripSpace()},i.getHand=function(e){var t=_[e];return void 0===t&&(t=new Jf,_[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){h=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return l},i.getBaseLayer=function(){return null!==v?v:m},i.getBinding=function(){return p},i.getFrame=function(){return y},i.getSession=function(){return o},i.setSession=function(){var t=yr(mr().mark((function t(n){var i,u,c,d,y;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=23;break}if(x=e.getRenderTarget(),o.addEventListener("select",R),o.addEventListener("selectstart",R),o.addEventListener("selectend",R),o.addEventListener("squeeze",R),o.addEventListener("squeezestart",R),o.addEventListener("squeezeend",R),o.addEventListener("end",P),o.addEventListener("inputsourceschange",L),!0===b.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s},m=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:m}),w=new Ns(m.framebufferWidth,m.framebufferHeight)):(g=b.antialias,u=null,c=null,d=null,b.depth&&(d=b.stencil?35056:33189,u=b.stencil?va:pa,c=b.stencil?sa:Qi),y={colorFormat:b.alpha||g?32856:32849,depthFormat:d,scaleFactor:s},p=new XRWebGLBinding(o,r),v=p.createProjectionLayer(y),o.updateRenderState({layers:[v]}),w=g?new Is(v.textureWidth,v.textureHeight,{format:ca,type:Yi,depthTexture:new Qf(v.textureWidth,v.textureHeight,c,void 0,void 0,void 0,void 0,void 0,void 0,u),stencilBuffer:b.stencil,ignoreDepth:v.ignoreDepthValues,useRenderToTexture:f}):new Ns(v.textureWidth,v.textureHeight,{format:b.alpha?ca:la,type:Yi,depthTexture:new Qf(v.textureWidth,v.textureHeight,c,void 0,void 0,void 0,void 0,void 0,void 0,u),stencilBuffer:b.stencil,ignoreDepth:v.ignoreDepthValues})),this.setFoveation(0),t.next=18,o.requestReferenceSpace(h);case 18:l=t.sent,j.setContext(o),j.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var O=new Fs,N=new Fs;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){E.near=M.near=k.near=e.near,E.far=M.far=k.far=e.far,C===E.near&&A===E.far||(o.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,A=E.far);var t=e.parent,n=E.cameras;D(E,t);for(var r=0;r<n.length;r++)D(n[r],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.position.copy(E.position),e.quaternion.copy(E.quaternion),e.scale.copy(E.scale),e.matrix.copy(E.matrix),e.matrixWorld.copy(E.matrixWorld);for(var i=e.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);var r=O.distanceTo(N),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=f-v,b=d+(r-v),x=u*s/g*m,w=l*s/g*m;e.projectionMatrix.makePerspective(y,b,x,w,m,g)}(E,k,M):E.projectionMatrix.copy(k.projectionMatrix)}},i.getCamera=function(){return E},i.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},i.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var I=null;var j=new fc;return j.setAnimationLoop((function(t,n){if(d=n.getViewerPose(l),y=n,null!==d){var r=d.views;null!==m&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));var i=!1;r.length!==E.cameras.length&&(E.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var s=r[a],u=null;if(null!==m)u=m.getViewport(s);else{var c=p.getViewSubImage(v,s);u=c.viewport,0===a&&(e.setRenderTargetTextures(w,c.colorTexture,v.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(w))}var h=T[a];h.matrix.fromArray(s.transform.matrix),h.projectionMatrix.fromArray(s.projectionMatrix),h.viewport.set(u.x,u.y,u.width,u.height),0===a&&E.matrix.copy(h.matrix),!0===i&&E.cameras.push(h)}}for(var f=o.inputSources,g=0;g<_.length;g++){var b=_[g],x=f[g];b.update(x,n,l)}I&&I(t,n),y=null})),i.setAnimationLoop=function(e){I=e},i.dispose=function(){},i}return(0,l.Z)(n)}(ss);function td(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,i,a=e.get(n).envMap;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===Ur&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===Ur&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ur&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ur&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ur&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ur&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Ur&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ur&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ur&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Ur&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Ur&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function nd(){var e=Es("canvas");return e.style.display="block",e}function rd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:nd(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=So,this.physicallyCorrectLights=!1,this.toneMapping=ki,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,b=null,x=-1,w=null,_=new Os,S=new Os,k=null,M=t.width,T=t.height,E=1,C=null,A=null,R=new Os(0,0,M,T),P=new Os(0,0,M,T),L=!1,O=[],N=new hc,D=!1,I=!1,j=null,F=new vu,z=new Fs,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?E:1}var V,G,H,W,Z,$,q,X,Y,K,J,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he=n;function fe(e,n){for(var r=0;r<e.length;r++){var i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{var de={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Ar)),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===he){var pe=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&pe.shift(),null===(he=fe(pe,de)))throw fe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(je){throw console.error("THREE.WebGLRenderer: "+je.message),je}function ve(){V=new Xc(he),G=new wc(he,V,e),V.init(G),le=new qf(he,V,G),H=new Zf(he,V,G),O[0]=1029,W=new Jc(he),Z=new Lf,$=new $f(he,V,H,Z,G,le,W),q=new Sc(v),X=new qc(v),Y=new dc(he,G),ce=new bc(he,V,Y,G),K=new Yc(he,Y,W,ce),J=new ih(he,K,Y,W),oe=new rh(he,G,$),re=new _c(Z),Q=new Pf(v,q,X,V,G,ce,re),ee=new td(Z),te=new If(Z),ne=new Vf(V,G),ae=new yc(v,q,H,J,s),ie=new Wf(v,J,G),se=new xc(he,V,W,G),ue=new Kc(he,V,W,G),W.programs=Q.programs,v.capabilities=G,v.extensions=V,v.properties=Z,v.renderLists=te,v.shadowMap=ie,v.state=H,v.info=W}ve();var me=new ed(v,he);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;ve(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function be(e){var t=e.target;t.removeEventListener("dispose",be),xe(t)}function xe(e){we(e),Z.remove(e)}function we(e){var t=Z.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))}this.xr=me,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(M,T,!1))},this.getSize=function(e){return e.set(M,T)},this.setSize=function(e,n,r){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,T=n,t.width=Math.floor(e*E),t.height=Math.floor(n*E),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(M*E,T*E).floor()},this.setDrawingBufferSize=function(e,n,r){M=e,T=n,E=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),H.viewport(_.copy(R).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),H.scissor(S.copy(P).multiplyScalar(E).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){H.setScissorTest(L=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),Z.dispose(),q.dispose(),X.dispose(),J.dispose(),ce.dispose(),me.dispose(),me.removeEventListener("sessionstart",ke),me.removeEventListener("sessionend",Me),j&&(j.dispose(),j=null),Te.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Ne(e,t,n,r,i);H.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=K.getWireframeAttribute(n),h=2),ce.setup(i,r,s,n,u);var f=se;null!==u&&(c=Y.get(u),(f=ue).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*U()),f.setMode(1)):f.setMode(4);else if(i.isLine){var w=r.linewidth;void 0===w&&(w=1),H.setLineWidth(w*U()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,x,i.count);else if(n.isInstancedBufferGeometry){var _=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,x,_)}else f.render(y,x)}},this.compile=function(e,t){(f=ne.get(e)).init(),p.push(f),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Le(n[r],e,t)}else Le(n,e,t)})),p.pop(),f=null};var _e=null;function Se(e){_e&&_e(e)}function ke(){Te.stop()}function Me(){Te.start()}var Te=new fc;function Ee(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var i=J.update(e),a=e.material;a.visible&&h.push(e,i,a,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&h.push(e,o,p,n,z.z,d)}else s.visible&&h.push(e,o,s,n,z.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Ee(v[m],t,n,r)}}function Ce(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;f.setupLightsView(n),a.length>0&&Ae(i,t,n),r&&H.viewport(_.copy(r)),i.length>0&&Re(i,t,n),a.length>0&&Re(a,t,n),o.length>0&&Re(o,t,n)}function Ae(e,t,n){if(null===j){var r=!0===o&&!0===G.isWebGL2;j=new(r?Is:Ns)(1024,1024,{generateMipmaps:!0,type:null!==le.convert(ra)?ra:Yi,minFilter:qi,magFilter:Bi,wrapS:Fi,wrapT:Fi,useRenderToTexture:V.has("WEBGL_multisampled_render_to_texture")})}var i=v.getRenderTarget();v.setRenderTarget(j),v.clear();var a=v.toneMapping;v.toneMapping=ki,Re(e,t,n),v.toneMapping=a,$.updateMultisampleRenderTarget(j),$.updateRenderTargetMipmap(j),v.setRenderTarget(i)}function Re(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Pe(s,t,n,u,l,c)}}function Pe(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&i.side===Vr?(i.side=Ur,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=Br,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=Vr):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Le(e,t,n){!0!==t.isScene&&(t=B);var r=Z.get(e),i=f.state.lights,a=f.state.shadowsArray,o=i.state.version,s=Q.getParameters(e,i.state,a,t,n),u=Q.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?X:q).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",be),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Oe(e,s),c}else s.uniforms=Q.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=Q.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Oe(e,s),r.needsLights=Ie(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=cf.seqWithValue(d.seq,h);return r.currentProgram=c,r.uniformsList=p,c}function Oe(e,t){var n=Z.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ne(e,t,n,r,i){!0!==t.isScene&&(t=B),$.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?v.outputEncoding:b.texture.encoding,u=(r.isMeshStandardMaterial?X:q).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=n.morphAttributes.position?n.morphAttributes.position.length:0,m=Z.get(r),g=f.state.lights;if(!0===D&&(!0===I||e!==w)){var y=e===w&&r.id===x;re.setState(r,e,y)}var _=!1;r.version===m.__version?m.needsLights&&m.lightsStateVersion!==g.state.version||m.outputEncoding!==s||i.isInstancedMesh&&!1===m.instancing?_=!0:i.isInstancedMesh||!0!==m.instancing?i.isSkinnedMesh&&!1===m.skinning?_=!0:i.isSkinnedMesh||!0!==m.skinning?m.envMap!==u||r.fog&&m.fog!==a?_=!0:void 0===m.numClippingPlanes||m.numClippingPlanes===re.numPlanes&&m.numIntersection===re.numIntersection?(m.vertexAlphas!==l||m.vertexTangents!==c||m.morphTargets!==h||m.morphNormals!==d||!0===G.isWebGL2&&m.morphTargetsCount!==p)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,m.__version=r.version);var S=m.currentProgram;!0===_&&(S=Le(r,t,i));var k=!1,M=!1,C=!1,A=S.getUniforms(),R=m.uniforms;if(H.useProgram(S.program)&&(k=!0,M=!0,C=!0),r.id!==x&&(x=r.id,M=!0),k||w!==e){if(A.setValue(he,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&A.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,M=!0,C=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var P=A.map.cameraPosition;void 0!==P&&P.setValue(he,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&A.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&A.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){A.setOptional(he,i,"bindMatrix"),A.setOptional(he,i,"bindMatrixInverse");var L=i.skeleton;L&&(G.floatVertexTextures?(null===L.boneTexture&&L.computeBoneTexture(),A.setValue(he,"boneTexture",L.boneTexture,$),A.setValue(he,"boneTextureSize",L.boneTextureSize)):A.setOptional(he,L,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(i,n,r,S),(M||m.receiveShadow!==i.receiveShadow)&&(m.receiveShadow=i.receiveShadow,A.setValue(he,"receiveShadow",i.receiveShadow)),M&&(A.setValue(he,"toneMappingExposure",v.toneMappingExposure),m.needsLights&&De(R,C),a&&r.fog&&ee.refreshFogUniforms(R,a),ee.refreshMaterialUniforms(R,r,E,T,j),cf.upload(he,m.uniformsList,R,$)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(cf.upload(he,m.uniformsList,R,$),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&A.setValue(he,"center",i.center),A.setValue(he,"modelViewMatrix",i.modelViewMatrix),A.setValue(he,"normalMatrix",i.normalMatrix),A.setValue(he,"modelMatrix",i.matrixWorld),S}function De(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Ie(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Te.setAnimationLoop(Se),"undefined"!==typeof window&&Te.setContext(window),this.setAnimationLoop=function(e){_e=e,me.setAnimationLoop(e),null===e?Te.stop():Te.start()},me.addEventListener("sessionstart",ke),me.addEventListener("sessionend",Me),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(f=ne.get(e,p.length)).init(),p.push(f),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(F),I=this.localClippingEnabled,D=re.init(this.clippingPlanes,I,t),(h=te.get(e,d.length)).init(),d.push(h),Ee(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(C,A),!0===D&&re.beginShadows();var n=f.state.shadowsArray;if(ie.render(n,e,t),!0===D&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(h,e),f.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Ce(h,e,o,o.viewport)}else Ce(h,e,t);null!==b&&($.updateMultisampleRenderTarget(b),$.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),ce.resetDefaultState(),x=-1,w=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=n;var r=Z.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){var n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n;var r=!0;if(e){var i=Z.get(e);void 0!==i.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?$.setupRenderTarget(e):i.__hasExternalTextures&&$.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture)}var a=null,o=!1,s=!1;if(e){var u=e.texture;(u.isDataTexture3D||u.isDataTexture2DArray)&&(s=!0);var l=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=l[t],o=!0):a=e.useRenderbuffer?Z.get(e).__webglMultisampledFramebuffer:l,_.copy(e.viewport),S.copy(e.scissor),k=e.scissorTest}else _.copy(R).multiplyScalar(E).floor(),S.copy(P).multiplyScalar(E).floor(),k=L;var c=H.bindFramebuffer(36160,a);if(c&&G.drawBuffers&&r){var h=!1;if(e)if(e.isWebGLMultipleRenderTargets){var f=e.texture;if(O.length!==f.length||36064!==O[0]){for(var d=0,p=f.length;d<p;d++)O[d]=36064+d;O.length=f.length,h=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,h=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,h=!0);h&&(G.isWebGL2?he.drawBuffers(O):V.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(H.viewport(_),H.scissor(S),H.setScissorTest(k),o){var v=Z.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,v.__webglTexture,n)}else if(s){var m=Z.get(e.texture),w=t||0;he.framebufferTextureLayer(36160,36064,m.__webglTexture,n||0,w)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){H.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==ca&&le.convert(l)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===ra&&(V.has("EXT_color_buffer_half_float")||G.isWebGL2&&V.has("EXT_color_buffer_float"));if(c!==Yi&&le.convert(c)!==he.getParameter(35738)&&(c!==na||!(G.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!h)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,le.convert(l),le.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==b?Z.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=le.convert(t.format);G.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),$.setTexture2D(t,0),he.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=le.convert(n.format),s=le.convert(n.type);$.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);if(r.isDataTexture3D)$.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(r,0),a=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var h=he.getParameter(3314),f=he.getParameter(32878),d=he.getParameter(3316),p=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,g.data)):he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g),he.pixelStorei(3314,h),he.pixelStorei(32878,f),he.pixelStorei(3316,d),he.pixelStorei(3315,p),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(a),H.unbindTexture()}},this.initTexture=function(e){$.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,H.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}rd.prototype.isWebGLRenderer=!0;var id=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(rd);id.prototype.isWebGL1Renderer=!0;var ad=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,u.Z)(this,e),this.name="",this.color=new ol(t),this.density=n}return(0,l.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}();ad.prototype.isFogExp2=!0;var od=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,u.Z)(this,e),this.name="",this.color=new ol(t),this.near=n,this.far=r}return(0,l.Z)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();od.prototype.isFog=!0;var sd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,c.Z)(e)})),e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Bu);sd.prototype.isScene=!0;var ud=function(){function e(t,n){(0,u.Z)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Yo,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ds()}return(0,l.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ds()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ds()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();ud.prototype.isInterleavedBuffer=!0;var ld=new Fs,cd=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,u.Z)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return(0,l.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)ld.x=this.getX(t),ld.y=this.getY(t),ld.z=this.getZ(t),ld.applyMatrix4(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)ld.x=this.getX(t),ld.y=this.getY(t),ld.z=this.getZ(t),ld.applyNormalMatrix(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)ld.x=this.getX(t),ld.y=this.getY(t),ld.z=this.getZ(t),ld.transformDirection(e),this.setXYZ(t,ld.x,ld.y,ld.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new cl(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();cd.prototype.isInterleavedBufferAttribute=!0;var hd,fd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new ol(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Qu);fd.prototype.isSpriteMaterial=!0;var dd=new Fs,pd=new Fs,vd=new Fs,md=new ws,gd=new ws,yd=new vu,bd=new Fs,xd=new Fs,wd=new Fs,_d=new ws,Sd=new ws,kd=new ws,Md=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;if((0,u.Z)(this,n),(r=t.call(this)).type="Sprite",void 0===hd){hd=new Cl;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new ud(i,5);hd.setIndex([0,1,2,0,2,3]),hd.setAttribute("position",new cd(a,3,0,!1)),hd.setAttribute("uv",new cd(a,2,3,!1))}return r.geometry=hd,r.material=void 0!==e?e:new fd,r.center=new ws(.5,.5),r}return(0,l.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pd.setFromMatrixScale(this.matrixWorld),yd.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&pd.multiplyScalar(-vd.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Td(bd.set(-.5,-.5,0),vd,a,pd,n,r),Td(xd.set(.5,-.5,0),vd,a,pd,n,r),Td(wd.set(.5,.5,0),vd,a,pd,n,r),_d.set(0,0),Sd.set(1,0),kd.set(1,1);var o=e.ray.intersectTriangle(bd,xd,wd,!1,dd);if(null!==o||(Td(xd.set(-.5,.5,0),vd,a,pd,n,r),Sd.set(0,1),null!==(o=e.ray.intersectTriangle(bd,wd,xd,!1,dd)))){var s=e.ray.origin.distanceTo(dd);s<e.near||s>e.far||t.push({distance:s,point:dd.clone(),uv:Ku.getUV(dd,bd,xd,wd,_d,Sd,kd,new ws),face:null,object:this})}}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Bu);function Td(e,t,n,r,i,a){md.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(gd.x=a*md.x-i*md.y,gd.y=i*md.x+a*md.y):gd.copy(md),e.copy(t),e.x+=gd.x,e.y+=gd.y,e.applyMatrix4(yd)}Md.prototype.isSprite=!0;var Ed=new Fs,Cd=new Fs,Ad=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties((0,c.Z)(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return(0,l.Z)(n,[{key:"copy",value:function(e){Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){Ed.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Ed);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){Ed.setFromMatrixPosition(e.matrixWorld),Cd.setFromMatrixPosition(this.matrixWorld);var n,r,i=Ed.distanceTo(Cd)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(Bu),Rd=new Fs,Pd=new Os,Ld=new Os,Od=new Fs,Nd=new vu,Dd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new vu,i.bindMatrixInverse=new vu,i}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Os,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Pd.fromBufferAttribute(r.attributes.skinIndex,e),Ld.fromBufferAttribute(r.attributes.skinWeight,e),Rd.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Ld.getComponent(i);if(0!==a){var o=Pd.getComponent(i);Nd.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Od.copy(Rd).applyMatrix4(Nd),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Zl);Dd.prototype.isSkinnedMesh=!0;var Id=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="Bone",e}return(0,l.Z)(n)}(Bu);Id.prototype.isBone=!0;var jd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Bi,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Bi,p=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return(0,u.Z)(this,n),(e=t.call(this,null,l,c,h,f,d,o,s,p,v)).image={data:r,width:i,height:a},e.magFilter=f,e.minFilter=d,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,l.Z)(n)}(Ps);jd.prototype.isDataTexture=!0;var Fd=new vu,zd=new vu,Bd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.Z)(this,e),this.uuid=ds(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,l.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new vu)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new vu;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:zd;Fd.multiplyMatrices(o,t[i]),Fd.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=ys(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new jd(t,e,e,ca,na);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Id),this.bones.push(a),this.boneInverses.push((new vu).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),Ud=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),"number"===typeof i&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,r,i)).meshPerAttribute=o,a}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(cl);Ud.prototype.isInstancedBufferAttribute=!0;var Vd=new vu,Gd=new vu,Hd=[],Wd=new Zl,Zd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this,e,r)).instanceMatrix=new Ud(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Wd.geometry=this.geometry,Wd.material=this.material,void 0!==Wd.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Vd),Gd.multiplyMatrices(n,Vd),Wd.matrixWorld=Gd,Wd.raycast(e,Hd);for(var a=0,o=Hd.length;a<o;a++){var s=Hd[a];s.instanceId=i,s.object=this,t.push(s)}Hd.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Ud(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Zl);Zd.prototype.isInstancedMesh=!0;var $d=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new ol(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(Qu);$d.prototype.isLineBasicMaterial=!0;var qd=new Fs,Xd=new Fs,Yd=new vu,Kd=new pu,Jd=new ou,Qd=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cl,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $d;return(0,u.Z)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)qd.fromBufferAttribute(t,r-1),Xd.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=qd.distanceTo(Xd);e.setAttribute("lineDistance",new bl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jd.copy(n.boundingSphere),Jd.applyMatrix4(r),Jd.radius+=i,!1!==e.ray.intersectsSphere(Jd)){Yd.copy(r).invert(),Kd.copy(e.ray).applyMatrix4(Yd);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Fs,l=new Fs,c=new Fs,h=new Fs,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(Kd.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,a.start),w=Math.min(p.count,a.start+a.count)-1;x<w;x+=f){if(u.fromBufferAttribute(p,x),l.fromBufferAttribute(p,x+1),!(Kd.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Bu);Qd.prototype.isLine=!0;var ep=new Fs,tp=new Fs,np=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return(0,l.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)ep.fromBufferAttribute(t,r),tp.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+ep.distanceTo(tp);e.setAttribute("lineDistance",new bl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(Qd);np.prototype.isLineSegments=!0;var rp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return(0,l.Z)(n)}(Qd);rp.prototype.isLineLoop=!0;var ip=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new ol(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(Qu);ip.prototype.isPointsMaterial=!0;var ap=new vu,op=new pu,sp=new ou,up=new Fs,lp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cl,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ip;return(0,u.Z)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sp.copy(n.boundingSphere),sp.applyMatrix4(r),sp.radius+=i,!1!==e.ray.intersectsSphere(sp)){ap.copy(r).invert(),op.copy(e.ray).applyMatrix4(ap);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var f=u.getX(c);up.fromBufferAttribute(l,f),cp(up,f,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);d<p;d++)up.fromBufferAttribute(l,d),cp(up,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Bu);function cp(e,t,n,r,i,a,o){var s=op.distanceSqToPoint(e);if(s<n){var u=new Fs;op.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}lp.prototype.isPoints=!0;var hp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s,l,h,f){var d;(0,u.Z)(this,n),(d=t.call(this,e,r,i,a,o,s,l,h,f)).format=void 0!==l?l:la,d.minFilter=void 0!==s?s:Wi,d.magFilter=void 0!==o?o:Wi,d.generateMipmaps=!1;var p=(0,c.Z)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){p.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return(0,l.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Ps);hp.prototype.isVideoTexture=!0;var fp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s,l,c,h,f,d,p){var v;return(0,u.Z)(this,n),(v=t.call(this,null,s,l,c,h,f,a,o,d,p)).image={width:r,height:i},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return(0,l.Z)(n)}(Ps);fp.prototype.isCompressedTexture=!0;var dp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s,l,c,h){var f;return(0,u.Z)(this,n),(f=t.call(this,e,r,i,a,o,s,l,c,h)).needsUpdate=!0,f}return(0,l.Z)(n)}(Ps);dp.prototype.isCanvasTexture=!0;var pp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],l=[],c=[],h=[],f=new Fs,d=new ws;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);for(var p=0,v=3;p<=i;p++,v+=3){var m=a+p/i*o;f.x=r*Math.cos(m),f.y=r*Math.sin(m),l.push(f.x,f.y,f.z),c.push(0,0,1),d.x=(l[v]/r+1)/2,d.y=(l[v+1]/r+1)/2,h.push(d.x,d.y)}for(var g=1;g<=i;g++)s.push(g,g+1,0);return e.setIndex(s),e.setAttribute("position",new bl(l,3)),e.setAttribute("normal",new bl(c,3)),e.setAttribute("uv",new bl(h,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(Cl),vp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:h,thetaLength:f};var d=(0,c.Z)(e);o=Math.floor(o),s=Math.floor(s);var p=[],v=[],m=[],g=[],y=0,b=[],x=a/2,w=0;function _(){for(var e=new Fs,t=new Fs,n=0,u=(i-r)/a,l=0;l<=s;l++){for(var c=[],_=l/s,S=_*(i-r)+r,k=0;k<=o;k++){var M=k/o,T=M*f+h,E=Math.sin(T),C=Math.cos(T);t.x=S*E,t.y=-_*a+x,t.z=S*C,v.push(t.x,t.y,t.z),e.set(E,u,C).normalize(),m.push(e.x,e.y,e.z),g.push(M,1-_),c.push(y++)}b.push(c)}for(var A=0;A<o;A++)for(var R=0;R<s;R++){var P=b[R][A],L=b[R+1][A],O=b[R+1][A+1],N=b[R][A+1];p.push(P,L,N),p.push(L,O,N),n+=6}d.addGroup(w,n,0),w+=n}function S(e){for(var t=y,n=new ws,a=new Fs,s=0,u=!0===e?r:i,l=!0===e?1:-1,c=1;c<=o;c++)v.push(0,x*l,0),m.push(0,l,0),g.push(.5,.5),y++;for(var b=y,_=0;_<=o;_++){var S=_/o*f+h,k=Math.cos(S),M=Math.sin(S);a.x=u*M,a.y=x*l,a.z=u*k,v.push(a.x,a.y,a.z),m.push(0,l,0),n.x=.5*k+.5,n.y=.5*M*l+.5,g.push(n.x,n.y),y++}for(var T=0;T<o;T++){var E=t+T,C=b+T;!0===e?p.push(C,C+1,E):p.push(C+1,C,E),s+=3}d.addGroup(w,s,!0===e?1:2),w+=s}return _(),!1===l&&(r>0&&S(!0),i>0&&S(!1)),e.setIndex(p),e.setAttribute("position",new bl(v,3)),e.setAttribute("normal",new bl(m,3)),e.setAttribute("uv",new bl(g,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Cl),mp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return(0,u.Z)(this,n),(e=t.call(this,0,r,i,a,o,s,l,c)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c},e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(vp),gp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,u.Z)(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],l=[];function c(e){for(var t=new Fs,n=new Fs,r=new Fs,a=0;a<i.length;a+=3)m(i[a+0],t),m(i[a+1],n),m(i[a+2],r),h(t,n,r,e)}function h(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),l=i-o,c=0;c<=l;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(u,c/l)}for(var h=0;h<i;h++)for(var f=0;f<2*(i-h)-1;f++){var d=Math.floor(f/2);f%2===0?(v(a[h][d+1]),v(a[h+1][d]),v(a[h][d])):(v(a[h][d+1]),v(a[h+1][d+1]),v(a[h+1][d]))}}function f(e){for(var t=new Fs,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function d(){for(var e=new Fs,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=b(e)/2/Math.PI+.5,r=x(e)/Math.PI+.5;l.push(n,1-r)}g(),p()}function p(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],r=l[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),r<.2&&(l[e+4]+=1))}}function v(e){s.push(e.x,e.y,e.z)}function m(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function g(){for(var e=new Fs,t=new Fs,n=new Fs,r=new Fs,i=new ws,a=new ws,o=new ws,u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),n.set(s[u+6],s[u+7],s[u+8]),i.set(l[c+0],l[c+1]),a.set(l[c+2],l[c+3]),o.set(l[c+4],l[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=b(r);y(i,c+0,e,h),y(a,c+2,t,h),y(o,c+4,n,h)}}function y(e,t,n,r){r<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=r/2/Math.PI+.5)}function b(e){return Math.atan2(e.z,-e.x)}function x(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return c(o),f(a),d(),e.setAttribute("position",new bl(s,3)),e.setAttribute("normal",new bl(s.slice(),3)),e.setAttribute("uv",new bl(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(Cl),yp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,s,l,r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(gp),bp=new Fs,xp=new Fs,wp=new Fs,_p=new Ku,Sp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if((0,u.Z)(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=4,o=Math.pow(10,a),s=Math.cos(hs*i),l=r.getIndex(),c=r.getAttribute("position"),h=l?l.count:c.count,f=[0,0,0],d=["a","b","c"],p=new Array(3),v={},m=[],g=0;g<h;g+=3){l?(f[0]=l.getX(g),f[1]=l.getX(g+1),f[2]=l.getX(g+2)):(f[0]=g,f[1]=g+1,f[2]=g+2);var y=_p.a,b=_p.b,x=_p.c;if(y.fromBufferAttribute(c,f[0]),b.fromBufferAttribute(c,f[1]),x.fromBufferAttribute(c,f[2]),_p.getNormal(wp),p[0]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),p[1]="".concat(Math.round(b.x*o),",").concat(Math.round(b.y*o),",").concat(Math.round(b.z*o)),p[2]="".concat(Math.round(x.x*o),",").concat(Math.round(x.y*o),",").concat(Math.round(x.z*o)),p[0]!==p[1]&&p[1]!==p[2]&&p[2]!==p[0])for(var w=0;w<3;w++){var _=(w+1)%3,S=p[w],k=p[_],M=_p[d[w]],T=_p[d[_]],E="".concat(S,"_").concat(k),C="".concat(k,"_").concat(S);C in v&&v[C]?(wp.dot(v[C].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(T.x,T.y,T.z)),v[C]=null):E in v||(v[E]={index0:f[w],index1:f[_],normal:wp.clone()})}}for(var A in v)if(v[A]){var R=v[A],P=R.index0,L=R.index1;bp.fromBufferAttribute(c,P),xp.fromBufferAttribute(c,L),m.push(bp.x,bp.y,bp.z),m.push(xp.x,xp.y,xp.z)}e.setAttribute("position",new bl(m,3))}return e}return(0,l.Z)(n)}(Cl),kp=function(){function e(){(0,u.Z)(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,l.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new ws:new Fs);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Fs,r=[],i=[],a=[],o=new Fs,s=new vu,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new Fs)}i[0]=new Fs,a[0]=new Fs;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(ps(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(ps(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Mp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,u.Z)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=c,e.aRotation=h,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new ws,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(kp);Mp.prototype.isEllipseCurve=!0;var Tp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a,o,s){var l;return(0,u.Z)(this,n),(l=t.call(this,e,r,i,i,a,o,s)).type="ArcCurve",l}return(0,l.Z)(n)}(Mp);function Ep(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}Tp.prototype.isArcCurve=!0;var Cp=new Fs,Ap=new Ep,Rp=new Ep,Pp=new Ep,Lp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,u.Z)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?t=a[(u-1)%o]:(Cp.subVectors(a[0],a[1]).add(a[0]),t=Cp);var c=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(Cp.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=Cp),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),Ap.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,d,p,v),Rp.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,d,p,v),Pp.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(Ap.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),Rp.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),Pp.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return i.set(Ap.calc(l),Rp.calc(l),Pp.calc(l)),i}},{key:"copy",value:function(e){Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Fs).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(kp);function Op(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Np(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Dp(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}Lp.prototype.isCatmullRomCurve3=!0;var Ip=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ws,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ws,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ws;return(0,u.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Dp(e,r.x,i.x,a.x,o.x),Dp(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(kp);Ip.prototype.isCubicBezierCurve=!0;var jp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fs,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Fs;return(0,u.Z)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Dp(e,r.x,i.x,a.x,o.x),Dp(e,r.y,i.y,a.y,o.y),Dp(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(kp);jp.prototype.isCubicBezierCurve3=!0;var Fp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ws,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws;return(0,u.Z)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new ws;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(kp);Fp.prototype.isLineCurve=!0;var zp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs;return(0,u.Z)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(kp),Bp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ws,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ws;return(0,u.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Np(e,r.x,i.x,a.x),Np(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(kp);Bp.prototype.isQuadraticBezierCurve=!0;var Up=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fs;return(0,u.Z)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Np(e,r.x,i.x,a.x),Np(e,r.y,i.y,a.y),Np(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(kp);Up.prototype.isQuadraticBezierCurve3=!0;var Vp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,u.Z)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,l.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(Op(o,s.x,u.x,l.x,c.x),Op(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new ws).fromArray(i))}return this}}]),n}(kp);Vp.prototype.isSplineCurve=!0;var Gp=Object.freeze({__proto__:null,ArcCurve:Tp,CatmullRomCurve3:Lp,CubicBezierCurve:Ip,CubicBezierCurve3:jp,EllipseCurve:Mp,LineCurve:Fp,LineCurve3:zp,QuadraticBezierCurve:Bp,QuadraticBezierCurve3:Up,SplineCurve:Vp}),Hp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,l.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Fp(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),u=0===s?0:1-a/s;return o.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new Gp[i.type]).fromJSON(i))}return this}}]),n}(kp),Wp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new ws,e&&r.setFromPoints(e),r}return(0,l.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Fp(this.currentPoint.clone(),new ws(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new Bp(this.currentPoint.clone(),new ws(e,t),new ws(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new Ip(this.currentPoint.clone(),new ws(e,t),new ws(n,r),new ws(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Vp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new Mp(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Hp),Zp=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).uuid=ds(),r.type="Shape",r.holes=[],r}return(0,l.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Tr((0,kr.Z)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Wp).fromJSON(i))}return this}}]),n}(Wp),$p=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,f=qp(e,0,h,l,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=tv(e,t,f,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<h;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return Yp(f,d,l,n,r,u),d};function qp(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=mv(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=mv(a,e[a],e[a+1],o);return o&&cv(o,o.next)&&(gv(o),o=o.next),o}function Xp(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!cv(r,r.next)&&0!==lv(r.prev,r,r.next))r=r.next;else{if(gv(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Yp(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=av(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Jp(e,r,i,a):Kp(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),gv(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Yp(e=Qp(Xp(e),t,n),t,n,r,i,a,2):2===o&&ev(e,t,n,r,i,a):Yp(Xp(e),t,n,r,i,a,1);break}}}function Kp(e){var t=e.prev,n=e,r=e.next;if(lv(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(sv(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&lv(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Jp(e,t,n,r){var i=e.prev,a=e,o=e.next;if(lv(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=av(s,u,t,n,r),f=av(l,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&sv(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&lv(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&sv(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&lv(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&sv(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&lv(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&sv(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&lv(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Qp(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!cv(i,a)&&hv(i,r,r.next,a)&&pv(i,a)&&pv(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),gv(r),gv(r.next),r=e=a),r=r.next}while(r!==e);return Xp(r)}function ev(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&uv(o,s)){var u=vv(o,s);return o=Xp(o,o.next),u=Xp(u,u.next),Yp(o,t,n,r,i,a),void Yp(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function tv(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=qp(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(ov(o));for(s.sort(nv),i=0;i<s.length;i++)rv(s[i],n),n=Xp(n,n.next);return n}function nv(e,t){return e.x-t.x}function rv(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&sv(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),pv(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&iv(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=vv(t,e);Xp(t,t.next),Xp(n,n.next)}}function iv(e,t){return lv(e.prev,e,t.prev)<0&&lv(t.next,e,e.next)<0}function av(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ov(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function sv(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function uv(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&hv(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(pv(e,t)&&pv(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(lv(e.prev,e,t.prev)||lv(e,t.prev,t))||cv(e,t)&&lv(e.prev,e,e.next)>0&&lv(t.prev,t,t.next)>0)}function lv(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function cv(e,t){return e.x===t.x&&e.y===t.y}function hv(e,t,n,r){var i=dv(lv(e,t,n)),a=dv(lv(e,t,r)),o=dv(lv(n,r,e)),s=dv(lv(n,r,t));return i!==a&&o!==s||(!(0!==i||!fv(e,n,t))||(!(0!==a||!fv(e,r,t))||(!(0!==o||!fv(n,e,r))||!(0!==s||!fv(n,t,r)))))}function fv(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function dv(e){return e>0?1:e<0?-1:0}function pv(e,t){return lv(e.prev,e,e.next)<0?lv(e,t,e.next)>=0&&lv(e,e.prev,t)>=0:lv(e,t,e.prev)<0||lv(e,e.next,t)<0}function vv(e,t){var n=new yv(e.i,e.x,e.y),r=new yv(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function mv(e,t,n,r){var i=new yv(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gv(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yv(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var bv=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];xv(e),wv(n,e);var a=e.length;t.forEach(xv);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,wv(n,t[o]);for(var s=$p(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function xv(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wv(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var _v=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zp([new ws(.5,.5),new ws(-.5,.5),new ws(-.5,-.5),new ws(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=(0,c.Z)(e),o=[],s=[],l=0,h=r.length;l<h;l++){var f=r[l];d(f)}function d(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,u=void 0!==i.depth?i.depth:1,l=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:c-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:Sv;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=i.amount);var m,g,y,b,x,w=!1;p&&(m=p.getSpacedPoints(r),w=!0,l=!1,g=p.computeFrenetFrames(r,!1),y=new Fs,b=new Fs,x=new Fs),l||(d=0,c=0,h=0,f=0);var _=e.extractPoints(n),S=_.shape,k=_.holes;if(!bv.isClockWise(S)){S=S.reverse();for(var M=0,T=k.length;M<T;M++){var E=k[M];bv.isClockWise(E)&&(k[M]=E.reverse())}}for(var C=bv.triangulateShape(S,k),A=S,R=0,P=k.length;R<P;R++){var L=k[R];S=S.concat(L)}function O(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var N=S.length,D=C.length;function I(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,h=o*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/f,v=t.y+o/f,m=((n.x-l/d-p)*l-(n.y+u/d-v)*u)/(o*l-s*u),g=(r=p+o*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new ws(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new ws(r/a,i/a)}for(var j=[],F=0,z=A.length,B=z-1,U=F+1;F<z;F++,B++,U++)B===z&&(B=0),U===z&&(U=0),j[F]=I(A[F],A[B],A[U]);for(var V,G=[],H=j.concat(),W=0,Z=k.length;W<Z;W++){var $=k[W];V=[];for(var q=0,X=$.length,Y=X-1,K=q+1;q<X;q++,Y++,K++)Y===X&&(Y=0),K===X&&(K=0),V[q]=I($[q],$[Y],$[K]);G.push(V),H=H.concat(V)}for(var J=0;J<d;J++){for(var Q=J/d,ee=c*Math.cos(Q*Math.PI/2),te=h*Math.sin(Q*Math.PI/2)+f,ne=0,re=A.length;ne<re;ne++){var ie=O(A[ne],j[ne],te);Pe(ie.x,ie.y,-ee)}for(var ae=0,oe=k.length;ae<oe;ae++){var se=k[ae];V=G[ae];for(var ue=0,le=se.length;ue<le;ue++){var ce=O(se[ue],V[ue],te);Pe(ce.x,ce.y,-ee)}}}for(var he=h+f,fe=0;fe<N;fe++){var de=l?O(S[fe],H[fe],he):S[fe];w?(b.copy(g.normals[0]).multiplyScalar(de.x),y.copy(g.binormals[0]).multiplyScalar(de.y),x.copy(m[0]).add(b).add(y),Pe(x.x,x.y,x.z)):Pe(de.x,de.y,0)}for(var pe=1;pe<=r;pe++)for(var ve=0;ve<N;ve++){var me=l?O(S[ve],H[ve],he):S[ve];w?(b.copy(g.normals[pe]).multiplyScalar(me.x),y.copy(g.binormals[pe]).multiplyScalar(me.y),x.copy(m[pe]).add(b).add(y),Pe(x.x,x.y,x.z)):Pe(me.x,me.y,u/r*pe)}for(var ge=d-1;ge>=0;ge--){for(var ye=ge/d,be=c*Math.cos(ye*Math.PI/2),xe=h*Math.sin(ye*Math.PI/2)+f,we=0,_e=A.length;we<_e;we++){var Se=O(A[we],j[we],xe);Pe(Se.x,Se.y,u+be)}for(var ke=0,Me=k.length;ke<Me;ke++){var Te=k[ke];V=G[ke];for(var Ee=0,Ce=Te.length;Ee<Ce;Ee++){var Ae=O(Te[Ee],V[Ee],xe);w?Pe(Ae.x,Ae.y+m[r-1].y,m[r-1].x+be):Pe(Ae.x,Ae.y,u+be)}}}function Re(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var o=0,s=r+2*d;o<s;o++){var u=N*o,l=N*(o+1);Oe(t+i+u,t+a+u,t+a+l,t+i+l)}}}function Pe(e,n,r){t.push(e),t.push(n),t.push(r)}function Le(e,t,n){Ne(e),Ne(t),Ne(n);var r=o.length/3,i=v.generateTopUV(a,o,r-3,r-2,r-1);De(i[0]),De(i[1]),De(i[2])}function Oe(e,t,n,r){Ne(e),Ne(t),Ne(r),Ne(t),Ne(n),Ne(r);var i=o.length/3,s=v.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Ne(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function De(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(l){for(var t=0,n=N*t,i=0;i<D;i++){var s=C[i];Le(s[2]+n,s[1]+n,s[0]+n)}n=N*(t=r+2*d);for(var u=0;u<D;u++){var c=C[u];Le(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<D;h++){var f=C[h];Le(f[2],f[1],f[0])}for(var p=0;p<D;p++){var v=C[p];Le(v[0]+N*r,v[1]+N*r,v[2]+N*r)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Re(A,t),t+=A.length;for(var n=0,r=k.length;n<r;n++){var i=k[n];Re(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new bl(o,3)),e.setAttribute("uv",new bl(s,2)),e.computeVertexNormals(),e}return(0,l.Z)(n,[{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new Gp[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(Cl),Sv={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new ws(a,o),new ws(s,u),new ws(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new ws(o,1-u),new ws(l,1-h),new ws(f,1-p),new ws(v,1-g)]:[new ws(s,1-u),new ws(c,1-h),new ws(d,1-p),new ws(m,1-g)]}};var kv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,o,s,r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(gp),Mv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ws(0,.5),new ws(.5,0),new ws(0,-.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=ps(o,0,2*Math.PI);for(var s=[],l=[],c=[],h=1/i,f=new Fs,d=new ws,p=0;p<=i;p++)for(var v=a+p*h*o,m=Math.sin(v),g=Math.cos(v),y=0;y<=r.length-1;y++)f.x=r[y].x*m,f.y=r[y].y,f.z=r[y].x*g,l.push(f.x,f.y,f.z),d.x=p/i,d.y=y/(r.length-1),c.push(d.x,d.y);for(var b=0;b<i;b++)for(var x=0;x<r.length-1;x++){var w=x+b*r.length,_=w,S=w+r.length,k=w+r.length+1,M=w+1;s.push(_,S,M),s.push(S,k,M)}if(e.setIndex(s),e.setAttribute("position",new bl(l,3)),e.setAttribute("uv",new bl(c,2)),e.computeVertexNormals(),o===2*Math.PI)for(var T=e.attributes.normal.array,E=new Fs,C=new Fs,A=new Fs,R=i*r.length*3,P=0,L=0;P<r.length;P++,L+=3)E.x=T[L+0],E.y=T[L+1],E.z=T[L+2],C.x=T[R+L+0],C.y=T[R+L+1],C.z=T[R+L+2],A.addVectors(E,C).normalize(),T[L+0]=T[R+L+0]=A.x,T[L+1]=T[R+L+1]=A.y,T[L+2]=T[R+L+2]=A.z;return e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(Cl),Tv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,o,r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(gp),Ev=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a);for(var c=[],h=[],f=[],d=[],p=r,v=(i-r)/(o=Math.max(1,o)),m=new Fs,g=new ws,y=0;y<=o;y++){for(var b=0;b<=a;b++){var x=s+b/a*l;m.x=p*Math.cos(x),m.y=p*Math.sin(x),h.push(m.x,m.y,m.z),f.push(0,0,1),g.x=(m.x/i+1)/2,g.y=(m.y/i+1)/2,d.push(g.x,g.y)}p+=v}for(var w=0;w<o;w++)for(var _=w*(a+1),S=0;S<a;S++){var k=S+_,M=k,T=k+a+1,E=k+a+2,C=k+1;c.push(M,T,C),c.push(T,E,C)}return e.setIndex(c),e.setAttribute("position",new bl(h,3)),e.setAttribute("normal",new bl(f,3)),e.setAttribute("uv",new bl(d,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(Cl),Cv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zp([new ws(0,.5),new ws(-.5,-.5),new ws(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,u.Z)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],l=[],c=0,h=0;if(!1===Array.isArray(r))d(r);else for(var f=0;f<r.length;f++)d(r[f]),e.addGroup(c,h,f),c+=h,h=0;function d(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,u=n.holes;!1===bv.isClockWise(r)&&(r=r.reverse());for(var c=0,f=u.length;c<f;c++){var d=u[c];!0===bv.isClockWise(d)&&(u[c]=d.reverse())}for(var p=bv.triangulateShape(r,u),v=0,m=u.length;v<m;v++){var g=u[v];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var w=0,_=p.length;w<_;w++){var S=p[w],k=S[0]+t,M=S[1]+t,T=S[2]+t;a.push(k,M,T),h+=3}}return e.setIndex(a),e.setAttribute("position",new bl(o,3)),e.setAttribute("normal",new bl(s,3)),e.setAttribute("uv",new bl(l,2)),e}return(0,l.Z)(n,[{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(Cl);var Av=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:c},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var h=Math.min(l+c,Math.PI),f=0,d=[],p=new Fs,v=new Fs,m=[],g=[],y=[],b=[],x=0;x<=a;x++){var w=[],_=x/a,S=0;0==x&&0==l?S=.5/i:x==a&&h==Math.PI&&(S=-.5/i);for(var k=0;k<=i;k++){var M=k/i;p.x=-r*Math.cos(o+M*s)*Math.sin(l+_*c),p.y=r*Math.cos(l+_*c),p.z=r*Math.sin(o+M*s)*Math.sin(l+_*c),g.push(p.x,p.y,p.z),v.copy(p).normalize(),y.push(v.x,v.y,v.z),b.push(M+S,1-_),w.push(f++)}d.push(w)}for(var T=0;T<a;T++)for(var E=0;E<i;E++){var C=d[T][E+1],A=d[T][E],R=d[T+1][E],P=d[T+1][E+1];(0!==T||l>0)&&m.push(C,A,P),(T!==a-1||h<Math.PI)&&m.push(A,R,P)}return e.setIndex(m),e.setAttribute("position",new bl(g,3)),e.setAttribute("normal",new bl(y,3)),e.setAttribute("uv",new bl(b,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(Cl),Rv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,o,r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(gp),Pv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;(0,u.Z)(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],h=[],f=[],d=new Fs,p=new Fs,v=new Fs,m=0;m<=a;m++)for(var g=0;g<=o;g++){var y=g/o*s,b=m/a*Math.PI*2;p.x=(r+i*Math.cos(b))*Math.cos(y),p.y=(r+i*Math.cos(b))*Math.sin(y),p.z=i*Math.sin(b),c.push(p.x,p.y,p.z),d.x=r*Math.cos(y),d.y=r*Math.sin(y),v.subVectors(p,d).normalize(),h.push(v.x,v.y,v.z),f.push(g/o),f.push(m/a)}for(var x=1;x<=a;x++)for(var w=1;w<=o;w++){var _=(o+1)*x+w-1,S=(o+1)*(x-1)+w-1,k=(o+1)*(x-1)+w,M=(o+1)*x+w;l.push(_,S,M),l.push(S,k,M)}return e.setIndex(l),e.setAttribute("position",new bl(c,3)),e.setAttribute("normal",new bl(h,3)),e.setAttribute("uv",new bl(f,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(Cl),Lv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;(0,u.Z)(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var c=[],h=[],f=[],d=[],p=new Fs,v=new Fs,m=new Fs,g=new Fs,y=new Fs,b=new Fs,x=new Fs,w=0;w<=a;++w){var _=w/a*s*Math.PI*2;O(_,s,l,r,m),O(_+.01,s,l,r,g),b.subVectors(g,m),x.addVectors(g,m),y.crossVectors(b,x),x.crossVectors(y,b),y.normalize(),x.normalize();for(var S=0;S<=o;++S){var k=S/o*Math.PI*2,M=-i*Math.cos(k),T=i*Math.sin(k);p.x=m.x+(M*x.x+T*y.x),p.y=m.y+(M*x.y+T*y.y),p.z=m.z+(M*x.z+T*y.z),h.push(p.x,p.y,p.z),v.subVectors(p,m).normalize(),f.push(v.x,v.y,v.z),d.push(w/a),d.push(S/o)}}for(var E=1;E<=a;E++)for(var C=1;C<=o;C++){var A=(o+1)*(E-1)+(C-1),R=(o+1)*E+(C-1),P=(o+1)*E+C,L=(o+1)*(E-1)+C;c.push(A,R,L),c.push(R,P,L)}function O(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(c),e.setAttribute("position",new bl(h,3)),e.setAttribute("normal",new bl(f,3)),e.setAttribute("uv",new bl(d,2)),e}return(0,l.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(Cl),Ov=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Up(new Fs(-1,-1,0),new Fs(-1,1,0),new Fs(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,u.Z)(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var l=r.computeFrenetFrames(i,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var c=new Fs,h=new Fs,f=new ws,d=new Fs,p=[],v=[],m=[],g=[];function y(){for(var e=0;e<i;e++)b(e);b(!1===s?i:0),w(),x()}function b(e){d=r.getPointAt(e/i,d);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var u=s/o*Math.PI*2,f=Math.sin(u),m=-Math.cos(u);h.x=m*t.x+f*n.x,h.y=m*t.y+f*n.y,h.z=m*t.z+f*n.z,h.normalize(),v.push(h.x,h.y,h.z),c.x=d.x+a*h.x,c.y=d.y+a*h.y,c.z=d.z+a*h.z,p.push(c.x,c.y,c.z)}}function x(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;g.push(n,r,s),g.push(r,a,s)}}function w(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)f.x=e/i,f.y=t/o,m.push(f.x,f.y)}return y(),e.setIndex(g),e.setAttribute("position",new bl(p,3)),e.setAttribute("normal",new bl(v,3)),e.setAttribute("uv",new bl(m,2)),e}return(0,l.Z)(n,[{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new Gp[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(Cl),Nv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,u.Z)(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new Fs,s=new Fs;if(null!==r.index){var l=r.attributes.position,c=r.index,h=r.groups;0===h.length&&(h=[{start:0,count:c.count,materialIndex:0}]);for(var f=0,d=h.length;f<d;++f)for(var p=h[f],v=p.start,m=p.count,g=v,y=v+m;g<y;g+=3)for(var b=0;b<3;b++){var x=c.getX(g+b),w=c.getX(g+(b+1)%3);o.fromBufferAttribute(l,x),s.fromBufferAttribute(l,w),!0===Dv(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var _=r.attributes.position,S=0,k=_.count/3;S<k;S++)for(var M=0;M<3;M++){var T=3*S+M,E=3*S+(M+1)%3;o.fromBufferAttribute(_,T),s.fromBufferAttribute(_,E),!0===Dv(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new bl(i,3))}return e}return(0,l.Z)(n)}(Cl);function Dv(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var Iv=Object.freeze({__proto__:null,BoxGeometry:ql,BoxBufferGeometry:ql,CircleGeometry:pp,CircleBufferGeometry:pp,ConeGeometry:mp,ConeBufferGeometry:mp,CylinderGeometry:vp,CylinderBufferGeometry:vp,DodecahedronGeometry:yp,DodecahedronBufferGeometry:yp,EdgesGeometry:Sp,ExtrudeGeometry:_v,ExtrudeBufferGeometry:_v,IcosahedronGeometry:kv,IcosahedronBufferGeometry:kv,LatheGeometry:Mv,LatheBufferGeometry:Mv,OctahedronGeometry:Tv,OctahedronBufferGeometry:Tv,PlaneGeometry:pc,PlaneBufferGeometry:pc,PolyhedronGeometry:gp,PolyhedronBufferGeometry:gp,RingGeometry:Ev,RingBufferGeometry:Ev,ShapeGeometry:Cv,ShapeBufferGeometry:Cv,SphereGeometry:Av,SphereBufferGeometry:Av,TetrahedronGeometry:Rv,TetrahedronBufferGeometry:Rv,TorusGeometry:Pv,TorusBufferGeometry:Pv,TorusKnotGeometry:Lv,TorusKnotBufferGeometry:Lv,TubeGeometry:Ov,TubeBufferGeometry:Ov,WireframeGeometry:Nv}),jv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new ol(0),r.transparent=!0,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(Qu);jv.prototype.isShadowMaterial=!0;var Fv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new ol(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ol(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Lo,r.normalScale=new ws(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Qu);Fv.prototype.isMeshStandardMaterial=!0;var zv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new ws(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,c.Z)(r),"reflectivity",{get:function(){return ps(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenColor=new ol(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new ol(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new ol(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return(0,l.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(Fv);zv.prototype.isMeshPhysicalMaterial=!0;var Bv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new ol(16777215),r.specular=new ol(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ol(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Lo,r.normalScale=new ws(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=wi,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(Qu);Bv.prototype.isMeshPhongMaterial=!0;var Uv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new ol(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ol(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Lo,r.normalScale=new ws(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Qu);Uv.prototype.isMeshToonMaterial=!0;var Vv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Lo,r.normalScale=new ws(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Qu);Vv.prototype.isMeshNormalMaterial=!0;var Gv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new ol(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ol(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=wi,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(Qu);Gv.prototype.isMeshLambertMaterial=!0;var Hv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new ol(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=Lo,r.normalScale=new ws(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(Qu);Hv.prototype.isMeshMatcapMaterial=!0;var Wv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}($d);Wv.prototype.isLineDashedMaterial=!0;var Zv=Object.freeze({__proto__:null,ShadowMaterial:jv,SpriteMaterial:fd,RawShaderMaterial:Mc,ShaderMaterial:Jl,PointsMaterial:ip,MeshPhysicalMaterial:zv,MeshStandardMaterial:Fv,MeshPhongMaterial:Bv,MeshToonMaterial:Uv,MeshNormalMaterial:Vv,MeshLambertMaterial:Gv,MeshDepthMaterial:Gf,MeshDistanceMaterial:Hf,MeshBasicMaterial:sl,MeshMatcapMaterial:Hv,LineDashedMaterial:Wv,LineBasicMaterial:$d,Material:Qu}),$v={arraySlice:function(e,t,n){return $v.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=$v.convertArray(c,u.times.constructor),u.values=$v.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return"continue";var o=0,u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);var l=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h,f=t.times.length-1;if(a<=t.times[0]){var d=o,p=u-o;h=$v.arraySlice(t.values,d,p)}else if(a>=t.times[f]){var v=f*u+o,m=v+u-o;h=$v.arraySlice(t.values,v,m)}else{var g=t.createInterpolant(),y=o,b=u-o;g.evaluate(a),h=$v.arraySlice(g.resultBuffer,y,b)}"quaternion"===r&&(new js).fromArray(h).normalize().conjugate().toArray(h);for(var x=i.times.length,w=0;w<x;++w){var _=w*c+l;if("quaternion"===r)js.multiplyQuaternionsFlat(i.values,_,h,0,i.values,_);else for(var S=c-2*l,k=0;k<S;++k)i.values[_+k]-=h[k]}},s=0;s<i;++s)o();return e.blendMode=bo,e}},qv=function(){function e(t,n,r,i){(0,u.Z)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,l.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();qv.prototype.beforeStart_=qv.prototype.copySampleValue_,qv.prototype.afterEnd_=qv.prototype.copySampleValue_;var Xv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a){var o;return(0,u.Z)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:vo,endingEnd:vo},o}return(0,l.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case mo:i=e,o=2*t-n;break;case go:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case mo:a=e,s=2*n-t;break;case go:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,b=f*v-f*p,x=0;x!==o;++x)i[x]=m*a[l+x]+g*a[u+x]+y*a[s+x]+b*a[c+x];return i}}]),n}(qv),Yv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,l.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),n}(qv),Kv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,l.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(qv),Jv=function(){function e(t,n,r,i){if((0,u.Z)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=$v.convertArray(n,this.TimeBufferType),this.values=$v.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return(0,l.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Kv(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Yv(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Xv(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case ho:t=this.InterpolantFactoryMethodDiscrete;break;case fo:t=this.InterpolantFactoryMethodLinear;break;case po:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ho;case this.InterpolantFactoryMethodLinear:return fo;case this.InterpolantFactoryMethodSmooth:return po}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=$v.arraySlice(n,i,a),this.values=$v.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&$v.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=$v.arraySlice(this.times),t=$v.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===po,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=$v.arraySlice(e,0,a),this.values=$v.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=$v.arraySlice(this.times,0),t=$v.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:$v.convertArray(e.times,Array),values:$v.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Jv.prototype.TimeBufferType=Float32Array,Jv.prototype.ValueBufferType=Float32Array,Jv.prototype.DefaultInterpolation=fo;var Qv=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Jv);Qv.prototype.ValueTypeName="bool",Qv.prototype.ValueBufferType=Array,Qv.prototype.DefaultInterpolation=ho,Qv.prototype.InterpolantFactoryMethodLinear=void 0,Qv.prototype.InterpolantFactoryMethodSmooth=void 0;var em=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Jv);em.prototype.ValueTypeName="color";var tm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Jv);tm.prototype.ValueTypeName="number";var nm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,l.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)js.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(qv),rm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new nm(this.times,this.values,this.getValueSize(),e)}}]),n}(Jv);rm.prototype.ValueTypeName="quaternion",rm.prototype.DefaultInterpolation=fo,rm.prototype.InterpolantFactoryMethodSmooth=void 0;var im=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Jv);im.prototype.ValueTypeName="string",im.prototype.ValueBufferType=Array,im.prototype.DefaultInterpolation=ho,im.prototype.InterpolantFactoryMethodLinear=void 0,im.prototype.InterpolantFactoryMethodSmooth=void 0;var am=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(Jv);am.prototype.ValueTypeName="vector";var om=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yo;(0,u.Z)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ds(),this.duration<0&&this.resetDuration()}return(0,l.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(sm(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Jv.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=$v.getKeyframeOrder(s);s=$v.sortedArray(s,1,l),u=$v.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new tm(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];$v.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[f].morphTargets.length;++g){var y=c[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new tm(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(a||1)}else{var b=".bones["+t[l].name+"]";n(am,b+".position",c,"pos",r),n(rm,b+".quaternion",c,"rot",r),n(am,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function sm(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return tm;case"vector":case"vector2":case"vector3":case"vector4":return am;case"color":return em;case"quaternion":return rm;case"bool":case"boolean":return Qv;case"string":return im}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];$v.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var um={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},lm=(0,l.Z)((function e(t,n,r){(0,u.Z)(this,e);var i=this,a=!1,o=0,s=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var r=c[t],i=c[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),cm=new lm,hm=function(){function e(t){(0,u.Z)(this,e),this.manager=void 0!==t?t:cm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,l.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),fm={},dm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=um.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===fm[e]){fm[e]=[],fm[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then((function(t){if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");var n=fm[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0;return new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var f=n[c];f.onProgress&&f.onProgress(l)}e.enqueue(u),t()}}))}()}})}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){var t=new Response(e);switch(i.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(e){return(new DOMParser).parseFromString(e,i.mimeType)}));case"json":return t.json();default:return t.text()}})).then((function(t){um.add(e,t);var n=fm[e];delete fm[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onLoad&&o.onLoad(t)}i.manager.itemEnd(e)})).catch((function(t){var n=fm[e];delete fm[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)})),this.manager.itemStart(e)}else fm[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(hm),pm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new dm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=om.parse(e[n]);t.push(r)}return t}}]),n}(hm),vm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new fp,s=new dm(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Wi),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Wi),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(hm),mm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=um.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=Es("img");function s(){l(),um.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(hm),gm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new rc,a=new mm(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(hm),ym=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new jd,o=new dm(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Fi,a.wrapT=void 0!==n.wrapT?n.wrapT:Fi,a.magFilter=void 0!==n.magFilter?n.magFilter:Wi,a.minFilter=void 0!==n.minFilter?n.minFilter:Wi,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=qi),1===n.mipmapCount&&(a.minFilter=Wi),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),n}(hm),bm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=new Ps,a=new mm(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(hm),xm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,u.Z)(this,n),(r=t.call(this)).type="Light",r.color=new ol(e),r.intensity=i,r}return(0,l.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Bu);xm.prototype.isLight=!0;var wm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;return(0,u.Z)(this,n),(a=t.call(this,e,i)).type="HemisphereLight",a.position.copy(Bu.DefaultUp),a.updateMatrix(),a.groundColor=new ol(r),a}return(0,l.Z)(n,[{key:"copy",value:function(e){return xm.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(xm);wm.prototype.isHemisphereLight=!0;var _m=new vu,Sm=new Fs,km=new Fs,Mm=function(){function e(t){(0,u.Z)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ws(512,512),this.map=null,this.mapPass=null,this.matrix=new vu,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hc,this._frameExtents=new ws(1,1),this._viewportCount=1,this._viewports=[new Os(0,0,1,1)]}return(0,l.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Sm.setFromMatrixPosition(e.matrixWorld),t.position.copy(Sm),km.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(km),t.updateMatrixWorld(),_m.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_m),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Tm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,new ec(50,1,.5,500))).focus=1,e}return(0,l.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*fs*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),Tr((0,kr.Z)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Mm);Tm.prototype.isSpotLightShadow=!0;var Em=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(Bu.DefaultUp),i.updateMatrix(),i.target=new Bu,i.distance=a,i.angle=o,i.penumbra=s,i.decay=l,i.shadow=new Tm,i}return(0,l.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(xm);Em.prototype.isSpotLight=!0;var Cm=new vu,Am=new Fs,Rm=new Fs,Pm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,new ec(90,1,.5,500)))._frameExtents=new ws(4,2),e._viewportCount=6,e._viewports=[new Os(2,1,1,1),new Os(0,1,1,1),new Os(3,1,1,1),new Os(1,1,1,1),new Os(3,0,1,1),new Os(1,0,1,1)],e._cubeDirections=[new Fs(1,0,0),new Fs(-1,0,0),new Fs(0,0,1),new Fs(0,0,-1),new Fs(0,1,0),new Fs(0,-1,0)],e._cubeUps=[new Fs(0,1,0),new Fs(0,1,0),new Fs(0,1,0),new Fs(0,1,0),new Fs(0,0,1),new Fs(0,0,-1)],e}return(0,l.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Am.setFromMatrixPosition(e.matrixWorld),n.position.copy(Am),Rm.copy(n.position),Rm.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Rm),n.updateMatrixWorld(),r.makeTranslation(-Am.x,-Am.y,-Am.z),Cm.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cm)}}]),n}(Mm);Pm.prototype.isPointLightShadow=!0;var Lm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new Pm,i}return(0,l.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(xm);Lm.prototype.isPointLight=!0;var Om=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,new kc(-5,5,5,-5,.5,500))}return(0,l.Z)(n)}(Mm);Om.prototype.isDirectionalLightShadow=!0;var Nm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(Bu.DefaultUp),i.updateMatrix(),i.target=new Bu,i.shadow=new Om,i}return(0,l.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(xm);Nm.prototype.isDirectionalLight=!0;var Dm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return(0,l.Z)(n)}(xm);Dm.prototype.isAmbientLight=!0;var Im=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,u.Z)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=a,i.height=o,i}return(0,l.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(xm);Im.prototype.isRectAreaLight=!0;var jm=function(){function e(){(0,u.Z)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Fs)}return(0,l.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();jm.prototype.isSphericalHarmonics3=!0;var Fm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jm,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,u.Z)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(xm);Fm.prototype.isLightProbe=!0;var zm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).textures={},r}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new dm(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Zv[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new ol).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new ol).setHex(a.value);break;case"v2":r.uniforms[i].value=(new ws).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new Fs).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new Os).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new _s).fromArray(a.value);break;case"m4":r.uniforms[i].value=(new vu).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new ws).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new ws).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}]),n}(hm),Bm=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(jq){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Um=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(Cl);Um.prototype.isInstancedBufferGeometry=!0;var Vm,Gm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new dm(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=Ts(i.type,a),s=new ud(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new Um:new Cl,a=e.data.index;if(void 0!==a){var o=Ts(a.type,a.array);i.setIndex(new cl(o,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var h=r(e.data,l.data);c=new cd(h,l.itemSize,l.offset,l.normalized)}else{var f=Ts(l.type,l.array);c=new(l.isInstancedBufferAttribute?Ud:cl)(f,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),void 0!==l.updateRange&&(c.updateRange.offset=l.updateRange.offset,c.updateRange.count=l.updateRange.count),i.setAttribute(u,c)}var d=e.data.morphAttributes;if(d)for(var p in d){for(var v=d[p],m=[],g=0,y=v.length;g<y;g++){var b=v[g],x=void 0;if(b.isInterleavedBufferAttribute){var w=r(e.data,b.data);x=new cd(w,b.itemSize,b.offset,b.normalized)}else{var _=Ts(b.type,b.array);x=new cl(_,b.itemSize,b.normalized)}void 0!==b.name&&(x.name=b.name),m.push(x)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var S=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==S)for(var k=0,M=S.length;k!==M;++k){var T=S[k];i.addGroup(T.start,T.count,T.materialIndex)}var E=e.data.boundingSphere;if(void 0!==E){var C=new Fs;void 0!==E.center&&C.fromArray(E.center),i.boundingSphere=new ou(C,E.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(hm),Hm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?Bm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new dm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadAsync",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a,o,s,u;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?Bm.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(a=new dm(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(u=s.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,o,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),void 0!==t){var c=!1;for(var h in a)if(a[h]instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseAsync",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a,o,s,u,l;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,i,s,o,n),l=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,l),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Zp).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new Bd).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new Gm,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in Iv?o=Iv[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new zm;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=om.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:Ts(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new lm(t);(n=new mm(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,f=c.length;h<f;h++){var d=a(c[h]);null!==d&&(d instanceof HTMLImageElement?i[l.uuid].push(d):i[l.uuid].push(new jd(d.data,d.width,d.height)))}}else{var p=a(l.url);null!==p&&(i[l.uuid]=p)}}}return i}},{key:"parseImagesAsync",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f,d,p,v;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=yr(mr().mark((function e(t){var r,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Ts(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=32;break}(i=new mm(this.manager)).setCrossOrigin(this.crossOrigin),s=0,u=t.length;case 8:if(!(s<u)){e.next=32;break}if(l=t[s],c=l.url,!Array.isArray(c)){e.next=25;break}r[l.uuid]=[],h=0,f=c.length;case 14:if(!(h<f)){e.next=23;break}return d=c[h],e.next=18,a(d);case 18:null!==(p=e.sent)&&(p instanceof HTMLImageElement?r[l.uuid].push(p):r[l.uuid].push(new jd(p.data,p.width,p.height)));case 20:h++,e.next=14;break;case 23:e.next=29;break;case 25:return e.next=27,a(l.url);case 27:null!==(v=e.sent)&&(r[l.uuid]=v);case 29:s++,e.next=8;break;case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=void 0,u=t[o.image];Array.isArray(u)?(s=new rc(u),6===u.length&&(s.needsUpdate=!0)):(s=u&&u.data?new jd(u.data,u.width,u.height):new Ps(u),u&&(s.needsUpdate=!0)),s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Wm)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Zm),s.wrapT=n(o.wrap[1],Zm)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,$m)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,$m)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(s.userData=o.userData),r[o.uuid]=s}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new sd,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ol(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new od(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ad(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ec(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new kc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Dm(e.color,e.intensity);break;case"DirectionalLight":a=new Nm(e.color,e.intensity);break;case"PointLight":a=new Lm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Im(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Em(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new wm(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Fm).fromJSON(e);break;case"SkinnedMesh":o=u(e.geometry),s=l(e.material),a=new Dd(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=u(e.geometry),s=l(e.material),a=new Zl(o,s);break;case"InstancedMesh":o=u(e.geometry),s=l(e.material);var h=e.count,f=e.instanceMatrix,d=e.instanceColor;(a=new Zd(o,s,h)).instanceMatrix=new Ud(new Float32Array(f.array),16),void 0!==d&&(a.instanceColor=new Ud(new Float32Array(d.array),d.itemSize));break;case"LOD":a=new Ad;break;case"Line":a=new Qd(u(e.geometry),l(e.material));break;case"LineLoop":a=new rp(u(e.geometry),l(e.material));break;case"LineSegments":a=new np(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new lp(u(e.geometry),l(e.material));break;case"Sprite":a=new Md(l(e.material));break;case"Group":a=new Yf;break;case"Bone":a=new Id;break;default:a=new Bu}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,r,i));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var b=e.levels,x=0;x<b.length;x++){var w=b[x],_=a.getObjectByProperty("uuid",w.object);void 0!==_&&a.addLevel(_,w.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),n}(hm),Wm={UVMapping:Ri,CubeReflectionMapping:Pi,CubeRefractionMapping:Li,EquirectangularReflectionMapping:Oi,EquirectangularRefractionMapping:Ni,CubeUVReflectionMapping:Di,CubeUVRefractionMapping:Ii},Zm={RepeatWrapping:ji,ClampToEdgeWrapping:Fi,MirroredRepeatWrapping:zi},$m={NearestFilter:Bi,NearestMipmapNearestFilter:Ui,NearestMipmapLinearFilter:Gi,LinearFilter:Wi,LinearMipmapNearestFilter:Zi,LinearMipmapLinearFilter:qi},qm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),r=t.call(this,e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,l.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=um.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){um.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(hm);qm.prototype.isImageBitmapLoader=!0;var Xm={getContext:function(){return void 0===Vm&&(Vm=new(window.AudioContext||window.webkitAudioContext)),Vm},setContext:function(e){Vm=e}},Ym=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new dm(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);Xm.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}}]),n}(hm),Km=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,u.Z)(this,n),i=t.call(this,void 0,a);var o=(new ol).set(e),s=(new ol).set(r),l=new Fs(o.r,o.g,o.b),c=new Fs(s.r,s.g,s.b),h=Math.sqrt(Math.PI),f=h*Math.sqrt(.75);return i.sh.coefficients[0].copy(l).add(c).multiplyScalar(h),i.sh.coefficients[1].copy(l).sub(c).multiplyScalar(f),i}return(0,l.Z)(n)}(Fm);Km.prototype.isHemisphereLightProbe=!0;var Jm=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,u.Z)(this,n),r=t.call(this,void 0,i);var a=(new ol).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,l.Z)(n)}(Fm);Jm.prototype.isAmbientLightProbe=!0;var Qm=new vu,eg=new vu,tg=new vu,ng=function(){function e(){(0,u.Z)(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ec,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ec,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return(0,l.Z)(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,tg.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(hs*t.fov*.5)/t.zoom;eg.elements[12]=-i,Qm.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,tg.elements[0]=2*t.near/(r-n),tg.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(tg),n=-o*t.aspect-a,r=o*t.aspect-a,tg.elements[0]=2*t.near/(r-n),tg.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(tg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eg),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qm)}}]),e}(),rg=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,u.Z)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return(0,l.Z)(e,[{key:"start",value:function(){this.startTime=ig(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=ig();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function ig(){return("undefined"===typeof performance?Date:performance).now()}var ag=new Fs,og=new js,sg=new Fs,ug=new Fs,lg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this)).type="AudioListener",e.context=Xm.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new rg,e}return(0,l.Z)(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ag,og,sg),ug.set(0,0,-1).applyQuaternion(og),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ag.x,i),t.positionY.linearRampToValueAtTime(ag.y,i),t.positionZ.linearRampToValueAtTime(ag.z,i),t.forwardX.linearRampToValueAtTime(ug.x,i),t.forwardY.linearRampToValueAtTime(ug.y,i),t.forwardZ.linearRampToValueAtTime(ug.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(ag.x,ag.y,ag.z),t.setOrientation(ug.x,ug.y,ug.z,r.x,r.y,r.z)}}]),n}(Bu),cg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,l.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Bu),hg=new Fs,fg=new js,dg=new Fs,pg=new Fs,vg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return(0,l.Z)(n,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(hg,fg,dg),pg.set(0,0,1).applyQuaternion(fg);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hg.x,r),t.positionY.linearRampToValueAtTime(hg.y,r),t.positionZ.linearRampToValueAtTime(hg.z,r),t.orientationX.linearRampToValueAtTime(pg.x,r),t.orientationY.linearRampToValueAtTime(pg.y,r),t.orientationZ.linearRampToValueAtTime(pg.z,r)}else t.setPosition(hg.x,hg.y,hg.z),t.setOrientation(pg.x,pg.y,pg.z)}}}]),n}(cg),mg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,u.Z)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return(0,l.Z)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),gg=function(){function e(t,n,r){var i,a,o;switch((0,u.Z)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,l.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){js.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;js.multiplyQuaternionsFlat(e,a,e,t,e,n),js.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),yg="\\[\\]\\.:\\/",bg=new RegExp("[\\[\\]\\.:\\/]","g"),xg="[^\\[\\]\\.:\\/]",wg="[^"+yg.replace("\\.","")+"]",_g=/((?:WC+[\/:])*)/.source.replace("WC",xg),Sg=/(WCOD+)?/.source.replace("WCOD",wg),kg=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xg),Mg=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xg),Tg=new RegExp("^"+_g+Sg+kg+Mg+"$"),Eg=["material","materials","bones"],Cg=function(){function e(t,n,r){(0,u.Z)(this,e);var i=r||Ag.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return(0,l.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Ag=function(){function e(t,n,r){(0,u.Z)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,l.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(bg,"")}},{key:"parseTrackName",value:function(e){var t=Tg.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Eg.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();Ag.Composite=Cg,Ag.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ag.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ag.prototype.GetterByBindingType=[Ag.prototype._getValue_direct,Ag.prototype._getValue_array,Ag.prototype._getValue_arrayElement,Ag.prototype._getValue_toArray],Ag.prototype.SetterByBindingTypeAndVersioning=[[Ag.prototype._setValue_direct,Ag.prototype._setValue_direct_setNeedsUpdate,Ag.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ag.prototype._setValue_array,Ag.prototype._setValue_array_setNeedsUpdate,Ag.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ag.prototype._setValue_arrayElement,Ag.prototype._setValue_arrayElement_setNeedsUpdate,Ag.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ag.prototype._setValue_fromArray,Ag.prototype._setValue_fromArray_setNeedsUpdate,Ag.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Rg=function(){function e(){(0,u.Z)(this,e),this.uuid=ds(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return(0,l.Z)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new Ag(h,n[p],r[p]))}else if(d<u){o=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[f]=m,e[m]=h;for(var y=0,b=a;y!==b;++y){var x=i[y],w=x[m],_=x[d];x[d]=w,void 0===_&&(_=new Ag(h,n[y],r[y])),x[m]=_}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var h=--i,f=e[h],d=--a,p=e[d];t[f.uuid]=c,e[c]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],b=g[d];g[c]=y,g[h]=b,g.pop()}}else{var x=--a,w=e[x];x>0&&(t[w.uuid]=c),e[c]=w,e.pop();for(var _=0,S=r;_!==S;++_){var k=n[_];k[c]=k[x],k.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var h=l,f=s.length;h!==f;++h){var d=s[h];c[h]=new Ag(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}();Rg.prototype.isAnimationObjectGroup=!0;var Pg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,u.Z)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:vo,endingEnd:vo},c=0;c!==o;++c){var h=a[c].createInterpolant(null);s[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=lo,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,l.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===bo)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),l[f].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===co;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===uo){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=mo,r.endingEnd=mo):(r.endingStart=e?this.zeroSlopeAtStart?mo:vo:go,r.endingEnd=t?this.zeroSlopeAtEnd?mo:vo:go)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),Lg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,l.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new gg(Ag.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Yv(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?om.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:yo),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new Pg(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?om.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(ss);Lg.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Og=function(){function e(t){(0,u.Z)(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return(0,l.Z)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),Ng=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,u.Z)(this,n),(i=t.call(this,e,r)).meshPerAttribute=a,i}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Tr((0,kr.Z)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(ud);Ng.prototype.isInstancedInterleavedBuffer=!0;var Dg=function(){function e(t,n,r,i,a){(0,u.Z)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return(0,l.Z)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}();Dg.prototype.isGLBufferAttribute=!0;var Ig=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;(0,u.Z)(this,e),this.ray=new pu(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new Tu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,l.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Fg(e,this,n,t),n.sort(jg),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)Fg(e[r],this,n,t);return n.sort(jg),n}}]),e}();function jg(e,t){return e.distance-t.distance}function Fg(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)Fg(i[a],t,n,!0)}var zg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,u.Z)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,l.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ps(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Bg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,u.Z)(this,e),this.radius=t,this.theta=n,this.y=r,this}return(0,l.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ug=new ws,Vg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ws(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws(-1/0,-1/0);(0,u.Z)(this,e),this.min=t,this.max=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Ug.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Ug.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();Vg.prototype.isBox2=!0;var Gg=new Fs,Hg=new Fs,Wg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs;(0,u.Z)(this,e),this.start=t,this.end=n}return(0,l.Z)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){Gg.subVectors(e,this.start),Hg.subVectors(this.end,this.start);var n=Hg.dot(Hg),r=Hg.dot(Gg)/n;return t&&(r=ps(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Zg=new Fs,$g=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),(i=t.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r;for(var a=new Cl,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var c=s/32*Math.PI*2,h=l/32*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}a.setAttribute("position",new bl(o,3));var f=new $d({fog:!1,toneMapped:!1});return i.cone=new np(a,f),i.add(i.cone),i.update(),i}return(0,l.Z)(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Zg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Bu),qg=new Fs,Xg=new vu,Yg=new vu,Kg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,u.Z)(this,n);for(var i=Jg(e),a=new Cl,o=[],s=[],l=new ol(0,0,1),c=new ol(0,1,0),h=0;h<i.length;h++){var f=i[h];f.parent&&f.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(c.r,c.g,c.b))}a.setAttribute("position",new bl(o,3)),a.setAttribute("color",new bl(s,3));var d=new $d({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,d)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,l.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Yg.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(Xg.multiplyMatrices(Yg,s.matrixWorld),qg.setFromMatrixPosition(Xg),i.setXYZ(o,qg.x,qg.y,qg.z),Xg.multiplyMatrices(Yg,s.parent.matrixWorld),qg.setFromMatrixPosition(Xg),i.setXYZ(o+1,qg.x,qg.y,qg.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(np);function Jg(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Jg(e.children[n]));return t}var Qg=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n);var o=new Av(r,4,2),s=new sl({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.light.updateMatrixWorld(),a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return(0,l.Z)(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Zl),ey=new Fs,ty=new ol,ny=new ol,ry=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;var o=new Tv(r);o.rotateY(.5*Math.PI),a.material=new sl({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new cl(l,3)),a.add(new Zl(o,a.material)),a.update(),a}return(0,l.Z)(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");ty.copy(this.light.color),ny.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?ty:ny;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(ey.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Bu),iy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,u.Z)(this,n),a=new ol(a),o=new ol(o);for(var s=i/2,l=r/i,c=r/2,h=[],f=[],d=0,p=0,v=-c;d<=i;d++,v+=l){h.push(-c,0,v,c,0,v),h.push(v,0,-c,v,0,c);var m=d===s?a:o;m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3}var g=new Cl;g.setAttribute("position",new bl(h,3)),g.setAttribute("color",new bl(f,3));var y=new $d({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return(0,l.Z)(n)}(np),ay=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;(0,u.Z)(this,n),s=new ol(s),l=new ol(l);for(var c=[],h=[],f=0;f<=i;f++){var d=f/i*(2*Math.PI),p=Math.sin(d)*r,v=Math.cos(d)*r;c.push(0,0,0),c.push(p,0,v);var m=1&f?s:l;h.push(m.r,m.g,m.b),h.push(m.r,m.g,m.b)}for(var g=0;g<=a;g++)for(var y=1&g?s:l,b=r-r/a*g,x=0;x<o;x++){var w=x/o*(2*Math.PI),_=Math.sin(w)*b,S=Math.cos(w)*b;c.push(_,0,S),h.push(y.r,y.g,y.b),w=(x+1)/o*(2*Math.PI),_=Math.sin(w)*b,S=Math.cos(w)*b,c.push(_,0,S),h.push(y.r,y.g,y.b)}var k=new Cl;k.setAttribute("position",new bl(c,3)),k.setAttribute("color",new bl(h,3));var M=new $d({vertexColors:!0,toneMapped:!1});return(e=t.call(this,k,M)).type="PolarGridHelper",e}return(0,l.Z)(n)}(np),oy=new Fs,sy=new Fs,uy=new Fs,ly=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i){var a;(0,u.Z)(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,void 0===r&&(r=1);var o=new Cl;o.setAttribute("position",new bl([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new $d({fog:!1,toneMapped:!1});return a.lightPlane=new Qd(o,s),a.add(a.lightPlane),(o=new Cl).setAttribute("position",new bl([0,0,0,0,0,1],3)),a.targetLine=new Qd(o,s),a.add(a.targetLine),a.update(),a}return(0,l.Z)(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){oy.setFromMatrixPosition(this.light.matrixWorld),sy.setFromMatrixPosition(this.light.target.matrixWorld),uy.subVectors(sy,oy),this.lightPlane.lookAt(sy),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sy),this.targetLine.scale.z=uy.length()}}]),n}(Bu),cy=new Fs,hy=new Ql,fy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,u.Z)(this,n);var i=new Cl,a=new $d({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={},c=new ol(16755200),h=new ol(16711680),f=new ol(43775),d=new ol(16777215),p=new ol(3355443);function v(e,t,n){m(e,n),m(t,n)}function m(e,t){o.push(0,0,0),s.push(t.r,t.g,t.b),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}return v("n1","n2",c),v("n2","n4",c),v("n4","n3",c),v("n3","n1",c),v("f1","f2",c),v("f2","f4",c),v("f4","f3",c),v("f3","f1",c),v("n1","f1",c),v("n2","f2",c),v("n3","f3",c),v("n4","f4",c),v("p","n1",h),v("p","n2",h),v("p","n3",h),v("p","n4",h),v("u1","u2",f),v("u2","u3",f),v("u3","u1",f),v("c","t",d),v("p","c",p),v("cn1","cn2",p),v("cn3","cn4",p),v("cf1","cf2",p),v("cf3","cf4",p),i.setAttribute("position",new bl(o,3)),i.setAttribute("color",new bl(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=l,r.update(),r}return(0,l.Z)(n,[{key:"update",value:function(){var e=this.geometry,t=this.pointMap;hy.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),dy("c",t,e,hy,0,0,-1),dy("t",t,e,hy,0,0,1),dy("n1",t,e,hy,-1,-1,-1),dy("n2",t,e,hy,1,-1,-1),dy("n3",t,e,hy,-1,1,-1),dy("n4",t,e,hy,1,1,-1),dy("f1",t,e,hy,-1,-1,1),dy("f2",t,e,hy,1,-1,1),dy("f3",t,e,hy,-1,1,1),dy("f4",t,e,hy,1,1,1),dy("u1",t,e,hy,.7,1.1,-1),dy("u2",t,e,hy,-.7,1.1,-1),dy("u3",t,e,hy,0,2,-1),dy("cf1",t,e,hy,-1,0,1),dy("cf2",t,e,hy,1,0,1),dy("cf3",t,e,hy,0,-1,1),dy("cf4",t,e,hy,0,1,1),dy("cn1",t,e,hy,-1,0,-1),dy("cn2",t,e,hy,1,0,-1),dy("cn3",t,e,hy,0,-1,-1),dy("cn4",t,e,hy,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(np);function dy(e,t,n,r,i,a,o){cy.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],cy.x,cy.y,cy.z)}var py,vy,my=new Us,gy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,u.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new Cl;return s.setIndex(new cl(a,1)),s.setAttribute("position",new cl(o,3)),(r=t.call(this,s,new $d({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return(0,l.Z)(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&my.setFromObject(this.object),!my.isEmpty()){var t=my.min,n=my.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e){return np.prototype.copy.call(this,e),this.object=e.object,this}}]),n}(np),yy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;(0,u.Z)(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Cl;return s.setIndex(new cl(a,1)),s.setAttribute("position",new bl(o,3)),(r=t.call(this,s,new $d({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return(0,l.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(np),by=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;(0,u.Z)(this,n);var o=a,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],l=new Cl;l.setAttribute("position",new bl(s,3)),l.computeBoundingSphere(),(r=t.call(this,l,new $d({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var c=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],h=new Cl;return h.setAttribute("position",new bl(c,3)),h.computeBoundingSphere(),r.add(new Zl(h,new sl({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return(0,l.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Ur:Br,this.lookAt(this.plane.normal),Tr((0,kr.Z)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Qd),xy=new Fs,wy=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fs(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fs(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return(0,u.Z)(this,n),(e=t.call(this)).type="ArrowHelper",void 0===py&&((py=new Cl).setAttribute("position",new bl([0,0,0,0,1,0],3)),(vy=new vp(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new Qd(py,new $d({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Zl(vy,new sl({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,l),e}return(0,l.Z)(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xy.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xy,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Bu),_y=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,u.Z)(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Cl;o.setAttribute("position",new bl(i,3)),o.setAttribute("color",new bl(a,3));var s=new $d({vertexColors:!0,toneMapped:!1});return(e=t.call(this,o,s)).type="AxesHelper",e}return(0,l.Z)(n,[{key:"setColors",value:function(e,t,n){var r=new ol,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(np),Sy=function(){function e(){(0,u.Z)(this,e),this.type="ShapePath",this.color=new ol,this.subPaths=[],this.currentPath=null}return(0,l.Z)(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Wp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Zp;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i,a,o,s=bv.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return a=u[0],(o=new Zp).curves=a.curves,l.push(o),l;var c=!s(u[0].getPoints());c=e?!c:c;var h,f,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(h=(a=u[g]).getPoints()),(i=e?!i:i)?(!c&&p[m]&&m++,p[m]={s:new Zp,p:h},p[m].s.curves=a.curves,c&&m++,v[m]=[]):v[m].push({h:a,p:h[0]});if(!p[0])return n(u);if(p.length>1){for(var b=!1,x=[],w=0,_=p.length;w<_;w++)d[w]=[];for(var S=0,k=p.length;S<k;S++)for(var M=v[S],T=0;T<M.length;T++){for(var E=M[T],C=!0,A=0;A<p.length;A++)r(E.p,p[A].p)&&(S!==A&&x.push({froms:S,tos:A,hole:T}),C?(C=!1,d[A].push(E)):b=!0);C&&d[S].push(E)}x.length>0&&(b||(v=d))}for(var R=0,P=p.length;R<P;R++){o=p[R].s,l.push(o);for(var L=0,O=(f=v[R]).length;L<O;L++)o.holes.push(f[L].h)}return l}}]),e}(),ky=new Float32Array(1),My=new Int32Array(ky.buffer),Ty=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"toHalfFloat",value:function(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),ky[0]=e;var t=My[0],n=t>>16&32768,r=t>>12&2047,i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t):i<113?n|=((r|=2048)>>114-i)+(r>>113-i&1):(n|=i-112<<10|r>>1,n+=1&r)}}]),e}(),Ey=0,Cy=1,Ay=0,Ry=1,Py=2;function Ly(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Oy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Ny(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new lp(e,t)}function Dy(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Md(e)}function Iy(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new lp(e,t)}function jy(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ip(e)}function Fy(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ip(e)}function zy(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ip(e)}function By(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Fs(e,t,n)}function Uy(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new cl(e,t).setUsage(Ko)}function Vy(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new hl(e,t)}function Gy(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new fl(e,t)}function Hy(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new dl(e,t)}function Wy(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new pl(e,t)}function Zy(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vl(e,t)}function $y(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ml(e,t)}function qy(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new gl(e,t)}function Xy(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new bl(e,t)}function Yy(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new xl(e,t)}function Ky(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new _y(e)}function Jy(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new gy(e,t)}function Qy(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new np(new Sp(e.geometry),new $d({color:void 0!==t?t:16777215}))}function eb(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new np(new Nv(e.geometry),new $d({color:void 0!==t?t:16777215}))}function tb(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new dm(e)}function nb(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ym(e)}function rb(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new ic(e,n)}function ib(){console.error("THREE.CanvasRenderer has been removed")}function ab(){console.error("THREE.JSONLoader has been removed.")}kp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(kp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Wp.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},iy.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Kg.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},hm.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Bm.extractUrlBase(e)},hm.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Vg.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Vg.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Vg.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Vg.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Us.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Us.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Us.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Us.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Us.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},ou.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},hc.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Wg.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},_s.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},_s.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},_s.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},_s.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},_s.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},_s.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},vu.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},vu.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},vu.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Fs).setFromMatrixColumn(this,3)},vu.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},vu.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},vu.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},vu.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},vu.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},vu.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},vu.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},vu.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},vu.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},vu.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},vu.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},vu.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},vu.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},vu.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},vu.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},vu.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},uc.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},js.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},js.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},pu.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},pu.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},pu.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ku.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ku.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Ku.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Ku.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Ku.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Ku.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ku.getBarycoord(e,t,n,r,i)},Ku.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ku.getNormal(e,t,n,r)},Zp.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Zp.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new _v(this,e)},Zp.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Cv(this,e)},ws.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ws.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},ws.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Fs.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Fs.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Fs.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Fs.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Fs.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Fs.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Fs.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Fs.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Fs.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Os.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Os.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Bu.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Bu.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Bu.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Bu.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Bu.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Bu.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Zl.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Zl.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),xo},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Dd.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ec.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(xm.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(cl.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ko},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ko)}}}),cl.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ko:Yo),this},cl.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},cl.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Cl.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Cl.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new cl(arguments[1],arguments[2])))},Cl.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Cl.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Cl.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Cl.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Cl.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Cl.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ud.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ko:Yo),this},ud.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},_v.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},_v.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},_v.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},sd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Og.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Qu.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ol}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Gr}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Jl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),rd.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},rd.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},rd.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},rd.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},rd.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},rd.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},rd.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},rd.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},rd.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},rd.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},rd.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},rd.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},rd.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},rd.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},rd.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},rd.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},rd.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},rd.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},rd.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},rd.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},rd.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},rd.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},rd.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},rd.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},rd.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(rd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?ko:So}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Wf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ns.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),cg.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ym).load(e,(function(e){t.setBuffer(e)})),this},mg.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},nc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},nc.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},As.crossOrigin=void 0,As.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new bm;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},As.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new gm;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},As.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},As.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var ob={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function sb(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function ub(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new Cl}function lb(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new Cl}function cb(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function hb(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function fb(){console.error("THREE.ImmediateRenderObject has been removed.")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ar}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ar);var db=e,pb=mr().mark(Mb),vb=mr().mark(Fb),mb=mr().mark(zb),gb=mr().mark(Bb);var yb;function bb(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var a=Math.floor((n+r)/2);e[a]<t?(i=a,n=a+1):r=a-1}return i}function xb(e){var t=br(e.split("&"),3),n=t[1],r=t[2],i=br(r.split(" "),2)[1];return r.startsWith("joint")?"&angle&"+i:"&"+n+"&"+i}function wb(e,t,n){e.normalize();var r=void 0,i=new db.Vector3(0,0,0);if(void 0!=t){var a=new db.Vector3(e.x,e.y,e.z),o=new db.Vector3(-e.x,-e.y,-e.z),s=a.distanceTo(t),u=o.distanceTo(t);r=s<u||s==u&&n?i.clone().add(a):i.clone().add(o)}else{var l=new db.Vector3(-e.x,-e.y,-e.z);n&&(l=new db.Vector3(e.x,e.y,e.z)),r=i.clone().add(l)}return r}function _b(e,t){for(var n=0,r=e.length-1,i=void 0;n<=r;){var a=Math.floor((n+r)/2);e[a]<=t?(i=a,n=a+1):r=a-1}return i}function Sb(e,t){for(var n=0,r=e.length-1,i=void 0;n<=r;){var a=Math.floor((n+r)/2);e[a]>=t?(i=a,r=a-1):n=a+1}return i}function kb(e,t){if(void 0===e);else if(Array.isArray(e)){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){kb(n.value,t)}}catch(i){r.e(i)}finally{r.f()}}else t(e)}function Mb(e){var t,n,r,i,a,o;return mr().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=e.trim(),t=!1,n=[],r=0,i=0;case 2:if(!(i<e.length)){s.next=37;break}if(a=e[i],o=e[i+1],n[r]=n[r]||"",'"'!==a||!t||'"'!==o){s.next=10;break}n[r]+=a,++i,s.next=34;break;case 10:if('"'!==a){s.next=14;break}t=!t,s.next=34;break;case 14:if(","!==a||t){s.next=18;break}++r,s.next=34;break;case 18:if("\r"!==a||"\n"!==o||t){s.next=26;break}return s.next=21,n;case 21:r=0,n=[],++i,s.next=34;break;case 26:if("\n"!==a&&"\r"!==a||t){s.next=33;break}return s.next=29,n;case 29:r=0,n=[],s.next=34;break;case 33:n[r]+=a;case 34:i++,s.next=2;break;case 37:if(s.t0=n.length,!s.t0){s.next=41;break}return s.next=41,n;case 41:case"end":return s.stop()}}),pb)}function Tb(e,t){var n=e.r,r=e.g,i=e.b,a=(n+r+i)/3;return n=Ab(Ab(n,a,.4),t.r,.4),r=Ab(Ab(r,a,.4),t.g,.4),i=Ab(Ab(i,a,.4),t.b,.4),new db.Color(n,r,i)}function Eb(e){return e*(Math.PI/180)}function Cb(e){return e*(180/Math.PI)}function Ab(e,t,n){return e+(t-e)*n}!function(e){e.NUMBER="number",e.STRING="string",e.STRING_AND_NUMBER="string_and_number"}(yb||(yb={}));var Rb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Pb=new Set;function Lb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1?arguments[1]:void 0;t&&t<e&&(t=e);for(var n="",r=100,i=r;;){var a=n+Rb[Nb(0,Rb.length-1)];if(void 0!==t&&Lb.length>t)n="";else if(a.length<e||i<=0)n=a,i=r;else{if(!Pb.has(a))return Pb.add(a),a;i--}}}function Ob(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(t-e)+e}function Nb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(Ob(e,t))}function Db(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,n="#"+Math.floor(Ob(e,t)).toString(16);n.length<6;)n+="0";return n}function Ib(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function jb(e){for(var t="",n=0,r=0;r<e.length;r++){var i=e[r];"0123456789".includes(i)?t+=i:0===n&&"."===i?(t+=i,n++):0===t.length&&"-"===i&&(t+=i)}return t}function Fb(e,t,n){var r,i,a,o;return mr().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a=null!==n&&void 0!==n?n:1,void 0===t?(r=0,i=e):(r=e,i=t),o=r;case 3:if(!(o<i)){s.next=9;break}return s.next=6,o;case 6:o+=a,s.next=3;break;case 9:case"end":return s.stop()}}),vb)}function zb(e){var t,n,r,i;return mr().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=0,n=s(e),a.prev=2,n.s();case 4:if((r=n.n()).done){a.next=10;break}return i=r.value,a.next=8,[t++,i];case 8:a.next=4;break;case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),n.e(a.t0);case 15:return a.prev=15,n.f(),a.finish(15);case 18:case"end":return a.stop()}}),mb,null,[[2,12,15,18]])}function Bb(){var e,t,n,r,i,a,o,u,l,c,h=arguments;return mr().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:for(e=h.length,t=new Array(e),n=0;n<e;n++)t[n]=h[n];r=t.map((function(e){return e[Symbol.iterator]()}));case 2:0,i=[],a=s(r),f.prev=5,a.s();case 7:if((o=a.n()).done){f.next=15;break}if(u=o.value,l=u.next(),c=l.value,!l.done){f.next=12;break}return f.abrupt("break",15);case 12:i.push(c);case 13:f.next=7;break;case 15:f.next=20;break;case 17:f.prev=17,f.t0=f.catch(5),a.e(f.t0);case 20:return f.prev=20,a.f(),f.finish(20);case 23:if(i.length===r.length){f.next=25;break}return f.abrupt("return");case 25:return f.next=27,i;case 27:f.next=2;break;case 29:case"end":return f.stop()}}),gb,null,[[5,17,20,23]])}function Ub(e,t){for(var n=-1,r=e.length;1+n<r;){var i=n+(r-n>>1);t(e[i])?r=i:n=i}return r}function Vb(e,t,n){return Ub(e,void 0===n?function(e){return e>=t}:function(e){return n(e)>=n(t)})}function Gb(e,t){var n,r=new Map,i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t(a);void 0!==r.get(o)?r.set(o,[a,!1]):r.set(o,[a,!0])}}catch(p){i.e(p)}finally{i.f()}var u,l=[],c=s(r.entries());try{for(c.s();!(u=c.n()).done;){var h=br(u.value,2),f=br(h[1],2),d=f[0];f[1]&&l.push(d)}}catch(p){c.e(p)}finally{c.f()}return l}function Hb(e,t,n){return e.filter((function(e){return n(e)===n(t)})).length}function Wb(e){return function(){var t;e>0&&((t=console).log.apply(t,arguments),e--)}}Wb(1e3);function Zb(e){return e="Could not deserialize Animation: ".concat(e),dr.error(e),e}var $b=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,u.Z)(this,e),this._object=void 0,this._animationTable=void 0,this._offset=void 0,this._lengthen=void 0,this._object=t,this._animationTable=n,this._offset=r,this._lengthen=i}return(0,l.Z)(e,[{key:"copy",value:function(e,t){var n=t.get(e._object);if(void 0===n)throw Error("Object ".concat(this._object.name(),"  could not be mapped to a copy!"));return this._object=n,this._animationTable=e._animationTable.clone(),this._offset=e._offset,this._lengthen=e._lengthen,this}},{key:"clone",value:function(t){var n=t.get(this._object);if(void 0===n)throw Error("Object ".concat(this._object.name()," could not be mapped to a clone!"));return new e(n,this._animationTable.clone(),this._offset,this._lengthen)}},{key:"objectAnimating",value:function(){return this._object}},{key:"animationTable",value:function(){return this._animationTable}},{key:"startTime",value:function(){return this._animationTable.startTime()+this._offset}},{key:"endTime",value:function(){return this._animationTable.endTime()+this._offset+this._lengthen}},{key:"update",value:function(e){e+=this._offset;var t=[this.startTime(),this.endTime()],n=t[0],r=t[1],i=r+n,a=e+n;(e-=Ab(0,this._lengthen,a/i))<n&&(e=n),e>r&&(e=r);var o=this._animationTable.frame(e,this._object.name());this._object.applyFrame(o)}},{key:"setOffset",value:function(e){this._offset=e,dr.render(),dr.updateUI()}},{key:"robot",value:function(){return this._object}},{key:"offset",value:function(){return this._offset}},{key:"setLengthen",value:function(e){this._lengthen=e,dr.render(),dr.updateUI()}},{key:"lengthen",value:function(){return this._lengthen}},{key:"serialize",value:function(){return{objectId:this._object.idValue(),animationTableId:this._animationTable.idValue(),offset:this._offset,lengthen:this._lengthen}}}],[{key:"deserialize",value:function(){var t=yr(mr().mark((function t(n,r,i,a){var o,s,u,l;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=r.get(n.objectId))){t.next=24;break}if(s=o,!(u=n.animationTableId)){t.next=21;break}if(!(l=i.get(u))){t.next=18;break}if(a){t.next=11;break}return t.abrupt("return",new e(s,l,n.offset,n.lengthen));case 11:return a._object=s,a._animationTable=l,n.offset&&(a._offset=n.offset),n.lengthen&&(a._offset=n.lengthen),t.abrupt("return",a);case 16:t.next=19;break;case 18:throw Zb("An animation table with ID ".concat(u," could not be found."));case 19:t.next=22;break;case 21:throw Zb("AnimationTable seral was not present while deserializing Animation.");case 22:t.next=25;break;case 24:throw Zb('Uknown object ID "'.concat(n.objectId,'"'));case 25:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()}]),e}(),qb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Animation Group",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.Z)(this,e),this._name=void 0,this._animations=void 0,this._name=t,this._animations=pr(n)}return(0,l.Z)(e,[{key:"setName",value:function(e){this._name=e,dr.updateUI()}},{key:"name",value:function(){return this._name}},{key:"startTime",value:function(){var e,t=1/0,n=s(this._animations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Math.min(t,r.startTime())}}catch(i){n.e(i)}finally{n.f()}return t===1/0&&(t=0),t}},{key:"endTime",value:function(){var e,t=-1/0,n=s(this._animations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Math.max(t,r.endTime())}}catch(i){n.e(i)}finally{n.f()}return t===-1/0&&(t=1),t}},{key:"update",value:function(e){var t,n=s(this._animations);try{for(n.s();!(t=n.n()).done;){t.value.update(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"animations",value:function(){return this._animations}},{key:"addAnimation",value:function(e){-1===this._animations.indexOf(e)&&(this._animations.push(e),dr.updateUI())}},{key:"removeAnimation",value:function(e){var t=this._animations.indexOf(e);t>=0&&(this._animations.splice(t,1),dr.updateUI())}},{key:"copy",value:function(e,t){this._name=e.name();var n,r=s(e._animations);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.addAnimation(i.clone(t))}}catch(a){r.e(a)}finally{r.f()}return this}},{key:"clone",value:function(t){return(new e).copy(this,t)}},{key:"serialize",value:function(){var e,t=[],n=s(this._animations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.serialize())}}catch(i){n.e(i)}finally{n.f()}return{name:this._name,animations:t}}}],[{key:"deserialize",value:function(){var t=yr(mr().mark((function t(n,r,i,a){var o,u,l,c,h,f,d,p,v,m;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null!==a&&void 0!==a?a:new e,!(u=n.animations)){t.next=12;break}n.name&&(o._name=n.name),l=[],c=s(u);try{for(c.s();!(h=c.n()).done;)f=h.value,l.push($b.deserialize(f,r,i))}catch(g){c.e(g)}finally{c.f()}return t.next=9,Promise.all(l);case 9:d=t.sent,p=s(d);try{for(p.s();!(v=p.n()).done;)m=v.value,o.addAnimation(m)}catch(g){p.e(g)}finally{p.f()}case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()}]),e}(),Xb=n(763),Yb=n.n(Xb),Kb=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,r=arguments.length>1?arguments[1]:void 0;(0,u.Z)(this,e),this._renderFunc=void 0,this._lastTimeRendered=void 0,this._maxFPS=void 0,this._renderFuncs=void 0,this.addBoundFunc=function(e){t._renderFuncs.push(e)},this.removeBoundFunc=function(e){var n=t._renderFuncs.indexOf(e);n>-1&&t._renderFuncs.splice(n,1)},this.call=function(){void 0===t._renderFunc&&(t._renderFunc=t.renderFunc,requestAnimationFrame((function(){t.renderFunc()})))},this.forceCall=function(){t.renderFunc(!0)},this.renderFunc=function(e){var n=Date.now(),r=n-t._lastTimeRendered;if(e||r>=1e3/t._maxFPS){var i,a=s(t._renderFuncs);try{for(a.s();!(i=a.n()).done;){(0,i.value)()}}catch(o){a.e(o)}finally{a.f()}return t._lastTimeRendered=n,void(t._renderFunc=void 0)}requestAnimationFrame((function(){t.renderFunc()}))},this._lastTimeRendered=0,this._maxFPS=n,this._renderFuncs=null!==r&&void 0!==r?r:[]}return(0,l.Z)(e,[{key:"maxFPS",value:function(){return this._maxFPS}},{key:"setMaxFPS",value:function(e){this._maxFPS=e}}]),e}(),Jb=function(){function e(t,n,r,i){var a=this;(0,u.Z)(this,e),this._currTime=void 0,this._lastTimeRendered=void 0,this._endTime=void 0,this._startTime=void 0,this._maxFPS=void 0,this._wasPlaying=void 0,this._playFunc=void 0,this._renderFunc=void 0,this._render=void 0,this.time=function(){return a._currTime},this.setTime=function(e){(e=(0,Xb.clamp)(e,a._startTime,a._endTime))!==a._currTime&&(void 0===a._playFunc?(a._currTime=e,a._render.call(),dr.updateUI()):a._currTime=e)},this.start=function(){void 0===a._playFunc&&(a._playFunc=function(){var e=Date.now(),t=Math.abs(e-a._lastTimeRendered);if(!1===a._wasPlaying)return a._wasPlaying=!0,a._lastTimeRendered=e,void(void 0!==a._playFunc?requestAnimationFrame(a._playFunc):a.stop());void 0!==a._playFunc&&(a._currTime+=t/1e3,e-a._lastTimeRendered>=1e3/(2*a._maxFPS)&&(a._render.forceCall(),a._lastTimeRendered=e),void 0!==a._playFunc&&requestAnimationFrame(a._playFunc))},requestAnimationFrame(a._playFunc))},this.stop=function(){a._wasPlaying=!1,a._playFunc=void 0},this.restart=function(){a.setTime(a._startTime)},this.render=function(){var e=a._currTime;e>a._endTime?(e=a._endTime,a._currTime=a._endTime,a.stop()):e<a._startTime&&(a._currTime=0,e=a._startTime),a._renderFunc(e)},this._currTime=n,this._lastTimeRendered=0,this._startTime=n,this._endTime=r,this._maxFPS=t,this._wasPlaying=!1,this._renderFunc=i,this._render=new Kb(t,[this.render])}return(0,l.Z)(e,[{key:"startTime",value:function(){return this._startTime}},{key:"setStartTime",value:function(e){(e=Math.min(e,this._endTime))!==this._startTime&&(this._startTime=e,this._currTime<e&&(this._currTime=e),dr.updateUI())}},{key:"endTime",value:function(){return this._endTime}},{key:"setEndTime",value:function(e){(e=Math.max(this._startTime,e))!==this._endTime&&(this._endTime=e,this._currTime>e&&(this._currTime=e),dr.updateUI())}},{key:"maxFPS",value:function(){return this._maxFPS}},{key:"setMaxFPS",value:function(e){this._maxFPS=Math.max(e,1),this._render.setMaxFPS(e),dr.updateUI()}}]),e}();function Qb(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ex(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ex(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ex=function(e){this.s=e,this.n=e.next},ex.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ex(e)}var tx=function(){function e(t){(0,u.Z)(this,e),this._id=void 0,this._id=null!==t&&void 0!==t?t:Lb(64,64)}return(0,l.Z)(e,[{key:"set",value:function(e){this._id=e}},{key:"value",value:function(){return this._id}},{key:"regen",value:function(){this._id=Lb(64,64)}}]),e}(),nx=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new sx(e)})),r.register((function(e){return new dx(e)})),r.register((function(e){return new px(e)})),r.register((function(e){return new ux(e)})),r.register((function(e){return new lx(e)})),r.register((function(e){return new cx(e)})),r.register((function(e){return new hx(e)})),r.register((function(e){return new fx(e)})),r.register((function(e){return new ax(e)})),r.register((function(e){return new vx(e)})),r}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Bm.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new dm(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(jq){o(jq)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"===typeof e)i=e;else if(Bm.decodeText(new Uint8Array(e,0,4))===mx){try{a[ix.KHR_BINARY_GLTF]=new bx(e)}catch(p){return void(r&&r(p))}i=a[ix.KHR_BINARY_GLTF].content}else i=Bm.decodeText(new Uint8Array(e));var s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new Kx(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);o[c.name]=c,a[c.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case ix.KHR_MATERIALS_UNLIT:a[f]=new ox;break;case ix.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[f]=new Sx;break;case ix.KHR_DRACO_MESH_COMPRESSION:a[f]=new xx(s,this.dracoLoader);break;case ix.KHR_TEXTURE_TRANSFORM:a[f]=new wx;break;case ix.KHR_MESH_QUANTIZATION:a[f]=new kx;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(hm);function rx(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var ix={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},ax=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,l.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new ol(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Nm(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Lm(s)).distance=u;break;case"spot":(i=new Em(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),ox=function(){function e(){(0,u.Z)(this,e),this.name=ix.KHR_MATERIALS_UNLIT}return(0,l.Z)(e,[{key:"getMaterialType",value:function(){return sl}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new ol(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}]),e}(),sx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_CLEARCOAT}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ws(o,o)}return Promise.all(i)}}]),e}(),ux=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_SHEEN}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new ol(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),lx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_TRANSMISSION}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),cx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_VOLUME}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new ol(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),hx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_IOR}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),fx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_MATERIALS_SPECULAR}return(0,l.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?zv:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new ol(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture).then((function(e){e.encoding=ko}))),Promise.all(i)}}]),e}(),dx=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.KHR_TEXTURE_BASISU}return(0,l.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=n.images[i.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,o)}}]),e}(),px=function(){function e(t){(0,u.Z)(this,e),this.parser=t,this.name=ix.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,l.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),vx=function(){function e(t){(0,u.Z)(this,e),this.name=ix.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,l.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new ArrayBuffer(i*o),u=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(s),i,o,u,r.mode,r.filter),s}))}return null}}]),e}(),mx="glTF",gx=1313821514,yx=5130562,bx=(0,l.Z)((function e(t){(0,u.Z)(this,e),this.name=ix.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Bm.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==mx)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var s=i.getUint32(a,!0);if(a+=4,s===gx){var l=new Uint8Array(t,12+a,o);this.content=Bm.decodeText(l)}else if(s===yx){var c=12+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),xx=function(){function e(t,n){if((0,u.Z)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ix.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,l.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},u={};for(var l in a){var c=zx[l]||l.toLowerCase();o[c]=a[l]}for(var h in e.attributes){var f=zx[h]||h.toLowerCase();if(void 0!==a[h]){var d=n.accessors[e.attributes[h]],p=Dx[d.componentType];u[f]=p,s[f]=!0===d.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,u)}))}))}}]),e}(),wx=function(){function e(){(0,u.Z)(this,e),this.name=ix.KHR_TEXTURE_TRANSFORM}return(0,l.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),_x=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,u.Z)(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var i=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),h={specular:{value:(new ol).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=h,r.onBeforeCompile=function(e){for(var t in h)e.uniforms[t]=h[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",l)},Object.defineProperties((0,c.Z)(r),{specular:{get:function(){return h.specular.value},set:function(e){h.specular.value=e}},specularMap:{get:function(){return h.specularMap.value},set:function(e){h.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return h.glossiness.value},set:function(e){h.glossiness.value=e}},glossinessMap:{get:function(){return h.glossinessMap.value},set:function(e){h.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return(0,l.Z)(n,[{key:"copy",value:function(e){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(Fv),Sx=function(){function e(){(0,u.Z)(this,e),this.name=ix.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return(0,l.Z)(e,[{key:"getMaterialType",value:function(){return _x}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new ol(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new ol(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new ol(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",o)),i.push(n.assignTexture(e,"specularMap",o))}return Promise.all(i)}},{key:"createMaterial",value:function(e){var t=new _x(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=Lo,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),kx=(0,l.Z)((function e(){(0,u.Z)(this,e),this.name=ix.KHR_MESH_QUANTIZATION})),Mx=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,i,a){return(0,u.Z)(this,n),t.call(this,e,r,i,a)}return(0,l.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}}]),n}(qv);Mx.prototype.beforeStart_=Mx.prototype.copySampleValue_,Mx.prototype.afterEnd_=Mx.prototype.copySampleValue_,Mx.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+c,b=0;b!==o;b++){var x=a[p+b+o],w=a[p+b+s]*l,_=a[d+b+o],S=a[d+b]*l;i[b]=g*x+y*w+v*_+m*S}return i};var Tx=new js,Ex=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=Tr((0,kr.Z)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return Tx.fromArray(a).normalize().toArray(a),a}}]),n}(Mx),Cx=0,Ax=1,Rx=2,Px=3,Lx=4,Ox=5,Nx=6,Dx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ix={9728:Bi,9729:Wi,9984:Ui,9985:Zi,9986:Gi,9987:qi},jx={33071:Fi,33648:zi,10497:ji},Fx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bx={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ux={CUBICSPLINE:void 0,LINEAR:fo,STEP:ho},Vx="OPAQUE",Gx="MASK",Hx="BLEND";function Wx(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Zx(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function $x(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qx(e){var t=e.extensions&&e.extensions[ix.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+Xx(t.attributes):e.indices+":"+Xx(e.attributes)+":"+e.mode}function Xx(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Yx(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var Kx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new rx,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new qm(this.options.manager):this.textureLoader=new bm(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new dm(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,l.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Wx(i,a,r),Zx(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=s(t.children.entries());try{for(o.s();!(a=o.n()).done;){var u=br(a.value,2),l=u[0];e(u[1],n.children[l])}}catch(c){o.e(c)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[ix.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Bm.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,a,o=e[0],s=Fx[r.type],u=Dx[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(f&&f!==c){var p=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,m=t.cache.get(v);m||(i=new u(o,p*f,r.count*f/l),m=new ud(i,f/l),t.cache.add(v,m)),a=new cd(m,s,h%f/l,d)}else i=null===o?new u(r.count*s):new u(o,h,r.count*s),a=new cl(i,s,d);if(void 0!==r.sparse){var g=Fx.SCALAR,y=Dx[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),_=new u(e[2],x,r.sparse.count*s);null!==o&&(a=new cl(a.array.slice(),a.itemSize,a.normalized));for(var S=0,k=w.length;S<k;S++){var M=w[S];if(a.setX(M,_[S*s]),s>=2&&a.setY(M,_[S*s+1]),s>=3&&a.setZ(M,_[S*s+2]),s>=4&&a.setW(M,_[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,i,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=this.options,o=i.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var u=self.URL||self.webkitURL,l=t.uri||"",c=!1;if(void 0!==t.bufferView)l=r.getDependency("bufferView",t.bufferView).then((function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return l=u.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(l).then((function(e){return new Promise((function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){var n=new Ps(e);n.needsUpdate=!0,t(n)}),n.load(Bm.resolveURL(e,a.path),i,void 0,r)}))})).then((function(t){!0===c&&u.revokeObjectURL(l),t.flipY=!1,o.name&&(t.name=o.name);var n=(i.samplers||{})[o.sampler]||{};return t.magFilter=Ix[n.magFilter]||Wi,t.minFilter=Ix[n.minFilter]||qi,t.wrapS=jx[n.wrapS]||ji,t.wrapT=jx[n.wrapT]||ji,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null}));return this.textureCache[s]=h,h}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[ix.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[ix.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var o=r.associations.get(i);i=r.extensions[ix.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,o)}}return e[t]=i,i}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new ip,Qu.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new $d,Qu.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(u,l)),n=l}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return Fv}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=a.extensions||{},u=[];if(s[ix.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=i[ix.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),u.push(l.extendParams(o,a,n))}else if(s[ix.KHR_MATERIALS_UNLIT]){var c=i[ix.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),u.push(c.extendParams(o,a,n))}else{var h=a.pbrMetallicRoughness||{};if(o.color=new ol(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var f=h.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}void 0!==h.baseColorTexture&&u.push(n.assignTexture(o,"map",h.baseColorTexture)),o.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,o.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(u.push(n.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=Vr);var d=a.alphaMode||Vx;if(d===Hx?(o.transparent=!0,o.depthWrite=!1):(o.format=la,o.transparent=!1,d===Gx&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==sl&&(u.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new ws(1,1),void 0!==a.normalTexture.scale)){var p=a.normalTexture.scale;o.normalScale.set(p,p)}return void 0!==a.occlusionTexture&&t!==sl&&(u.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==sl&&(o.emissive=(new ol).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==sl&&u.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture)),Promise.all(u).then((function(){var r;return r=t===_x?i[ix.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),a.name&&(r.name=a.name),r.map&&(r.map.encoding=ko),r.emissiveMap&&(r.emissiveMap.encoding=ko),Zx(r,a),n.associations.set(r,{materials:e}),a.extensions&&Wx(i,r,a),r}))}},{key:"createUniqueName",value:function(e){for(var t=Ag.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[ix.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Qx(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var u=e[o],l=qx(u),c=r[l];if(c)a.push(c.promise);else{var h=void 0;h=u.extensions&&u.extensions[ix.KHR_DRACO_MESH_COMPRESSION]?i(u):Qx(new Cl,u,t),r[l]={primitive:u,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.json,i=this.extensions,a=r.meshes[e],o=a.primitives,s=[],u=0,l=o.length;u<l;u++){var c=void 0===o[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new Fv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Br})),t.DefaultMaterial):this.getDependency("material",o[u].material);s.push(c)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(t){for(var r=t.slice(0,t.length-1),s=t[t.length-1],u=[],l=0,c=s.length;l<c;l++){var h=s[l],f=o[l],d=void 0,p=r[l];if(f.mode===Lx||f.mode===Ox||f.mode===Nx||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new Dd(h,p):new Zl(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===Ox?d.geometry=ew(d.geometry,wo):f.mode===Nx&&(d.geometry=ew(d.geometry,_o));else if(f.mode===Ax)d=new np(h,p);else if(f.mode===Px)d=new Qd(h,p);else if(f.mode===Rx)d=new rp(h,p);else{if(f.mode!==Cx)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new lp(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&$x(d,a),d.name=n.createUniqueName(a.name||"mesh_"+e),Zx(d,a),f.extensions&&Wx(i,d,f),n.assignFinalMaterial(d),u.push(d)}for(var v=0,m=u.length;v<m;v++)n.associations.set(u[v],{meshes:e,primitives:v});if(1===u.length)return u[0];var g=new Yf;n.associations.set(g,{meshes:e});for(var y=0,b=u.length;y<b;y++)g.add(u[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new ec(xs.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new kc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Zx(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[],s=0,u=t.channels.length;s<u;s++){var l=t.channels[s],c=t.samplers[l.sampler],h=l.target,f=void 0!==h.node?h.node:h.id,d=void 0!==t.parameters?t.parameters[c.input]:c.input,p=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",d)),i.push(this.getDependency("accessor",p)),a.push(c),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){for(var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=[],l=function(){var e,t=r[c],n=i[c],l=a[c],h=o[c],f=s[c];if(void 0===t)return"continue";switch(t.updateMatrix(),t.matrixAutoUpdate=!0,Bx[f.path]){case Bx.weights:e=tm;break;case Bx.rotation:e=rm;break;default:e=am}var d=t.name?t.name:t.uuid,p=void 0!==h.interpolation?Ux[h.interpolation]:fo,v=[];Bx[f.path]===Bx.weights?t.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(d);var m=l.array;if(l.normalized){for(var g=Yx(m.constructor),y=new Float32Array(m.length),b=0,x=m.length;b<x;b++)y[b]=m[b]*g;m=y}for(var w=0,_=v.length;w<_;w++){var S=new e(v[w]+"."+Bx[f.path],n.array,m,p);"CUBICSPLINE"===h.interpolation&&(S.createInterpolant=function(e){return new(this instanceof rm?Ex:Mx)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}},c=0,h=r.length;c<h;c++)l();var f=t.name?t.name:"animation_"+e;return new om(f,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if((o=!0===i.isBone?new Id:t.length>1?new Yf:1===t.length?t[0]:new Bu)!==t[0])for(var s=0,u=t.length;s<u;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),Zx(o,i),i.extensions&&Wx(n,o,i),void 0!==i.matrix){var l=new vu;l.fromArray(i.matrix),o.applyMatrix4(l)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,a=new Yf;r.name&&(a.name=i.createUniqueName(r.name)),Zx(a,r),r.extensions&&Wx(n,a,r);for(var o=r.nodes||[],u=[],l=0,c=o.length;l<c;l++)u.push(Jx(o[l],a,t,i));return Promise.all(u).then((function(){return i.associations=function(e){var t,n=new Map,r=s(i.associations);try{for(r.s();!(t=r.n()).done;){var a=br(t.value,2),o=a[0],u=a[1];(o instanceof Qu||o instanceof Ps)&&n.set(o,u)}}catch(l){r.e(l)}finally{r.f()}return e.traverse((function(e){var t=i.associations.get(e);null!=t&&n.set(e,t)})),n}(a),a}))}}]),e}();function Jx(e,t,n,r){var i=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then((function(e){for(var n=[],i=0,a=(t=e).joints.length;i<a;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],i=[],a=0,o=n.length;a<o;a++){var s=n[a];if(s){r.push(s);var u=new vu;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new Bd(r,i),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var a=[];if(i.children)for(var o=i.children,s=0,u=o.length;s<u;s++){var l=o[s];a.push(Jx(l,e,n,r))}return Promise.all(a)}))}function Qx(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=zx[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return Zx(e,t),function(e,t,n){var r=t.attributes,i=new Us;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new Fs(o[0],o[1],o[2]),new Fs(s[0],s[1],s[2])),a.normalized){var u=Yx(Dx[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new Fs,h=new Fs,f=0,d=l.length;f<d;f++){var p=l[f];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=Yx(Dx[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var b=new ou;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=0,o=t.length;a<o;a++){var s=t[a];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],l=[],c=0,h=t.length;c<h;c++){var f=t[c];if(r){var d=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):e.attributes.position;u.push(d)}if(i){var p=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):e.attributes.normal;l.push(p)}}return Promise.all([Promise.all(u),Promise.all(l)]).then((function(t){var n=t[0],a=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function ew(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===_o)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2===0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var tw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new dm(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(n))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){function t(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}var n,r=function(e){if("string"===typeof e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){var n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;for(var r=[115,111,108,105,100],i=0;i<5;i++)if(t(r,n,i))return!1;return!0}(r)?function(e){for(var t,n,r,i,a,o,s,u,l=new DataView(e),c=l.getUint32(80,!0),h=!1,f=0;f<70;f++)1129270351==l.getUint32(f,!1)&&82==l.getUint8(f+4)&&61==l.getUint8(f+5)&&(h=!0,i=new Float32Array(3*c*3),a=l.getUint8(f+6)/255,o=l.getUint8(f+7)/255,s=l.getUint8(f+8)/255,u=l.getUint8(f+9)/255);for(var d=new Cl,p=new Float32Array(3*c*3),v=new Float32Array(3*c*3),m=0;m<c;m++){var g=84+50*m,y=l.getFloat32(g,!0),b=l.getFloat32(g+4,!0),x=l.getFloat32(g+8,!0);if(h){var w=l.getUint16(g+48,!0);0===(32768&w)?(t=(31&w)/31,n=(w>>5&31)/31,r=(w>>10&31)/31):(t=a,n=o,r=s)}for(var _=1;_<=3;_++){var S=g+12*_,k=3*m*3+3*(_-1);p[k]=l.getFloat32(S,!0),p[k+1]=l.getFloat32(S+4,!0),p[k+2]=l.getFloat32(S+8,!0),v[k]=y,v[k+1]=b,v[k+2]=x,h&&(i[k]=t,i[k+1]=n,i[k+2]=r)}}return d.setAttribute("position",new cl(p,3)),d.setAttribute("normal",new cl(v,3)),h&&(d.setAttribute("color",new cl(i,3)),d.hasColors=!0,d.alpha=u),d}(r):function(e){for(var t,n=new Cl,r=/solid([\s\S]*?)endsolid/g,i=/facet([\s\S]*?)endfacet/g,a=0,o=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+o+o+o,"g"),u=new RegExp("normal"+o+o+o,"g"),l=[],c=[],h=new Fs,f=0,d=0,p=0;null!==(t=r.exec(e));){d=p;for(var v=t[0];null!==(t=i.exec(v));){for(var m=0,g=0,y=t[0];null!==(t=u.exec(y));)h.x=parseFloat(t[1]),h.y=parseFloat(t[2]),h.z=parseFloat(t[3]),g++;for(;null!==(t=s.exec(y));)l.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),c.push(h.x,h.y,h.z),m++,p++;1!==g&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+a),3!==m&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+a),a++}var b=d,x=p-d;n.addGroup(b,x,f),f++}return n.setAttribute("position",new bl(l,3)),n.setAttribute("normal",new bl(c,3)),n}("string"!==typeof(n=e)?Bm.decodeText(new Uint8Array(n)):n)}}]),n}(hm),nw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"parse",value:function(e){var t=0,n=1,r=2,i=3,a=9,o=10,s=11,u=48,l=4,c=0,h=1,f=2,d=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var p=0,v=new Uint8Array(e),m={id_length:v[p++],colormap_type:v[p++],image_type:v[p++],colormap_index:v[p++]|v[p++]<<8,colormap_length:v[p++]|v[p++]<<8,colormap_size:v[p++],origin:[v[p++]|v[p++]<<8,v[p++]|v[p++]<<8],width:v[p++]|v[p++]<<8,height:v[p++]|v[p++]<<8,pixel_size:v[p++],flags:v[p++]};!function(e){switch(e.image_type){case n:case a:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case i:case o:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(m),m.id_length+p>e.length&&console.error("THREE.TGALoader: No data."),p+=m.id_length;var g=!1,y=!1,b=!1;switch(m.image_type){case a:g=!0,y=!0;break;case n:y=!0;break;case o:g=!0;break;case r:break;case s:g=!0,b=!0;break;case i:b=!0}var x=new Uint8Array(m.width*m.height*4),w=function(e,t,n,r,i){var a,o,s=n.pixel_size>>3,u=n.width*n.height*s;if(t&&(o=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){var l,c,h;a=new Uint8Array(u);for(var f=0,d=new Uint8Array(s);f<u;)if(c=1+(127&(l=i[r++])),128&l){for(h=0;h<s;++h)d[h]=i[r++];for(h=0;h<c;++h)a.set(d,f+h*s);f+=s*c}else{for(c*=s,h=0;h<c;++h)a[f+h]=i[r++];f+=c}}else a=i.subarray(r,r+=t?n.width*n.height:u);return{pixel_data:a,palettes:o}}(g,y,m,p,v);return function(e,t,n,r,i){var a,o,s,p,v,g;switch((m.flags&u)>>l){default:case f:a=0,s=1,v=t,o=0,p=1,g=n;break;case c:a=0,s=1,v=t,o=n-1,p=-1,g=-1;break;case d:a=t-1,s=-1,v=-1,o=0,p=1,g=n;break;case h:a=t-1,s=-1,v=-1,o=n-1,p=-1,g=-1}if(b)switch(m.pixel_size){case 8:!function(e,t,n,r,i,a,o,s){var u,l,c,h=0,f=m.width;for(c=t;c!==r;c+=n)for(l=i;l!==o;l+=a,h++)u=s[h],e[4*(l+f*c)+0]=u,e[4*(l+f*c)+1]=u,e[4*(l+f*c)+2]=u,e[4*(l+f*c)+3]=255}(e,o,p,g,a,s,v,r);break;case 16:!function(e,t,n,r,i,a,o,s){var u,l,c=0,h=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==o;u+=a,c+=2)e[4*(u+h*l)+0]=s[c+0],e[4*(u+h*l)+1]=s[c+0],e[4*(u+h*l)+2]=s[c+0],e[4*(u+h*l)+3]=s[c+1]}(e,o,p,g,a,s,v,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(m.pixel_size){case 8:!function(e,t,n,r,i,a,o,s,u){var l,c,h,f=u,d=0,p=m.width;for(h=t;h!==r;h+=n)for(c=i;c!==o;c+=a,d++)l=s[d],e[4*(c+p*h)+3]=255,e[4*(c+p*h)+2]=f[3*l+0],e[4*(c+p*h)+1]=f[3*l+1],e[4*(c+p*h)+0]=f[3*l+2]}(e,o,p,g,a,s,v,r,i);break;case 16:!function(e,t,n,r,i,a,o,s){var u,l,c,h=0,f=m.width;for(c=t;c!==r;c+=n)for(l=i;l!==o;l+=a,h+=2)u=s[h+0]+(s[h+1]<<8),e[4*(l+f*c)+0]=(31744&u)>>7,e[4*(l+f*c)+1]=(992&u)>>2,e[4*(l+f*c)+2]=(31&u)<<3,e[4*(l+f*c)+3]=32768&u?0:255}(e,o,p,g,a,s,v,r);break;case 24:!function(e,t,n,r,i,a,o,s){var u,l,c=0,h=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==o;u+=a,c+=3)e[4*(u+h*l)+3]=255,e[4*(u+h*l)+2]=s[c+0],e[4*(u+h*l)+1]=s[c+1],e[4*(u+h*l)+0]=s[c+2]}(e,o,p,g,a,s,v,r);break;case 32:!function(e,t,n,r,i,a,o,s){var u,l,c=0,h=m.width;for(l=t;l!==r;l+=n)for(u=i;u!==o;u+=a,c+=4)e[4*(u+h*l)+2]=s[c+0],e[4*(u+h*l)+1]=s[c+1],e[4*(u+h*l)+0]=s[c+2],e[4*(u+h*l)+3]=s[c+3]}(e,o,p,g,a,s,v,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(x,m.width,m.height,w.pixel_data,w.palettes),{data:x,width:m.width,height:m.height,flipY:!0,generateMipmaps:!0,minFilter:qi}}}]),n}(ym),rw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,u.Z)(this,n),t.call(this,e)}return(0,l.Z)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===i.path?Bm.extractUrlBase(e):i.path,o=new dm(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(n,a))}catch(jq){r?r(jq):console.error(jq),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e,t){function n(e,t){for(var n=[],r=e.childNodes,i=0,a=r.length;i<a;i++){var o=r[i];o.nodeName===t&&n.push(o)}return n}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=t[r];return n}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseFloat(t[r]);return n}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseInt(t[r]);return n}function o(e){return e.substring(1)}function s(e){return 0===Object.keys(e).length}function u(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function l(e){return void 0!==e?e.textContent:"Y_UP"}function c(e,t,r,i){var a=n(e,t)[0];if(void 0!==a)for(var o=n(a,r),s=0;s<o.length;s++)i(o[s])}function h(e,t){for(var n in e){e[n].build=t(e[n])}}function f(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function d(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"input"===i.nodeName){var a=o(i.getAttribute("source")),s=i.getAttribute("semantic");t.inputs[s]=a}}return t}function p(e){var t={},n=e.getAttribute("target").split("/"),r=n.shift(),i=n.shift(),a=-1!==i.indexOf("("),s=-1!==i.indexOf(".");if(s)n=i.split("."),i=n.shift(),t.member=n.shift();else if(a){var u=i.split("(");i=u.shift();for(var l=0;l<u.length;l++)u[l]=parseInt(u[l].replace(/\)/,""));t.indices=u}return t.id=r,t.sid=i,t.arraySyntax=a,t.memberSyntax=s,t.sampler=o(e.getAttribute("source")),t}function v(e){var t=[],n=e.channels,r=e.samplers,i=e.sources;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a],s=r[o.sampler],u=s.inputs.INPUT,l=s.inputs.OUTPUT;w(g(o,i[u],i[l]),t)}return t}function m(e){return f(Qe.animations[e],v)}function g(e,t,n){var r,i,a,o,s,u,l=Qe.nodes[e.id],c=je(l.id),h=l.transforms[e.sid],f=l.matrix.clone().transpose(),d={};switch(h){case"matrix":for(a=0,o=t.array.length;a<o;a++)if(r=t.array[a],i=a*n.stride,void 0===d[r]&&(d[r]={}),!0===e.arraySyntax){var p=n.array[i],v=e.indices[0]+4*e.indices[1];d[r][v]=p}else for(s=0,u=n.stride;s<u;s++)d[r][s]=n.array[i+s];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var m=function(e,t){var n=[];for(var r in e)n.push({time:parseFloat(r),value:e[r]});n.sort(a);for(var i=0;i<16;i++)_(n,i,t.elements[i]);return n;function a(e,t){return e.time-t.time}}(d,f);return{name:c.uuid,keyframes:m}}var y=new Fs,b=new Fs,x=new js;function w(e,t){for(var n=e.keyframes,r=e.name,i=[],a=[],o=[],s=[],u=0,l=n.length;u<l;u++){var c=n[u],h=c.time,f=c.value;Te.fromArray(f).transpose(),Te.decompose(y,x,b),i.push(h),a.push(y.x,y.y,y.z),o.push(x.x,x.y,x.z,x.w),s.push(b.x,b.y,b.z)}return a.length>0&&t.push(new am(r+".position",i,a)),o.length>0&&t.push(new rm(r+".quaternion",i,o)),s.length>0&&t.push(new am(r+".scale",i,s)),t}function _(e,t,n){var r,i,a,o=!0;for(i=0,a=e.length;i<a;i++)void 0===(r=e[i]).value[t]?r.value[t]=null:o=!1;if(!0===o)for(i=0,a=e.length;i<a;i++)(r=e[i]).value[t]=n;else!function(e,t){for(var n,r,i=0,a=e.length;i<a;i++){var o=e[i];if(null===o.value[t]){if(n=S(e,i,t),r=k(e,i,t),null===n){o.value[t]=r.value[t];continue}if(null===r){o.value[t]=n.value[t];continue}M(o,n,r,t)}}}(e,t)}function S(e,t,n){for(;t>=0;){var r=e[t];if(null!==r.value[n])return r;t--}return null}function k(e,t,n){for(;t<e.length;){var r=e[t];if(null!==r.value[n])return r;t++}return null}function M(e,t,n,r){n.time-t.time!==0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function T(e){for(var t=[],n=e.name,r=e.end-e.start||-1,i=e.animations,a=0,o=i.length;a<o;a++)for(var s=m(i[a]),u=0,l=s.length;u<l;u++)t.push(s[u]);return new om(n,r,t)}function E(e){return f(Qe.clips[e],T)}function C(e){for(var t={sources:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(a.textContent);break;case"source":var o=a.getAttribute("id");t.sources[o]=oe(a);break;case"joints":t.joints=A(a);break;case"vertex_weights":t.vertexWeights=R(a)}}return t}function A(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"input"===i.nodeName){var a=i.getAttribute("semantic"),s=o(i.getAttribute("source"));t.inputs[a]=s}}return t}function R(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var s=i.getAttribute("semantic"),u=o(i.getAttribute("source")),l=parseInt(i.getAttribute("offset"));t.inputs[s]={id:u,offset:l};break;case"vcount":t.vcount=a(i.textContent);break;case"v":t.v=a(i.textContent)}}return t}function P(e){var t={id:e.id},n=Qe.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,n,r,i=4,a={joints:[],indices:{array:[],stride:i},weights:{array:[],stride:i}},o=e.sources,s=e.vertexWeights,u=s.vcount,l=s.v,c=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,f=e.sources[e.joints.inputs.JOINT],d=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=o[s.inputs.WEIGHT.id].array,v=0;for(t=0,r=u.length;t<r;t++){var m=u[t],g=[];for(n=0;n<m;n++){var y=l[v+c],b=p[l[v+h]];g.push({index:y,weight:b}),v+=2}for(g.sort(S),n=0;n<i;n++){var x=g[n];void 0!==x?(a.indices.array.push(x.index),a.weights.array.push(x.weight)):(a.indices.array.push(0),a.weights.array.push(0))}}e.bindShapeMatrix?a.bindMatrix=(new vu).fromArray(e.bindShapeMatrix).transpose():a.bindMatrix=(new vu).identity();for(t=0,r=f.array.length;t<r;t++){var w=f.array[t],_=(new vu).fromArray(d.array,t*d.stride).transpose();a.joints.push({name:w,boneInverse:_})}return a;function S(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function L(e){return f(Qe.controllers[e],P)}function O(e){return void 0!==e.build?e.build:e.init_from}function N(e){var t=Qe.images[e];return void 0!==t?f(t,O):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function D(e){for(var t={surfaces:{},samplers:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"newparam":I(i,t);break;case"technique":t.technique=z(i);break;case"extra":t.extra=W(i)}}return t}function I(e,t){for(var n=e.getAttribute("sid"),r=0,i=e.childNodes.length;r<i;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"surface":t.surfaces[n]=j(a);break;case"sampler2D":t.samplers[n]=F(a)}}}function j(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"init_from"===i.nodeName)t.init_from=i.textContent}return t}function F(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"source"===i.nodeName)t.source=i.textContent}return t}function z(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=B(i);break;case"extra":t.extra=W(i)}}return t}function B(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[i.nodeName]=U(i);break;case"transparent":t[i.nodeName]={opaque:i.getAttribute("opaque"),data:U(i)}}}return t}function U(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"color":t[a.nodeName]=i(a.textContent);break;case"float":t[a.nodeName]=parseFloat(a.textContent);break;case"texture":t[a.nodeName]={id:a.getAttribute("texture"),extra:V(a)}}}return t}function V(e){for(var t={technique:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"extra"===i.nodeName)G(i,t)}return t}function G(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"technique"===i.nodeName)H(i,t)}}function H(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent);break;case"bump":t[i.nodeName]=$(i)}}}function W(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"technique"===i.nodeName)t.technique=Z(i)}return t}function Z(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent);break;case"bump":t[i.nodeName]=$(i)}}return t}function $(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"texture"===i.nodeName)t[i.nodeName]={id:i.getAttribute("texture"),texcoord:i.getAttribute("texcoord"),extra:V(i)}}return t}function q(e){return e}function X(e){var t,n=function(e){return f(Qe.effects[e],q)}(e.url),r=n.profile.technique;switch(r.type){case"phong":case"blinn":t=new Bv;break;case"lambert":t=new Gv;break;default:t=new sl}function i(e){var t=n.profile.samplers[e.id],r=null;void 0!==t?r=N(n.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=N(e.id));if(null!==r){var i=function(e){var t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));t="tga"===(n=n.toLowerCase())?$e:Xe;return t}(r);if(void 0!==i){var a=i.load(r),o=e.extra;if(void 0!==o&&void 0!==o.technique&&!1===s(o.technique)){var u=o.technique;a.wrapS=u.wrapU?ji:Fi,a.wrapT=u.wrapV?ji:Fi,a.offset.set(u.offsetU||0,u.offsetV||0),a.repeat.set(u.repeatU||1,u.repeatV||1)}else a.wrapS=ji,a.wrapT=ji;return a}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",r),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=e.name||"";var a=r.parameters;for(var o in a){var u=a[o];switch(o){case"diffuse":u.color&&t.color.fromArray(u.color),u.texture&&(t.map=i(u.texture));break;case"specular":u.color&&t.specular&&t.specular.fromArray(u.color),u.texture&&(t.specularMap=i(u.texture));break;case"bump":u.texture&&(t.normalMap=i(u.texture));break;case"ambient":u.texture&&(t.lightMap=i(u.texture));break;case"shininess":u.float&&t.shininess&&(t.shininess=u.float);break;case"emission":u.color&&t.emissive&&t.emissive.fromArray(u.color),u.texture&&(t.emissiveMap=i(u.texture))}}var l=a.transparent,c=a.transparency;if(void 0===c&&l&&(c={float:1}),void 0===l&&c&&(l={opaque:"A_ONE",data:{color:[1,1,1,1]}}),l&&c)if(l.data.texture)t.transparent=!0;else{var h=l.data.color;switch(l.opaque){case"A_ONE":t.opacity=h[3]*c.float;break;case"RGB_ZERO":t.opacity=1-h[0]*c.float;break;case"A_ZERO":t.opacity=1-h[3]*c.float;break;case"RGB_ONE":t.opacity=h[0]*c.float;break;default:t.opacity=1-c.float,console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',l.opaque)}t.opacity<1&&(t.transparent=!0)}if(void 0!==r.extra&&void 0!==r.extra.technique){var d=r.extra.technique;for(var p in d){var v=d[p];switch(p){case"double_sided":t.side=1===v?Vr:Br;break;case"bump":t.normalMap=i(v.texture),t.normalScale=new ws(1,1)}}}return t}function Y(e){return f(Qe.materials[e],X)}function K(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if("technique_common"===n.nodeName)return J(n)}return{}}function J(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=Q(r)}}return t}function Q(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function ee(e){var t;switch(e.optics.technique){case"perspective":t=new ec(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var n=e.optics.parameters.ymag,r=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;r=void 0===r?n*i:r,n=void 0===n?r/i:n,t=new kc(-(r*=.5),r,n*=.5,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new ec}return t.name=e.name||"",t}function te(e){var t=Qe.cameras[e];return void 0!==t?f(t,ee):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ne(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=re(i)}}return t}function re(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"color":var o=i(a.textContent);t.color=(new ol).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(a.textContent);break;case"quadratic_attenuation":var s=parseFloat(a.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function ie(e){var t;switch(e.technique){case"directional":t=new Nm;break;case"point":t=new Lm;break;case"spot":t=new Em;break;case"ambient":t=new Dm}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function ae(e){var t=Qe.lights[e];return void 0!==t?f(t,ie):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function oe(e){for(var t={array:[],stride:3},a=0;a<e.childNodes.length;a++){var o=e.childNodes[a];if(1===o.nodeType)switch(o.nodeName){case"float_array":t.array=i(o.textContent);break;case"Name_array":t.array=r(o.textContent);break;case"technique_common":var s=n(o,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function se(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=o(r.getAttribute("source")))}return t}function ue(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var s=o(i.getAttribute("source")),u=i.getAttribute("semantic"),l=parseInt(i.getAttribute("offset")),c=parseInt(i.getAttribute("set")),h=c>0?u+c:u;t.inputs[h]={id:s,offset:l},t.stride=Math.max(t.stride,l+1),"TEXCOORD"===u&&(t.hasUV=!0);break;case"vcount":t.vcount=a(i.textContent);break;case"p":t.p=a(i.textContent)}}return t}function le(e){for(var t=0,n=0,r=e.length;n<r;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ce(e){var t={},n=e.sources,r=e.vertices,i=e.primitives;if(0===i.length)return{};var a=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(i);for(var o in a){var s=a[o];le(s),t[o]=he(s,n,r)}return t}function he(e,t,n){for(var r={},i={array:[],stride:0},a={array:[],stride:0},o={array:[],stride:0},s={array:[],stride:0},u={array:[],stride:0},l=[],c=4,h=[],f=4,d=new Cl,p=[],v=0,m=0;m<e.length;m++){var g=e[m],y=g.inputs,b=0;switch(g.type){case"lines":case"linestrips":b=2*g.count;break;case"triangles":b=3*g.count;break;case"polylist":for(var x=0;x<g.count;x++){var w=g.vcount[x];switch(w){case 3:b+=3;break;case 4:b+=6;break;default:b+=3*(w-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",g.type)}for(var _ in d.addGroup(v,b,m),v+=b,g.material&&p.push(g.material),y){var S=y[_];switch(_){case"VERTEX":for(var k in n){var M=n[k];switch(k){case"POSITION":var T=i.array.length;if(fe(g,t[M],S.offset,i.array),i.stride=t[M].stride,t.skinWeights&&t.skinIndices&&(fe(g,t.skinIndices,S.offset,l),fe(g,t.skinWeights,S.offset,h)),!1===g.hasUV&&!0===e.uvsNeedsFix)for(var E=(i.array.length-T)/i.stride,C=0;C<E;C++)o.array.push(0,0);break;case"NORMAL":fe(g,t[M],S.offset,a.array),a.stride=t[M].stride;break;case"COLOR":fe(g,t[M],S.offset,u.array),u.stride=t[M].stride;break;case"TEXCOORD":fe(g,t[M],S.offset,o.array),o.stride=t[M].stride;break;case"TEXCOORD1":fe(g,t[M],S.offset,s.array),o.stride=t[M].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',k)}}break;case"NORMAL":fe(g,t[S.id],S.offset,a.array),a.stride=t[S.id].stride;break;case"COLOR":fe(g,t[S.id],S.offset,u.array),u.stride=t[S.id].stride;break;case"TEXCOORD":fe(g,t[S.id],S.offset,o.array),o.stride=t[S.id].stride;break;case"TEXCOORD1":fe(g,t[S.id],S.offset,s.array),s.stride=t[S.id].stride}}}return i.array.length>0&&d.setAttribute("position",new bl(i.array,i.stride)),a.array.length>0&&d.setAttribute("normal",new bl(a.array,a.stride)),u.array.length>0&&d.setAttribute("color",new bl(u.array,u.stride)),o.array.length>0&&d.setAttribute("uv",new bl(o.array,o.stride)),s.array.length>0&&d.setAttribute("uv2",new bl(s.array,s.stride)),l.length>0&&d.setAttribute("skinIndex",new bl(l,c)),h.length>0&&d.setAttribute("skinWeight",new bl(h,f)),r.data=d,r.type=e[0].type,r.materialKeys=p,r}function fe(e,t,n,r){var i=e.p,a=e.stride,o=e.vcount;function s(e){for(var t=i[e+n]*l,a=t+l;t<a;t++)r.push(u[t])}var u=t.array,l=t.stride;if(void 0!==e.vcount)for(var c=0,h=0,f=o.length;h<f;h++){var d=o[h];if(4===d){var p=c+1*a,v=c+2*a,m=c+3*a;s(c+0*a),s(p),s(m),s(p),s(v),s(m)}else if(3===d){var g=c+1*a,y=c+2*a;s(c+0*a),s(g),s(y)}else if(d>4)for(var b=1,x=d-2;b<=x;b++){var w=c+a*b,_=c+a*(b+1);s(c+0*a),s(w),s(_)}c+=a*d}else for(var S=0,k=i.length;S<k;S+=a)s(S)}function de(e){return f(Qe.geometries[e],ce)}function pe(e){return void 0!==e.build?e.build:e}function ve(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=me(r);break;case"link":t.links.push(ye(r))}}}function me(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=ge(r)}}return t}function ge(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new Fs,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var a=i(r.textContent);t.axis.fromArray(a);break;case"limits":var o=r.getElementsByTagName("max")[0],s=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(s.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ye(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(be(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(xe(r))}}return t}function be(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(ye(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(xe(r))}}return t}function xe(e){var t={type:e.nodeName},n=i(e.textContent);switch(t.type){case"matrix":t.obj=new vu,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new Fs,t.obj.fromArray(n);break;case"rotate":t.obj=new Fs,t.obj.fromArray(n),t.angle=xs.degToRad(n[3])}return t}function we(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&"technique_common"===r.nodeName)_e(r,t)}}function _e(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=i(r.textContent);break;case"mass":t.mass=i(r.textContent)[0]}}}function Se(e){for(var t={target:e.getAttribute("target").split("/").pop()},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&"axis"===r.nodeName){var i=r.getElementsByTagName("param")[0];t.axis=i.textContent;var a=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=a.substr(0,a.length-1)}}return t}function ke(e){return void 0!==e.build?e.build:e}function Me(e){for(var t=[],n=Ve.querySelector('[id="'+e.id+'"]'),r=0;r<n.childNodes.length;r++){var a=n.childNodes[r];if(1===a.nodeType){var o=void 0,s=void 0;switch(a.nodeName){case"matrix":o=i(a.textContent);var u=(new vu).fromArray(o).transpose();t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:u});break;case"translate":case"scale":o=i(a.textContent),s=(new Fs).fromArray(o),t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:s});break;case"rotate":o=i(a.textContent),s=(new Fs).fromArray(o);var l=xs.degToRad(o[3]);t.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:s,angle:l})}}}return t}var Te=new vu,Ee=new Fs;function Ce(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new vu,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType){var a=void 0;switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),Ce(r);break;case"instance_camera":t.instanceCameras.push(o(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ae(r));break;case"instance_light":t.instanceLights.push(o(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ae(r));break;case"instance_node":t.instanceNodes.push(o(r.getAttribute("url")));break;case"matrix":a=i(r.textContent),t.matrix.multiply(Te.fromArray(a).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":a=i(r.textContent),Ee.fromArray(a),t.matrix.multiply(Te.makeTranslation(Ee.x,Ee.y,Ee.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":a=i(r.textContent);var s=xs.degToRad(a[3]);t.matrix.multiply(Te.makeRotationAxis(Ee.fromArray(a),s)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":a=i(r.textContent),t.matrix.scale(Ee.fromArray(a)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}}return Ie(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Qe.nodes[t.id]=t,t}function Ae(e){for(var t={id:o(e.getAttribute("url")),materials:{},skeletons:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"bind_material":for(var i=r.getElementsByTagName("instance_material"),a=0;a<i.length;a++){var s=i[a],u=s.getAttribute("symbol"),l=s.getAttribute("target");t.materials[u]=o(l)}break;case"skeleton":t.skeletons.push(o(r.textContent))}}return t}function Re(e,t){var n,r,i,a=[],o=[];for(n=0;n<e.length;n++){var s=e[n];if(Ie(s))Pe(je(s),t,a);else if(ze(s))for(var u=Qe.visualScenes[s].children,l=0;l<u.length;l++){var c=u[l];if("JOINT"===c.type)Pe(je(c.id),t,a)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",s)}for(n=0;n<t.length;n++)for(r=0;r<a.length;r++)if((i=a[r]).bone.name===t[n].name){o[n]=i,i.processed=!0;break}for(n=0;n<a.length;n++)!1===(i=a[n]).processed&&(o.push(i),i.processed=!0);var h=[],f=[];for(n=0;n<o.length;n++)i=o[n],h.push(i.bone),f.push(i.boneInverse);return new Bd(h,f)}function Pe(e,t,n){e.traverse((function(e){if(!0===e.isBone){for(var r,i=0;i<t.length;i++){var a=t[i];if(a.name===e.name){r=a.boneInverse;break}}void 0===r&&(r=new vu),n.push({bone:e,boneInverse:r,processed:!1})}}))}function Le(e){for(var t,n=[],r=e.matrix,i=e.nodes,a=e.type,o=e.instanceCameras,s=e.instanceControllers,u=e.instanceLights,l=e.instanceGeometries,c=e.instanceNodes,h=0,f=i.length;h<f;h++)n.push(je(i[h]));for(var d=0,p=o.length;d<p;d++){var v=te(o[d]);null!==v&&n.push(v.clone())}for(var m=0,g=s.length;m<g;m++)for(var y=s[m],b=L(y.id),x=De(de(b.id),y.materials),w=Re(y.skeletons,b.skin.joints),_=0,S=x.length;_<S;_++){var k=x[_];k.isSkinnedMesh&&(k.bind(w,b.skin.bindMatrix),k.normalizeSkinWeights()),n.push(k)}for(var M=0,T=u.length;M<T;M++){var E=ae(u[M]);null!==E&&n.push(E.clone())}for(var C=0,A=l.length;C<A;C++)for(var R=l[C],P=De(de(R.id),R.materials),O=0,N=P.length;O<N;O++)n.push(P[O]);for(var D=0,I=c.length;D<I;D++)n.push(je(c[D]).clone());if(0===i.length&&1===n.length)t=n[0];else{t="JOINT"===a?new Id:new Yf;for(var j=0;j<n.length;j++)t.add(n[j])}return t.name="JOINT"===a?e.sid:e.name,t.matrix.copy(r),t.matrix.decompose(t.position,t.quaternion,t.scale),t}var Oe=new sl({color:16711935});function Ne(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var a=t[e[r]];void 0===a?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(Oe)):n.push(Y(a))}return n}function De(e,t){var n=[];for(var r in e){var i=e[r],a=Ne(i.materialKeys,t);0===a.length&&("lines"===r||"linestrips"===r?a.push(new $d):a.push(new Bv));var o=void 0!==i.data.attributes.skinIndex,s=1===a.length?a[0]:a,u=void 0;switch(r){case"lines":u=new np(i.data,s);break;case"linestrips":u=new Qd(i.data,s);break;case"triangles":case"polylist":u=o?new Dd(i.data,s):new Zl(i.data,s)}n.push(u)}return n}function Ie(e){return void 0!==Qe.nodes[e]}function je(e){return f(Qe.nodes[e],Le)}function Fe(e){var t=new Yf;t.name=e.name;for(var n=e.children,r=0;r<n.length;r++){var i=n[r];t.add(je(i.id))}return t}function ze(e){return void 0!==Qe.visualScenes[e]}function Be(e){return f(Qe.visualScenes[e],Fe)}if(0===e.length)return{scene:new sd};var Ue=(new DOMParser).parseFromString(e,"application/xml"),Ve=n(Ue,"COLLADA")[0],Ge=Ue.getElementsByTagName("parsererror")[0];if(void 0!==Ge){var He,We=n(Ge,"div")[0];return He=We?We.textContent:function(e){for(var t="",n=[e];n.length;){var r=n.shift();r.nodeType===Node.TEXT_NODE?t+=r.textContent:(t+="\n",n.push.apply(n,r.childNodes))}return t.trim()}(Ge),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",He),null}var Ze=Ve.getAttribute("version");console.log("THREE.ColladaLoader: File version",Ze);var $e,qe=function(e){return{unit:u(n(e,"unit")[0]),upAxis:l(n(e,"up_axis")[0])}}(n(Ve,"asset")[0]),Xe=new bm(this.manager);Xe.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),nw&&($e=new nw(this.manager)).setPath(this.resourcePath||t);var Ye=[],Ke={},Je=0,Qe={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};c(Ve,"library_animations","animation",(function e(t){for(var n={sources:{},samplers:{},channels:{}},r=!1,i=0,a=t.childNodes.length;i<a;i++){var o=t.childNodes[i];if(1===o.nodeType){var s=void 0;switch(o.nodeName){case"source":s=o.getAttribute("id"),n.sources[s]=oe(o);break;case"sampler":s=o.getAttribute("id"),n.samplers[s]=d(o);break;case"channel":s=o.getAttribute("target"),n.channels[s]=p(o);break;case"animation":e(o),r=!0;break;default:console.log(o)}}}!1===r&&(Qe.animations[t.getAttribute("id")||xs.generateUUID()]=n)})),c(Ve,"library_animation_clips","animation_clip",(function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"instance_animation"===i.nodeName)t.animations.push(o(i.getAttribute("url")))}Qe.clips[e.getAttribute("id")]=t})),c(Ve,"library_controllers","controller",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=o(i.getAttribute("source")),t.skin=C(i);break;case"morph":t.id=o(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Qe.controllers[e.getAttribute("id")]=t})),c(Ve,"library_images","image",(function(e){var t={init_from:n(e,"init_from")[0].textContent};Qe.images[e.getAttribute("id")]=t})),c(Ve,"library_effects","effect",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"profile_COMMON"===i.nodeName)t.profile=D(i)}Qe.effects[e.getAttribute("id")]=t})),c(Ve,"library_materials","material",(function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"instance_effect"===i.nodeName)t.url=o(i.getAttribute("url"))}Qe.materials[e.getAttribute("id")]=t})),c(Ve,"library_cameras","camera",(function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"optics"===i.nodeName)t.optics=K(i)}Qe.cameras[e.getAttribute("id")]=t})),c(Ve,"library_lights","light",(function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"technique_common"===i.nodeName)t=ne(i)}Qe.lights[e.getAttribute("id")]=t})),c(Ve,"library_geometries","geometry",(function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(var i=0;i<r.childNodes.length;i++){var a=r.childNodes[i];if(1===a.nodeType){var o=a.getAttribute("id");switch(a.nodeName){case"source":t.sources[o]=oe(a);break;case"vertices":t.vertices=se(a);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",a.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ue(a));break;default:console.log(a)}}}Qe.geometries[e.getAttribute("id")]=t}})),c(Ve,"library_nodes","node",Ce),c(Ve,"library_visual_scenes","visual_scene",(function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),n=0;n<t.length;n++){var r=t[n];!1===r.hasAttribute("id")&&r.setAttribute("id","three_default_"+Je++)}}(e);for(var r=n(e,"node"),i=0;i<r.length;i++)t.children.push(Ce(r[i]));Qe.visualScenes[e.getAttribute("id")]=t})),c(Ve,"library_kinematics_models","kinematics_model",(function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&"technique_common"===r.nodeName)ve(r,t)}Qe.kinematicsModels[e.getAttribute("id")]=t})),c(Ve,"library_physics_models","physics_model",(function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&"rigid_body"===r.nodeName)t.rigidBodies[r.getAttribute("name")]={},we(r,t.rigidBodies[r.getAttribute("name")])}Qe.physicsModels[e.getAttribute("id")]=t})),c(Ve,"scene","instance_kinematics_scene",(function(e){for(var t={bindJointAxis:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType&&"bind_joint_axis"===r.nodeName)t.bindJointAxis.push(Se(r))}Qe.kinematicsScenes[o(e.getAttribute("url"))]=t})),h(Qe.animations,v),h(Qe.clips,T),h(Qe.controllers,P),h(Qe.images,O),h(Qe.effects,q),h(Qe.materials,X),h(Qe.cameras,ee),h(Qe.lights,ie),h(Qe.geometries,ce),h(Qe.visualScenes,Fe),function(){var e=Qe.clips;if(!0===s(e)){if(!1===s(Qe.animations)){var t=[];for(var n in Qe.animations)for(var r=m(n),i=0,a=r.length;i<a;i++)t.push(r[i]);Ye.push(new om("default",-1,t))}}else for(var o in e)Ye.push(E(o))}(),function(){var e=Object.keys(Qe.kinematicsModels)[0],t=Object.keys(Qe.kinematicsScenes)[0],n=Object.keys(Qe.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var r=function(e){return f(Qe.kinematicsModels[e],pe)}(e),i=function(e){return f(Qe.kinematicsScenes[e],ke)}(t),a=Be(n),o=i.bindJointAxis,s={},u=0,l=o.length;u<l;u++){var c=o[u],h=Ve.querySelector('[sid="'+c.target+'"]');if(h){var d=h.parentElement;v(c.jointIndex,d)}}var p=new vu;Ke={joints:r&&r.joints,getJointValue:function(e){var t=s[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var n=s[e];if(n){var r=n.joint;if(t>r.limits.max||t<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=n.object,a=r.axis,o=n.transforms;Te.identity();for(var u=0;u<o.length;u++){var l=o[u];if(l.sid&&-1!==l.sid.indexOf(e))switch(r.type){case"revolute":Te.multiply(p.makeRotationAxis(a,xs.degToRad(t)));break;case"prismatic":Te.multiply(p.makeTranslation(a.x*t,a.y*t,a.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type)}else switch(l.type){case"matrix":Te.multiply(l.obj);break;case"translate":Te.multiply(p.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"scale":Te.scale(l.obj);break;case"rotate":Te.multiply(p.makeRotationAxis(l.obj,l.angle))}}i.matrix.copy(Te),i.matrix.decompose(i.position,i.quaternion,i.scale),s[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function v(e,t){var n=t.getAttribute("name"),i=r.joints[e];a.traverse((function(r){r.name===n&&(s[e]={object:r,transforms:Me(t),joint:i,position:i.zeroPosition})}))}}();var et=function(e){return Be(o(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(Ve,"scene")[0]);return et.animations=Ye,"Z_UP"===qe.upAxis&&et.quaternion.setFromEuler(new Mu(-Math.PI/2,0,0)),et.scale.multiplyScalar(qe.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Ye},kinematics:Ke,library:Qe,scene:et}}}]),n}(hm),iw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).urdfNode=null,e.urdfName="",e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}]),n}(Bu),aw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isURDFCollider=!0,e.type="URDFCollider",e}return(0,l.Z)(n)}(iw),ow=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isURDFVisual=!0,e.type="URDFVisual",e}return(0,l.Z)(n)}(iw),sw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isURDFLink=!0,e.type="URDFLink",e}return(0,l.Z)(n)}(iw),uw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isURDFJoint=!0,e.type="URDFJoint",e.jointValue=null,e.jointType="fixed",e.axis=new Fs(1,0,0),e.limit={lower:0,upper:0},e.ignoreLimits=!1,e.origPosition=null,e.origQuaternion=null,e.mimicJoints=[],e}return(0,l.Z)(n,[{key:"jointType",get:function(){return this._jointType},set:function(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(2).fill(0);break;case"floating":this.jointValue=new Array(6).fill(0)}}},{key:"angle",get:function(){return this.jointValue[0]}},{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=pr(e.jointValue),this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=pr(e.mimicJoints),this}},{key:"setJointValue",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.map((function(e){return parseFloat(e)})),this.origPosition&&this.origQuaternion||(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());var r=!1;switch(this.mimicJoints.forEach((function(e){r=e.updateFromMimickedJoint.apply(e,pr(t))||r})),this.jointType){case"fixed":return r;case"continuous":case"revolute":var i=t[0];return null==i||i===this.jointValue[0]?r:(this.ignoreLimits||"revolute"!==this.jointType||(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.quaternion.setFromAxisAngle(this.axis,i).premultiply(this.origQuaternion),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):r);case"prismatic":var a=t[0];return null==a||a===this.jointValue[0]?r:(this.ignoreLimits||(a=Math.min(this.limit.upper,a),a=Math.max(this.limit.lower,a)),this.position.copy(this.origPosition),this.position.addScaledVector(this.axis,a),this.jointValue[0]!==a?(this.jointValue[0]=a,this.matrixWorldNeedsUpdate=!0,!0):r);case"floating":case"planar":console.warn("'".concat(this.jointType,"' joint not yet supported"))}return r}}]),n}(iw),lw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).type="URDFMimicJoint",e.mimicJoint=null,e.offset=0,e.multiplier=1,e}return(0,l.Z)(n,[{key:"updateFromMimickedJoint",value:function(){for(var e,t=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.map((function(e){return e*t.multiplier+t.offset}));return(e=Tr((0,kr.Z)(n.prototype),"setJointValue",this)).call.apply(e,[this].concat(pr(o)))}},{key:"setJointValue",value:function(){var e;console.warn('URDFMimicJoint: Setting the joint value of mimic joint "'.concat(this.urdfName,'" will cause it to be out of sync.'));for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=Tr((0,kr.Z)(n.prototype),"setJointValue",this)).call.apply(e,[this].concat(r))}},{key:"copy",value:function(e,t){return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}]),n}(uw),cw=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,u.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).isURDFRobot=!0,e.urdfNode=null,e.urdfRobotNode=null,e.robotName=null,e.links=null,e.joints=null,e.colliders=null,e.visual=null,e.frames=null,e}return(0,l.Z)(n,[{key:"copy",value:function(e,t){var r=this;return Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse((function(t){t.isURDFJoint&&t.urdfName in e.joints&&(r.joints[t.urdfName]=t),t.isURDFLink&&t.urdfName in e.links&&(r.links[t.urdfName]=t),t.isURDFCollider&&t.urdfName in e.colliders&&(r.colliders[t.urdfName]=t),t.isURDFVisual&&t.urdfName in e.visual&&(r.visual[t.urdfName]=t)})),this.frames=Cr(Cr(Cr(Cr({},this.colliders),this.visual),this.links),this.joints),this}},{key:"getFrame",value:function(e){return this.frames[e]}},{key:"setJointValue",value:function(e){var t=this.joints[e];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.setJointValue.apply(t,r)}return!1}},{key:"setJointValues",value:function(e){var t=!1;for(var n in e){var r=e[n];t=Array.isArray(r)?this.setJointValue.apply(this,[n].concat(pr(r)))||t:this.setJointValue(n,r)||t}return t}}]),n}(sw),hw=new js,fw=new Mu;function dw(e){return e?e.trim().split(/\s+/g).map((function(e){return parseFloat(e)})):[0,0,0]}function pw(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||e.rotation.set(0,0,0),fw.set(t[0],t[1],t[2],"ZYX"),hw.setFromEuler(fw),hw.multiply(e.quaternion),e.quaternion.copy(hw)}var vw=function(){function e(t){(0,u.Z)(this,e),this.manager=t||cm,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={}}return(0,l.Z)(e,[{key:"loadAsync",value:function(e){var t=this;return new Promise((function(n,r){t.load(e,n,null,r)}))}},{key:"load",value:function(e,t,n,r){var i=this,a=this.manager,o=Bm.extractUrlBase(e),s=this.manager.resolveURL(e);a.itemStart(s),fetch(s,this.fetchOptions).then((function(e){if(e.ok)return n&&n(null),e.text();throw new Error("URDFLoader: Failed to load url '".concat(s,"' with error code ").concat(e.status," : ").concat(e.statusText,"."))})).then((function(e){""===i.workingPath&&(i.workingPath=o);var n=i.parse(e);t(n),a.itemEnd(s)})).catch((function(e){r?r(e):console.error("URDFLoader: Error loading file.",e),a.itemError(s),a.itemEnd(s)}))}},{key:"parse",value:function(e){var t=this.packages,n=this.loadMeshCb,r=this.parseVisual,i=this.parseCollision,a=this.workingPath,o=this.manager,s={},u={},l={};function c(e){if(!/^package:\/\//.test(e))return a?a+e:e;var n=br(e.replace(/^package:\/\//,"").split(/\/(.+)/),2),r=n[0],i=n[1];return"string"===typeof t?t.endsWith(r)?t+"/"+i:t+"/"+r+"/"+i:t instanceof Function?t(r)+"/"+i:"object"===typeof t?r in t?t[r]+"/"+i:(console.error("URDFLoader : ".concat(r," not found in provided package list.")),null):void 0}function h(e){var t=pr(e.children),n=new Bv;return n.name=e.getAttribute("name")||"",t.forEach((function(e){var t=e.nodeName.toLowerCase();if("color"===t){var r=e.getAttribute("rgba").split(/\s/g).map((function(e){return parseFloat(e)}));n.color.setRGB(r[0],r[1],r[2]),n.opacity=r[3],n.transparent=r[3]<1,n.depthWrite=!n.transparent}else if("texture"===t){var i=e.getAttribute("filename");if(i){var a=new bm(o),s=c(i);n.map=a.load(s)}}})),n}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="collision"===e.nodeName.toLowerCase(),i=pr(e.children),a=null,s=i.filter((function(e){return"material"===e.nodeName.toLowerCase()}))[0];if(s){var u=s.getAttribute("name");a=u&&u in t?t[u]:h(s)}else a=new Bv;var l=r?new aw:new ow;return l.urdfNode=e,i.forEach((function(e){var t=e.nodeName.toLowerCase();if("geometry"===t){var r=e.children[0].nodeName.toLowerCase();if("mesh"===r){var i=c(e.children[0].getAttribute("filename"));if(null!==i){var s=e.children[0].getAttribute("scale");if(s){var u=dw(s);l.scale.set(u[0],u[1],u[2])}n(i,o,(function(e,t){t?console.error("URDFLoader: Error loading mesh.",t):e&&(e instanceof Zl&&(e.material=a),e.position.set(0,0,0),e.quaternion.identity(),l.add(e))}))}}else if("box"===r){var h=new Zl;h.geometry=new ql(1,1,1),h.material=a;var f=dw(e.children[0].getAttribute("size"));h.scale.set(f[0],f[1],f[2]),l.add(h)}else if("sphere"===r){var d=new Zl;d.geometry=new Av(1,30,30),d.material=a;var p=parseFloat(e.children[0].getAttribute("radius"))||0;d.scale.set(p,p,p),l.add(d)}else if("cylinder"===r){var v=new Zl;v.geometry=new vp(1,1,1,30),v.material=a;var m=parseFloat(e.children[0].getAttribute("radius"))||0,g=parseFloat(e.children[0].getAttribute("length"))||0;v.scale.set(m,g,m),v.rotation.set(Math.PI/2,0,0),l.add(v)}}else if("origin"===t){var y=dw(e.getAttribute("xyz")),b=dw(e.getAttribute("rpy"));l.position.set(y[0],y[1],y[2]),l.rotation.set(0,0,0),pw(l,b)}})),l}return function(e){var t;if(e instanceof Document)t=pr(e.children);else if(e instanceof Element)t=[e];else{t=pr((new DOMParser).parseFromString(e,"text/xml").children)}var n=t.filter((function(e){return"robot"===e.nodeName})).pop();return function(e){var t=pr(e.children),n=t.filter((function(e){return"link"===e.nodeName.toLowerCase()})),a=t.filter((function(e){return"joint"===e.nodeName.toLowerCase()})),o=t.filter((function(e){return"material"===e.nodeName.toLowerCase()})),c=new cw;c.robotName=e.getAttribute("name"),c.urdfRobotNode=e,o.forEach((function(e){var t=e.getAttribute("name");l[t]=h(e)}));var d={},p={};n.forEach((function(t){var n=t.getAttribute("name"),a=null===e.querySelector('child[link="'.concat(n,'"]'));s[n]=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===a&&(a=new sw);var o=pr(e.children);if(a.name=e.getAttribute("name"),a.urdfName=a.name,a.urdfNode=e,r){o.filter((function(e){return"visual"===e.nodeName.toLowerCase()})).forEach((function(e){var n=f(e,l);if(a.add(n),e.hasAttribute("name")){var r=e.getAttribute("name");n.name=r,n.urdfName=r,t[r]=n}}))}if(i){o.filter((function(e){return"collision"===e.nodeName.toLowerCase()})).forEach((function(e){var t=f(e);if(a.add(t),e.hasAttribute("name")){var r=e.getAttribute("name");t.name=r,t.urdfName=r,n[r]=t}}))}return a}(t,d,p,a?c:null)})),a.forEach((function(e){var t=e.getAttribute("name");u[t]=function(e){var t,n=pr(e.children),r=e.getAttribute("type"),i=n.find((function(e){return"mimic"===e.nodeName.toLowerCase()}));i?((t=new lw).mimicJoint=i.getAttribute("joint"),t.multiplier=parseFloat(i.getAttribute("multiplier")||1),t.offset=parseFloat(i.getAttribute("offset")||0)):t=new uw;t.urdfNode=e,t.name=e.getAttribute("name"),t.urdfName=t.name,t.jointType=r;var a=null,o=null,u=[0,0,0],l=[0,0,0];n.forEach((function(e){var n=e.nodeName.toLowerCase();"origin"===n?(u=dw(e.getAttribute("xyz")),l=dw(e.getAttribute("rpy"))):"child"===n?o=s[e.getAttribute("link")]:"parent"===n?a=s[e.getAttribute("link")]:"limit"===n&&(t.limit.lower=parseFloat(e.getAttribute("lower")||t.limit.lower),t.limit.upper=parseFloat(e.getAttribute("upper")||t.limit.upper))})),a.add(t),t.add(o),pw(t,l),t.position.set(u[0],u[1],u[2]);var c=n.filter((function(e){return"axis"===e.nodeName.toLowerCase()}))[0];if(c){var h=c.getAttribute("xyz").split(/\s+/g).map((function(e){return parseFloat(e)}));t.axis=new Fs(h[0],h[1],h[2]),t.axis.normalize()}return t}(e)})),c.joints=u,c.links=s,c.colliders=p,c.visual=d;var v=Object.values(u);return v.forEach((function(e){e instanceof lw&&u[e.mimicJoint].mimicJoints.push(e)})),v.forEach((function(e){var t=new Set,n=function e(n){if(t.has(n))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");t.add(n),n.mimicJoints.forEach((function(t){e(t)}))};n(e)})),c.frames=Cr(Cr(Cr(Cr({},p),d),s),u),c}(n)}(e)}},{key:"defaultMeshLoader",value:function(e,t,n){if(/\.stl$/i.test(e))new tw(t).load(e,(function(e){var t=new Zl(e,new Bv);n(t)}));else if(/\.dae$/i.test(e)){new rw(t).load(e,(function(e){return n(e.scene)}))}else{if(/\.stlX$/i.test(e))new tw(t).load(e.replace(".stlX",""),(function(e){var t=new Zl(e,new Bv);n(t)}));else if(/\.daeX$/i.test(e)){new rw(t).load(e.replace(".daeX",""),(function(e){return n(e.scene)}))}else console.warn("URDFLoader: Could not load model at ".concat(e,".\nNo loader available"))}}}]),e}(),mw={NODE_ENV:"production",PUBLIC_URL:"/MotionComparator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_API_KEY;"string"===typeof mw&&(mw=mw.trim());var gw,yw,bw,xw,ww,_w=mw,Sw="https://docs.google.com/spreadsheets/d/";function kw(e,t,n){return("boolean"===typeof n||n&&n.length>0)&&(e="".concat(e).concat(t).concat(n)),e}function Mw(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=yr(mr().mark((function e(t,n){var r,i,a,o,u,l,c,h,f=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>2&&void 0!==f[2]&&f[2],i="https://sheets.googleapis.com/v4/spreadsheets/".concat(t),i=kw(i+="?key=".concat(_w),"&includeGridData=",r),n){a=s(n);try{for(a.s();!(o=a.n()).done;)u=o.value,i=kw(i,"&ranges=",u.toA1())}catch(d){a.e(d)}finally{a.f()}}return e.next=7,fetch(i);case 7:if((l=e.sent).ok){e.next=18;break}return e.t0=Fw,e.next=12,l.blob();case 12:return e.t1=e.sent,e.next=15,(0,e.t0)(e.t1);case 15:throw c=e.sent,console.error("There was an error in the Google Sheets batchGet response. Response error as Text: ".concat(c)),new Error("Error fetching GSheet");case 18:return e.next=20,l.json();case 20:return h=e.sent,e.abrupt("return",h);case 22:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Ew(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=yr(mr().mark((function e(t,n){var r,i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C.length>2&&void 0!==C[2]?C[2]:gw.ROWS,i=C.length>3&&void 0!==C[3]?C[3]:yw.FORMATTED_VALUE,a=C.length>4&&void 0!==C[4]?C[4]:bw.FORMATTED_STRING,o=C.length>5?C[5]:void 0,u="https://sheets.googleapis.com/v4/spreadsheets/".concat(t,"/values:batchGet"),u=kw(u+="?key=".concat(_w),"&majorDimension=",r),u=kw(u,"&valueRenderOption=",i),u=kw(u,"&dateTimeRenderOption=",a),void 0!==o){e.next=16;break}return o=[],e.next=13,Mw(t);case 13:l=e.sent,c=s(l.sheets);try{for(c.s();!(h=c.n()).done;)f=h.value,d=f.properties.title,o.push(d)}catch(A){c.e(A)}finally{c.f()}case 16:if(void 0===n){n=[],p=s(o);try{for(p.s();!(v=p.n()).done;)m=v.value,n.push(new Ow(m))}catch(A){p.e(A)}finally{p.f()}}else{g=[],y=s(n);try{for(y.s();!(b=y.n()).done;)x=b.value,void 0!==(w=x.sheetName())&&-1===o.indexOf(w)||g.push(x)}catch(A){y.e(A)}finally{y.f()}n=g}if(n){_=s(n);try{for(_.s();!(S=_.n()).done;)k=S.value,u=kw(u,"&ranges=",k.toA1())}catch(A){_.e(A)}finally{_.f()}}return e.next=20,fetch(u);case 20:if((M=e.sent).ok){e.next=31;break}return e.t0=Fw,e.next=25,M.blob();case 25:return e.t1=e.sent,e.next=28,(0,e.t0)(e.t1);case 28:throw T=e.sent,console.error("There was an error in the Google Sheets batchGet response. Response error as Text: ".concat(T)),new Error("Error fetching GSheet");case 31:return e.next=33,M.json();case 33:return E=e.sent,e.abrupt("return",E);case 35:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Aw(e){return(e=e.trim().replace("\\","/")).startsWith("https://docs.google.com/")}function Rw(e){if(!function(e){return(e=e.trim().replace("\\","/")).startsWith(Sw)}(e=e.trim().replace("\\","/")))throw new d.AssertionError({message:"URL ".concat(e," is not a url to a google spreadsheet.")});return e.slice(Sw.length,e.length).split("/")[0]}void 0===_w&&console.warn("Google API key not found: Google-related functionalities will not be supported."),function(e){e.DIMENSION_UNSPECIFIED="DIMENSION_UNSPECIFIED",e.ROWS="ROWS",e.COLUMNS="COLUMNS"}(gw||(gw={})),function(e){e.FORMATTED_VALUE="FORMATTED_VALUE",e.UNFORMATTED_VALUE="UNFORMATTED_VALUE",e.FORMULA="FORMULA"}(yw||(yw={})),function(e){e.SERIAL_NUMBER="SERIAL_NUMBER",e.FORMATTED_STRING="FORMATTED_STRING"}(bw||(bw={})),function(e){e.RECALCULATION_INTERVAL_UNSPECIFIED="RECALCULATION_INTERVAL_UNSPECIFIED",e.ON_CHANGE="ON_CHANGE",e.MINUTE="MINUTE",e.HOUR="HOUR"}(xw||(xw={})),function(e){e.SHEET_TYPE_UNSPECIFIED="SHEET_TYPE_UNSPECIFIED",e.GRID="GRID",e.OBJECT="OBJECT",e.DATA_SOURCE="DATA_SOURCE"}(ww||(ww={}));function Pw(e,t){e&&e<0&&(e=0),t&&t<0&&(t=0);var n="";return void 0!==t&&null!==t&&(n+=function(e){e<0&&(e=0);for(var t=[],n=e;n>=0;)t.unshift(String.fromCharCode(n%26+"A".charCodeAt(0))),n=Math.floor(n/26)-1;return t.join("")}(t)),void 0!==e&&null!==e&&(n+=e+1),n}function Lw(e){var t,n,r,i,a=e.trim().toUpperCase().match(/([A-Z]+)([0-9]+)/);if(null===a)t="",n=e;else{var o=br(a,3);t=o[1],n=o[2]}return i=0===t.length?null:function(e){var t,n=0,r=s(e.split(""));try{for(r.s();!(t=r.n()).done;){var i=t.value;n*=26,n+=i.charCodeAt(0)-"A".charCodeAt(0)+1}}catch(a){r.e(a)}finally{r.f()}return n-1}(t),0===n.length?r=null:(r=parseFloat(n),isNaN(r)&&(r=null)),null!==r&&r--,[r,i]}var Ow=function(){function e(t,n,r,i,a){(0,u.Z)(this,e),this._rowStart=void 0,this._rowEnd=void 0,this._colStart=void 0,this._colEnd=void 0,this._sheetName=void 0,this.setSheetName(t),this.setRowStart(n),this.setRowEnd(r),this.setColStart(i),this.setColEnd(a)}return(0,l.Z)(e,[{key:"equalTo",value:function(e){return this._sheetName===e._sheetName&&this._rowStart===e._rowStart&&this._rowEnd===e._rowEnd&&this._colStart===e._colStart&&this._colEnd===e._colEnd}},{key:"valid",value:function(e){if(void 0!==e)return e<0&&(e=0),e}},{key:"sheetName",value:function(){return this._sheetName}},{key:"setSheetName",value:function(e){this._sheetName=e}},{key:"rowStart",value:function(){return this._rowStart}},{key:"setRowStart",value:function(e){this._rowStart=this.valid(e)}},{key:"colStart",value:function(){return this._colStart}},{key:"setColStart",value:function(e){this._colStart=this.valid(e)}},{key:"rowEnd",value:function(){return this._rowEnd}},{key:"setRowEnd",value:function(e){this._rowEnd=this.valid(e)}},{key:"colEnd",value:function(){return this._colEnd}},{key:"setColEnd",value:function(e){this._colEnd=this.valid(e)}},{key:"clone",value:function(){return new e(this.sheetName(),this.rowStart(),this.rowEnd(),this.colStart(),this.colEnd())}},{key:"toA1",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[this._rowStart,this._rowEnd,this._colStart,this._colEnd],n=t[0],r=t[1],i=t[2],a=t[3];if(void 0!==n&&void 0!==r){var o=n,s=r;n=Math.min(o,s),r=Math.max(o,s)}if(void 0!==i&&void 0!==a){var u=i,l=a;i=Math.min(u,l),a=Math.max(u,l)}var c=Pw(n,i),h=Pw(r,a),f="".concat(c,":").concat(h);return":"===f&&(f=""),e&&void 0!==this._sheetName&&(f=f.length>0?"".concat(this._sheetName,"!").concat(f):"".concat(this._sheetName)),f}}],[{key:"fromA1",value:function(t){var n,r,i,a,o;t=t.trim();var s,u,l,c,h,f=new e;h=f.sheetName();var d=[f.rowStart(),f.rowEnd()];s=d[0],u=d[1];var p=[f.colStart(),f.colEnd()];if(l=p[0],c=p[1],-1!==t.indexOf("!")){var v,m=br(t.split("!"),2);if(h=m[0],v=m[1],h=h.trim(),-1!==v.indexOf(":")){var g=br(v.split(":"),2),y=g[0],b=g[1],x=br(Lw(y),2);s=x[0],l=x[1];var w=br(Lw(b),2);u=w[0],c=w[1]}else{var _=br(Lw(v),2);s=_[0],l=_[1]}}else if(-1!==t.indexOf(":")){var S=br(t.split(":"),2),k=S[0],M=S[1],T=br(Lw(k),2);s=T[0],l=T[1];var E=br(Lw(M),2);u=E[0],c=E[1]}else h=t.trim();return f.setSheetName(null!==(n=h)&&void 0!==n?n:void 0),f.setRowStart(null!==(r=s)&&void 0!==r?r:void 0),f.setColStart(null!==(i=l)&&void 0!==i?i:void 0),f.setRowEnd(null!==(a=u)&&void 0!==a?a:void 0),f.setColEnd(null!==(o=c)&&void 0!==o?o:void 0),f}}]),e}();function Nw(e){return Dw.apply(this,arguments)}function Dw(){return Dw=yr(mr().mark((function e(t){var n,r,i,a,o,u,l,c,h,f,p,v,m,g,y,b,x,w,_,S,k;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.spreadsheetId,r=t.ranges,e.next=3,Mw(n);case 3:i=e.sent,a=[],o=s(i.sheets);try{for(o.s();!(u=o.n()).done;)l=u.value,a.push(l.properties.title)}catch(M){o.e(M)}finally{o.f()}return e.next=9,Ew(n,r,gw.ROWS,yw.FORMATTED_VALUE,bw.FORMATTED_STRING,a);case 9:if((c=e.sent).spreadsheetId===n){e.next=12;break}throw new d.AssertionError({message:'Spreadsheet data returned from gSheetsBatchGet method (with spreadsheet id:"'.concat(c.spreadsheetId,'") was not from the same spreadsheet as the one requested by loadGoogleSheetsData (spreadsheet id "').concat(n,'")')});case 12:h=c.valueRanges,f=new Map,p=s(h);try{for(p.s();!(v=p.n()).done;)m=v.value,g=Ow.fromA1(m.range),y=g.sheetName(),void 0===(b=f.get(y))&&(b={title:y,data:[]},f.set(y,b)),m.values&&b.data.push({range:g,data:m.values})}catch(M){p.e(M)}finally{p.f()}x=[],w=s(f.values());try{for(w.s();!(_=w.n()).done;)S=_.value,x.push(S)}catch(M){w.e(M)}finally{w.f()}return k={id:n,title:i.properties.title,sheets:x},e.abrupt("return",k);case 21:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Iw(e,t){return jw.apply(this,arguments)}function jw(){return jw=yr(mr().mark((function e(t,n){var r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:return r=e.sent,e.next=5,r.blob();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Fw(e){return zw.apply(this,arguments)}function zw(){return(zw=yr(mr().mark((function e(t){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bw(e){return Uw.apply(this,arguments)}function Uw(){return Uw=yr(mr().mark((function e(t){var n,r,i,a,o,u,l,c,h,f,p,v,m,g,y,b,x,w,_,S,k=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=k.length>1&&void 0!==k[1]&&k[1],Aw(t=t.trim().replace("\\","/"))){e.next=4;break}throw new d.AssertionError({message:'URL "'.concat(t,'" does not appear to be from google sheets so it cannot be used to get a CSV.')});case 4:return r=Rw(t),e.next=7,Nw({spreadsheetId:r});case 7:if(i=e.sent,!n){e.next=15;break}a=[],o=s(i.sheets);try{for(o.s();!(u=o.n()).done;){l=u.value,c=s(zb(l.data));try{for(c.s();!(h=c.n()).done;)f=br(h.value,2),p=f[0],(v=f[1]).data&&(m="GoogleSheets_".concat(l.title),l.data.length>1&&(m+="_".concat(p+1)),a.push({name:m,csv:v.data}))}catch(M){c.e(M)}finally{c.f()}}}catch(M){o.e(M)}finally{o.f()}return e.abrupt("return",a);case 15:g=[],y=s(i.sheets);try{for(y.s();!(b=y.n()).done;){x=b.value,w=s(x.data);try{for(w.s();!(_=w.n()).done;)(S=_.value).data&&g.push(S.data)}catch(M){w.e(M)}finally{w.f()}}}catch(M){y.e(M)}finally{y.f()}return e.abrupt("return",g);case 19:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function Vw(e){return Gw.apply(this,arguments)}function Gw(){return Gw=yr(mr().mark((function e(t){var n,r,i,a,o,s,u=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],!(t=t.trim()).startsWith("https://docs.google.com/spreadsheets/d/")){e.next=10;break}if(!n){e.next=7;break}return e.abrupt("return",Bw(t,n));case 7:return e.abrupt("return",Bw(t,n));case 8:e.next=24;break;case 10:return e.next=12,Iw(t);case 12:return r=e.sent,e.next=15,Fw(r);case 15:if(i=e.sent,a=Array.from(Mb(i)),!n){e.next=23;break}return o=t.replace("\\","/").trim().split("/"),s=o[o.length-1],e.abrupt("return",[{name:s,csv:a}]);case 23:return e.abrupt("return",[a]);case 24:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Hw(e){return Ww.apply(this,arguments)}function Ww(){return(Ww=yr(mr().mark((function e(t){var n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!e.sent.ok){e.next=10;break}return n=new nx,e.next=7,new Promise((function(e,r){n.load(t,(function(t){e(t.scene)}),(function(){}),(function(){r('Could not load GLB from url "'.concat(t,'"'))}))}));case 7:return e.abrupt("return",e.sent);case 10:throw new Error('Bad response from url "'.concat(t,'" when trying to load GLB object'));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zw(e){return $w.apply(this,arguments)}function $w(){return $w=yr(mr().mark((function e(t){var n,r,i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O,N,D;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,Iw(t);case 3:return r=e.sent,e.next=6,Fw(r);case 6:if(i=e.sent,a=new DOMParser,o=a.parseFromString(i,"text/xml"),0!==(u=Array.from(o.getElementsByTagName("mesh"))).length){e.next=14;break}l=e_(i),e.next=56;break;case 14:c=[],h=[],f=s(u);try{for(f.s();!(d=f.n()).done;)p=d.value,v=p.attributes.filename.nodeValue,m=t.substring(0,t.lastIndexOf("/")),g=v.replace("package://",m+"/../../").replaceAll("#","%23"),c.push([v,g]),h.push(Iw(g))}catch(I){f.e(I)}finally{f.f()}return e.next=20,Promise.all(h);case 20:y=e.sent,b=s(zb(y)),e.prev=22,b.s();case 24:if((x=b.n()).done){e.next=47;break}if(w=br(x.value,2),_=w[0],S=w[1],k=br(c[_],2),M=k[0],T=k[1],E="",!/\.stl$/i.test(M)){e.next=36;break}E=".stlX",C=URL.createObjectURL(S),A=C.substring(C.lastIndexOf("/")+1).trim()+E,R=M,i=i.replace(R,A),e.next=45;break;case 36:if(!/\.dae$/i.test(M)){e.next=45;break}return E=".daeX",e.next=40,qw(S,n,T);case 40:P=e.sent,L=URL.createObjectURL(P),O=L.substring(L.lastIndexOf("/")+1).trim()+E,N=M,i=i.replace(N,O);case 45:e.next=24;break;case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(22),b.e(e.t0);case 52:return e.prev=52,b.f(),e.finish(52);case 55:l=e_(i);case 56:return D=URL.createObjectURL(l),e.next=59,new Promise((function(e,t){var n,r=new db.LoadingManager,i=new vw(r);i.parseVisual=!0,i.parseCollision=!1,i.load(D,(function(e){n=e})),r.onLoad=function(){e(n)},r.onError=function(e){var n='Failed to load URDF from URL "'.concat(e,'".');dr.error(n),t(n)}}));case 59:return e.abrupt("return",e.sent);case 60:case"end":return e.stop()}}),e,null,[[22,49,52,55]])}))),$w.apply(this,arguments)}function qw(e,t,n){return Xw.apply(this,arguments)}function Xw(){return(Xw=yr(mr().mark((function e(t,n,r){var i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fw(t);case 2:for(i=e.sent,a=new DOMParser,o=a.parseFromString(i,"text/xml"),u=Array.from(o.getElementsByTagName("image")),l=[],c=0,h=u;c<h.length;c++)f=h[c],d=f.childNodes[1].innerHTML,p=r.substring(0,r.lastIndexOf("/")+1)+d,n.get(p)?n.get(p).newLink?i=i.replace(n.get(p).imageFile,n.get(p).newLink):l.push(p):(n.set(p,{imageFile:d}),l.push(p));if(0!==l.length){e.next=13;break}return v=e_(i),e.abrupt("return",v);case 13:m=[],g=s(l),e.prev=15,g.s();case 17:if((y=g.n()).done){e.next=28;break}return b=y.value,e.t0=m,e.t1=b,e.next=23,Iw(b);case 23:e.t2=e.sent,e.t3=[e.t1,e.t2],e.t0.push.call(e.t0,e.t3);case 26:e.next=17;break;case 28:e.next=33;break;case 30:e.prev=30,e.t4=e.catch(15),g.e(e.t4);case 33:return e.prev=33,g.f(),e.finish(33);case 36:for(x=0,w=m;x<w.length;x++)_=br(w[x],2),S=_[0],k=_[1],M=URL.createObjectURL(k),T=M.substring(M.lastIndexOf("/")+1).trim(),i=i.replace(n.get(S).imageFile,T),n.get(S).newLink=T;return E=e_(i),e.abrupt("return",E);case 39:case"end":return e.stop()}}),e,null,[[15,30,33,36]])})))).apply(this,arguments)}function Yw(e){return Kw.apply(this,arguments)}function Kw(){return(Kw=yr(mr().mark((function e(t){var n,r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iw(t);case 2:return n=e.sent,e.next=5,Fw(n);case 5:return r=e.sent,i=JSON.parse(r),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jw(e){return Qw.apply(this,arguments)}function Qw(){return(Qw=yr(mr().mark((function e(t){var n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fw(t);case 2:return n=e.sent,e.abrupt("return",JSON.parse(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function e_(e){return new Blob([e],{type:"text/plain"})}var t_=n(153),n_=new TextDecoder;function r_(e){if(e.length>=50)return n_.decode(e);for(var t=0;t<e.length;t++)if(128&e[t])return n_.decode(e);return String.fromCharCode.apply(null,e)}function i_(e,t){return void 0==e&&console.warn("bigint arrays are not supported in this environment"),function(n,r,i){if(void 0==e)throw new Error("bigint arrays are not supported in this environment");var a=r,o=n.byteOffset+a,s=e.BYTES_PER_ELEMENT*i,u=n.byteLength-r;if(s<0||s>u)throw new RangeError("Array(".concat(t,") deserialization error: size ").concat(s,", maxSize ").concat(u));if(o%e.BYTES_PER_ELEMENT===0)return new e(n.buffer,o,i);if(i<10){for(var l=new e(i),c=0;c<i;++c)l[c]=n[t](a,!0),a+=e.BYTES_PER_ELEMENT;return l}var h=new Uint8Array(s);return h.set(new Uint8Array(n.buffer,o,s)),new e(h.buffer,h.byteOffset,i)}}new Map([["bool",1],["int8",1],["uint8",1],["int16",2],["uint16",2],["int32",4],["uint32",4],["int64",8],["uint64",8],["float32",4],["float64",8],["time",8],["duration",8]]);var a_={bool:function(e,t){return 0!==e.getUint8(t)},int8:function(e,t){return e.getInt8(t)},uint8:function(e,t){return e.getUint8(t)},int16:function(e,t){return e.getInt16(t,!0)},uint16:function(e,t){return e.getUint16(t,!0)},int32:function(e,t){return e.getInt32(t,!0)},uint32:function(e,t){return e.getUint32(t,!0)},int64:function(e,t){return e.getBigInt64(t,!0)},uint64:function(e,t){return e.getBigUint64(t,!0)},float32:function(e,t){return e.getFloat32(t,!0)},float64:function(e,t){return e.getFloat64(t,!0)},time:function(e,t){return{sec:e.getUint32(t,!0),nsec:e.getUint32(t+4,!0)}},duration:function(e,t){return{sec:e.getInt32(t,!0),nsec:e.getInt32(t+4,!0)}},string:function(e,t){var n=e.getUint32(t,!0),r=e.byteOffset+t+4,i=e.byteLength-t;if(n<0||n>i)throw new RangeError("String deserialization error: length ".concat(n,", maxLength ").concat(i));return r_(new Uint8Array(e.buffer,r,n))},boolArray:function(e,t,n){for(var r=t,i=new Array(n),a=0;a<n;++a)i[a]=a_.bool(e,r),r+=1;return i},int8Array:i_(Int8Array,"getInt8"),uint8Array:i_(Uint8Array,"getUint8"),int16Array:i_(Int16Array,"getInt16"),uint16Array:i_(Uint16Array,"getUint16"),int32Array:i_(Int32Array,"getInt32"),uint32Array:i_(Uint32Array,"getUint32"),int64Array:i_("function"===typeof BigInt64Array?BigInt64Array:void 0,"getBigInt64"),uint64Array:i_("function"===typeof BigUint64Array?BigUint64Array:void 0,"getBigUint64"),float32Array:i_(Float32Array,"getFloat32"),float64Array:i_(Float64Array,"getFloat64"),timeArray:function(e,t,n){var r=t,i=new Array(n),a=e.byteOffset+r;if(a%Int32Array.BYTES_PER_ELEMENT===0)for(var o=new Int32Array(e.buffer,a,2*n),s=0,u=0;s<n;++s,u+=2)i[s]={sec:o[u],nsec:o[u+1]};else for(var l=0;l<n;++l)i[l]={sec:e.getInt32(r,!0),nsec:e.getInt32(r+4,!0)},r+=8;return i},durationArray:function(e,t,n){return a_.timeArray(e,t,n)},fixedArray:function(e,t,n,r,i){for(var a=t,o=new Array(n),s=0;s<n;++s)o[s]=r(e,a),a+=i(e,a);return o},dynamicArray:function(e,t,n,r){var i=e.getUint32(t,!0);return a_.fixedArray(e,t+4,i,n,r)}};var o_=!function(){var e=new Uint8Array(4);return new Uint32Array(e.buffer)[0]=1,1===e[3]}();if(!o_)throw new Error("Only Little Endian architectures are supported");var s_=function(){function e(t){(0,u.Z)(this,e),this.buffer=t,this.offset=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}return(0,l.Z)(e,[{key:"json",value:function(){var e=this.string();try{return JSON.parse(e)}catch(t){return"Could not parse ".concat(e)}}},{key:"string",value:function(){var e=this.uint32(),t=this.view.byteOffset+this.offset,n=this.view.byteLength-this.offset;if(e<0||e>n)throw new RangeError("String deserialization error: length ".concat(e,", maxLength ").concat(n));var r=new Uint8Array(this.view.buffer,t,e);return this.offset+=e,r_(r)}},{key:"bool",value:function(){return 0!==this.uint8()}},{key:"int8",value:function(){return this.view.getInt8(this.offset++)}},{key:"uint8",value:function(){return this.view.getUint8(this.offset++)}},{key:"typedArray",value:function(e,t){var n=void 0==e?this.uint32():e,r=this.view,i=this.offset+r.byteOffset;if(this.offset+=n*t.BYTES_PER_ELEMENT,i%t.BYTES_PER_ELEMENT===0)return new t(r.buffer,i,n);var a=t.BYTES_PER_ELEMENT*n,o=new Uint8Array(a);return o.set(new Uint8Array(r.buffer,i,a)),new t(o.buffer,o.byteOffset,n)}},{key:"int16",value:function(){var e=this.view.getInt16(this.offset,!0);return this.offset+=2,e}},{key:"uint16",value:function(){var e=this.view.getUint16(this.offset,!0);return this.offset+=2,e}},{key:"int32",value:function(){var e=this.view.getInt32(this.offset,!0);return this.offset+=4,e}},{key:"uint32",value:function(){var e=this.view.getUint32(this.offset,!0);return this.offset+=4,e}},{key:"float32",value:function(){var e=this.view.getFloat32(this.offset,!0);return this.offset+=4,e}},{key:"float64",value:function(){var e=this.view.getFloat64(this.offset,!0);return this.offset+=8,e}},{key:"int64",value:function(){var e=this.offset;return this.offset+=8,this.view.getBigInt64(e,!0)}},{key:"uint64",value:function(){var e=this.offset;return this.offset+=8,this.view.getBigUint64(e,!0)}},{key:"time",value:function(){var e=this.offset;return this.offset+=8,{sec:this.view.getUint32(e,!0),nsec:this.view.getUint32(e+4,!0)}}},{key:"duration",value:function(){var e=this.offset;return this.offset+=8,{sec:this.view.getInt32(e,!0),nsec:this.view.getInt32(e+4,!0)}}}]),e}(),u_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="",r=e.filter((function(e){var r,i=null!==(r=e.name)&&void 0!==r?r:"";if(!t)return!i;var a=t.includes("/")?t:"/".concat(t);return!!i.endsWith(a)&&(n=i,!0)}));if(1!==r.length)throw new Error("Expected 1 top level type definition for '".concat(t,"' but found ").concat(r.length,"."));return Cr(Cr({},r[0]),{},{name:n})},l_=function(e){return e.replace(/\//g,"_")};var c_=function(e){var t=e.definitions,n=e.options,r=void 0===n?{}:n,i=e.topLevelReaderKey;if(0===t.length)throw new Error("no types given");var a=t.filter((function(e){return!e.name}));if(a.length>1)throw new Error("multiple unnamed types");var o,u=a.length>0?a[0]:t[0],l=t.filter((function(e){return!!e.name})),c=function(e){var n=[];return e.definitions.forEach((function(e){if(!0!==e.isConstant)if(!0===e.isArray){var r=function(e){switch(e){case"int8":return"Int8Array";case"uint8":return"Uint8Array";case"int16":return"Int16Array";case"uint16":return"Uint16Array";case"int32":return"Int32Array";case"uint32":return"Uint32Array";case"int64":return"BigInt64Array";case"uint64":return"BigUint64Array";case"float32":return"Float32Array";case"float64":return"Float64Array";default:return}}(e.type);if(void 0!=r)return void n.push("this.".concat(e.name," = reader.typedArray(").concat(String(e.arrayLength),", ").concat(r,");"));var i="length_".concat(e.name);n.push("var ".concat(i," = ").concat(void 0!=e.arrayLength?e.arrayLength:"reader.uint32();"));var a="this.".concat(e.name);if(n.push("".concat(a," = new Array(").concat(i,")")),n.push("for (var i = 0; i < ".concat(i,"; i++) {")),!0===e.isComplex){var o=u_(t,e.type);n.push("  ".concat(a,"[i] = new Record.").concat(l_(o.name),"(reader);"))}else n.push("  ".concat(a,"[i] = reader.").concat(e.type,"();"));n.push("}")}else if(!0===e.isComplex){var s=u_(t,e.type);n.push("this.".concat(e.name," = new Record.").concat(l_(s.name),"(reader);"))}else n.push("this.".concat(e.name," = reader.").concat(e.type,"();"))})),!0===r.freeze&&n.push("Object.freeze(this);"),n.join("\n    ")},h="\n  const builtReaders = new Map();\n  var Record = function (reader) {\n    ".concat(c(u),"\n  };\n  builtReaders.set(topLevelReaderKey, Record);\n  "),f=s(l);try{for(f.s();!(o=f.n()).done;){var d=o.value;h+="\n  Record.".concat(l_(d.name)," = function(reader) {\n    ").concat(c(d),"\n  };\n  builtReaders.set(").concat(JSON.stringify(d.name),", Record.").concat(l_(d.name),");\n  ")}}catch(p){f.e(p)}finally{f.f()}return h+="return builtReaders;",new Function("topLevelReaderKey",h)(i)},h_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.Z)(this,e),this.reader=c_({definitions:t,options:n,topLevelReaderKey:"<toplevel>"}).get("<toplevel>")}return(0,l.Z)(e,[{key:"readMessage",value:function(e){var t=new s_(e);return new this.reader(t)}}]),e}(),f_=n(7545),d_="=".charCodeAt(0);function p_(e){if(e.length<4)throw new Error("fields are truncated.");for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,r={};n<e.length;){var i=t.getInt32(n,!0);if((n+=4)+i>e.length)throw new Error("Header fields are corrupt.");var a=e.subarray(n,n+i),o=a.indexOf(d_);if(-1===o)throw new Error("Header field is missing equals sign.");r[(new TextDecoder).decode(a.subarray(0,o))]=a.subarray(o+1),n+=i}return r}function v_(e,t){var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return{sec:n.getUint32(t,!0),nsec:n.getUint32(t+4,!0)}}var m_=n(5641),g_=n.n(m_);var y_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=new(g_())((function(t,n){return e(t.value,n.value)})),a=0;a<n.length;a++){var o=n[a].next();!0!==o.done&&i.push({i:a,value:o.value})}return{next:function(){if(i.empty())return{done:!0,value:void 0};var e=i.front().i,t=n[e].next();return!0===t.done?{value:i.pop().value,done:!1}:{value:i.replace({i:e,value:t.value}).value,done:!1}}}};function b_(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)}function x_(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).getInt32(0,!0)}function w_(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=BigInt(t.getUint32(0,!0))|BigInt(t.getUint32(4,!0))<<32n;if(n>Number.MAX_SAFE_INTEGER)throw new Error("Read a bigint larger than 2**53: ".concat(n));return Number(n)}var __=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,[{key:"parseData",value:function(e){}}]),e}(),S_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).indexPosition=w_(e.index_pos),r.connectionCount=x_(e.conn_count),r.chunkCount=x_(e.chunk_count),r}return(0,l.Z)(n)}(__);S_.opcode=3;var k_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).compression=(new TextDecoder).decode(e.compression),r.size=b_(e.size),r}return(0,l.Z)(n,[{key:"parseData",value:function(e){this.data=e}}]),n}(__);k_.opcode=5;var M_=function(e,t){if(void 0==e[t])throw new Error("Connection header is missing ".concat(t,"."));return(new TextDecoder).decode(e[t])},T_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).conn=b_(e.conn),r.topic=(new TextDecoder).decode(e.topic),r.type=void 0,r.md5sum=void 0,r.messageDefinition="",r}return(0,l.Z)(n,[{key:"parseData",value:function(e){var t=p_(e);this.type=M_(t,"type"),this.md5sum=M_(t,"md5sum"),this.messageDefinition=M_(t,"message_definition"),void 0!=t.callerid&&(this.callerid=(new TextDecoder).decode(t.callerid)),void 0!=t.latching&&(this.latching="1"===(new TextDecoder).decode(t.latching))}}]),n}(__);T_.opcode=7;var E_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).conn=b_(e.conn),r.time=v_(e.time,0),r}return(0,l.Z)(n,[{key:"parseData",value:function(e){this.data=e}}]),n}(__);E_.opcode=2;var C_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).ver=b_(e.ver),r.conn=b_(e.conn),r.count=b_(e.count),r}return(0,l.Z)(n,[{key:"parseData",value:function(e){this.indices=[];for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0;n<this.count;n++)this.indices.push({time:v_(e,12*n),offset:t.getUint32(12*n+8,!0)})}}]),n}(__);C_.opcode=4;var A_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this)).connections=[],r.ver=b_(e.ver),r.chunkPosition=w_(e.chunk_pos),r.startTime=v_(e.start_time,0),r.endTime=v_(e.end_time,0),r.count=b_(e.count),r}return(0,l.Z)(n,[{key:"parseData",value:function(e){this.connections=[];for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0;n<this.count;n++)this.connections.push({conn:t.getUint32(8*n,!0),count:t.getUint32(8*n+4,!0)})}}]),n}(__);A_.opcode=6;var R_=!0,P_=function(){function e(t){(0,u.Z)(this,e),this._file=t}return(0,l.Z)(e,[{key:"verifyBagHeader",value:function(){var e=yr(mr().mark((function e(){var t;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._file.read(0,13);case 2:if(t=e.sent,"#ROSBAG V2.0\n"===(new TextDecoder).decode(t)){e.next=6;break}throw new Error("Cannot identify bag format.");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readHeader",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifyBagHeader();case 2:return e.next=4,this._file.read(13,4096);case 4:if(t=e.sent,n=new DataView(t.buffer,t.byteOffset,t.byteLength),!((r=t.length)<8)){e.next=9;break}throw new Error("Record at position ".concat(13," is truncated."));case 9:if(i=n.getInt32(0,R_),!(r<i+8)){e.next=12;break}throw new Error("Record at position ".concat(13," header too large: ").concat(i,"."));case 12:return e.abrupt("return",this.readRecordFromBuffer(t,13,S_));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readConnectionsAndChunkInfo",value:function(){var e=yr(mr().mark((function e(t,n,r){var i,a,o,s,u;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._file.read(t,this._file.size()-t);case 2:if(i=e.sent,0!==n){e.next=5;break}return e.abrupt("return",{connections:[],chunkInfos:[]});case 5:if(a=this.readRecordsFromBuffer(i,n,t,T_),o=a[n-1].end-a[0].offset,s=this.readRecordsFromBuffer(i.subarray(o),r,t+o,A_),r>0){for(u=0;u<r-1;u++)s[u].nextChunk=s[u+1];s[r-1].nextChunk=void 0}return e.abrupt("return",{connections:a,chunkInfos:s});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"readChunkMessages",value:function(){var e=yr(mr().mark((function e(t,n,r,i,a){var o,s,u,l,c,h,f,d,p,v,m,g,y,b=this;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!==r&&void 0!==r?r:{sec:0,nsec:0},s=null!==i&&void 0!==i?i:{sec:Number.MAX_VALUE,nsec:Number.MAX_VALUE},u=null!==n&&void 0!==n?n:t.connections.map((function(e){return e.conn})),e.next=5,this.readChunk(t,a);case 5:l=e.sent,c=l.chunk,h={},l.indices.forEach((function(e){h[e.conn]=e})),f=u.filter((function(e){return void 0!=h[e]})),d=f.map((function(e){return h[e].indices[Symbol.iterator]()})),p=y_.apply(void 0,[function(e,t){return(0,f_.compare)(e.time,t.time)}].concat(pr(d))),v=[],m=p.next();case 14:if(!0===m.done){e.next=24;break}if(g=m.value,m=p.next(),null!=g&&!(0,f_.isGreaterThan)(o,g.time)){e.next=19;break}return e.abrupt("continue",14);case 19:if(!(0,f_.isGreaterThan)(g.time,s)){e.next=21;break}return e.abrupt("break",24);case 21:v.push(g),e.next=14;break;case 24:return y=v.map((function(e){return b.readRecordFromBuffer(c.data.subarray(e.offset),c.dataOffset,E_)})),e.abrupt("return",y);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()},{key:"readChunk",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a,o,s,u,l,c;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this._lastChunkInfo||null==this._lastReadResult){e.next=2;break}return e.abrupt("return",this._lastReadResult);case 2:return r=t.nextChunk,i=null!=r?r.chunkPosition-t.chunkPosition:this._file.size()-t.chunkPosition,e.next=6,this._file.read(t.chunkPosition,i);case 6:if(a=e.sent,o=this.readRecordFromBuffer(a,t.chunkPosition,k_),"none"===(s=o.compression)){e.next=15;break}if(null!=(u=n[s])){e.next=13;break}throw new Error("Unsupported compression type ".concat(o.compression));case 13:l=u(o.data,o.size),o.data=l;case 15:return c=this.readRecordsFromBuffer(a.subarray(o.length),t.count,t.chunkPosition+o.length,C_),this._lastChunkInfo=t,this._lastReadResult={chunk:o,indices:c},e.abrupt("return",this._lastReadResult);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"readRecordsFromBuffer",value:function(e,t,n,r){for(var i=[],a=0,o=0;o<t;o++){var s=this.readRecordFromBuffer(e.subarray(a),n+a,r);a+=s.end-s.offset,i.push(s)}return i}},{key:"readRecordFromBuffer",value:function(e,t,n){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=r.getInt32(0,R_),a=p_(e.subarray(4,4+i));if(void 0==a.op)throw new Error("Record is missing 'op' field.");var o=new DataView(a.op.buffer,a.op.byteOffset,a.op.byteLength).getUint8(0);if(o!==n.opcode)throw new Error("Expected ".concat(n.name," (").concat(n.opcode,") but found ").concat(o));var s=new n(a),u=4+i+4,l=r.getInt32(4+i,R_),c=new Uint8Array(e.buffer.slice(e.byteOffset+u,e.byteOffset+u+l));return s.parseData(c),s.offset=t,s.dataOffset=s.offset+4+i+4,s.end=s.dataOffset+l,s.length=s.end-s.offset,s}}]),e}();function L_(e,t){this.v=e,this.k=t}function O_(e){return new L_(e,0)}function N_(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof L_;Promise.resolve(s?o.v:o).then((function(n){if(s){var u="return"===t?"return":"next";if(!o.k||n.done)return r(u,n);n=e[u](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}N_.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},N_.prototype.next=function(e){return this._invoke("next",e)},N_.prototype.throw=function(e){return this._invoke("throw",e)},N_.prototype.return=function(e){return this._invoke("return",e)};var D_=function(e){function t(e,n){if((0,u.Z)(this,t),this.cachedChunkReadResults=new Map,this.connections=e.connections,this.reader=e.reader,this.position=e.position,this.decompress=e.decompress,this.reader=e.reader,this.chunkInfos=e.chunkInfos,this.heap=new(g_())(n),this.parse=e.parse,e.topics){var r,i=e.topics,a=this.connectionIds=new Set,o=s(e.connections);try{for(o.s();!(r=o.n()).done;){var l=br(r.value,2),c=l[0],h=l[1];i.includes(h.topic)&&this.connectionIds.add(c)}}catch(f){o.e(f)}finally{o.f()}this.chunkInfos=e.chunkInfos.filter((function(e){return e.connections.find((function(e){return a.has(e.conn)}))}))}}return(0,l.Z)(t,[{key:e,value:function(){var e,t=this;return(e=mr().mark((function e(){var n,r,i,a,o,s,u,l,c;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.heap.front()){e.next=4;break}return e.next=4,O_(t.loadNext());case 4:if(t.heap.front()){e.next=7;break}return e.next=7,O_(t.loadNext());case 7:if(r=t.heap.pop()){e.next=10;break}return e.abrupt("return");case 10:if(i=r.chunkReadResult.chunk,a=t.reader.readRecordFromBuffer(i.data.subarray(r.offset),i.dataOffset,E_),o=t.connections.get(a.conn)){e.next=15;break}throw new Error("Unable to find connection with id ".concat(a.conn));case 15:if(s=o.topic,u=a.data,l=a.time,u){e.next=19;break}throw new Error("No data in message for topic: ".concat(s));case 19:return c={topic:s,connectionId:a.conn,timestamp:l,data:u,message:null===(n=t.parse)||void 0===n?void 0:n.call(t,u,o)},e.next=22,c;case 22:e.next=0;break;case 24:case"end":return e.stop()}}),e)})),function(){return new N_(e.apply(this,arguments))})()}}]),t}(Symbol.asyncIterator),I_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,u.Z)(this,n),r=t.call(this,e,(function(e,t){return(0,f_.compare)(e.time,t.time)})),r.chunkInfos=r.chunkInfos.filter((function(e){return(0,f_.compare)(e.endTime,r.position)>=0}));var i,a=new(g_())((function(e,t){return(0,f_.compare)(e.startTime,t.startTime)})),o=s(r.chunkInfos);try{for(o.s();!(i=o.n()).done;){var l=i.value;a.insert(l)}}catch(c){o.e(c)}finally{o.f()}for(r.remainingChunkInfos=[];a.size()>0;)r.remainingChunkInfos.push(a.pop());return r}return(0,l.Z)(n,[{key:"loadNext",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.position,n=this.remainingChunkInfos[0]){e.next=4;break}return e.abrupt("return");case 4:this.remainingChunkInfos[0]=void 0,r=n.endTime,i=[n],a=1;case 8:if(!(a<this.remainingChunkInfos.length)){e.next=20;break}if(o=this.remainingChunkInfos[a]){e.next=12;break}return e.abrupt("continue",17);case 12:if(!((0,f_.compare)(o.startTime,r)>0)){e.next=14;break}return e.abrupt("break",20);case 14:i.push(o),(0,f_.compare)(o.endTime,r)<=0&&(this.remainingChunkInfos[a]=void 0);case 17:++a,e.next=8;break;case 20:if(this.remainingChunkInfos=this.remainingChunkInfos.filter(Boolean),0!==i.length){e.next=23;break}return e.abrupt("return");case 23:this.position=r=(0,f_.add)(r,{sec:0,nsec:1}),u=this.heap,l=new Map,c=0,h=i;case 27:if(!(c<h.length)){e.next=73;break}if(f=h[c],d=this.cachedChunkReadResults.get(f.chunkPosition)){e.next=34;break}return e.next=33,this.reader.readChunk(f,this.decompress);case 33:d=e.sent;case 34:(0,f_.compare)(f.startTime,r)<=0&&(0,f_.compare)(f.endTime,r)>=0&&l.set(f.chunkPosition,d),p=s(d.indices),e.prev=36,p.s();case 38:if((v=p.n()).done){e.next=62;break}if(g=v.value,!this.connectionIds||this.connectionIds.has(g.conn)){e.next=42;break}return e.abrupt("continue",60);case 42:y=s(null!==(m=g.indices)&&void 0!==m?m:[]),e.prev=43,y.s();case 45:if((b=y.n()).done){e.next=52;break}if(x=b.value,!((0,f_.compare)(x.time,t)<0||(0,f_.compare)(x.time,r)>=0)){e.next=49;break}return e.abrupt("continue",50);case 49:u.push({time:x.time,offset:x.offset,chunkReadResult:d});case 50:e.next=45;break;case 52:e.next=57;break;case 54:e.prev=54,e.t0=e.catch(43),y.e(e.t0);case 57:return e.prev=57,y.f(),e.finish(57);case 60:e.next=38;break;case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(36),p.e(e.t1);case 67:return e.prev=67,p.f(),e.finish(67);case 70:c++,e.next=27;break;case 73:this.cachedChunkReadResults=l;case 74:case"end":return e.stop()}}),e,this,[[36,64,67,70],[43,54,57,60]])})));return function(){return e.apply(this,arguments)}}()}]),n}(D_),j_=(0,l.Z)((function e(t,n,r,i,a,o,s){(0,u.Z)(this,e),this.topic=t,this.message=n,this.timestamp=r,this.data=i,this.chunkOffset=a,this.totalChunks=o,!0===s&&(Object.freeze(r),Object.freeze(this))})),F_=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;(0,u.Z)(this,n),r=t.call(this,e,(function(e,t){return(0,f_.compare)(t.time,e.time)})),r.chunkInfos=r.chunkInfos.filter((function(e){return(0,f_.compare)(e.startTime,r.position)<=0}));var i,a=new(g_())((function(e,t){return(0,f_.compare)(t.endTime,e.endTime)})),o=s(r.chunkInfos);try{for(o.s();!(i=o.n()).done;){var l=i.value;a.insert(l)}}catch(c){o.e(c)}finally{o.f()}for(r.remainingChunkInfos=[];a.size()>0;)r.remainingChunkInfos.push(a.pop());return r}return(0,l.Z)(n,[{key:"loadNext",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.position,n=this.remainingChunkInfos[0]){e.next=4;break}return e.abrupt("return");case 4:this.remainingChunkInfos[0]=void 0,r=n.startTime,i=[n],a=1;case 8:if(!(a<this.remainingChunkInfos.length)){e.next=20;break}if(o=this.remainingChunkInfos[a]){e.next=12;break}return e.abrupt("continue",17);case 12:if(!((0,f_.compare)(o.endTime,r)<0)){e.next=14;break}return e.abrupt("break",20);case 14:i.push(o),(0,f_.compare)(o.startTime,r)>=0&&(this.remainingChunkInfos[a]=void 0);case 17:++a,e.next=8;break;case 20:if(this.remainingChunkInfos=this.remainingChunkInfos.filter(Boolean),0!==i.length){e.next=23;break}return e.abrupt("return");case 23:this.position=r=(0,f_.subtract)(r,{sec:0,nsec:1}),u=this.heap,l=new Map,c=0,h=i;case 27:if(!(c<h.length)){e.next=73;break}if(f=h[c],d=this.cachedChunkReadResults.get(f.chunkPosition)){e.next=34;break}return e.next=33,this.reader.readChunk(f,this.decompress);case 33:d=e.sent;case 34:(0,f_.compare)(f.startTime,r)<=0&&(0,f_.compare)(f.endTime,r)>=0&&l.set(f.chunkPosition,d),p=s(d.indices),e.prev=36,p.s();case 38:if((v=p.n()).done){e.next=62;break}if(g=v.value,!this.connectionIds||this.connectionIds.has(g.conn)){e.next=42;break}return e.abrupt("continue",60);case 42:y=s(null!==(m=g.indices)&&void 0!==m?m:[]),e.prev=43,y.s();case 45:if((b=y.n()).done){e.next=52;break}if(x=b.value,!((0,f_.compare)(x.time,r)<=0||(0,f_.compare)(x.time,t)>0)){e.next=49;break}return e.abrupt("continue",50);case 49:u.push({time:x.time,offset:x.offset,chunkReadResult:d});case 50:e.next=45;break;case 52:e.next=57;break;case 54:e.prev=54,e.t0=e.catch(43),y.e(e.t0);case 57:return e.prev=57,y.f(),e.finish(57);case 60:e.next=38;break;case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(36),p.e(e.t1);case 67:return e.prev=67,p.f(),e.finish(67);case 70:c++,e.next=27;break;case 73:this.cachedChunkReadResults=l;case 74:case"end":return e.stop()}}),e,this,[[36,64,67,70],[43,54,57,60]])})));return function(){return e.apply(this,arguments)}}()}]),n}(D_),z_=function(){function e(t,n){(0,u.Z)(this,e),this.chunkInfos=[],this.reader=new P_(t),this.connections=new Map,this.bagOpt=null!==n&&void 0!==n?n:{}}return(0,l.Z)(e,[{key:"open",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a,o=this;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reader.readHeader();case 2:return this.header=e.sent,t=this.header,n=t.connectionCount,r=t.chunkCount,i=t.indexPosition,e.next=6,this.reader.readConnectionsAndChunkInfo(i,n,r);case 6:a=e.sent,this.connections=new Map,a.connections.forEach((function(e){o.connections.set(e.conn,e)})),this.chunkInfos=a.chunkInfos,r>0&&(this.startTime=this.chunkInfos[0].startTime,this.endTime=this.chunkInfos[r-1].endTime);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"messageIterator",value:function(e){var t,n=null===e||void 0===e?void 0:e.topics;if(!1!==this.bagOpt.parse&&(t=function(e,t){var n;return null!==(n=t.reader)&&void 0!==n||(t.reader=new h_((0,t_.parse)(t.messageDefinition))),t.reader.readMessage(e)}),!0===(null===e||void 0===e?void 0:e.reverse)){var r,i,a=null!==(r=null===e||void 0===e?void 0:e.start)&&void 0!==r?r:this.endTime;if(!a)throw new Error("no timestamp");return new F_({position:a,topics:n,reader:this.reader,connections:this.connections,chunkInfos:this.chunkInfos,decompress:null!==(i=this.bagOpt.decompress)&&void 0!==i?i:{},parse:t})}var o,s,u=null!==(o=null===e||void 0===e?void 0:e.start)&&void 0!==o?o:this.startTime;if(!u)throw new Error("no timestamp");return new I_({position:u,topics:n,reader:this.reader,chunkInfos:this.chunkInfos,connections:this.connections,decompress:null!==(s=this.bagOpt.decompress)&&void 0!==s?s:{},parse:t})}},{key:"readMessages",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,f,d,p,v,m,g=this;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=function(e,n){var r=o.get(e.conn);if(null==r)throw new Error("Unable to find connection with id ".concat(e.conn));var i=r.topic,a=e.data,s=e.time;if(null==a)throw new Error("No data in message for topic: ".concat(i));var u,l=null;!0!==t.noParse&&(r.reader=null!==(u=r.reader)&&void 0!==u?u:new h_((0,t_.parse)(r.messageDefinition),{freeze:t.freeze}),l=r.reader.readMessage(a));return new j_(i,l,s,a,n,d.length,t.freeze)},o=this.connections,s=null!==(r=t.startTime)&&void 0!==r?r:{sec:0,nsec:0},u=null!==(i=t.endTime)&&void 0!==i?i:{sec:Number.MAX_VALUE,nsec:Number.MAX_VALUE},l=null!==(a=t.topics)&&void 0!==a?a:pr(o.values()).map((function(e){return e.topic})),c=pr(o.values()).filter((function(e){return l.includes(e.topic)})).map((function(e){return e.conn})),h=t.decompress,f=void 0===h?{}:h,d=this.chunkInfos.filter((function(e){return(0,f_.compare)(e.startTime,u)<=0&&(0,f_.compare)(s,e.endTime)<=0})),v=mr().mark((function e(t){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d[t],e.next=3,g.reader.readChunkMessages(r,c,s,u,f);case 3:e.sent.forEach((function(e){return n(p(e,t))}));case 5:case"end":return e.stop()}}),e)})),m=0;case 10:if(!(m<d.length)){e.next=15;break}return e.delegateYield(v(m),"t0",12);case 12:m++,e.next=10;break;case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),B_=n(6527);function U_(e){var t,n,r,i,a,o=null!==(t=e.position)&&void 0!==t?t:{x:0,y:0,z:0},s=new db.Vector3(null!==(n=o.x)&&void 0!==n?n:0,null!==(r=o.y)&&void 0!==r?r:0,null!==(i=o.z)&&void 0!==i?i:0),u=null!==(a=e.rotation)&&void 0!==a?a:{x:0,y:0,z:0,w:0},l=function(e,t){var n,r,i,a,o,s=new db.Quaternion(null!==(n=e.x)&&void 0!==n?n:0,null!==(r=e.y)&&void 0!==r?r:0,null!==(i=e.z)&&void 0!==i?i:0,null!==(a=e.w)&&void 0!==a?a:0),u=new db.Vector3,l=s.w*s.w;o=2*Math.acos(s.w),u.x=s.x/Math.max(Math.sqrt(1-l),1e-8),u.y=s.y/Math.max(Math.sqrt(1-l),1e-8),u.z=s.z/Math.max(Math.sqrt(1-l),1e-8);var c=new db.Vector3;c.z=u.x,c.x=u.y,c.y=u.z;var h=new db.Quaternion;h.setFromAxisAngle(c,o),s.copy(h);var f,d,p,v=t.clone(),m=v.x,g=v.y,y=v.z;v.y=y,v.z=g,v.x=m?-m:m;var b=new db.Vector3(null!==(f=v.x)&&void 0!==f?f:0,null!==(d=v.y)&&void 0!==d?d:0,null!==(p=v.z)&&void 0!==p?p:0);return b.applyEuler(new db.Euler(0,Math.PI/2,0)),v.x=b.x,v.y=b.y,v.z=b.z,[s,v]}(void 0===u.w?(new db.Quaternion).setFromEuler(new db.Euler(u.x,u.y,u.z)):new db.Quaternion(u.x,u.y,u.z,u.w),s),c=br(l,2),h=c[0],f=c[1];return e.rotation={x:h.x,y:h.y,z:h.z,w:h.w},e.position={x:f.x,y:f.y,z:f.z},e}var V_=new Map,G_={X_POS:["RPOSX","POS_X","X_POS"],Y_POS:["RPOSY","POS_Y","Y_POS"],Z_POS:["RPOSZ","POS_Z","Z_POS"],X_ROT:["RROTX","ROT_X","RX","QX","X_ROT"],Y_ROT:["RROTY","ROT_Y","RY","QY","Y_ROT"],Z_ROT:["RROTZ","ROT_Z","RZ","QZ","Z_ROT"],W_ROT:["RROTW","ROT_W","RW","QW","W_ROT"],X_SCL:["RSCLX","SCALE_X","X_SCALE","X_SCL"],Y_SCL:["RSCLY","SCALE_Y","Y_SCALE","Y_SCL"],Z_SCL:["RSCLZ","SCALE_Z","Z_SCALE","Z_SCL"]};for(var H_ in G_){var W_,Z_=s(G_[H_]);try{for(Z_.s();!(W_=Z_.n()).done;){var $_=W_.value;V_.set($_,H_)}}catch(Fq){Z_.e(Fq)}finally{Z_.f()}}function q_(e,t,n){return e&&0!==e.length?t<=0?e[0]:t>=e.length-1?e[e.length-1]:e[t]:n}function X_(e){return dr.error("Failed to turn a CSV into an animation table: ".concat(e)),new d.AssertionError({message:"Failed to turn a CSV into an animation table: ".concat(e)})}var Y_=function(){function e(t,n,r){(0,u.Z)(this,e),this._url=void 0,this._name=void 0,this._id=void 0,this._angleMap=void 0,this._descMap=void 0,this._timeTable=void 0,this._robotNames=void 0,this.fromGazebo=void 0,this._name=null!==t&&void 0!==t?t:"Unnamed Animation",this._name=this._name.trim(),this._id=new tx(n),this._url=r,this._angleMap=new Map,this._descMap=new Map,this._timeTable=[],this._robotNames=new Set,this.fromGazebo=!1}return(0,l.Z)(e,[{key:"descMap",value:function(){return this._descMap}},{key:"setDescMap",value:function(e){this._descMap=e}},{key:"angleMap",value:function(){return this._angleMap}},{key:"setAngleMap",value:function(e){this._angleMap=e}},{key:"robotNames",value:function(){return this._robotNames}},{key:"setName",value:function(e){this._name=e,dr.updateUI()}},{key:"name",value:function(){return this._name}},{key:"id",value:function(){return this._id}},{key:"idValue",value:function(){return this._id.value()}},{key:"url",value:function(){return this._url}},{key:"frame",value:function(e,t){var n=this,r=function(e,r,i,a){var o=n._descMap.get("".concat(t).concat(e));if(void 0===o&&(o=n._descMap.get(e)),void 0!==o)return Ab(q_(o,r,0),q_(o,i,0),a)},i=function(e){for(var r=[],i=0,a=["X_ROT","Y_ROT","Z_ROT","W_ROT"];i<a.length;i++){var o=a[i],s=void 0;if(void 0!==t&&(s=n._descMap.get("".concat(t).concat(o))),void 0===s&&(s=n._descMap.get(o)),void 0===s)return;r.push(q_(s,e,0))}return new js(r[0],r[1],r[2],r[3])},a=function(a,o,u){var l,c=new Map,h=s(n._angleMap.entries());try{for(h.s();!(l=h.n()).done;){var f=br(l.value,2),d=f[0],p=f[1];c.set(d,Ab(q_(p,a,0),q_(p,o,0),u))}}catch(Fq){h.e(Fq)}finally{h.f()}if(void 0!==t){var v,m=s(c.entries());try{for(m.s();!(v=m.n()).done;){var g=br(v.value,2),y=g[0],b=g[1];y.startsWith(t)&&c.set(y.slice(t.length,y.length),b)}}catch(Fq){m.e(Fq)}finally{m.f()}}var x=function(e,t,n){var r=new js,a=i(e),o=i(t);return void 0!==a&&void 0!==o&&r.slerpQuaternions(a,o,n),r}(a,o,u),w={position:{x:r("X_POS",a,o,u),y:r("Y_POS",a,o,u),z:r("Z_POS",a,o,u)},scale:{x:r("X_SCL",a,o,u),y:r("Y_SCL",a,o,u),z:r("Z_SCL",a,o,u)},rotation:{x:x.x,y:x.y,z:x.z,w:x.w},angleMap:c,time:e};return n.fromGazebo&&(w=U_(w)),w};if(e<=q_(this._timeTable,0,0))return a(0,0,0);if(e>=q_(this._timeTable,this._timeTable.length-1,0)){for(var o=0,u=0,l=Array.from(this._angleMap.values());u<l.length;u++){var c=l[u];o=Math.max(o,c.length)}for(var h=0,f=Array.from(this._descMap.values());h<f.length;h++){var d=f[h];o=Math.max(o,d.length)}return a(o,o,0)}var p=Vb(this._timeTable,e),v=q_(this._timeTable,p-1,0),m=q_(this._timeTable,p,0);return a(p-1,p,(e-v)/(m-v))}},{key:"startTime",value:function(){return q_(this._timeTable,0,0)}},{key:"endTime",value:function(){return q_(this._timeTable,this._timeTable.length-1,0)}},{key:"toCSV",value:function(){var e=[],t=function(t,n){e.push([t,n])};t("time",this._timeTable);for(var n=0,r=Array.from(this._descMap.entries());n<r.length;n++){var i=br(r[n],2);t(i[0],i[1])}for(var a=0,o=Array.from(this._angleMap.entries());a<o.length;a++){var u=br(o[a],2);t(u[0],u[1])}var l=function(e){var t,n=[],r=0,i=s(e);try{for(i.s();!(t=i.n()).done;){var a=br(t.value,2)[1];r=Math.max(r,a.length+1)}}catch(Fq){i.e(Fq)}finally{i.f()}var o,u=s(Fb(r));try{for(u.s();!(o=u.n()).done;){var l=o.value,c=[];if(0===l){var h,f=s(e);try{for(f.s();!(h=f.n()).done;){var d=br(h.value,1)[0];c.push(d)}}catch(Fq){f.e(Fq)}finally{f.f()}}else{var p,v=s(e);try{for(v.s();!(p=v.n()).done;){var m=br(p.value,2)[1],g=m[l];void 0===g&&void 0===(g=m[m.length-1])&&(g=0),c.push(g)}}catch(Fq){v.e(Fq)}finally{v.f()}}n.push(c)}}catch(Fq){u.e(Fq)}finally{u.f()}return n}(e);return l}},{key:"serialize",value:function(){var e={id:this.idValue(),name:this.name(),csv:this.toCSV()};return this._url&&(e.url=this._url),e}},{key:"copyNumberArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t}},{key:"clone",value:function(){var t=new e;t._name=this._name,t._id=new tx,void 0!==this._url&&(t._url=this._url),t._angleMap=new Map;var n,r=s(this._angleMap);try{for(r.s();!(n=r.n()).done;){var i=br(n.value,2),a=i[0],o=i[1];t._angleMap.set(a,this.copyNumberArray(o))}}catch(Fq){r.e(Fq)}finally{r.f()}t._descMap=new Map;var u,l=s(this._descMap);try{for(l.s();!(u=l.n()).done;){var c=br(u.value,2),h=c[0],f=c[1];t._descMap.set(h,this.copyNumberArray(f))}}catch(Fq){l.e(Fq)}finally{l.f()}var p,v=s(this._robotNames);try{for(v.s();!(p=v.n()).done;){var m=p.value;t._robotNames.add(m)}}catch(Fq){v.e(Fq)}finally{v.f()}if(t._timeTable=[],t._timeTable=this.copyNumberArray(this._timeTable),t.fromGazebo=this.fromGazebo,t instanceof d.AssertionError)throw t;return t}}],[{key:"loadFromLocalFile",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromURL(URL.createObjectURL(t),n);case 2:r=e.sent,i=s(r);try{for(i.s();!(a=i.n()).done;)a.value.setName(t.name)}catch(Fq){i.e(Fq)}finally{i.f()}return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadFromURL",value:function(){var t=yr(mr().mark((function t(n,r){var i,a,o,u,l,c,h,f,p,v,m,g,y;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,dr.setPopupHelpPage({page:qn.LoadingStarted,type:"csv"}),t.next=4,Vw(n,!0);case 4:i=t.sent,a=[],o=s(i),t.prev=7,o.s();case 9:if((u=o.n()).done){t.next=18;break}if(l=u.value,c=l.name,h=l.csv,!((f=e.fromCSV(h))instanceof d.AssertionError)){t.next=14;break}throw f;case 14:f.setName(c),a.push(f);case 16:t.next=9;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(7),o.e(t.t0);case 23:return t.prev=23,o.f(),t.finish(23);case 26:return dr.setPopupHelpPage({page:qn.LoadingSuccess,type:"csv"}),void 0!==r&&("CSV Loaded Successfully!",(p=document.createElement("p")).innerText="CSV Loaded Successfully!",p.classList.add("LoadCSVMessage"),null===(v=document.querySelector("."+r))||void 0===v||v.appendChild(p)),t.abrupt("return",a);case 31:throw t.prev=31,t.t1=t.catch(0),dr.setPopupHelpPage({page:qn.LoadingFailed,type:"csv"}),void 0!==r&&(m="Error loading csv: "+t.t1,(g=document.createElement("p")).innerText=m,g.style.color="red",g.classList.add("LoadCSVMessage"),null===(y=document.querySelector("."+r))||void 0===y||y.appendChild(g)),t.t1;case 36:case"end":return t.stop()}}),t,null,[[0,31],[7,20,23,26]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"parseRosbag",value:function(){var e=yr(mr().mark((function e(t,n,r){var i,a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O,N,D,I,j,F,z,B,U,V,G,H,W,Z,$,q,X,Y,K,J,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,fe,de,pe,ve,me,ge,ye,be,xe,we,_e,Se,ke,Me,Te,Ee,Ce,Ae,Re,Pe,Le,Oe,Ne,De,Ie,je,Fe,ze,Be,Ue,Ve,Ge,He;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=function(e){return"object"===typeof e&&null!==e&&"header"in e&&"object"===typeof e.header&&"seq"in e.header&&"number"===typeof e.header.seq&&"stamp"in e.header&&"object"===typeof e.header.stamp&&"sec"in e.header.stamp&&"number"===typeof e.header.stamp.sec&&"nsec"in e.header.stamp&&"number"===typeof e.header.stamp.nsec&&"frame_id"in e.header&&"string"===typeof e.header.frame_id&&"name"in e&&Array.isArray(e.name)&&"string"===typeof e.name[0]&&"position"in e&&e.position instanceof Float64Array&&"velocity"in e&&e.velocity instanceof Float64Array&&"effort"in e&&e.effort instanceof Float64Array},dr.setPopupHelpPage({page:qn.LoadingStarted,type:"rosbag"}),a=new B_.BlobReader(n),o=new z_(a),e.next=7,o.open();case 7:console.log("bag opened"),u="/tf",l="/tf_static",c=[],h=new Map,f=[],d=!1,p=!1,e.prev=13,m=Qb(o.messageIterator({}));case 15:return e.next=17,m.next();case 17:if(!(d=!(g=e.sent).done)){e.next=23;break}(y=g.value).topic===u?c.push(y.message):y.topic===l?f.push(y.message):null!==y.message&&i(y.message)&&(h.has(y.topic)||h.set(y.topic,[]),void 0!==y.message&&(null===(b=h.get(y.topic))||void 0===b||b.push(y.message)));case 20:d=!1,e.next=15;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(13),p=!0,v=e.t0;case 29:if(e.prev=29,e.prev=30,!d||null==m.return){e.next=34;break}return e.next=34,m.return();case 34:if(e.prev=34,!p){e.next=37;break}throw v;case 37:return e.finish(34);case 38:return e.finish(29);case 39:console.log(c),console.log(h),console.log(f),x=new Set,w=new Set,_=c.concat(f),S=s(_);try{for(S.s();!(k=S.n()).done;){M=k.value,T=s(M.transforms);try{for(T.s();!(E=T.n()).done;)C=E.value,A=C.header.frame_id,R=C.child_frame_id,x.delete(R),w.add(R),w.has(A)||x.add(A)}catch(Fq){T.e(Fq)}finally{T.f()}}}catch(Fq){S.e(Fq)}finally{S.f()}if(P=[],c.length>0){L=function(e,t,n,r){var i=new Array(n).fill(t);e.set(r,i)},O=c[0].transforms[0],N=O.header.stamp,D=s(c);try{for(D.s();!(I=D.n()).done;)j=I.value,F=j.transforms[0],z=F.header.stamp.sec-N.sec+1e-9*(F.header.stamp.nsec-N.nsec),P.push(z)}catch(Fq){D.e(Fq)}finally{D.f()}B=s(f);try{for(B.s();!(U=B.n()).done;){V=U.value,G=s(V.transforms);try{for(G.s();!(H=G.n()).done;)W=H.value,x.has(W.header.frame_id)&&(console.log(W),Z=W.child_frame_id,$=W.transform.translation,q=W.transform.rotation,X=new Map,L(X,$.x,c.length,"X_POS"),L(X,$.y,c.length,"Y_POS"),L(X,$.z,c.length,"Z_POS"),L(X,q.x,c.length,"X_ROT"),L(X,q.y,c.length,"Y_ROT"),L(X,q.z,c.length,"Z_ROT"),L(X,q.w,c.length,"W_ROT"),Y={id:(new tx).value(),tfs:X,name:n.name+" "+Z,first_link:W.header.frame_id,time:P},t.addTF(Y))}catch(Fq){G.e(Fq)}finally{G.f()}}}catch(Fq){B.e(Fq)}finally{B.f()}for(K=[],J=0;J<c[0].transforms.length;J++)Q=c[0].transforms[J],x.has(Q.header.frame_id)&&K.push(J);for(ee=0,te=K;ee<te.length;ee++){ne=te[ee],re=[],ie=[],ae=[],oe=[],se=[],ue=[],le=[],ce=s(c);try{for(ce.s();!(he=ce.n()).done;)fe=he.value,de=fe.transforms[ne],pe=de.transform.translation,ve=de.transform.rotation,re.push(pe.x),ie.push(pe.y),ae.push(pe.z),oe.push(ve.x),se.push(ve.y),ue.push(ve.z),le.push(ve.w)}catch(Fq){ce.e(Fq)}finally{ce.f()}me=c[0].transforms[ne].child_frame_id,ge=c[0].transforms[ne].header.frame_id,(ye=new Map).set("X_POS",re),ye.set("Y_POS",ie),ye.set("Z_POS",ae),ye.set("X_ROT",oe),ye.set("Y_ROT",se),ye.set("Z_ROT",ue),ye.set("W_ROT",le),be={id:(new tx).value(),tfs:ye,name:n.name+" "+me,first_link:ge,time:P},t.addTF(be),console.log(be)}}xe=s(h);try{for(xe.s();!(we=xe.n()).done;){_e=br(we.value,2),Se=_e[0],ke=_e[1],Me=[],Te=new Map,Ee=ke[0],Ce=Ee.header.stamp,Ae=s(Ee.name);try{for(Ae.s();!(Re=Ae.n()).done;)Pe=Re.value,Te.set(Pe,[])}catch(Fq){Ae.e(Fq)}finally{Ae.f()}Le=s(ke);try{for(Le.s();!(Oe=Le.n()).done;)for(Ne=Oe.value,Ie=(De=Ne).header.stamp.sec-Ce.sec+1e-9*(De.header.stamp.nsec-Ce.nsec),Me.push(Ie),je=0;je<De.name.length;je++)null===(Fe=Te.get(De.name[je]))||void 0===Fe||Fe.push(De.position[je])}catch(Fq){Le.e(Fq)}finally{Le.f()}ze={id:(new tx).value(),motion:Te,name:n.name+" "+Se,time:Me},t.addJointMotion(ze)}}catch(Fq){xe.e(Fq)}finally{xe.f()}return void 0!==r&&("Rosbag Loaded Successfully!",(Be=document.createElement("p")).innerText="Rosbag Loaded Successfully!",Be.classList.add("LoadRosbagMessage"),null===(Ue=document.querySelector("."+r))||void 0===Ue||Ue.appendChild(Be)),dr.setPopupHelpPage({page:qn.LoadingSuccess,type:"rosbag"}),e.abrupt("return",new Promise((function(e){return setTimeout(e,0)})));case 55:throw e.prev=55,e.t1=e.catch(0),dr.setPopupHelpPage({page:qn.LoadingFailed,type:"rosbag"}),void 0!==r&&(Ve="Error loading Rosbag: "+e.t1,(Ge=document.createElement("p")).innerText=Ve,Ge.style.color="red",Ge.classList.add("LoadRosbagMessage"),null===(He=document.querySelector("."+r))||void 0===He||He.appendChild(Ge)),e.t1;case 60:case"end":return e.stop()}}),e,null,[[0,55],[13,25,29,39],[30,,34,38]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createTableWithJointMotion",value:function(t,n,r){var i,a=new e,o=new Map,u=s(r);try{for(u.s();!(i=u.n()).done;){var l=br(i.value,2),c=l[0],h=l[1];o.set(t+c,h)}}catch(Fq){u.e(Fq)}finally{u.f()}var f=new Set;return f.add(t),a._angleMap=o,a._robotNames=f,a._timeTable=n,a}},{key:"createTableWithTF",value:function(t,n,r){var i,a=new e,o=new Map,u=s(r);try{for(u.s();!(i=u.n()).done;){var l=br(i.value,2),c=l[0],h=l[1];o.set(t+c,h)}}catch(Fq){u.e(Fq)}finally{u.f()}var f=new Set;return f.add(t),a._descMap=o,a._robotNames=f,a._timeTable=n,a}},{key:"fromCSV",value:function(t,n){try{t=function(e){var t=e.csv,n=e.valTypes,r=void 0===n?yb.NUMBER:n,i=e.nonEmpty,a=void 0===i||i,o=e.extendCols,u=void 0===o||o,l=e.inPlace,c=void 0!==l&&l,h=e.removeDuplicateRows,f=void 0===h||h,p=e.fillBadCellsWith,v=void 0===p?void 0:p,m=[],g=function(e){return"number"===typeof e?e.toString():void 0===e?"":e};if(c){var y,b=s(t);try{for(b.s();!(y=b.n()).done;)for(var x=y.value,w=0;w<x.length;w++)x[w]=g(x[w])}catch(Fq){b.e(Fq)}finally{b.f()}m=t}else{var _,S=s(t);try{for(S.s();!(_=S.n()).done;){var k=_.value,M=[];m.push(M);var T,E=s(k);try{for(E.s();!(T=E.n()).done;){var C=T.value;M.push(g(C))}}catch(Fq){E.e(Fq)}finally{E.f()}}}catch(Fq){S.e(Fq)}finally{S.f()}}for(var A=0;A<m.length;A++)for(var R=m[A];R.length>0&&""===R[R.length-1];)R.pop();for(var P=function(e){return 0===e.length||1===e.length&&""===e[0]},L=0;L<m.length;)P(m[L])?m.splice(L,1):L++;if(a){if(0===m.length)throw new d.AssertionError({message:"The CSV was empty. CSV: ".concat(m)});if(1===m.length)throw new d.AssertionError({message:"The CSV only had 1 row (the header row). CSV: ".concat(m)})}if(m.length<=1)return m;for(var O,N=m[0],D=0;D<m.length;D++)for(;m[D].length>N.length;)m[D].pop();if(u){for(var I=[],j=0;j<N.length;j++){var F=m[1][j];void 0===F&&(F=""),I.push(F)}var z,B=s(m);try{for(B.s();!(z=B.n()).done;)for(var U=z.value,V=0;V<N.length;V++)U.length-1<V?U.push(I[V]):I[V]=U[V]}catch(Fq){B.e(Fq)}finally{B.f()}}if(r===yb.STRING_AND_NUMBER)O=function(e){if("string"===typeof e){var t=parseFloat(e);if(!isNaN(t))return t}return e};else if(r===yb.NUMBER)O=function(e){if("string"===typeof e){var t=parseFloat(e);if(isNaN(t))if("number"===typeof v)t=v;else{if("string"!==typeof v||isNaN(parseFloat(e)))throw new d.AssertionError({message:'Failed to clean CSV: "'.concat(t,'" could not be turned into a number.')});t=parseFloat(e)}e=t}return e};else{if(r!==yb.STRING)throw new d.AssertionError({message:'Failed to clean CSV: Unexpected valTypes value "'.concat(r,'".')});O=g}for(var G=1;G<m.length;G++)for(var H=0;H<m[G].length;H++)m[G][H]=O(m[G][H]);if(f)for(var W=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Z=1;Z<m.length;)W(m[Z-1],m[Z])?m.splice(Z,1):Z++;return m}({csv:t,nonEmpty:!0,extendCols:!0,inPlace:!0,removeDuplicateRows:!0,valTypes:yb.NUMBER,fillBadCellsWith:0});var r,i=new e,a=new Map,o=new Set,u=s(zb(t[0]));try{for(u.s();!(r=u.n()).done;){var l=br(r.value,2),c=l[0],h=l[1];if("string"!==typeof h)return X_("One of the headers was a(n) ".concat(typeof h,' (value: "').concat(h,'") rather than a string! Check to make sure that all the values of the first row of the CSV are strings naming their column of the CSV.'));for(var f=[],p=1;p<t.length;p++){var v=q_(t[p],c,0);if(""!==v){if("number"!==typeof v)return X_("On row ".concat(p,' of the CSV, a value was "').concat(v,'" rather than a number!'));f.push(v)}}var m=h.trim().replace(" ","_"),g=br(m.split("-"),2),y=g[0];g[1];o.add(y),a.set(m.replace("-",""),f)}}catch(Fq){u.e(Fq)}finally{u.f()}var b=void 0;if(a.has("time")&&a.has("timestamp"))return X_('The CSV cannot have both a "time" column and a "timestamp" column. Please remove one of them.');if(a.has("time"))b=a.get("time");else{if(!a.has("timestamp"))return X_('There is no "time" or "timestamp" column in the CSV.');b=a.get("timestamp")}if(void 0===b)return X_('There is no "time" column in the CSV.');for(var x=0,w=1;w<b.length;w++){var _=b[w-1],S=b[w],k=!1;if(_>S?(dr.warn('The "time" column of every CSV must contain only ascending values, but descending values were found. Removing descending value.'),(x+=1)>5&&X_("".concat(x,' values of the "time" column of a CSV were found to be in descending order so the rest are assumed to be as well.')),k=!0):_===S?k=!0:x=0,k){var M,T=s(a.values());try{for(T.s();!(M=T.n()).done;){M.value.splice(w,1)}}catch(Fq){T.e(Fq)}finally{T.f()}w-=1}}var E=b[b.length-1],C=b[0],A=E-C;if("second"===n)for(var R=0;R<b.length;R++)b[R]-=C;else if("millisecond"===n)for(var P=0;P<b.length;P++)b[P]=(b[P]-C)/1e3;else if("microsecond"===n)for(var L=0;L<b.length;L++)b[L]=(b[L]-C)/1e6;else if("nanosecond"===n)for(var O=0;O<b.length;O++)b[O]=(b[O]-C)/1e9;else for(var N=A>1e3,D=A>1e6,I=A>1e9,j=0;j<b.length;j++)b[j]-=C,N&&(b[j]/=1e3),D&&(b[j]/=1e3),I&&(b[j]/=1e3);i._timeTable=b,a.delete("time");var F,z=s(a.entries());try{for(z.s();!(F=z.n()).done;){var B,U=br(F.value,2),V=U[0],G=U[1],H=V.toUpperCase(),W=s(V_.entries());try{for(W.s();!(B=W.n()).done;){var Z=br(B.value,2),$=Z[0],q=Z[1];H.endsWith($)&&(i._descMap.set(V.slice(0,V.length-$.length)+q,G),a.delete(V))}}catch(Fq){W.e(Fq)}finally{W.f()}}}catch(Fq){z.e(Fq)}finally{z.f()}return i._angleMap=a,o.delete("time"),i._robotNames=o,i}catch(jq){if(jq instanceof d.AssertionError)return jq;throw jq}}},{key:"deserialize",value:function(){var e=yr(mr().mark((function e(t,n){var r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=this.fromCSV(t.csv))instanceof d.AssertionError)){e.next=3;break}throw i;case 3:if(!(n=null!==(r=n)&&void 0!==r?r:i)){e.next=14;break}return n._timeTable=i._timeTable,n._angleMap=i._angleMap,n._descMap=i._descMap,t.name&&(n._name=t.name),t.id&&n._id.set(t.id),t.url&&(n._url=t.url),e.abrupt("return",n);case 14:throw new d.AssertionError({message:"Could not deserialize AnimationTable."});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function K_(e){return{x:e.x,y:e.y,z:e.z}}function J_(e,t){return t?(t.x&&(e.x=t.x),t.y&&(e.y=t.y),t.z&&(e.z=t.z),e):e}function Q_(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}function eS(e,t){return t?(t.x&&(e.x=t.x),t.y&&(e.y=t.y),t.z&&(e.z=t.z),t.w&&(e.w=t.w),e):e}var tS,nS=function(){function e(){(0,u.Z)(this,e),this._activeAnimations=void 0,this._storedAnimations=void 0,this._lastTime=void 0,this._activeAnimations=[],this._storedAnimations=[],this._lastTime=0}return(0,l.Z)(e,[{key:"addToAnimationManager",value:function(e){var t,n=s(this._activeAnimations);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.addActiveAnimation(r)}}catch(Fq){n.e(Fq)}finally{n.f()}var i,a=s(this._storedAnimations);try{for(a.s();!(i=a.n()).done;){var o=i.value;e.addStoredAnimation(o)}}catch(Fq){a.e(Fq)}finally{a.f()}}},{key:"removeFromAnimationManager",value:function(e){var t,n=s(this._activeAnimations);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.removeActiveAnimation(r)}}catch(Fq){n.e(Fq)}finally{n.f()}var i,a=s(this._storedAnimations);try{for(a.s();!(i=a.n()).done;){var o=i.value;e.removeStoredAnimation(o)}}catch(Fq){a.e(Fq)}finally{a.f()}}},{key:"storeAllGroups",value:function(){this._storedAnimations=[].concat(pr(this._storedAnimations),pr(this._activeAnimations)),this._activeAnimations=[],dr.updateUI()}},{key:"activateAllgroups",value:function(){this._activeAnimations=[].concat(pr(this._storedAnimations),pr(this._activeAnimations)),this._storedAnimations=[],dr.updateUI()}},{key:"clear",value:function(){this._activeAnimations=[],this._storedAnimations=[]}},{key:"animationGroups",value:function(){var e,t=[],n=s(this._activeAnimations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}var i,a=s(this._storedAnimations);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push(o)}}catch(Fq){a.e(Fq)}finally{a.f()}return t}},{key:"removeAnimationGroup",value:function(e){this.removeActiveAnimation(e),this.removeStoredAnimation(e)}},{key:"time",value:function(){return this._lastTime}},{key:"setTime",value:function(e){this._lastTime=e,this.updateAnimations()}},{key:"activeAnimations",value:function(){return this._activeAnimations}},{key:"addActiveAnimation",value:function(e){this.removeActiveAnimation(e),this.removeStoredAnimation(e),this._activeAnimations.push(e),dr.updateUI()}},{key:"removeActiveAnimation",value:function(e){var t=this._activeAnimations.indexOf(e);t>-1&&(this._activeAnimations.splice(t,1),dr.updateUI())}},{key:"storedAnimations",value:function(){return this._storedAnimations}},{key:"addStoredAnimation",value:function(e){this.removeStoredAnimation(e),this.removeActiveAnimation(e),this._storedAnimations.push(e),dr.updateUI()}},{key:"removeStoredAnimation",value:function(e){var t=this._storedAnimations.indexOf(e);t>-1&&(this._storedAnimations.splice(t,1),dr.updateUI())}},{key:"startTime",value:function(){var e,t=1/0,n=s(this._activeAnimations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Math.min(t,r.startTime())}}catch(Fq){n.e(Fq)}finally{n.f()}return t===1/0&&(t=0),t}},{key:"endTime",value:function(){var e,t=-1/0,n=s(this._activeAnimations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Math.max(t,r.endTime())}}catch(Fq){n.e(Fq)}finally{n.f()}return t===-1/0&&(t=1),t}},{key:"updateAnimations",value:function(){var e=this.endTime();this._lastTime>e&&(this._lastTime=e);var t=this.startTime();this._lastTime<t&&(this._lastTime=t);var n,r=s(this._activeAnimations);try{for(r.s();!(n=r.n()).done;){n.value.update(this._lastTime)}}catch(Fq){r.e(Fq)}finally{r.f()}dr.updateUI(),dr.render()}},{key:"copy",value:function(e,t){var n,r=new Map,i=s(e._activeAnimations);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=r.get(a);o||(o=a.clone(t),r.set(a,o)),this.addActiveAnimation(o)}}catch(Fq){i.e(Fq)}finally{i.f()}var u,l=s(e._storedAnimations);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=r.get(c);h||(h=c.clone(t),r.set(c,h)),this.addStoredAnimation(h)}}catch(Fq){l.e(Fq)}finally{l.f()}return this}},{key:"clone",value:function(t){return(new e).copy(this,t)}},{key:"serialize",value:function(){var e,t=[],n=s(this._activeAnimations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.serialize())}}catch(Fq){n.e(Fq)}finally{n.f()}var i,a=[],o=s(this._storedAnimations);try{for(o.s();!(i=o.n()).done;){var u=i.value;a.push(u.serialize())}}catch(Fq){o.e(Fq)}finally{o.f()}return{activeAnimations:t,storedAnimations:a,lastTime:this._lastTime}}}],[{key:"deserialize",value:function(){var t=yr(mr().mark((function t(n,r,i,a){var o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a||new e,u=[],n.activeAnimations){l=s(n.activeAnimations);try{for(l.s();!(c=l.n()).done;)h=c.value,u.push(qb.deserialize(h,r,i))}catch(Fq){l.e(Fq)}finally{l.f()}}if(f=[],n.storedAnimations){d=s(n.storedAnimations);try{for(d.s();!(p=d.n()).done;)v=p.value,f.push(qb.deserialize(v,r,i))}catch(Fq){d.e(Fq)}finally{d.f()}}return t.next=7,Promise.all(u);case 7:return m=t.sent,t.next=10,Promise.all(f);case 10:g=t.sent,y=s(m);try{for(y.s();!(b=y.n()).done;)x=b.value,o.addActiveAnimation(x)}catch(Fq){y.e(Fq)}finally{y.f()}w=s(g);try{for(w.s();!(_=w.n()).done;)S=_.value,o.addStoredAnimation(S)}catch(Fq){w.e(Fq)}finally{w.f()}return n.lastTime&&(o._lastTime=n.lastTime),t.abrupt("return",o);case 17:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()}]),e}();tS=Symbol.iterator;var rS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,u.Z)(this,e),this._refs=void 0,this._refs=[],t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.push(i)}}catch(Fq){r.e(Fq)}finally{r.f()}}}return(0,l.Z)(e,[{key:"clean",value:function(){for(var e=0;e<this._refs.length;){void 0!==this._refs[e].deref()?e+=1:this._refs.splice(e,1)}}},{key:"push",value:function(e){this._refs.push(new WeakRef(e))}},{key:"remove",value:function(e){for(var t=0;t<this._refs.length;){var n=this._refs[t].deref();if(void 0!==n){if(n===e){this._refs.splice(t,1);break}t+=1}else this._refs.splice(t,1)}}},{key:"length",get:function(){return Array.from(this).length}},{key:"reverse",value:mr().mark((function e(){var t,n,r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Array.from(this),n=s(t.reverse()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))},{key:tS,value:function(){var e=mr().mark(n),t=this;function n(){var n,r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t._refs.length)){e.next=12;break}if(void 0===(r=t._refs[n].deref())){e.next=9;break}return e.next=6,r;case 6:n+=1,e.next=10;break;case 9:t._refs.splice(n,1);case 10:e.next=1;break;case 12:case"end":return e.stop()}}),e)}return n()}}]),e}(),iS=new db.WebGLRenderer({alpha:!1,antialias:!0,preserveDrawingBuffer:!0});iS.outputEncoding=db.sRGBEncoding,iS.shadowMap.enabled=!0,iS.shadowMap.type=db.PCFSoftShadowMap;var aS=new Set,oS=0,sS=function(){function e(t){var n=this;if((0,u.Z)(this,e),this._name=void 0,this._render=void 0,this._funcRollsRun=void 0,this._renderer=void 0,this._scene=void 0,this._views=void 0,this._animationManager=void 0,this._copyCloneObjects=void 0,void 0!==t);else{var r="Scene";for(t=r+ ++oS;aS.has(t);)t=r+ ++oS}aS.add(t),this._name=t,this._render=new Kb(cr,[function(){var e,t=s(n._views);try{for(t.s();!(e=t.n()).done;){var r=e.value;n.drawTo(r)}}catch(Fq){t.e(Fq)}finally{t.f()}}]),this._funcRollsRun=new Set,this._renderer=iS,this._scene=new db.Scene,this._views=new rS,this._animationManager=new nS,this._copyCloneObjects=[]}return(0,l.Z)(e,[{key:"addCopyCloneObject",value:function(e){this._copyCloneObjects.push(e),this._scene.add(e)}},{key:"setAnimationManager",value:function(e){this._animationManager=e,dr.updateUI(),this.render()}},{key:"name",value:function(){return this._name}},{key:"setName",value:function(e){this._name=e,dr.updateUI()}},{key:"animationManager",value:function(){return this._animationManager}},{key:"runOnce",value:function(e,t){this._funcRollsRun.has(e)||(this._funcRollsRun.add(e),t(),this.render(),dr.updateUI())}},{key:"scene",value:function(){return this._scene}},{key:"renderer",value:function(){return this._renderer}},{key:"setRenderer",value:function(e){this._renderer=e,this.render()}},{key:"views",value:function(){var e,t=[],n=s(this._views);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"removeView",value:function(e){this._views.remove(e)}},{key:"addView",value:function(e){this._views.push(e)}},{key:"render",value:function(){this._render.call()}},{key:"drawTo",value:function(e){var t=e.canvas(),n=e.camera(),r=t.getContext("2d");r?(e.preprocess(),this._renderer.setSize(t.width,t.height),n instanceof db.PerspectiveCamera&&(n.aspect=t.width/t.height,n.updateProjectionMatrix()),this._renderer.render(this._scene,n),this._renderer.domElement.width>0&&this._renderer.domElement.height>0&&r.drawImage(this._renderer.domElement,0,0),e.postprocess()):console.error("A canvas could not be rendered to because its 2d context was null!")}},{key:"copy",value:function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>4?arguments[4]:void 0;t&&(this._name=e._name);var r,i=s(e._copyCloneObjects);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.addCopyCloneObject(a.clone(!0))}}catch(Fq){i.e(Fq)}finally{i.f()}return this._animationManager.copy(e._animationManager,n),e}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;return(new e).copy(this,t,n,r,i)}}]),e}();function uS(e){return e instanceof db.Mesh||e&&"isMesh"in e}for(var lS=[],cS=0;cS<256;cS++)lS[cS]=(cS<16?"0":"")+cS.toString(16);Math.PI,Math.PI;var hS=function(){function e(t,n,r){(0,u.Z)(this,e),this._id=void 0,this._robot=void 0,this._joint=void 0,this._render=void 0,this._includeAngleInTimeWarpConsideration=void 0,this._includePosInTimeWarpConsideration=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._id=new tx,this._robot=t,this._joint=n,this._render=r,this._includeAngleInTimeWarpConsideration=!1,this._includePosInTimeWarpConsideration=!1,this._sceneCounter=0,this._graphCounter=0}return(0,l.Z)(e,[{key:"isInScene",value:function(){return 0!==this._sceneCounter}},{key:"isInGraph",value:function(){return 0!==this._graphCounter}},{key:"addToScene",value:function(){this._sceneCounter++}},{key:"removeFromScene",value:function(){this._sceneCounter>0&&this._sceneCounter--}},{key:"addToGraph",value:function(){this._graphCounter++}},{key:"removeFromGraph",value:function(){this._graphCounter>0&&this._graphCounter--}},{key:"includeAngleInTimeWarpConsideration",value:function(){return this._includeAngleInTimeWarpConsideration}},{key:"setAngleIncludeInTimeWarpConsideration",value:function(e){this._includeAngleInTimeWarpConsideration=e,dr.updateUI(),dr.render()}},{key:"includePosInTimeWarpConsideration",value:function(){return this._includePosInTimeWarpConsideration}},{key:"setPosIncludeInTimeWarpConsideration",value:function(e){this._includePosInTimeWarpConsideration=e,dr.updateUI(),dr.render()}},{key:"id",value:function(){return this._id}},{key:"idValue",value:function(){return this._id.value()}},{key:"name",value:function(){return this._joint.name}},{key:"type",value:function(){return this._joint.type}},{key:"jointType",value:function(){return this._joint.jointType}},{key:"minAngle",value:function(){return"continuous"===this.jointType()?-10*Math.PI:this._joint.limit.lower.valueOf()}},{key:"maxAngle",value:function(){return"continuous"===this.jointType()?10*Math.PI:this._joint.limit.upper.valueOf()}},{key:"setAngle",value:function(e){e=function(e,t,n){return Math.max(t,Math.min(n,e))}(e,this.minAngle(),this.maxAngle()),this._joint.setJointValue(e),this._render()}},{key:"angle",value:function(){return this._joint.angle.valueOf()}},{key:"getWorldQuaternion",value:function(){return this._joint.getWorldQuaternion(new js)}},{key:"getWorldPosition",value:function(){return this._joint.getWorldPosition(new Fs)}},{key:"getJointName",value:function(){return this._joint.name}}]),e}(),fS=function(){function e(t,n,r){(0,u.Z)(this,e),this._id=void 0,this._robot=void 0,this._link=void 0,this._render=void 0,this._includePosInTimeWarpConsideration=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._id=new tx,this._robot=t,this._link=n,this._render=r,this._includePosInTimeWarpConsideration=!1,this._sceneCounter=0,this._graphCounter=0}return(0,l.Z)(e,[{key:"isInScene",value:function(){return 0!==this._sceneCounter}},{key:"isInGraph",value:function(){return 0!==this._graphCounter}},{key:"addToScene",value:function(){this._sceneCounter++}},{key:"removeFromScene",value:function(){this._sceneCounter>0&&this._sceneCounter--}},{key:"addToGraph",value:function(){this._graphCounter++}},{key:"removeFromGraph",value:function(){this._graphCounter>0&&this._graphCounter--}},{key:"includePosInTimeWarpConsideration",value:function(){return this._includePosInTimeWarpConsideration}},{key:"setPosIncludeInTimeWarpConsideration",value:function(e){this._includePosInTimeWarpConsideration=e,dr.updateUI(),dr.render()}},{key:"id",value:function(){return this._id}},{key:"idValue",value:function(){return this._id.value()}},{key:"name",value:function(){return this._link.name}},{key:"getWorldQuaternion",value:function(){return this._link.getWorldQuaternion(new js)}},{key:"getWorldPosition",value:function(){return this._link.getWorldPosition(new Fs)}},{key:"getLinkName",value:function(){return this._link.name}}]),e}(),dS=function(){function e(){(0,u.Z)(this,e),this._subscribers=void 0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._subscribers=n}return(0,l.Z)(e,[{key:"subscribe",value:function(e){var t=this;return this._subscribers.push(e.bind(void 0)),function(){var n=t._subscribers.indexOf(e);n>0&&t._subscribers.splice(n,1)}}},{key:"call",value:function(e){for(var t=0;t<this._subscribers.length;t++){!1===(0,this._subscribers[t])(e)&&(this._subscribers.splice(t,1),t--)}}}]),e}(),pS=function(){function e(t){(0,u.Z)(this,e),this._beforeSet=void 0,this._value=void 0,this._afterSet=void 0,this._beforeSet=new dS,this._value=t,this._afterSet=new dS}return(0,l.Z)(e,[{key:"value",value:function(){return this._value}},{key:"setValue",value:function(e,t,n){this._beforeSet.call([this._value,t]),e&&e(this._value,t),this._value=t,n&&n(this._value,t),this._afterSet.call([this._value,t])}},{key:"beforeSet",value:function(){return this._beforeSet}},{key:"afterSet",value:function(){return this._afterSet}}]),e}(),vS=function(){function e(t,n,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"urdf",s=arguments.length>5?arguments[5]:void 0;(0,u.Z)(this,e),this._id=void 0,this._robot=void 0,this._robotName=void 0,this._url=void 0,this._objectType=void 0,this._highlighted=void 0,this._highlightColor=void 0,this._desaturated=void 0,this._endEffectorPosition=void 0,this._endEffectorRotation=void 0,this._endEffectorMesh=void 0,this._rootGroup=void 0,this._opacity=void 0,this._visible=void 0,this._shadows=void 0,this._eulerRotation=void 0,this._parentScene=void 0,this._meshes=void 0,this._joints=void 0,this._articulatedJoints=void 0,this._jointMap=void 0,this._articulatedJointMap=void 0,this._links=void 0,this._linkMap=void 0,this._master=void 0,this._controlledClones=void 0,this._includePositionOffsetInTimeWarpConsideration=void 0,this._includePosInTimeWarpConsideration=void 0,this._positionOffset=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._robot=t,this._objectType=o,this._id=new tx(i),this._master=s,this._parentScene=new pS(void 0),this._controlledClones=[],this._eulerRotation=(new db.Euler).setFromQuaternion(this.getWorldQuaternion()),this._robotName=(null!==r&&void 0!==r?r:"unknown_robot").trim(),this._url=n,void 0!==this._robot.quaternion&&this._robot.quaternion.set(0,0,0,1),void 0!==this._robot.position&&this._robot.position.set(0,0,0),void 0!==this._robot.scale&&this._robot.scale.set(1,1,1),this._sceneCounter=0,this._graphCounter=0,this.render=this.render.bind(this),this._rootGroup=new db.Group,this._rootGroup.add(this._robot),this._positionOffset=new pS(this._rootGroup.position.clone()),this._endEffectorPosition=new db.Vector3,this._endEffectorRotation=new db.Quaternion;var l=new db.ConeGeometry(.01,.03,20),c=new db.MeshStandardMaterial({color:"orange"});if(this._endEffectorMesh=new db.Mesh(l,c),this._endEffectorMesh.visible=!0,this._visible=!1,this.setVisible(!0),this._shadows=!1,this.setShadows(!0),this._opacity=0,this.setOpacity(1),this._desaturated=!1,this._highlighted=!1,this._highlightColor=new db.Color(.2,.2,.4),this.traverseMaterials((function(e){"color"in e&&(e.baseColor=e.color.clone(),e.highlightColor=e.color.clone().add(a._highlightColor),e.desaturatedColor=Tb(e.color,new db.Color(.2,.2,.2))),e.side=db.DoubleSide,e.transparent=!0,e.opacity=a._opacity})),this.updateColors(),this._robot.traverse((function(e){if("PointLight"===e.type){var t=e;t.intensity=0,t.castShadow=!1,t.distance=0,t.visible=!1}})),this.setPositionOffset(new db.Vector3(0,0,0)),this._meshes=[],this.traverseMeshes((function(e){a._meshes.push(e)})),this._jointMap=new Map,this._joints=[],this._articulatedJointMap=new Map,this._articulatedJoints=[],this._robot.joints)for(var h=0,f=Object.entries(this._robot.joints);h<f.length;h++){var d=f[h],p=new hS(this,d[1],this.render);this._jointMap.set(d[0],p),this._joints.push(p),"fixed"!==p.jointType()&&"URDFMimicJoint"!==p.type()&&(this._articulatedJointMap.set(d[0],p),this._articulatedJoints.push(p))}if(this._linkMap=new Map,this._links=[],this._robot.links)for(var v=0,m=Object.entries(this._robot.links);v<m.length;v++){var g=m[v],y=new fS(this,g[1],this.render);this._links.push(y),this._linkMap.set(g[0],y)}this._includePositionOffsetInTimeWarpConsideration=!1,this._includePosInTimeWarpConsideration=!1}return(0,l.Z)(e,[{key:"eulerRotation",value:function(){return this._eulerRotation}},{key:"includePositionOffsetInTimeWarpConsideration",value:function(){return this._includePositionOffsetInTimeWarpConsideration}},{key:"setPositionOffsetIncludeInTimeWarpConsideration",value:function(e){this._includePositionOffsetInTimeWarpConsideration=e,dr.updateUI(),dr.render()}},{key:"includePosInTimeWarpConsideration",value:function(){return this._includePosInTimeWarpConsideration}},{key:"setPositionIncludeInTimeWarpConsideration",value:function(e){this._includePosInTimeWarpConsideration=e,dr.updateUI(),dr.render()}},{key:"setParentRobotScene",value:function(e){var t=this;e!==this._parentScene.value()&&(this._parentScene.setValue((function(e,n){if(e){e.scene().remove(t.rootGroup());var r,i=s(t._controlledClones);try{for(i.s();!(r=i.n()).done;){var a;br(r.value,0);null===(a=e.robotSceneManager())||void 0===a||a.removeControlledRobotScene(e)}}catch(Fq){i.e(Fq)}finally{i.f()}}if(void 0!==n){n.scene().add(t.rootGroup());var o,u=s(t._controlledClones);try{for(u.s();!(o=u.n()).done;){var l;br(o.value,0);null===(l=n.robotSceneManager())||void 0===l||l.addControlledRobotScene(n)}}catch(Fq){u.e(Fq)}finally{u.f()}}}),e,null),dr.updateUI(),dr.render())}},{key:"controlledCloneInScene",value:function(e){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){if(e===br(t.value,1)[0])return!0}}catch(Fq){n.e(Fq)}finally{n.f()}return!1}},{key:"addControlledClone",value:function(e){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){var r=br(t.value,2),i=r[0],a=r[1];if(e===i)return a}}catch(Fq){n.e(Fq)}finally{n.f()}var o=this.clone();o.setParentRobotScene(e),this._controlledClones.push([e,o]);var u,l=this._parentScene.value();l&&(null===(u=l.robotSceneManager())||void 0===u||u.addControlledRobotScene(l));return e.render(),e.addGhostRobot(this),dr.updateUI(),o}},{key:"removeControlledClone",value:function(e){var t,n=s(zb(this._controlledClones));try{for(n.s();!(t=n.n()).done;){var r=br(t.value,2),i=r[0],a=r[1];if(e===a[0]){a[1].setParentRobotScene(void 0),this._controlledClones.splice(i,1);var o,u=this._parentScene.value();if(u)null===u||void 0===u||null===(o=u.robotSceneManager())||void 0===o||o.removeControlledRobotScene(u);e.render(),dr.updateUI();break}}}catch(Fq){n.e(Fq)}finally{n.f()}}},{key:"master",value:function(){return this._master}},{key:"setMaster",value:function(e){this._master=e}},{key:"objectType",value:function(){return this._objectType}},{key:"id",value:function(){return this._id}},{key:"idValue",value:function(){return this.id().value()}},{key:"url",value:function(){return this._url}},{key:"rootGroup",value:function(){return this._rootGroup}},{key:"setName",value:function(e){this._robotName=e,dr.updateUI()}},{key:"name",value:function(){return this._robotName}},{key:"isInScene",value:function(){return 0!==this._sceneCounter}},{key:"isInGraph",value:function(){return 0!==this._graphCounter}},{key:"addToScene",value:function(){this._sceneCounter++}},{key:"removeFromScene",value:function(){this._sceneCounter>0&&this._sceneCounter--}},{key:"addToGraph",value:function(){this._graphCounter++}},{key:"removeFromGraph",value:function(){this._graphCounter>0&&this._graphCounter--}},{key:"getRootGroup",value:function(){return this._rootGroup}},{key:"setJointAngle",value:function(e,t){var n=this._articulatedJointMap.get(e);if(n){var r,i=s(this._controlledClones);try{for(i.s();!(r=i.n()).done;){br(r.value,2)[1].setJointAngle(e,t)}}catch(Fq){i.e(Fq)}finally{i.f()}n.setAngle(t),this.render()}}},{key:"jointAngle",value:function(e){var t=this._articulatedJointMap.get(e);if(t)return t.angle()}},{key:"getScaleOffset",value:function(){return this._rootGroup.scale.clone()}},{key:"setScaleOffset",value:function(e){if(!e.equals(this.getScaleOffset())){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){br(t.value,2)[1].setScaleOffset(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this._rootGroup.scale.set(e.x,e.y,e.z),this.render()}}},{key:"getPositionOffset",value:function(){return this._positionOffset.value().clone()}},{key:"setPositionOffset",value:function(e){var t=this;e.equals(this.getPositionOffset())||(this._positionOffset.setValue(null,e.clone(),(function(e,n){t._rootGroup.position.set(n.x,n.y,n.z);var r,i=s(t._controlledClones);try{for(i.s();!(r=i.n()).done;){br(r.value,2)[1].setPositionOffset(n)}}catch(Fq){i.e(Fq)}finally{i.f()}})),this.render())}},{key:"beforepositionOffsetSet",value:function(){return this._positionOffset.beforeSet()}},{key:"afterpositionOffsetSet",value:function(){return this._positionOffset.afterSet()}},{key:"getQuaternionOffset",value:function(){return this._rootGroup.quaternion.clone()}},{key:"setQuaternionOffset",value:function(e){if(!e.equals(this.getQuaternionOffset())){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){br(t.value,2)[1].setQuaternionOffset(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this._rootGroup.quaternion.copy(e),this.render()}}},{key:"getScale",value:function(){return this._robot.scale.clone()}},{key:"setScale",value:function(e){if(!e.equals(this.getScale())){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){br(t.value,2)[1].setScale(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this._robot.scale.set(e.x,e.y,e.z),this.render()}}},{key:"getPosition",value:function(){return this._robot.position.clone()}},{key:"setPosition",value:function(e){if(!e.equals(this.getPosition())){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){br(t.value,2)[1].setPosition(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this._robot.position.set(e.x,e.y,e.z),this.render()}}},{key:"getWorldPosition",value:function(){return this._robot.getWorldPosition(new db.Vector3)}},{key:"setWorldPosition",value:function(e){this.setPosition(this._robot.worldToLocal(e))}},{key:"getWorldQuaternion",value:function(){return this._robot.getWorldQuaternion(new db.Quaternion)}},{key:"getQuaternion",value:function(){return this._robot.quaternion.clone()}},{key:"setQuaternion",value:function(e){if(!e.equals(this.getQuaternion())){var t,n=s(this._controlledClones);try{for(n.s();!(t=n.n()).done;){br(t.value,2)[1].setQuaternion(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this._robot.quaternion.copy(e),this.render()}}},{key:"joints",value:function(){return this._joints}},{key:"articuatedJoints",value:function(){return this._articulatedJoints}},{key:"jointMap",value:function(){return this._jointMap}},{key:"getArticuatedJointMap",value:function(){return this._articulatedJointMap}},{key:"getFixedJointMap",value:function(){var e,t=new Map,n=s(this._jointMap);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2),i=r[0],a=r[1];this._articulatedJointMap.has(i)||t.set(i,a)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"links",value:function(){return this._links}},{key:"linkMap",value:function(){return this._linkMap}},{key:"setOpacity",value:function(e){var t=this;this._opacity=Ib(e,0,1),this.traverseMaterials((function(e){e.opacity=t._opacity})),this.render()}},{key:"opacity",value:function(){return this._opacity}},{key:"setHighlightColor",value:function(e){this.traverseMaterials((function(t){"color"in t&&(t.highlightColor=t.baseColor.clone().add(e))})),this.updateColors()}},{key:"highlightColor",value:function(){return this._highlightColor}},{key:"traverseMeshes",value:function(e){this.rootGroup().traverse((function(t){uS(t)&&e(t)}))}},{key:"traverseMaterials",value:function(e){this.rootGroup().traverse((function(t){kb(t.material,e)}))}},{key:"meshes",value:function(){return this._meshes}},{key:"visible",value:function(){return this._visible}},{key:"setVisible",value:function(e){this.traverseMeshes((function(t){t.visible=e})),this._visible=e,this.render()}},{key:"shadows",value:function(){return this._shadows}},{key:"setShadows",value:function(e){this.traverseMeshes((function(t){t.castShadow=e,t.receiveShadow=e})),this._shadows=e,this.render()}},{key:"highlighted",value:function(){return this._highlighted}},{key:"setHighlighted",value:function(e){this._highlighted=e,this.updateColors()}},{key:"desaturated",value:function(){return this._desaturated}},{key:"setDesaturated",value:function(e){this._desaturated=e,this.updateColors()}},{key:"applyFrame",value:function(e){var t=e.scale;if(t){var n=this.getScale();void 0!==t.x&&(n.x=t.x),void 0!==t.y&&(n.y=t.y),void 0!==t.z&&(n.z=t.z),this.setScale(n)}var r=e.position;if(r){var i=this.getPosition();void 0!==r.x&&(i.x=r.x),void 0!==r.y&&(i.y=r.y),void 0!==r.z&&(i.z=r.z),this.setPosition(i)}var a=e.rotation;if(a){var o=this.getQuaternion();if(void 0!==a.w)void 0!==a.x&&(o.x=a.x),void 0!==a.y&&(o.y=a.y),void 0!==a.z&&(o.z=a.z),void 0!==a.w&&(o.w=a.w);else{var u=new db.Euler;void 0!==a.x&&(u.x=a.x),void 0!==a.y&&(u.y=a.y),void 0!==a.z&&(u.z=a.z),o.setFromEuler(u)}this.setQuaternion(o)}var l,c=s(e.angleMap.entries());try{for(c.s();!(l=c.n()).done;){var h=br(l.value,2),f=h[0],d=h[1];this.setJointAngle(f,d)}}catch(Fq){c.e(Fq)}finally{c.f()}}},{key:"beforeParentSceneSet",value:function(){return this._parentScene.beforeSet()}},{key:"afterParentSceneSet",value:function(){return this._parentScene.afterSet()}},{key:"parentScene",value:function(){return this._parentScene.value()}},{key:"render",value:function(){var e;null===(e=this._parentScene.value())||void 0===e||e.render()}},{key:"updateColors",value:function(){var e=this;this.traverseMaterials((function(t){"color"in t&&(e._highlighted?t.color=t.highlightColor:e._desaturated?t.color=t.desaturatedColor:t.color=t.baseColor)})),this.render()}},{key:"clone",value:function(){var t=this.desaturated(),n=this.highlighted();this.setDesaturated(!1),this.setHighlighted(!1);var r=this._robot.clone(!0);r.traverse((function(e){var t=e.material;if(t)if(Array.isArray(t)){var n,r=[],i=s(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(a.clone())}}catch(Fq){i.e(Fq)}finally{i.f()}e.material=r}else e.material=t.clone()}));var i=new e(r,this.url(),this.name(),void 0,this._objectType,void 0===this._master?this:this._master);return i.setDesaturated(t),i.setHighlighted(n),i.setOpacity(this.opacity()),i.setVisible(this.visible()),i.setHighlightColor(this.highlightColor()),i.setPosition(this.getPosition()),i.setQuaternion(this.getQuaternion()),i.setScale(this.getScale()),i.setPositionOffset(this.getPositionOffset()),i.setQuaternionOffset(this.getQuaternionOffset()),i.setScaleOffset(this.getScaleOffset()),this.setDesaturated(t),this.setHighlighted(n),i}},{key:"serialize",value:function(){var e;if(!this._url)throw new Error("Robot named ".concat(this._robotName," could not be properly serialized because it does not come from a URL."));e=this._url;var t=this.getPositionOffset(),n=this.getScaleOffset(),r=this.getQuaternionOffset(),i=this.getPosition(),a=this.getScale(),o=this.getQuaternion();return{name:this._robotName,id:this._id.value(),url:e,positionOffset:K_(t),scaleOffset:K_(n),rotationOffset:Q_(r),position:K_(i),scale:K_(a),rotation:Q_(o),objectType:this._objectType}}}],[{key:"deserialize",value:function(){var t=yr(mr().mark((function t(n){var r,i;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"===typeof n&&(n=JSON.parse(n)),!n.url){t.next=17;break}return r=n.url,t.next=5,e.loadRobot(r);case 5:return i=t.sent,n.name&&(i._robotName=n.name),n.id&&i._id.set(n.id),i.setScaleOffset(J_(i.getScaleOffset(),n.scaleOffset)),i.setPositionOffset(J_(i.getPositionOffset(),n.positionOffset)),i.setQuaternionOffset(eS(i.getQuaternionOffset(),n.rotationOffset)),i.setScale(J_(i.getScale(),n.scale)),i.setPosition(J_(i.getPosition(),n.position)),i.setQuaternion(eS(i.getQuaternion(),n.rotation)),t.abrupt("return",i);case 17:throw dr.error("Failed to deserialize a Robot: its serial did not contain a url to the Robot."),new d.AssertionError({message:"Failed to deserialize a Robot: its serial did not contain a url to the Robot."});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadRobot",value:function(){var t=yr(mr().mark((function t(n,r){var i,a,o=arguments;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=o.length>2&&void 0!==o[2]?o[2]:"",void 0===r&&(r=n.trim().toLowerCase().endsWith(".glb")?"glb":"urdf"),"urdf"!==r){t.next=9;break}return t.next=5,Zw(n);case 5:a=t.sent,""===i&&(i=a.robotName),t.next=18;break;case 9:if("glb"!==r){t.next=16;break}return t.next=12,Hw(n);case 12:a=t.sent,""===i&&(i="Object"),t.next=18;break;case 16:a=new db.AxesHelper(.1),""===i&&(i="EE Target");case 18:return t.abrupt("return",new e(a,n,i,void 0,"urdf"===r?void 0:"object3D"));case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createAxesHelper",value:function(t,n){return new e(new db.AxesHelper(t),"AxesHelper",n,void 0,"object3D")}}]),e}(),mS=function(){function e(){(0,u.Z)(this,e),this.pluginCallbacks=[],this.register((function(e){return new WS(e)})),this.register((function(e){return new ZS(e)})),this.register((function(e){return new $S(e)})),this.register((function(e){return new XS(e)})),this.register((function(e){return new YS(e)})),this.register((function(e){return new qS(e)}))}return(0,l.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){"object"===typeof n&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),r=n);for(var i=new HS,a=[],o=0,s=this.pluginCallbacks.length;o<s;o++)a.push(this.pluginCallbacks[o](i));i.setPlugins(a),i.write(e,t,r).catch(n)}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}]),e}(),gS=0,yS=1,bS=2,xS=3,wS=4,_S=5121,SS=5123,kS=5126,MS=5125,TS=34962,ES=34963,CS=9728,AS=9729,RS=9984,PS=9985,LS=9986,OS=9987,NS=33071,DS=33648,IS=10497,jS={};jS[Bi]=CS,jS[Ui]=RS,jS[Gi]=LS,jS[Wi]=AS,jS[Zi]=PS,jS[qi]=OS,jS[Fi]=NS,jS[ji]=IS,jS[zi]=DS;var FS={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function zS(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function BS(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);t[n]=i>255?32:i}return t.buffer}function US(e){return 4*Math.ceil(e/4)}function VS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=US(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}var GS=null,HS=function(){function e(){(0,u.Z)(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,l.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(){var e=yr(mr().mark((function e(t,n,r){var i,a,o,s,u,l,c,h;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),e.next=5,Promise.all(this.pending);case 5:a=(i=this).buffers,o=i.json,r=i.options,s=i.extensionsUsed,u=new Blob(a,{type:"application/octet-stream"}),(l=Object.keys(s)).length>0&&(o.extensionsUsed=l),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=u.size),!0===r.binary?((c=new window.FileReader).readAsArrayBuffer(u),c.onloadend=function(){var e=VS(c.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var r=VS(BS(JSON.stringify(o)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,r.byteLength,!0),i.setUint32(4,1313821514,!0);var a=new ArrayBuffer(12),s=new DataView(a);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var u=12+i.byteLength+r.byteLength+t.byteLength+e.byteLength;s.setUint32(8,u,!0);var l=new Blob([a,i,r,t,e],{type:"application/octet-stream"}),h=new window.FileReader;h.readAsArrayBuffer(l),h.onloadend=function(){n(h.result)}}):o.buffers&&o.buffers.length>0?((h=new window.FileReader).readAsDataURL(u),h.onloadend=function(){var e=h.result;o.buffers[0].uri=e,n(o)}):n(o);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){for(var a in void 0===t.extensions&&(t.extensions={}),i.gltfExtensions)t.extensions[a]=i.gltfExtensions[a],r[a]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}}},{key:"getUID",value:function(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new Fs,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new Fs,i=0,a=n.count;i<a;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,i){var a,o=this.json;o.bufferViews||(o.bufferViews=[]),a=t===_S?1:t===SS?2:4;for(var s=US(r*e.itemSize*a),u=new DataView(new ArrayBuffer(s)),l=0,c=n;c<n+r;c++)for(var h=0;h<e.itemSize;h++){var f=void 0;e.itemSize>4?f=e.array[c*e.itemSize+h]:0===h?f=e.getX(c):1===h?f=e.getY(c):2===h?f=e.getZ(c):3===h&&(f=e.getW(c)),t===kS?u.setFloat32(l,f,!0):t===MS?u.setUint32(l,f,!0):t===SS?u.setUint16(l,f,!0):t===_S&&u.setUint8(l,f),l+=a}var d={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:s};return void 0!==i&&(d.target=i),i===TS&&(d.byteStride=e.itemSize*a),this.byteOffset+=s,o.bufferViews.push(d),{id:o.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){var i=new window.FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){var e=VS(i.result),a={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(a)-1)}}))}},{key:"processAccessor",value:function(e,t,n,r){var i,a=this.options,o=this.json;if(e.array.constructor===Float32Array)i=kS;else if(e.array.constructor===Uint32Array)i=MS;else if(e.array.constructor===Uint16Array)i=SS;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=_S}if(void 0===n&&(n=0),void 0===r&&(r=e.count),a.truncateDrawRange&&void 0!==t&&null===t.index){var s=n+r,u=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(s,u)-n)<0&&(r=0)}if(0===r)return null;var l,c=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var a=0;a<e.itemSize;a++){var o=void 0;e.itemSize>4?o=e.array[i*e.itemSize+a]:0===a?o=e.getX(i):1===a?o=e.getY(i):2===a?o=e.getZ(i):3===a&&(o=e.getW(i)),r.min[a]=Math.min(r.min[a],o),r.max[a]=Math.max(r.max[a],o)}return r}(e,n,r);void 0!==t&&(l=e===t.index?ES:TS);var h=this.processBufferView(e,i,n,r,l),f={bufferView:h.id,byteOffset:h.byteOffset,componentType:i,count:r,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(f.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(f)-1}},{key:"processImage",value:function(e,t,n){var r=this,i=r.cache,a=r.json,o=r.options,s=r.pending;i.images.has(e)||i.images.set(e,{});var u=i.images.get(e),l=t===ca?"image/png":"image/jpeg",c=l+":flipY/"+n.toString();if(void 0!==u[c])return u[c];a.images||(a.images=[]);var h={mimeType:l};if(o.embedImages){var f=GS=GS||document.createElement("canvas");f.width=Math.min(e.width,o.maxTextureSize),f.height=Math.min(e.height,o.maxTextureSize);var d=f.getContext("2d");if(!0===n&&(d.translate(0,f.height),d.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)d.drawImage(e,0,0,f.width,f.height);else{t!==ca&&t!==la&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var p=new Uint8ClampedArray(e.height*e.width*4);if(t===ca)for(var v=0;v<p.length;v+=4)p[v+0]=e.data[v+0],p[v+1]=e.data[v+1],p[v+2]=e.data[v+2],p[v+3]=e.data[v+3];else for(var m=0,g=0;m<p.length;m+=4,g+=3)p[m+0]=e.data[g+0],p[m+1]=e.data[g+1],p[m+2]=e.data[g+2],p[m+3]=255;d.putImageData(new ImageData(p,e.width,e.height),0,0)}!0===o.binary?s.push(new Promise((function(e){f.toBlob((function(t){r.processBufferViewImage(t).then((function(t){h.bufferView=t,e()}))}),l)}))):h.uri=f.toDataURL(l)}else h.uri=e.src;var y=a.images.push(h)-1;return u[c]=y,y}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:jS[e.magFilter],minFilter:jS[e.minFilter],wrapS:jS[e.wrapS],wrapT:jS[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);var r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(r.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,r)}));var i=n.textures.push(r)-1;return t.textures.set(e,i),i}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var i=e.color.toArray().concat([e.opacity]);if(zS(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var a={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(a,e.metalnessMap),r.pbrMetallicRoughness.metallicRoughnessTexture=a}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var o={index:this.processTexture(e.map)};this.applyTextureTransform(o,e.map),r.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){var s=e.emissive.clone().multiplyScalar(e.emissiveIntensity),u=Math.max(s.r,s.g,s.b);if(u>1&&(s.multiplyScalar(1/u),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),u>0&&(r.emissiveFactor=s.toArray()),e.emissiveMap){var l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),r.emissiveTexture=l}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var h={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(h.strength=e.aoMapIntensity),this.applyTextureTransform(h,e.aoMap),r.occlusionTexture=h}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===Vr&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var f=n.materials.push(r)-1;return t.materials.set(e,f),f}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var i=0,a=e.material.length;i<a;i++)r.push(e.material[i].uuid);else r.push(e.material.uuid);var o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);var s,u=e.geometry;if(s=e.isLineSegments?yS:e.isLineLoop?bS:e.isLine?xS:e.isPoints?gS:e.material.wireframe?yS:wS,!0!==u.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var l={},c={},h=[],f=[],d={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=u.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(p)));var v=null;for(var m in u.attributes)if("morph"!==m.substr(0,5)){var g=u.attributes[m];m=d[m]||m.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(m)||(m="_"+m),t.attributes.has(this.getUID(g)))c[m]=t.attributes.get(this.getUID(g));else{v=null;var y=g.array;"JOINTS_0"!==m||y instanceof Uint16Array||y instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),v=new cl(new Uint16Array(y),g.itemSize,g.normalized));var b=this.processAccessor(v||g,u);null!==b&&(c[m]=b,t.attributes.set(this.getUID(g),b))}}if(void 0!==p&&u.setAttribute("normal",p),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var x=[],w=[],_={};if(void 0!==e.morphTargetDictionary)for(var S in e.morphTargetDictionary)_[e.morphTargetDictionary[S]]=S;for(var k=0;k<e.morphTargetInfluences.length;++k){var M={},T=!1;for(var E in u.morphAttributes)if("position"===E||"normal"===E){var C=u.morphAttributes[E][k],A=E.toUpperCase(),R=u.attributes[E];if(t.attributes.has(this.getUID(C)))M[A]=t.attributes.get(this.getUID(C));else{var P=C.clone();if(!u.morphTargetsRelative)for(var L=0,O=C.count;L<O;L++)P.setXYZ(L,C.getX(L)-R.getX(L),C.getY(L)-R.getY(L),C.getZ(L)-R.getZ(L));M[A]=this.processAccessor(P,u),t.attributes.set(this.getUID(R),M[A])}}else T||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),T=!0);f.push(M),x.push(e.morphTargetInfluences[k]),void 0!==e.morphTargetDictionary&&w.push(_[k])}l.weights=x,w.length>0&&(l.extras={},l.extras.targetNames=w)}var N=Array.isArray(e.material);if(N&&0===u.groups.length)return null;for(var D=N?e.material:[e.material],I=N?u.groups:[{materialIndex:0,start:void 0,count:void 0}],j=0,F=I.length;j<F;j++){var z={mode:s,attributes:c};if(this.serializeUserData(u,z),f.length>0&&(z.targets=f),null!==u.index){var B=this.getUID(u.index);void 0===I[j].start&&void 0===I[j].count||(B+=":"+I[j].start+":"+I[j].count),t.attributes.has(B)?z.indices=t.attributes.get(B):(z.indices=this.processAccessor(u.index,u,I[j].start,I[j].count),t.attributes.set(B,z.indices)),null===z.indices&&delete z.indices}var U=this.processMaterial(D[I[j].materialIndex]);null!==U&&(z.material=U),h.push(z)}l.primitives=h,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,l)}));var V=n.meshes.push(l)-1;return t.meshes.set(o,V),V}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:xs.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var i=(e=mS.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],o=[],s=0;s<i.length;++s){var u=i[s],l=Ag.parseTrackName(u.name),c=Ag.findNode(t,l.nodeName),h=FS[l.propertyName];if("bones"===l.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(l.objectIndex):void 0),!c||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;var f=u.values.length/u.times.length;h===FS.morphTargetInfluences&&(f/=c.morphTargetInfluences.length);var d=void 0;!0===u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(d="CUBICSPLINE",f/=3):d=u.getInterpolation()===ho?"STEP":"LINEAR",o.push({input:this.processAccessor(new cl(u.times,1)),output:this.processAccessor(new cl(u.values,f)),interpolation:d}),a.push({sampler:o.length-1,target:{node:r.get(c),path:h}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:a}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;var a=e.skeleton.bones[0];if(void 0===a)return null;for(var o=[],s=new Float32Array(16*i.bones.length),u=new vu,l=0;l<i.bones.length;++l)o.push(n.get(i.bones[l])),u.copy(i.boneInverses[l]),u.multiply(e.bindMatrix).toArray(s,16*l);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new cl(s,16)),joints:o,skeleton:n.get(a)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var i={};if(n.trs){var a=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();zS(a,[0,0,0,1])||(i.rotation=a),zS(o,[0,0,0])||(i.translation=o),zS(s,[1,1,1])||(i.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===zS(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){var u=this.processMesh(e);null!==u&&(i.mesh=u)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var l=[],c=0,h=e.children.length;c<h;c++){var f=e.children[c];if(f.visible||!1===n.onlyVisible){var d=this.processNode(f);null!==d&&l.push(d)}}l.length>0&&(i.children=l)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));var p=t.nodes.push(i)-1;return r.set(e,p),p}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var i=[],a=0,o=e.children.length;a<o;a++){var s=e.children[a];if(s.visible||!1===n.onlyVisible){var u=this.processNode(s);null!==u&&i.push(u)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new sd;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof sd?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(var a=0;a<t.animations.length;++a)this.processAnimation(t.animations[a],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),WS=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,l.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,i=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);var o=r.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),ZS=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,l.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),$S=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}return(0,l.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isGLTFSpecularGlossinessMaterial){var n=this.writer,r=n.extensionsUsed,i={};t.pbrMetallicRoughness.baseColorFactor&&(i.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var a=[1,1,1];if(e.specular.toArray(a,0),i.specularFactor=a,i.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(i.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){var o={index:n.processTexture(e.specularMap)};n.applyTextureTransform(o,e.specularMap),i.specularGlossinessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),qS=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_clearcoat"}return(0,l.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial){var n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){var a={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(a,e.clearcoatMap),i.clearcoatTexture=a}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){var o={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(o,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){var s={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(s,e.clearcoatNormalMap),i.clearcoatNormalTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),XS=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,l.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){var a={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(a,e.transmissionMap),i.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}(),YS=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,l.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){var a={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(a,e.thicknessMap),i.thicknessTexture=a}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}}]),e}();function KS(e,t,n){console.log(e),t.endsWith(".json")||(t+=".json"),e instanceof Object&&(e=JSON.stringify(e,void 0,n));var r="data:application/json;charset=utf-8,"+encodeURIComponent(e),i=document.createElement("A");i.setAttribute("href",r),i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}mS.Utils={insertKeyframe:function(e,t){var n,r=.001,i=e.getValueSize(),a=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+i),s=e.createInterpolant(new e.ValueBufferType(i));if(0===e.times.length){a[0]=t;for(var u=0;u<i;u++)o[u]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;a[0]=t,a.set(e.times,1),o.set(s.evaluate(t),0),o.set(e.values,i),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;a[a.length-1]=t,a.set(e.times,0),o.set(e.values,0),o.set(s.evaluate(t),e.values.length),n=a.length-1}else for(var l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<r)return l;if(e.times[l]<t&&e.times[l+1]>t){a.set(e.times.slice(0,l+1),0),a[l+1]=t,a.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*i),0),o.set(s.evaluate(t),(l+1)*i),o.set(e.values.slice((l+1)*i),(l+2)*i),n=l+1;break}}return e.times=a,e.values=o,n},mergeMorphTargetTracks:function(e,t){for(var n=[],r={},i=e.tracks,a=0;a<i.length;++a){var o=i[a],s=Ag.parseTrackName(o.name),u=Ag.findNode(t,s.nodeName);if("morphTargetInfluences"===s.propertyName&&void 0!==s.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(fo)}var l=u.morphTargetInfluences.length,c=u.morphTargetDictionary[s.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);var h=void 0;if(void 0!==r[u.uuid]){var f=o.createInterpolant(new o.ValueBufferType(1));h=r[u.uuid];for(var d=0;d<h.times.length;d++)h.values[d*l+c]=f.evaluate(h.times[d]);for(var p=0;p<o.times.length;p++){var v=this.insertKeyframe(h,o.times[p]);h.values[v*l+c]=o.values[p]}}else{for(var m=new((h=o.clone()).ValueBufferType)(l*h.times.length),g=0;g<h.times.length;g++)m[g*l+c]=h.values[g];h.name=(s.nodeName||"")+".morphTargetInfluences",h.values=m,r[u.uuid]=h,n.push(h)}}else n.push(o)}return e.tracks=n,e}};var JS,QS="line",ek="tube",tk="cone",nk=tk,rk=function(){function e(t,n,r,i,a,o,s,l,c,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:nk;(0,u.Z)(this,e),this._id=void 0,this._parentScene=void 0,this._points=void 0,this._currPosGeom=void 0,this._currPosGeomArray=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._trace_type=void 0,this._parentRobot=void 0,this._robotPart=void 0,this._times=void 0,this._currRotGeom=void 0,this._currRotGeomArray=void 0,this._rotations=void 0,this._density=void 0,this._axisSize=void 0,this._traceSize=void 0,this._timespan=void 0,this._timespanIndex=void 0,this._color=void 0===c?Db():c,this._trace_type=nk,this._id=(new tx).value(),this._timespan=l,this._timespanIndex=[],this._currPosGeomArray=[],this._currRotGeomArray=[],this._rootGroup=new db.Group,this._currPosGeom=this.newPosGeom(),this._rootGroup.add(this._currPosGeom),this._currRotGeom=this.newRotGeom(),this._rootGroup.add(this._currRotGeom),this._is_visible=!0,this._points=[],this._parentRobot=n,this._robotPart=r,this._times=i,this._opacity=1,this._rotations=[],this._density=a,this._axisSize=o,this._traceSize=s,console.log(s),this._parentScene=new pS(void 0),this.update(t,n,r,i,f,h);var d=new WeakRef(this);n.afterParentSceneSet().subscribe((function(e){var t=br(e,2)[1],n=d.deref();return void 0!==n&&(void 0===t?(n.setParentScene(void 0),!1):(n.updatePoints(),!0))})),n.afterpositionOffsetSet().subscribe((function(){var e=d.deref();return void 0!==e&&(e.updatePoints(),!0)}))}return(0,l.Z)(e,[{key:"id",value:function(){return this._id}},{key:"density",value:function(){return this._density}},{key:"setDensity",value:function(e){this._density=e,this.updateRot(this._rotations)}},{key:"axisSize",value:function(){return this._axisSize}},{key:"setAxisSize",value:function(e){this._axisSize=e,this.updateRot(this._rotations)}},{key:"rotations",value:function(){return this._rotations}},{key:"timespanIndex",value:function(){return this._timespanIndex}},{key:"updateTimespan",value:function(e){var t,n;if(2===e.length&&void 0!==this._times){this._timespan=e;var r=0,i=this._times.length-1;if(null!==(t=this._parentRobot.parentScene())&&void 0!==t&&t.isTimeWarping()){var a,o,s,u,l=null===(a=this._parentRobot.parentScene())||void 0===a||null===(o=a.timeWarping())||void 0===o?void 0:o.timeWarpMap(),c=null===(s=this._parentRobot.parentScene())||void 0===s||null===(u=s.timeWarping())||void 0===u?void 0:u.indexMap();if(void 0===l||void 0===c)return;for(var h=0;h<l[1].length;h++)if(l[0][h]>=e[0]){r=c[1][h];break}for(var f=l[1].length-1;f>=0;f--)if(l[0][f]<=e[1]){i=c[1][f];break}}else{for(var d=0;d<this._times.length;d++)if(this._times[d]>=e[0]){r=d;break}for(var p=this._times.length-1;p>=0;p--)if(this._times[p]<=e[1]){i=p;break}}this._timespanIndex=[r,i];for(var v=0;v<this._currPosGeomArray.length;v++)void 0!==this._currPosGeomArray[v]&&(this._currPosGeomArray[v].visible=!(v<r||v>i));for(var m=Math.round(1/this._density),g=0;g<this._currRotGeomArray.length;g+=m)void 0!==this._currRotGeomArray[g]&&(this._currRotGeomArray[g].visible=!(g<r||g>i));null===(n=this.parentScene())||void 0===n||n.render()}}},{key:"setTraceSize",value:function(e){for(var t,n=0;n<this._currPosGeomArray.length;n++)void 0!==this._currPosGeomArray[n]&&this._currPosGeomArray[n].scale.set(e,e,e);this._traceSize=e,null===(t=this.parentScene())||void 0===t||t.render()}},{key:"updatePoints",value:function(){var e=this.robot(),t=e.parentScene();if(!t)return!1;var n,r=this.robotPart();if(r instanceof hS)n=t.frameDataFor(e,this.times(),r,!0).jointPositions;else{if(!(r instanceof fS))throw new Error("Invalid robotPart type");n=t.frameDataFor(e,this.times(),r,!0).linkPositions}return this.setPoints(n),!0}},{key:"beforeParentSceneSet",value:function(){return this._parentScene.beforeSet()}},{key:"afterParentSceneSet",value:function(){return this._parentScene.afterSet()}},{key:"robot",value:function(){return this._parentRobot}},{key:"robotPart",value:function(){return this._robotPart}},{key:"times",value:function(){return this._times}},{key:"color",value:function(){return this._color}},{key:"traverseMeshes",value:function(e){this._rootGroup.traverse((function(t){uS(t)&&e(t)}))}},{key:"traverseMaterials",value:function(e){this._rootGroup.traverse((function(t){kb(t.material,e)}))}},{key:"visible",value:function(){return this._is_visible}},{key:"setVisible",value:function(e){e!==this._is_visible&&(this.traverseMeshes((function(t){t.visible=e})),this._is_visible=e,dr.updateUI(),dr.render())}},{key:"opacity",value:function(){return this._opacity}},{key:"setOpacity",value:function(e){var t=this;this._opacity=Ib(e,0,1),this.traverseMaterials((function(e){e.opacity=t._opacity})),dr.updateUI(),dr.render()}},{key:"parentScene",value:function(){return this._parentScene.value()}},{key:"setTraceType",value:function(e){this.update(this._points,this._parentRobot,this._robotPart,this.times(),e)}},{key:"traceType",value:function(){return this._trace_type}},{key:"newPosGeom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nk;void 0===e&&(e=[]),0===e.length?e.push(new db.Vector3,new db.Vector3):1===e.length&&e.push(e[0].clone());var n=new db.CatmullRomCurve3(e,!1);if(t===QS){var r=(new db.BufferGeometry).setFromPoints(n.getPoints(e.length)),i=new db.LineBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()});return new db.Line(r,i)}if(t===ek){var a=new db.TubeGeometry(n,2*e.length,.005,8,!0),o=new db.MeshBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()});return new db.Mesh(a,o)}if(t===tk){var s=new db.Group,u=new db.Matrix4,l=new db.MeshBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()});this._currPosGeomArray=[];for(var c=0;c<e.length-1;c++){var h=e[c],f=e[c+1],d=h.distanceTo(f);if(0!==d){var p=.005,v=d,m=new db.Mesh(new db.ConeGeometry(p,v),l);m.rotateX(Math.PI/2);var g=new db.Group;g.add(m),g.position.copy(h),u.lookAt(f,h,g.up),g.quaternion.setFromRotationMatrix(u);var y=new db.Vector3;y.subVectors(f,h).normalize(),g.position.addScaledVector(y,d/2),s.add(g),this._currPosGeomArray[c]=g,this._currPosGeomArray[c].scale.set(this._traceSize,this._traceSize,this._traceSize)}}return this.updateTimespan(this._timespan),s}throw new Error('Unknown LineTraceType "'.concat(t,'"'))}},{key:"newRotGeom",value:function(e){void 0===e&&(e=this._rotations);var t=this._points;void 0===t&&(t=[]),0===t.length?t.push(new db.Vector3,new db.Vector3):1===t.length&&t.push(t[0].clone());var n=new db.Group,r=Math.round(1/this._density);this._currRotGeomArray=[];for(var i=0;i<t.length-1;i+=r){var a=t[i],o=new db.AxesHelper(this._axisSize);void 0!==e&&o.setRotationFromQuaternion(e[i]),o.position.copy(a),n.add(o),this._currRotGeomArray[i]=o}return this.updateTimespan(this._timespan),n}},{key:"setParentScene",value:function(e){var t=this;e!==this._parentScene.value()&&(this._parentScene.setValue((function(e,n){e&&(e.scene().remove(t._rootGroup),e.render())}),e,(function(e,n){void 0!==n&&(n.scene().add(t._rootGroup),n.render())})),dr.updateUI())}},{key:"points",value:function(){return this._points}},{key:"clonedPoints",value:function(){return this._points.map((function(e){return e.clone()}))}},{key:"setPoints",value:function(e){this.update(e,this._parentRobot,this._robotPart,this.times(),this._trace_type)}},{key:"update",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nk,a=arguments.length>5?arguments[5]:void 0;this._points=e,this._parentRobot=t,this._robotPart=n,this._times=r,void 0!==a&&(this._rotations=a),this.updateRot(a);var o=this.newPosGeom(e,i);this._rootGroup.remove(this._currPosGeom),this._currPosGeom=o,this._rootGroup.add(this._currPosGeom),this._trace_type=i}},{key:"updateRot",value:function(e){var t=this.newRotGeom(e);this._rootGroup.remove(this._currRotGeom),this._currRotGeom=t,this._rootGroup.add(this._currRotGeom)}},{key:"clone",value:function(){var t,n=[],r=s(this._points);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i.clone())}}catch(Fq){r.e(Fq)}finally{r.f()}var a=new e(n,this._parentRobot,this._robotPart,this.times(),this._density,this._axisSize,this._traceSize,this._timespan,this._color,this._rotations,this._trace_type);return a.setVisible(this._is_visible),a._color=this._color,a}}]),e}(),ik=function(){function e(t){(0,u.Z)(this,e),this._beforeDestroyed=void 0,this._value=void 0,this._afterDestroyed=void 0,this._value=t,this._beforeDestroyed=new dS,this._afterDestroyed=new dS}return(0,l.Z)(e,[{key:"beforeDestroyed",value:function(){return this._beforeDestroyed}},{key:"afterDestroyed",value:function(){return this._afterDestroyed}},{key:"isAlive",value:function(){return!this.isDestroyed()}},{key:"isDestroyed",value:function(){return void 0===this._value}},{key:"deref",value:function(){return this._value}},{key:"ifElseAlive",value:function(e,t){var n=this._value;return void 0!==n?e(n):t()}},{key:"ifAlive",value:function(e){var t=this._value;t&&e(t)}},{key:"destroy",value:function(){var e=this._value;void 0!==e&&(this._beforeDestroyed.call(e),this._value=void 0,this._afterDestroyed.call(e))}}]),e}();JS=Symbol.iterator;var ak=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,u.Z)(this,e),this._objs=void 0,this._objs=[],t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.push(i)}}catch(Fq){r.e(Fq)}finally{r.f()}}}return(0,l.Z)(e,[{key:"destroyContents",value:function(){var e,t=s(this._objs);try{for(t.s();!(e=t.n()).done;){br(e.value,2)[1].destroy()}}catch(Fq){t.e(Fq)}finally{t.f()}this.clean()}},{key:"clean",value:function(){for(var e=0;e<this._objs.length;){void 0!==this._objs[e][1].deref()?e+=1:this._objs.splice(e,1)}}},{key:"contains",value:function(e){var t,n=s(this);try{for(n.s();!(t=n.n()).done;){if(t.value===e)return!0}}catch(Fq){n.e(Fq)}finally{n.f()}return!1}},{key:"push",value:function(e){var t=this,n=new WeakRef(e),r=e.beforeDestroyed().subscribe((function(){var e,r=null===(e=n.deref())||void 0===e?void 0:e.deref();return void 0!==r&&(t.remove(r),!0)}));this._objs.push([r,e])}},{key:"remove",value:function(e){for(var t=0;t<this._objs.length;t++){var n=br(this._objs[t],2),r=n[0],i=n[1].deref();if(void 0!==i){if(i===e)return this._objs.splice(t,1),r(),!0}else this._objs.splice(t,1),t--}return!1}},{key:"length",get:function(){var e,t=0,n=s(this);try{for(n.s();!(e=n.n()).done;){e.value;t+=1}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"aliveContents",value:function(){var e=mr().mark(n),t=this;function n(){var n,r,i,a,o;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t._objs.length)){e.next=15;break}if(r=br(t._objs[n],2),i=r[0],a=r[1],void 0===(o=a.deref())){e.next=9;break}return e.next=7,[o,a];case 7:e.next=12;break;case 9:t._objs.splice(n,1),i(),n--;case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e)}return n()}},{key:JS,value:function(){var e=mr().mark(n),t=this;function n(){var n,r,i,a,o;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t._objs.length)){e.next=16;break}if(r=br(t._objs[n],2),i=r[0],a=r[1],void 0===(o=a.deref())){e.next=10;break}return e.next=7,o;case 7:n+=1,e.next=13;break;case 10:t._objs.splice(n,1),i(),n--;case 13:n++,e.next=1;break;case 16:case"end":return e.stop()}}),e)}return n()}}]),e}(),ok=(0,l.Z)((function e(t,n,r){var i=this;(0,u.Z)(this,e),this._ts1=void 0,this._ts2=void 0,this._distFunction=void 0,this._indexMap=void 0,this._valueMap=void 0,this.ts1=function(){return i._ts1},this.ts2=function(){return i._ts2},this.distFunction=function(){return i._distFunction},this.indexMap=function(){return i._indexMap},this.valueMap=function(){return i._valueMap},this.doTimeWarp=function(e,t,n,r){var i;return e<t[0]?e=t[0]:e>=t[t.length-1]&&(e=t[t.length-1]),null!==(i=n[Math.min(Vb(t,e),t.length-1)])&&void 0!==i?i:e},this.timeWarpMap=function(){return i._valueMap},this.timeWarp=function(e,t){var n=br(i.timeWarpMap(),2),r=n[0],a=n[1];return i.doTimeWarp(e,r,a,t)},this.untimeWarp=function(e,t){var n=br(i.timeWarpMap(),2),r=n[0],a=n[1];return i.doTimeWarp(e,a,r,t)},this._ts1=t,this._ts2=n,this._distFunction=r,this._indexMap=function(e,t,n){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var a=0;a<t.length;a++){var o=1/0;i>0?(o=Math.min(o,r[i-1][a]),a>0&&(o=Math.min(o,r[i-1][a-1]),o=Math.min(o,r[i][a-1]))):o=a>0?Math.min(o,r[i][a-1]):0,r[i][a]=o+n(e[i],t[a],i,a)}}return function(e){var t=e.length-1,n=void 0!==e[0]?e[0].length-1:0,r=[],i=[];for(;t>0||n>0;)t>0?n>0?e[t-1][n]<e[t-1][n-1]?e[t-1][n]<e[t][n-1]?(r.push(t-1),i.push(n),t--):(r.push(t),i.push(n-1),n--):e[t-1][n-1]<e[t][n-1]?(r.push(t-1),i.push(n-1),t--,n--):(r.push(t),i.push(n-1),n--):(r.push(t-1),i.push(n),t--):(r.push(t),i.push(n-1),n--);return r.reverse(),i.reverse(),[r,i]}(r)}(t,n,r);var a,o=[],l=[],c=br(this._indexMap,2),h=s(Bb(c[0],c[1]));try{for(h.s();!(a=h.n()).done;){var f=br(a.value,2),d=f[0],v=f[1];o.push(t[d]),l.push(n[v])}}catch(Fq){h.e(Fq)}finally{h.f()}this._valueMap=[o,l];var m=br(this._valueMap,2),g=m[0],y=m[1];p()(g[0]<=g[g.length-1]),p()(y[0]<=y[y.length-1])}));function sk(e,t){var n,r;if(void 0===t){var i,a=s(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(Fq){a.e(Fq)}finally{a.f()}}else{var u,l=-1,c=s(e);try{for(c.s();!(u=c.n()).done;){var h=u.value;null!=(h=t(h,++l,e))&&(void 0===n?h>=h&&(n=r=h):(n>h&&(n=h),r<h&&(r=h)))}}catch(Fq){c.e(Fq)}finally{c.f()}}return[n,r]}function uk(e,t){var n;if(void 0===t){var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(Fq){i.e(Fq)}finally{i.f()}}else{var o,u=-1,l=s(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(Fq){l.e(Fq)}finally{l.f()}}return n}function lk(e,t){var n;if(void 0===t){var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n>a||void 0===n&&a>=a)&&(n=a)}}catch(Fq){i.e(Fq)}finally{i.f()}}else{var o,u=-1,l=s(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(Fq){l.e(Fq)}finally{l.f()}}return n}function ck(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function hk(e){return e}var fk=1e-6;function dk(e){return"translate("+e+",0)"}function pk(e){return"translate(0,"+e+")"}function vk(e){return function(t){return+e(t)}}function mk(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function gk(){return!this.__axis}function yk(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=1===e||4===e?-1:1,c=4===e||2===e?"x":"y",h=1===e||3===e?dk:pk;function f(f){var d=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):hk:i,v=Math.max(a,0)+s,m=t.range(),g=+m[0]+u,y=+m[m.length-1]+u,b=(t.bandwidth?mk:vk)(t.copy(),u),x=f.selection?f.selection():f,w=x.selectAll(".domain").data([null]),_=x.selectAll(".tick").data(d,t).order(),S=_.exit(),k=_.enter().append("g").attr("class","tick"),M=_.select("line"),T=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),M=M.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),T=T.merge(k.append("text").attr("fill","currentColor").attr(c,l*v).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),f!==x&&(w=w.transition(f),_=_.transition(f),M=M.transition(f),T=T.transition(f),S=S.transition(f).attr("opacity",fk).attr("transform",(function(e){return isFinite(e=b(e))?h(e+u):this.getAttribute("transform")})),k.attr("opacity",fk).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+u)}))),S.remove(),w.attr("d",4===e||2===e?o?"M"+l*o+","+g+"H"+u+"V"+y+"H"+l*o:"M"+u+","+g+"V"+y:o?"M"+g+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+g+","+u+"H"+y),_.attr("opacity",1).attr("transform",(function(e){return h(b(e)+u)})),M.attr(c+"2",l*a),T.attr(c,l*v).text(p),x.filter(gk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),x.each((function(){this.__axis=b}))}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(a=o=+e,f):a},f.tickSizeInner=function(e){return arguments.length?(a=+e,f):a},f.tickSizeOuter=function(e){return arguments.length?(o=+e,f):o},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.offset=function(e){return arguments.length?(u=+e,f):u},f}function bk(e){return yk(3,e)}function xk(e){return yk(4,e)}function wk(){}function _k(e){return null==e?wk:function(){return this.querySelector(e)}}function Sk(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function kk(){return[]}function Mk(e){return null==e?kk:function(){return this.querySelectorAll(e)}}function Tk(e){return function(){return this.matches(e)}}function Ek(e){return function(t){return t.matches(e)}}var Ck=Array.prototype.find;function Ak(){return this.firstElementChild}var Rk=Array.prototype.filter;function Pk(){return Array.from(this.children)}function Lk(e){return new Array(e.length)}function Ok(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Nk(e){return function(){return e}}function Dk(e,t,n,r,i,a){for(var o,s=0,u=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Ok(e,a[s]);for(;s<u;++s)(o=t[s])&&(i[s]=o)}function Ik(e,t,n,r,i,a,o){var s,u,l,c=new Map,h=t.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=t[s])&&(d[s]=l=o.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=o.call(e,a[s],s,a)+"",(u=c.get(l))?(r[s]=u,u.__data__=a[s],c.delete(l)):n[s]=new Ok(e,a[s]);for(s=0;s<h;++s)(u=t[s])&&c.get(d[s])===u&&(i[s]=u)}function jk(e){return e.__data__}function Fk(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function zk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Ok.prototype={constructor:Ok,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Bk="http://www.w3.org/1999/xhtml",Uk={svg:"http://www.w3.org/2000/svg",xhtml:Bk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vk(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Uk.hasOwnProperty(t)?{space:Uk[t],local:e}:e}function Gk(e){return function(){this.removeAttribute(e)}}function Hk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wk(e,t){return function(){this.setAttribute(e,t)}}function Zk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $k(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function qk(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Xk(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yk(e){return function(){this.style.removeProperty(e)}}function Kk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Jk(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qk(e,t){return e.style.getPropertyValue(t)||Xk(e).getComputedStyle(e,null).getPropertyValue(t)}function eM(e){return function(){delete this[e]}}function tM(e,t){return function(){this[e]=t}}function nM(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function rM(e){return e.trim().split(/^|\s+/)}function iM(e){return e.classList||new aM(e)}function aM(e){this._node=e,this._names=rM(e.getAttribute("class")||"")}function oM(e,t){for(var n=iM(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function sM(e,t){for(var n=iM(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uM(e){return function(){oM(this,e)}}function lM(e){return function(){sM(this,e)}}function cM(e,t){return function(){(t.apply(this,arguments)?oM:sM)(this,e)}}function hM(){this.textContent=""}function fM(e){return function(){this.textContent=e}}function dM(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function pM(){this.innerHTML=""}function vM(e){return function(){this.innerHTML=e}}function mM(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function gM(){this.nextSibling&&this.parentNode.appendChild(this)}function yM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bM(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bk&&t.documentElement.namespaceURI===Bk?t.createElement(e):t.createElementNS(n,e)}}function xM(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wM(e){var t=Vk(e);return(t.local?xM:bM)(t)}function _M(){return null}function SM(){var e=this.parentNode;e&&e.removeChild(this)}function kM(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MM(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TM(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function EM(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function CM(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function AM(e,t,n){var r=Xk(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function RM(e,t){return function(){return AM(this,e,t)}}function PM(e,t){return function(){return AM(this,e,t.apply(this,arguments))}}aM.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var LM=mr().mark(OM);function OM(){var e,t,n,r,i,a,o;return mr().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}r=e[t],i=0,a=r.length;case 3:if(!(i<a)){s.next=10;break}if(!(o=r[i])){s.next=7;break}return s.next=7,o;case 7:++i,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),LM,this)}var NM=[null];function DM(e,t){this._groups=e,this._parents=t}function IM(){return new DM([[document.documentElement]],NM)}DM.prototype=IM.prototype=wr({constructor:DM,select:function(e){"function"!==typeof e&&(e=_k(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new DM(r,this._parents)},selectAll:function(e){e="function"===typeof e?function(e){return function(){return Sk(e.apply(this,arguments))}}(e):Mk(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(e.call(o,o.__data__,l,s)),i.push(o));return new DM(r,i)},selectChild:function(e){return this.select(null==e?Ak:function(e){return function(){return Ck.call(this.children,e)}}("function"===typeof e?e:Ek(e)))},selectChildren:function(e){return this.selectAll(null==e?Pk:function(e){return function(){return Rk.call(this.children,e)}}("function"===typeof e?e:Ek(e)))},filter:function(e){"function"!==typeof e&&(e=Tk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&e.call(a,a.__data__,l,o)&&u.push(a);return new DM(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,jk);var n=t?Ik:Dk,r=this._parents,i=this._groups;"function"!==typeof e&&(e=Nk(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],h=i[l],f=h.length,d=Fk(e.call(c,c&&c.__data__,l,r)),p=d.length,v=s[l]=new Array(p),m=o[l]=new Array(p),g=u[l]=new Array(f);n(c,h,v,m,g,d,t);for(var y,b,x=0,w=0;x<p;++x)if(y=v[x]){for(x>=w&&(w=x+1);!(b=m[w])&&++w<p;);y._next=b||null}}return(o=new DM(o,r))._enter=s,o._exit=u,o},enter:function(){return new DM(this._enter||this._groups.map(Lk),this._parents)},exit:function(){return new DM(this._exit||this._groups.map(Lk),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l,c=n[u],h=r[u],f=c.length,d=s[u]=new Array(f),p=0;p<f;++p)(l=c[p]||h[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new DM(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=zk);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(t)}return new DM(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e,t=0,n=s(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(Fq){n.e(Fq)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=Vk(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Hk:Gk:"function"===typeof t?n.local?qk:$k:n.local?Zk:Wk)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Yk:"function"===typeof t?Jk:Kk)(e,t,null==n?"":n)):Qk(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?eM:"function"===typeof t?nM:tM)(e,t)):this.node()[e]},classed:function(e,t){var n=rM(e+"");if(arguments.length<2){for(var r=iM(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?cM:t?uM:lM)(n,t))},text:function(e){return arguments.length?this.each(null==e?hM:("function"===typeof e?dM:fM)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?pM:("function"===typeof e?mM:vM)(e)):this.node().innerHTML},raise:function(){return this.each(gM)},lower:function(){return this.each(yM)},append:function(e){var t="function"===typeof e?e:wM(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:wM(e),r=null==t?_M:"function"===typeof t?t:_k(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(SM)},clone:function(e){return this.select(e?MM:kM)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=TM(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?CM:EM,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?PM:RM)(e,t))}},Symbol.iterator,OM);var jM=IM,FM={value:function(){}};function zM(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new BM(r)}function BM(e){this._=e}function UM(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function VM(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function GM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=FM,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}BM.prototype=zM.prototype={constructor:BM,on:function(e,t){var n,r=this._,i=UM(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=GM(r[n],e.name,t);else if(null==t)for(n in r)r[n]=GM(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=VM(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new BM(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var HM,WM,ZM=zM,$M=0,qM=0,XM=0,YM=0,KM=0,JM=0,QM="object"===typeof performance&&performance.now?performance:Date,eT="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tT(){return KM||(eT(nT),KM=QM.now()+JM)}function nT(){KM=0}function rT(){this._call=this._time=this._next=null}function iT(e,t,n){var r=new rT;return r.restart(e,t,n),r}function aT(){KM=(YM=QM.now())+JM,$M=qM=0;try{!function(){tT(),++$M;for(var e,t=HM;t;)(e=KM-t._time)>=0&&t._call.call(void 0,e),t=t._next;--$M}()}finally{$M=0,function(){var e,t,n=HM,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:HM=t);WM=e,sT(r)}(),KM=0}}function oT(){var e=QM.now(),t=e-YM;t>1e3&&(JM-=t,YM=e)}function sT(e){$M||(qM&&(qM=clearTimeout(qM)),e-KM>24?(e<1/0&&(qM=setTimeout(aT,e-QM.now()-JM)),XM&&(XM=clearInterval(XM))):(XM||(YM=QM.now(),XM=setInterval(oT,1e3)),$M=1,eT(aT)))}function uT(e,t,n){var r=new rT;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}rT.prototype=iT.prototype={constructor:rT,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?tT():+n)+(null==t?0:+t),this._next||WM===this||(WM?WM._next=this:HM=this,WM=this),this._call=e,this._time=n,sT()},stop:function(){this._call&&(this._call=null,this._time=1/0,sT())}};var lT=ZM("start","end","cancel","interrupt"),cT=[];function hT(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,c,h,f;if(1!==n.state)return u();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return uT(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[l])}if(uT((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=iT(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:lT,tween:cT,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function fT(e,t){var n=pT(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function dT(e,t){var n=pT(e,t);if(n.state>3)throw new Error("too late; already running");return n}function pT(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vT(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var mT,gT=180/Math.PI,yT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bT(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*gT,skewX:Math.atan(u)*gT,scaleX:o,scaleY:s}}function xT(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],u=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:vT(e,i)},{i:u-2,x:vT(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vT(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,u),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vT(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,u),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:vT(e,n)},{i:s-2,x:vT(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var wT=xT((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yT:bT(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),_T=xT((function(e){return null==e?yT:(mT||(mT=document.createElementNS("http://www.w3.org/2000/svg","g")),mT.setAttribute("transform",e),(e=mT.transform.baseVal.consolidate())?bT((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):yT)}),", ",")",")");function ST(e,t){var n,r;return function(){var i=dT(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function kT(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var a=dT(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function MT(e,t,n){var r=e._id;return e.each((function(){var e=dT(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return pT(e,r).value[t]}}function TT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ET(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function CT(){}var AT=.7,RT=1/AT,PT="\\s*([+-]?\\d+)\\s*",LT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",OT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NT=/^#([0-9a-f]{3,8})$/,DT=new RegExp("^rgb\\("+[PT,PT,PT]+"\\)$"),IT=new RegExp("^rgb\\("+[OT,OT,OT]+"\\)$"),jT=new RegExp("^rgba\\("+[PT,PT,PT,LT]+"\\)$"),FT=new RegExp("^rgba\\("+[OT,OT,OT,LT]+"\\)$"),zT=new RegExp("^hsl\\("+[LT,OT,OT]+"\\)$"),BT=new RegExp("^hsla\\("+[LT,OT,OT,LT]+"\\)$"),UT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function VT(){return this.rgb().formatHex()}function GT(){return this.rgb().formatRgb()}function HT(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=NT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?WT(t):3===n?new XT(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ZT(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ZT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=DT.exec(e))?new XT(t[1],t[2],t[3],1):(t=IT.exec(e))?new XT(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jT.exec(e))?ZT(t[1],t[2],t[3],t[4]):(t=FT.exec(e))?ZT(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=zT.exec(e))?QT(t[1],t[2]/100,t[3]/100,1):(t=BT.exec(e))?QT(t[1],t[2]/100,t[3]/100,t[4]):UT.hasOwnProperty(e)?WT(UT[e]):"transparent"===e?new XT(NaN,NaN,NaN,0):null}function WT(e){return new XT(e>>16&255,e>>8&255,255&e,1)}function ZT(e,t,n,r){return r<=0&&(e=t=n=NaN),new XT(e,t,n,r)}function $T(e){return e instanceof CT||(e=HT(e)),e?new XT((e=e.rgb()).r,e.g,e.b,e.opacity):new XT}function qT(e,t,n,r){return 1===arguments.length?$T(e):new XT(e,t,n,null==r?1:r)}function XT(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function YT(){return"#"+JT(this.r)+JT(this.g)+JT(this.b)}function KT(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function JT(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function QT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tE(e,t,n,r)}function eE(e){if(e instanceof tE)return new tE(e.h,e.s,e.l,e.opacity);if(e instanceof CT||(e=HT(e)),!e)return new tE;if(e instanceof tE)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new tE(o,s,u,e.opacity)}function tE(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function nE(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function rE(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}TT(CT,HT,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:VT,formatHex:VT,formatHsl:function(){return eE(this).formatHsl()},formatRgb:GT,toString:GT}),TT(XT,qT,ET(CT,{brighter:function(e){return e=null==e?RT:Math.pow(RT,e),new XT(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?AT:Math.pow(AT,e),new XT(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YT,formatHex:YT,formatRgb:KT,toString:KT})),TT(tE,(function(e,t,n,r){return 1===arguments.length?eE(e):new tE(e,t,n,null==r?1:r)}),ET(CT,{brighter:function(e){return e=null==e?RT:Math.pow(RT,e),new tE(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?AT:Math.pow(AT,e),new tE(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new XT(nE(e>=240?e-240:e+120,i,r),nE(e,i,r),nE(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var iE=function(e){return function(){return e}};function aE(e,t){return function(n){return e+n*t}}function oE(e){return 1===(e=+e)?sE:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):iE(isNaN(t)?n:t)}}function sE(e,t){var n=t-e;return n?aE(e,n):iE(isNaN(e)?t:e)}var uE=function e(t){var n=oE(t);function r(e,t){var r=n((e=qT(e)).r,(t=qT(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=sE(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function lE(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=qT(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}lE((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return rE((n-r/t)*t,o,i,a,s)}})),lE((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return rE((n-r/t)*t,i,a,o,s)}}));var cE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hE=new RegExp(cE.source,"g");function fE(e,t){var n,r,i,a=cE.lastIndex=hE.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=cE.exec(e))&&(r=hE.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:vT(n,r)})),a=hE.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function dE(e,t){var n;return("number"===typeof t?vT:t instanceof HT?uE:(n=HT(t))?(t=n,uE):fE)(e,t)}function pE(e){return function(){this.removeAttribute(e)}}function vE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mE(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function gE(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function yE(e,t,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,u));this.removeAttribute(e)}}function bE(e,t,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function xE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _E(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&wE(e,i)),n}return i._value=t,i}function SE(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&xE(e,i)),n}return i._value=t,i}function kE(e,t){return function(){fT(this,e).delay=+t.apply(this,arguments)}}function ME(e,t){return t=+t,function(){fT(this,e).delay=t}}function TE(e,t){return function(){dT(this,e).duration=+t.apply(this,arguments)}}function EE(e,t){return t=+t,function(){dT(this,e).duration=t}}function CE(e,t){if("function"!==typeof t)throw new Error;return function(){dT(this,e).ease=t}}function AE(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?fT:dT;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}var RE=jM.prototype.constructor;function PE(e){return function(){this.style.removeProperty(e)}}function LE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function OE(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&LE(e,a,n)),r}return a._value=t,a}function NE(e){return function(t){this.textContent=e.call(this,t)}}function DE(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&NE(r)),t}return r._value=e,r}var IE=0;function jE(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function FE(){return++IE}var zE=jM.prototype;jE.prototype=function(e){return jM().transition(e)}.prototype=wr({constructor:jE,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=_k(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=e.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,hT(h[f],t,n,f,h,pT(s,n)));return new jE(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Mk(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=e.call(u,u.__data__,h,l),p=pT(u,n),v=0,m=d.length;v<m;++v)(f=d[v])&&hT(f,t,n,v,d,p);a.push(d),o.push(u)}return new jE(a,o,t,n)},selectChild:zE.selectChild,selectChildren:zE.selectChildren,filter:function(e){"function"!==typeof e&&(e=Tk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&e.call(a,a.__data__,l,o)&&u.push(a);return new jE(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=t[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=t[s];return new jE(o,this._parents,this._name,this._id)},selection:function(){return new RE(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=FE(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=pT(o,t);hT(o,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new jE(r,this._parents,e,n)},call:zE.call,nodes:zE.nodes,node:zE.node,size:zE.size,empty:zE.empty,each:zE.each,on:function(e,t){var n=this._id;return arguments.length<2?pT(this.node(),n).on.on(e):this.each(AE(n,e,t))},attr:function(e,t){var n=Vk(e),r="transform"===n?_T:dE;return this.attrTween(e,"function"===typeof t?(n.local?bE:yE)(n,r,MT(this,"attr."+e,t)):null==t?(n.local?vE:pE)(n):(n.local?gE:mE)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Vk(e);return this.tween(n,(r.local?_E:SE)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?wT:dE;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=Qk(this,e),o=(this.style.removeProperty(e),Qk(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,PE(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=Qk(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Qk(this,e)),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}(e,r,MT(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var u=dT(this,e),l=u.on,c=null==u.value[o]?a||(a=PE(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=Qk(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,OE(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(MT(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,DE(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=pT(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?ST:kT)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?kE:ME)(t,e)):pT(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?TE:EE)(t,e)):pT(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(CE(t,e)):pT(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;dT(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0===--i&&a()}};n.each((function(){var n=dT(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&a()}))}},Symbol.iterator,zE[Symbol.iterator]);var BE={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function UE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}jM.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},jM.prototype.transition=function(e){var t,n;e instanceof jE?(t=e._id,e=e._name):(t=FE(),(n=BE).time=tT(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&hT(o,e,t,l,s,n||UE(o,t));return new jE(r,this._parents,e,t)};Math.abs,Math.max,Math.min;function VE(e){return[+e[0],+e[1]]}function GE(e){return[VE(e[0]),VE(e[1])]}["w","e"].map(HE),["n","s"].map(HE),["n","w","e","s","nw","ne","sw","se"].map(HE);function HE(e){return{type:e}}function WE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ZE(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $E(){}var qE=.7,XE=1/qE,YE="\\s*([+-]?\\d+)\\s*",KE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",JE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QE=/^#([0-9a-f]{3,8})$/,eC=new RegExp("^rgb\\(".concat(YE,",").concat(YE,",").concat(YE,"\\)$")),tC=new RegExp("^rgb\\(".concat(JE,",").concat(JE,",").concat(JE,"\\)$")),nC=new RegExp("^rgba\\(".concat(YE,",").concat(YE,",").concat(YE,",").concat(KE,"\\)$")),rC=new RegExp("^rgba\\(".concat(JE,",").concat(JE,",").concat(JE,",").concat(KE,"\\)$")),iC=new RegExp("^hsl\\(".concat(KE,",").concat(JE,",").concat(JE,"\\)$")),aC=new RegExp("^hsla\\(".concat(KE,",").concat(JE,",").concat(JE,",").concat(KE,"\\)$")),oC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sC(){return this.rgb().formatHex()}function uC(){return this.rgb().formatRgb()}function lC(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=QE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?cC(t):3===n?new pC(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?hC(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?hC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eC.exec(e))?new pC(t[1],t[2],t[3],1):(t=tC.exec(e))?new pC(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=nC.exec(e))?hC(t[1],t[2],t[3],t[4]):(t=rC.exec(e))?hC(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=iC.exec(e))?xC(t[1],t[2]/100,t[3]/100,1):(t=aC.exec(e))?xC(t[1],t[2]/100,t[3]/100,t[4]):oC.hasOwnProperty(e)?cC(oC[e]):"transparent"===e?new pC(NaN,NaN,NaN,0):null}function cC(e){return new pC(e>>16&255,e>>8&255,255&e,1)}function hC(e,t,n,r){return r<=0&&(e=t=n=NaN),new pC(e,t,n,r)}function fC(e){return e instanceof $E||(e=lC(e)),e?new pC((e=e.rgb()).r,e.g,e.b,e.opacity):new pC}function dC(e,t,n,r){return 1===arguments.length?fC(e):new pC(e,t,n,null==r?1:r)}function pC(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function vC(){return"#".concat(bC(this.r)).concat(bC(this.g)).concat(bC(this.b))}function mC(){var e=gC(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(yC(this.r),", ").concat(yC(this.g),", ").concat(yC(this.b)).concat(1===e?")":", ".concat(e,")"))}function gC(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yC(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bC(e){return((e=yC(e))<16?"0":"")+e.toString(16)}function xC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _C(e,t,n,r)}function wC(e){if(e instanceof _C)return new _C(e.h,e.s,e.l,e.opacity);if(e instanceof $E||(e=lC(e)),!e)return new _C;if(e instanceof _C)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new _C(o,s,u,e.opacity)}function _C(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function SC(e){return(e=(e||0)%360)<0?e+360:e}function kC(e){return Math.max(0,Math.min(1,e||0))}function MC(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function TC(e){return"string"===typeof e?new DM([[document.querySelector(e)]],[document.documentElement]):new DM([[e]],NM)}function EC(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}WE($E,lC,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sC,formatHex:sC,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return wC(this).formatHsl()},formatRgb:uC,toString:uC}),WE(pC,dC,ZE($E,{brighter:function(e){return e=null==e?XE:Math.pow(XE,e),new pC(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?qE:Math.pow(qE,e),new pC(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new pC(yC(this.r),yC(this.g),yC(this.b),gC(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vC,formatHex:vC,formatHex8:function(){return"#".concat(bC(this.r)).concat(bC(this.g)).concat(bC(this.b)).concat(bC(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:mC,toString:mC})),WE(_C,(function(e,t,n,r){return 1===arguments.length?wC(e):new _C(e,t,n,null==r?1:r)}),ZE($E,{brighter:function(e){return e=null==e?XE:Math.pow(XE,e),new _C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?qE:Math.pow(qE,e),new _C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pC(MC(e>=240?e-240:e+120,i,r),MC(e,i,r),MC(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new _C(SC(this.h),kC(this.s),kC(this.l),gC(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=gC(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(SC(this.h),", ").concat(100*kC(this.s),"%, ").concat(100*kC(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var CC={passive:!1},AC={capture:!0,passive:!1};function RC(e){e.stopImmediatePropagation()}function PC(e){e.preventDefault(),e.stopImmediatePropagation()}var LC=function(e){return function(){return e}};function OC(e,t){var n=t.sourceEvent,r=t.subject,i=t.target,a=t.identifier,o=t.active,s=t.x,u=t.y,l=t.dx,c=t.dy,h=t.dispatch;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function NC(e){return!e.ctrlKey&&!e.button}function DC(){return this.parentNode}function IC(e,t){return null==t?{x:e.x,y:e.y}:t}function jC(){return navigator.maxTouchPoints||"ontouchstart"in this}function FC(){var e,t,n,r,i=NC,a=DC,o=IC,s=jC,u={},l=ZM("start","drag","end"),c=0,h=0;function f(e){e.on("mousedown.drag",d).filter(s).on("touchstart.drag",m).on("touchmove.drag",g,CC).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(o,s){if(!r&&i.call(this,o,s)){var u=b(this,a.call(this,o,s),o,s,"mouse");u&&(TC(o.view).on("mousemove.drag",p,AC).on("mouseup.drag",v,AC),function(e){var t=e.document.documentElement,n=TC(e).on("dragstart.drag",PC,AC);"onselectstart"in t?n.on("selectstart.drag",PC,AC):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(o.view),RC(o),n=!1,e=o.clientX,t=o.clientY,u("start",o))}}function p(r){if(PC(r),!n){var i=r.clientX-e,a=r.clientY-t;n=i*i+a*a>h}u.mouse("drag",r)}function v(e){TC(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,r=TC(e).on("dragstart.drag",null);t&&(r.on("click.drag",PC,AC),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),PC(e),u.mouse("end",e)}function m(e,t){if(i.call(this,e,t)){var n,r,o=e.changedTouches,s=a.call(this,e,t),u=o.length;for(n=0;n<u;++n)(r=b(this,s,e,t,o[n].identifier,o[n]))&&(RC(e),r("start",e,o[n]))}}function g(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=u[r[t].identifier])&&(PC(e),n("drag",e,r[t]))}function y(e){var t,n,i=e.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<a;++t)(n=u[i[t].identifier])&&(RC(e),n("end",e,i[t]))}function b(e,t,n,r,i,a){var s,h,d,p=l.copy(),v=EC(a||n,t);if(null!=(d=o.call(e,new OC("beforestart",{sourceEvent:n,target:f,identifier:i,active:c,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),r)))return s=d.x-v[0]||0,h=d.y-v[1]||0,function n(a,o,l){var m,g=v;switch(a){case"start":u[i]=n,m=c++;break;case"end":delete u[i],--c;case"drag":v=EC(l||o,t),m=c}p.call(a,e,new OC(a,{sourceEvent:o,subject:d,target:f,identifier:i,active:m,x:v[0]+s,y:v[1]+h,dx:v[0]-g[0],dy:v[1]-g[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(i="function"===typeof e?e:LC(!!e),f):i},f.container=function(e){return arguments.length?(a="function"===typeof e?e:LC(e),f):a},f.subject=function(e){return arguments.length?(o="function"===typeof e?e:LC(e),f):o},f.touchable=function(e){return arguments.length?(s="function"===typeof e?e:LC(!!e),f):s},f.on=function(){var e=l.on.apply(l,arguments);return e===l?f:e},f.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,f):Math.sqrt(h)},f}OC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var zC=Math.sqrt(50),BC=Math.sqrt(10),UC=Math.sqrt(2);function VC(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=zC?10:a>=BC?5:a>=UC?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=zC?10:a>=BC?5:a>=UC?2:1)}function GC(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function HC(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WC(e){var t,n,r;function i(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==e.length?(t=GC,n=function(t,n){return GC(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===GC||e===HC?e:ZC,n=e,r=e),{left:i,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function ZC(){return 0}var $C=WC(GC),qC=$C.right,XC=($C.left,WC((function(e){return null===e?NaN:+e})).center,qC);function YC(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}var KC=function(e){return function(){return e}};function JC(e,t){return function(n){return e+n*t}}function QC(e){return 1===(e=+e)?eA:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):KC(isNaN(t)?n:t)}}function eA(e,t){var n=t-e;return n?JC(e,n):KC(isNaN(e)?t:e)}var tA=function e(t){var n=QC(t);function r(e,t){var r=n((e=dC(e)).r,(t=dC(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=eA(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function nA(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=dC(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}nA((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return YC((n-r/t)*t,o,i,a,s)}})),nA((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return YC((n-r/t)*t,i,a,o,s)}}));function rA(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=hA(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function iA(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function aA(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oA(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=hA(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var sA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uA=new RegExp(sA.source,"g");function lA(e,t){var n,r,i,a=sA.lastIndex=uA.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=sA.exec(e))&&(r=uA.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:aA(n,r)})),a=uA.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function cA(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function hA(e,t){var n,r=typeof t;return null==t||"boolean"===r?KC(t):("number"===r?aA:"string"===r?(n=lC(t))?(t=n,tA):lA:t instanceof lC?tA:t instanceof Date?iA:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?cA:Array.isArray(t)?rA:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?oA:aA)(e,t)}function fA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function dA(e){return+e}var pA=[0,1];function vA(e){return e}function mA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function gA(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=mA(i,r),a=n(o,a)):(r=mA(r,i),a=n(a,o)),function(e){return a(r(e))}}function yA(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=mA(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=XC(e,t,1,r)-1;return a[n](i[n](t))}}function bA(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xA(){var e,t,n,r,i,a,o=pA,s=pA,u=hA,l=vA;function c(){var e=Math.min(o.length,s.length);return l!==vA&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?yA:gA,i=a=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,u)))(e(l(t)))}return h.invert=function(n){return l(t((a||(a=r(s,o.map(e),aA)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,dA),c()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=fA,c()},h.clamp=function(e){return arguments.length?(l=!!e||vA,c()):l!==vA},h.interpolate=function(e){return arguments.length?(u=e,c()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function wA(){return xA()(vA,vA)}function _A(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var SA,kA=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function MA(e){if(!(t=kA.exec(e)))throw new Error("invalid format: "+e);var t;return new TA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function TA(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function EA(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function CA(e){return(e=EA(Math.abs(e)))?e[1]:NaN}function AA(e,t){var n=EA(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}MA.prototype=TA.prototype,TA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var RA={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return AA(100*e,t)},r:AA,s:function(e,t){var n=EA(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(SA=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+EA(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function PA(e){return e}var LA,OA,NA,DA=Array.prototype.map,IA=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function jA(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?PA:(t=DA.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?PA:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(DA.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=MA(e)).fill,n=e.align,h=e.sign,f=e.symbol,d=e.zero,p=e.width,v=e.comma,m=e.precision,g=e.trim,y=e.type;"n"===y?(v=!0,y="g"):RA[y]||(void 0===m&&(m=12),g=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?a:/[%p]/.test(y)?u:"",w=RA[y],_=/[defgprs%]/.test(y);function S(e){var i,a,u,f=b,S=x;if("c"===y)S=w(e)+S,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==h&&(k=!1),f=(k?"("===h?h:l:"-"===h||"("===h?"":h)+f,S=("s"===y?IA[8+SA/3]:"")+S+(k&&"("===h?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(u=e.charCodeAt(i))||u>57){S=(46===u?o+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}v&&!d&&(e=r(e,1/0));var M=f.length+e.length+S.length,T=M<p?new Array(p-M+1).join(t):"";switch(v&&d&&(e=r(T+e,T.length?p-S.length:1/0),T=""),n){case"<":e=f+e+S+T;break;case"=":e=f+T+e+S;break;case"^":e=T.slice(0,M=T.length>>1)+f+e+S+T.slice(M);break;default:e=T+f+e+S}return s(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=MA(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(CA(t)/3))),i=Math.pow(10,-r),a=IA[8+r/3];return function(e){return n(i*e)+a}}}}function FA(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=zC?i*=10:a>=BC?i*=5:a>=UC&&(i*=2),t<e?-i:i}(e,t,n);switch((r=MA(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(CA(t)/3)))-CA(Math.abs(e)))}(a,o))||(r.precision=i),NA(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,CA(t)-CA(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-CA(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return OA(r)}function zA(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=VC(e,t,n))||!isFinite(o))return[];if(o>0){var u=Math.round(e/o),l=Math.round(t/o);for(u*o<e&&++u,l*o>t&&--l,a=new Array(i=l-u+1);++s<i;)a[s]=(u+s)*o}else{o=-o;var c=Math.round(e*o),h=Math.round(t*o);for(c/o<e&&++c,h/o>t&&--h,a=new Array(i=h-c+1);++s<i;)a[s]=(c+s)/o}return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return FA(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;for(l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);c-- >0;){if((i=VC(u,l,n))===r)return a[o]=u,a[s]=l,t(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function BA(){var e=wA();return e.copy=function(){return bA(e,BA())},_A.apply(e,arguments),zA(e)}function UA(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}LA=jA({thousands:",",grouping:[3],currency:["$",""]}),OA=LA.format,NA=LA.formatPrefix;var VA=UA("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function GA(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var HA=GA(UA("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),WA=(GA(UA("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),GA(UA("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),GA(UA("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Math.PI),ZA=2*WA,$A=1e-6,qA=ZA-$A;function XA(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function YA(){return new XA}XA.prototype=YA.prototype={constructor:XA,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-e,u=r-t,l=a-e,c=o-t,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>$A)if(Math.abs(c*s-u*l)>$A&&i){var f=n-a,d=r-o,p=s*s+u*u,v=f*f+d*d,m=Math.sqrt(p),g=Math.sqrt(h),y=i*Math.tan((WA-Math.acos((p+h-v)/(2*m*g)))/2),b=y/g,x=y/m;Math.abs(b-1)>$A&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*d)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,l=t+s,c=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>$A||Math.abs(this._y1-l)>$A)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%ZA+ZA),h>qA?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>$A&&(this._+="A"+n+","+n+",0,"+ +(h>=WA)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var KA=YA;Array.prototype.slice;function JA(e){return function(){return e}}function QA(e){this._context=e}function eR(e){return new QA(e)}function tR(e){return e[0]}function nR(e){return e[1]}function rR(e,t){var n=JA(!0),r=null,i=eR,a=null;function o(o){var s,u,l,c=(o=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(o)).length,h=!1;for(null==r&&(a=i(l=KA())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(u,s,o),+t(u,s,o));if(l)return a=null,l+""||null}return e="function"===typeof e?e:void 0===e?tR:JA(e),t="function"===typeof t?t:void 0===t?nR:JA(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:JA(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:JA(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:JA(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}function iR(e,t,n){this.k=e,this.x=t,this.y=n}QA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},iR.prototype={constructor:iR,scale:function(e){return 1===e?this:new iR(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new iR(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new iR(1,0,0);iR.prototype;var aR=function(){function e(t,n,r,i){(0,u.Z)(this,e),this._parentScene=void 0,this._currGeom=void 0,this._currGeomArray=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._id=void 0,this._traceFrom=void 0,this._traceTo=void 0,this._baseSceneTimeIndex=void 0,this._id=new tx,this._color=Db(),void 0!==i&&(this._color=i),this._rootGroup=new db.Group,this._currGeom=this.newGeom(),this._currGeomArray=[],this._baseSceneTimeIndex=[],this._rootGroup.add(this._currGeom),this._is_visible=!0,this._traceFrom=t,this._traceTo=n,this._opacity=.5,this._parentScene=void 0,this.update(t,n);new WeakRef(this);this.setParentScene(r)}return(0,l.Z)(e,[{key:"traceFrom",value:function(){return this._traceFrom}},{key:"traceTo",value:function(){return this._traceTo}},{key:"color",value:function(){return this._color}},{key:"id",value:function(){return this._id.value()}},{key:"updateTimespan",value:function(){var e,t,n,r=this._traceFrom,i=this._traceTo,a=[];if(2===(a=(null===(e=r.robot().parentScene())||void 0===e?void 0:e.baseSceneId())===(null===(t=i.robot().parentScene())||void 0===t?void 0:t.id().value())?i.timespanIndex():r.timespanIndex()).length){for(var o=[],s=0;s<this._baseSceneTimeIndex.length;s++)if(this._baseSceneTimeIndex[s]>=a[0]){o[0]=s;break}for(var u=this._baseSceneTimeIndex.length-1;u>=0;u--)if(this._baseSceneTimeIndex[u]<=a[1]){o[1]=u;break}for(var l=0;l<this._currGeomArray.length;l++)void 0!==this._currGeomArray[l]&&(l<o[0]||l>o[1]?this._currGeomArray[l].visible=!1:this._currGeomArray[l].visible=!0);null===(n=this.parentScene())||void 0===n||n.render()}}},{key:"newGeom",value:function(e,t){if(this._currGeomArray=[],void 0===e||void 0===t)return new db.Group;var n=e.points(),r=t.points();if(console.log("points length "+n.length),n.length===r.length){var i,a,o,s,u=[],l=new db.Group,c=[[],[]];if((null===(i=e.robot().parentScene())||void 0===i?void 0:i.baseSceneId())===(null===(a=t.robot().parentScene())||void 0===a?void 0:a.id().value())){var h,f,d=null===(h=e.robot().parentScene())||void 0===h||null===(f=h.timeWarping())||void 0===f?void 0:f.indexMap();if(void 0===d)return l;c[0]=pr(d[1]),c[1]=pr(d[0]),this._baseSceneTimeIndex=c[1]}else if((null===(o=t.robot().parentScene())||void 0===o?void 0:o.baseSceneId())===(null===(s=e.robot().parentScene())||void 0===s?void 0:s.id().value())){var p,v,m=null===(p=t.robot().parentScene())||void 0===p||null===(v=p.timeWarping())||void 0===v?void 0:v.indexMap();if(void 0===m)return l;c[0]=pr(m[0]),c[1]=pr(m[1]),this._baseSceneTimeIndex=c[0]}else{for(var g=0;g<n.length;g++)c[0][g]=g,c[1][g]=g;this._baseSceneTimeIndex=c[0]}console.log(c);for(var y=0;y<c[0].length;y++)u.push(n[c[0][y]].distanceTo(r[c[1][y]]));var b=Math.max.apply(Math,u),x=Math.min.apply(Math,u);console.log("max "+b+" min "+x);for(var w=0;w<c[0].length-1;w++){var _=new Float32Array([n[c[0][w]].x,n[c[0][w]].y,n[c[0][w]].z,r[c[1][w]].x,r[c[1][w]].y,r[c[1][w]].z,r[c[1][w+1]].x,r[c[1][w+1]].y,r[c[1][w+1]].z,n[c[0][w]].x,n[c[0][w]].y,n[c[0][w]].z,r[c[1][w+1]].x,r[c[1][w+1]].y,r[c[1][w+1]].z,n[c[0][w+1]].x,n[c[0][w+1]].y,n[c[0][w+1]].z]),S=new db.BufferGeometry;S.setAttribute("position",new db.BufferAttribute(_,3)),S.computeVertexNormals();var k=n[c[0][w]].distanceTo(r[c[1][w]]),M=(n[c[0][w+1]].distanceTo(r[c[1][w+1]])-x)/(b-x),T=dC(HA((k-x)/(b-x))),E=dC(HA(M)),C=T.r/255,A=T.g/255,R=T.b/255,P=E.r/255,L=E.g/255,O=E.b/255,N=new Float32Array([C,A,R,C,A,R,P,L,O,C,A,R,P,L,O,P,L,O]);S.setAttribute("color",new db.BufferAttribute(N,3));var D=new db.MeshPhongMaterial({vertexColors:!0,side:db.DoubleSide}),I=new db.Mesh(S,D);l.add(I),this._currGeomArray[w]=I}return this.updateTimespan(),l}return console.log("the number of points do not match!!!"),new db.Group}},{key:"robotFrom",value:function(){return this._traceFrom.robot()}},{key:"robotPartFrom",value:function(){return this._traceFrom.robotPart()}},{key:"timesFrom",value:function(){return this._traceFrom.times()}},{key:"robotTo",value:function(){return this._traceTo.robot()}},{key:"robotPartTo",value:function(){return this._traceTo.robotPart()}},{key:"timesTo",value:function(){return this._traceTo.times()}},{key:"traverseMeshes",value:function(e){this._rootGroup.traverse((function(t){uS(t)&&e(t)}))}},{key:"traverseMaterials",value:function(e){this._rootGroup.traverse((function(t){kb(t.material,e)}))}},{key:"visible",value:function(){return this._is_visible}},{key:"setVisible",value:function(e){e!==this._is_visible&&(this.traverseMeshes((function(t){t.visible=e})),this._is_visible=e,dr.updateUI(),dr.render())}},{key:"opacity",value:function(){return this._opacity}},{key:"setOpacity",value:function(e){var t=this;this._opacity=Ib(e,0,1),this.traverseMaterials((function(e){e.opacity=t._opacity})),dr.updateUI(),dr.render()}},{key:"parentScene",value:function(){return this._parentScene}},{key:"setParentScene",value:function(e){console.log("set parent scene!!!"),e!==this._parentScene&&(void 0!==this._parentScene&&(this._parentScene.scene().remove(this._rootGroup),this._parentScene.render()),this._parentScene=e,void 0!==e&&(e.scene().add(this._rootGroup),e.render()),dr.updateUI())}},{key:"pointsFrom",value:function(){return this._traceFrom.points()}},{key:"pointsTo",value:function(){return this._traceTo.points()}},{key:"update",value:function(e,t){var n=this.newGeom(e,t);this._rootGroup.remove(this._currGeom),this._currGeom=n,this._rootGroup.add(this._currGeom)}}]),e}(),oR=["rgb(255, 255, 0)","brown","red","#204BD8","purple","green"],sR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this))._id=void 0,i._robots=void 0,i._ghostRobots=void 0,i._selectedRobot=void 0,i._hoveredRobot=void 0,i._traces=void 0,i._sentGhostTraces=void 0,i._receivedGhostTraces=void 0,i._traceMap=void 0,i._robotSceneManager=void 0,i._color=void 0,i._colorPalettes=void 0,i._arrows=void 0,i._traceFrom=void 0,i._density=void 0,i._axisSize=void 0,i._traceSize=void 0,i._update=void 0,i._timeWarpObj=void 0,i._baseSceneId=void 0,i._keyObjects=void 0,i._currTimeWarpBase=void 0,i._num_ee_targets=void 0,i._backgroundColor=void 0,i._directionalLightIntensity=void 0,i._directionalLight=void 0,i._ambientLightIntensity=void 0,i._ambientLight=void 0,i._groundPlane=void 0,i._groundGrid=void 0,i._cameraType=void 0,i._toggleCamera=void 0,i._worldFrame=void 0,i._toggleWorldFrame=void 0,i._groundPlaneColor=void 0,i._groundPlaneOpacity=void 0,i._worldFrameObject=void 0,i.currTimeWarpBase=function(){return i._currTimeWarpBase},i._id=new tx(r),i._color=Db(),i._robotSceneManager=new pS(e),i._colorPalettes=[].concat(oR),i._arrows=new Map,i._density=.5,i._axisSize=0,i._traceSize=1,i._update=!1,i._traceMap=new Map,i._robots=[],i._ghostRobots=new Map,i._traces=[],i._sentGhostTraces=new ak,i._receivedGhostTraces=new ak,i._baseSceneId="",i._keyObjects=[],i._worldFrameObject=new db.Object3D,i.addWorldFrame(),i._num_ee_targets=0,i._backgroundColor="#171718",i._directionalLightIntensity=1,i._ambientLightIntensity=.2,i._directionalLight=new db.DirectionalLight,i._ambientLight=new db.AmbientLight,i._groundPlane=new db.Object3D,i._groundGrid=new db.GridHelper(100,100,0,0),i._cameraType="Perspective",i._toggleCamera=!1,i._worldFrame="ROS",i._toggleWorldFrame=!1,i._groundPlaneColor="#343536",i._groundPlaneOpacity=.2,i}return(0,l.Z)(n,[{key:"ghostRobots",value:function(){var e,t=[],n=s(this._ghostRobots);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2)[1];t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"getGhostRobot",value:function(e){return this._ghostRobots.get(e)}},{key:"hasGhostRobt",value:function(e){return this._ghostRobots.has(e)}},{key:"addGhostRobot",value:function(e){this._ghostRobots.set(e.idValue(),e)}},{key:"removeGhostRobot",value:function(e){var t=this._ghostRobots.get(e);null===t||void 0===t||t.removeControlledClone(this),this._ghostRobots.delete(e),dr.updateUI()}},{key:"backgroundColor",value:function(){return this._backgroundColor}},{key:"setBackgroundColor",value:function(e){this._backgroundColor=e,this.scene().background=new db.Color(e),this.render()}},{key:"setCameraType",value:function(e){this._cameraType=e,this._toggleCamera=!0}},{key:"toggleCameraType",value:function(){"Perspective"===this._cameraType?this._cameraType="Orthographic":this._cameraType="Perspective",this._toggleCamera=!0}},{key:"cameraType",value:function(){return this._cameraType}},{key:"finishToggleCamera",value:function(){this._toggleCamera=!1}},{key:"isToggleCamera",value:function(){return this._toggleCamera}},{key:"setWorldFrame",value:function(e){this._worldFrame=e,this._toggleWorldFrame=!0}},{key:"toggleWorldFrame",value:function(){"ROS"===this._worldFrame?this._worldFrame="THREE.js":this._worldFrame="ROS",this._toggleWorldFrame=!0}},{key:"worldFrame",value:function(){return this._worldFrame}},{key:"finishToggleWorldFrame",value:function(){this._toggleWorldFrame=!1}},{key:"isToggleWorldFrame",value:function(){return this._toggleWorldFrame}},{key:"groundPlaneColor",value:function(){return this._groundPlaneColor}},{key:"setGroundPlaneColor",value:function(e){(this._groundPlaneColor=e,this._groundPlane instanceof db.Mesh)&&(this._groundPlane.material.color=new db.Color(e),this.render())}},{key:"groundPlaneOpacity",value:function(){return this._groundPlaneOpacity}},{key:"setGroundPlaneOpacity",value:function(e){(this._groundPlaneOpacity=e,this._groundPlane instanceof db.Mesh)&&(this._groundPlane.material.opacity=e,this.render())}},{key:"isGroundPlaneVisible",value:function(){return this._groundPlane.visible}},{key:"setGroundPlaneVisibility",value:function(e){this._groundPlane.visible=e,this._groundGrid.visible=e,this.render()}},{key:"setGroundPlane",value:function(e,t){this._groundPlane=e,this._groundGrid=t}},{key:"isWorldFrameObjectVisible",value:function(){return this._worldFrameObject.visible}},{key:"setWorldFrameObjectVisibility",value:function(e){this._worldFrameObject.visible=e,this.render()}},{key:"directionalLightIntensity",value:function(){return this._directionalLightIntensity}},{key:"setDirectionalLightIntensity",value:function(e){this._directionalLight.intensity=e,this._directionalLightIntensity=e,this.render()}},{key:"directionalLight",value:function(){return this._directionalLight}},{key:"setDirectionalLight",value:function(e){this._directionalLight=e}},{key:"ambientLightIntensity",value:function(){return this._ambientLightIntensity}},{key:"setAmbientLightIntensity",value:function(e){this._ambientLight.intensity=e,this._ambientLightIntensity=e,this.render()}},{key:"ambientLight",value:function(){return this._ambientLight}},{key:"setAmbientLight",value:function(e){this._ambientLight=e}},{key:"setTraceFrom",value:function(e){this._traceFrom=e}},{key:"setTraceTo",value:function(e){if(void 0!==this._traceFrom){var t=new aR(this._traceFrom,e,this,this.getNextColor());this._arrows.set(t.id(),t),this._traceFrom=void 0,this._update=!0}}},{key:"addArrow",value:function(e,t){var n=this._traceMap.get(e),r=this._traceMap.get(t);if(void 0!==n&&void 0!==r){var i=new aR(n,r,this,this.getNextColor());this._arrows.set(i.id(),i)}}},{key:"removeArrow",value:function(e){var t=this._arrows.get(e);void 0!==t&&(this._arrows.delete(e),t.setParentScene(void 0),this._update=!0,this.addColorBack(t.color()))}},{key:"getAllArrows",value:function(){var e,t=[],n=s(this._arrows);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2)[1];t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"density",value:function(){return this._density}},{key:"setDensity",value:function(e){this._density=e;var t,n=s(this.getAllTraces());try{for(n.s();!(t=n.n()).done;){t.value.setDensity(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this.render()}},{key:"axisSize",value:function(){return this._axisSize}},{key:"setAxisSize",value:function(e){this._axisSize=e;var t,n=s(this.getAllTraces());try{for(n.s();!(t=n.n()).done;){t.value.setAxisSize(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this.render()}},{key:"traceSize",value:function(){return this._traceSize}},{key:"setTraceSize",value:function(e){this._traceSize=e;var t,n=s(this.getAllTraces());try{for(n.s();!(t=n.n()).done;){t.value.setTraceSize(e)}}catch(Fq){n.e(Fq)}finally{n.f()}this.render()}},{key:"setParentRobotSceneManager",value:function(e){var t=this;e!==this._robotSceneManager.value()&&(this._robotSceneManager.setValue(null,e,(function(){if(void 0===e){var n,r=s(t._robots);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeChildRobot(i)}}catch(Fq){r.e(Fq)}finally{r.f()}t._sentGhostTraces.destroyContents()}})),dr.updateUI())}},{key:"robotSceneManager",value:function(){return this._robotSceneManager.value()}},{key:"beforeParentRobotSceneManagerSet",value:function(){return this._robotSceneManager.beforeSet()}},{key:"afterParentRobotSceneManagerSet",value:function(){return this._robotSceneManager.afterSet()}},{key:"getRobotByName",value:function(e){var t=this.robots().filter((function(t){return t.name()===e}));if(1===t.length)return t[0]}},{key:"getJointByName",value:function(e,t){var n=this.getRobotByName(e);if(void 0!==n){var r=n.joints().filter((function(e){return e.name()===t}));if(1===r.length)return r[0]}}},{key:"getLinkByName",value:function(e,t){var n=this.getRobotByName(e);if(void 0!==n){var r=n.links().filter((function(e){return e.name()===t}));if(1===r.length)return r[0]}}},{key:"getAllTraces",value:function(){for(var e=pr(this._traces),t=Array.from(this._receivedGhostTraces.aliveContents()),n=0;n<t.length;n++)e.push(t[n][0]);return e}},{key:"hasReceivedGhostTrace",value:function(e,t){var n,r=s(this._receivedGhostTraces);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.robot()===e&&i.robotPart()===t)return!0}}catch(Fq){r.e(Fq)}finally{r.f()}return!1}},{key:"getReceivedGhostTraces",value:function(e,t){return void 0===t?Array.from(this._receivedGhostTraces.aliveContents()).filter((function(t){return br(t,1)[0].robot()===e})):Array.from(this._receivedGhostTraces.aliveContents()).filter((function(n){var r=br(n,1)[0];return r.robot()===e&&r.robotPart()===t}))}},{key:"sendGhostTracesTo",value:function(e,t,r,i){var a=this;this.removeGhostTracesFrom(e,r,i);var o,u=[],l=s(n.newTraces(e,t,r,i.getNextColor(),i._axisSize,i._density,i._traceSize));try{var c=function(){var e=o.value;e.setOpacity(.1);var t=new ik(e);t.afterDestroyed().subscribe((function(){return e.setParentScene(void 0),!1})),a._sentGhostTraces.push(t),i.receiveGhostTrace(t),u.push(e.id())};for(l.s();!(o=l.n()).done;)c()}catch(Fq){l.e(Fq)}finally{l.f()}return void 0!==r?r.addToScene():e.addToScene(),dr.render(),dr.updateUI(),u}},{key:"receiveGhostTrace",value:function(e){var t=e.deref();t&&(this._update=!0,this._receivedGhostTraces.push(e),t.setParentScene(this),this._traceMap.set(t.id(),t))}},{key:"removeGhostTracesFrom",value:function(e,t,n){var r,i=!1,a=s(n.getReceivedGhostTraces(e,t));try{for(a.s();!(r=a.n()).done;){var o=br(r.value,2)[1],u=o.deref();u&&(n._traceMap.delete(u.id()),n.addColorBack(u.color()),n._update=!0),o.destroy(),i=!0}}catch(Fq){a.e(Fq)}finally{a.f()}return console.log("remove ghost trace"),void 0!==t?t.removeFromScene():e.removeFromScene(),dr.render(),dr.updateUI(),i}},{key:"robotById",value:function(e){var t,n=s(this._robots);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.idValue()===e)return r}}catch(Fq){n.e(Fq)}finally{n.f()}}},{key:"timeWarping",value:function(){return this._timeWarpObj}},{key:"isTimeWarping",value:function(){return void 0!==this._timeWarpObj}},{key:"setTimeWarping",value:function(e){this._timeWarpObj=e}},{key:"setTimeWarpBase",value:function(e){var t=this;if(this._currTimeWarpBase!==e){var r=function(){t.setTimeWarping(void 0),t._currTimeWarpBase=void 0},i=function(){r(),dr.updateUI(),dr.render()};if(void 0!==e){var a=this._robotSceneManager.value();if(void 0!==a){p()(a.hasManagedRobotScene(e),"You can not set the RobotSceneManager to use a scene that it does not own "+"as its timewarp base. Scene: ".concat(e));var o=a.startTime(),u=a.endTime(),l=30*Math.abs(u-o),c=n.frameRange(o,u,30,l),h=new Map,f=new Set(Gb(e.robots(),(function(e){return e.name()}))),v=e.frameData(c,(function(e){return f.has(e)}),(function(e,t){return 1===Hb(e.links(),t,(function(e){return e.name()}))}),(function(e,t){return 1===Hb(e.joints(),t,(function(e){return e.name()}))}),(function(e,t){return 1===Hb(e.articuatedJoints(),t,(function(e){return e.name()}))}));if(!0!==v.keys().next().done){var m,g=s(v.entries());try{for(g.s();!(m=g.n()).done;){var y,b=br(m.value,2),x=b[0],w=b[1],_=new Map,S=new Map,k=s(w.positions);try{for(k.s();!(y=k.n()).done;){var M=br(y.value,2),T=M[0],E=M[1];if(void 0===T)_.set(T,[T,E]);else if(T instanceof hS)_.set(T.name(),[T,E]);else{if(!(T instanceof fS))throw new d.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});_.set(T.name(),[T,E])}}}catch(Fq){k.e(Fq)}finally{k.f()}var C,A=s(w.jointAngles);try{for(A.s();!(C=A.n()).done;){var R=br(C.value,2),P=R[0],L=R[1];S.set(P.name(),[P,L])}}catch(Fq){A.e(Fq)}finally{A.f()}h.set(x.name(),[x,{times:w.times,positions:_,jointAngles:S}])}}catch(Fq){g.e(Fq)}finally{g.f()}if(r(),this!==e){var O,N=new Set(Gb(this.robots(),(function(e){return e.name()})));if(O=this.frameData(c,(function(e){return e.includePosInTimeWarpConsideration()&&h.has(e.name())&&N.has(e)}),(function(e,t){return t.includePosInTimeWarpConsideration()&&h.has(e.name())&&N.has(e)&&1===Hb(e.links(),t,(function(e){return e.name()}))}),(function(e,t){return t.includePosInTimeWarpConsideration()&&h.has(e.name())&&N.has(e)&&1===Hb(e.joints(),t,(function(e){return e.name()}))}),(function(e,t){return t.includeAngleInTimeWarpConsideration()&&h.has(e.name())&&N.has(e)&&1===Hb(e.articuatedJoints(),t,(function(e){return e.name()}))})),!0!==O.keys().next().done){var D,I=[],j=s(O);try{for(j.s();!(D=j.n()).done;){var F=br(D.value,2),z=F[0],B=F[1],U=h.get(z.name());if(void 0!==U){var V,G=s(B.positions);try{for(G.s();!(V=G.n()).done;){var H=br(V.value,2),W=H[0],Z=H[1],$=U[1].positions.get(void 0===W?void 0:W.name());if(void 0!==$){var q=$[1];I.push([q,Z])}}}catch(Fq){G.e(Fq)}finally{G.f()}var X,Y=s(B.jointAngles);try{for(Y.s();!(X=Y.n()).done;){var K=br(X.value,2),J=K[0],Q=K[1],ee=U[1].jointAngles.get(J.name());if(void 0!==ee){var te=ee[1];I.push([te,Q])}}}catch(Fq){Y.e(Fq)}finally{Y.f()}}}}catch(Fq){j.e(Fq)}finally{j.f()}var ne=new ok(c,c,(function(e,t,n,r){for(var i=0,a=0,o=I;a<o.length;a++){var s=br(o[a],2),u=s[0],l=s[1],c=u[n],h=l[r];i+="number"===typeof c&&"number"===typeof h?Math.abs(c-h):c.distanceTo(h)}return i}));this.setTimeWarping(ne),this._currTimeWarpBase=e,dr.updateUI(),dr.render()}}}else i()}else i()}else i()}}},{key:"baseSceneId",value:function(){var e;return void 0===this._currTimeWarpBase?" ":null===(e=this._currTimeWarpBase)||void 0===e?void 0:e.id().value()}},{key:"setKeyObjects",value:function(e){this._keyObjects=pr(e)}},{key:"keyObjects",value:function(){return this._keyObjects}},{key:"frameData",value:function(e,t,n,r,i,a,o,u){var l,c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],h=this._animationManager.time(),f=null!==t&&void 0!==t?t:function(){return!0},d=null!==n&&void 0!==n?n:function(){return!0},p=null!==i&&void 0!==i?i:function(){return!0},v=null!==r&&void 0!==r?r:function(){return!0},m=null!==a&&void 0!==a?a:function(){return!1},g=null!==o&&void 0!==o?o:function(){return!1},y=null!==u&&void 0!==u?u:function(){return!1},b=[],x=[],w=[],_=[],S=[],k=[],M=[],T=s(this.robots());try{for(T.s();!(l=T.n()).done;){var E=l.value;f(E)&&b.push([[],E]);var C,A=s(E.joints());try{for(A.s();!(C=A.n()).done;){var R=C.value;v(E,R)&&w.push([[],E,R])}}catch(Fq){A.e(Fq)}finally{A.f()}var P,L=s(E.articuatedJoints());try{for(L.s();!(P=L.n()).done;){var O=P.value;p(E,O)&&_.push([[],E,O])}}catch(Fq){L.e(Fq)}finally{L.f()}var N,D=s(E.links());try{for(D.s();!(N=D.n()).done;){var I=N.value;d(E,I)&&x.push([[],E,I])}}catch(Fq){D.e(Fq)}finally{D.f()}m(E)&&S.push([[],E]);var j,F=s(E.links());try{for(F.s();!(j=F.n()).done;){var z=j.value;g(E,z)&&k.push([[],E,z])}}catch(Fq){F.e(Fq)}finally{F.f()}var B,U=s(E.joints());try{for(U.s();!(B=U.n()).done;){var V=B.value;y(E,V)&&M.push([[],E,V])}}catch(Fq){U.e(Fq)}finally{U.f()}}}catch(Fq){T.e(Fq)}finally{T.f()}if(0===b.length&&0===x.length&&0===w.length&&0===_.length&&0===S.length&&0===k.length&&0===M.length)return new Map;if(!c)throw new Error("Not implemented yet");var G,H=s(e);try{for(H.s();!(G=H.n()).done;){var W=G.value;this._animationManager.setTime(W);var Z,$=s(b);try{for($.s();!(Z=$.n()).done;){var q=br(Z.value,2),X=q[0],Y=q[1];X.push(Y.getWorldPosition())}}catch(Fq){$.e(Fq)}finally{$.f()}var K,J=s(x);try{for(J.s();!(K=J.n()).done;){var Q=br(K.value,3),ee=Q[0],te=Q[2];ee.push(te.getWorldPosition())}}catch(Fq){J.e(Fq)}finally{J.f()}var ne,re=s(w);try{for(re.s();!(ne=re.n()).done;){var ie=br(ne.value,3),ae=ie[0],oe=ie[2];ae.push(oe.getWorldPosition())}}catch(Fq){re.e(Fq)}finally{re.f()}var se,ue=s(_);try{for(ue.s();!(se=ue.n()).done;){var le=br(se.value,3),ce=le[0],he=le[2];ce.push(he.angle())}}catch(Fq){ue.e(Fq)}finally{ue.f()}var fe,de=s(S);try{for(de.s();!(fe=de.n()).done;){var pe=br(fe.value,2),ve=pe[0],me=pe[1];ve.push(me.getWorldQuaternion())}}catch(Fq){de.e(Fq)}finally{de.f()}var ge,ye=s(k);try{for(ye.s();!(ge=ye.n()).done;){var be=br(ge.value,3),xe=be[0],we=be[2];xe.push(we.getWorldQuaternion())}}catch(Fq){ye.e(Fq)}finally{ye.f()}var _e,Se=s(M);try{for(Se.s();!(_e=Se.n()).done;){var ke=br(_e.value,3),Me=ke[0],Te=ke[2];Me.push(Te.getWorldQuaternion())}}catch(Fq){Se.e(Fq)}finally{Se.f()}}}catch(Fq){H.e(Fq)}finally{H.f()}this._animationManager.setTime(h);for(var Ee=new Map,Ce=function(t){var n=Ee.get(t);if(void 0===n){var r={times:e,positions:new Map,jointAngles:new Map,rotations:new Map};return Ee.set(t,r),r}return n},Ae=0,Re=b;Ae<Re.length;Ae++){var Pe=br(Re[Ae],2),Le=Pe[0],Oe=Pe[1];Ce(Oe).positions.set(void 0,Le)}for(var Ne=0,De=x;Ne<De.length;Ne++){var Ie=br(De[Ne],3),je=Ie[0],Fe=Ie[1],ze=Ie[2];Ce(Fe).positions.set(ze,je)}for(var Be=0,Ue=w;Be<Ue.length;Be++){var Ve=br(Ue[Be],3),Ge=Ve[0],He=Ve[1],We=Ve[2];Ce(He).positions.set(We,Ge)}for(var Ze=0,$e=_;Ze<$e.length;Ze++){var qe=br($e[Ze],3),Xe=qe[0],Ye=qe[1],Ke=qe[2];Ce(Ye).jointAngles.set(Ke,Xe)}for(var Je=0,Qe=S;Je<Qe.length;Je++){var et=br(Qe[Je],2),tt=et[0],nt=et[1];Ce(nt).rotations.set(void 0,tt)}for(var rt=0,it=k;rt<it.length;rt++){var at=br(it[rt],3),ot=at[0],st=at[1],ut=at[2];Ce(st).rotations.set(ut,ot)}for(var lt=0,ct=M;lt<ct.length;lt++){var ht=br(ct[lt],3),ft=ht[0],dt=ht[1],pt=ht[2];Ce(dt).rotations.set(pt,ft)}return Ee}},{key:"frameDataFor",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.frameData(t,(function(t){return void 0===n&&t===e}),(function(t,r){return void 0!==n&&t===e&&r===n}),(function(t,r){return void 0!==n&&t===e&&r===n}),(function(t,r){return void 0!==n&&t===e&&r===n}),(function(t){return void 0===n&&t===e}),(function(t,r){return void 0!==n&&t===e&&r===n}),(function(t,r){return void 0!==n&&t===e&&r===n}),r),a=i.get(e);if(void 0===a)throw new d.AssertionError({message:"robotdata was undefined!"});if(void 0===n){var o=a.positions.get(void 0);if(void 0===o)throw new d.AssertionError({message:"pos was undefined!"});var s=a.rotations.get(void 0);if(void 0===s)throw new d.AssertionError({message:"pos was undefined!"});return{times:a.times,robotPositions:o,robotRotations:s}}if(n instanceof fS){var u=a.positions.get(n);if(void 0===u)throw new d.AssertionError({message:"linkPos was undefined!"});var l=a.rotations.get(n);if(void 0===l)throw new d.AssertionError({message:"linkPos was undefined!"});return{times:a.times,linkPositions:u,linkRotations:l}}var c=a.positions.get(n);if(void 0===c)throw new d.AssertionError({message:"jointPos was undefined!"});var h=a.rotations.get(n);if(void 0===h)throw new d.AssertionError({message:"jointPos was undefined!"});var f=a.jointAngles.get(n);return void 0===f&&(f=[]),{times:a.times,jointPositions:c,jointAngles:f,jointRotations:h}}},{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.setParentRobotSceneManager(e.robotSceneManager());var a,o=new Map,u=s(e.robots());try{for(u.s();!(a=u.n()).done;){var l=a.value;if("World Frame"!==l.name()){var c=l.clone();this.addChildRobot(c),o.set(l,c)}}}catch(Fq){u.e(Fq)}finally{u.f()}if(Tr((0,kr.Z)(n.prototype),"copy",this).call(this,e,t,r,i,o),i){var h,f=s(e._traces);try{for(f.s();!(h=f.n()).done;){var p=h.value,v=[p.robot(),p.robotPart(),p.times()],m=v[0],g=v[1],y=v[2],b=o.get(m);if(void 0!==b)if(void 0===g)this.addChildTrace(b,y,g);else if(g instanceof fS){var x=b.linkMap().get(g.name());if(void 0===x)continue;this.addChildTrace(b,y,x)}else{if(!(g instanceof hS))throw new d.AssertionError({message:"robotPart was not undefined, RobotLink, or RobotJoint"});var w=b.jointMap().get(g.name());if(void 0===w)continue;this.addChildTrace(b,y,w)}}}catch(Fq){f.e(Fq)}finally{f.f()}}return this}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new n).copy(this,e,t,r);return i}},{key:"hasChildTrace",value:function(e,t){return void 0!==this.getChildTrace(e,t)}},{key:"innerNewTraces",value:function(e,t,n,r,i,a,o){var u;dr.assert(this.hasChildRobot(e),"A RobotScene can only generate Traces for Robots that it contains.");var l=new Map;if(void 0===n)(u=new Map).set(void 0,this.frameDataFor(e,t,void 0,!0).robotPositions),l.set(n,this.frameDataFor(e,t,n,!0).robotRotations);else if(n instanceof hS)(u=new Map).set(n,this.frameDataFor(e,t,n,!0).jointPositions),l.set(n,this.frameDataFor(e,t,n,!0).jointRotations);else{if(!(n instanceof fS))throw new d.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});(u=new Map).set(n,this.frameDataFor(e,t,n,!0).linkPositions),l.set(n,this.frameDataFor(e,t,n,!0).linkRotations)}var c,h=[],f=s(u);try{for(f.s();!(c=f.n()).done;){var p=br(c.value,2),v=p[0],m=p[1],g=l.get(v),y=this.robotSceneManager();if(void 0!==y){var b=[y.currStartTime(),y.currEndTime()];h.push(new rk(m,e,v,t,void 0===a?this._density:a,void 0===i?this._axisSize:i,void 0===o?this._traceSize:o,b,void 0===r?this.getNextColor():r,g))}}}catch(Fq){f.e(Fq)}finally{f.f()}return h}},{key:"getChildTrace",value:function(e,t){var n,r=s(this._traces);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.robot()===e&&i.robotPart()===t)return i}}catch(Fq){r.e(Fq)}finally{r.f()}}},{key:"getTrace",value:function(e,t){var n,r=s(this.getAllTraces());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.robot()===e&&i.robotPart()===t)return i}}catch(Fq){r.e(Fq)}finally{r.f()}}},{key:"addChildTrace",value:function(e,t,r){var i,a=[],o=s(n.newTraces(e,t,r));try{for(o.s();!(i=o.n()).done;){var u=i.value,l=this.getChildTrace(e,u.robotPart());void 0===l?(u.setParentScene(this),this._traces.push(u),a.push(u.id()),this._traceMap.set(u.id(),u)):l.update(u.points().map((function(e){return e.clone()})),e,u.robotPart(),t,u.traceType(),u.rotations().map((function(e){return e.clone()})))}}catch(Fq){o.e(Fq)}finally{o.f()}return void 0!==r?r.addToScene():e.addToScene(),this._update=!0,a}},{key:"updateTraces",value:function(){var e=this.robotSceneManager();if(void 0!==e){var t,n=[e.currStartTime(),e.currEndTime()],r=s(this.getAllTraces());try{for(r.s();!(t=r.n()).done;){t.value.updateTimespan(n)}}catch(Fq){r.e(Fq)}finally{r.f()}var i,a=s(this._arrows);try{for(a.s();!(i=a.n()).done;){br(i.value,2)[1].updateTimespan()}}catch(Fq){a.e(Fq)}finally{a.f()}}}},{key:"getNextColor",value:function(){return this._colorPalettes.pop()}},{key:"addColorBack",value:function(e){-1!==oR.indexOf(e)&&this._colorPalettes.push(e)}},{key:"removeChildTrace",value:function(e,t){var n=!1;if(void 0===t){var r,i=s(this._traces);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.robot()===e){var o=this._traces.indexOf(a);o>-1&&(this._traces.splice(o,1),a.setParentScene(void 0),this._traceMap.delete(a.id())),n=!0,this.addColorBack(a.color())}}}catch(Fq){i.e(Fq)}finally{i.f()}e.removeFromScene()}else{var u,l=s(this._traces);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.robot()===e&&c.robotPart()===t){var h=this._traces.indexOf(c);h>-1&&(this._traces.splice(h,1),c.setParentScene(void 0),this._traceMap.delete(c.id())),n=!0,this.addColorBack(c.color())}}}catch(Fq){l.e(Fq)}finally{l.f()}t.removeFromScene()}return!!n&&(this._update=!0,dr.updateUI(),this.render(),!0)}},{key:"id",value:function(){return this._id}},{key:"update",value:function(){return this._update}},{key:"setUpdate",value:function(e){this._update=e}},{key:"color",value:function(){return this._color}},{key:"setColor",value:function(e){this._color=e,this.render()}},{key:"robots",value:function(){return this._robots}},{key:"scene",value:function(){return this._scene}},{key:"setHoveredRobot",value:function(e){var t;e!==this._hoveredRobot&&(null===(t=this._hoveredRobot)||void 0===t||t.setDesaturated(!1),null===e||void 0===e||e.setDesaturated(!0),this._hoveredRobot=e,dr.updateUI())}},{key:"hoveredRobot",value:function(){return this._hoveredRobot}},{key:"setSelectedRobot",value:function(e){var t;e!==this._selectedRobot&&(null===(t=this._selectedRobot)||void 0===t||t.setHighlighted(!1),null===e||void 0===e||e.setHighlighted(!0),this._selectedRobot=e,dr.updateUI())}},{key:"selectedRobot",value:function(){return this._selectedRobot}},{key:"addChildRobot",value:function(e){e.setParentRobotScene(this),this._robots.push(e),dr.updateUI()}},{key:"removeChildRobot",value:function(e){var t=this._robots.indexOf(e);t>-1&&(this.removeChildTrace(e),this._robots.splice(t,1),e.setParentRobotScene(void 0),dr.updateUI())}},{key:"hasChildRobot",value:function(e){return this._robots.indexOf(e)>-1}},{key:"loadJsonFromLocalFile",value:function(){var e=yr(mr().mark((function e(t){var n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jw(t);case 2:n=e.sent,this.loadJson(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadJsonFromURL",value:function(){var e=yr(mr().mark((function e(t){var n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yw(t);case 2:n=e.sent,this.loadJson(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadJson",value:function(){var e=yr(mr().mark((function e(t){return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.deserialize(this._robotSceneManager.value(),t,this);case 2:this.render(),dr.updateUI();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAsJsonTo",value:function(e){KS(this.serialize(),e,4)}},{key:"loadRobotFromURL",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:"",e.prev=1,dr.setPopupHelpPage({page:qn.LoadingStarted,type:"example robot"}),e.next=5,vS.loadRobot(t,void 0,n);case 5:return r=e.sent,this.addChildRobot(r),this.render(),i="Robot ".concat(r.name()," Uploaded Successfully!"),(a=document.createElement("p")).innerText=i,a.classList.add("LoadRobotMessage"),o=document.querySelector(".LoadAndSavePanel"),null===(s=null===o||void 0===o?void 0:o.querySelector(".LoadRobot"))||void 0===s||s.appendChild(a),dr.setPopupHelpPage({page:qn.LoadingSuccess,type:"example robot"}),e.abrupt("return",r);case 19:throw e.prev=19,e.t0=e.catch(1),u="Error loading robot: "+e.t0,(l=document.createElement("p")).innerText=u,l.style.color="red",l.classList.add("LoadRobotMessage"),c=document.querySelector(".LoadAndSavePanel"),null===(h=null===c||void 0===c?void 0:c.querySelector(".LoadRobot"))||void 0===h||h.appendChild(l),dr.setPopupHelpPage({page:qn.LoadingFailed,type:"example robot"}),e.t0;case 31:case"end":return e.stop()}}),e,this,[[1,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addEETarget",value:function(){var e=yr(mr().mark((function e(){var t;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vS.createAxesHelper(.1,"EE Target "+this._num_ee_targets),this._num_ee_targets+=1,this.addChildRobot(t),this.render(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addWorldFrame",value:function(){var e=new db.AxesHelper(1);return this._worldFrameObject=e,this.scene().add(e),this.render(),e}},{key:"serialize",value:function(){var e,t=[],n=s(this._robots);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.serialize())}}catch(Fq){n.e(Fq)}finally{n.f()}return{id:this.id().value(),robots:t,animationManager:this._animationManager.serialize(),animationTables:[]}}}],[{key:"frameRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=arguments.length>4?arguments[4]:void 0;void 0===i&&(i=function(e){return e}),n=Math.abs(n),r=Math.abs(r);var a,o=Math.abs(t-e),u=Math.min(Math.floor(n*o),r),l=Math.abs(o/u),c=[],h=i,f=s((isNaN(l)||o/l<2?mr().mark((function t(){var n,r,i;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=[e-.001,e,e+.001];case 1:if(!(n<r.length)){t.next=8;break}return i=r[n],t.next=5,i;case 5:n++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})):mr().mark((function n(){var r;return mr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e;case 1:if(!(r<=t)){n.next=7;break}return n.next=4,r;case 4:r+=l,n.next=1;break;case 7:case"end":return n.stop()}}),n)})))());try{for(f.s();!(a=f.n()).done;){var d=a.value;c.push(h(d))}}catch(Fq){f.e(Fq)}finally{f.f()}return c}},{key:"possibleTraces",value:function(e){var t=[];t.push(void 0);var n,r=s(e.joints());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i)}}catch(Fq){r.e(Fq)}finally{r.f()}var a,o=s(e.links());try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(u)}}catch(Fq){o.e(Fq)}finally{o.f()}return t}},{key:"newTraces",value:function(e,t,n,r,i,a,o){var s=e.parentScene();if(void 0===s)throw dr.assert(void 0!==s,'In "newTraces", the given Robot was not currently in a RobotScene and therefore could not be traced.'),new d.AssertionError;return s.innerNewTraces(e,t,n,r,i,a,o)}},{key:"deserialize",value:function(){var e=yr(mr().mark((function e(t,r,i){var a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!==i&&void 0!==i?i:new n(t),void 0===r.robotFiles){e.next=5;break}return e.next=4,this.oldDeserialize(t,r,a);case 4:return e.abrupt("return",e.sent);case 5:u=[],l=s((o=r).robots);try{for(l.s();!(c=l.n()).done;)h=c.value,u.push(vS.deserialize(h))}catch(Fq){l.e(Fq)}finally{l.f()}return e.next=11,Promise.all(u);case 11:f=e.sent,d=[],p=s(o.animationTables);try{for(p.s();!(v=p.n()).done;)m=v.value,d.push(Y_.deserialize(m))}catch(Fq){p.e(Fq)}finally{p.f()}return e.next=17,Promise.all(d);case 17:g=e.sent,y=new Map,b=s(g);try{for(b.s();!(x=b.n()).done;)w=x.value,y.set(w.idValue(),w)}catch(Fq){b.e(Fq)}finally{b.f()}_=new Map,S=s(f);try{for(S.s();!(k=S.n()).done;)M=k.value,_.set(M.id().value(),M)}catch(Fq){S.e(Fq)}finally{S.f()}if(!o.animationManager){e.next=27;break}return e.next=27,nS.deserialize(o.animationManager,_,y,a.animationManager());case 27:T=s(g);try{for(T.s();!(E=T.n()).done;)E.value.id().regen()}catch(Fq){T.e(Fq)}finally{T.f()}C=s(f);try{for(C.s();!(A=C.n()).done;)(R=A.value).id().regen(),a.addChildRobot(R)}catch(Fq){C.e(Fq)}finally{C.f()}a.animationManager().setTime(0),P=s(g);try{for(P.s();!(L=P.n()).done;)O=L.value,dr.addAnimationTable(O)}catch(Fq){P.e(Fq)}finally{P.f()}return e.abrupt("return",a);case 35:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"oldDeserialize",value:function(){var e=yr(mr().mark((function e(t,r,i){var a,o,u,l,c,h,f,d,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O,N,D,I,j,F,z,B,U,V,G,H,W,Z=arguments;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!(Z.length>3&&void 0!==Z[3])||Z[3],o=null!==i&&void 0!==i?i:new n(t),u=[],l=s(r.robotFiles);try{for(l.s();!(c=l.n()).done;)h=c.value,u.push(o.loadRobotFromURL(h))}catch(Fq){l.e(Fq)}finally{l.f()}return e.next=7,Promise.all(u);case 7:f=e.sent,d=0,p=new Map,v=s(zb(f)),e.prev=11,v.s();case 13:if((m=v.n()).done){e.next=71;break}g=br(m.value,2),y=g[0],b=g[1],p.set(b.id().value(),b),x=b.getScaleOffset(),w=b.getPositionOffset(),_=(new db.Euler).setFromQuaternion(b.getQuaternionOffset()),S=b.getScale(),k=b.getPosition(),M=(new db.Euler).setFromQuaternion(b.getQuaternion()),T=r.configsMap[y],E=0;case 24:if(!(E<T)){e.next=61;break}C=d+E,A=r.configs[C],e.t0=E,e.next=0===e.t0?30:1===e.t0?32:2===e.t0?34:3===e.t0?36:4===e.t0?38:5===e.t0?40:6===e.t0?42:7===e.t0?44:8===e.t0?46:9===e.t0?48:10===e.t0?50:11===e.t0?52:12===e.t0?54:56;break;case 30:return x.set(A,A,A),e.abrupt("break",58);case 32:return w.x=A,e.abrupt("break",58);case 34:return w.y=A,e.abrupt("break",58);case 36:return w.z=A,e.abrupt("break",58);case 38:return _.x=A,e.abrupt("break",58);case 40:return _.y=A,e.abrupt("break",58);case 42:return _.z=A,e.abrupt("break",58);case 44:return k.x=A,e.abrupt("break",58);case 46:return k.y=A,e.abrupt("break",58);case 48:return k.z=A,e.abrupt("break",58);case 50:return M.x=A,e.abrupt("break",58);case 52:return M.y=A,e.abrupt("break",58);case 54:return M.z=A,e.abrupt("break",58);case 56:(R=b.joints()[E-12])&&R.setAngle(A);case 58:E++,e.next=24;break;case 61:d+=T,a&&(b._robot.rotation.x=-Math.PI/2),b.setScaleOffset(x),b.setPositionOffset(w),b.setQuaternionOffset((new db.Quaternion).setFromEuler(_)),b.setScale(S),b.setPosition(k),b.setQuaternion((new db.Quaternion).setFromEuler(M));case 69:e.next=13;break;case 71:e.next=76;break;case 73:e.prev=73,e.t1=e.catch(11),v.e(e.t1);case 76:return e.prev=76,v.f(),e.finish(76);case 79:P=[],L=s(r.animationURLs),e.prev=81,N=mr().mark((function e(){var t;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=O.value,P.push(yr(mr().mark((function e(){var n,r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y_.loadFromURL(t);case 2:n=e.sent,r=s(n);try{for(r.s();!(i=r.n()).done;)i.value.fromGazebo=a}catch(Fq){r.e(Fq)}finally{r.f()}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))());case 2:case"end":return e.stop()}}),e)})),L.s();case 84:if((O=L.n()).done){e.next=88;break}return e.delegateYield(N(),"t2",86);case 86:e.next=84;break;case 88:e.next=93;break;case 90:e.prev=90,e.t3=e.catch(81),L.e(e.t3);case 93:return e.prev=93,L.f(),e.finish(93);case 96:return e.next=98,Promise.all(P);case 98:D=e.sent,I=0,j=r.animationMap,F=new qb,z=s(zb(f));try{for(z.s();!(B=z.n()).done;)for(U=br(B.value,2),V=U[0],G=U[1],H=0;H<j[V];H++)(W=D[I++])&&W.length>0&&F.addAnimation(new $b(G,W[0]))}catch(Fq){z.e(Fq)}finally{z.f()}return F.animations().length>0&&(o.animationManager().addActiveAnimation(F),o.animationManager().setTime(0)),e.abrupt("return",o);case 106:case"end":return e.stop()}}),e,null,[[11,73,76,79],[81,90,93,96]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(sS),uR=n(1501),lR=n.n(uR),cR="line",hR="tube",fR="cone",dR=fR,pR=function(){function e(t,n,r,i,a,o,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:dR;(0,u.Z)(this,e),this._parentScene=void 0,this._quaternions=void 0,this._currGeom=void 0,this._currGeomArray=void 0,this._currQuaternionGeom=void 0,this._vectors=void 0,this._currGeom2=void 0,this._currGeomArray2=void 0,this._currQuaternionGeom2=void 0,this._vectors2=void 0,this._positive=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._trace_type=void 0,this._parentRobot=void 0,this._robotPart=void 0,this._times=void 0,this._timespan=void 0,this._timespanIndex=void 0,this._currTime=void 0,this._color=void 0===s?Db():s,this._trace_type=dR,this._timespan=a,this._timespanIndex=[],this._currTime=o,this._positive=!0,this._currGeomArray=[],this._rootGroup=new db.Group,this._currGeom=this.newGeom(void 0,!0),this._rootGroup.add(this._currGeom),this._currQuaternionGeom=this.newSymbolGeom(),this._rootGroup.add(this._currQuaternionGeom),this._currGeomArray2=[],this._currGeom2=this.newGeom(void 0,!1),this._rootGroup.add(this._currGeom2),this._currQuaternionGeom2=this.newSymbolGeom(),this._rootGroup.add(this._currQuaternionGeom2),this._is_visible=!0,this._quaternions=[],this._parentRobot=n,this._robotPart=r,this._times=i,this._opacity=1,this._vectors=[],this._vectors2=[],this._parentScene=new pS(void 0),this.update(t,n,r,i,l,o);var c=new WeakRef(this);n.afterParentSceneSet().subscribe((function(e){var t=br(e,2)[1],n=c.deref();return void 0!==n&&(void 0===t?(n.setParentScene(void 0),!1):(n.updateQuaternions(),!0))})),n.afterpositionOffsetSet().subscribe((function(){var e=c.deref();return void 0!==e&&(e.updateQuaternions(),!0)}))}return(0,l.Z)(e,[{key:"timespanIndex",value:function(){return this._timespanIndex}},{key:"updateTimespan",value:function(e){var t,n;if(2===e.length&&void 0!==this._times){this._timespan=e;var r=0,i=this._times.length-1;if(null!==(t=this._parentRobot.parentScene())&&void 0!==t&&t.isTimeWarping()){var a,o,s,u,l=null===(a=this._parentRobot.parentScene())||void 0===a||null===(o=a.timeWarping())||void 0===o?void 0:o.timeWarpMap(),c=null===(s=this._parentRobot.parentScene())||void 0===s||null===(u=s.timeWarping())||void 0===u?void 0:u.indexMap();if(void 0===l||void 0===c)return;for(var h=0;h<l[1].length;h++)if(l[0][h]>=e[0]){r=c[1][h];break}for(var f=l[1].length-1;f>=0;f--)if(l[0][f]<=e[1]){i=c[1][f];break}}else{for(var d=0;d<this._times.length;d++)if(this._times[d]>=e[0]){r=d;break}for(var p=this._times.length-1;p>=0;p--)if(this._times[p]<=e[1]){i=p;break}}this._timespanIndex=[r,i];for(var v=0;v<this._currGeomArray.length;v++)void 0!==this._currGeomArray[v]&&(this._currGeomArray[v].visible=!(v<r||v>i));for(var m=0;m<this._currGeomArray2.length;m++)void 0!==this._currGeomArray2[m]&&(this._currGeomArray2[m].visible=!(m<r||m>i));null===(n=this.parentScene())||void 0===n||n.render()}}},{key:"updateQuaternions",value:function(){var e=this.robot(),t=e.parentScene();if(!t)return!1;var n,r=this.robotPart();if(r instanceof hS)n=t.frameDataFor(e,this.times(),r,!0).jointRotations;else{if(!(r instanceof fS))throw new Error("Invalid robotPart type");n=t.frameDataFor(e,this.times(),r,!0).linkRotations}return this.setQuaternions(n),this.updateSymbolGeom(this._currTime),!0}},{key:"beforeParentSceneSet",value:function(){return this._parentScene.beforeSet()}},{key:"afterParentSceneSet",value:function(){return this._parentScene.afterSet()}},{key:"robot",value:function(){return this._parentRobot}},{key:"robotPart",value:function(){return this._robotPart}},{key:"times",value:function(){return this._times}},{key:"color",value:function(){return this._color}},{key:"traverseMeshes",value:function(e){this._rootGroup.traverse((function(t){uS(t)&&e(t)}))}},{key:"traverseMaterials",value:function(e){this._rootGroup.traverse((function(t){kb(t.material,e)}))}},{key:"visible",value:function(){return this._is_visible}},{key:"setVisible",value:function(e){e!==this._is_visible&&(this.traverseMeshes((function(t){t.visible=e})),this._is_visible=e,dr.updateUI(),dr.render())}},{key:"opacity",value:function(){return this._opacity}},{key:"setOpacity",value:function(e){var t=this;this._opacity=Ib(e,0,1),this.traverseMaterials((function(e){e.opacity=t._opacity})),dr.updateUI(),dr.render()}},{key:"parentScene",value:function(){return this._parentScene.value()}},{key:"setTraceType",value:function(e){this.update(this._quaternions,this._parentRobot,this._robotPart,this.times(),e)}},{key:"traceType",value:function(){return this._trace_type}},{key:"calCurrQuaternion",value:function(e){var t=this.robot(),n=t.parentScene();if(n){var r=this.robotPart(),i=gR.extraceDataFromframeData(n,t,[e],r).get(r);if(void 0===i)return;return i[0]}}},{key:"newSymbolGeom",value:function(){var e=new db.SphereGeometry(.01),t=new db.MeshBasicMaterial({color:"red"});return new db.Mesh(e,t)}},{key:"updateSymbolGeom",value:function(e){var t,n,r,i=bb(this._times,e),a=this._quaternions[0];if(-1===i)n=wb(a,void 0,!0),r=wb(a,void 0,!1);else{var o=this._quaternions[i],s=this._quaternions[i],u=this._times[i],l=this._times[i];i+1<this._quaternions.length&&(s=this._quaternions[i+1],l=this._times[i+1]),n=wb(a=o.slerp(s,(e-u)/(l-u)),this._vectors[i],!0),r=wb(a,this._vectors2[i],!1)}this._currQuaternionGeom.position.copy(n),this._currQuaternionGeom2.position.copy(r),null===(t=this.parentScene())||void 0===t||t.render(),this._currTime=e}},{key:"newGeom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dR;void 0===e&&(e=[]),0===e.length?e.push(new db.Quaternion,new db.Quaternion):1===e.length&&e.push(e[0].clone());var r,i=[],a=void 0,o=s(e);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=wb(u,a,t);i.push(l),a=l}}catch(Fq){o.e(Fq)}finally{o.f()}t?this._vectors=i:this._vectors2=i;var c=new db.CatmullRomCurve3(i,!1);if(n===cR){var h=(new db.BufferGeometry).setFromPoints(c.getPoints(i.length)),f=new db.LineBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()});return new db.Line(h,f)}if(n===hR){var d=new db.TubeGeometry(c,2*i.length,.005,8,!0),p=new db.MeshBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()});return new db.Mesh(d,p)}if(n===fR){for(var v=new db.Group,m=new db.Matrix4,g=new db.MeshBasicMaterial({color:new db.Color(this._color).convertSRGBToLinear()}),y=[],b=0;b<i.length-1;b++){var x=i[b],w=i[b+1],_=x.distanceTo(w);if(!(0===_||_>=1)){var S=.005,k=_,M=new db.Mesh(new db.ConeGeometry(S,k),g);M.rotateX(Math.PI/2);var T=new db.Group;T.add(M),T.position.copy(x),m.lookAt(w,x,T.up),T.quaternion.setFromRotationMatrix(m);var E=new db.Vector3;E.subVectors(w,x).normalize(),T.position.addScaledVector(E,_/2),v.add(T),y[b]=T}}return t?this._currGeomArray=y:this._currGeomArray2=y,this.updateTimespan(this._timespan),v}throw new Error('Unknown LineTraceType "'.concat(n,'"'))}},{key:"setParentScene",value:function(e){var t=this;e!==this._parentScene.value()&&(this._parentScene.setValue((function(e,n){e&&(e.scene().remove(t._rootGroup),e.render())}),e,(function(e,n){void 0!==n&&(n.scene().add(t._rootGroup),n.render())})),dr.updateUI())}},{key:"quaternions",value:function(){return this._quaternions}},{key:"clonedQuaternions",value:function(){return this._quaternions.map((function(e){return e.clone()}))}},{key:"setQuaternions",value:function(e){this.update(e,this._parentRobot,this._robotPart,this.times(),this._trace_type)}},{key:"flipTrace",value:function(){var e;this._positive?(this._currGeom.visible=!1,this._currQuaternionGeom.visible=!1,this._currGeom2.visible=!0,this._currQuaternionGeom2.visible=!0):(this._currGeom.visible=!0,this._currQuaternionGeom.visible=!0,this._currGeom2.visible=!1,this._currQuaternionGeom2.visible=!1),this._positive=!this._positive,null===(e=this.parentScene())||void 0===e||e.render()}},{key:"update",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dR,a=arguments.length>5?arguments[5]:void 0;this._quaternions=e,this._parentRobot=t,this._robotPart=n,this._times=r;var o=this.newGeom(e,!0,i),s=this.newGeom(e,!1,i);void 0!==a&&this.updateSymbolGeom(a),this._rootGroup.remove(this._currGeom),this._rootGroup.remove(this._currGeom2),this._currGeom=o,this._currGeom2=s,this._positive?(this._currGeom.visible=!0,this._currQuaternionGeom.visible=!0,this._currGeom2.visible=!1,this._currQuaternionGeom2.visible=!1):(this._currGeom.visible=!1,this._currQuaternionGeom.visible=!1,this._currGeom2.visible=!0,this._currQuaternionGeom2.visible=!0),this._rootGroup.add(this._currGeom),this._rootGroup.add(this._currGeom2),this._trace_type=i}},{key:"clone",value:function(){var t,n=[],r=s(this._quaternions);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i.clone())}}catch(Fq){r.e(Fq)}finally{r.f()}var a=new e(n,this._parentRobot,this._robotPart,this.times(),this._timespan,this._currTime,this._color,this._trace_type);return a.setVisible(this._is_visible),a._color=this._color,a}}]),e}(),vR=["rgb(255, 255, 0)","brown","red","#204BD8","purple","green"],mR=0,gR=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this))._id=void 0,i._name=void 0,i._traces=void 0,i._color=void 0,i._colorPalettes=void 0,i._robotSceneManager=void 0,i._update=void 0,i._lineGroup=void 0,i._lineGroupOpacity=void 0,i._lineGroupColor=void 0,i._backgroundColor=void 0,i._worldFrameObject=void 0,i._id=new tx(r),i._color=Db(),i._name="Quat Space "+ ++mR,i._colorPalettes=[].concat(vR),i._update=!1,i._traces=[],i._worldFrameObject=new db.Object3D,i._lineGroup=new db.Group,i._lineGroupOpacity=.1,i._lineGroupColor="#00ff00",i.createInitialSphere(),i.addWorldFrame(),i._backgroundColor="#263238",i._robotSceneManager=e,void 0!==e&&e.addQuaternionSpaceScene((0,c.Z)(i)),i}return(0,l.Z)(n,[{key:"isWorldFrameObjectVisible",value:function(){return this._worldFrameObject.visible}},{key:"setWorldFrameObjectVisibility",value:function(e){this._worldFrameObject.visible=e,this.render()}},{key:"backgroundColor",value:function(){return this._backgroundColor}},{key:"setBackgroundColor",value:function(e){this._backgroundColor=e,this.scene().background=new db.Color(e),this.render()}},{key:"addWorldFrame",value:function(){var e=new db.AxesHelper(1);return this._worldFrameObject=e,this.scene().add(e),this.render(),e}},{key:"getAllTraces",value:function(){return pr(this._traces)}},{key:"removeAllTraces",value:function(){var e,t=s(pr(this._traces));try{for(t.s();!(e=t.n()).done;){var n=e.value;this.removeChildTrace(n.robot(),n.robotPart())}}catch(Fq){t.e(Fq)}finally{t.f()}}},{key:"robotSceneManager",value:function(){return this._robotSceneManager}},{key:"hasChildTrace",value:function(e,t){return void 0!==this.getChildTrace(e,t)}},{key:"innerNewTraces",value:function(e,t,r,i,a){var o=this.robotSceneManager();if(void 0===o)return[];var u,l=n.extraceDataFromframeData(e,t,r,i),c=[],h=s(l);try{for(h.s();!(u=h.n()).done;){var f=br(u.value,2),d=f[0],p=(f[1],l.get(d));if(void 0!==p){var v=[o.currStartTime(),o.currEndTime()];c.push(new pR(p,t,d,r,v,o.currTime(),void 0===a?this.getNextColor():a))}}}catch(Fq){h.e(Fq)}finally{h.f()}return c}},{key:"getChildTrace",value:function(e,t){var n,r=s(this._traces);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.robot()===e&&i.robotPart()===t)return i}}catch(Fq){r.e(Fq)}finally{r.f()}}},{key:"addChildTrace",value:function(e,t,n,r){var i,a=s(this.innerNewTraces(e,t,n,r));try{for(a.s();!(i=a.n()).done;){var o=i.value,u=this.getChildTrace(t,o.robotPart());void 0===u?(o.setParentScene(this),this._traces.push(o)):u.update(o.quaternions().map((function(e){return e.clone()})),t,o.robotPart(),n,o.traceType())}}catch(Fq){a.e(Fq)}finally{a.f()}void 0!==r?r.addToScene():t.addToScene(),this._update=!0}},{key:"updateTraces",value:function(){var e=this.robotSceneManager();if(void 0!==e){var t,n=[e.currStartTime(),e.currEndTime()],r=s(this.getAllTraces());try{for(r.s();!(t=r.n()).done;){t.value.updateTimespan(n)}}catch(Fq){r.e(Fq)}finally{r.f()}}}},{key:"updateTraceSymbols",value:function(){var e=this.robotSceneManager();if(void 0!==e){var t,n=s(this.getAllTraces());try{for(n.s();!(t=n.n()).done;){t.value.updateSymbolGeom(e.currTime())}}catch(Fq){n.e(Fq)}finally{n.f()}}}},{key:"createInitialSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=16,r=20,i=new db.SphereGeometry(e,r,n),a=new db.MeshStandardMaterial({transparent:!0,opacity:t}),o=new db.Mesh(i,a);o.rotation.x=Math.PI/2,this.scene().add(o);for(var s=new db.LineBasicMaterial({color:65280,transparent:!0,opacity:this._lineGroupOpacity,side:db.DoubleSide}),u=new db.Group,l=1;l<n;l++){for(var c=Math.PI/n*l-Math.PI/2,h=[],f=0;f<=r;f++){var d=2*Math.PI/r*f-Math.PI,p=new db.Vector3(Math.cos(c)*Math.cos(d),Math.cos(c)*Math.sin(d),Math.sin(c)).multiplyScalar(e);h.push(p)}var v=(new db.BufferGeometry).setFromPoints(h),m=new db.Line(v,s);u.add(m)}for(var g=0;g<=r;g++){for(var y=2*Math.PI/r*g-Math.PI,b=[],x=0;x<=n;x++){var w=Math.PI/n*x-Math.PI/2,_=new db.Vector3(Math.cos(w)*Math.cos(y),Math.cos(w)*Math.sin(y),Math.sin(w)).multiplyScalar(e);b.push(_)}var S=(new db.BufferGeometry).setFromPoints(b),k=new db.Line(S,s);u.add(k)}this._lineGroup=u,this.scene().add(u)}},{key:"setLineGroupOpacity",value:function(e){this._lineGroupOpacity=e,this._lineGroup.traverse((function(t){t instanceof db.Line&&t.material&&(t.material.opacity=e,t.material.transparent=!0)})),this.render()}},{key:"lineGroupOpacity",value:function(){return this._lineGroupOpacity}},{key:"setLineGroupColor",value:function(e){this._lineGroupColor=e,this._lineGroup.traverse((function(t){t instanceof db.Line&&t.material&&(t.material.color=new db.Color(e))})),this.render()}},{key:"lineGroupColor",value:function(){return this._lineGroupColor}},{key:"getNextColor",value:function(){return this._colorPalettes.pop()}},{key:"addColorBack",value:function(e){-1!==vR.indexOf(e)&&this._colorPalettes.push(e)}},{key:"removeChildTrace",value:function(e,t){var n=!1;if(void 0===t){var r,i=s(this._traces);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.robot()===e){var o=this._traces.indexOf(a);o>-1&&(this._traces.splice(o,1),a.setParentScene(void 0)),n=!0,this.addColorBack(a.color())}}}catch(Fq){i.e(Fq)}finally{i.f()}e.removeFromScene()}else{var u,l=s(this._traces);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.robot()===e&&c.robotPart()===t){var h=this._traces.indexOf(c);h>-1&&(this._traces.splice(h,1),c.setParentScene(void 0)),n=!0,this.addColorBack(c.color())}}}catch(Fq){l.e(Fq)}finally{l.f()}t.removeFromScene()}return!!n&&(this._update=!0,dr.updateUI(),this.render(),!0)}},{key:"id",value:function(){return this._id}},{key:"update",value:function(){return this._update}},{key:"setUpdate",value:function(e){this._update=e}},{key:"color",value:function(){return this._color}},{key:"setColor",value:function(e){this._color=e,this.render()}},{key:"scene",value:function(){return this._scene}}],[{key:"possibleTraces",value:function(e){var t=[];t.push(void 0);var n,r=s(e.joints());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i)}}catch(Fq){r.e(Fq)}finally{r.f()}var a,o=s(e.links());try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(u)}}catch(Fq){o.e(Fq)}finally{o.f()}return t}},{key:"extraceDataFromframeData",value:function(e,t,n,r){var i=new Map;if(void 0===r)i.set(r,e.frameDataFor(t,n,r,!0).robotRotations);else if(r instanceof hS)i.set(r,e.frameDataFor(t,n,r,!0).jointRotations);else{if(!(r instanceof fS))throw new d.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});i.set(r,e.frameDataFor(t,n,r,!0).linkRotations)}return i}}]),n}(sS),yR=["white","yellow","red","#204BD8","green","brown","purple"],bR=function(){function e(t,n,r,i,a,o,s,l,c,h,f){(0,u.Z)(this,e),this._id=void 0,this._name=void 0,this._line_names=void 0,this._line_ids=void 0,this._line_colors=void 0,this._delete_line=void 0,this._isDiff=void 0,this._isTimeWarp=void 0,this._currProperty=void 0,this._colorPalettes=void 0,this._lineWidth=void 0,this._backgroundColor=void 0,this._axisColor=void 0,this._filter=void 0,this._id=t,this._line_colors=[],this._line_names=[],this._line_ids=[],this._currProperty="&placeholder&joint position",this._lineWidth=1,this._backgroundColor="#171819",this._axisColor="#B7B7BD",this._filter=0,void 0!==c&&(this._lineWidth=c),void 0!==o&&(this._line_colors=o),void 0!=i&&(this._line_names=i),void 0!=a&&(this._line_ids=a),void 0!==l&&(this._currProperty=l),void 0!==h&&(this._backgroundColor=h),void 0!==f&&(this._axisColor=f),this._delete_line=s,this._isDiff=n,this._isTimeWarp=r,this._name="Graph"+e.counter,n?this._name="Difference "+this._name:r&&(this._name="Time Warped "+this._name),this._colorPalettes=[].concat(yR),e.counter++}return(0,l.Z)(e,[{key:"filter",value:function(){return this._filter}},{key:"setFilter",value:function(e){this._filter=e}},{key:"backgroundColor",value:function(){return this._backgroundColor}},{key:"setBackgroundColor",value:function(e){this._backgroundColor=e}},{key:"axisColor",value:function(){return this._axisColor}},{key:"setAxisColor",value:function(e){this._axisColor=e}},{key:"getColor",value:function(){var t=this._colorPalettes.pop();return void 0===t?e.genRandColor():t}},{key:"addColorBack",value:function(e){-1!==yR.indexOf(e)&&this._colorPalettes.push(e)}},{key:"resetColor",value:function(){this._colorPalettes=[].concat(yR)}},{key:"name",value:function(){return this._name}},{key:"setName",value:function(e){this._name=e}},{key:"id",value:function(){return this._id}},{key:"setLineNames",value:function(e){this._line_names=e}},{key:"lineNames",value:function(){return this._line_names}},{key:"setLineIds",value:function(e){this._line_ids=e}},{key:"lineIds",value:function(){return this._line_ids}},{key:"setLineColors",value:function(e){this._line_colors=e}},{key:"lineColors",value:function(){return this._line_colors}},{key:"setDeleteLine",value:function(e,t){this._delete_line=e,void 0!==t&&this.addColorBack(t)}},{key:"deleteLine",value:function(){return this._delete_line}},{key:"isDiff",value:function(){return this._isDiff}},{key:"isTimeWarp",value:function(){return this._isTimeWarp}},{key:"currProperty",value:function(){return this._currProperty}},{key:"setCurrProperty",value:function(e){this._currProperty=e}},{key:"setLineWidth",value:function(e){this._lineWidth=e}},{key:"lineWidth",value:function(){return this._lineWidth}}],[{key:"genRandColor",value:function(){return"hsl("+(310*Math.random()+30)+", "+(40*Math.random()+60)+"%, "+(50*Math.random()+50)+"%)"}}]),e}();bR.counter=0;var xR=["white","yellow","red","#204BD8","green","brown","purple"],wR=function(){function e(t,n,r,i,a,o,s,l){(0,u.Z)(this,e),this._id=void 0,this._name=void 0,this._line_names=void 0,this._line_ids=void 0,this._line_colors=void 0,this._colorPalettes=void 0,this._delete_line=void 0,this._lineWidth=void 0,this._backgroundColor=void 0,this._axisColor=void 0,this._nNeighbors=void 0,this._minDis=void 0,this._spread=void 0,this._id=t,this._line_colors=[],this._line_names=[],this._line_ids=[],void 0!==i&&(this._line_colors=i),void 0!=n&&(this._line_names=n),void 0!=r&&(this._line_ids=r),this._name="Umap Graph"+e.counter,this._delete_line=a,this._lineWidth=1,this._backgroundColor="#171819",this._axisColor="#B7B7BD",void 0!==s&&(this._backgroundColor=s),void 0!==l&&(this._axisColor=l),void 0!==o&&(this._lineWidth=o),this._colorPalettes=[].concat(xR),e.counter++,this._nNeighbors=30,this._minDis=.1,this._spread=.1}return(0,l.Z)(e,[{key:"nNeighbors",value:function(){return this._nNeighbors}},{key:"setNNeighbors",value:function(e){this._nNeighbors=e}},{key:"minDis",value:function(){return this._minDis}},{key:"setMinDis",value:function(e){this._minDis=e}},{key:"spread",value:function(){return this._spread}},{key:"setSpread",value:function(e){this._spread=e}},{key:"backgroundColor",value:function(){return this._backgroundColor}},{key:"setBackgroundColor",value:function(e){this._backgroundColor=e}},{key:"axisColor",value:function(){return this._axisColor}},{key:"setAxisColor",value:function(e){this._axisColor=e}},{key:"setLineWidth",value:function(e){this._lineWidth=e}},{key:"lineWidth",value:function(){return this._lineWidth}},{key:"setDeleteLine",value:function(e,t){this._delete_line=e,void 0!==t&&this.addColorBack(t)}},{key:"deleteLine",value:function(){return this._delete_line}},{key:"getColor",value:function(){var e=this._colorPalettes.pop();return void 0===e?bR.genRandColor():e}},{key:"addColorBack",value:function(e){-1!==xR.indexOf(e)&&this._colorPalettes.push(e)}},{key:"resetColor",value:function(){this._colorPalettes=[].concat(xR)}},{key:"name",value:function(){return this._name}},{key:"setName",value:function(e){this._name=e}},{key:"id",value:function(){return this._id}},{key:"setLineNames",value:function(e){this._line_names=e}},{key:"lineNames",value:function(){return this._line_names}},{key:"setLineIds",value:function(e){this._line_ids=e}},{key:"lineIds",value:function(){return this._line_ids}},{key:"setLineColors",value:function(e){this._line_colors=e}},{key:"lineColors",value:function(){return this._line_colors}}]),e}();function _R(e,t){var n,r=s(Bb(e,t));try{for(r.s();!(n=r.n()).done;){var i=br(n.value,2);if(i[0]!==i[1])return!1}}catch(Fq){r.e(Fq)}finally{r.f()}return!0}wR.counter=0;var SR=lR().scale([lR()(255,0,255),lR()(255,0,0),lR()(255,255,0),lR()(0,255,0),lR()(0,255,255),lR()(0,0,255)]).mode("rgb"),kR=function(){function e(){var t=this;(0,u.Z)(this,e),this._masterRobots=void 0,this._activeScenes=void 0,this._currScene=void 0,this._availableScenes=void 0,this._isSorted=void 0,this._animationTables=void 0,this._allowSelections=void 0,this._animationLoop=void 0,this._controlledScenes=void 0,this._syncViews=void 0,this._syncViewCallbacks=void 0,this._currSyncView=void 0,this._currTimeWarpBase=void 0,this._quaternionSpaceScenes=void 0,this._currQuaternionSpaceScene=void 0,this._umapGraphs=void 0,this._currUmapGraph=void 0,this._graphs=void 0,this._currSelectedGraph=void 0,this._restoreCallBack=void 0,this._jointMotions=void 0,this._tfs=void 0,this.currTimeWarpBase=function(){return t._currTimeWarpBase},this._masterRobots=[],this._animationTables=[],this._availableScenes=[],this._activeScenes=[],this._isSorted=!1,this._allowSelections=!0,this._quaternionSpaceScenes=new Map,this._umapGraphs=new Map,this._graphs=new Map,this._jointMotions=new Map,this._tfs=new Map,this._controlledScenes=[],this._animationLoop=new Jb(cr,0,1,(function(e){var n,r=new Set,i=s(t._activeScenes);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.add(a)}}catch(Fq){i.e(Fq)}finally{i.f()}var o,u=s(t._controlledScenes);try{for(u.s();!(o=u.n()).done;){var l=o.value;r.add(l)}}catch(Fq){u.e(Fq)}finally{u.f()}var c,h=s(r);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=f.timeWarping();void 0!==d&&(e=d.timeWarp(e)),f.animationManager().setTime(e)}}catch(Fq){h.e(Fq)}finally{h.f()}t.updateAllTraceSymbols(),dr.updateUI(),dr.render()})),this._syncViews=!1;var n=new db.Camera;n.position.set(3,3,3),n.lookAt(0,0,0),this._currSyncView=[n.position.clone(),(new db.Quaternion).setFromEuler(n.rotation)],this._syncViewCallbacks=[]}return(0,l.Z)(e,[{key:"setRestoreCallBack",value:function(e){this._restoreCallBack=e}},{key:"addJointMotion",value:function(e){this._jointMotions.set(e.id,e)}},{key:"removeJointMotion",value:function(e){this._jointMotions.delete(e)}},{key:"getJointMotionById",value:function(e){return this._jointMotions.get(e)}},{key:"getAllJointMotions",value:function(){return this._jointMotions}},{key:"addTF",value:function(e){this._tfs.set(e.id,e)}},{key:"removeTF",value:function(e){this._tfs.delete(e)}},{key:"getTFById",value:function(e){return this._tfs.get(e)}},{key:"getAllTFs",value:function(){return this._tfs}},{key:"hasGraph",value:function(e){return this._graphs.has(e)}},{key:"addGraph",value:function(e){this._graphs.set(e.id(),e)}},{key:"removeGraph",value:function(e){this._graphs.delete(e)}},{key:"getGraphById",value:function(e){return this._graphs.get(e)}},{key:"getAllGraphs",value:function(){var e,t=[],n=s(this._graphs);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2)[1];t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"getCurrGraph",value:function(){return this._currSelectedGraph}},{key:"setCurrGraph",value:function(e){void 0!==e?this.hasGraph(e)&&(this._currSelectedGraph=this._graphs.get(e)):this._currSelectedGraph=void 0}},{key:"hasUmapGraph",value:function(e){return this._umapGraphs.has(e)}},{key:"addUmapGraph",value:function(e){this._umapGraphs.set(e.id(),e)}},{key:"removeUmapGraph",value:function(e){this._umapGraphs.delete(e)}},{key:"getUmapGraphById",value:function(e){return this._umapGraphs.get(e)}},{key:"getAllUmapGraphs",value:function(){var e,t=[],n=s(this._umapGraphs);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2)[1];t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"getCurrUmapGraph",value:function(){return this._currUmapGraph}},{key:"setCurrUmapGraph",value:function(e){void 0!==e?this.hasUmapGraph(e)&&(this._currUmapGraph=this._umapGraphs.get(e)):this._currUmapGraph=void 0}},{key:"hasQuaternionSpaceScene",value:function(e){return this._quaternionSpaceScenes.has(e)}},{key:"addQuaternionSpaceScene",value:function(e){this._quaternionSpaceScenes.set(e.id().value(),e)}},{key:"removeQuaternionSpaceScene",value:function(e){var t=this.getQuaternionSpaceSceneById(e);void 0!==t&&(this._quaternionSpaceScenes.delete(t.id().value()),t.removeAllTraces())}},{key:"allQuaternionSpaceScenes",value:function(){var e,t=[],n=s(this._quaternionSpaceScenes);try{for(n.s();!(e=n.n()).done;){var r=br(e.value,2)[1];t.push(r)}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"setCurrQuaternionSpaceScene",value:function(e){void 0!==e?this.hasQuaternionSpaceScene(e)&&(this._currQuaternionSpaceScene=this._quaternionSpaceScenes.get(e)):this._currQuaternionSpaceScene=void 0}},{key:"getCurrQuaternionSpaceScene",value:function(){return this._currQuaternionSpaceScene}},{key:"getQuaternionSpaceSceneById",value:function(e){return this._quaternionSpaceScenes.get(e)}},{key:"setShouldSyncViews",value:function(e){this._syncViews=e,e&&this.updateCamViewpoint(this._currSyncView),dr.updateUI()}},{key:"shouldSyncViews",value:function(){return this._syncViews}},{key:"addSyncViewCallback",value:function(e){this._syncViewCallbacks.push(e)}},{key:"removeSyncViewCallback",value:function(e){var t=this._syncViewCallbacks.indexOf(e);return t>-1&&(this._syncViewCallbacks.splice(t,1),!0)}},{key:"currSyncViewpoint",value:function(){return this._currSyncView}},{key:"setCurrSyncViewpoint",value:function(e){var t=br(e,2),n=t[0],r=t[1],i=br(this._currSyncView,2),a=i[0],o=i[1];!0===n.equals(a)&&!0===r.equals(o)||(!0===this._syncViews&&this.updateCamViewpoint(e),this._currSyncView=e)}},{key:"updateCamViewpoint",value:function(e){var t,n=s(this._syncViewCallbacks);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(Fq){n.e(Fq)}finally{n.f()}}},{key:"setTimeWarpBase",value:function(e){var t=this;if(this._currTimeWarpBase!==e){var n=function(){var e,n=s(t.allManagedRobotScenes());try{for(n.s();!(e=n.n()).done;){e.value.setTimeWarping(void 0)}}catch(Fq){n.e(Fq)}finally{n.f()}t._currTimeWarpBase=void 0},r=function(){n(),dr.updateUI(),dr.render()};if(void 0!==e){p()(this.hasManagedRobotScene(e),"You can not set the RobotSceneManager to use a scene that it does not own "+"as its timewarp base. Scene: ".concat(e));var i=this.startTime(),a=this.endTime(),o=30*Math.abs(a-i),u=sR.frameRange(i,a,30,o),l=new Map,c=new Set(Gb(e.robots(),(function(e){return e.name()}))),h=e.frameData(u,(function(e){return c.has(e)}),(function(e,t){return 1===Hb(e.links(),t,(function(e){return e.name()}))}),(function(e,t){return 1===Hb(e.joints(),t,(function(e){return e.name()}))}),(function(e,t){return 1===Hb(e.articuatedJoints(),t,(function(e){return e.name()}))}));if(!0!==h.keys().next().done){var f,v=s(h.entries());try{for(v.s();!(f=v.n()).done;){var m,g=br(f.value,2),y=g[0],b=g[1],x=new Map,w=new Map,_=s(b.positions);try{for(_.s();!(m=_.n()).done;){var S=br(m.value,2),k=S[0],M=S[1];if(void 0===k)x.set(k,[k,M]);else if(k instanceof hS)x.set(k.name(),[k,M]);else{if(!(k instanceof fS))throw new d.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});x.set(k.name(),[k,M])}}}catch(Fq){_.e(Fq)}finally{_.f()}var T,E=s(b.jointAngles);try{for(E.s();!(T=E.n()).done;){var C=br(T.value,2),A=C[0],R=C[1];w.set(A.name(),[A,R])}}catch(Fq){E.e(Fq)}finally{E.f()}l.set(y.name(),[y,{times:b.times,positions:x,jointAngles:w}])}}catch(Fq){v.e(Fq)}finally{v.f()}n();var P,L=s(this.allManagedRobotScenes());try{var O=function(){var t,n=P.value;if(n===e)return"continue";var r=new Set(Gb(n.robots(),(function(e){return e.name()})));if(t=n.frameData(u,(function(e){return e.includePosInTimeWarpConsideration()&&l.has(e.name())&&r.has(e)}),(function(e,t){return t.includePosInTimeWarpConsideration()&&l.has(e.name())&&r.has(e)&&1===Hb(e.links(),t,(function(e){return e.name()}))}),(function(e,t){return t.includePosInTimeWarpConsideration()&&l.has(e.name())&&r.has(e)&&1===Hb(e.joints(),t,(function(e){return e.name()}))}),(function(e,t){return t.includeAngleInTimeWarpConsideration()&&l.has(e.name())&&r.has(e)&&1===Hb(e.articuatedJoints(),t,(function(e){return e.name()}))})),!0===t.keys().next().done)return"continue";var i,a=[],o=s(t);try{for(o.s();!(i=o.n()).done;){var c=br(i.value,2),h=c[0],f=c[1],d=l.get(h.name());if(void 0!==d){var p,v=s(f.positions);try{for(v.s();!(p=v.n()).done;){var m=br(p.value,2),g=m[0],y=m[1],b=d[1].positions.get(void 0===g?void 0:g.name());if(void 0!==b){var x=b[1];a.push([x,y])}}}catch(Fq){v.e(Fq)}finally{v.f()}var w,_=s(f.jointAngles);try{for(_.s();!(w=_.n()).done;){var S=br(w.value,2),k=S[0],M=S[1],T=d[1].jointAngles.get(k.name());if(void 0!==T){var E=T[1];a.push([E,M])}}}catch(Fq){_.e(Fq)}finally{_.f()}}}}catch(Fq){o.e(Fq)}finally{o.f()}var C=new ok(u,u,(function(e,t,n,r){for(var i=0,o=0,s=a;o<s.length;o++){var u=br(s[o],2),l=u[0],c=u[1],h=l[n],f=c[r];i+="number"===typeof h&&"number"===typeof f?Math.abs(h-f):h.distanceTo(f)}return i}));n.setTimeWarping(C)};for(L.s();!(P=L.n()).done;)O()}catch(Fq){L.e(Fq)}finally{L.f()}this._currTimeWarpBase=e,dr.updateUI(),dr.render()}else r()}else r()}}},{key:"addControlledRobotScene",value:function(e){this._controlledScenes.push(e),e.animationManager().setTime(this.currTime()),dr.updateUI()}},{key:"removeControlledRobotScene",value:function(e){var t=this._controlledScenes.indexOf(e);t>-1&&this._controlledScenes.splice(t,1)}},{key:"setAllowRobotSelection",value:function(e){this._allowSelections=e}},{key:"allowRobotSelection",value:function(){return this._allowSelections}},{key:"startAnimations",value:function(){this.currTime()>=this.currEndTime()&&this.setCurrTime(this.currStartTime()),this._animationLoop.start()}},{key:"pauseAnimations",value:function(){this._animationLoop.stop()}},{key:"restartAnimations",value:function(){this._animationLoop.restart()}},{key:"currTimeRange",value:function(){return[this.currStartTime(),this.currTime(),this.currEndTime()]}},{key:"absoluteTimeRange",value:function(){return[this.startTime(),this.currTime(),this.endTime()]}},{key:"timeRange",value:function(){return[this.startTime(),this.currStartTime(),this.currTime(),this.currEndTime(),this.endTime()]}},{key:"startTime",value:function(){var e=1/0,t=function(t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value.animationManager();e=Math.min(i.startTime(),e)}}catch(Fq){r.e(Fq)}finally{r.f()}};return t(this._activeScenes),t(this._controlledScenes),e===1/0?0:e}},{key:"currStartTime",value:function(){return this._animationLoop.startTime()}},{key:"setCurrStartTime",value:function(e){e=Ib(e,this.startTime(),this.endTime()),this._animationLoop.setStartTime(e),this.updateAllTraces()}},{key:"setCurrTime",value:function(e){e=Ib(e,this.startTime(),this.endTime()),this._animationLoop.setTime(e)}},{key:"currTime",value:function(){return this._animationLoop.time()}},{key:"currEndTime",value:function(){return this._animationLoop.endTime()}},{key:"setCurrEndTime",value:function(e){e=Ib(e,this.startTime(),this.endTime()),this._animationLoop.setEndTime(e),this.updateAllTraces()}},{key:"endTime",value:function(){var e=-1/0,t=function(t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value.animationManager();e=Math.max(i.endTime(),e)}}catch(Fq){r.e(Fq)}finally{r.f()}};return t(this._activeScenes),t(this._controlledScenes),e===-1/0?1:e}},{key:"updateAllTraces",value:function(){var e,t=s(this.allManagedRobotScenes());try{for(t.s();!(e=t.n()).done;){e.value.updateTraces()}}catch(Fq){t.e(Fq)}finally{t.f()}var n,r=s(this.allQuaternionSpaceScenes());try{for(r.s();!(n=r.n()).done;){n.value.updateTraces()}}catch(Fq){r.e(Fq)}finally{r.f()}}},{key:"updateAllTraceSymbols",value:function(){var e,t=s(this.allQuaternionSpaceScenes());try{for(t.s();!(e=t.n()).done;){e.value.updateTraceSymbols()}}catch(Fq){t.e(Fq)}finally{t.f()}}},{key:"robotSceneById",value:function(e){var t,n=s(this._availableScenes);try{for(n.s();!(t=n.n()).done;){var r=br(t.value,2)[1];if(r.id().value()===e)return r}}catch(Fq){n.e(Fq)}finally{n.f()}}},{key:"currRobotScene",value:function(e){if(!0===e||void 0===e)return this._currScene;if(this._currScene)return this._currScene;var t=this.addDefaultManagedRobotScene();return this.setCurrRobotScene(t),t}},{key:"setCurrRobotScene",value:function(e){this._currScene=e,dr.updateUI()}},{key:"masterRobots",value:function(){return this._masterRobots}},{key:"addMasterRobot",value:function(e){-1===this._masterRobots.indexOf(e)&&(this._masterRobots.push(e),dr.updateUI())}},{key:"removeMasterRobot",value:function(e){var t=this._masterRobots.indexOf(e);t>-1&&(this._masterRobots.splice(t,1),dr.updateUI())}},{key:"sortScenes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this._isSorted){this._availableScenes.sort((function(e,t){return e[0].join("").localeCompare(t[0].join(""))}));var t,n=SR.colors(this._availableScenes.length),r=s(zb(this._availableScenes));try{for(r.s();!(t=r.n()).done;){var i=br(t.value,2),a=i[0],o=br(i[1],2),u=o[1];u.setColor(n[a])}}catch(Fq){r.e(Fq)}finally{r.f()}this._isSorted=!0}}},{key:"animationTables",value:function(){return this._animationTables}},{key:"addAnimationTable",value:function(e){-1===this._animationTables.indexOf(e)&&(this._animationTables.push(e),dr.updateUI())}},{key:"removeAnimationTable",value:function(e){var t=this._animationTables.indexOf(e);t>-1&&(this._animationTables.splice(t,1),dr.updateUI())}},{key:"removeRobotScene",value:function(e){for(var t=-1,n=0;n<this._availableScenes.length;){if(br(this._availableScenes[n],2)[1]===e){t=n;break}n+=1}if(!(t<=-1)){var r=br(this._availableScenes.splice(t,1)[0],2)[1];if(r&&this.isActiveRobotScene(r)){for(var i=!0;i;)i=void 0!==this.deactivateRobotScene(r);return r.setParentRobotSceneManager(void 0),r}this._availableScenes.length>0&&(t-1>=0?this.setCurrRobotScene(this._availableScenes[t-1][1]):this.setCurrRobotScene(this._availableScenes[t][1])),e===this._currTimeWarpBase&&this.setTimeWarpBase(void 0),dr.updateUI()}}},{key:"addManagedRobotScenes",value:function(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value;this._availableScenes.push([i.path,i.robotScene,null!==(r=i.metrics)&&void 0!==r?r:new Map]),this._isSorted=!1,i.robotScene.animationManager().setTime(this.currTime()),dr.updateUI()}}catch(Fq){n.e(Fq)}finally{n.f()}dr.recalculateTimeWarping()}},{key:"getManagedRobotSceneData",value:function(e){var t=this._availableScenes.filter((function(t){return br(t,2)[1]===e}))[0];if(t){var n=br(t,3);return{path:n[0],robotScene:n[1],metrics:n[2]}}}},{key:"addDefaultManagedRobotScene",value:function(){var e=new sR(this);return this.addManagedRobotScenes([{path:[],robotScene:e}]),e}},{key:"allManagedRobotScenes",value:function(){return this._availableScenes.map((function(e){return br(e,2)[1]}))}},{key:"hasManagedRobotScene",value:function(e){var t,n=-1,r=s(zb(this._availableScenes));try{for(r.s();!(t=r.n()).done;){var i=br(t.value,2),a=i[0];if(br(i[1],2)[1]===e){n=a;break}}}catch(Fq){r.e(Fq)}finally{r.f()}return n>-1}},{key:"isActiveRobotScene",value:function(e){return this._activeScenes.indexOf(e)>-1}},{key:"activeRobotScenes",value:function(){return this._activeScenes}},{key:"activateRobotScene",value:function(e){if(Array.isArray(e)){var t,n=s(this._availableScenes);try{for(n.s();!(t=n.n()).done;){var r=br(t.value,2),i=r[0],a=r[1];if(_R(i,e))return this._activeScenes.push(a),this.setCurrEndTime(this.endTime()),void dr.updateUI()}}catch(Fq){n.e(Fq)}finally{n.f()}throw Error("RobotScene under path ".concat(e," could not be found and switched to by the RobotSceneManager."))}var o,u=s(this._availableScenes);try{for(u.s();!(o=u.n()).done;){var l=br(o.value,2)[1];if(l===e)return this._activeScenes.push(l),this.setCurrEndTime(this.endTime()),void dr.updateUI()}}catch(Fq){u.e(Fq)}finally{u.f()}throw Error("RobotScene could not be found and switched to by the RobotSceneManager.")}},{key:"deactivateRobotScene",value:function(e){if(Array.isArray(e)){var t,n=s(zb(this._availableScenes));try{for(n.s();!(t=n.n()).done;){var r=br(t.value,2),i=r[0];if(_R(br(r[1],2)[0],e)){var a=this._availableScenes.splice(i,1)[0][1];return dr.updateUI(),a}}}catch(Fq){n.e(Fq)}finally{n.f()}}else{var o=this._activeScenes.indexOf(e);if(o>-1){var u=this._activeScenes.splice(o,1)[0];return dr.updateUI(),u}}}},{key:"loadSessionFromURL",value:function(){var e=yr(mr().mark((function e(t,n){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dr.setPopupHelpPage({page:qn.LoadingStarted,location:t,type:"workspace"}),e.prev=1,e.next=4,fetch(t,{method:"GET"});case 4:return r=e.sent,e.t0=this,e.next=8,r.json();case 8:return e.t1=e.sent,e.t2=n,e.next=12,e.t0.loadSession.call(e.t0,e.t1,e.t2);case 12:dr.setPopupHelpPage({page:qn.LoadingSuccess,location:t,type:"workspace"}),e.next=19;break;case 15:throw e.prev=15,e.t3=e.catch(1),dr.setPopupHelpPage({page:qn.LoadingFailed,location:t,type:"workspace"}),e.t3;case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"content",value:mr().mark((function e(){var t,n,r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sortScenes(),t=s(this._availableScenes),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=10;break}return r=n.value,e.next=8,pr(r);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))},{key:"saveSession",value:function(){var e,t=new Map,n=new Map,r=[],i=new Map,a=new Map,o=[],u=[],l=new Map,c=s(this.content());try{for(c.s();!(e=c.n()).done;){var h,f=br(e.value,3),d=f[0],p=f[1],v=f[2],m=p.robots(),g=[],y=[],b=[],x=s(m);try{for(x.s();!(h=x.n()).done;){var w=h.value,_=w.idValue(),S=w.url(),k=w.name();if("World Frame"!==k){var M=[];if(l.set(_,M),void 0!==S){var T=t.get(S);if(void 0===T&&(T=n.get(_)),void 0===T){void 0!==S&&t.set(S,w),n.set(_,w);var E=void 0;E="urdf"===w.objectType()?"urdf":"AxesHelper"!==w.url()?"gltf":"AxesHelper",r.push({type:E,id:_,url:S,name:k})}else{_=T.idValue();var C=T.url();void 0!==C&&(S=C)}var A,R=[],P=s(w.getArticuatedJointMap().entries());try{for(P.s();!(A=P.n()).done;){var L=br(A.value,2),O=L[0],N=L[1];R.push({name:O,angle:N.angle()})}}catch(Fq){P.e(Fq)}finally{P.f()}g.push({objectID:_,robotID:w.id().value(),isviewpoint:!1,animationID:M,name:w.name(),position:K_(w.getPosition()),rotation:Q_(w.getQuaternion()),scale:K_(w.getScale()),joints:R,positionOffset:K_(w.getPositionOffset()),rotationOffset:Q_(w.getQuaternionOffset()),scaleOffset:K_(w.getScaleOffset())})}else dr.error('Cannot save robot with name "'.concat(w.name(),'" because it does not come from a URL'))}}}catch(Fq){x.e(Fq)}finally{x.f()}var D,I=s(p.animationManager().animationGroups());try{for(I.s();!(D=I.n()).done;){var j,F=s(D.value.animations());try{for(F.s();!(j=F.n()).done;){var z=j.value,B=z.animationTable(),U=B.idValue(),V=B.url(),G=a.get(U);if(void 0===G&&void 0!==V&&(G=i.get(V)),void 0===G){a.set(B.idValue(),B);var H=B.url();void 0!==H&&(i.set(H,B),V=H),o.push({name:B.name(),id:U,timeUnit:"second",url:V,content:B.toCSV()})}else U=G.idValue();var W=l.get(z.objectAnimating().idValue());void 0!==W?W.push(U):dr.error("Could not save an AnimationTable because the object it animates could not be saved previously.")}}catch(Fq){F.e(Fq)}finally{F.f()}}}catch(Fq){I.e(Fq)}finally{I.f()}var Z,$=s(p.getAllTraces());try{for($.s();!(Z=$.n()).done;){var q,X,Y=Z.value,K=null===(q=Y.robotPart())||void 0===q?void 0:q.name(),J=null===(X=Y.robot().parentScene())||void 0===X?void 0:X.id().value(),Q=p.id().value();void 0!==J&&void 0!==Q&&(void 0===K&&(K=""),null===y||void 0===y||y.push({robotId:Y.robot().idValue(),robotPartName:K,parentSceneId:J,currSceneId:Q,originalId:Y.id()}))}}catch(Fq){$.e(Fq)}finally{$.f()}var ee,te=s(p.getAllArrows());try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;null===b||void 0===b||b.push({traceFromId:ne.traceFrom().id(),traceToId:ne.traceTo().id(),parentSceneId:p.id().value()})}}catch(Fq){te.e(Fq)}finally{te.f()}var re,ie={},ae=s(v.entries());try{for(ae.s();!(re=ae.n()).done;){var oe=br(re.value,2),se=oe[0],ue=oe[1];ie[se]=ue}}catch(Fq){ae.e(Fq)}finally{ae.f()}u.push({name:p.name(),originalId:p.id().value(),path:d,metrics:ie,threeObjects:g,traces:y,backgroundColor:p.backgroundColor(),directionalLightIntensity:p.directionalLightIntensity(),ambientLightIntensity:p.ambientLightIntensity(),showGroundPlane:p.isGroundPlaneVisible(),cameraType:p.cameraType(),worldFrame:p.worldFrame(),showWorldFrameObject:p.isWorldFrameObjectVisible(),axisDensity:p.density(),axisSize:p.axisSize(),traceSize:p.traceSize(),isTimeWarped:p.isTimeWarping(),timeWarpBaseSceneId:p.baseSceneId(),keyObjects:p.keyObjects(),arrows:b})}}catch(Fq){c.e(Fq)}finally{c.f()}var le,ce=[],he=s(this.allQuaternionSpaceScenes());try{for(he.s();!(le=he.n()).done;){var fe,de=le.value,pe=[],ve=s(de.getAllTraces());try{for(ve.s();!(fe=ve.n()).done;){var me,ge,ye=fe.value,be=null===(me=ye.robotPart())||void 0===me?void 0:me.name(),xe=null===(ge=ye.robot().parentScene())||void 0===ge?void 0:ge.id().value();void 0!==xe&&(void 0===be&&(be=""),null===pe||void 0===pe||pe.push({robotId:ye.robot().idValue(),robotPartName:be,parentSceneId:xe}))}}catch(Fq){ve.e(Fq)}finally{ve.f()}ce.push({name:de.name(),originalId:de.id().value(),backgroundColor:de.backgroundColor(),lineGroupOpacity:de.lineGroupOpacity(),lineGroupColor:de.lineGroupColor(),traces:pe,showWorldFrameObject:de.isWorldFrameObjectVisible()})}}catch(Fq){he.e(Fq)}finally{he.f()}var we,_e=[],Se=s(this.getAllGraphs());try{for(Se.s();!(we=Se.n()).done;){var ke,Me=we.value,Te=[],Ee=s(Me.lineIds());try{for(Ee.s();!(ke=Ee.n()).done;){var Ce=ke.value;Te.push(Ce)}}catch(Fq){Ee.e(Fq)}finally{Ee.f()}_e.push({name:Me.name(),originalId:Me.id(),isDiff:Me.isDiff(),isTimeWarp:Me.isTimeWarp(),line_ids:Te,currProperty:Me.currProperty(),lineWidth:Me.lineWidth(),axisColor:Me.axisColor(),backgroundColor:Me.backgroundColor(),filter:Me.filter()})}}catch(Fq){Se.e(Fq)}finally{Se.f()}var Ae,Re=[],Pe=s(this.getAllUmapGraphs());try{for(Pe.s();!(Ae=Pe.n()).done;){var Le,Oe=Ae.value,Ne=[],De=s(Oe.lineIds());try{for(De.s();!(Le=De.n()).done;){var Ie=Le.value;Ne.push(Ie)}}catch(Fq){De.e(Fq)}finally{De.f()}Re.push({name:Oe.name(),originalId:Oe.id(),line_ids:Ne,lineWidth:Oe.lineWidth(),axisColor:Oe.axisColor(),backgroundColor:Oe.backgroundColor()})}}catch(Fq){Pe.e(Fq)}finally{Pe.f()}return{saveFormatVersion:"1.0",times:{currentTime:this.currTime(),currentEndTime:this.currEndTime(),currentStartTime:this.currStartTime()},quaternionScenes:ce,objects:r,animations:o,scenes:u,graphs:_e,umapGraphs:Re}}},{key:"loadSessionFromLocalFile",value:function(){var e=yr(mr().mark((function e(t,n){var r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dr.setPopupHelpPage({page:qn.LoadingStarted,location:t.name,type:"workspace"}),e.prev=1,e.next=4,Jw(t);case 4:return r=e.sent,e.next=7,this.loadSession(r,n);case 7:dr.setPopupHelpPage({page:qn.LoadingSuccess,location:t.name}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),dr.setPopupHelpPage({page:qn.LoadingFailed,location:t.name,type:"workspace"}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadSession",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a,o,s;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=t.saveFormatVersion)&&"1.0"!==r){e.next=6;break}return e.next=4,this.loadV1Session(t,n);case 4:e.next=8;break;case 6:return dr.error('Could not load in workspace with unknown version number "'.concat(r,'"')),e.abrupt("return");case 8:i=0;case 9:if(!(i<this._availableScenes.length)){e.next=17;break}if(a=br(this._availableScenes[i],2),o=a[0],s=a[1],0!==o.length||0!==s.robots().length){e.next=14;break}return this.removeRobotScene(this._availableScenes[i][1]),e.abrupt("continue",9);case 14:i+=1,e.next=9;break;case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadV1Session",value:function(){var e=yr(mr().mark((function e(t,n){var r,i,a,o,u,l,c,h,f,p,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O,N,D,I,j,F,z,B,U,V,G,H,W,Z,$,q,X,Y,K,J,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,fe,de,pe,ve,me,ge,ye,be,xe,we,_e,Se,ke,Me,Te,Ee,Ce,Ae,Re,Pe,Le,Oe,Ne,De,Ie,je,Fe,ze,Be,Ue,Ve,Ge,He,We,Ze,$e,qe,Xe,Ye,Ke,Je,Qe,et,tt,nt,rt,it,at,ot,st,ut,lt,ct,ht,ft,dt,pt,vt,mt,gt,yt,bt,xt,wt,_t,St,kt,Mt,Tt,Et,Ct,At,Rt,Pt,Lt,Ot,Nt,Dt;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v=function(){return v=yr(mr().mark((function e(t){var n,r,i,a,o,u;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=s(t),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=15;break}return a=br(i.value,2),o=a[0],u=a[1],e.t0=n,e.t1=o,e.next=10,u;case 10:e.t2=e.sent,e.t3=[e.t1,e.t2],e.t0.push.call(e.t0,e.t3);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t4=e.catch(2),r.e(e.t4);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[2,17,20,23]])}))),v.apply(this,arguments)},p=function(e){return v.apply(this,arguments)},r=[],i=s(t.objects);try{for(i.s();!(a=i.n()).done;)"URDF"===(o=a.value).type.toUpperCase()?r.push([o.id,vS.loadRobot(o.url,"urdf",o.name)]):"GLTF"===o.type.toUpperCase()?r.push([o.id,vS.loadRobot(o.url,"glb",o.name)]):r.push([o.id,vS.loadRobot(o.url,"axesHelper",o.name)])}catch(Fq){i.e(Fq)}finally{i.f()}u=[],l=[],c=s(t.animations),e.prev=8,f=mr().mark((function e(){var t,n,r,i,a,o,s,u,c,f;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.value,r=n.content,i=n.id,a=n.url,o=null!==(t=n.name)&&void 0!==t?t:"Unnamed Animation",u=n.timeUnit,!r){e.next=11;break}c=r,s=new Promise((function(e,t){var n=Y_.fromCSV(c,u);n instanceof d.AssertionError?t(n):(n.id().set(i),n.setName(o),e(n))})),e.next=17;break;case 11:if(!a){e.next=16;break}f=a,s=yr(mr().mark((function e(){var t,n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vw(f);case 2:if(0!==(t=e.sent).length){e.next=10;break}if((n=Y_.fromCSV(t[0],u))instanceof d.AssertionError){e.next=9;break}return n.id().set(i),n.setName(o),e.abrupt("return",n);case 9:throw new Error("CSV from url ".concat(f," was il-formatted and could not be used."));case 10:throw Error("Expected exactly 1 CSV from url ".concat(f,", got ").concat(t.length,"."));case 11:case"end":return e.stop()}}),e)})))(),e.next=17;break;case 16:throw Error("Expected url and/or some content for an animation, but got neither.");case 17:l.push([i,s]);case 18:case"end":return e.stop()}}),e)})),c.s();case 11:if((h=c.n()).done){e.next=15;break}return e.delegateYield(f(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),c.e(e.t1);case 20:return e.prev=20,c.f(),e.finish(20);case 23:return m=new Map,g=new Map,e.t2=s,e.next=28,p(r);case 28:e.t3=e.sent,y=(0,e.t2)(e.t3);try{for(y.s();!(b=y.n()).done;)x=br(b.value,2),w=x[0],_=x[1],m.set(w,_),_.id().regen()}catch(Fq){y.e(Fq)}finally{y.f()}return e.t4=s,e.next=34,p(l);case 34:e.t5=e.sent,S=(0,e.t4)(e.t5);try{for(S.s();!(k=S.n()).done;)M=br(k.value,2),T=M[0],E=M[1],g.set(T,E),E.id().regen(),u.push(E)}catch(Fq){S.e(Fq)}finally{S.f()}C=[],A=new Map,R=new Map,P=s(t.scenes),e.prev=41,P.s();case 43:if((L=P.n()).done){e.next=102;break}for(O=L.value,N=new sR(this),D=new Map,void 0!==O.originalId&&(A.set(O.originalId,N.id().value()),R.set(N.id().value(),D)),void 0!==O.name&&N.setName(O.name),void 0!==O.backgroundColor&&N.setBackgroundColor(O.backgroundColor),void 0!==O.directionalLightIntensity&&N.setDirectionalLightIntensity(O.directionalLightIntensity),void 0!==O.ambientLightIntensity&&N.setAmbientLightIntensity(O.ambientLightIntensity),void 0!==O.showGroundPlane&&N.setGroundPlaneVisibility(O.showGroundPlane),void 0!==O.cameraType&&N.setCameraType(O.cameraType),void 0!==O.worldFrame&&N.setWorldFrame(O.worldFrame),void 0!==O.showWorldFrameObject&&N.setWorldFrameObjectVisibility(O.showWorldFrameObject),void 0!==O.axisDensity&&N.setDensity(O.axisDensity),void 0!==O.axisSize&&N.setAxisSize(O.axisSize),void 0!==O.traceSize&&N.setTraceSize(O.traceSize),I=new qb("Animation Group"),j=O.path,F=new Map,z=0,B=Object.entries(O.metrics);z<B.length;z++)U=br(B[z],2),V=U[0],G=U[1],F.set(V,G);H=s(O.threeObjects),e.prev=64,H.s();case 66:if((W=H.n()).done){e.next=90;break}if(Z=W.value,$=Z.objectID,void 0!==(q=m.get($))){e.next=72;break}throw new Error('Unable to load in sessions: There was no object with ID "'.concat($,'"'));case 72:if((X=q.clone()).setName(Z.name),X.id().regen(),void 0!==Z.robotID&&D.set(Z.robotID,X.idValue()),X.setScale(J_(X.getScaleOffset().clone(),Z.scale)),X.setPosition(J_(X.getPositionOffset().clone(),Z.position)),void 0!==(Y=Z.rotation)&&(void 0!==Y.w?X.setQuaternion(eS(X.getQuaternionOffset().clone(),Z.rotation)):X.setQuaternion(J_(X.getQuaternionOffset().clone(),Z.rotation))),X.setScaleOffset(J_(X.getScaleOffset().clone(),Z.scaleOffset)),X.setPositionOffset(J_(X.getPositionOffset().clone(),Z.positionOffset)),void 0!==(Y=Z.rotationOffset)&&(void 0!==Y.w?X.setQuaternionOffset(eS(X.getQuaternionOffset().clone(),Z.rotationOffset)):X.setQuaternionOffset(J_(X.getQuaternionOffset().clone(),Z.rotationOffset))),Z.joints){K=s(Z.joints);try{for(K.s();!(J=K.n()).done;)Q=J.value,X.setJointAngle(Q.name,Q.angle)}catch(Fq){K.e(Fq)}finally{K.f()}}N.addChildRobot(X),ee=s(Z.animationID);try{for(ee.s();!(te=ee.n()).done;)ne=te.value,(re=g.get(ne))&&I.addAnimation(new $b(X,re))}catch(Fq){ee.e(Fq)}finally{ee.f()}case 88:e.next=66;break;case 90:e.next=95;break;case 92:e.prev=92,e.t6=e.catch(64),H.e(e.t6);case 95:return e.prev=95,H.f(),e.finish(95);case 98:N.animationManager().addActiveAnimation(I),C.push({path:j,robotScene:N,metrics:F});case 100:e.next=43;break;case 102:e.next=107;break;case 104:e.prev=104,e.t7=e.catch(41),P.e(e.t7);case 107:return e.prev=107,P.f(),e.finish(107);case 110:for(ie=C.at(C.length-1),ae=void 0,void 0!==ie&&(ae=ie.robotScene),this.addManagedRobotScenes(C),oe=0,se=u;oe<se.length;oe++)ue=se[oe],this.addAnimationTable(ue);le=s(m.values());try{for(le.s();!(ce=le.n()).done;)he=ce.value,this._masterRobots.push(he)}catch(Fq){le.e(Fq)}finally{le.f()}ae&&this.setCurrRobotScene(ae),fe=s(this.allManagedRobotScenes());try{for(fe.s();!(de=fe.n()).done;)pe=de.value,this.isActiveRobotScene(pe)||this.activateRobotScene(pe)}catch(Fq){fe.e(Fq)}finally{fe.f()}void 0!==t.times&&(this.setCurrStartTime(t.times.currentStartTime),this.setCurrEndTime(t.times.currentEndTime),this.setCurrTime(t.times.currentTime)),ve=s(t.scenes),e.prev=122,ve.s();case 124:if((me=ve.n()).done){e.next=140;break}if(void 0===(ge=me.value).isTimeWarped||void 0===ge.timeWarpBaseSceneId||void 0===ge.keyObjects||!0!==ge.isTimeWarped||void 0===ge.originalId){e.next=138;break}if(ye=this.findNewSceneId(ge.timeWarpBaseSceneId,A),be=this.findNewSceneId(ge.originalId,A),void 0!==ye&&void 0!==be){e.next=131;break}return e.abrupt("continue",138);case 131:if(xe=this.robotSceneById(ye),we=this.robotSceneById(be),void 0!==xe&&void 0!==we){e.next=135;break}return e.abrupt("continue",138);case 135:_e=s(ge.keyObjects);try{for(_e.s();!(Se=_e.n()).done;)ke=Se.value,Me=ke.split("\n"),Te=br(Me,2),Ee=Te[0],Ce=Te[1],Ae=Ce.split(" "),Re=br(Ae,2),Pe=Re[0],Le=Re[1],0===Pe.length?null===(Oe=we.getRobotByName(Ee))||void 0===Oe||Oe.setPositionIncludeInTimeWarpConsideration(!0):void 0===(Ne=we.getJointByName(Ee,Pe))?(Ne=we.getLinkByName(Ee,Pe),null===(De=Ne)||void 0===De||De.setPosIncludeInTimeWarpConsideration(!0)):"angle"==Le?Ne.setAngleIncludeInTimeWarpConsideration(!0):Ne.setPosIncludeInTimeWarpConsideration(!0),we.setTimeWarpBase(void 0),we.setTimeWarpBase(xe)}catch(Fq){_e.e(Fq)}finally{_e.f()}we.setKeyObjects(ge.keyObjects);case 138:e.next=124;break;case 140:e.next=145;break;case 142:e.prev=142,e.t8=e.catch(122),ve.e(e.t8);case 145:return e.prev=145,ve.f(),e.finish(145);case 148:Ie=new Map,je=s(t.scenes),e.prev=150,je.s();case 152:if((Fe=je.n()).done){e.next=184;break}if(void 0!==(ze=Fe.value).traces){e.next=156;break}return e.abrupt("continue",182);case 156:Be=s(ze.traces),e.prev=157,Be.s();case 159:if((Ue=Be.n()).done){e.next=174;break}if(Ve=Ue.value,Ge=Ve.robotPartName,void 0!==(He=this.findNewSceneId(Ve.parentSceneId,A))){e.next=165;break}return e.abrupt("continue",172);case 165:if(void 0!==(We=this.findNewSceneId(Ve.currSceneId,A))){e.next=168;break}return e.abrupt("continue",172);case 168:if(void 0!==(Ze=this.findNewRobotId(Ve.robotId,R,He))){e.next=171;break}return e.abrupt("continue",172);case 171:this.addTracesToRobotScene(We,He,Ze,Ge,Ie,Ve.originalId);case 172:e.next=159;break;case 174:e.next=179;break;case 176:e.prev=176,e.t9=e.catch(157),Be.e(e.t9);case 179:return e.prev=179,Be.f(),e.finish(179);case 182:e.next=152;break;case 184:e.next=189;break;case 186:e.prev=186,e.t10=e.catch(150),je.e(e.t10);case 189:return e.prev=189,je.f(),e.finish(189);case 192:$e=s(t.scenes),e.prev=193,$e.s();case 195:if((qe=$e.n()).done){e.next=226;break}if(void 0!==(Xe=qe.value).arrows){e.next=199;break}return e.abrupt("continue",224);case 199:Ye=s(Xe.arrows),e.prev=200,Ye.s();case 202:if((Ke=Ye.n()).done){e.next=216;break}if(Je=Ke.value,console.log(Je),void 0!==(Qe=this.findNewSceneId(Je.parentSceneId,A))){e.next=208;break}return e.abrupt("continue",214);case 208:if(void 0!==(et=this.robotSceneById(Qe))){e.next=211;break}return e.abrupt("continue",214);case 211:tt=this.findNewTraceId(Je.traceFromId,Ie),nt=this.findNewTraceId(Je.traceToId,Ie),void 0!==tt&&void 0!==nt&&et.addArrow(tt,nt);case 214:e.next=202;break;case 216:e.next=221;break;case 218:e.prev=218,e.t11=e.catch(200),Ye.e(e.t11);case 221:return e.prev=221,Ye.f(),e.finish(221);case 224:e.next=195;break;case 226:e.next=231;break;case 228:e.prev=228,e.t12=e.catch(193),$e.e(e.t12);case 231:return e.prev=231,$e.f(),e.finish(231);case 234:if(rt=new Map,void 0===t.quaternionScenes){e.next=281;break}it=s(t.quaternionScenes),e.prev=237,it.s();case 239:if((at=it.n()).done){e.next=273;break}ot=at.value,(st=new gR(this)).setName(ot.name),st.setBackgroundColor(ot.backgroundColor),st.setLineGroupOpacity(ot.lineGroupOpacity),st.setLineGroupColor(ot.lineGroupColor),st.setWorldFrameObjectVisibility(ot.showWorldFrameObject),rt.set(ot.originalId,st.id().value()),ut=s(ot.traces),e.prev=249,ut.s();case 251:if((lt=ut.n()).done){e.next=263;break}if(ct=lt.value,ht=ct.robotPartName,void 0!==(ft=this.findNewSceneId(ct.parentSceneId,A))){e.next=257;break}return e.abrupt("continue",261);case 257:if(void 0!==(dt=this.findNewRobotId(ct.robotId,R,ft))){e.next=260;break}return e.abrupt("continue",261);case 260:this.addTracesToQuaternionScene(st,ft,dt,ht);case 261:e.next=251;break;case 263:e.next=268;break;case 265:e.prev=265,e.t13=e.catch(249),ut.e(e.t13);case 268:return e.prev=268,ut.f(),e.finish(268);case 271:e.next=239;break;case 273:e.next=278;break;case 275:e.prev=275,e.t14=e.catch(237),it.e(e.t14);case 278:return e.prev=278,it.f(),e.finish(278);case 281:if(pt=new Map,void 0!==t.graphs){vt=s(t.graphs);try{for(vt.s();!(mt=vt.n()).done;){for(gt=mt.value,yt=new bR((new tx).value(),gt.isDiff,gt.isTimeWarp),this.addGraph(yt),yt.setName(gt.name),pt.set(gt.originalId,yt.id()),bt=0;bt<gt.line_ids.length;bt++)xt=this.decomposeLineId(gt.line_ids[bt]),wt=br(xt,2),_t=wt[0],St=wt[1],kt=this.findNewSceneId(_t,A),gt.line_ids[bt]=kt+"#"+St;yt.setCurrProperty(gt.currProperty),yt.setLineIds(gt.line_ids),yt.setAxisColor(gt.axisColor),yt.setBackgroundColor(gt.backgroundColor),yt.setLineWidth(gt.lineWidth),void 0!==gt.filter&&yt.setFilter(gt.filter)}}catch(Fq){vt.e(Fq)}finally{vt.f()}}if(Mt=new Map,void 0!==t.umapGraphs){Tt=s(t.umapGraphs);try{for(Tt.s();!(Et=Tt.n()).done;){for(Ct=Et.value,At=new wR((new tx).value()),this.addUmapGraph(At),At.setName(Ct.name),Mt.set(Ct.originalId,At.id()),Rt=0;Rt<Ct.line_ids.length;Rt++)Pt=this.decomposeLineId(Ct.line_ids[Rt]),Lt=br(Pt,2),Ot=Lt[0],Nt=Lt[1],Dt=this.findNewSceneId(Ot,A),Ct.line_ids[Rt]=Dt+"#"+Nt;At.setLineIds(Ct.line_ids),At.setAxisColor(Ct.axisColor),At.setBackgroundColor(Ct.backgroundColor),At.setLineWidth(Ct.lineWidth)}}catch(Fq){Tt.e(Fq)}finally{Tt.f()}}this.restoreWindows(t.layout,A,rt,pt,Mt),void 0!==n&&n(t.layout);case 287:case"end":return e.stop()}}),e,this,[[8,17,20,23],[41,104,107,110],[64,92,95,98],[122,142,145,148],[150,186,189,192],[157,176,179,182],[193,228,231,234],[200,218,221,224],[237,275,278,281],[249,265,268,271]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"decomposeLineId",value:function(e){var t=br(e.split("#"),2);return[t[0],t[1]]}},{key:"findNewSceneId",value:function(e,t){return t.get(e)}},{key:"findNewRobotId",value:function(e,t,n){var r;return null===(r=t.get(n))||void 0===r?void 0:r.get(e)}},{key:"findNewTraceId",value:function(e,t){return t.get(e)}},{key:"restoreWindows",value:function(e,t,n,r,i){var a,o,s;if(void 0!==e){var u=function(e){var t,n=e.indexOf("&"),r=e.slice(0,n),i=e.slice(n+1,e.length),a=void 0;if(-1!==(n=i.indexOf("&"))?(a=i.slice(0,n),t=i.slice(n+1,i.length)):t=i,void 0===a)throw new Error("RobotScene with undefined ID in DockLayout");return[r,a,t]},l=function e(a){for(var o=0;o<a.length;o++){var s=a[o],l=s.activeId,c=new Map;if(void 0!==l)if(l.startsWith("RobotScene")){var h=br(u(l),3),f=(h[1],h[2]),d=t.get(f);void 0!==d&&(s.activeId="RobotScene&".concat(Lb(4),"&").concat(d),c.set(l,s.activeId))}else if(l.startsWith("QuaternionSpaceScene")){var p=br(l.split("&"),3),v=p[1],m=(p[2],n.get(v));void 0!==m&&(s.activeId="QuaternionSpaceScene&".concat(m,"&").concat(Lb(4)),c.set(l,s.activeId))}else if(l.startsWith("Graph")||l.startsWith("DifferenceGraph")){var g=br(l.split("&"),3),y=g[0],b=g[1],x=(g[2],r.get(b));void 0!==x&&(s.activeId="".concat(y,"&").concat(x,"&").concat(Lb(4)),c.set(l,s.activeId))}else if(l.startsWith("UmapGraph")){var w=br(l.split("&"),3),_=w[0],S=w[1],k=(w[2],i.get(S));void 0!==k&&(s.activeId="".concat(_,"&").concat(k,"&").concat(Lb(4)),c.set(l,s.activeId))}else if(l.startsWith("SceneLegend")||l.startsWith("LineGraphLegend")||l.startsWith("QuaternionSpaceLegend")||l.startsWith("UmapLegend")){var M=br(l.split("&"),3),T=M[0],E=(M[1],M[2]),C=(l.startsWith("SceneLegend")?t:l.startsWith("LineGraphLegend")?r:l.startsWith("QuaternionSpaceLegend")?n:i).get(E);void 0!==C&&(s.activeId="".concat(T,"&").concat(Lb(4),"&").concat(C),c.set(l,s.activeId))}else if(l.startsWith("TimeWarpTimeBar")){var A=l.substring("TimeWarpTimeBar".length),R=t.get(A);void 0!==R&&(s.activeId="TimeWarpTimeBar"+R,c.set(l,s.activeId))}else if(l.startsWith("TimeWarpedGraph")){var P=br(l.split("&"),4),L=P[0],O=P[1],N=P[2],D=(P[3],t.get(N)),I=r.get(O);void 0!==D&&void 0!==I&&(s.activeId="".concat(L,"&").concat(I,"&").concat(D,"&").concat(Lb(4)),c.set(l,s.activeId))}if(void 0!==s.tabs)for(var j=s.tabs,F=0;F<j.length;F++){var z,B,U,V,G,H=j[F];if(void 0!==H.id)if(c.has(H.id))H.id=c.get(H.id);else if(null!==(z=H.id)&&void 0!==z&&z.startsWith("RobotScene")){var W=br(u(H.id),3),Z=(W[1],W[2]),$=t.get(Z);void 0!==$&&(H.id="RobotScene&".concat(Lb(4),"&").concat($))}else if(null!==(B=H.id)&&void 0!==B&&B.startsWith("QuaternionSpaceScene")){var q=br(H.id.split("&"),3),X=q[1],Y=(q[2],n.get(X));void 0!==Y&&(H.id="QuaternionSpaceScene&".concat(Y,"&").concat(Lb(4)))}else if(null!==(U=H.id)&&void 0!==U&&U.startsWith("Graph")||null!==(V=H.id)&&void 0!==V&&V.startsWith("DifferenceGraph")){var K=br(H.id.split("&"),3),J=K[0],Q=K[1],ee=(K[2],r.get(Q));void 0!==ee&&(H.id="".concat(J,"&").concat(ee,"&").concat(Lb(4)))}else if(null!==(G=H.id)&&void 0!==G&&G.startsWith("UmapGraph")){var te=br(H.id.split("&"),3),ne=te[0],re=te[1],ie=(te[2],i.get(re));void 0!==ie&&(H.id="".concat(ne,"&").concat(ie,"&").concat(Lb(4)))}else if(H.id.startsWith("SceneLegend")||H.id.startsWith("LineGraphLegend")||H.id.startsWith("QuaternionSpaceLegend")||H.id.startsWith("UmapLegend")){var ae=br(H.id.split("&"),3),oe=ae[0],se=(ae[1],ae[2]),ue=(H.id.startsWith("SceneLegend")?t:H.id.startsWith("LineGraphLegend")?r:H.id.startsWith("QuaternionSpaceLegend")?n:i).get(se);void 0!==ue&&(s.activeId="".concat(oe,"&").concat(Lb(4),"&").concat(ue),c.set(H.id,s.activeId))}else if(H.id.startsWith("TimeWarpTimeBar")){var le=H.id.substring("TimeWarpTimeBar".length),ce=t.get(le);void 0!==ce&&(H.id="TimeWarpTimeBar"+ce)}else if(H.id.startsWith("TimeWarpedGraph")){var he=br(H.id.split("&"),4),fe=he[0],de=he[1],pe=he[2],ve=(he[3],t.get(pe)),me=r.get(de);void 0!==ve&&void 0!==me&&(H.id="".concat(fe,"&").concat(me,"&").concat(ve,"&").concat(Lb(4)))}}var ge=a[o];void 0!==ge.children&&ge.children.length>0&&e(ge.children)}};l(e.dockbox.children),void 0!==(null===(a=e.floatbox)||void 0===a?void 0:a.children)&&l(e.floatbox.children),void 0!==(null===(o=e.maxbox)||void 0===o?void 0:o.children)&&l(e.maxbox.children),void 0!==(null===(s=e.windowbox)||void 0===s?void 0:s.children)&&l(e.windowbox.children)}}},{key:"addTracesToQuaternionScene",value:function(e,t,n,r){var i=this.robotSceneById(t);if(void 0!==i){var a=i.robotById(n);if(void 0!==a){var o=a.jointMap().get(r);void 0===o&&(o=a.linkMap().get(r)),e.addChildTrace(i,a,sR.frameRange(this.startTime(),this.endTime()),o)}}}},{key:"addTracesToRobotScene",value:function(e,t,n,r,i,a){var o=this.robotSceneById(t);if(void 0!==o){var s=this.robotSceneById(e);if(void 0!==s){var u=o.robotById(n);if(void 0!==u){var l=u.jointMap().get(r);if(void 0===l&&(l=u.linkMap().get(r)),s===o)if(s.hasChildTrace(u,l));else{var c=s.addChildTrace(u,sR.frameRange(this.startTime(),this.endTime()),l);i.set(a,c[0])}else if(s.hasReceivedGhostTrace(u,l));else{var h=o.sendGhostTracesTo(u,sR.frameRange(this.startTime(),this.endTime()),l,s);i.set(a,h[0])}}}}}}]),e}(),MR={floatable:!0,maximizable:!0},TR="place-holder",ER="-maximized-placeholder-",CR={floatable:!1},AR=t.createContext(null),RR=AR.Provider;AR.Consumer;function PR(){return PR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PR.apply(this,arguments)}function LR(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function OR(e,t){if(null==e)return{};var n,r,i=LR(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var NR=n(1694),DR=n.n(NR),IR=n(3873);function jR(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return t.Children.forEach(e,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?r=r.concat(jR(e)):(0,IR.isFragment)(e)&&e.props?r=r.concat(jR(e.props.children,n)):r.push(e))})),r}var FR=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))};function zR(e){var n=t.useRef();n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return r}function BR(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var UR,VR=BR()?t.useLayoutEffect:t.useEffect,GR=VR;function HR(e){var n=t.useRef(!1),r=br(t.useState(e),2),i=r[0],a=r[1];return t.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[i,function(e,t){t&&n.current||a(e)}]}function WR(e){return void 0!==e}function ZR(e,n){var r=n||{},i=r.defaultValue,a=r.value,o=r.onChange,s=r.postState,u=br(HR((function(){var t,n=void 0;return WR(a)?(n=a,t=UR.PROP):WR(i)?(n="function"===typeof i?i():i,t=UR.PROP):(n="function"===typeof e?e():e,t=UR.INNER),[n,t,n]})),2),l=u[0],c=u[1],h=WR(a)?a:l[0],f=s?s(h):h;!function(e,n){var r=t.useRef(!0);VR((function(){if(!r.current)return e()}),n),VR((function(){return r.current=!1,function(){r.current=!0}}),[])}((function(){c((function(e){var t=br(e,1)[0];return[a,UR.PROP,t]}))}),[a]);var d=t.useRef(),p=zR((function(e,t){c((function(t){var n=br(t,3),r=n[0],i=n[1],a=n[2],o="function"===typeof e?e(r):e;if(o===r)return t;var s=i===UR.INNER&&d.current!==a?a:r;return[o,UR.INNER,s]}),t)})),v=zR(o);return GR((function(){var e=br(l,3),t=e[0],n=e[1],r=e[2];t!==r&&n===UR.INNER&&(v(t,r),d.current=r)}),[l]),[f,p]}!function(e){e[e.INNER=0]="INNER",e[e.PROP=1]="PROP"}(UR||(UR={}));var $R=function(e){return+setTimeout(e,16)},qR=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&($R=function(e){return window.requestAnimationFrame(e)},qR=function(e){return window.cancelAnimationFrame(e)});var XR=0,YR=new Map;function KR(e){YR.delete(e)}function JR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=XR+=1;function r(t){if(0===t)KR(n),e();else{var i=$R((function(){r(t-1)}));YR.set(n,i)}}return r(t),n}JR.cancel=function(e){var t=YR.get(e);return KR(t),qR(t)};var QR={};function eP(e,t){0}function tP(e,t,n){t||QR[n]||(e(!1,n),QR[n]=!0)}var nP=function(e,t){tP(eP,e,t)};function rP(e,t){"function"===typeof e?e(t):"object"===(0,vr.Z)(e)&&e&&"current"in e&&(e.current=t)}function iP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){rP(t,e)}))}}function aP(e){var t,n,r=(0,IR.isMemo)(e)?e.type.type:e.type;return!("function"===typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}var oP=n(4164);function sP(e){return e instanceof HTMLElement?e:oP.findDOMNode(e)}var uP=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),lP="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,cP="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),hP="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(cP):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var fP=["top","right","bottom","left","width","height","size","weight"],dP="undefined"!==typeof MutationObserver,pP=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&s()}function o(){hP(a)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(o,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){lP&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),dP?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){lP&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;fP.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),vP=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},mP=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||cP},gP=SP(0,0,0,0);function yP(e){return parseFloat(e)||0}function bP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+yP(e["border-"+n+"-width"])}),0)}function xP(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return gP;var r=mP(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=yP(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=yP(r.width),u=yP(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=bP(r,"left","right")+a),Math.round(u+o)!==n&&(u-=bP(r,"top","bottom")+o)),!function(e){return e===mP(e).document.documentElement}(e)){var l=Math.round(s+a)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return SP(i.left,i.top,s,u)}var wP="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof mP(e).SVGGraphicsElement}:function(e){return e instanceof mP(e).SVGElement&&"function"===typeof e.getBBox};function _P(e){return lP?wP(e)?function(e){var t=e.getBBox();return SP(0,0,t.width,t.height)}(e):xP(e):gP}function SP(e,t,n,r){return{x:e,y:t,width:n,height:r}}var kP=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=SP(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=_P(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),MP=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return vP(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);vP(this,{target:e,contentRect:n})},TP=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new uP,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof mP(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new kP(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof mP(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new MP(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),EP="undefined"!==typeof WeakMap?new WeakMap:new uP,CP=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=pP.getInstance(),r=new TP(t,n,this);EP.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){CP.prototype[e]=function(){var t;return(t=EP.get(this))[e].apply(t,arguments)}}));var AP="undefined"!==typeof cP.ResizeObserver?cP.ResizeObserver:CP,RP=new Map;var PP=new AP((function(e){e.forEach((function(e){var t,n=e.target;null===(t=RP.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var LP=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component),OP=t.createContext(null);function NP(e){var n=e.children,r=e.disabled,i=t.useRef(null),a=t.useRef(null),o=t.useContext(OP),s="function"===typeof n,u=s?n(i):n,l=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&t.isValidElement(u)&&aP(u),h=c?u.ref:null,f=t.useMemo((function(){return iP(h,i)}),[h,i]),d=t.useRef(e);d.current=e;var p=t.useCallback((function(e){var t=d.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),a=i.width,s=i.height,u=e.offsetWidth,c=e.offsetHeight,h=Math.floor(a),f=Math.floor(s);if(l.current.width!==h||l.current.height!==f||l.current.offsetWidth!==u||l.current.offsetHeight!==c){var p={width:h,height:f,offsetWidth:u,offsetHeight:c};l.current=p;var v=u===Math.round(a)?a:u,m=c===Math.round(s)?s:c,g=Cr(Cr({},p),{},{offsetWidth:v,offsetHeight:m});null===o||void 0===o||o(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return t.useEffect((function(){var e,t,n=sP(i.current)||sP(a.current);return n&&!r&&(e=n,t=p,RP.has(e)||(RP.set(e,new Set),PP.observe(e)),RP.get(e).add(t)),function(){return function(e,t){RP.has(e)&&(RP.get(e).delete(t),RP.get(e).size||(PP.unobserve(e),RP.delete(e)))}(n,p)}}),[i.current,r]),t.createElement(LP,{ref:a},c?t.cloneElement(u,{ref:f}):u)}function DP(e){var n=e.children;return("function"===typeof n?[n]:jR(n)).map((function(n,r){var i=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return t.createElement(NP,PR({},e,{key:i}),n)}))}DP.Collection=function(e){var n=e.children,r=e.onBatchResize,i=t.useRef(0),a=t.useRef([]),o=t.useContext(OP),s=t.useCallback((function(e,t,n){i.current+=1;var s=i.current;a.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){s===i.current&&(null===r||void 0===r||r(a.current),a.current=[])})),null===o||void 0===o||o(e,t,n)}),[r,o]);return t.createElement(OP.Provider,{value:s},n)};var IP=DP;function jP(e){var n=(0,t.useRef)(),r=(0,t.useRef)(!1);return(0,t.useEffect)((function(){return r.current=!1,function(){r.current=!0,JR.cancel(n.current)}}),[]),function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];r.current||(JR.cancel(n.current),n.current=JR((function(){e.apply(void 0,i)})))}}var FP={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=FP.F1&&t<=FP.F12)return!1;switch(t){case FP.ALT:case FP.CAPS_LOCK:case FP.CONTEXT_MENU:case FP.CTRL:case FP.DOWN:case FP.END:case FP.ESC:case FP.HOME:case FP.INSERT:case FP.LEFT:case FP.MAC_FF_META:case FP.META:case FP.NUMLOCK:case FP.NUM_CENTER:case FP.PAGE_DOWN:case FP.PAGE_UP:case FP.PAUSE:case FP.PRINT_SCREEN:case FP.RIGHT:case FP.SHIFT:case FP.UP:case FP.WIN_KEY:case FP.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=FP.ZERO&&e<=FP.NINE)return!0;if(e>=FP.NUM_ZERO&&e<=FP.NUM_MULTIPLY)return!0;if(e>=FP.A&&e<=FP.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case FP.SPACE:case FP.QUESTION_MARK:case FP.NUM_PLUS:case FP.NUM_MINUS:case FP.NUM_PERIOD:case FP.NUM_DIVISION:case FP.SEMICOLON:case FP.DASH:case FP.EQUALS:case FP.COMMA:case FP.PERIOD:case FP.SLASH:case FP.APOSTROPHE:case FP.SINGLE_QUOTE:case FP.OPEN_SQUARE_BRACKET:case FP.BACKSLASH:case FP.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},zP=FP;function BP(e,n){var r,i=e.prefixCls,a=e.id,o=e.active,s=e.tab,u=s.key,l=s.tab,c=s.disabled,h=s.closeIcon,f=e.closable,d=e.renderWrapper,p=e.removeAriaLabel,v=e.editable,m=e.onClick,g=e.onRemove,y=e.onFocus,b=e.style,x="".concat(i,"-tab");t.useEffect((function(){return g}),[]);var w=v&&!1!==f&&!c;function _(e){c||m(e)}var S=t.createElement("div",{key:u,ref:n,className:DR()(x,(r={},wr(r,"".concat(x,"-with-remove"),w),wr(r,"".concat(x,"-active"),o),wr(r,"".concat(x,"-disabled"),c),r)),style:b,onClick:_},t.createElement("div",{role:"tab","aria-selected":o,id:a&&"".concat(a,"-tab-").concat(u),className:"".concat(x,"-btn"),"aria-controls":a&&"".concat(a,"-panel-").concat(u),"aria-disabled":c,tabIndex:c?null:0,onClick:function(e){e.stopPropagation(),_(e)},onKeyDown:function(e){[zP.SPACE,zP.ENTER].includes(e.which)&&(e.preventDefault(),_(e))},onFocus:y},l),w&&t.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),v.onEdit("remove",{key:u,event:t})}},h||v.removeIcon||"\xd7"));return d?d(S):S}var UP=t.forwardRef(BP),VP={width:0,height:0,left:0,top:0};var GP={width:0,height:0,left:0,top:0,right:0};var HP=n(9613),WP=n.n(HP),ZP=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],$P=void 0;function qP(e,n){var r=e.prefixCls,i=e.invalidate,a=e.item,o=e.renderItem,s=e.responsive,u=e.responsiveDisabled,l=e.registerSize,c=e.itemKey,h=e.className,f=e.style,d=e.children,p=e.display,v=e.order,m=e.component,g=void 0===m?"div":m,y=OR(e,ZP),b=s&&!p;function x(e){l(c,e)}t.useEffect((function(){return function(){x(null)}}),[]);var w,_=o&&a!==$P?o(a):d;i||(w={opacity:b?0:1,height:b?0:$P,overflowY:b?"hidden":$P,order:s?v:$P,pointerEvents:b?"none":$P,position:b?"absolute":$P});var S={};b&&(S["aria-hidden"]=!0);var k=t.createElement(g,PR({className:DR()(!i&&r,h),style:Cr(Cr({},w),f)},S,y,{ref:n}),_);return s&&(k=t.createElement(IP,{onResize:function(e){x(e.offsetWidth)},disabled:u},k)),k}var XP=t.forwardRef(qP);XP.displayName="Item";var YP=XP;var KP=["component"],JP=["className"],QP=["className"],eL=function(e,n){var r=t.useContext(iL);if(!r){var i=e.component,a=void 0===i?"div":i,o=OR(e,KP);return t.createElement(a,PR({},o,{ref:n}))}var s=r.className,u=OR(r,JP),l=e.className,c=OR(e,QP);return t.createElement(iL.Provider,{value:null},t.createElement(YP,PR({ref:n,className:DR()(s,l)},u,c)))},tL=t.forwardRef(eL);tL.displayName="RawItem";var nL=tL,rL=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],iL=t.createContext(null),aL="responsive",oL="invalidate";function sL(e){return"+ ".concat(e.length," ...")}function uL(e,n){var r=e.prefixCls,i=void 0===r?"rc-overflow":r,a=e.data,o=void 0===a?[]:a,s=e.renderItem,u=e.renderRawItem,l=e.itemKey,c=e.itemWidth,h=void 0===c?10:c,f=e.ssr,d=e.style,p=e.className,v=e.maxCount,m=e.renderRest,g=e.renderRawRest,y=e.suffix,b=e.component,x=void 0===b?"div":b,w=e.itemComponent,_=e.onVisibleChange,S=OR(e,rL),k=function(){var e=br(HR({}),2)[1],n=(0,t.useRef)([]),r=0,i=0;return function(t){var a=r;return r+=1,n.current.length<a+1&&(n.current[a]=t),[n.current[a],function(t){n.current[a]="function"===typeof t?t(n.current[a]):t,JR.cancel(i),i=JR((function(){e({},!0)}))}]}}(),M="full"===f,T=br(k(null),2),E=T[0],C=T[1],A=E||0,R=br(k(new Map),2),P=R[0],L=R[1],O=br(k(0),2),N=O[0],D=O[1],I=br(k(0),2),j=I[0],F=I[1],z=br(k(0),2),B=z[0],U=z[1],V=br((0,t.useState)(null),2),G=V[0],H=V[1],W=br((0,t.useState)(null),2),Z=W[0],$=W[1],q=t.useMemo((function(){return null===Z&&M?Number.MAX_SAFE_INTEGER:Z||0}),[Z,E]),X=br((0,t.useState)(!1),2),Y=X[0],K=X[1],J="".concat(i,"-item"),Q=Math.max(N,j),ee=v===aL,te=o.length&&ee,ne=v===oL,re=te||"number"===typeof v&&o.length>v,ie=(0,t.useMemo)((function(){var e=o;return te?e=null===E&&M?o:o.slice(0,Math.min(o.length,A/h)):"number"===typeof v&&(e=o.slice(0,v)),e}),[o,h,E,v,te]),ae=(0,t.useMemo)((function(){return te?o.slice(q+1):o.slice(ie.length)}),[o,ie,te,q]),oe=(0,t.useCallback)((function(e,t){var n;return"function"===typeof l?l(e):null!==(n=l&&(null===e||void 0===e?void 0:e[l]))&&void 0!==n?n:t}),[l]),se=(0,t.useCallback)(s||function(e){return e},[s]);function ue(e,t,n){(Z!==e||void 0!==t&&t!==G)&&($(e),n||(K(e<o.length-1),null===_||void 0===_||_(e)),void 0!==t&&H(t))}function le(e,t){L((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function ce(e){return P.get(oe(ie[e],e))}GR((function(){if(A&&Q&&ie){var e=B,t=ie.length,n=t-1;if(!t)return void ue(0,null);for(var r=0;r<t;r+=1){var i=ce(r);if(M&&(i=i||0),void 0===i){ue(r-1,void 0,!0);break}if(e+=i,0===n&&e<=A||r===n-1&&e+ce(n)<=A){ue(n,null);break}if(e+Q>A){ue(r-1,e-i-B+j);break}}y&&ce(0)+B>A&&H(null)}}),[A,P,j,B,oe,ie]);var he=Y&&!!ae.length,fe={};null!==G&&te&&(fe={position:"absolute",left:G,top:0});var de,pe={prefixCls:J,responsive:te,component:w,invalidate:ne},ve=u?function(e,n){var r=oe(e,n);return t.createElement(iL.Provider,{key:r,value:Cr(Cr({},pe),{},{order:n,item:e,itemKey:r,registerSize:le,display:n<=q})},u(e,n))}:function(e,n){var r=oe(e,n);return t.createElement(YP,PR({},pe,{order:n,key:r,item:e,renderItem:se,itemKey:r,registerSize:le,display:n<=q}))},me={order:he?q:Number.MAX_SAFE_INTEGER,className:"".concat(J,"-rest"),registerSize:function(e,t){F(t),D(j)},display:he};if(g)g&&(de=t.createElement(iL.Provider,{value:Cr(Cr({},pe),me)},g(ae)));else{var ge=m||sL;de=t.createElement(YP,PR({},pe,me),"function"===typeof ge?ge(ae):ge)}var ye=t.createElement(x,PR({className:DR()(!ne&&i,p),style:d,ref:n},S),ie.map(ve),re?de:null,y&&t.createElement(YP,PR({},pe,{responsive:ee,responsiveDisabled:!te,order:q,className:"".concat(J,"-suffix"),registerSize:function(e,t){U(t)},display:!0,style:fe}),y));return ee&&(ye=t.createElement(IP,{onResize:function(e,t){C(t.clientWidth)},disabled:!te},ye)),ye}var lL=t.forwardRef(uL);lL.displayName="Overflow",lL.Item=nL,lL.RESPONSIVE=aL,lL.INVALIDATE=oL;var cL=lL;function hL(e,t){var n=Cr({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var fL=["children","locked"],dL=t.createContext(null);function pL(e){var n=e.children,r=e.locked,i=OR(e,fL),a=t.useContext(dL),o=function(e,n,r){var i=t.useRef({});return"value"in i.current&&!r(i.current.condition,n)||(i.current.value=e(),i.current.condition=n),i.current.value}((function(){return function(e,t){var n=Cr({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(a,i)}),[a,i],(function(e,t){return!r&&(e[0]!==t[0]||!WP()(e[1],t[1]))}));return t.createElement(dL.Provider,{value:o},n)}function vL(e,n,r,i){var a=t.useContext(dL),o=a.activeKey,s=a.onActive,u=a.onInactive,l={active:o===e};return n||(l.onMouseEnter=function(t){null===r||void 0===r||r({key:e,domEvent:t}),s(e)},l.onMouseLeave=function(t){null===i||void 0===i||i({key:e,domEvent:t}),u(e)}),l}var mL=["item"];function gL(e){var t=e.item,n=OR(e,mL);return Object.defineProperty(n,"item",{get:function(){return nP(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function yL(e){var n=e.icon,r=e.props,i=e.children;return("function"===typeof n?t.createElement(n,Cr({},r)):n)||i||null}function bL(e){var n=t.useContext(dL),r=n.mode,i=n.rtl,a=n.inlineIndent;if("inline"!==r)return null;return i?{paddingRight:e*a}:{paddingLeft:e*a}}var xL=[],wL=t.createContext(null);function _L(){return t.useContext(wL)}var SL=t.createContext(xL);function kL(e){var n=t.useContext(SL);return t.useMemo((function(){return void 0!==e?[].concat(pr(n),[e]):n}),[n,e])}var ML=t.createContext(null),TL=t.createContext(null);function EL(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function CL(e){return EL(t.useContext(TL),e)}var AL=t.createContext({}),RL=["title","attribute","elementRef"],PL=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],LL=["active"],OL=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var e=this.props,n=e.title,r=e.attribute,i=e.elementRef,a=hL(OR(e,RL),["eventKey"]);return nP(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),t.createElement(cL.Item,PR({},r,{title:"string"===typeof n?n:void 0},a,{ref:i}))}}]),r}(t.Component),NL=function(e){var n,r=e.style,i=e.className,a=e.eventKey,o=(e.warnKey,e.disabled),s=e.itemIcon,u=e.children,l=e.role,c=e.onMouseEnter,h=e.onMouseLeave,f=e.onClick,d=e.onKeyDown,p=e.onFocus,v=OR(e,PL),m=CL(a),g=t.useContext(dL),y=g.prefixCls,b=g.onItemClick,x=g.disabled,w=g.overflowDisabled,_=g.itemIcon,S=g.selectedKeys,k=g.onActive,M=t.useContext(AL)._internalRenderMenuItem,T="".concat(y,"-item"),E=t.useRef(),C=t.useRef(),A=x||o,R=kL(a);var P=function(e){return{key:a,keyPath:pr(R).reverse(),item:E.current,domEvent:e}},L=s||_,O=vL(a,A,c,h),N=O.active,D=OR(O,LL),I=S.includes(a),j=bL(R.length),F={};"option"===e.role&&(F["aria-selected"]=I);var z=t.createElement(OL,PR({ref:E,elementRef:C,role:null===l?"none":l||"menuitem",tabIndex:o?null:-1,"data-menu-id":w&&m?null:m},v,D,F,{component:"li","aria-disabled":o,style:Cr(Cr({},j),r),className:DR()(T,(n={},wr(n,"".concat(T,"-active"),N),wr(n,"".concat(T,"-selected"),I),wr(n,"".concat(T,"-disabled"),A),n),i),onClick:function(e){if(!A){var t=P(e);null===f||void 0===f||f(gL(t)),b(t)}},onKeyDown:function(e){if(null===d||void 0===d||d(e),e.which===zP.ENTER){var t=P(e);null===f||void 0===f||f(gL(t)),b(t)}},onFocus:function(e){k(a),null===p||void 0===p||p(e)}}),u,t.createElement(yL,{props:Cr(Cr({},e),{},{isSelected:I}),icon:L}));return M&&(z=M(z,e,{selected:I})),z};var DL=function(e){var n=e.eventKey,r=_L(),i=kL(n);return t.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:t.createElement(NL,e)},IL=["label","children","key","type"];function jL(e,n){return jR(e).map((function(e,r){if(t.isValidElement(e)){var i,a,o=e.key,s=null!==(i=null===(a=e.props)||void 0===a?void 0:a.eventKey)&&void 0!==i?i:o;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(pr(n),[r]).join("-")));var u={key:s,eventKey:s};return t.cloneElement(e,u)}return e}))}function FL(e){return(e||[]).map((function(e,n){if(e&&"object"===(0,vr.Z)(e)){var r=e.label,i=e.children,a=e.key,o=e.type,s=OR(e,IL),u=null!==a&&void 0!==a?a:"tmp-".concat(n);return i||"group"===o?"group"===o?t.createElement(HD,PR({key:u},s,{title:r}),FL(i)):t.createElement(gD,PR({key:u},s,{title:r}),FL(i)):"divider"===o?t.createElement(WD,PR({key:u},s)):t.createElement(DL,PR({key:u},s),r)}return null})).filter((function(e){return e}))}function zL(e,t,n){var r=e;return t&&(r=FL(t)),jL(r,n)}function BL(e){var n=t.useRef(e);n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return e?r:void 0}var UL=["className","children"],VL=function(e,n){var r=e.className,i=e.children,a=OR(e,UL),o=t.useContext(dL),s=o.prefixCls,u=o.mode,l=o.rtl;return t.createElement("ul",PR({className:DR()(s,l&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===u?"inline":"vertical"),r)},a,{"data-menu-list":!0,ref:n}),i)},GL=t.forwardRef(VL);GL.displayName="SubMenuList";var HL=GL;function WL(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function ZL(e,t,n,r){var i=oP.unstable_batchedUpdates?function(e){oP.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i,r)}}}var $L=(0,t.forwardRef)((function(e,n){var r=e.didUpdate,i=e.getContainer,a=e.children,o=(0,t.useRef)(),s=(0,t.useRef)();(0,t.useImperativeHandle)(n,(function(){return{}}));var u=(0,t.useRef)(!1);return!u.current&&BR()&&(s.current=i(),o.current=s.current.parentNode,u.current=!0),(0,t.useEffect)((function(){null===r||void 0===r||r(e)})),(0,t.useEffect)((function(){return null===s.current.parentNode&&null!==o.current&&o.current.appendChild(s.current),function(){var e,t;null===(e=s.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.current)}}),[]),s.current?oP.createPortal(a,s.current):null})),qL=$L;function XL(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function YL(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var KL=function(e,t){var n={animationend:YL("Animation","AnimationEnd"),transitionend:YL("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(BR(),"undefined"!==typeof window?window:{}),JL={};if(BR()){var QL=document.createElement("div");JL=QL.style}var eO={};function tO(e){if(eO[e])return eO[e];var t=KL[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(t,a)&&a in JL)return eO[e]=t[a],eO[e]}return""}var nO=tO("animationend"),rO=tO("transitionend"),iO=!(!nO||!rO),aO=nO||"animationend",oO=rO||"transitionend";function sO(e,t){return e?"object"===(0,vr.Z)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var uO="none",lO="appear",cO="enter",hO="leave",fO="none",dO="prepare",pO="start",vO="active",mO="end",gO=BR()?t.useLayoutEffect:t.useEffect,yO=[dO,pO,vO,mO];function bO(e){return e===vO||e===mO}var xO=function(e,n){var r=br(HR(fO),2),i=r[0],a=r[1],o=function(){var e=t.useRef(null);function n(){JR.cancel(e.current)}return t.useEffect((function(){return function(){n()}}),[]),[function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=JR((function(){i<=1?r({isCanceled:function(){return a!==e.current}}):t(r,i-1)}));e.current=a},n]}(),s=br(o,2),u=s[0],l=s[1];return gO((function(){if(i!==fO&&i!==mO){var e=yO.indexOf(i),t=yO[e+1],r=n(i);false===r?a(t,!0):u((function(e){function n(){e.isCanceled()||a(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,i]),t.useEffect((function(){return function(){l()}}),[]),[function(){a(dO,!0)},i]};function wO(e,n,r,i){var a=i.motionEnter,o=void 0===a||a,s=i.motionAppear,u=void 0===s||s,l=i.motionLeave,c=void 0===l||l,h=i.motionDeadline,f=i.motionLeaveImmediately,d=i.onAppearPrepare,p=i.onEnterPrepare,v=i.onLeavePrepare,m=i.onAppearStart,g=i.onEnterStart,y=i.onLeaveStart,b=i.onAppearActive,x=i.onEnterActive,w=i.onLeaveActive,_=i.onAppearEnd,S=i.onEnterEnd,k=i.onLeaveEnd,M=i.onVisibleChanged,T=br(HR(),2),E=T[0],C=T[1],A=br(HR(uO),2),R=A[0],P=A[1],L=br(HR(null),2),O=L[0],N=L[1],D=(0,t.useRef)(!1),I=(0,t.useRef)(null);function j(){return r()}var F=(0,t.useRef)(!1);function z(e){var t=j();if(!e||e.deadline||e.target===t){var n,r=F.current;R===lO&&r?n=null===_||void 0===_?void 0:_(t,e):R===cO&&r?n=null===S||void 0===S?void 0:S(t,e):R===hO&&r&&(n=null===k||void 0===k?void 0:k(t,e)),R!==uO&&r&&!1!==n&&(P(uO,!0),N(null,!0))}}var B=function(e){var n=(0,t.useRef)(),r=(0,t.useRef)(e);r.current=e;var i=t.useCallback((function(e){r.current(e)}),[]);function a(e){e&&(e.removeEventListener(oO,i),e.removeEventListener(aO,i))}return t.useEffect((function(){return function(){a(n.current)}}),[]),[function(e){n.current&&n.current!==e&&a(n.current),e&&e!==n.current&&(e.addEventListener(oO,i),e.addEventListener(aO,i),n.current=e)},a]}(z),U=br(B,1)[0],V=t.useMemo((function(){var e,t,n;switch(R){case lO:return wr(e={},dO,d),wr(e,pO,m),wr(e,vO,b),e;case cO:return wr(t={},dO,p),wr(t,pO,g),wr(t,vO,x),t;case hO:return wr(n={},dO,v),wr(n,pO,y),wr(n,vO,w),n;default:return{}}}),[R]),G=br(xO(R,(function(e){if(e===dO){var t=V.prepare;return!!t&&t(j())}var n;W in V&&N((null===(n=V[W])||void 0===n?void 0:n.call(V,j(),null))||null);return W===vO&&(U(j()),h>0&&(clearTimeout(I.current),I.current=setTimeout((function(){z({deadline:!0})}),h))),true})),2),H=G[0],W=G[1],Z=bO(W);F.current=Z,gO((function(){C(n);var t,r=D.current;(D.current=!0,e)&&(!r&&n&&u&&(t=lO),r&&n&&o&&(t=cO),(r&&!n&&c||!r&&f&&!n&&c)&&(t=hO),t&&(P(t),H()))}),[n]),(0,t.useEffect)((function(){(R===lO&&!u||R===cO&&!o||R===hO&&!c)&&P(uO)}),[u,o,c]),(0,t.useEffect)((function(){return function(){D.current=!1,clearTimeout(I.current)}}),[]);var $=t.useRef(!1);(0,t.useEffect)((function(){E&&($.current=!0),void 0!==E&&R===uO&&(($.current||E)&&(null===M||void 0===M||M(E)),$.current=!0)}),[E,R]);var q=O;return V.prepare&&W===pO&&(q=Cr({transition:"none"},q)),[R,W,q,null!==E&&void 0!==E?E:n]}var _O=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component),SO=_O;var kO=function(e){var n=e;function r(e){return!(!e.motionName||!n)}"object"===(0,vr.Z)(e)&&(n=e.transitionSupport);var i=t.forwardRef((function(e,n){var i=e.visible,a=void 0===i||i,o=e.removeOnLeave,s=void 0===o||o,u=e.forceRender,l=e.children,c=e.motionName,h=e.leavedClassName,f=e.eventProps,d=r(e),p=(0,t.useRef)(),v=(0,t.useRef)();var m=br(wO(d,a,(function(){try{return p.current instanceof HTMLElement?p.current:sP(v.current)}catch(jq){return null}}),e),4),g=m[0],y=m[1],b=m[2],x=m[3],w=t.useRef(x);x&&(w.current=!0);var _,S=t.useCallback((function(e){p.current=e,rP(n,e)}),[n]),k=Cr(Cr({},f),{},{visible:a});if(l)if(g!==uO&&r(e)){var M,T;y===dO?T="prepare":bO(y)?T="active":y===pO&&(T="start"),_=l(Cr(Cr({},k),{},{className:DR()(sO(c,g),(M={},wr(M,sO(c,"".concat(g,"-").concat(T)),T),wr(M,c,"string"===typeof c),M)),style:b}),S)}else _=x?l(Cr({},k),S):!s&&w.current?l(Cr(Cr({},k),{},{className:h}),S):u?l(Cr(Cr({},k),{},{style:{display:"none"}}),S):null;else _=null;t.isValidElement(_)&&aP(_)&&(_.ref||(_=t.cloneElement(_,{ref:S})));return t.createElement(SO,{ref:v},_)}));return i.displayName="CSSMotion",i}(iO),MO="add",TO="keep",EO="remove",CO="removed";function AO(e){var t;return Cr(Cr({},t=e&&"object"===(0,vr.Z)(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function RO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(AO)}function PO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,a=RO(e),o=RO(t);a.forEach((function(e){for(var t=!1,a=r;a<i;a+=1){var s=o[a];if(s.key===e.key){r<a&&(n=n.concat(o.slice(r,a).map((function(e){return Cr(Cr({},e),{},{status:MO})}))),r=a),n.push(Cr(Cr({},s),{},{status:TO})),r+=1,t=!0;break}}t||n.push(Cr(Cr({},e),{},{status:EO}))})),r<i&&(n=n.concat(o.slice(r).map((function(e){return Cr(Cr({},e),{},{status:MO})}))));var s={};n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1}));var u=Object.keys(s).filter((function(e){return s[e]>1}));return u.forEach((function(e){n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==EO})),n.forEach((function(t){t.key===e&&(t.status=TO)}))})),n}var LO=["component","children","onVisibleChanged","onAllRemoved"],OO=["status"],NO=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kO,r=function(e){(0,h.Z)(i,e);var r=(0,f.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Cr(Cr({},e),{},{status:CO})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==CO})).length},e}return(0,l.Z)(i,[{key:"render",value:function(){var e=this,r=this.state.keyEntities,i=this.props,a=i.component,o=i.children,s=i.onVisibleChanged,u=i.onAllRemoved,l=OR(i,LO),c=a||t.Fragment,h={};return NO.forEach((function(e){h[e]=l[e],delete l[e]})),delete l.keys,t.createElement(c,l,r.map((function(r){var i=r.status,a=OR(r,OO),l=i===MO||i===TO;return t.createElement(n,PR({},h,{key:a.key,visible:l,eventProps:a,onVisibleChanged:function(t){(null===s||void 0===s||s(t,{key:a.key}),t)||0===e.removeKey(a.key)&&u&&u()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=RO(n);return{keyEntities:PO(r,i).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==CO||e.status!==EO}))}}}]),i}(t.Component);r.defaultProps={component:"div"}}(iO);var DO=kO;function IO(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function jO(e){var n=e.prefixCls,r=e.visible,i=e.zIndex,a=e.mask,o=e.maskMotion,s=e.maskAnimation,u=e.maskTransitionName;if(!a)return null;var l={};return(o||u||s)&&(l=Cr({motionAppear:!0},IO({motion:o,prefixCls:n,transitionName:u,animation:s}))),t.createElement(DO,PR({},l,{visible:r,removeOnLeave:!0}),(function(e){var r=e.className;return t.createElement("div",{style:{zIndex:i},className:DR()("".concat(n,"-mask"),r)})}))}var FO,zO=function(e){if(!e)return!1;if(e instanceof HTMLElement&&e.offsetParent)return!0;if(e instanceof SVGGraphicsElement&&e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e instanceof HTMLElement&&e.getBoundingClientRect){var i=e.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}return!1};function BO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BO(Object(n),!0).forEach((function(t){GO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VO(e){return VO="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VO(e)}function GO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HO={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function WO(){if(void 0!==FO)return FO;FO="";var e=document.createElement("p").style;for(var t in HO)t+"Transform"in e&&(FO=t);return FO}function ZO(){return WO()?"".concat(WO(),"TransitionProperty"):"transitionProperty"}function $O(){return WO()?"".concat(WO(),"Transform"):"transform"}function qO(e,t){var n=ZO();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function XO(e,t){var n=$O();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var YO,KO=/matrix\((.*)\)/,JO=/matrix3d\((.*)\)/;function QO(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function eN(e,t,n){var r=n;if("object"!==VO(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):YO(e,t);for(var i in t)t.hasOwnProperty(i)&&eN(e,i,t[i])}function tN(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function nN(e){return tN(e)}function rN(e){return tN(e,!0)}function iN(e){var t=function(e){var t,n,r,i=e.ownerDocument,a=i.body,o=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=o.clientLeft||a.clientLeft||0,top:r-=o.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=nN(r),t.top+=rN(r),t}function aN(e){return null!==e&&void 0!==e&&e==e.window}function oN(e){return aN(e)?e.document:9===e.nodeType?e:e.ownerDocument}var sN=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),uN=/^(top|right|bottom|left)$/;function lN(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function cN(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function hN(e,t,n){"static"===eN(e,"position")&&(e.style.position="relative");var r=-999,i=-999,a=lN("left",n),o=lN("top",n),s=cN(a),u=cN(o);"left"!==a&&(r=999),"top"!==o&&(i=999);var l="",c=iN(e);("left"in t||"top"in t)&&(l=function(e){return e.style.transitionProperty||e.style[ZO()]}(e)||"",qO(e,"none")),"left"in t&&(e.style[s]="",e.style[a]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[o]="".concat(i,"px")),QO(e);var h=iN(e),f={};for(var d in t)if(t.hasOwnProperty(d)){var p=lN(d,n),v="left"===d?r:i,m=c[d]-h[d];f[p]=p===d?v+m:v-m}eN(e,f),QO(e),("left"in t||"top"in t)&&qO(e,l);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=lN(y,n),x=t[y]-c[y];g[b]=y===b?f[b]+x:f[b]-x}eN(e,g)}function fN(e,t){var n=iN(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue($O());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue($O());if(r&&"none"!==r){var i,a=r.match(KO);a?((i=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,XO(e,"matrix(".concat(i.join(","),")"))):((i=r.match(JO)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,XO(e,"matrix3d(".concat(i.join(","),")")))}else XO(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}function dN(e,t){for(var n=0;n<e.length;n++)t(e[n])}function pN(e){return"border-box"===YO(e,"boxSizing")}"undefined"!==typeof window&&(YO=window.getComputedStyle?function(e,t,n){var r=n,i="",a=oN(e);return(r=r||a.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(sN.test(n)&&!uN.test(t)){var r=e.style,i=r.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=i,e.runtimeStyle.left=a}return""===n?"auto":n});var vN=["margin","border","padding"];function mN(e,t,n){var r,i={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=i[r])}function gN(e,t,n){var r,i,a,o=0;for(i=0;i<t.length;i++)if(r=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===r?"".concat(r).concat(n[a],"Width"):r+n[a],o+=parseFloat(YO(e,s))||0}return o}var yN={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function bN(e,t,n){var r=n;if(aN(e))return"width"===t?yN.viewportWidth(e):yN.viewportHeight(e);if(9===e.nodeType)return"width"===t?yN.docWidth(e):yN.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),o=pN(e),s=0;(null===a||void 0===a||a<=0)&&(a=void 0,(null===(s=YO(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===r&&(r=o?1:-1);var u=void 0!==a||o,l=a||s;return-1===r?u?l-gN(e,["border","padding"],i):s:u?1===r?l:l+(2===r?-gN(e,["border"],i):gN(e,["margin"],i)):s+gN(e,vN.slice(r),i)}dN(["Width","Height"],(function(e){yN["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],yN["viewport".concat(e)](n))},yN["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||i&&i[n]||a}}));var xN={position:"absolute",visibility:"hidden",display:"block"};function wN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=bN.apply(void 0,t):mN(i,xN,(function(){r=bN.apply(void 0,t)})),r}function _N(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}dN(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);yN["outer".concat(t)]=function(t,n){return t&&wN(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];yN[e]=function(t,r){var i=r;return void 0!==i?t?(pN(t)&&(i+=gN(t,["padding","border"],n)),eN(t,e,i)):void 0:t&&wN(t,e,-1)}}));var SN={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:oN,offset:function(e,t,n){if("undefined"===typeof t)return iN(e);!function(e,t,n){if(n.ignoreShake){var r=iN(e),i=r.left.toFixed(0),a=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(i===o&&a===s)return}n.useCssRight||n.useCssBottom?hN(e,t,n):n.useCssTransform&&$O()in document.body.style?fN(e,t):hN(e,t,n)}(e,t,n||{})},isWindow:aN,each:dN,css:eN,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:_N,getWindowScrollLeft:function(e){return nN(e)},getWindowScrollTop:function(e){return rN(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)SN.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};_N(SN,yN);var kN=SN.getParent;function MN(e){if(SN.isWindow(e)||9===e.nodeType)return null;var t,n=SN.getDocument(e).body,r=SN.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:kN(e);for(t=kN(e);t&&t!==n&&9!==t.nodeType;t=kN(t))if("static"!==(r=SN.css(t,"position")))return t;return null}var TN=SN.getParent;function EN(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=MN(e),i=SN.getDocument(e),a=i.defaultView||i.parentWindow,o=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===SN.css(r,"overflow")){if(r===o||r===s)break}else{var u=SN.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=MN(r)}var l=null;SN.isWindow(e)||9===e.nodeType||(l=e.style.position,"absolute"===SN.css(e,"position")&&(e.style.position="fixed"));var c=SN.getWindowScrollLeft(a),h=SN.getWindowScrollTop(a),f=SN.viewportWidth(a),d=SN.viewportHeight(a),p=s.scrollWidth,v=s.scrollHeight,m=window.getComputedStyle(o);if("hidden"===m.overflowX&&(p=a.innerWidth),"hidden"===m.overflowY&&(v=a.innerHeight),e.style&&(e.style.position=l),t||function(e){if(SN.isWindow(e)||9===e.nodeType)return!1;var t=SN.getDocument(e),n=t.body,r=null;for(r=TN(e);r&&r!==n&&r!==t;r=TN(r))if("fixed"===SN.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,c),n.top=Math.max(n.top,h),n.right=Math.min(n.right,c+f),n.bottom=Math.min(n.bottom,h+d);else{var g=Math.max(p,c+f);n.right=Math.min(n.right,g);var y=Math.max(v,h+d);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function CN(e){var t,n,r;if(SN.isWindow(e)||9===e.nodeType){var i=SN.getWindow(e);t={left:SN.getWindowScrollLeft(i),top:SN.getWindowScrollTop(i)},n=SN.viewportWidth(i),r=SN.viewportHeight(i)}else t=SN.offset(e),n=SN.outerWidth(e),r=SN.outerHeight(e);return t.width=n,t.height=r,t}function AN(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,a=e.height,o=e.left,s=e.top;return"c"===n?s+=a/2:"b"===n&&(s+=a),"c"===r?o+=i/2:"r"===r&&(o+=i),{left:o,top:s}}function RN(e,t,n,r,i){var a=AN(t,n[1]),o=AN(e,n[0]),s=[o.left-a.left,o.top-a.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function PN(e,t,n){return e.left<n.left||e.left+t.width>n.right}function LN(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function ON(e,t,n){var r=[];return SN.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function NN(e,t){return e[t]=-e[t],e}function DN(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function IN(e,t){e[0]=DN(e[0],t.width),e[1]=DN(e[1],t.height)}function jN(e,t,n,r){var i=n.points,a=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,u=n.source||e;a=[].concat(a),o=[].concat(o);var l={},c=0,h=EN(u,!(!(s=s||{})||!s.alwaysByViewport)),f=CN(u);IN(a,f),IN(o,t);var d=RN(f,t,i,a,o),p=SN.merge(f,d);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&PN(d,f,h)){var v=ON(i,/[lr]/gi,{l:"r",r:"l"}),m=NN(a,0),g=NN(o,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(RN(f,t,v,m,g),f,h)||(c=1,i=v,a=m,o=g)}if(s.adjustY&&LN(d,f,h)){var y=ON(i,/[tb]/gi,{t:"b",b:"t"}),b=NN(a,1),x=NN(o,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(RN(f,t,y,b,x),f,h)||(c=1,i=y,a=b,o=x)}c&&(d=RN(f,t,i,a,o),SN.mix(p,d));var w=PN(d,f,h),_=LN(d,f,h);if(w||_){var S=i;w&&(S=ON(i,/[lr]/gi,{l:"r",r:"l"})),_&&(S=ON(i,/[tb]/gi,{t:"b",b:"t"})),i=S,a=n.offset||[0,0],o=n.targetOffset||[0,0]}l.adjustX=s.adjustX&&w,l.adjustY=s.adjustY&&_,(l.adjustX||l.adjustY)&&(p=function(e,t,n,r){var i=SN.clone(e),a={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+a.width>n.right&&(a.width-=i.left+a.width-n.right),r.adjustX&&i.left+a.width>n.right&&(i.left=Math.max(n.right-a.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+a.height>n.bottom&&(a.height-=i.top+a.height-n.bottom),r.adjustY&&i.top+a.height>n.bottom&&(i.top=Math.max(n.bottom-a.height,n.top)),SN.mix(i,a)}(d,f,h,l))}return p.width!==f.width&&SN.css(u,"width",SN.width(u)+p.width-f.width),p.height!==f.height&&SN.css(u,"height",SN.height(u)+p.height-f.height),SN.offset(u,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:a,targetOffset:o,overflow:l}}function FN(e,t,n){var r=n.target||t,i=CN(r),a=!function(e,t){var n=EN(e,t),r=CN(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return jN(e,i,n,a)}FN.__getOffsetParent=MN,FN.__getVisibleRectForElement=EN;var zN=n(8111),BN=n.n(zN);function UN(e,t){var n=null,r=null;var i=new AP((function(e){var i=br(e,1)[0].target;if(document.documentElement.contains(i)){var a=i.getBoundingClientRect(),o=a.width,s=a.height,u=Math.floor(o),l=Math.floor(s);n===u&&r===l||Promise.resolve().then((function(){t({width:u,height:l})})),n=u,r=l}}));return e&&i.observe(e),function(){i.disconnect()}}function VN(e){return"function"!==typeof e?null:e()}function GN(e){return"object"===(0,vr.Z)(e)&&e?e:null}var HN=function(e,n){var r=e.children,i=e.disabled,a=e.target,o=e.align,s=e.onAlign,u=e.monitorWindowResize,l=e.monitorBufferTime,c=void 0===l?0:l,h=t.useRef({}),f=t.useRef(),d=t.Children.only(r),p=t.useRef({});p.current.disabled=i,p.current.target=a,p.current.align=o,p.current.onAlign=s;var v=function(e,n){var r=t.useRef(!1),i=t.useRef(null);function a(){window.clearTimeout(i.current)}return[function t(o){if(a(),r.current&&!0!==o)i.current=window.setTimeout((function(){r.current=!1,t()}),n);else{if(!1===e())return;r.current=!0,i.current=window.setTimeout((function(){r.current=!1}),n)}},function(){r.current=!1,a()}]}((function(){var e=p.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign;if(!t&&n){var a,o=f.current,s=VN(n),u=GN(n);h.current.element=s,h.current.point=u,h.current.align=r;var l=document.activeElement;return s&&zO(s)?a=FN(o,s,r):u&&(a=function(e,t,n){var r,i,a=SN.getDocument(e),o=a.defaultView||a.parentWindow,s=SN.getWindowScrollLeft(o),u=SN.getWindowScrollTop(o),l=SN.viewportWidth(o),c=SN.viewportHeight(o),h={left:r="pageX"in t?t.pageX:s+t.clientX,top:i="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},f=r>=0&&r<=s+l&&i>=0&&i<=u+c,d=[n.points[0],"cc"];return jN(e,h,UO(UO({},n),{},{points:d}),f)}(o,u,r)),function(e,t){e!==document.activeElement&&WL(t,e)&&"function"===typeof e.focus&&e.focus()}(l,o),i&&a&&i(o,a),!0}return!1}),c),m=br(v,2),g=m[0],y=m[1],b=t.useRef({cancel:function(){}}),x=t.useRef({cancel:function(){}});t.useEffect((function(){var e=VN(a),t=GN(a);f.current!==x.current.element&&(x.current.cancel(),x.current.element=f.current,x.current.cancel=UN(f.current,g)),h.current.element===e&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(h.current.point,t)&&BN()(h.current.align,o)||(g(),b.current.element!==e&&(b.current.cancel(),b.current.element=e,b.current.cancel=UN(e,g)))})),t.useEffect((function(){i?y():g()}),[i]);var w=t.useRef(null);return t.useEffect((function(){u?w.current||(w.current=ZL(window,"resize",g)):w.current&&(w.current.remove(),w.current=null)}),[u]),t.useEffect((function(){return function(){b.current.cancel(),x.current.cancel(),w.current&&w.current.remove(),y()}}),[]),t.useImperativeHandle(n,(function(){return{forceAlign:function(){return g(!0)}}})),t.isValidElement(d)&&(d=t.cloneElement(d,{ref:iP(d.ref,f)})),d},WN=t.forwardRef(HN);WN.displayName="Align";var ZN=WN,$N=["measure","alignPre","align",null,"motion"],qN=t.forwardRef((function(e,n){var r=e.visible,i=e.prefixCls,a=e.className,o=e.style,s=e.children,u=e.zIndex,l=e.stretch,c=e.destroyPopupOnHide,h=e.forceRender,f=e.align,d=e.point,p=e.getRootDomNode,v=e.getClassNameFromAlign,m=e.onAlign,g=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,x=e.onTouchStart,w=e.onClick,_=(0,t.useRef)(),S=(0,t.useRef)(),k=br((0,t.useState)(),2),M=k[0],T=k[1],E=function(e){var n=br(t.useState({width:0,height:0}),2),r=n[0],i=n[1],a=t.useMemo((function(){var t={};if(e){var n=r.width,i=r.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]);return[a,function(e){i({width:e.offsetWidth,height:e.offsetHeight})}]}(l),C=br(E,2),A=C[0],R=C[1];var P=function(e,n){var r=br(HR(null),2),i=r[0],a=r[1],o=(0,t.useRef)();function s(e){a(e,!0)}function u(){JR.cancel(o.current)}return(0,t.useEffect)((function(){s("measure")}),[e]),(0,t.useEffect)((function(){"measure"===i&&n(),i&&(o.current=JR(yr(mr().mark((function e(){var t,n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=$N.indexOf(i),(n=$N[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[i]),(0,t.useEffect)((function(){return function(){u()}}),[]),[i,function(e){u(),o.current=JR((function(){s((function(e){switch(i){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){l&&R(p())})),L=br(P,2),O=L[0],N=L[1],D=br((0,t.useState)(0),2),I=D[0],j=D[1],F=(0,t.useRef)();function z(){var e;null===(e=_.current)||void 0===e||e.forceAlign()}function B(e,t){var n=v(t);M!==n&&T(n),j((function(e){return e+1})),"align"===O&&(null===m||void 0===m||m(e,t))}GR((function(){"alignPre"===O&&j(0)}),[O]),GR((function(){"align"===O&&(I<2?z():N((function(){var e;null===(e=F.current)||void 0===e||e.call(F)})))}),[I]);var U=Cr({},IO(e));function V(){return new Promise((function(e){F.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=U[e];U[e]=function(e,n){return N(),null===t||void 0===t?void 0:t(e,n)}})),t.useEffect((function(){U.motionName||"motion"!==O||N()}),[U.motionName,O]),t.useImperativeHandle(n,(function(){return{forceAlign:z,getElement:function(){return S.current}}}));var G=Cr(Cr({},A),{},{zIndex:u,opacity:"motion"!==O&&"stable"!==O&&r?0:void 0,pointerEvents:r||"stable"===O?void 0:"none"},o),H=!0;!(null===f||void 0===f?void 0:f.points)||"align"!==O&&"stable"!==O||(H=!1);var W=s;return t.Children.count(s)>1&&(W=t.createElement("div",{className:"".concat(i,"-content")},s)),t.createElement(DO,PR({visible:r,ref:S,leavedClassName:"".concat(i,"-hidden")},U,{onAppearPrepare:V,onEnterPrepare:V,removeOnLeave:c,forceRender:h}),(function(e,n){var r=e.className,o=e.style,s=DR()(i,a,M,r);return t.createElement(ZN,{target:d||p,key:"popup",ref:_,monitorWindowResize:!0,disabled:H,align:f,onAlign:B},t.createElement("div",{ref:n,className:s,onMouseEnter:g,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:x,onClick:w,style:Cr(Cr({},o),G)},W))}))}));qN.displayName="PopupInner";var XN=qN,YN=t.forwardRef((function(e,n){var r=e.prefixCls,i=e.visible,a=e.zIndex,o=e.children,s=e.mobile,u=(s=void 0===s?{}:s).popupClassName,l=s.popupStyle,c=s.popupMotion,h=void 0===c?{}:c,f=s.popupRender,d=e.onClick,p=t.useRef();t.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return p.current}}}));var v=Cr({zIndex:a},l),m=o;return t.Children.count(o)>1&&(m=t.createElement("div",{className:"".concat(r,"-content")},o)),f&&(m=f(m)),t.createElement(DO,PR({visible:i,ref:p,removeOnLeave:!0},h),(function(e,n){var i=e.className,a=e.style,o=DR()(r,u,i);return t.createElement("div",{ref:n,className:o,onClick:d,style:Cr(Cr({},a),v)},m)}))}));YN.displayName="MobilePopupInner";var KN=YN,JN=["visible","mobile"],QN=t.forwardRef((function(e,n){var r=e.visible,i=e.mobile,a=OR(e,JN),o=br((0,t.useState)(r),2),s=o[0],u=o[1],l=br((0,t.useState)(!1),2),c=l[0],h=l[1],f=Cr(Cr({},a),{},{visible:s});(0,t.useEffect)((function(){u(r),r&&i&&h(FR())}),[r,i]);var d=c?t.createElement(KN,PR({},f,{mobile:i,ref:n})):t.createElement(XN,PR({},f,{ref:n}));return t.createElement("div",null,t.createElement(jO,f),d)}));QN.displayName="Popup";var eD=QN,tD=t.createContext(null);function nD(){}function rD(){return""}function iD(e){return e?e.ownerDocument:window.document}var aD=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var oD=function(e){var n=function(n){(0,h.Z)(i,n);var r=(0,f.Z)(i);function i(e){var n,a;return(0,u.Z)(this,i),(n=r.call(this,e)).popupRef=t.createRef(),n.triggerRef=t.createRef(),n.portalContainer=void 0,n.attachId=void 0,n.clickOutsideHandler=void 0,n.touchOutsideHandler=void 0,n.contextMenuOutsideHandler1=void 0,n.contextMenuOutsideHandler2=void 0,n.mouseDownTimeout=void 0,n.focusTime=void 0,n.preClickTime=void 0,n.preTouchTime=void 0,n.delayTimer=void 0,n.hasPopupMouseDown=void 0,n.onMouseEnter=function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)},n.onMouseMove=function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)},n.onMouseLeave=function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onPopupMouseEnter=function(){n.clearDelayTimer()},n.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&WL(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onFocus=function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))},n.onMouseDown=function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()},n.onTouchStart=function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()},n.onBlur=function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)},n.onContextMenu=function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)},n.onContextMenuClose=function(){n.isContextMenuToShow()&&n.close()},n.onClick=function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!n.state.popupVisible;(n.isClickToHide()&&!r||r&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)},n.onPopupMouseDown=function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)},n.onDocumentClick=function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,r=n.getRootDomNode(),i=n.getPopupDomNode();WL(r,t)&&!n.isContextMenuOnly()||WL(i,t)||n.hasPopupMouseDown||n.close()}},n.getRootDomNode=function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=sP(n.triggerRef.current);if(t)return t}catch(Fq){}return oP.findDOMNode((0,c.Z)(n))},n.getPopupClassNameFromAlign=function(e){var t=[],r=n.props,i=r.popupPlacement,a=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return i&&a&&t.push(function(e,t,n,r){for(var i=n.points,a=Object.keys(e),o=0;o<a.length;o+=1){var s=a[o];if(XL(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(a,o,e,s)),u&&t.push(u(e)),t.join(" ")},n.getComponent=function(){var e=n.props,r=e.prefixCls,i=e.destroyPopupOnHide,a=e.popupClassName,o=e.onPopupAlign,s=e.popupMotion,u=e.popupAnimation,l=e.popupTransitionName,c=e.popupStyle,h=e.mask,f=e.maskAnimation,d=e.maskTransitionName,p=e.maskMotion,v=e.zIndex,m=e.popup,g=e.stretch,y=e.alignPoint,b=e.mobile,x=e.forceRender,w=e.onPopupClick,_=n.state,S=_.popupVisible,k=_.point,M=n.getPopupAlign(),T={};return n.isMouseEnterToShow()&&(T.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(T.onMouseLeave=n.onPopupMouseLeave),T.onMouseDown=n.onPopupMouseDown,T.onTouchStart=n.onPopupMouseDown,t.createElement(eD,PR({prefixCls:r,destroyPopupOnHide:i,visible:S,point:y&&k,className:a,align:M,onAlign:o,animation:u,getClassNameFromAlign:n.getPopupClassNameFromAlign},T,{stretch:g,getRootDomNode:n.getRootDomNode,style:c,mask:h,zIndex:v,transitionName:l,maskAnimation:f,maskTransitionName:d,maskMotion:p,ref:n.popupRef,motion:s,mobile:b,forceRender:x,onClick:w}),"function"===typeof m?m():m)},n.attachParent=function(e){JR.cancel(n.attachId);var t,r=n.props,i=r.getPopupContainer,a=r.getDocument,o=n.getRootDomNode();i?(o||0===i.length)&&(t=i(o)):t=a(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=JR((function(){n.attachParent(e)}))},n.getContainer=function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer},n.setPoint=function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})},n.handlePortalUpdate=function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)},n.triggerContextValue={onPopupMouseDown:n.onPopupMouseDown},a="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,n.state={prevPopupVisible:a,popupVisible:a},aD.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return(0,l.Z)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=ZL(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=ZL(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=ZL(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=ZL(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),JR.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Cr(Cr({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var a=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,a),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,r=this.props,i=r.children,a=r.forceRender,o=r.alignPoint,s=r.className,u=r.autoDestroy,l=t.Children.only(i),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var h=DR()(l&&l.props&&l.props.className,s);h&&(c.className=h);var f=Cr({},c);aP(l)&&(f.ref=iP(this.triggerRef,l.ref));var d,p=t.cloneElement(l,f);return(n||this.popupRef.current||a)&&(d=t.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&u&&(d=null),t.createElement(tD.Provider,{value:this.triggerContextValue},p,d)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),i}(t.Component);return n.contextType=tD,n.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:rD,getDocument:iD,onPopupVisibleChange:nD,afterPopupVisibleChange:nD,onPopupAlign:nD,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},n}(qL),sD={adjustX:1,adjustY:1},uD={topLeft:{points:["bl","tl"],overflow:sD,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:sD,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:sD,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:sD,offset:[4,0]}},lD={topLeft:{points:["bl","tl"],overflow:sD,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:sD,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:sD,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:sD,offset:[4,0]}};function cD(e,t,n){return t||(n?n[e]||n.other:void 0)}var hD={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function fD(e){var n=e.prefixCls,r=e.visible,i=e.children,a=e.popup,o=e.popupClassName,s=e.popupOffset,u=e.disabled,l=e.mode,c=e.onVisibleChange,h=t.useContext(dL),f=h.getPopupContainer,d=h.rtl,p=h.subMenuOpenDelay,v=h.subMenuCloseDelay,m=h.builtinPlacements,g=h.triggerSubMenuAction,y=h.forceSubMenuRender,b=h.rootClassName,x=h.motion,w=h.defaultMotions,_=br(t.useState(!1),2),S=_[0],k=_[1],M=Cr(Cr({},d?lD:uD),m),T=hD[l],E=Cr(Cr({},cD(l,x,w)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),C=t.useRef();return t.useEffect((function(){return C.current=JR((function(){k(r)})),function(){JR.cancel(C.current)}}),[r]),t.createElement(oD,{prefixCls:n,popupClassName:DR()("".concat(n,"-popup"),wr({},"".concat(n,"-rtl"),d),o,b),stretch:"horizontal"===l?"minWidth":null,getPopupContainer:f,builtinPlacements:M,popupPlacement:T,popupVisible:S,popup:a,popupAlign:s&&{offset:s},action:u?[]:[g],mouseEnterDelay:p,mouseLeaveDelay:v,onPopupVisibleChange:c,forceRender:y,popupMotion:E},i)}function dD(e){var n=e.id,r=e.open,i=e.keyPath,a=e.children,o="inline",s=t.useContext(dL),u=s.prefixCls,l=s.forceSubMenuRender,c=s.motion,h=s.defaultMotions,f=s.mode,d=t.useRef(!1);d.current=f===o;var p=br(t.useState(!d.current),2),v=p[0],m=p[1],g=!!d.current&&r;t.useEffect((function(){d.current&&m(!1)}),[f]);var y=Cr({},cD(o,c,h));i.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return d.current||e||m(!0),null===b||void 0===b?void 0:b(e)},v?null:t.createElement(pL,{mode:o,locked:!d.current},t.createElement(DO,PR({visible:g},y,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(u,"-hidden")}),(function(e){var r=e.className,i=e.style;return t.createElement(HL,{id:n,className:r,style:i},a)})))}var pD=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],vD=["active"],mD=function(e){var n,r=e.style,i=e.className,a=e.title,o=e.eventKey,s=(e.warnKey,e.disabled),u=e.internalPopupClose,l=e.children,c=e.itemIcon,h=e.expandIcon,f=e.popupClassName,d=e.popupOffset,p=e.onClick,v=e.onMouseEnter,m=e.onMouseLeave,g=e.onTitleClick,y=e.onTitleMouseEnter,b=e.onTitleMouseLeave,x=OR(e,pD),w=CL(o),_=t.useContext(dL),S=_.prefixCls,k=_.mode,M=_.openKeys,T=_.disabled,E=_.overflowDisabled,C=_.activeKey,A=_.selectedKeys,R=_.itemIcon,P=_.expandIcon,L=_.onItemClick,O=_.onOpenChange,N=_.onActive,D=t.useContext(AL)._internalRenderSubMenuItem,I=t.useContext(ML).isSubPathKey,j=kL(),F="".concat(S,"-submenu"),z=T||s,B=t.useRef(),U=t.useRef();var V=c||R,G=h||P,H=M.includes(o),W=!E&&H,Z=I(A,o),$=vL(o,z,y,b),q=$.active,X=OR($,vD),Y=br(t.useState(!1),2),K=Y[0],J=Y[1],Q=function(e){z||J(e)},ee=t.useMemo((function(){return q||"inline"!==k&&(K||I([C],o))}),[k,q,C,K,o,I]),te=bL(j.length),ne=BL((function(e){null===p||void 0===p||p(gL(e)),L(e)})),re=w&&"".concat(w,"-popup"),ie=t.createElement("div",PR({role:"menuitem",style:te,className:"".concat(F,"-title"),tabIndex:z?null:-1,ref:B,title:"string"===typeof a?a:null,"data-menu-id":E&&w?null:w,"aria-expanded":W,"aria-haspopup":!0,"aria-controls":re,"aria-disabled":z,onClick:function(e){z||(null===g||void 0===g||g({key:o,domEvent:e}),"inline"===k&&O(o,!H))},onFocus:function(){N(o)}},X),a,t.createElement(yL,{icon:"horizontal"!==k?G:null,props:Cr(Cr({},e),{},{isOpen:W,isSubMenu:!0})},t.createElement("i",{className:"".concat(F,"-arrow")}))),ae=t.useRef(k);if("inline"!==k&&(ae.current=j.length>1?"vertical":k),!E){var oe=ae.current;ie=t.createElement(fD,{mode:oe,prefixCls:F,visible:!u&&W&&"inline"!==k,popupClassName:f,popupOffset:d,popup:t.createElement(pL,{mode:"horizontal"===oe?"vertical":oe},t.createElement(HL,{id:re,ref:U},l)),disabled:z,onVisibleChange:function(e){"inline"!==k&&O(o,e)}},ie)}var se=t.createElement(cL.Item,PR({role:"none"},x,{component:"li",style:r,className:DR()(F,"".concat(F,"-").concat(k),i,(n={},wr(n,"".concat(F,"-open"),W),wr(n,"".concat(F,"-active"),ee),wr(n,"".concat(F,"-selected"),Z),wr(n,"".concat(F,"-disabled"),z),n)),onMouseEnter:function(e){Q(!0),null===v||void 0===v||v({key:o,domEvent:e})},onMouseLeave:function(e){Q(!1),null===m||void 0===m||m({key:o,domEvent:e})}}),ie,!E&&t.createElement(dD,{id:re,open:W,keyPath:j},l));return D&&(se=D(se,e,{selected:Z,active:ee,open:W,disabled:z})),t.createElement(pL,{onItemClick:ne,mode:"horizontal"===k?"vertical":k,itemIcon:V,expandIcon:G},se)};function gD(e){var n,r=e.eventKey,i=e.children,a=kL(r),o=jL(i,a),s=_L();return t.useEffect((function(){if(s)return s.registerPath(r,a),function(){s.unregisterPath(r,a)}}),[a]),n=s?o:t.createElement(mD,e,o),t.createElement(SL.Provider,{value:a},n)}function yD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(zO(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),a=Number(i),o=null;return i&&!Number.isNaN(a)?o=a:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}function bD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=pr(e.querySelectorAll("*")).filter((function(e){return yD(e,t)}));return yD(e,t)&&n.unshift(e),n}var xD=zP.LEFT,wD=zP.RIGHT,_D=zP.UP,SD=zP.DOWN,kD=zP.ENTER,MD=zP.ESC,TD=zP.HOME,ED=zP.END,CD=[_D,SD,xD,wD];function AD(e,t){return bD(e,!0).filter((function(e){return t.has(e)}))}function RD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=AD(e,t),a=i.length,o=i.findIndex((function(e){return n===e}));return r<0?-1===o?o=a-1:o-=1:r>0&&(o+=1),i[o=(o+a)%a]}function PD(e,n,r,i,a,o,s,u,l,c){var h=t.useRef(),f=t.useRef();f.current=n;var d=function(){JR.cancel(h.current)};return t.useEffect((function(){return function(){d()}}),[]),function(t){var p=t.which;if([].concat(CD,[kD,MD,TD,ED]).includes(p)){var v,m,g,y=function(){return v=new Set,m=new Map,g=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(EL(i,e),"']"));t&&(v.add(t),g.set(t,e),m.set(e,t))})),v};y();var b=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(n),v),x=g.get(b),w=function(e,t,n,r){var i,a,o,s,u="prev",l="next",c="children",h="parent";if("inline"===e&&r===kD)return{inlineTrigger:!0};var f=(wr(i={},_D,u),wr(i,SD,l),i),d=(wr(a={},xD,n?l:u),wr(a,wD,n?u:l),wr(a,SD,c),wr(a,kD,c),a),p=(wr(o={},_D,u),wr(o,SD,l),wr(o,kD,c),wr(o,MD,h),wr(o,xD,n?c:h),wr(o,wD,n?h:c),o);switch(null===(s={inline:f,horizontal:d,vertical:p,inlineSub:f,horizontalSub:p,verticalSub:p}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case u:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}(e,1===s(x,!0).length,r,p);if(!w&&p!==TD&&p!==ED)return;(CD.includes(p)||[TD,ED].includes(p))&&t.preventDefault();var _=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);u(r),d(),h.current=JR((function(){f.current===r&&t.focus()}))}};if([TD,ED].includes(p)||w.sibling||!b){var S,k,M=AD(S=b&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(b):a.current,v);k=p===TD?M[0]:p===ED?M[M.length-1]:RD(S,v,b,w.offset),_(k)}else if(w.inlineTrigger)l(x);else if(w.offset>0)l(x,!0),d(),h.current=JR((function(){y();var e=b.getAttribute("aria-controls"),t=RD(document.getElementById(e),v);_(t)}),5);else if(w.offset<0){var T=s(x,!0),E=T[T.length-2],C=m.get(E);l(E,!1),_(C)}}null===c||void 0===c||c(t)}}var LD=Math.random().toFixed(5).toString().slice(2),OD=0;var ND="__RC_UTIL_PATH_SPLIT__",DD=function(e){return e.join(ND)},ID="rc-menu-more";function jD(){var e=br(t.useState({}),2)[1],n=(0,t.useRef)(new Map),r=(0,t.useRef)(new Map),i=br(t.useState([]),2),a=i[0],o=i[1],s=(0,t.useRef)(0),u=(0,t.useRef)(!1),l=(0,t.useCallback)((function(t,i){var a=DD(i);r.current.set(a,t),n.current.set(t,a),s.current+=1;var o,l=s.current;o=function(){l===s.current&&(u.current||e({}))},Promise.resolve().then(o)}),[]),c=(0,t.useCallback)((function(e,t){var i=DD(t);r.current.delete(i),n.current.delete(e)}),[]),h=(0,t.useCallback)((function(e){o(e)}),[]),f=(0,t.useCallback)((function(e,t){var r=n.current.get(e)||"",i=r.split(ND);return t&&a.includes(i[0])&&i.unshift(ID),i}),[a]),d=(0,t.useCallback)((function(e,t){return e.some((function(e){return f(e,!0).includes(t)}))}),[f]),p=(0,t.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(ND),i=new Set;return pr(r.current.keys()).forEach((function(e){e.startsWith(t)&&i.add(r.current.get(e))})),i}),[]);return t.useEffect((function(){return function(){u.current=!0}}),[]),{registerPath:l,unregisterPath:c,refreshOverflowKeys:h,isSubPathKey:d,getKeyPath:f,getKeys:function(){var e=pr(n.current.keys());return a.length&&e.push(ID),e},getSubPathKeys:p}}var FD=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],zD=[],BD=t.forwardRef((function(e,n){var r,i,a=e.prefixCls,o=void 0===a?"rc-menu":a,s=e.rootClassName,u=e.style,l=e.className,c=e.tabIndex,h=void 0===c?0:c,f=e.items,d=e.children,p=e.direction,v=e.id,m=e.mode,g=void 0===m?"vertical":m,y=e.inlineCollapsed,b=e.disabled,x=e.disabledOverflow,w=e.subMenuOpenDelay,_=void 0===w?.1:w,S=e.subMenuCloseDelay,k=void 0===S?.1:S,M=e.forceSubMenuRender,T=e.defaultOpenKeys,E=e.openKeys,C=e.activeKey,A=e.defaultActiveFirst,R=e.selectable,P=void 0===R||R,L=e.multiple,O=void 0!==L&&L,N=e.defaultSelectedKeys,D=e.selectedKeys,I=e.onSelect,j=e.onDeselect,F=e.inlineIndent,z=void 0===F?24:F,B=e.motion,U=e.defaultMotions,V=e.triggerSubMenuAction,G=void 0===V?"hover":V,H=e.builtinPlacements,W=e.itemIcon,Z=e.expandIcon,$=e.overflowedIndicator,q=void 0===$?"...":$,X=e.overflowedIndicatorPopupClassName,Y=e.getPopupContainer,K=e.onClick,J=e.onOpenChange,Q=e.onKeyDown,ee=(e.openAnimation,e.openTransitionName,e._internalRenderMenuItem),te=e._internalRenderSubMenuItem,ne=OR(e,FD),re=t.useMemo((function(){return zL(d,f,zD)}),[d,f]),ie=br(t.useState(!1),2),ae=ie[0],oe=ie[1],se=t.useRef(),ue=function(e){var n=br(ZR(e,{value:e}),2),r=n[0],i=n[1];return t.useEffect((function(){OD+=1;var e="".concat(LD,"-").concat(OD);i("rc-menu-uuid-".concat(e))}),[]),r}(v),le="rtl"===p;var ce=br(t.useMemo((function(){return"inline"!==g&&"vertical"!==g||!y?[g,!1]:["vertical",y]}),[g,y]),2),he=ce[0],fe=ce[1],de=br(t.useState(0),2),pe=de[0],ve=de[1],me=pe>=re.length-1||"horizontal"!==he||x,ge=br(ZR(T,{value:E,postState:function(e){return e||zD}}),2),ye=ge[0],be=ge[1],xe=function(e){be(e),null===J||void 0===J||J(e)},we=br(t.useState(ye),2),_e=we[0],Se=we[1],ke="inline"===he,Me=t.useRef(!1);t.useEffect((function(){ke&&Se(ye)}),[ye]),t.useEffect((function(){Me.current&&(ke?be(_e):xe(zD))}),[ke]),t.useEffect((function(){return Me.current=!0,function(){Me.current=!1}}),[]);var Te=jD(),Ee=Te.registerPath,Ce=Te.unregisterPath,Ae=Te.refreshOverflowKeys,Re=Te.isSubPathKey,Pe=Te.getKeyPath,Le=Te.getKeys,Oe=Te.getSubPathKeys,Ne=t.useMemo((function(){return{registerPath:Ee,unregisterPath:Ce}}),[Ee,Ce]),De=t.useMemo((function(){return{isSubPathKey:Re}}),[Re]);t.useEffect((function(){Ae(me?zD:re.slice(pe+1).map((function(e){return e.key})))}),[pe,me]);var Ie=br(ZR(C||A&&(null===(r=re[0])||void 0===r?void 0:r.key),{value:C}),2),je=Ie[0],Fe=Ie[1],ze=BL((function(e){Fe(e)})),Be=BL((function(){Fe(void 0)}));(0,t.useImperativeHandle)(n,(function(){return{list:se.current,focus:function(e){var t,n,r,i,a=null!==je&&void 0!==je?je:null===(t=re.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;a&&(null===(n=se.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(EL(ue,a),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var Ue=br(ZR(N||[],{value:D,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?zD:[e]}}),2),Ve=Ue[0],Ge=Ue[1],He=BL((function(e){null===K||void 0===K||K(gL(e)),function(e){if(P){var t,n=e.key,r=Ve.includes(n);t=O?r?Ve.filter((function(e){return e!==n})):[].concat(pr(Ve),[n]):[n],Ge(t);var i=Cr(Cr({},e),{},{selectedKeys:t});r?null===j||void 0===j||j(i):null===I||void 0===I||I(i)}!O&&ye.length&&"inline"!==he&&xe(zD)}(e)})),We=BL((function(e,t){var n=ye.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==he){var r=Oe(e);n=n.filter((function(e){return!r.has(e)}))}WP()(ye,n)||xe(n)})),Ze=BL(Y),$e=PD(he,je,le,ue,se,Le,Pe,Fe,(function(e,t){var n=null!==t&&void 0!==t?t:!ye.includes(e);We(e,n)}),Q);t.useEffect((function(){oe(!0)}),[]);var qe=t.useMemo((function(){return{_internalRenderMenuItem:ee,_internalRenderSubMenuItem:te}}),[ee,te]),Xe="horizontal"!==he||x?re:re.map((function(e,n){return t.createElement(pL,{key:e.key,overflowDisabled:n>pe},e)})),Ye=t.createElement(cL,PR({id:v,ref:se,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:DL,className:DR()(o,"".concat(o,"-root"),"".concat(o,"-").concat(he),l,(i={},wr(i,"".concat(o,"-inline-collapsed"),fe),wr(i,"".concat(o,"-rtl"),le),i),s),dir:p,style:u,role:"menu",tabIndex:h,data:Xe,renderRawItem:function(e){return e},renderRawRest:function(e){var n=e.length,r=n?re.slice(-n):null;return t.createElement(gD,{eventKey:ID,title:q,disabled:me,internalPopupClose:0===n,popupClassName:X},r)},maxCount:"horizontal"!==he||x?cL.INVALIDATE:cL.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){ve(e)},onKeyDown:$e},ne));return t.createElement(AL.Provider,{value:qe},t.createElement(TL.Provider,{value:ue},t.createElement(pL,{prefixCls:o,rootClassName:s,mode:he,openKeys:ye,rtl:le,disabled:b,motion:ae?B:null,defaultMotions:ae?U:null,activeKey:je,onActive:ze,onInactive:Be,selectedKeys:Ve,inlineIndent:z,subMenuOpenDelay:_,subMenuCloseDelay:k,forceSubMenuRender:M,builtinPlacements:H,triggerSubMenuAction:G,getPopupContainer:Ze,itemIcon:W,expandIcon:Z,onItemClick:He,onOpenChange:We},t.createElement(ML.Provider,{value:De},Ye),t.createElement("div",{style:{display:"none"},"aria-hidden":!0},t.createElement(wL.Provider,{value:Ne},re)))))})),UD=["className","title","eventKey","children"],VD=["children"],GD=function(e){var n=e.className,r=e.title,i=(e.eventKey,e.children),a=OR(e,UD),o=t.useContext(dL).prefixCls,s="".concat(o,"-item-group");return t.createElement("li",PR({},a,{onClick:function(e){return e.stopPropagation()},className:DR()(s,n)}),t.createElement("div",{className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),t.createElement("ul",{className:"".concat(s,"-list")},i))};function HD(e){var n=e.children,r=OR(e,VD),i=jL(n,kL(r.eventKey));return _L()?i:t.createElement(GD,hL(r,["warnKey"]),i)}function WD(e){var n=e.className,r=e.style,i=t.useContext(dL).prefixCls;return _L()?null:t.createElement("li",{className:DR()("".concat(i,"-item-divider"),n),style:r})}var ZD=BD;ZD.Item=DL,ZD.SubMenu=gD,ZD.ItemGroup=HD,ZD.Divider=WD;var $D=ZD,qD={adjustX:1,adjustY:1},XD=[0,0],YD={topLeft:{points:["bl","tl"],overflow:qD,offset:[0,-4],targetOffset:XD},topCenter:{points:["bc","tc"],overflow:qD,offset:[0,-4],targetOffset:XD},topRight:{points:["br","tr"],overflow:qD,offset:[0,-4],targetOffset:XD},bottomLeft:{points:["tl","bl"],overflow:qD,offset:[0,4],targetOffset:XD},bottomCenter:{points:["tc","bc"],overflow:qD,offset:[0,4],targetOffset:XD},bottomRight:{points:["tr","br"],overflow:qD,offset:[0,4],targetOffset:XD}},KD=zP.ESC,JD=zP.TAB;var QD=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function eI(e,n){var r=e.arrow,i=void 0!==r&&r,a=e.prefixCls,o=void 0===a?"rc-dropdown":a,s=e.transitionName,u=e.animation,l=e.align,c=e.placement,h=void 0===c?"bottomLeft":c,f=e.placements,d=void 0===f?YD:f,p=e.getPopupContainer,v=e.showAction,m=e.hideAction,g=e.overlayClassName,y=e.overlayStyle,b=e.visible,x=e.trigger,w=void 0===x?["hover"]:x,_=e.autoFocus,S=OR(e,QD),k=br(t.useState(),2),M=k[0],T=k[1],E="visible"in e?b:M,C=t.useRef(null);t.useImperativeHandle(n,(function(){return C.current})),function(e){var n=e.visible,r=e.setTriggerVisible,i=e.triggerRef,a=e.onVisibleChange,o=e.autoFocus,s=t.useRef(!1),u=function(){var e,t,o,s;n&&i.current&&(null===(e=i.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(o=t.current)||void 0===o||null===(s=o.focus)||void 0===s||s.call(o),r(!1),"function"===typeof a&&a(!1))},l=function(){var e,t,n,r,a=bD(null===(e=i.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return!!(null===a||void 0===a?void 0:a.focus)&&(a.focus(),s.current=!0,!0)},c=function(e){switch(e.keyCode){case KD:u();break;case JD:var t=!1;s.current||(t=l()),t?e.preventDefault():u()}};t.useEffect((function(){return n?(window.addEventListener("keydown",c),o&&JR(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[n])}({visible:E,setTriggerVisible:T,triggerRef:C,onVisibleChange:e.onVisibleChange,autoFocus:_});var A=function(){var n=function(){var t=e.overlay;return"function"===typeof t?t():t}();return t.createElement(t.Fragment,null,i&&t.createElement("div",{className:"".concat(o,"-arrow")}),n)},R=m;return R||-1===w.indexOf("contextMenu")||(R=["click"]),t.createElement(oD,Cr(Cr({builtinPlacements:d},S),{},{prefixCls:o,ref:C,popupClassName:DR()(g,wr({},"".concat(o,"-show-arrow"),i)),popupStyle:y,action:w,showAction:v,hideAction:R||[],popupPlacement:h,popupAlign:l,popupTransitionName:s,popupAnimation:u,popupVisible:E,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof e.overlay?A:A(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;T(t),"function"===typeof n&&n(t)},onPopupClick:function(t){var n=e.onOverlayClick;T(!1),n&&n(t)},getPopupContainer:p}),function(){var n=e.children,r=n.props?n.props:{},i=DR()(r.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(o,"-open")}());return E&&n?t.cloneElement(n,{className:i}):n}())}var tI=t.forwardRef(eI);function nI(e,n){var r=e.prefixCls,i=e.editable,a=e.locale,o=e.style;return i&&!1!==i.showAdd?t.createElement("button",{ref:n,type:"button",className:"".concat(r,"-nav-add"),style:o,"aria-label":(null===a||void 0===a?void 0:a.addAriaLabel)||"Add tab",onClick:function(e){i.onEdit("add",{event:e})}},i.addIcon||"+"):null}var rI=t.forwardRef(nI);function iI(e,n){var r=e.prefixCls,i=e.id,a=e.tabs,o=e.locale,s=e.mobile,u=e.moreIcon,l=void 0===u?"More":u,c=e.moreTransitionName,h=e.style,f=e.className,d=e.editable,p=e.tabBarGutter,v=e.rtl,m=e.removeAriaLabel,g=e.onTabClick,y=e.getPopupContainer,b=e.popupClassName,x=br((0,t.useState)(!1),2),w=x[0],_=x[1],S=br((0,t.useState)(null),2),k=S[0],M=S[1],T="".concat(i,"-more-popup"),E="".concat(r,"-dropdown"),C=null!==k?"".concat(T,"-").concat(k):null,A=null===o||void 0===o?void 0:o.dropdownAriaLabel;var R=t.createElement($D,{onClick:function(e){var t=e.key,n=e.domEvent;g(t,n),_(!1)},prefixCls:"".concat(E,"-menu"),id:T,tabIndex:-1,role:"listbox","aria-activedescendant":C,selectedKeys:[k],"aria-label":void 0!==A?A:"expanded dropdown"},a.map((function(e){var n=d&&!1!==e.closable&&!e.disabled;return t.createElement(DL,{key:e.key,id:"".concat(T,"-").concat(e.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(e.key),disabled:e.disabled},t.createElement("span",null,e.tab),n&&t.createElement("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(E,"-menu-item-remove"),onClick:function(t){var n,r;t.stopPropagation(),n=t,r=e.key,n.preventDefault(),n.stopPropagation(),d.onEdit("remove",{key:r,event:n})}},e.closeIcon||d.removeIcon||"\xd7"))})));function P(e){for(var t=a.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===k}))||0,r=t.length,i=0;i<r;i+=1){var o=t[n=(n+e+r)%r];if(!o.disabled)return void M(o.key)}}(0,t.useEffect)((function(){var e=document.getElementById(C);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[k]),(0,t.useEffect)((function(){w||M(null)}),[w]);var L=wr({},v?"marginRight":"marginLeft",p);a.length||(L.visibility="hidden",L.order=1);var O=DR()(wr({},"".concat(E,"-rtl"),v)),N=s?null:t.createElement(tI,{prefixCls:E,overlay:R,trigger:["hover"],visible:!!a.length&&w,transitionName:c,onVisibleChange:_,overlayClassName:DR()(O,b),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:y},t.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:L,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":T,id:"".concat(i,"-more"),"aria-expanded":w,onKeyDown:function(e){var t=e.which;if(w)switch(t){case zP.UP:P(-1),e.preventDefault();break;case zP.DOWN:P(1),e.preventDefault();break;case zP.ESC:_(!1);break;case zP.SPACE:case zP.ENTER:null!==k&&g(k,e)}else[zP.DOWN,zP.SPACE,zP.ENTER].includes(t)&&(_(!0),e.preventDefault())}},l));return t.createElement("div",{className:DR()("".concat(r,"-nav-operations"),f),style:h,ref:n},N,t.createElement(rI,{prefixCls:r,locale:o,editable:d}))}var aI=t.memo(t.forwardRef(iI),(function(e,t){return t.tabMoving})),oI=(0,t.createContext)(null),sI=Math.pow(.995,20);function uI(e,n){var r=t.useRef(e),i=br(t.useState({}),2)[1];return[r.current,function(e){var t="function"===typeof e?e(r.current):e;t!==r.current&&n(t,r.current),r.current=t,i({})}]}var lI=function(e){var n,r=e.position,i=e.prefixCls,a=e.extra;if(!a)return null;var o={};return a&&"object"===(0,vr.Z)(a)&&!t.isValidElement(a)?o=a:o.right=a,"right"===r&&(n=o.right),"left"===r&&(n=o.left),n?t.createElement("div",{className:"".concat(i,"-extra-content")},n):null};function cI(e,n){var r,i=t.useContext(oI),a=i.prefixCls,o=i.tabs,s=e.className,u=e.style,l=e.id,c=e.animated,h=e.activeKey,f=e.rtl,d=e.extra,p=e.editable,v=e.locale,m=e.tabPosition,g=e.tabBarGutter,y=e.children,b=e.onTabClick,x=e.onTabScroll,w=(0,t.useRef)(),_=(0,t.useRef)(),S=(0,t.useRef)(),k=(0,t.useRef)(),M=br(function(){var e=(0,t.useRef)(new Map);return[function(n){return e.current.has(n)||e.current.set(n,t.createRef()),e.current.get(n)},function(t){e.current.delete(t)}]}(),2),T=M[0],E=M[1],C="top"===m||"bottom"===m,A=uI(0,(function(e,t){C&&x&&x({direction:e>t?"left":"right"})})),R=br(A,2),P=R[0],L=R[1],O=uI(0,(function(e,t){!C&&x&&x({direction:e>t?"top":"bottom"})})),N=br(O,2),D=N[0],I=N[1],j=br((0,t.useState)(0),2),F=j[0],z=j[1],B=br((0,t.useState)(0),2),U=B[0],V=B[1],G=br((0,t.useState)(null),2),H=G[0],W=G[1],Z=br((0,t.useState)(null),2),$=Z[0],q=Z[1],X=br((0,t.useState)(0),2),Y=X[0],K=X[1],J=br((0,t.useState)(0),2),Q=J[0],ee=J[1],te=function(e){var n=(0,t.useRef)([]),r=br((0,t.useState)({}),2)[1],i=(0,t.useRef)("function"===typeof e?e():e),a=jP((function(){var e=i.current;n.current.forEach((function(t){e=t(e)})),n.current=[],i.current=e,r({})}));return[i.current,function(e){n.current.push(e),a()}]}(new Map),ne=br(te,2),re=ne[0],ie=ne[1],ae=function(e,n,r){return(0,t.useMemo)((function(){for(var t,r=new Map,i=n.get(null===(t=e[0])||void 0===t?void 0:t.key)||VP,a=i.left+i.width,o=0;o<e.length;o+=1){var s,u=e[o].key,l=n.get(u);l||(l=n.get(null===(s=e[o-1])||void 0===s?void 0:s.key)||VP);var c=r.get(u)||Cr({},l);c.right=a-c.left-c.width,r.set(u,c)}return r}),[e.map((function(e){return e.key})).join("_"),n,r])}(o,re,F),oe="".concat(a,"-nav-operations-hidden"),se=0,ue=0;function le(e){return e<se?se:e>ue?ue:e}C?f?(se=0,ue=Math.max(0,F-H)):(se=Math.min(0,H-F),ue=0):(se=Math.min(0,$-U),ue=0);var ce=(0,t.useRef)(),he=br((0,t.useState)(),2),fe=he[0],de=he[1];function pe(){de(Date.now())}function ve(){window.clearTimeout(ce.current)}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=ae.get(e)||{width:0,height:0,left:0,right:0,top:0};if(C){var n=P;f?t.right<P?n=t.right:t.right+t.width>P+H&&(n=t.right+t.width-H):t.left<-P?n=-t.left:t.left+t.width>-P+H&&(n=-(t.left+t.width-H)),I(0),L(le(n))}else{var r=D;t.top<-D?r=-t.top:t.top+t.height>-D+$&&(r=-(t.top+t.height-$)),L(0),I(le(r))}}!function(e,n){var r=br((0,t.useState)(),2),i=r[0],a=r[1],o=br((0,t.useState)(0),2),s=o[0],u=o[1],l=br((0,t.useState)(0),2),c=l[0],h=l[1],f=br((0,t.useState)(),2),d=f[0],p=f[1],v=(0,t.useRef)(),m=(0,t.useRef)(),g=(0,t.useRef)(null);g.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;a({x:n,y:r}),window.clearInterval(v.current)},onTouchMove:function(e){if(i){e.preventDefault();var t=e.touches[0],r=t.screenX,o=t.screenY;a({x:r,y:o});var l=r-i.x,c=o-i.y;n(l,c);var f=Date.now();u(f),h(f-s),p({x:l,y:c})}},onTouchEnd:function(){if(i&&(a(null),p(null),d)){var e=d.x/c,t=d.y/c,r=Math.abs(e),o=Math.abs(t);if(Math.max(r,o)<.1)return;var s=e,u=t;v.current=window.setInterval((function(){Math.abs(s)<.01&&Math.abs(u)<.01?window.clearInterval(v.current):n(20*(s*=sI),20*(u*=sI))}),20)}},onWheel:function(e){var t=e.deltaX,r=e.deltaY,i=0,a=Math.abs(t),o=Math.abs(r);a===o?i="x"===m.current?t:r:a>o?(i=t,m.current="x"):(i=r,m.current="y"),n(-i,-i)&&e.preventDefault()}},t.useEffect((function(){function t(e){g.current.onTouchMove(e)}function n(e){g.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){g.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){g.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(w,(function(e,t){function n(e,t){e((function(e){return le(e+t)}))}if(C){if(H>=F)return!1;n(L,e)}else{if($>=U)return!1;n(I,t)}return ve(),pe(),!0})),(0,t.useEffect)((function(){return ve(),fe&&(ce.current=window.setTimeout((function(){de(0)}),100)),ve}),[fe]);var ge=function(e,n,r,i,a){var o,s,u,l=a.tabs,c=a.tabPosition,h=a.rtl;["top","bottom"].includes(c)?(o="width",s=h?"right":"left",u=Math.abs(n.left)):(o="height",s="top",u=-n.top);var f=n[o],d=r[o],p=i[o],v=f;return d+p>f&&d<f&&(v=f-p),(0,t.useMemo)((function(){if(!l.length)return[0,0];for(var t=l.length,n=t,r=0;r<t;r+=1){var i=e.get(l[r].key)||GP;if(i[s]+i[o]>u+v){n=r-1;break}}for(var a=0,c=t-1;c>=0;c-=1)if((e.get(l[c].key)||GP)[s]<u){a=c+1;break}return[a,n]}),[e,u,v,c,l.map((function(e){return e.key})).join("_"),h])}(ae,{width:H,height:$,left:P,top:D},{width:F,height:U},{width:Y,height:Q},Cr(Cr({},e),{},{tabs:o})),ye=br(ge,2),be=ye[0],xe=ye[1],we={};"top"===m||"bottom"===m?we[f?"marginRight":"marginLeft"]=g:we.marginTop=g;var _e=o.map((function(e,n){var r=e.key;return t.createElement(UP,{id:l,prefixCls:a,key:r,tab:e,style:0===n?void 0:we,closable:e.closable,editable:p,active:r===h,renderWrapper:y,removeAriaLabel:null===v||void 0===v?void 0:v.removeAriaLabel,ref:T(r),onClick:function(e){b(r,e)},onRemove:function(){E(r)},onFocus:function(){me(r),pe(),w.current&&(f||(w.current.scrollLeft=0),w.current.scrollTop=0)}})})),Se=jP((function(){var e,t,n,r,i,a,s=(null===(e=w.current)||void 0===e?void 0:e.offsetWidth)||0,u=(null===(t=w.current)||void 0===t?void 0:t.offsetHeight)||0,l=(null===(n=k.current)||void 0===n?void 0:n.offsetWidth)||0,c=(null===(r=k.current)||void 0===r?void 0:r.offsetHeight)||0;W(s),q(u),K(l),ee(c);var h=((null===(i=_.current)||void 0===i?void 0:i.offsetWidth)||0)-l,f=((null===(a=_.current)||void 0===a?void 0:a.offsetHeight)||0)-c;z(h),V(f),ie((function(){var e=new Map;return o.forEach((function(t){var n=t.key,r=T(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),ke=o.slice(0,be),Me=o.slice(xe+1),Te=[].concat(pr(ke),pr(Me)),Ee=br((0,t.useState)(),2),Ce=Ee[0],Ae=Ee[1],Re=ae.get(h),Pe=(0,t.useRef)();function Le(){JR.cancel(Pe.current)}(0,t.useEffect)((function(){var e={};return Re&&(C?(f?e.right=Re.right:e.left=Re.left,e.width=Re.width):(e.top=Re.top,e.height=Re.height)),Le(),Pe.current=JR((function(){Ae(e)})),Le}),[Re,C,f]),(0,t.useEffect)((function(){me()}),[h,Re,ae,C]),(0,t.useEffect)((function(){Se()}),[f,g,h,o.map((function(e){return e.key})).join("_")]);var Oe,Ne,De,Ie,je=!!Te.length,Fe="".concat(a,"-nav-wrap");return C?f?(Ne=P>0,Oe=P+H<F):(Oe=P<0,Ne=-P+H<F):(De=D<0,Ie=-D+$<U),t.createElement("div",{ref:n,role:"tablist",className:DR()("".concat(a,"-nav"),s),style:u,onKeyDown:function(){pe()}},t.createElement(lI,{position:"left",extra:d,prefixCls:a}),t.createElement(IP,{onResize:Se},t.createElement("div",{className:DR()(Fe,(r={},wr(r,"".concat(Fe,"-ping-left"),Oe),wr(r,"".concat(Fe,"-ping-right"),Ne),wr(r,"".concat(Fe,"-ping-top"),De),wr(r,"".concat(Fe,"-ping-bottom"),Ie),r)),ref:w},t.createElement(IP,{onResize:Se},t.createElement("div",{ref:_,className:"".concat(a,"-nav-list"),style:{transform:"translate(".concat(P,"px, ").concat(D,"px)"),transition:fe?"none":void 0}},_e,t.createElement(rI,{ref:k,prefixCls:a,locale:v,editable:p,style:Cr(Cr({},0===_e.length?void 0:we),{},{visibility:je?"hidden":null})}),t.createElement("div",{className:DR()("".concat(a,"-ink-bar"),wr({},"".concat(a,"-ink-bar-animated"),c.inkBar)),style:Ce}))))),t.createElement(aI,PR({},e,{removeAriaLabel:null===v||void 0===v?void 0:v.removeAriaLabel,ref:S,prefixCls:a,tabs:Te,className:!je&&oe,tabMoving:!!fe})),t.createElement(lI,{position:"right",extra:d,prefixCls:a}))}var hI=t.forwardRef(cI);function fI(e){var n=e.id,r=e.activeKey,i=e.animated,a=e.tabPosition,o=e.rtl,s=e.destroyInactiveTabPane,u=t.useContext(oI),l=u.prefixCls,c=u.tabs,h=i.tabPane,f=c.findIndex((function(e){return e.key===r}));return t.createElement("div",{className:DR()("".concat(l,"-content-holder"))},t.createElement("div",{className:DR()("".concat(l,"-content"),"".concat(l,"-content-").concat(a),wr({},"".concat(l,"-content-animated"),h)),style:f&&h?wr({},o?"marginRight":"marginLeft","-".concat(f,"00%")):null},c.map((function(e){return t.cloneElement(e.node,{key:e.key,prefixCls:l,tabKey:e.key,id:n,animated:h,active:e.key===r,destroyInactiveTabPane:s})}))))}var dI=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],pI=0;function vI(e,n){var r,i,a=e.id,o=e.prefixCls,s=void 0===o?"rc-tabs":o,u=e.className,l=e.children,c=e.direction,h=e.activeKey,f=e.defaultActiveKey,d=e.editable,p=e.animated,v=void 0===p?{inkBar:!0,tabPane:!1}:p,m=e.tabPosition,g=void 0===m?"top":m,y=e.tabBarGutter,b=e.tabBarStyle,x=e.tabBarExtraContent,w=e.locale,_=e.moreIcon,S=e.moreTransitionName,k=e.destroyInactiveTabPane,M=e.renderTabBar,T=e.onChange,E=e.onTabClick,C=e.onTabScroll,A=e.getPopupContainer,R=e.popupClassName,P=OR(e,dI),L=function(e){return jR(e).map((function(e){return t.isValidElement(e)?Cr(Cr({key:void 0!==e.key?String(e.key):void 0},e.props),{},{node:e}):null})).filter((function(e){return e}))}(l),O="rtl"===c;i=!1===v?{inkBar:!1,tabPane:!1}:!0===v?{inkBar:!0,tabPane:!0}:Cr({inkBar:!0,tabPane:!1},"object"===(0,vr.Z)(v)?v:{});var N=br((0,t.useState)(!1),2),D=N[0],I=N[1];(0,t.useEffect)((function(){I(FR())}),[]);var j=br(ZR((function(){var e;return null===(e=L[0])||void 0===e?void 0:e.key}),{value:h,defaultValue:f}),2),F=j[0],z=j[1],B=br((0,t.useState)((function(){return L.findIndex((function(e){return e.key===F}))})),2),U=B[0],V=B[1];(0,t.useEffect)((function(){var e,t=L.findIndex((function(e){return e.key===F}));-1===t&&(t=Math.max(0,Math.min(U,L.length-1)),z(null===(e=L[t])||void 0===e?void 0:e.key));V(t)}),[L.map((function(e){return e.key})).join("_"),F,U]);var G=br(ZR(null,{value:a}),2),H=G[0],W=G[1],Z=g;D&&!["left","right"].includes(g)&&(Z="top"),(0,t.useEffect)((function(){a||(W("rc-tabs-".concat(pI)),pI+=1)}),[]);var $,q={id:H,activeKey:F,animated:i,tabPosition:Z,rtl:O,mobile:D},X=Cr(Cr({},q),{},{editable:d,locale:w,moreIcon:_,moreTransitionName:S,tabBarGutter:y,onTabClick:function(e,t){null===E||void 0===E||E(e,t);var n=e!==F;z(e),n&&(null===T||void 0===T||T(e))},onTabScroll:C,extra:x,style:b,panes:l,getPopupContainer:A,popupClassName:R});return $=M?M(X,hI):t.createElement(hI,X),t.createElement(oI.Provider,{value:{tabs:L,prefixCls:s}},t.createElement("div",PR({ref:n,id:a,className:DR()(s,"".concat(s,"-").concat(Z),(r={},wr(r,"".concat(s,"-mobile"),D),wr(r,"".concat(s,"-editable"),d),wr(r,"".concat(s,"-rtl"),O),r),u)},P),$,t.createElement(fI,PR({destroyInactiveTabPane:k},q,{animated:i}))))}var mI=t.forwardRef(vI);mI.TabPane=function(e){var n=e.prefixCls,r=e.forceRender,i=e.className,a=e.style,o=e.id,s=e.active,u=e.animated,l=e.destroyInactiveTabPane,c=e.tabKey,h=e.children,f=br(t.useState(r),2),d=f[0],p=f[1];t.useEffect((function(){s?p(!0):l&&p(!1)}),[s,l]);var v={};return s||(u?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none"),t.createElement("div",{id:o&&"".concat(o,"-panel-").concat(c),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(c),"aria-hidden":!s,style:Cr(Cr({},v),a),className:DR()("".concat(n,"-tabpane"),s&&"".concat(n,"-tabpane-active"),i)},(s||d||r)&&h)};var gI=mI,yI={adjustX:1,adjustY:1},bI=[0,0],xI={topLeft:{points:["bl","tl"],overflow:yI,offset:[0,-4],targetOffset:bI},topCenter:{points:["bc","tc"],overflow:yI,offset:[0,-4],targetOffset:bI},topRight:{points:["br","tr"],overflow:yI,offset:[0,-4],targetOffset:bI},bottomLeft:{points:["tl","bl"],overflow:yI,offset:[0,4],targetOffset:bI},bottomCenter:{points:["tc","bc"],overflow:yI,offset:[0,4],targetOffset:bI},bottomRight:{points:["tr","br"],overflow:yI,offset:[0,4],targetOffset:bI}},wI=zP.ESC,_I=zP.TAB;var SI=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function kI(e,n){var r=e.arrow,i=void 0!==r&&r,a=e.prefixCls,o=void 0===a?"rc-dropdown":a,s=e.transitionName,u=e.animation,l=e.align,c=e.placement,h=void 0===c?"bottomLeft":c,f=e.placements,d=void 0===f?xI:f,p=e.getPopupContainer,v=e.showAction,m=e.hideAction,g=e.overlayClassName,y=e.overlayStyle,b=e.visible,x=e.trigger,w=void 0===x?["hover"]:x,_=e.autoFocus,S=OR(e,SI),k=br(t.useState(),2),M=k[0],T=k[1],E="visible"in e?b:M,C=t.useRef(null);t.useImperativeHandle(n,(function(){return C.current}));var A=t.useRef(null),R="".concat(o,"-menu");!function(e){var n=e.visible,r=e.setTriggerVisible,i=e.triggerRef,a=e.menuRef,o=e.onVisibleChange,s=e.autoFocus,u=t.useRef(!1),l=function(){var e,t,a,s;n&&i.current&&(null===(e=i.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(a=t.current)||void 0===a||null===(s=a.focus)||void 0===s||s.call(a),r(!1),"function"===typeof o&&o(!1))},c=function(){var e,t;null===(e=a.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e),u.current=!0},h=function(e){var t;switch(e.keyCode){case wI:l();break;case _I:!u.current&&(null===(t=a.current)||void 0===t?void 0:t.focus)?(e.preventDefault(),c()):l()}};t.useEffect((function(){return n?(window.addEventListener("keydown",h),s&&JR(c,3),function(){window.removeEventListener("keydown",h),u.current=!1}):function(){u.current=!1}}),[n])}({visible:E,setTriggerVisible:T,triggerRef:C,menuRef:A,onVisibleChange:e.onVisibleChange,autoFocus:_});var P=function(){var t=e.overlay;return"function"===typeof t?t():t},L=function(t){var n=e.onOverlayClick,r=P().props;T(!1),n&&n(t),r.onClick&&r.onClick(t)},O=function(){var e,n=P(),r=iP(A,n.ref),a=(wr(e={prefixCls:R},"data-dropdown-inject",!0),wr(e,"onClick",L),wr(e,"ref",aP(n)?r:void 0),e);return"string"===typeof n.type&&(delete a.prefixCls,delete a["data-dropdown-inject"]),t.createElement(t.Fragment,null,i&&t.createElement("div",{className:"".concat(o,"-arrow")}),t.cloneElement(n,a))},N=m;return N||-1===w.indexOf("contextMenu")||(N=["click"]),t.createElement(oD,Cr(Cr({builtinPlacements:d},S),{},{prefixCls:o,ref:C,popupClassName:DR()(g,wr({},"".concat(o,"-show-arrow"),i)),popupStyle:y,action:w,showAction:v,hideAction:N||[],popupPlacement:h,popupAlign:l,popupTransitionName:s,popupAnimation:u,popupVisible:E,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof e.overlay?O:O(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;T(t),"function"===typeof n&&n(t)},getPopupContainer:p}),function(){var n=e.children,r=n.props?n.props:{},i=DR()(r.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(o,"-open")}());return E&&n?t.cloneElement(n,{className:i}):n}())}var MI,TI,EI,CI,AI,RI=t.forwardRef(kI),PI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").filter((function(e){return""!==e})).map((function(e){return"dock-style-".concat(e)}))},LI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,u.Z)(this,e),this.pageX=0,this.pageY=0,this.clientX=0,this.clientY=0,this.dx=0,this.dy=0,this.dropped=!1,this.event=t,this.component=n,this._init=r,t){var i;if(t.type.startsWith("touch"))i="touchend"===t.type?t.changedTouches[0]:t.touches[0],this.pageX=i.pageX,this.pageY=i.pageY,this.clientX=i.clientX,this.clientY=i.clientY;else"pageX"in t&&(this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY);this.dx=(this.pageX-n.baseX)*n.scaleX,this.dy=(this.pageY-n.baseY)*n.scaleY}}return(0,l.Z)(e,[{key:"moved",value:function(){return Math.abs(this.dx)>=1||Math.abs(this.dy)>=1}},{key:"startDrag",value:function(e,t){if(!this._init)throw new Error("startDrag can only be used in onDragStart callback");void 0===e&&(e=this.component.element),function(e,t,n){EI=e,t&&(t.classList.add("dragging"),CI=t);(function(e){DI=e.createElement("div"),II=e.createElement("div");var t=TI&&"tabGroup"in TI?TI.tabGroup:void 0;DI.className=DR()(PI(t),"dragging-layer"),DI.appendChild(document.createElement("div")),DI.appendChild(II)})(e.component.ownerDocument),e.component.ownerDocument.body.appendChild(DI);var r=0,i=0;void 0===n&&(n=e.component.element);n&&"outerHTML"in n&&(r=n.offsetWidth,i=n.offsetHeight,n=n.outerHTML);n&&(DI.firstElementChild.outerHTML=n,"rgba(0, 0, 0, 0)"===window.getComputedStyle(DI.firstElementChild).backgroundColor&&(DI.firstElementChild.style.backgroundColor=window.getComputedStyle(DI).getPropertyValue("--default-background-color")),r&&(r>400&&(r=400),DI.firstElementChild.style.width="".concat(r,"px")),i&&(i>300&&(i=300),DI.firstElementChild.style.height="".concat(i,"px")));var a,o=s(VI);try{for(o.s();!(a=o.n()).done;){var u=a.value;u(MI||!0)}}catch(Fq){o.e(Fq)}finally{o.f()}}(this,e,t),this.component.ownerDocument.body.classList.add("dock-dragging")}},{key:"setData",value:function(e,t){if(!this._init)throw new Error("setData can only be used in onDragStart callback");MI=t,TI=e}},{key:"dragType",get:function(){return this.component.dragType}},{key:"accept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.acceptMessage=e,this.rejected=!1}},{key:"reject",value:function(){this.rejected=!0}},{key:"_onMove",value:function(){if(TI){for(var e,t=this.component.ownerDocument,n=t.elementFromPoint(this.clientX,this.clientY);n&&n!==t.body;){if(jI.has(n)){var r=jI.get(n);if(r.onDragOverT&&(r.onDragOverT(this),null!=this.acceptMessage)){e=r;break}}n=n.parentElement}NI(e,this)}var i;i=this,DI.style.left="".concat(i.pageX,"px"),DI.style.top="".concat(i.pageY,"px"),i.rejected?II.className="drag-accept-reject":i.acceptMessage?II.className=i.acceptMessage:II.className=""}},{key:"_onDragEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];AI&&AI.onDropT&&!t&&(this.dropped=AI.onDropT(this),"right"===this.component.dragType&&(this.component.ownerDocument.addEventListener("contextmenu",OI,!0),setTimeout((function(){e.component.ownerDocument.removeEventListener("contextmenu",OI,!0)}),0))),UI(this),this.component.ownerDocument.body.classList.remove("dock-dragging")}}],[{key:"getData",value:function(e,t){return t===MI&&TI?TI[e]:null}}]),e}();function OI(e){e.preventDefault(),e.stopPropagation()}function NI(e,t){AI!==e&&(AI&&AI.onDragLeaveT&&AI.onDragLeaveT(t),AI=e)}var DI,II,jI=new WeakMap;function FI(){return null!=EI}function zI(e,t){jI.set(e,t)}function BI(e){jI.get(e)===AI&&(AI=null),jI.delete(e)}function UI(e){CI&&(CI.classList.remove("dragging"),CI=null),DI&&(DI.remove(),DI=null),EI=null,NI(null,e),MI=null,TI=null;var t,n=s(VI);try{for(n.s();!(t=n.n()).done;){(0,t.value)(null)}}catch(Fq){n.e(Fq)}finally{n.f()}}var VI=new Set;"undefined"!==typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform)&&document.addEventListener("touchmove",(function(e){1===e.touches.length&&document.body.classList.contains("dock-dragging")&&e.preventDefault()}),{passive:!1});var GI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,u.Z)(this,e),this.dx1=0,this.dy1=0,this.dx2=0,this.dy2=0,this.scale=1,this.rotate=0,this.dx=0,this.dy=0,this.event=t,this.component=n,this._init=r,t&&2===t.touches.length){var i=t.touches[0],a=t.touches[1];this.dx1=(i.pageX-n.baseX)*n.scaleX,this.dy1=(i.pageY-n.baseY)*n.scaleY,this.dx2=(a.pageX-n.baseX2)*n.scaleX,this.dy2=(a.pageY-n.baseY2)*n.scaleY,this.dx1*this.dx2>=0&&(this.dx=(this.dx1+this.dx2)/2),this.dy1*this.dy2>=0&&(this.dy=(this.dy1+this.dy2)/2),this.scale=Math.sqrt(Math.pow(a.pageX-i.pageX,2)+Math.pow(a.pageY-i.pageY,2))/n.baseDis,this.rotate=Math.atan2(a.pageY-i.pageY,a.pageX-i.pageX)-n.baseAng,this.rotate>Math.PI?this.rotate-=2*Math.PI:this.rotate<-Math.PI&&(this.rotate+=2*Math.PI)}}return(0,l.Z)(e,[{key:"moved",value:function(){return Math.max(Math.abs(this.dx1),Math.abs(this.dx2),Math.abs(this.dy1),Math.abs(this.dy2))}},{key:"pageCenter",value:function(){var e=this.event.touches[0],t=this.event.touches[1];return[(e.pageX+t.pageX)/2,(e.pageY+t.pageY)/2]}},{key:"clientCenter",value:function(){var e=this.event.touches[0],t=this.event.touches[1];return[(e.clientX+t.clientX)/2,(e.clientY+t.clientY)/2]}}]),e}(),HI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},WI=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments))._getRef=function(t){if(t!==e.element){var n=e.props,r=n.getRef,i=n.onDragOverT;e.element&&i&&BI(e.element),e.element=t,t&&(e.ownerDocument=t.ownerDocument),r&&r(t),t&&i&&zI(t,e.props)}},e.dragType=null,e.waitingMove=!1,e.listening=!1,e.gesturing=!1,e.onPointerDown=function(t){var n=t.nativeEvent.target;if(!(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n.classList.contains("drag-ignore"))){var r=e.props,i=r.onDragStartT,a=r.onGestureStartT,o=r.onGestureMoveT,s=r.useRightButtonDragT,u=t.nativeEvent;if(e.cancel(),"touchstart"===u.type)1===u.touches.length?i&&e.onDragStart(u):2===u.touches.length&&a&&o&&e.onGestureStart(u);else if(i){if(2===u.button&&!s)return;e.onDragStart(u)}}},e.onMouseMove=function(t){var n=e.props.onDragMoveT;if(e.waitingMove){if(FI())return void e.onDragEnd();if(!e.checkFirstMove(t))return}else{var r=new LI(t,(0,c.Z)(e));r._onMove(),n&&n(r)}t.preventDefault()},e.onTouchMove=function(t){var n=e.props.onDragMoveT;if(e.waitingMove){if(FI())return void e.onDragEnd();if(!e.checkFirstMove(t))return}else if(1!==t.touches.length)e.onDragEnd();else{var r=new LI(t,(0,c.Z)(e));r._onMove(),n&&n(r)}t.preventDefault()},e.onDragEnd=function(t){var n=e.props.onDragEndT,r=new LI(t,(0,c.Z)(e));e.removeListeners(),e.waitingMove||(r._onDragEnd(null==t),n&&n(r)),e.cleanupDrag(r)},e.onGestureMove=function(t){var n=e.props,r=n.onGestureMoveT,i=n.gestureSensitivity,a=new GI(t,(0,c.Z)(e));if(e.waitingMove){if(i>0||(i=10),!(a.moved()>i))return;e.waitingMove=!1}r&&r(a)},e.onGestureEnd=function(t){var n=e.props.onGestureEndT;e.removeListeners(),n&&n()},e.onKeyDown=function(t){"Escape"===t.key&&e.cancel()},e}return(0,l.Z)(r,[{key:"onDragStart",value:function(e){if(!FI()){var t=new LI(e,this,!0);this.baseX=t.pageX,this.baseY=t.pageY;var n=this.element.parentElement,r=n.getBoundingClientRect();this.scaleX=n.offsetWidth/Math.round(r.width),this.scaleY=n.offsetHeight/Math.round(r.height),this.addDragListeners(e),this.props.directDragT&&this.executeFirstMove(t)}}},{key:"addDragListeners",value:function(e){"touchstart"===e.type?(this.ownerDocument.addEventListener("touchmove",this.onTouchMove),this.ownerDocument.addEventListener("touchend",this.onDragEnd),this.dragType="touch"):(this.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.ownerDocument.addEventListener("mouseup",this.onDragEnd),2===e.button?this.dragType="right":this.dragType="left"),this.waitingMove=!0,this.listening=!0}},{key:"checkFirstMove",value:function(e){var t=new LI(e,this,!0);return!!t.moved()&&this.executeFirstMove(t)}},{key:"executeFirstMove",value:function(e){var t=this.props.onDragStartT;return this.waitingMove=!1,t(e),FI()?(e._onMove(),this.ownerDocument.addEventListener("keydown",this.onKeyDown),!0):(this.onDragEnd(),!1)}},{key:"addGestureListeners",value:function(e){this.ownerDocument.addEventListener("touchmove",this.onGestureMove),this.ownerDocument.addEventListener("touchend",this.onGestureEnd),this.ownerDocument.addEventListener("keydown",this.onKeyDown),this.gesturing=!0,this.waitingMove=!0}},{key:"onGestureStart",value:function(e){if(FI()){var t=this.props.onGestureStartT;this.baseX=e.touches[0].pageX,this.baseY=e.touches[0].pageY,this.baseX2=e.touches[1].pageX,this.baseY2=e.touches[1].pageY;var n=this.element.parentElement,r=n.getBoundingClientRect();this.scaleX=n.offsetWidth/Math.round(r.width),this.scaleY=n.offsetHeight/Math.round(r.height),this.baseDis=Math.sqrt(Math.pow(this.baseX-this.baseX2,2)+Math.pow(this.baseY-this.baseY2,2)),this.baseAng=Math.atan2(this.baseY2-this.baseY,this.baseX2-this.baseX),t(new GI(e,this,!0))&&(this.addGestureListeners(e),e.preventDefault())}}},{key:"cancel",value:function(){this.listening&&this.onDragEnd(),this.gesturing&&this.onGestureEnd()}},{key:"removeListeners",value:function(){this.gesturing?(this.ownerDocument.removeEventListener("touchmove",this.onGestureMove),this.ownerDocument.removeEventListener("touchend",this.onGestureEnd)):this.listening&&("touch"===this.dragType?(this.ownerDocument.removeEventListener("touchmove",this.onTouchMove),this.ownerDocument.removeEventListener("touchend",this.onDragEnd)):(this.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.ownerDocument.removeEventListener("mouseup",this.onDragEnd))),this.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.listening=!1,this.gesturing=!1}},{key:"cleanupDrag",value:function(e){this.dragType=null,this.waitingMove=!1}},{key:"render",value:function(){var e=this.props,n=(e.getRef,e.children),r=e.className,i=(e.directDragT,e.onDragStartT),a=(e.onDragMoveT,e.onDragEndT,e.onDragOverT,e.onDragLeaveT,e.onDropT,e.onGestureStartT),o=(e.onGestureMoveT,e.onGestureEndT,e.useRightButtonDragT,HI(e,["getRef","children","className","directDragT","onDragStartT","onDragMoveT","onDragEndT","onDragOverT","onDragLeaveT","onDropT","onGestureStartT","onGestureMoveT","onGestureEndT","useRightButtonDragT"])),s=this.onPointerDown,u=this.onPointerDown;return i||(u=null,a||(s=null)),(i||a)&&(r=r?"".concat(r," drag-initiator"):"drag-initiator"),t.createElement("div",Object.assign({ref:this._getRef,className:r},o,{onMouseDown:u,onTouchStart:s}),n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.onDragOverT,r=t.onDragEndT,i=t.onDragLeaveT;!this.element||e.onDragOverT===n&&e.onDragLeaveT===i&&e.onDragEndT===r||(n?zI(this.element,this.props):BI(this.element))}},{key:"componentWillUnmount",value:function(){var e=this.props.onDragOverT;this.element&&e&&BI(this.element),this.cancel()}}]),r}(t.PureComponent),ZI=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function $I(e){var n=e.onDragStart,r=e.onDragMove,i=e.onDragEnd,a=e.TabNavList,o=e.isMaximized,s=ZI(e,["onDragStart","onDragMove","onDragEnd","TabNavList","isMaximized"]),u=t.useContext(AR),l=t.useRef();return t.createElement(WI,{onDragStartT:n,onDragMoveT:r,onDragEndT:i,role:"tablist",className:"dock-bar",onKeyDown:function(e){e.key.startsWith("Arrow")&&(function(e,t){if("ArrowLeft"===e||"ArrowRight"===e){var n=Array.from(t.querySelectorAll(".dock-tab-btn")),r=t.querySelector(".dock-tab-active>.dock-tab-btn"),i=n.indexOf(r);if(i>=0)if("ArrowLeft"===e){if(i>0)return n[i-1].click(),n[i-1].focus(),!0}else if(i<n.length-1)return n[i+1].click(),n[i+1].focus(),!0}return!1}(e.key,l.current)||o||u.navigateToPanel(l.current,e.key),e.stopPropagation(),e.preventDefault())},getRef:function(e){l.current=e},tabIndex:-1},t.createElement(a,Object.assign({},s)))}var qI=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).getRef=function(t){e._ref=t},e}return(0,l.Z)(r,[{key:"updateCache",value:function(){var e=this.props,t=e.cached,n=e.children,r=e.cacheId;this._cache&&(t&&r===this._cache.id||(this.context.removeTabCache(this._cache.id,this),this._cache=null)),t&&this._ref&&(this._cache=this.context.getTabCache(r,this),this._ref.contains(this._cache.div)||this._ref.appendChild(this._cache.div),this.context.updateTabCache(this._cache.id,n))}},{key:"render",value:function(){var e=this.props,n=e.cacheId,r=e.cached,i=e.prefixCls,a=e.forceRender,o=e.className,s=e.style,u=e.id,l=e.active,c=e.animated,h=e.destroyInactiveTabPane,f=e.tabKey,d=e.children;l?this.visited=!0:h&&(this.visited=!1);var p={};l||(c?(p.visibility="hidden",p.height=0,p.overflowY="hidden"):p.display="none");var v=!1===r?l:this.visited,m=null;r?m=null:(v||a)&&(m=d);var g=r?this.getRef:null;return t.createElement("div",{ref:g,id:n,role:"tabpanel","aria-labelledby":u&&"".concat(u,"-tab-").concat(f),"aria-hidden":!l,style:Object.assign(Object.assign({},p),s),className:DR()("".concat(i,"-tabpane"),l&&"".concat(i,"-tabpane-active"),o)},(l||this.visited||a)&&m)}},{key:"componentDidMount",value:function(){this.updateCache()}},{key:"componentDidUpdate",value:function(e,t,n){this.updateCache()}},{key:"componentWillUnmount",value:function(){this._cache&&this.context.removeTabCache(this._cache.id,this)}}]),r}(t.PureComponent);qI.contextType=AR;var XI=new WeakMap;function YI(e){var t=XI.get(e);return t?YI(t):e}function KI(e,t){var n=Object.assign(Object.assign({},e),t);return Array.isArray(n.tabs)&&(n.tabs=n.tabs.concat()),Array.isArray(n.children)&&(n.children=n.children.concat()),XI.set(e,n),n}function JI(e,t){return null==e?t:Math.max(e,t)}function QI(e,t){return null==e||e===t?t:e>=1?t<=1?1:Math.min(e,t):t>=1?1:Math.max(e,t)}var ej=0;var tj,nj=0;function rj(e){return e===nj?e:++nj}function ij(e,t,n){if(e.id===t&&n&tj.Panel)return e;if(n&tj.Tab){var r,i=s(e.tabs);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.id===t)return a}}catch(Fq){i.e(Fq)}finally{i.f()}}}function aj(e,t,n){var r;if(n|tj.Box&&(null===e||void 0===e?void 0:e.id)===t)return e;if(null===e||void 0===e?void 0:e.children){var i,a=s(e.children);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("children"in o){if(r=aj(o,t,n))break}else if("tabs"in o&&(r=ij(o,t,n)))break}}catch(Fq){a.e(Fq)}finally{a.f()}return r}}function oj(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tj.AnyTabPanel;return r&tj.Docked&&(n=aj(e.dockbox,t,r)),n||(r&tj.Floated&&(n=aj(e.floatbox,t,r)),n||(r&tj.Windowed&&(n=aj(e.windowbox,t,r)),n||(r&tj.Max&&(n=aj(e.maxbox,t,r)),n)))}function sj(e,t,n){var r,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(-1===a&&(a=n.tabs.length),"tabs"in t?(r=t.tabs,i=t.activeId):r=[t],r.length){var o,u=KI(n);(o=u.tabs).splice.apply(o,[a,0].concat(pr(r))),u.activeId=r.at(-1).id;var l,c=s(r);try{for(c.s();!(l=c.n()).done;){var h=l.value;h.parent=u}}catch(Fq){c.e(Fq)}finally{c.f()}i&&(u.activeId=i),e=mj(e,n,u)}return e}function uj(e){if("tabs"in e)return e;var t={tabs:[e],group:e.group,activeId:e.id};return e.parent=t,t}function lj(e,t,n,r){var i=n.parent,a="left"===r||"right"===r?"horizontal":"vertical",o="bottom"===r||"right"===r;if(i){var s=i.children.indexOf(n);if(s>=0){var u=KI(i);if(a===i.mode)o&&++s,t.size=.3*n.size,n.size*=.7,u.children.splice(s,0,t);else{var l={mode:a,children:[]};l.size=n.size,l.children=o?[n,t]:[t,n],n.parent=l,n.size=280,t.parent=l,t.size=120,u.children[s]=l}return gj(e,i,u)}}else{if(n===e.dockbox){var c=KI(n);if(a===n.mode){var h=0;return o&&(h=c.children.length),t.size=.3*n.size,n.size*=.7,c.children.splice(h,0,t),gj(e,n,c)}var f={mode:a,children:[]};return f.size=n.size,f.children=o?[c,t]:[t,c],c.size=280,t.size=120,gj(e,n,f)}if(n===e.maxbox){var d=KI(n);return d.children.push(t),gj(e,n,d)}}return e}function cj(e,t,n){var r=KI(e.floatbox);return n&&(t.x=n.left,t.y=n.top,t.w=n.width,t.h=n.height),r.children.push(t),gj(e,e.floatbox,r)}function hj(e,t){var n;if(t&&("tabs"in t?e=fj(e,n=t):(n=t.parent,e=function(e,t){var n=t.parent;if(n){var r=n.tabs.indexOf(t);if(r>=0){var i=KI(n);return i.tabs.splice(r,1),i.activeId===t.id&&(i.tabs.length>r?i.activeId=i.tabs[r].id:i.tabs.length&&(i.activeId=i.tabs[0].id)),mj(e,n,i)}}return e}(e,t)),n&&n.parent&&"maximize"===n.parent.mode)){var r=e.maxbox.children[0];if(!r||0===r.tabs.length&&!r.panelLock){var i=oj(e,ER);if(i)return fj(e,i)}}return e}function fj(e,t){var n=t.parent;if(n){var r=n.children.indexOf(t);if(r>=0){var i=KI(n);return i.children.splice(r,1),gj(e,n,i)}}return e}function dj(e,t){return t?"tabs"in t?"maximize"===t.parent.mode?function(e,t){var n=oj(e=fj(e,t),ER);if(n){var r=n.x,i=n.y,a=n.z,o=n.w,s=n.h;return mj(e,n,t=Object.assign(Object.assign({},t),{x:r,y:i,z:a,w:o,h:s}))}return lj(e,t,e.dockbox,"right")}(e,t):function(e,t){if(e.maxbox.children.length)return e;var n=Object.assign(Object.assign({},t),{id:ER,tabs:[],panelLock:{}});return e=lj(e=mj(e,t,n),t,e.maxbox,"middle")}(e,t):function(e,t){return e}(e):e}function pj(e,t,n){var r=!1;if(e&&e.floatbox&&t>200&&n>200){for(var i=e.floatbox.children.concat(),a=0;a<i.length;++a){var o=i[a],s={};o.w>0?o.w>t&&(s.w=t):s.w=Math.round(t/3),o.h>0?o.h>n&&(s.h=n):s.h=Math.round(n/3),"number"!==typeof o.y?s.y=n-(s.h||o.h)>>1:o.y>n-16?s.y=Math.max(n-16-(o.h>>1),0):o.y>=0||(s.y=0),"number"!==typeof o.x?s.x=t-(s.w||o.w)>>1:o.x+o.w<16?s.x=16-(o.w>>1):o.x>t-16&&(s.x=t-16-(o.w>>1)),Object.keys(s).length&&(i[a]=KI(o,s),r=!0)}if(r){var u=KI(e.floatbox);return u.children=i,gj(e,e.floatbox,u)}}return e}function vj(e,t,n){function r(e){if(null==e.id)e.id=(++ej,"+".concat(ej));else if(e.id.startsWith("+")){var t=Number(e.id);t>ej&&(ej=t)}e.size>=0||(e.size=200),e.minWidth=0,e.minHeight=0,e.widthFlex=null,e.heightFlex=null}function i(e){r(e);var i=!1;if(n)for(var a=0;a<e.tabs.length;++a)e.tabs[a]=n(e.tabs[a]);null==e.group&&e.tabs.length&&(e.group=e.tabs[0].group);var o=null===t||void 0===t?void 0:t[e.group];o&&(null!=o.widthFlex&&(e.widthFlex=o.widthFlex),null!=o.heightFlex&&(e.heightFlex=o.heightFlex));var u,l=s(e.tabs);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.parent=e,c.id===e.activeId&&(i=!0),c.minWidth>e.minWidth&&(e.minWidth=c.minWidth),c.minHeight>e.minHeight&&(e.minHeight=c.minHeight)}}catch(Fq){l.e(Fq)}finally{l.f()}!i&&e.tabs.length&&(e.activeId=e.tabs[0].id),e.minWidth<=0&&(e.minWidth=1),e.minHeight<=0&&(e.minHeight=1);var h=e.panelLock;return h&&(e.minWidth<h.minWidth&&(e.minWidth=h.minWidth),e.minHeight<h.minHeight&&(e.minHeight=h.minHeight),null!=e.panelLock.widthFlex&&(e.widthFlex=h.widthFlex),null!=e.panelLock.heightFlex&&(e.heightFlex=h.heightFlex)),e.z>nj&&(nj=e.z),e}function a(e){r(e);for(var t=0;t<e.children.length;++t){var n=e.children[t];if(n.parent=e,"children"in n){if(a(n),0===n.children.length)e.children.splice(t,1),--t;else if(1===n.children.length){var o=n.children[0];if(o.mode===e.mode){var u,l,c=0,h=s(o.children);try{for(h.s();!(l=h.n()).done;){c+=l.value.size}}catch(Fq){h.e(Fq)}finally{h.f()}var f,d=n.size/c,p=s(o.children);try{for(p.s();!(f=p.n()).done;){f.value.size*=d}}catch(Fq){p.e(Fq)}finally{p.f()}(u=e.children).splice.apply(u,[t,1].concat(pr(o.children)))}else o.size=n.size,e.children[t]=o;--t}}else"tabs"in n&&(i(n),0===n.tabs.length&&(n.panelLock?n.group===TR&&(e.children.length>1||e.parent)&&(e.children.splice(t,1),--t):(e.children.splice(t,1),--t)));switch(e.mode){case"horizontal":n.minWidth>0&&(e.minWidth+=n.minWidth),n.minHeight>e.minHeight&&(e.minHeight=n.minHeight),null!=n.widthFlex&&(e.widthFlex=JI(e.widthFlex,n.widthFlex)),null!=n.heightFlex&&(e.heightFlex=QI(e.heightFlex,n.heightFlex));break;case"vertical":n.minWidth>e.minWidth&&(e.minWidth=n.minWidth),n.minHeight>0&&(e.minHeight+=n.minHeight),null!=n.heightFlex&&(e.heightFlex=JI(e.heightFlex,n.heightFlex)),null!=n.widthFlex&&(e.widthFlex=QI(e.widthFlex,n.widthFlex))}}if(e.children.length>1)switch(e.mode){case"horizontal":e.minWidth+=4*(e.children.length-1);break;case"vertical":e.minHeight+=4*(e.children.length-1)}return e}if(e.floatbox?e.floatbox.mode="float":e.floatbox={mode:"float",children:[],size:1},e.windowbox?e.windowbox.mode="window":e.windowbox={mode:"window",children:[],size:1},e.maxbox?e.maxbox.mode="maximize":e.maxbox={mode:"maximize",children:[],size:1},a(e.dockbox),a(e.floatbox),a(e.windowbox),a(e.maxbox),0===e.dockbox.children.length){var o={id:"+0",group:TR,panelLock:{},size:200,tabs:[]};o.parent=e.dockbox,e.dockbox.children.push(o)}else for(;1===e.dockbox.children.length&&"children"in e.dockbox.children[0];){var u=KI(e.dockbox.children[0]);e.dockbox=u;var l,c=s(u.children);try{for(c.s();!(l=c.n()).done;){l.value.parent=u}}catch(Fq){c.e(Fq)}finally{c.f()}}return e.dockbox.parent=null,e.floatbox.parent=null,e.windowbox.parent=null,e.maxbox.parent=null,XI=new WeakMap,e}function mj(e,t,n){var r,i=s(n.tabs);try{for(i.s();!(r=i.n()).done;){r.value.parent=n}}catch(Fq){i.e(Fq)}finally{i.f()}var a=t.parent;if(a){var o=a.children.indexOf(t);if(o>=0){var u=KI(a);return u.children[o]=n,gj(e,a,u)}}return e}function gj(e,t,n){var r,i=s(n.children);try{for(i.s();!(r=i.n()).done;){r.value.parent=n}}catch(Fq){i.e(Fq)}finally{i.f()}var a=t.parent;if(a){var o=a.children.indexOf(t);if(o>=0){var u=KI(a);return u.children[o]=n,gj(e,a,u)}}else{if(t.id===e.dockbox.id||t===e.dockbox)return Object.assign(Object.assign({},e),{dockbox:n});if(t.id===e.floatbox.id||t===e.floatbox)return Object.assign(Object.assign({},e),{floatbox:n});if(t.id===e.windowbox.id||t===e.windowbox)return Object.assign(Object.assign({},e),{windowbox:n});if(t.id===e.maxbox.id||t===e.maxbox)return Object.assign(Object.assign({},e),{maxbox:n})}return e}function yj(e,t){if(!e)return[300,300];var n=e.offsetWidth,r=e.offsetHeight,i=br(t.preferredFloatWidth||[100,600],2),a=i[0],o=i[1],s=br(t.preferredFloatHeight||[50,500],2),u=s[0],l=s[1];return n>=a?n<=o||(n=o):n=a,r>=u?r<=l||(r=l):r=u,[n,r]}function bj(e,t,n){var r=-1,i=-1,a=0;switch(n){case"ArrowUp":r=e.top-t.bottom+e.height,i=Math.min(e.right,t.right)-Math.max(e.left,t.left);break;case"ArrowDown":r=t.top-e.bottom+e.height,i=Math.min(e.right,t.right)-Math.max(e.left,t.left);break;case"ArrowLeft":r=e.left-t.right+e.width,i=Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top),a=Math.abs(e.top-t.top);break;case"ArrowRight":r=t.left-e.right+e.width,i=Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top),a=Math.abs(e.top-t.top)}return r<0||i<=0?-1:r*(a+1)-.001*i}!function(e){e[e.Tab=1]="Tab",e[e.Panel=2]="Panel",e[e.Box=4]="Box",e[e.Docked=8]="Docked",e[e.Floated=16]="Floated",e[e.Windowed=32]="Windowed",e[e.Max=64]="Max",e[e.EveryWhere=120]="EveryWhere",e[e.AnyTab=121]="AnyTab",e[e.AnyPanel=122]="AnyPanel",e[e.AnyTabPanel=123]="AnyTabPanel",e[e.All=127]="All"}(tj||(tj={}));var xj=n(8573),wj=n.n(xj),_j=n(5524),Sj="object"===typeof window?n.n(_j)().getParser(window.navigator.userAgent):null;var kj="safari"===(null===Sj||void 0===Sj?void 0:Sj.getBrowserName(!0)),Mj="desktop"===(null===Sj||void 0===Sj?void 0:Sj.getPlatformType()),Tj=function(){switch(null===Sj||void 0===Sj?void 0:Sj.getOSName(!0)){case"windows":var e;switch(Sj.getBrowserName(!0)){case"firefox":e=[68,8,8];break;case"microsoft edge":e=[62,8,8];break;default:e=[60,8,8]}return window.devicePixelRatio>1&&(e[0]-=2,e[1]-=1,e[2]-=1),e;case"macos":switch(Sj.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}(),Ej=wj()((function(){var e=document.createElement("div");document.body.append(e),e.remove()}),200),Cj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).released=!1,r.container=document.createElement("div"),r.state={mounted:!1},r.onMainWindowUnload=function(){r.window&&r.window.close()},r.release=function(e){if(!r.released&&(r.released=!0,r.windowCheckerInterval&&(clearInterval(r.windowCheckerInterval),r.windowCheckerInterval=null),window.removeEventListener("beforeunload",r.onMainWindowUnload),r.window.removeEventListener("beforeunload",r.release),e)){var t=r.props.onClose;"function"===typeof t&&t()}},r}return(0,l.Z)(n,[{key:"render",value:function(){return this.state.mounted?oP.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.openChild(),this.setState({mounted:!0})}},{key:"openChild",value:function(){var e,t=this,n=this.props,r=n.url,i=n.title,a=n.name,o=n.width,s=n.height,u=n.initPopupInnerRect,l=n.initPopupOuterRect,c=n.onBlock,h=n.onOpen,f=n.onClose,d={width:o,height:s};if(l){d=l();var p=br(Tj,3),v=p[0],m=p[1],g=p[2];kj||(d.width-=2*m,d.height-=v+g)}else if(u){d=u();var y=br(Tj,2),b=y[0],x=y[1];d.left-=x,d.top-=b,kj&&(d.height+=b)}else d.left=window.top.outerWidth/2+window.top.screenX-o/2,d.top=window.top.outerHeight/2+window.top.screenY-s/2;this.window=window.open(r,a,(e=d,Object.keys(e).reduce((function(t,n){var r=e[n];return"boolean"===typeof r?t.push("".concat(n,"=").concat(r?"yes":"no")):t.push("".concat(n,"=").concat(r)),t}),[]).join(","))),this.window?(window.addEventListener("beforeunload",this.onMainWindowUnload),this.window.addEventListener("resize",Ej),this.window.document.title=i||document.title,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout((function(){return e=document,n=t.window.document,void Array.from(e.styleSheets).forEach((function(t){var r;if(t.href){var i=e.createElement("link");i.rel="stylesheet",i.href=t.href,n.head.appendChild(i)}else{try{r=t.cssRules}catch(Fq){}if(r){var a=e.createElement("style");Array.from(t.cssRules).forEach((function(t){var n=t.cssText,r=t.type,i=n;[3,5].includes(r)&&(i=n.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")),a.appendChild(e.createTextNode(i))})),n.head.appendChild(a)}}}));var e,n}),0),"function"===typeof h&&h(this.window),r&&f&&(this.windowCheckerInterval=setInterval((function(){t.window&&!t.window.closed||t.release(!0)}),50)),this.window.addEventListener("beforeunload",this.release)):"function"===typeof c?c():console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){this.window&&(this.release(),this.window.close())}}]),n}(t.PureComponent);Cj.supported=Mj,Cj.defaultProps={url:"",name:"",width:640,height:480,copyStyles:!0};var Aj=Cj,Rj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).state={dropping:!1},e.onDragOver=function(t){var n=e.props,r=n.panelElement,i=n.direction,a=n.depth,o=n.panelData;e.setState({dropping:!0});for(var s=0;s<a;++s)r=r.parentElement;if(o.group===TR&&"float"!==i)e.context.setDropRect(r,"middle",(0,c.Z)(e),t);else{var u=e.context.getDockId(),l=LI.getData("panelSize",u);e.context.setDropRect(r,i,(0,c.Z)(e),t,l)}t.accept("")},e.onDragLeave=function(t){e.setState({dropping:!1}),e.context.setDropRect(null,"remove",(0,c.Z)(e))},e.onDrop=function(t){var n=e.context.getDockId(),r=LI.getData("tab",n);if(r||(r=LI.getData("panel",n)),r){for(var i=e.props,a=i.panelData,o=i.direction,s=i.depth,u=a,l=0;l<s;++l)u=u.parent;e.context.dockMove(r,u,o)}},e}return(0,l.Z)(r,[{key:"render",value:function(){var e=this.props,n=e.direction,r=e.depth,i=this.state.dropping,a=["dock-drop-square"];return a.push("dock-drop-".concat(n)),r&&a.push("dock-drop-deep"),i&&a.push("dock-drop-square-dropping"),t.createElement(WI,{className:a.join(" "),onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop},t.createElement("div",{className:"dock-drop-square-box"}))}},{key:"componentWillUnmount",value:function(){this.context.setDropRect(null,"remove",this)}}]),r}(t.PureComponent);Rj.contextType=AR;var Pj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var e,n=this.props,i=n.panelData,a=n.panelElement,o=n.dropFromPanel,s=this.context.getDockId(),u=[],l=LI.getData("panel",s),c=this.context.getGroup(o.group);if(!1===c.floatable||l&&(l.panelLock||"float"===(null===(e=l.parent)||void 0===e?void 0:e.mode)||"singleTab"===c.floatable&&l.tabs.length>1)||u.push(t.createElement(Rj,{key:"float",direction:"float",panelData:i,panelElement:a})),l!==i&&!c.disableDock){r.addDepthSquare(u,"horizontal",i,a,0),r.addDepthSquare(u,"vertical",i,a,0),(null===l||void 0===l?void 0:l.panelLock)||i.group!==o.group||i===o||u.push(t.createElement(Rj,{key:"middle",direction:"middle",panelData:i,panelElement:a}));var h=i.parent;h&&h.children.length>1&&(r.addDepthSquare(u,h.mode,i,a,1),h.parent&&r.addDepthSquare(u,h.parent.mode,i,a,2))}return t.createElement("div",{className:"dock-drop-layer"},u)}}],[{key:"addDepthSquare",value:function(e,n,r,i,a){"horizontal"===n?(e.push(t.createElement(Rj,{key:"top".concat(a),direction:"top",depth:a,panelData:r,panelElement:i})),e.push(t.createElement(Rj,{key:"bottom".concat(a),direction:"bottom",depth:a,panelData:r,panelElement:i}))):(e.push(t.createElement(Rj,{key:"left".concat(a),direction:"left",depth:a,panelData:r,panelElement:i})),e.push(t.createElement(Rj,{key:"right".concat(a),direction:"right",depth:a,panelData:r,panelElement:i})))}}]),r}(t.PureComponent);Pj.contextType=AR;var Lj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).getRef=function(t){e._ref=t},e.onDragOver=function(t){var n,r,i,a=e.props,o=a.panelData,s=a.panelElement,u=a.dropFromPanel,l=e.context.getDockId(),h=LI.getData("panel",l),f=e.context.getGroup(u.group);if(!h||"float"!==(null===(n=h.parent)||void 0===n?void 0:n.mode)){var d=e.getDirection(t,f,h===o,null!==(i=null===(r=null===h||void 0===h?void 0:h.tabs)||void 0===r?void 0:r.length)&&void 0!==i?i:1),p=d.direction,v=d.mode,m=d.depth;if(m=e.getActualDepth(m,v,p),!p||"float"===p&&u.panelLock)e.context.setDropRect(null,"remove",(0,c.Z)(e));else{for(var g=s,y=0;y<m;++y)g=g.parentElement;var b=LI.getData("panelSize",l);e.context.setDropRect(g,p,(0,c.Z)(e),t,b),t.accept("")}}},e.onDragLeave=function(t){e.context.setDropRect(null,"remove",(0,c.Z)(e))},e.onDrop=function(t){var n,r,i=e.props,a=i.panelData,o=i.dropFromPanel,s=e.context.getDockId(),u=e.context.getGroup(o.group),l=LI.getData("tab",s),c=LI.getData("panel",s);if(l||(l=c),l){var h=e.getDirection(t,u,c===a,null!==(r=null===(n=null===c||void 0===c?void 0:c.tabs)||void 0===n?void 0:n.length)&&void 0!==r?r:1),f=h.direction,d=h.mode,p=h.depth;if(p=e.getActualDepth(p,d,f),!f)return;for(var v=a,m=0;m<p;++m)v=v.parent;e.context.dockMove(l,v,f)}},e}return(0,l.Z)(r,[{key:"getDirection",value:function(e,t,n,r){var i=this._ref.getBoundingClientRect(),a=Math.min(i.width,500),o=Math.min(i.height,500),s=(e.clientX-i.left)/a,u=(i.right-e.clientX)/a,l=(e.clientY-i.top)/o,c=(i.bottom-e.clientY)/o,h=Math.min(s,u,l,c),f=0;if((t.disableDock||n)&&(h=1),h<0)return{direction:null,depth:0};if(h<.075)f=3;else if(h<.15)f=1;else if(h<.3);else if(t.floatable){if("singleTab"!==t.floatable)return{direction:"float",mode:"float",depth:0};if(1===r)return{direction:"float",mode:"float",depth:0}}switch(h){case s:return{direction:"left",mode:"horizontal",depth:f};case u:return{direction:"right",mode:"horizontal",depth:f};case l:return{direction:"top",mode:"vertical",depth:f};case c:return{direction:"bottom",mode:"vertical",depth:f}}return{direction:null,depth:0}}},{key:"getActualDepth",value:function(e,t,n){var r="bottom"===n||"right"===n;if(!e)return e;var i=this.props.panelData,a=i,o=i.parent,s=0;for(i.parent.mode===t&&++e;o&&s<e;){if(o.mode===t)if(r){if(o.children.at(-1)!==a)break}else if(o.children[0]!==a)break;a=o,o=o.parent,++s}for(;e>s;)e-=2;return e}},{key:"render",value:function(){return t.createElement(WI,{getRef:this.getRef,className:"dock-drop-edge",onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop})}},{key:"componentWillUnmount",value:function(){this.context.setDropRect(null,"remove",this)}}]),r}(t.PureComponent);Lj.contextType=AR;var Oj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).getRef=function(t){if(e._ref=t,t){var n=e.props.panelData.parent;"float"===(null===n||void 0===n?void 0:n.mode)&&t.addEventListener("pointerdown",e.onFloatPointerDown,{capture:!0,passive:!0})}},e.state={dropFromPanel:null,draggingHeader:!1},e.onDragOver=function(t){if(r._droppingPanel!==(0,c.Z)(e)){var n=e.context.getDockId(),i=LI.getData("tab",n),a=LI.getData("panel",n);(i||a)&&(r.droppingPanel=(0,c.Z)(e)),i?i.parent?e.setState({dropFromPanel:i.parent}):e.setState({dropFromPanel:{activeId:"",tabs:[],group:i.group}}):a&&e.setState({dropFromPanel:a})}},e.onPanelHeaderDragStart=function(t){var n=e.props.panelData,r=n.parent,i=n.x,a=n.y,o=(n.z,e.context.getDockId());if("float"===(null===r||void 0===r?void 0:r.mode))e._movingX=i,e._movingY=a,t.setData({panel:n,tabGroup:n.group},o),t.startDrag(null,null),e.onFloatPointerDown();else{var s=e.context.getGroup(n.group),u=br(yj(e._ref,s),2),l=u[0],c=u[1];t.setData({panel:n,panelSize:[l,c],tabGroup:n.group},o),t.startDrag(null)}e.setState({draggingHeader:!0})},e.onPanelHeaderDragMove=function(t){var n,r=e.props.panelData;if("float"===(null===(n=r.parent)||void 0===n?void 0:n.mode)){var i=e.context.getLayoutSize(),a=i.width,o=i.height;r.x=e._movingX+t.dx,r.y=e._movingY+t.dy,a>200&&o>200&&(r.y<0?r.y=0:r.y>o-16&&(r.y=o-16),r.x+r.w<16?r.x=16-r.w:r.x>a-16&&(r.x=a-16)),e.forceUpdate()}},e.onPanelHeaderDragEnd=function(t){var n;(e.setState({draggingHeader:!1}),!1===t.dropped)&&("float"===(null===(n=e.props.panelData.parent)||void 0===n?void 0:n.mode)&&e.context.onSilentChange(e.props.panelData.activeId,"move"))},e.onPanelCornerDragT=function(t){e.onPanelCornerDrag(t,"t")},e.onPanelCornerDragB=function(t){e.onPanelCornerDrag(t,"b")},e.onPanelCornerDragL=function(t){e.onPanelCornerDrag(t,"l")},e.onPanelCornerDragR=function(t){e.onPanelCornerDrag(t,"r")},e.onPanelCornerDragTL=function(t){e.onPanelCornerDrag(t,"tl")},e.onPanelCornerDragTR=function(t){e.onPanelCornerDrag(t,"tr")},e.onPanelCornerDragBL=function(t){e.onPanelCornerDrag(t,"bl")},e.onPanelCornerDragBR=function(t){e.onPanelCornerDrag(t,"br")},e.onPanelCornerDragMove=function(t){var n=e.props.panelData,r=t.dx,i=t.dy;if(e._movingCorner.startsWith("t")){var a=e.context.getLayoutSize(),o=(a.width,a.height);e._movingY+i<0?i=-e._movingY:e._movingY+i>o-16&&(i=o-16-e._movingY)}switch(e._movingCorner){case"t":n.y=e._movingY+i,n.h=e._movingH-i;break;case"b":n.h=e._movingH+i;break;case"l":n.x=e._movingX+r,n.w=e._movingW-r;break;case"r":n.w=e._movingW+r;break;case"tl":n.x=e._movingX+r,n.w=e._movingW-r,n.y=e._movingY+i,n.h=e._movingH-i;break;case"tr":n.w=e._movingW+r,n.y=e._movingY+i,n.h=e._movingH-i;break;case"bl":n.x=e._movingX+r,n.w=e._movingW-r,n.h=e._movingH+i;break;case"br":n.w=e._movingW+r,n.h=e._movingH+i}n.w=Math.max(n.w||0,n.minWidth||0),n.h=Math.max(n.h||0,n.minHeight||0),e.forceUpdate()},e.onPanelCornerDragEnd=function(t){e.context.onSilentChange(e.props.panelData.activeId,"move")},e.onFloatPointerDown=function(){var t=e.props.panelData,n=t.z,r=rj(n);r!==n&&(t.z=r,e.forceUpdate())},e.onPanelClicked=function(t){var n=t.nativeEvent.target;!e._ref.contains(e._ref.ownerDocument.activeElement)&&n instanceof Node&&e._ref.contains(n)&&e._ref.querySelector(".dock-bar").focus()},e._unmounted=!1,e}return(0,l.Z)(r,[{key:"onDragOverOtherPanel",value:function(){this.setState({dropFromPanel:null})}},{key:"onPanelCornerDrag",value:function(e,t){var n=this.props.panelData,r=n.parent,i=n.x,a=n.y,o=n.w,s=n.h;"float"===(null===r||void 0===r?void 0:r.mode)&&(this._movingCorner=t,this._movingX=i,this._movingY=a,this._movingW=o,this._movingH=s,e.startDrag(null,null))}},{key:"render",value:function(){var e=this.state,n=e.dropFromPanel,r=e.draggingHeader,i=this.props,a=i.panelData,o=i.size,s=a.minWidth,u=a.minHeight,l=a.group,c=a.id,h=a.parent,f=a.panelLock,d=l,p=this.context.getGroup(l),v=p.widthFlex,m=p.heightFlex;if(f){var g=f.panelStyle,y=f.widthFlex,b=f.heightFlex;g&&(d=g),"number"===typeof y&&(v=y),"number"===typeof b&&(m=b)}var x=DR()(PI(d)),w="maximize"===(null===h||void 0===h?void 0:h.mode),_="float"===(null===h||void 0===h?void 0:h.mode),S="horizontal"===(null===h||void 0===h?void 0:h.mode),k="vertical"===(null===h||void 0===h?void 0:h.mode),M=this.onPanelHeaderDragStart;w&&(n=null,M=null);var T="dock-panel ".concat(x||"").concat(n?" dock-panel-dropping":"").concat(r?" dragging":""),E=1;S&&null!=v?E=v:k&&null!=m&&(E=m);var C=1e6*E;C<1&&(C=1);var A,R={minWidth:s,minHeight:u,flex:"".concat(E*o," ").concat(C," ").concat(o,"px")};if(_&&(R.left=a.x,R.top=a.y,R.width=a.w,R.height=a.h,R.zIndex=a.z),n){var P=this.context.getGroup(n.group),L=this.context.getDockId();if(!P.tabLocked||null==LI.getData("tab",L)){var O=this.context.useEdgeDrop()?Lj:Pj;A=t.createElement(O,{panelData:a,panelElement:this._ref,dropFromPanel:n})}}return t.createElement(WI,{getRef:this.getRef,className:T,style:R,"data-dockid":c,onDragOverT:_?null:this.onDragOver,onClick:this.onPanelClicked},t.createElement(zj,{panelData:a,onPanelDragStart:M,onPanelDragMove:this.onPanelHeaderDragMove,onPanelDragEnd:this.onPanelHeaderDragEnd}),_?[t.createElement(WI,{key:"drag-size-t",className:"dock-panel-drag-size dock-panel-drag-size-t",onDragStartT:this.onPanelCornerDragT,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-b",className:"dock-panel-drag-size dock-panel-drag-size-b",onDragStartT:this.onPanelCornerDragB,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-l",className:"dock-panel-drag-size dock-panel-drag-size-l",onDragStartT:this.onPanelCornerDragL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-r",className:"dock-panel-drag-size dock-panel-drag-size-r",onDragStartT:this.onPanelCornerDragR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-t-l",className:"dock-panel-drag-size dock-panel-drag-size-t-l",onDragStartT:this.onPanelCornerDragTL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-t-r",className:"dock-panel-drag-size dock-panel-drag-size-t-r",onDragStartT:this.onPanelCornerDragTR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-b-l",className:"dock-panel-drag-size dock-panel-drag-size-b-l",onDragStartT:this.onPanelCornerDragBL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(WI,{key:"drag-size-b-r",className:"dock-panel-drag-size dock-panel-drag-size-b-r",onDragStartT:this.onPanelCornerDragBR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd})]:null,A)}},{key:"componentWillUnmount",value:function(){r._droppingPanel===this&&(r.droppingPanel=null),this._ref&&this._ref.removeEventListener("pointerdown",this.onFloatPointerDown,{capture:!0}),this._unmounted=!0}}],[{key:"droppingPanel",set:function(e){r._droppingPanel!==e&&(r._droppingPanel&&r._droppingPanel.onDragOverOtherPanel(),r._droppingPanel=e)}}]),r}(t.PureComponent);Oj.contextType=AR;var Nj=n(2270),Dj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).onOpen=function(t){!e._window&&t&&(e._window=t)},e.onUnload=function(){var t=e.props.panelData,n=e.context.getRootElement(),r=(0,Nj.fA)(n,e._window);r.width>0&&r.height>0&&(t.x=r.left,t.y=r.top,t.w=r.width,t.h=r.height),e.context.dockMove(t,null,"float")},e.initPopupInnerRect=function(){var t=e.props.panelData;return(0,Nj.xj)(e.context.getRootElement(),{left:t.x,top:t.y,width:t.w,height:t.h})},e}return(0,l.Z)(r,[{key:"render",value:function(){var e=this.props.panelData,n=(e.x,e.y,e.w),r=e.h;return t.createElement(Aj,{copyStyles:!0,onOpen:this.onOpen,onClose:this.onUnload,onBlock:this.onUnload,initPopupInnerRect:this.initPopupInnerRect,width:n,height:r},t.createElement("div",{className:"dock-wbox"},t.createElement(Oj,{size:e.size,panelData:e,key:e.id})))}}]),r}(t.PureComponent);Dj.contextType=AR;var Ij=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var e,n=[],r=s(this.props.boxData.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;"tabs"in i&&n.push(t.createElement(Dj,{key:i.id,panelData:i}))}}catch(Fq){r.e(Fq)}finally{r.f()}return t.createElement(t.Fragment,null,n)}}]),r}(t.PureComponent);function jj(e){var t,n,r;return null==e||"LI"===(null===(t=e.parentElement)||void 0===t?void 0:t.tagName)||"LI"===(null===(r=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.tagName)}Ij.enabled="object"===typeof window&&("Win32"===(null===window||void 0===window?void 0:window.navigator.platform)||"MacIntel"===(null===window||void 0===window?void 0:window.navigator.platform));var Fj=function(){function e(t){var n=this;(0,u.Z)(this,e),this.getRef=function(e){jj(e)||(n._ref=e)},this.getHitAreaRef=function(e){jj(e)||(n._hitAreaRef=e)},this.onCloseClick=function(e){n.context.dockMove(n.data,null,"remove"),e.stopPropagation()},this.onDragStart=function(e){var t=n.data.parent;if("float"!==t.parent.mode||1!==t.tabs.length){var r=function(e){for(var t=0;t<10;++t){if(!e)return null;if(e.classList.contains("dock-panel"))return e;e=e.parentElement}return null}(n._ref),i=br(yj(r,n.context.getGroup(n.data.group)),2),a=i[0],o=i[1];e.setData({tab:n.data,panelSize:[a,o],tabGroup:n.data.group},n.context.getDockId()),e.startDrag(n._ref.parentElement,n._ref.parentElement)}},this.onDragOver=function(e){var t,r,i,a=n.context.getDockId(),o=LI.getData("tab",a),s=LI.getData("panel",a);if(o)s=o.parent,i=o.group;else{if(!s)return;if(null===s||void 0===s?void 0:s.panelLock)return void e.reject();i=s.group}var u=n.context.getGroup(i);if(i!==n.data.group)e.reject();else if("singleTab"===(null===u||void 0===u?void 0:u.floatable)&&"float"===(null===(r=null===(t=n.data.parent)||void 0===t?void 0:t.parent)||void 0===r?void 0:r.mode))e.reject();else if(o&&o!==n.data){var l=n.getDropDirection(e);n.context.setDropRect(n._hitAreaRef,l,n),e.accept("")}else if(s&&s!==n.data.parent){var c=n.getDropDirection(e);n.context.setDropRect(n._hitAreaRef,c,n),e.accept("")}},this.onDragLeave=function(e){n.context.setDropRect(null,"remove",n)},this.onDrop=function(e){var t,r=n.context.getDockId(),i=LI.getData("tab",r);if(t=i?i.parent:LI.getData("panel",r),i&&i!==n.data){var a=n.getDropDirection(e);n.context.dockMove(i,n.data,a)}else if(t&&t!==n.data.parent){var o=n.getDropDirection(e);n.context.dockMove(t,n.data,o)}},this.context=t}return(0,l.Z)(e,[{key:"setData",value:function(e){return e!==this.data&&(this.data=e,this.content=this.render(),!0)}},{key:"getDropDirection",value:function(e){var t=this._hitAreaRef.getBoundingClientRect(),n=t.left+.5*t.width;return e.clientX>n?"after-tab":"before-tab"}},{key:"render",value:function(){var e=this.data,n=e.id,r=e.title,i=e.content,a=e.closable,o=e.cached,s=e.parent,u=this.onDragStart,l=this.onDragOver,c=this.onDrop,h=this.onDragLeave;"window"===s.parent.mode&&(u=null,l=null,c=null,h=null),"function"===typeof i&&(i=i(this.data));var f=t.createElement(WI,{getRef:this.getRef,onDragStartT:u,role:"tab","aria-selected":s.activeId===n,onDragOverT:l,onDropT:c,onDragLeaveT:h},r,a?t.createElement("div",{className:"dock-tab-close-btn",onClick:this.onCloseClick}):null,t.createElement("div",{className:"dock-tab-hit-area",ref:this.getHitAreaRef}));return t.createElement(qI,{key:n,cacheId:n,cached:o,tab:f},i)}},{key:"destroy",value:function(){}}]),e}(),zj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments))._cache=new Map,e.onMaximizeClick=function(t){var n=e.props.panelData;e.context.dockMove(n,null,"maximize"),t.stopPropagation()},e.onNewWindowClick=function(){var t=e.props.panelData;e.context.dockMove(t,null,"new-window")},e.renderTabBar=function(n,r){var i=e.props,a=i.panelData,o=i.onPanelDragStart,s=i.onPanelDragMove,u=i.onPanelDragEnd,l=a.group,c=a.panelLock,h=e.context.getGroup(l),f=h.panelExtra,d=h.maximizable;"window"===a.parent.mode&&(o=null,d=!1),c&&c.panelExtra&&(f=c.panelExtra);var p,v=h.newWindow&&Ij.enabled&&"float"===a.parent.mode;return f?p=f(a,e.context):(d||v)&&(p=t.createElement("div",{className:"maximize"===a.parent.mode?"dock-panel-min-btn":"dock-panel-max-btn",onClick:d?e.onMaximizeClick:null}),v&&(p=e.addNewWindowMenu(p,!d))),t.createElement($I,Object.assign({onDragStart:o,onDragMove:s,onDragEnd:u,TabNavList:r,isMaximized:"maximize"===a.parent.mode},n,{extra:p}))},e.onTabChange=function(t){e.props.panelData.activeId=t,e.context.onSilentChange(t,"active"),e.forceUpdate()},e}return(0,l.Z)(r,[{key:"updateTabs",value:function(e){if(e!==this.cachedTabs){this.cachedTabs=e;var t,n=new Map,r=0,i=s(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.id;if(this._cache.has(o)){var u=this._cache.get(o);n.set(o,u),u.setData(a),++r}else{var l=new Fj(this.context);n.set(o,l),l.setData(a)}}}catch(Fq){i.e(Fq)}finally{i.f()}if(r!==this._cache.size){var c,h=s(this._cache);try{for(h.s();!(c=h.n()).done;){var f=br(c.value,2),d=f[0],p=f[1];n.has(d)||p.destroy()}}catch(Fq){h.e(Fq)}finally{h.f()}}this._cache=n}}},{key:"addNewWindowMenu",value:function(e,n){var r=t.createElement($D,{onClick:this.onNewWindowClick},t.createElement(DL,null,"New Window")),i=n?["contextMenu","click"]:["contextMenu"];return t.createElement(RI,{prefixCls:"dock-dropdown",overlay:r,trigger:i,mouseEnterDelay:.1,mouseLeaveDelay:.1},e)}},{key:"render",value:function(){var e=this.props.panelData,n=e.group,r=e.tabs,i=e.activeId,a=this.context.getGroup(n),o=a.animated,u=a.moreIcon;null==o&&(o=!0),u||(u="..."),this.updateTabs(r);var l,c=[],h=s(this._cache);try{for(h.s();!(l=h.n()).done;){var f=br(l.value,2),d=(f[0],f[1]);c.push(d.content)}}catch(Fq){h.e(Fq)}finally{h.f()}return t.createElement(gI,{prefixCls:"dock",moreIcon:u,animated:o,renderTabBar:this.renderTabBar,activeKey:i,onChange:this.onTabChange,popupClassName:DR()(PI(n))},c)}}]),r}(t.PureComponent);zj.contextType=AR,zj.propKeys=["group","tabs","activeId","onTabChange"];var Bj=(0,l.Z)((function e(t){(0,u.Z)(this,e),this.beforeSize=0,this.beforeMinSize=0,this.afterSize=0,this.afterMinSize=0,this.element=t.element,this.beforeDivider=t.beforeDivider,this.afterDivider=t.afterDivider;var n,r=s(this.beforeDivider);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.beforeSize+=i.size,i.minSize>0&&(this.beforeMinSize+=i.minSize)}}catch(Fq){r.e(Fq)}finally{r.f()}var a,o=s(this.afterDivider);try{for(o.s();!(a=o.n()).done;){var l=a.value;this.afterSize+=l.size,l.minSize>0&&(this.afterMinSize+=l.minSize)}}catch(Fq){o.e(Fq)}finally{o.f()}}));function Uj(e,t,n){for(var r=-1,i=[],a=0;a!==r;){r=a,a=0;var o=(e-r)/(t-r);if(!(o>=0))break;for(var s=0;s<n.length;++s){var u=n[s].size*o;u<n[s].minSize&&(a+=u=n[s].minSize),i[s]=u}}return i}var Vj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).startDrag=function(t){e.boxData=new Bj(e.props.getDividerData(e.props.idx)),t.startDrag(e.boxData.element,null)},e.dragMove=function(t){t.event.shiftKey||t.event.ctrlKey||t.event.altKey?e.dragMoveAll(t,t.dx,t.dy):e.dragMove2(t,t.dx,t.dy)},e.dragEnd=function(t){var n=e.props.onDragEnd;e.boxData=null,n&&n()},e}return(0,l.Z)(r,[{key:"dragMove2",value:function(e,t,n){var r=this.props,i=r.isVertical,a=r.changeSizes,o=this.boxData,s=o.beforeDivider,u=o.afterDivider;if(s.length&&u.length){var l=i?n:t,c=s.at(-1),h=u[0],f=c.size+l,d=h.size-l;l>0?d<h.minSize&&(d=h.minSize,f=c.size+h.size-d):f<c.minSize&&(f=c.minSize,d=c.size+h.size-f);var p=s.concat(u).map((function(e){return e.size}));p[s.length-1]=f,p[s.length]=d,a(p)}}},{key:"dragMoveAll",value:function(e,t,n){var r=this.props,i=r.isVertical,a=r.changeSizes,o=this.boxData,s=o.beforeSize,u=o.beforeMinSize,l=o.afterSize,c=o.afterMinSize,h=o.beforeDivider,f=o.afterDivider,d=i?n:t,p=s+d,v=l-d;d>0?v<c&&(v=c,p=s+l-c):p<u&&(p=u,v=s+l-u),a(Uj(p,s,h).concat(Uj(v,l,f)))}},{key:"render",value:function(){var e=this.props.className;return e||(e="dock-divider"),t.createElement(WI,{className:e,onDragStartT:this.startDrag,onDragMoveT:this.dragMove,onDragEndT:this.dragEnd})}}]),r}(t.PureComponent),Gj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).getRef=function(t){e._ref=t},e.getDividerData=function(t){if(!e._ref)return null;var n=e.props.boxData,r=n.children,i=n.mode,a=e._ref.childNodes;if(a.length===2*r.length-1){for(var o=[],s=0;s<r.length;++s)"vertical"===i?o.push({size:a[2*s].offsetHeight,minSize:r[s].minHeight}):o.push({size:a[2*s].offsetWidth,minSize:r[s].minWidth});return{element:e._ref,beforeDivider:o.slice(0,t),afterDivider:o.slice(t)}}},e.changeSizes=function(t){var n=e.props.boxData.children;if(n.length===t.length){for(var r=0;r<n.length;++r)n[r].size=t[r];e.forceUpdate()}},e.onDragEnd=function(){e.context.onSilentChange(null,"move")},e}return(0,l.Z)(r,[{key:"render",value:function(){for(var e,n=this.props.boxData,i=n.minWidth,a=n.minHeight,o=n.size,s=n.children,u=n.mode,l=n.id,c=n.widthFlex,h=n.heightFlex,f="vertical"===u,d=[],p=0;p<s.length;++p){p>0&&d.push(t.createElement(Vj,{idx:p,key:p,isVertical:f,onDragEnd:this.onDragEnd,getDividerData:this.getDividerData,changeSizes:this.changeSizes}));var v=s[p];"tabs"in v?d.push(t.createElement(Oj,{size:v.size,panelData:v,key:v.id})):"children"in v&&d.push(t.createElement(r,{size:v.size,boxData:v,key:v.id}))}var m=1;"vertical"===u?(e="dock-box dock-vbox",null!=c&&(m=c)):(e="dock-box dock-hbox",null!=h&&(m=h));var g=m*o,y=1e6*m;return y<1&&(y=1),t.createElement("div",{ref:this.getRef,className:e,"data-dockid":l,style:{minWidth:i,minHeight:a,flex:"".concat(g," ").concat(y," ").concat(o,"px")}},d)}}]),r}(t.PureComponent);Gj.contextType=AR;var Hj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var e,n=[],r=s(this.props.boxData.children);try{for(r.s();!(e=r.n()).done;){var i=e.value;"tabs"in i&&n.push(t.createElement(Oj,{size:i.size,panelData:i,key:i.id}))}}catch(Fq){r.e(Fq)}finally{r.f()}return t.createElement("div",{className:"dock-box dock-fbox"},n)}}]),r}(t.PureComponent);function Wj(e,t){t.panels.set(e.id,e);var n,r=s(e.tabs);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.tabs.set(i.id,i)}}catch(Fq){r.e(Fq)}finally{r.f()}}function Zj(e,t){var n,r=s(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;"tabs"in i?Wj(i,t):"children"in i&&Zj(i,t)}}catch(Fq){r.e(Fq)}finally{r.f()}}function $j(e,t,n){function r(e){var r,i,a=[],o=s(e.tabs);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=(i=u,t?t(i):{id:i.id});l&&a.push(l)}}catch(Fq){o.e(Fq)}finally{o.f()}var c,h=e.id,f=e.size,d=e.activeId,p=e.group;"float"===e.parent.mode||"window"===e.parent.mode?c={id:h,size:f,tabs:a,group:p,activeId:d,x:e.x,y:e.y,z:e.z,w:e.w,h:e.h}:c={id:h,size:f,tabs:a,group:p,activeId:d};return n&&n(c,e),c}function i(e){var t,n=[],a=s(e.children);try{for(a.s();!(t=a.n()).done;){var o=t.value;"tabs"in o?n.push(r(o)):"children"in o&&n.push(i(o))}}catch(Fq){a.e(Fq)}finally{a.f()}return{id:e.id,size:e.size,mode:e.mode,children:n}}return{dockbox:i(e.dockbox),floatbox:i(e.floatbox),windowbox:i(e.windowbox),maxbox:i(e.maxbox)}}function qj(e,t,n,r){var i,a,o,u=function(e){var t={panels:new Map,tabs:new Map};return e&&("children"in e?Zj(e,t):("dockbox"in e&&Zj(e.dockbox,t),"floatbox"in e&&Zj(e.floatbox,t))),t}(t);function l(e){if(n)return n(e);var t=e.id;return u.tabs.has(t)?u.tabs.get(t):null}function c(e){var t,n,i=e.id,a=e.size,o=e.activeId,c=e.x,h=e.y,f=e.z,d=e.w,p=e.h,v=e.group,m=[],g=s(e.tabs);try{for(g.s();!(t=g.n()).done;){var y=l(t.value);y&&m.push(y)}}catch(Fq){g.e(Fq)}finally{g.f()}return n=d||p||c||h||f?{id:i,size:a,activeId:o,group:v,x:c,y:h,z:f,w:d,h:p,tabs:m}:{id:i,size:a,activeId:o,group:v,tabs:m},e.id===ER?n.panelLock={}:r?r(e,n):u.panels.has(i)&&(n=Object.assign(Object.assign({},u.panels.get(i)),n)),n}function h(e){if(!e)return null;var t,n=[],r=s(e.children);try{for(r.s();!(t=r.n()).done;){var i=t.value;"tabs"in i?n.push(c(i)):"children"in i&&n.push(h(i))}}catch(Fq){r.e(Fq)}finally{r.f()}return{id:e.id,size:e.size,mode:e.mode,children:n}}return{dockbox:h(e.dockbox),floatbox:h(null!==(i=e.floatbox)&&void 0!==i?i:{mode:"float",children:[],size:0}),windowbox:h(null!==(a=e.windowbox)&&void 0!==a?a:{mode:"window",children:[],size:0}),maxbox:h(null!==(o=e.maxbox)&&void 0!==o?o:{mode:"maximize",children:[],size:1})}}var Xj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var e=this.props.boxData.children[0];if(e)return this.hidePanelData=Object.assign(Object.assign({},e),{id:"",tabs:[]}),t.createElement("div",{className:"dock-box dock-mbox dock-mbox-show"},t.createElement(Oj,{size:100,panelData:e}));if(this.hidePanelData){var n=this.hidePanelData;return this.hidePanelData=null,t.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"},t.createElement(Oj,{size:100,panelData:n}))}return t.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"})}}]),r}(t.PureComponent),Yj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Kj=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments))._caches=new Map,e._isMounted=!1,e.destroyRemovedPane=function(){e._pendingDestroy=null;var t,n=!1,r=s(e._caches);try{for(r.s();!(t=r.n()).done;){var i=br(t.value,2),a=i[0];null==i[1].owner&&(e._caches.delete(a),n=!0)}}catch(Fq){r.e(Fq)}finally{r.f()}n&&e._isMounted&&e.forceUpdate()},e}return(0,l.Z)(n,[{key:"getTabCache",value:function(e,t){var n=this._caches.get(e);if(n)n.owner=t;else{var r=document.createElement("div");r.className="dock-pane-cache",n={div:r,id:e,owner:t},this._caches.set(e,n)}return n}},{key:"removeTabCache",value:function(e,t){var n=this._caches.get(e);n&&n.owner===t&&(n.owner=null,this._pendingDestroy||(this._pendingDestroy=setTimeout(this.destroyRemovedPane,1)))}},{key:"updateTabCache",value:function(e,t){var n=this._caches.get(e);n&&(n.portal=oP.createPortal(t,n.div,n.id),this.forceUpdate())}}]),n}(t.PureComponent),Jj=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var t,i;(0,u.Z)(this,r),(t=n.call(this,e)).getRef=function(e){t._ref=e},t.onDragStateChange=function(e){null==e&&(Oj.droppingPanel=null,t.state.dropRect&&t.setState({dropRect:null}))},t._onWindowResize=wj()((function(){var e=t.getLayout();if(t._ref){var n=pj(e,t._ref.offsetWidth,t._ref.offsetHeight);e!==n&&(n=vj(n,t.props.groups),t.changeLayout(n,null,"move"))}}),200);var a,o,s=e.layout,l=e.defaultLayout,c=e.loadTab;if(l)a=t.prepareInitData(e.defaultLayout);else if(!c)throw new Error("DockLayout.loadTab and DockLayout.defaultLayout should not both be undefined.");return t.state=s?{layout:r.loadLayoutData(s,e),dropRect:null}:{layout:a,dropRect:null},o=t.onDragStateChange,VI.add(o),null===(i=globalThis.addEventListener)||void 0===i||i.call(globalThis,"resize",t._onWindowResize),t}return(0,l.Z)(r,[{key:"getRootElement",value:function(){return this._ref}},{key:"prepareInitData",value:function(e){var t=Object.assign({},e);return vj(t,this.props.groups,this.props.loadTab),t}},{key:"getDockId",value:function(){return this.props.dockId||this}},{key:"getGroup",value:function(e){if(e){var t=this.props.groups;if(t&&e in t)return t[e];if(e===TR)return CR}return MR}},{key:"dockMove",value:function(e,t,n,r){var i=this.getLayout();if("maximize"===n?(i=dj(i,e),this.panelToFocus=e.id):i="front"===n?function(e,t){if(t){var n,r=!1,i={};if("tabs"in t?n=t:(n=t.parent).activeId!==t.id&&(i.activeId=t.id,r=!0),n&&n.parent&&"float"===n.parent.mode){var a=rj(n.z);a!==n.z&&(i.z=a,r=!0)}r&&(e=mj(e,n,KI(n,i)))}return e}(i,e):hj(i,e),t="string"===typeof t?this.find(t,tj.All):YI(t),"float"===n){var a=uj(e);a.z=rj(null),this.state.dropRect||r?i=cj(i,a,this.state.dropRect||r):(i=cj(i,a),this._ref&&(i=pj(i,this._ref.offsetWidth,this._ref.offsetHeight)))}else if("new-window"===n){i=function(e,t){var n=KI(e.windowbox);return n.children.push(t),gj(e,e.windowbox,n)}(i,uj(e))}else if(t){if("tabs"in t)if("middle"===n)i=sj(i,e,t);else i=function(e,t,n,r){var i=n.parent,a="left"===r||"right"===r?"horizontal":"vertical",o="bottom"===r||"right"===r,s=i.children.indexOf(n);if(s>=0){var u=KI(i);if(a===i.mode)o&&++s,t.size=n.size,u.children.splice(s,0,t);else{var l={mode:a,children:[]};l.size=n.size,l.children=o?[n,t]:[t,n],n.parent=l,n.size=200,t.parent=l,t.size=200,u.children[s]=l,l.parent=u}return gj(e,i,u)}return e}(i,uj(e),t,n);else if("children"in t){i=lj(i,uj(e),t,n)}else i=function(e,t,n,r){var i=n.parent.tabs.indexOf(n);return i>=0?("after-tab"===r&&++i,sj(e,t,n.parent,i)):e}(i,e,t,n)}if(i!==this.getLayout()){i=vj(i,this.props.groups);var o=e.hasOwnProperty("tabs")?e.activeId:e.id;this.changeLayout(i,o,n)}this.onDragStateChange(!1)}},{key:"find",value:function(e,t){return oj(this.getLayout(),e,t)}},{key:"getLayoutSize",value:function(){return this._ref?{width:this._ref.offsetWidth,height:this._ref.offsetHeight}:{width:0,height:0}}},{key:"updateTab",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.find(e,tj.AnyTab);if(!i)return!1;var a=i.parent,o=a.tabs.indexOf(i);if(o>=0){var s=this.props.loadTab,u=this.getLayout();if(t){var l=a.activeId;!s||"content"in t&&"title"in t||(t=s(t)),u=sj(u=hj(u,i),t,a=YI(a),o),a=YI(a),r||(a.activeId=l,this.panelToFocus=a.id)}else r&&a.activeId!==e&&(u=mj(u,a,Object.assign(Object.assign({},a),{activeId:e})));return u=vj(u,this.props.groups),this.changeLayout(u,null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:e,"update"),!0}}},{key:"navigateToPanel",value:function(e,t){if(!t)return e||(e=this._ref.querySelector(".dock-tab-active>.dock-tab-btn")),void e.focus();for(var n,r="ArrowUp"===t||"ArrowDown"===t?".dock>.dock-bar":".dock-box>.dock-panel",i=Array.from(this._ref.querySelectorAll(r)),a=i.find((function(t){return t.contains(e)})),o=a.getBoundingClientRect(),s=[],u=0,l=i;u<l.length;u++){var c=l[u];if(c!==a){var h=c.getBoundingClientRect(),f=bj(o,h,t);f>=0&&s.push({panel:c,rect:h,distance:f})}}s.sort((function(e,t){return e.distance-t.distance}));for(var d=0,p=s;d<p.length;d++){if(n=p[d].panel.querySelector(".dock-tab-active>.dock-tab-btn"))break}n&&n.focus()}},{key:"useEdgeDrop",value:function(){return"edge"===this.props.dropMode}},{key:"setDropRect",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[300,300],a=this.state.dropRect;if(a){if("remove"===t)return void(a.source===n&&this.setState({dropRect:null}));if(a.element===e&&a.direction===t&&"float"!==t)return}if(e){var o=this._ref.getBoundingClientRect(),s=this._ref.offsetWidth/o.width,u=this._ref.offsetHeight/o.height,l=e.getBoundingClientRect(),c=(l.left-o.left)*s,h=(l.top-o.top)*u,f=l.width*s,d=l.height*u,p=.5;switch(e.classList.contains("dock-box")&&(p=.3),t){case"float":var v=(r.clientX-o.left)*s,m=(r.clientY-o.top)*u;h=m-15,f=i[0],d=i[1],c=v-(f>>1);break;case"right":c+=f*(1-p);case"left":f*=p;break;case"bottom":h+=d*(1-p);case"top":d*=p;break;case"after-tab":c+=f-15,f=30;break;case"before-tab":c-=15,f=30}this.setState({dropRect:{left:c,top:h,width:f,height:d,element:e,source:n,direction:t}})}else this.setState({dropRect:null})}},{key:"render",value:function(){this.tempLayout=null;var e,n,r=this.props,i=r.style,a=r.maximizeTo,o=this.state,u=o.layout,l=o.dropRect;if(l){l.element;var c=l.direction,h=Yj(l,["element","direction"]);e=Object.assign(Object.assign({},h),{display:"block"}),"float"===c&&(e.transition="none")}a?("string"===typeof a&&(a=document.getElementById(a)),n=oP.createPortal(t.createElement(Xj,{boxData:u.maxbox}),a)):n=t.createElement(Xj,{boxData:u.maxbox});var f,d=[],p=s(this._caches);try{for(p.s();!(f=p.n()).done;){var v=br(f.value,2),m=(v[0],v[1]);m.portal&&d.push(m.portal)}}catch(Fq){p.e(Fq)}finally{p.f()}return t.createElement("div",{ref:this.getRef,className:"dock-layout",style:i},t.createElement(RR,{value:this},t.createElement(Gj,{size:1,boxData:u.dockbox}),t.createElement(Hj,{boxData:u.floatbox}),t.createElement(Ij,{boxData:u.windowbox}),n,d),t.createElement("div",{className:"dock-drop-indicator",style:e}))}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t,n){var r;if(this.panelToFocus){var i=this._ref.querySelector('.dock-panel[data-dockid="'.concat(this.panelToFocus,'"]'));i&&!i.contains(this._ref.ownerDocument.activeElement)&&(null===(r=i.querySelector(".dock-bar"))||void 0===r||r.focus()),this.panelToFocus=null}}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"resize",this._onWindowResize),t=this.onDragStateChange,VI.delete(t),this._onWindowResize.cancel(),this._isMounted=!1}},{key:"setLayout",value:function(e){this.tempLayout=e,this.setState({layout:e})}},{key:"getLayout",value:function(){return this.tempLayout||this.state.layout}},{key:"changeLayout",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.props,o=a.layout,s=a.onLayoutChange;s&&(r=$j(e,this.props.saveTab,this.props.afterPanelSaved),e.loadedFrom=r,s(r,t,n),o&&this.forceUpdate()),o||i||this.setLayout(e)}},{key:"onSilentChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this.props.onLayoutChange;if(n){var r=this.getLayout();this.changeLayout(r,e,t,!0)}}},{key:"saveLayout",value:function(){return $j(this.getLayout(),this.props.saveTab,this.props.afterPanelSaved)}},{key:"loadLayout",value:function(e){this.setLayout(r.loadLayoutData(e,this.props,this._ref.offsetWidth,this._ref.offsetHeight))}}],[{key:"loadLayoutData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.defaultLayout,a=t.loadTab,o=t.afterPanelLoaded,s=t.groups,u=qj(e,i,a,o);return(u=vj(u=pj(u,n,r),s)).loadedFrom=e,u}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.layout,i=t.layout;return n&&n!==i.loadedFrom?{layout:r.loadLayoutData(n,e)}:null}}]),r}(Kj),Qj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},eF=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=n.apply(this,arguments)).getRef=function(t){e._ref=t},e.getDividerData=function(t){if(!e._ref)return null;var n=e.props,r=n.children,i=n.mode,a=e._ref.childNodes,o=1;if(Array.isArray(r)&&(o=r.length),a.length===2*o-1){for(var s=[],u=0;u<o;++u)"vertical"===i?s.push({size:a[2*u].offsetHeight}):s.push({size:a[2*u].offsetWidth});return{element:e._ref,beforeDivider:s.slice(0,t),afterDivider:s.slice(t)}}},e.changeSizes=function(t){var n=e.props.mode,r=e._ref.childNodes;if(r.length===2*t.length-1){for(var i=0;i<t.length;++i)"vertical"===n?r[2*i].style.height="".concat(t[i],"px"):r[2*i].style.width="".concat(t[i],"px");e.forceUpdate()}},e}return(0,l.Z)(r,[{key:"render",value:function(){var e,n=this.props,r=n.children,i=n.mode,a=n.className,o=Qj(n,["children","mode","className"]),s="vertical"===i,u=[];if(Array.isArray(r))for(var l=0;l<r.length;++l)l>0&&u.push(t.createElement(Vj,{idx:l,key:l,isVertical:s,getDividerData:this.getDividerData,changeSizes:this.changeSizes})),u.push(r[l]);else u=r;return e="vertical"===i?"divider-box dock-vbox":"divider-box dock-hbox",a&&(e="".concat(e," ").concat(a)),t.createElement("div",Object.assign({ref:this.getRef,className:e},o),u)}}]),r}(t.PureComponent);eF.contextType=AR;var tF=Jj;function nF(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":hover")===e}function rF(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":focus")===e}var iF="0123456789",aF=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._textInput=void 0,i._textInputStart=void 0,i._textInputEnd=void 0,i._time_bar_resize_observer=void 0,i._timeBarDiv=void 0,i.state={timeBarWidth:400,textValue:i.value().toFixed(i.getStep()),textStartValue:i.min().toFixed(i.getStep()),textEndValue:i.max().toFixed(i.getStep()),currValue:i.value(),currStart:i.min(),currEnd:i.max(),prevPropValue:i.value().toString(),dragStart:!1,dragValue:!1,dragEnd:!1,mouseXCoord:0},i.drag=i.drag.bind((0,c.Z)(i)),i.handleDragEnd=i.handleDragEnd.bind((0,c.Z)(i)),i._textInput=(0,t.createRef)(),i._textInputStart=(0,t.createRef)(),i._textInputEnd=(0,t.createRef)(),i._timeBarDiv=(0,t.createRef)(),i.onTextInputChange=i.onTextInputChange.bind((0,c.Z)(i)),i.onTextInputKeyDown=i.onTextInputKeyDown.bind((0,c.Z)(i)),i.onTextInputStartChange=i.onTextInputStartChange.bind((0,c.Z)(i)),i.onTextInputStartKeyDown=i.onTextInputStartKeyDown.bind((0,c.Z)(i)),i.onTextInputEndChange=i.onTextInputEndChange.bind((0,c.Z)(i)),i.onTextInputEndKeyDown=i.onTextInputEndKeyDown.bind((0,c.Z)(i)),i}return(0,l.Z)(r,[{key:"renderBackground",value:function(){return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.fill,x:r.defaultProps.x+"px",y:r.defaultProps.y+"px",width:this.width()+"px",height:r.defaultProps.height+"px"})}},{key:"onClickSelectedInterval",value:function(e){var t=this.state,n=t.currStart,i=t.currEnd,a=this.max()-this.min(),o=n/a*this.width(),s=n+(e.nativeEvent.offsetX-(r.defaultProps.x+o))/Ib((i-n)/a*this.width(),0,this.width())*(i-n);this.props.onChange(s),this.setState({currValue:s,textValue:s.toFixed(this.getStep())})}},{key:"renderSelectedInterval",value:function(){var e=this.state,t=e.currStart,n=e.currEnd,i=this.max()-this.min(),a=Ib((n-t)/i*this.width(),0,this.width()),o=t/i*this.width();return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.intFill,fillOpacity:"50%",x:r.defaultProps.x+o+"px",y:r.defaultProps.y+"px",width:a+"px",height:r.defaultProps.height+"px",onClick:this.onClickSelectedInterval.bind(this)})}},{key:"renderValueInterval",value:function(){var e=this.state,t=e.currStart,n=e.currValue,i=e.currEnd,a=this.max()-this.min(),o=Ib(n-t,0,i-t)/a*this.width(),s=t/a*this.width();return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.valFill,fillOpacity:"50%",x:r.defaultProps.x+s+"px",y:r.defaultProps.y+"px",width:o+"px",height:r.defaultProps.height+"px",onClick:this.onClickSelectedInterval.bind(this)})}},{key:"onTextInputChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];iF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textValue:n})}},{key:"onTextInputKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.state.currStart,this.state.currEnd),r=this.props.onChange;this.setState({textValue:n.toString(),currValue:n},(function(){r&&r(Number(n))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.currValue.toFixed(this.getStep())})}},{key:"onTextInputStartChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];iF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textStartValue:n})}},{key:"onTextInputStartKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.min(),this.state.currEnd),r=Ib(this.state.currValue,n,this.state.currValue),i=this.props.onChange,a=this.props.onStartChange;n!==this.state.currStart?r!==this.state.currValue?this.setState({textStartValue:n.toString(),currStart:n,textValue:r.toString(),currValue:r},(function(){i&&i(Number(r)),a&&a(Number(n))})):this.setState({textStartValue:n.toString(),currStart:n},(function(){a&&a(Number(n))})):this.setState({textStartValue:n.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textStartValue:this.state.currStart.toFixed(this.getStep())})}},{key:"onTextInputEndChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];iF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textEndValue:n})}},{key:"onTextInputEndKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.state.currStart,this.max()),r=Ib(this.state.currValue,this.state.currValue,n),i=this.props.onChange,a=this.props.onEndChange;n!==this.state.currEnd?r!==this.state.currValue?this.setState({textEndValue:n.toString(),currEnd:n,textValue:r.toString(),currValue:r},(function(){i&&i(Number(r)),a&&a(Number(n))})):this.setState({textEndValue:n.toString(),currEnd:n},(function(){a&&a(Number(n))})):this.setState({textEndValue:n.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textEndValue:this.state.currEnd.toFixed(this.getStep())})}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0)}},{key:"handleDragEnd",value:function(){this.setState({dragStart:!1,dragEnd:!1,dragValue:!1}),this.detachDragEndListener()}},{key:"drag",value:function(e){var t=this.state,n=t.currStart,r=t.currValue,i=t.currEnd,a=t.mouseXCoord,o=this.max()-this.min(),s=(e.pageX-a)/this.width()*o;if(this.state.dragStart){var u=Ib(s+n,this.min(),i),l=Ib(r,u,r);u!==n&&(l!==r?(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:l,textValue:l.toFixed(this.getStep())}),this.props.onChange(l),this.props.onStartChange(u)):(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onStartChange(u)))}else if(this.state.dragValue){var c=Ib(s+r,n,i);c!==r&&(this.setState({currValue:c,textValue:c.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onChange(c))}else if(this.state.dragEnd){var h=Ib(s+i,n,this.max()),f=Ib(r,r,h);h!==i&&(f!==r?(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:f,textValue:f.toFixed(this.getStep())}),this.props.onChange(f),this.props.onEndChange(h)):(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onEndChange(h)))}}},{key:"dragfromotherplace",value:function(e){var t=this.state,n=t.currStart,r=t.currValue,i=t.currEnd,a=t.mouseXCoord,o=this.max()-this.min(),s=(e-a)/this.width()*o;if(this.state.dragStart){var u=Ib(s+n,this.min(),i),l=Ib(r,u,r);u!==n&&(l!==r?(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e,currValue:l,textValue:l.toFixed(this.getStep())}),this.props.onChange(l),this.props.onStartChange(u)):(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e}),this.props.onStartChange(u)))}else if(this.state.dragValue){var c=Ib(s+r,n,i);c!==r&&(this.setState({currValue:c,textValue:c.toFixed(this.getStep()),mouseXCoord:e}),this.props.onChange(c))}else if(this.state.dragEnd){var h=Ib(s+i,n,this.max()),f=Ib(r,r,h);h!==i&&(f!==r?(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e,currValue:f,textValue:f.toFixed(this.getStep())}),this.props.onChange(f),this.props.onEndChange(h)):(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e}),this.props.onEndChange(h)))}}},{key:"componentDidMount",value:function(){var e=this;this._time_bar_resize_observer=new ResizeObserver((function(t){e.setState({timeBarWidth:t[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}},{key:"componentWillUnmount",value:function(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}},{key:"componentDidUpdate",value:function(e,t){if(!nF(this._textInput.current)&&!rF(this._textInput.current)&&!nF(this._textInputStart.current)&&!rF(this._textInputStart.current)&&!nF(this._textInputEnd.current)&&!rF(this._textInputEnd.current)&&!nF(this._timeBarDiv.current)&&!rF(this._timeBarDiv.current))if(this.value().toString()!==this.state.prevPropValue){var n=this.value();this.setState({textValue:n.toFixed(this.getStep()),currValue:n,prevPropValue:n.toString()})}else this.props.currEndTime&&this.state.currEnd!==this.props.currEndTime?this.setState({textEndValue:this.props.currEndTime.toFixed(this.getStep()),currEnd:this.props.currEndTime}):this.props.currStartTime&&this.state.currStart!==this.props.currStartTime&&this.setState({textStartValue:this.props.currStartTime.toFixed(this.getStep()),currStart:this.props.currStartTime});var r=this.props.event_x;e.event_x!==r&&void 0!==r&&this.dragfromotherplace(r)}},{key:"render",value:function(){var e=this,t=this.getCurrLoc();return(0,rr.jsxs)("div",{className:"TimeBar",children:[(0,rr.jsxs)("div",{className:"inputDiv",children:[(0,rr.jsx)("input",{type:"text",value:this.state.textStartValue,onKeyDown:this.onTextInputStartKeyDown,onChange:this.onTextInputStartChange,ref:this._textInputStart}),(0,rr.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput})]}),(0,rr.jsx)("div",{ref:this._timeBarDiv,className:"timeBarDiv",style:{height:"".concat(30,"px")},children:(0,rr.jsxs)("svg",{width:"".concat(this.state.timeBarWidth,"px"),height:"".concat(this.props.height,"px"),children:[this.renderBackground(),this.renderSelectedInterval(),this.renderValueInterval(),(0,rr.jsx)("rect",{fill:"#999",x:t.start+4.5+"px",y:r.defaultProps.drag_bar_y+"px",width:"6px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragStart:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}}),(0,rr.jsx)("rect",{fill:"#999",x:t.end+r.defaultProps.x+"px",y:r.defaultProps.drag_bar_y+"px",width:"6px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragEnd:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}}),(0,rr.jsx)("rect",{fill:"#555",x:t.val+r.defaultProps.x+"px",y:r.defaultProps.drag_bar_y+"px",width:"4px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragValue:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}})]})}),(0,rr.jsx)("div",{className:"inputDiv",children:(0,rr.jsx)("input",{type:"text",value:this.state.textEndValue,onKeyDown:this.onTextInputEndKeyDown,onChange:this.onTextInputEndChange,ref:this._textInputEnd})})]})}},{key:"min",value:function(){var e;return null!==(e=this.props.absStartTime)&&void 0!==e?e:0}},{key:"max",value:function(){var e;return Math.max(this.min(),null!==(e=this.props.absEndTime)&&void 0!==e?e:1)}},{key:"width",value:function(){var e;return(null!==(e=this.state.timeBarWidth)&&void 0!==e?e:r.defaultProps.width)-20}},{key:"value",value:function(){var e=this.props.currTime;return this.state&&this.state.currStart&&this.state.currEnd?Ib(void 0===e?this.state.currStart:e,this.state.currStart,this.state.currEnd):Ib(void 0===e?this.min():e,this.min(),this.max())}},{key:"step",value:function(){return this.props.step}},{key:"getCurrLoc",value:function(){var e=this.state,t=e.currStart,n=e.currEnd,r=e.currValue,i=this.max()-this.min(),a=n/i*this.width();return{start:t/i*this.width(),end:a,val:r/i*this.width()}}},{key:"getStep",value:function(){for(var e,t=(null!==(e=this.props.step)&&void 0!==e?e:r.defaultProps.step).toString(),n=0,i=!1,a=0;a<t.length;a++){"."===t[a]?i=!0:i&&n++}return n}}]),r}(t.Component);aF.defaultProps={drag_bar_height:20,drag_bar_y:5,height:5,width:700,x:10,y:12,fill:"#fff",stroke:"#666",intFill:"#808080",valFill:"#f88",step:.001};var oF="0123456789",sF=VA,uF=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._textInput=void 0,i._textInputStart=void 0,i._textInputEnd=void 0,i._time_bar_resize_observer=void 0,i._timeBarDiv=void 0,i.state={timeBarWidth:400,textValue:i.value().toFixed(i.getStep()),textStartValue:i.min().toFixed(i.getStep()),textEndValue:i.max().toFixed(i.getStep()),currValue:i.value(),currStart:i.min(),currEnd:i.max(),prevPropValue:i.value().toString(),dragStart:!1,dragValue:!1,dragEnd:!1,mouseXCoord:0},i.drag=i.drag.bind((0,c.Z)(i)),i.handleDragEnd=i.handleDragEnd.bind((0,c.Z)(i)),i._textInput=(0,t.createRef)(),i._textInputStart=(0,t.createRef)(),i._textInputEnd=(0,t.createRef)(),i._timeBarDiv=(0,t.createRef)(),i.onTextInputChange=i.onTextInputChange.bind((0,c.Z)(i)),i.onTextInputKeyDown=i.onTextInputKeyDown.bind((0,c.Z)(i)),i.onTextInputStartChange=i.onTextInputStartChange.bind((0,c.Z)(i)),i.onTextInputStartKeyDown=i.onTextInputStartKeyDown.bind((0,c.Z)(i)),i.onTextInputEndChange=i.onTextInputEndChange.bind((0,c.Z)(i)),i.onTextInputEndKeyDown=i.onTextInputEndKeyDown.bind((0,c.Z)(i)),i}return(0,l.Z)(r,[{key:"renderBackground",value:function(){var e=this.props.color_level;if(!e||e.length<=1)return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.fill,x:r.defaultProps.x+"px",y:r.defaultProps.y+"px",width:this.width()+"px",height:r.defaultProps.height+"px"});var t,n=this.width()/(this.max()-this.min()),i=e[1][0],a=e[1][0],o=s(e[1]);try{for(o.s();!(t=o.n()).done;){var u=t.value;u>i&&(i=u),u<a&&(a=u)}}catch(Fq){o.e(Fq)}finally{o.f()}var l=[];if(e[0][0]>this.min()){var c=n*(e[0][0]-this.min()),h=r.defaultProps.x;l.push((0,rr.jsx)("rect",{stroke:"#fff",fill:"#fff",x:h+"px",y:r.defaultProps.y+"px",width:c+"px",height:r.defaultProps.height+"px"}))}for(var f="#fff",d=0;d<e[0].length;d++){var p=e[1][d]>=0?this.interpolateColor(i,e[1][d],r.defaultProps.colorSpectrum[2]):this.interpolateColor(-a,-e[1][d],r.defaultProps.colorSpectrum[0]),v=d<e[0].length-1?n*(e[0][d+1]-e[0][d]):n*(this.max()-e[0][d]),m=n*(e[0][d]-this.min())+r.defaultProps.x;l.push((0,rr.jsxs)("svg",{children:[(0,rr.jsxs)("linearGradient",{id:"gradient".concat(d),x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,rr.jsx)("stop",{offset:"0%",stopColor:f}),(0,rr.jsx)("stop",{offset:"100%",stopColor:p})]}),(0,rr.jsx)("rect",{stroke:"url(#gradient".concat(d,")"),fill:"url(#gradient".concat(d,")"),x:m+"px",y:r.defaultProps.y+.5+"px",width:v+"px",height:r.defaultProps.height-1+"px"},"coloredTimeBar"+d)]})),f=p}return l}},{key:"scaleColorEntry",value:function(e,t){if(0===t)return r.defaultProps.colorSpectrum[1];var n=(230-Math.round(t/e*230)).toString(16);n=1===n.length?"0"+n:n;var i=r.defaultProps.colorSpectrum[t<0?0:1];return t>0?i.substring(0,3)+n+n:i.substring(0,1)+n+n+i.substring(5)}},{key:"interpolateColor",value:function(e,t,n){return BA().domain([0,e]).range(["white",n])(t)}},{key:"renderSelectedInterval",value:function(){var e=this.state,t=e.currStart,n=e.currEnd,i=this.max()-this.min(),a=Ib((n-t)/i*this.width(),0,this.width()),o=t/i*this.width();return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.intFill,fillOpacity:"30%",x:r.defaultProps.x+o+"px",y:r.defaultProps.y+"px",width:a+"px",height:r.defaultProps.height+"px"})}},{key:"renderValueInterval",value:function(){var e=this.state,t=e.currStart,n=e.currValue,i=e.currEnd,a=this.max()-this.min(),o=Ib(n-t,0,i-t)/a*this.width(),s=t/a*this.width();return(0,rr.jsx)("rect",{stroke:r.defaultProps.stroke,fill:r.defaultProps.valFill,fillOpacity:"20%",x:r.defaultProps.x+s+"px",y:r.defaultProps.y+"px",width:o+"px",height:r.defaultProps.height+"px"})}},{key:"onTextInputChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];oF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textValue:n})}},{key:"onTextInputKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.state.currStart,this.state.currEnd),r=this.props.onChange;this.setState({textValue:n.toString(),currValue:n},(function(){r&&r(Number(n))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.currValue.toFixed(this.getStep())})}},{key:"onTextInputStartChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];oF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textStartValue:n})}},{key:"onTextInputStartKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.min(),this.state.currEnd),r=Ib(this.state.currValue,n,this.state.currValue),i=this.props.onChange,a=this.props.onStartChange;n!==this.state.currStart?r!==this.state.currValue?this.setState({textStartValue:n.toString(),currStart:n,textValue:r.toString(),currValue:r},(function(){i&&i(Number(r)),a&&a(Number(n))})):this.setState({textStartValue:n.toString(),currStart:n},(function(){a&&a(Number(n))})):this.setState({textStartValue:n.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textStartValue:this.state.currStart.toFixed(this.getStep())})}},{key:"onTextInputEndChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];oF.includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textEndValue:n})}},{key:"onTextInputEndKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.state.currStart,this.max()),r=Ib(this.state.currValue,this.state.currValue,n),i=this.props.onChange,a=this.props.onEndChange;n!==this.state.currEnd?r!==this.state.currValue?this.setState({textEndValue:n.toString(),currEnd:n,textValue:r.toString(),currValue:r},(function(){i&&i(Number(r)),a&&a(Number(n))})):this.setState({textEndValue:n.toString(),currEnd:n},(function(){a&&a(Number(n))})):this.setState({textEndValue:n.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textEndValue:this.state.currEnd.toFixed(this.getStep())})}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0)}},{key:"handleDragEnd",value:function(){this.setState({dragStart:!1,dragEnd:!1,dragValue:!1}),this.detachDragEndListener()}},{key:"drag",value:function(e){var t=this.state,n=t.currStart,r=t.currValue,i=t.currEnd,a=t.mouseXCoord,o=this.max()-this.min(),s=(e.pageX-a)/this.width()*o;if(this.state.dragStart){var u=Ib(s+n,this.min(),i),l=Ib(r,u,r);u!==n&&(l!==r?(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:l,textValue:l.toFixed(this.getStep())}),this.props.onChange(l),this.props.onStartChange(u)):(this.setState({currStart:u,textStartValue:u.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onStartChange(u)))}else if(this.state.dragValue){var c=Ib(s+r,n,i);c!==r&&(this.setState({currValue:c,textValue:c.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onChange(c))}else if(this.state.dragEnd){var h=Ib(s+i,n,this.max()),f=Ib(r,r,h);h!==i&&(f!==r?(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:f,textValue:f.toFixed(this.getStep())}),this.props.onChange(f),this.props.onEndChange(h)):(this.setState({currEnd:h,textEndValue:h.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onEndChange(h)))}}},{key:"componentDidMount",value:function(){var e=this;this._time_bar_resize_observer=new ResizeObserver((function(t){e.setState({timeBarWidth:t[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}},{key:"componentWillUnmount",value:function(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}},{key:"componentDidUpdate",value:function(e,t){if(function(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":hover")===e}(this._textInput.current)||function(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":focus")===e}(this._textInput.current)||this.value().toString()===this.state.prevPropValue)this.props.end&&this.state.currEnd!==this.props.end?this.setState({textEndValue:this.props.end.toFixed(this.getStep()),currEnd:this.props.end}):this.props.start&&this.state.currStart!==this.props.start&&this.setState({textEndValue:this.props.start.toFixed(this.getStep()),currStart:this.props.start});else{var n=this.value();this.setState({textValue:n.toFixed(this.getStep()),currValue:n,prevPropValue:n.toString()})}}},{key:"render",value:function(){var e=this,t=this.getCurrLoc();return(0,rr.jsxs)("div",{className:"ColoredTimeBar",children:[(0,rr.jsxs)("div",{className:"inputDiv",children:[(0,rr.jsx)("input",{type:"text",value:this.state.textStartValue,onKeyDown:this.onTextInputStartKeyDown,onChange:this.onTextInputStartChange,ref:this._textInputStart}),(0,rr.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput})]}),(0,rr.jsx)("div",{ref:this._timeBarDiv,className:"timeBarDiv",children:(0,rr.jsxs)("svg",{width:this.state.timeBarWidth,onMouseMove:this.drag,children:[this.renderBackground(),this.renderSelectedInterval(),this.renderValueInterval(),(0,rr.jsx)("rect",{fill:"#999",x:t.start+4.5+"px",y:r.defaultProps.drag_bar_y+"px",width:"6px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragStart:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}}),(0,rr.jsx)("rect",{fill:"#999",x:t.end+r.defaultProps.x+"px",y:r.defaultProps.drag_bar_y+"px",width:"6px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragEnd:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}}),(0,rr.jsx)("rect",{fill:"#555",x:t.val+r.defaultProps.x+"px",y:r.defaultProps.drag_bar_y+"px",width:"4px",height:r.defaultProps.drag_bar_height+"px",onMouseDown:function(t){e.setState({dragValue:!0,mouseXCoord:t.pageX}),e.attachDragEndListener()}})]})}),(0,rr.jsx)("div",{className:"inputDiv",children:(0,rr.jsx)("input",{type:"text",value:this.state.textEndValue,onKeyDown:this.onTextInputEndKeyDown,onChange:this.onTextInputEndChange,ref:this._textInputEnd})})]})}},{key:"min",value:function(){var e;return null!==(e=this.props.absStart)&&void 0!==e?e:0}},{key:"max",value:function(){var e;return Math.max(this.min(),null!==(e=this.props.absEnd)&&void 0!==e?e:1)}},{key:"width",value:function(){var e;return null!==(e=.97*this.state.timeBarWidth)&&void 0!==e?e:r.defaultProps.width}},{key:"value",value:function(){var e=this.props.value;return this.state&&this.state.currStart&&this.state.currEnd?Ib(void 0===e?this.state.currStart:e,this.state.currStart,this.state.currEnd):Ib(void 0===e?this.min():e,this.min(),this.max())}},{key:"step",value:function(){return this.props.step}},{key:"getCurrLoc",value:function(){var e=this.state,t=e.currStart,n=e.currEnd,r=e.currValue,i=this.max()-this.min(),a=n/i*this.width();return{start:t/i*this.width(),end:a,val:r/i*this.width()}}},{key:"getStep",value:function(){for(var e,t=(null!==(e=this.props.step)&&void 0!==e?e:r.defaultProps.step).toString(),n=0,i=!1,a=0;a<t.length;a++){"."===t[a]?i=!0:i&&n++}return n}}]),r}(t.Component);uF.defaultProps={drag_bar_height:20,drag_bar_y:5,height:5,width:700,x:10,y:12,gap:1,fill:"#ffffff",stroke:"#444444",intFill:"#808080",valFill:"#555555",leaveTimeOut:1e3,label:"",min:0,step:.001,max:1,value:0,colorSpectrum:[sF[1],"#ffffff",sF[0]]};var lF=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._timeBarDiv=void 0,i._time_bar_resize_observer=void 0,i._timeBarDiv=t.createRef(),i.state={timeBarWidth:400},i}return(0,l.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this._time_bar_resize_observer=new ResizeObserver((function(t){e.setState({timeBarWidth:t[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}},{key:"componentWillUnmount",value:function(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}},{key:"render",value:function(){var e,t,n,r,i,a,o,u,l,c,h,f,d=null!==(e=this.props.step)&&void 0!==e?e:.001,v=this.state.timeBarWidth,m=30,g=this.props.timeWarp,y=this.props.timeWarpMap,b=this.props.untimeWarp;if("onBaseCurrStartTimeChange"in this.props.info){var x=this.props.info;t=x.absStartTime,n=x.currStartTime,r=x.currTime,i=x.currEndTime,a=x.absEndTime,o=x.onBaseCurrStartTimeChange,u=x.onBaseCurrTimeChange,l=x.onBaseCurrEndTimeChange,c=x.onTargetCurrStartTimeChange,h=x.onTargetCurrTimeChange,f=x.onTargetCurrEndTimeChange}else{var w=this.props.info,_=br(w.timeRange(),5);t=_[0],n=_[1],r=_[2],i=_[3],a=_[4],o=function(e){w.setCurrStartTime(e)},u=function(e){w.setCurrTime(e)},l=function(e){w.setCurrEndTime(e)},c=function(e){w.setCurrStartTime(b(e))},h=function(e){w.setCurrTime(b(e))},f=function(e){w.setCurrEndTime(b(e))}}var S=[],k=Math.abs(a-t),M=br(y,2),T=M[0],E=M[1];p()(T.length===E.length);for(var C=T.length,A=Math.max(Math.floor(C/(v/16)),1),R=!1,P=function(e){var t=Ib(T[e],0,k),n=Ib(E[e],0,k),r=Ab(0,v,t/k),i=Ab(0,v,n/k);S.push((0,rr.jsx)("line",{stroke:"#B18FCF",x1:"".concat(r,"px"),y1:"".concat(0,"px"),x2:"".concat(i,"px"),y2:"".concat(30,"px")},"".concat(r," ").concat(0," ").concat(i," ").concat(30)))},L=0;L<C;L+=A)P(L),L===C-1&&(R=!0);!R&&C>0&&P(C-1);var O,N="",D=s(this.props.timeWarpTargetName.split(" "));try{for(D.s();!(O=D.n()).done;){var I=O.value;if("Time"===I)break;N+=I+" "}}catch(Fq){D.e(Fq)}finally{D.f()}return(0,rr.jsxs)("div",{className:"DoubleTimeBar",children:[(0,rr.jsxs)("div",{className:"topTimeBar",children:[(0,rr.jsxs)("div",{children:["Base:"," ".concat(this.props.timeWarpBaseName)]}),(0,rr.jsx)(aF,{absStartTime:t,currStartTime:n,currTime:r,currEndTime:i,absEndTime:a,step:d,width:v,onStartChange:o,onChange:u,onEndChange:l,event_x:this.props.event_x})]}),(0,rr.jsxs)("div",{className:"middleSVG",style:{height:"".concat(m,"px")},children:[(0,rr.jsxs)("div",{className:"inputDiv",style:{height:"".concat(m,"px")},children:[(0,rr.jsx)("input",{type:"text",style:{visibility:"hidden"}}),(0,rr.jsx)("input",{type:"text",style:{visibility:"hidden"}})]}),(0,rr.jsx)("div",{className:"svgDiv",ref:this._timeBarDiv,style:{height:"".concat(m,"px"),paddingLeft:"10px",paddingRight:"10px"},children:(0,rr.jsxs)("svg",{width:v,height:"".concat(m,"px"),style:{height:"".concat(m,"px"),width:"".concat(this.state.timeBarWidth,"px")},children:[(0,rr.jsx)("rect",{fill:"rgb(23, 24, 25)",x:0,y:0,width:"".concat(v,"px"),height:"".concat(m,"px")}),S]})}),(0,rr.jsx)("div",{className:"inputDiv",style:{height:"".concat(m,"px")},children:(0,rr.jsx)("input",{type:"text",style:{visibility:"hidden"}})})]}),(0,rr.jsxs)("div",{className:"bottomTimeBar",children:[(0,rr.jsx)(aF,{absStartTime:t,currStartTime:g(n),currTime:g(r),currEndTime:g(i),absEndTime:a,step:d,width:v,onStartChange:c,onChange:h,onEndChange:f,event_x:this.props.event_x}),(0,rr.jsxs)("div",{children:["Target:"," ".concat(N)]})]})]})}}]),r}(t.Component),cF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).onStart=function(){r.props.robotSceneManager.startAnimations(),r.setState({start:!r.state.start})},r.onPause=function(){r.props.robotSceneManager.pauseAnimations(),r.setState({start:!r.state.start})},r.onRestart=function(){r.props.robotSceneManager.restartAnimations()},r.onCurrTimeChange=function(e){r.props.robotSceneManager.setCurrTime(e)},r.onStartTimeChange=function(e){r.props.robotSceneManager.setCurrStartTime(e)},r.onEndTimeChange=function(e){r.props.robotSceneManager.setCurrEndTime(e)},r.defaultTimeBar=function(e,t){var n=br(e.timeRange(),5),i=n[0],a=n[1],o=n[2],s=n[3],u=n[4];return(0,rr.jsx)(aF,{absStartTime:i,currStartTime:a,currTime:o,currEndTime:s,absEndTime:u,step:.001,width:400,onChange:r.onCurrTimeChange,onStartChange:r.onStartTimeChange,onEndChange:r.onEndTimeChange,event_x:r.state.event_x},t)},r.coloredTimeBar=function(e,t,n){var i=br(e.timeRange(),5),a=i[0],o=i[1],s=i[2],u=i[3],l=i[4],c=r.getColorLevel(t);return(0,rr.jsx)(uF,{value:s,absStart:a,absEnd:l,start:o,end:u,step:.001,width:400,color_level:c,onChange:r.onCurrTimeChange,onStartChange:r.onStartTimeChange,onEndChange:r.onEndTimeChange})},r.state={currTimeBar:void 0===r.props.currTimeBar_prop?"default":r.props.currTimeBar_prop,event_x:0,start:!1},r}return(0,l.Z)(n,[{key:"getColorLevel",value:function(e){if(!e)return[];var t,n=0,r=[];for(r[0]=[],r[1]=[];n<e[0].length;){t=n+1;for(var i=0;t<e[0].length&&e[0][n]===e[0][t];)i=e[1][t]-e[1][n],t+=1;if((i/=t<e[1].length?e[1][t]-e[1][n]:1)>0)for(;n<t;)r[0].push(e[0][n]),r[1].push(i),n++;else{for(;t<e[1].length&&e[1][n]===e[1][t];)i=e[0][t]-e[0][n],t+=1;if((i/=t<e[0].length?e[0][t]-e[0][n]:1)>0)for(;n<t;)r[0].push(e[0][n]),r[1].push(-1*i),n++;else r[0].push(e[0][n]),r[1].push(0),n++}}for(var a=[],o=0;o<r[1].length;o++){var s=r[1][o],u=1;o+1<a.length&&(s+=r[1][o+1],u++),o+2<a.length&&(s+=r[1][o+2],u++),o-1>=0&&(s+=r[1][o-1],u++),o-2>=0&&(s+=r[1][o-2],u++),a.push(s/u)}return r[1]=a,console.log(a),r}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.event_x;e.event_x!==n&&void 0!==n&&this.setState({event_x:n})}},{key:"displayPlayButton",value:function(){this.props.robotSceneManager;return this.state.start?(0,rr.jsx)("button",{className:"Button",value:"Stop",onClick:this.onPause,children:(0,rr.jsx)($n,{className:"Icon",icon:Jn})}):(0,rr.jsx)("button",{className:"Button",value:"Start",onClick:this.onStart,children:(0,rr.jsx)($n,{className:"Icon",icon:tr})})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.robotSceneManager,i=n.targetSceneId;r.currEndTime()==r.currTime()&&!0===this.state.start&&this.setState({start:!1});var a,o=void 0===i?void 0:r.robotSceneById(i),u=[];if(void 0===(e=null===o||void 0===o?void 0:o.currTimeWarpBase()))u.push(this.defaultTimeBar(r,"DefaultTimeBar"));else{var l=[];l.push((0,rr.jsx)("option",{value:"default",children:"Default"},"default"));var c=this.props.robotSceneManager.allManagedRobotScenes().filter((function(e){return e.id().value()==i})).map((function(e){return[e,e.timeWarping()]})).filter((function(t){var n=br(t,2),r=n[0],i=n[1];return r!==e&&void 0!==i})).map((function(e){var t=br(e,2),n=t[0],r=t[1];return[n,r,r.timeWarp.bind(r),r.untimeWarp.bind(r),r.timeWarpMap()]})).filter((function(e){return void 0!==br(e,5)[4]}));if(c.length>0&&(l.push((0,rr.jsx)("option",{value:"colored",children:"Colored"},"colored")),l.push((0,rr.jsx)("option",{value:"double",children:"Double"},"double"))),l.length>1&&(a=(0,rr.jsx)("select",{name:"TimeBarSelector",value:this.state.currTimeBar,onChange:function(e){var n=e.target.selectedOptions[0],r="default";void 0!==n&&(r=n.value),t.setState({currTimeBar:r})},children:l})),"colored"===this.state.currTimeBar){var h,f=s(c);try{for(f.s();!(h=f.n()).done;){var d=br(h.value,5),p=d[0],v=d[4];u.push(this.coloredTimeBar(r,v,"ColoredTimeBar"+p.id().value()))}}catch(Fq){f.e(Fq)}finally{f.f()}}else if("double"===this.state.currTimeBar&&c.length>0){var m,g=s(c);try{for(g.s();!(m=g.n()).done;){var y=br(m.value,5),b=y[0],x=y[2],w=y[3],_=y[4];u.push((0,rr.jsx)(lF,{timeWarpBaseName:e.name(),timeWarpTargetName:b.name(),timeWarp:x,untimeWarp:w,timeWarpMap:_,info:r,event_x:this.props.event_x},b.id().value()))}}catch(Fq){g.e(Fq)}finally{g.f()}}else u.push(this.defaultTimeBar(r,"DefaultTimeBar"))}return(0,rr.jsxs)("div",{className:"AnimationPanel",children:[!this.props.global&&a,this.displayPlayButton(),(0,rr.jsx)("button",{className:"Button",value:"Restart",onClick:this.onRestart,children:(0,rr.jsx)($n,{className:"Icon",icon:er})}),u]})}}]),n}(t.Component),hF=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"render",value:function(){var e;return e="string"===typeof this.props.accept?this.props.accept:Array.isArray(this.props.accept)?this.props.accept.join(", "):"*",(0,rr.jsxs)("div",{className:"FileUploader",children:[this.props.label?(0,rr.jsx)("label",{children:this.props.label}):void 0,this.props.label&&this.props.vertical?(0,rr.jsx)("br",{}):void 0,(0,rr.jsxs)("label",{className:"fileInputHolder",children:[(0,rr.jsx)("input",Cr({type:"file",accept:e,onChange:this.props.onChange},this.props.includeDirs?{webkitdirectory:""}:{})),"Browse Files"]})]})}}]),n}(t.Component),fF=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];var dF=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(jq){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),pF=Math.abs,vF=String.fromCharCode,mF=Object.assign;function gF(e){return e.trim()}function yF(e,t,n){return e.replace(t,n)}function bF(e,t){return e.indexOf(t)}function xF(e,t){return 0|e.charCodeAt(t)}function wF(e,t,n){return e.slice(t,n)}function _F(e){return e.length}function SF(e){return e.length}function kF(e,t){return t.push(e),e}var MF=1,TF=1,EF=0,CF=0,AF=0,RF="";function PF(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:MF,column:TF,length:o,return:""}}function LF(e,t){return mF(PF("",null,null,"",null,null,0),e,{length:-e.length},t)}function OF(){return AF=CF>0?xF(RF,--CF):0,TF--,10===AF&&(TF=1,MF--),AF}function NF(){return AF=CF<EF?xF(RF,CF++):0,TF++,10===AF&&(TF=1,MF++),AF}function DF(){return xF(RF,CF)}function IF(){return CF}function jF(e,t){return wF(RF,e,t)}function FF(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zF(e){return MF=TF=1,EF=_F(RF=e),CF=0,[]}function BF(e){return RF="",e}function UF(e){return gF(jF(CF-1,HF(91===e?e+2:40===e?e+1:e)))}function VF(e){for(;(AF=DF())&&AF<33;)NF();return FF(e)>2||FF(AF)>3?"":" "}function GF(e,t){for(;--t&&NF()&&!(AF<48||AF>102||AF>57&&AF<65||AF>70&&AF<97););return jF(e,IF()+(t<6&&32==DF()&&32==NF()))}function HF(e){for(;NF();)switch(AF){case e:return CF;case 34:case 39:34!==e&&39!==e&&HF(AF);break;case 40:41===e&&HF(e);break;case 92:NF()}return CF}function WF(e,t){for(;NF()&&e+AF!==57&&(e+AF!==84||47!==DF()););return"/*"+jF(t,CF-1)+"*"+vF(47===e?e:NF())}function ZF(e){for(;!FF(DF());)NF();return jF(e,CF)}var $F="-ms-",qF="-moz-",XF="-webkit-",YF="comm",KF="rule",JF="decl",QF="@keyframes";function ez(e,t){for(var n="",r=SF(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function tz(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case JF:return e.return=e.return||e.value;case YF:return"";case QF:return e.return=e.value+"{"+ez(e.children,r)+"}";case KF:e.value=e.props.join(",")}return _F(n=ez(e.children,r))?e.return=e.value+"{"+n+"}":""}function nz(e){return BF(rz("",null,null,null,[""],e=zF(e),0,[0],e))}function rz(e,t,n,r,i,a,o,s,u){for(var l=0,c=0,h=o,f=0,d=0,p=0,v=1,m=1,g=1,y=0,b="",x=i,w=a,_=r,S=b;m;)switch(p=y,y=NF()){case 40:if(108!=p&&58==xF(S,h-1)){-1!=bF(S+=yF(UF(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:S+=UF(y);break;case 9:case 10:case 13:case 32:S+=VF(p);break;case 92:S+=GF(IF()-1,7);continue;case 47:switch(DF()){case 42:case 47:kF(az(WF(NF(),IF()),t,n),u);break;default:S+="/"}break;case 123*v:s[l++]=_F(S)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==g&&(S=yF(S,/\f/g,"")),d>0&&_F(S)-h&&kF(d>32?oz(S+";",r,n,h-1):oz(yF(S," ","")+";",r,n,h-2),u);break;case 59:S+=";";default:if(kF(_=iz(S,t,n,l,c,i,s,b,x=[],w=[],h),a),123===y)if(0===c)rz(S,t,_,_,x,a,h,s,w);else switch(99===f&&110===xF(S,3)?100:f){case 100:case 108:case 109:case 115:rz(e,_,_,r&&kF(iz(e,_,_,0,0,i,s,b,i,x=[],h),w),i,w,h,s,r?x:w);break;default:rz(S,_,_,_,[""],w,0,s,w)}}l=c=d=0,v=g=1,b=S="",h=o;break;case 58:h=1+_F(S),d=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==OF())continue;switch(S+=vF(y),y*v){case 38:g=c>0?1:(S+="\f",-1);break;case 44:s[l++]=(_F(S)-1)*g,g=1;break;case 64:45===DF()&&(S+=UF(NF())),f=DF(),c=h=_F(b=S+=ZF(IF())),y++;break;case 45:45===p&&2==_F(S)&&(v=0)}}return a}function iz(e,t,n,r,i,a,o,s,u,l,c){for(var h=i-1,f=0===i?a:[""],d=SF(f),p=0,v=0,m=0;p<r;++p)for(var g=0,y=wF(e,h+1,h=pF(v=o[p])),b=e;g<d;++g)(b=gF(v>0?f[g]+" "+y:yF(y,/&\f/g,f[g])))&&(u[m++]=b);return PF(e,t,n,0===i?KF:s,u,l,c)}function az(e,t,n){return PF(e,t,n,YF,vF(AF),wF(e,2,-2),0)}function oz(e,t,n,r){return PF(e,t,n,JF,wF(e,0,r),wF(e,r+1,-1),r)}var sz=function(e,t,n){for(var r=0,i=0;r=i,i=DF(),38===r&&12===i&&(t[n]=1),!FF(i);)NF();return jF(e,CF)},uz=function(e,t){return BF(function(e,t){var n=-1,r=44;do{switch(FF(r)){case 0:38===r&&12===DF()&&(t[n]=1),e[n]+=sz(CF-1,t,n);break;case 2:e[n]+=UF(r);break;case 4:if(44===r){e[++n]=58===DF()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=vF(r)}}while(r=NF());return e}(zF(e),t))},lz=new WeakMap,cz=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||lz.get(n))&&!r){lz.set(e,!0);for(var i=[],a=uz(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[l]):o[l]+" "+a[s]}}},hz=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function fz(e,t){switch(function(e,t){return 45^xF(e,0)?(((t<<2^xF(e,0))<<2^xF(e,1))<<2^xF(e,2))<<2^xF(e,3):0}(e,t)){case 5103:return"-webkit-print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return XF+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return XF+e+qF+e+$F+e+e;case 6828:case 4268:return XF+e+$F+e+e;case 6165:return XF+e+$F+"flex-"+e+e;case 5187:return XF+e+yF(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return XF+e+$F+"flex-item-"+yF(e,/flex-|-self/,"")+e;case 4675:return XF+e+$F+"flex-line-pack"+yF(e,/align-content|flex-|-self/,"")+e;case 5548:return XF+e+$F+yF(e,"shrink","negative")+e;case 5292:return XF+e+$F+yF(e,"basis","preferred-size")+e;case 6060:return"-webkit-box-"+yF(e,"-grow","")+XF+e+$F+yF(e,"grow","positive")+e;case 4554:return XF+yF(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return yF(yF(yF(e,/(zoom-|grab)/,"-webkit-$1"),/(image-set)/,"-webkit-$1"),e,"")+e;case 5495:case 3959:return yF(e,/(image-set\([^]*)/,"-webkit-$1$`$1");case 4968:return yF(yF(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+XF+e+e;case 4095:case 3583:case 4068:case 2532:return yF(e,/(.+)-inline(.+)/,"-webkit-$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_F(e)-1-t>6)switch(xF(e,t+1)){case 109:if(45!==xF(e,t+4))break;case 102:return yF(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(108==xF(e,t+3)?"$3":"$2-$3"))+e;case 115:return~bF(e,"stretch")?fz(yF(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==xF(e,t+1))break;case 6444:switch(xF(e,_F(e)-3-(~bF(e,"!important")&&10))){case 107:return yF(e,":",":-webkit-")+e;case 101:return yF(e,/(.+:)([^;!]+)(;|!.+)?/,"$1-webkit-"+(45===xF(e,14)?"inline-":"")+"box$3$1"+"-webkit-$2$3$1"+"-ms-$2box$3")+e}break;case 5936:switch(xF(e,t+11)){case 114:return XF+e+$F+yF(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return XF+e+$F+yF(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return XF+e+$F+yF(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return XF+e+$F+e+e}return e}var dz=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case JF:e.return=fz(e.value,e.length);break;case QF:return ez([LF(e,{value:yF(e.value,"@","@-webkit-")})],r);case KF:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ez([LF(e,{props:[yF(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ez([LF(e,{props:[yF(t,/:(plac\w+)/,":-webkit-input-$1")]}),LF(e,{props:[yF(t,/:(plac\w+)/,":-moz-$1")]}),LF(e,{props:[yF(t,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""}))}}],pz=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||dz;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,l,c=[tz,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],h=function(e){var t=SF(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([cz,hz].concat(r,c));a=function(e,t,n,r){u=n,function(e){ez(nz(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new dF({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return f.sheet.hydrate(s),f};function vz(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var mz=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},gz=function(e,t,n){mz(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}};var yz={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function bz(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var xz=/[A-Z]|^ms/g,wz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_z=function(e){return 45===e.charCodeAt(1)},Sz=function(e){return null!=e&&"boolean"!==typeof e},kz=bz((function(e){return _z(e)?e:e.replace(xz,"-$&").toLowerCase()})),Mz=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(wz,(function(e,t,n){return Ez={name:t,styles:n,next:Ez},t}))}return 1===yz[e]||_z(e)||"number"!==typeof t||0===t?t:t+"px"};function Tz(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ez={name:n.name,styles:n.styles,next:Ez},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Ez={name:r.name,styles:r.styles,next:Ez},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Tz(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Sz(o)&&(r+=kz(a)+":"+Mz(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Tz(e,t,o);switch(a){case"animation":case"animationName":r+=kz(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Sz(o[u])&&(r+=kz(a)+":"+Mz(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Ez,a=n(e);return Ez=i,Tz(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Ez,Cz=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Az=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ez=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Tz(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=Tz(n,t,e[o]),r&&(i+=a[o]);Cz.lastIndex=0;for(var s,u="";null!==(s=Cz.exec(i));)u+="-"+s[1];var l=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+u;return{name:l,styles:i,next:Ez}},Rz=!!r.useInsertionEffect&&r.useInsertionEffect,Pz=Rz||function(e){return e()},Lz=(Rz||t.useLayoutEffect,{}.hasOwnProperty),Oz=t.createContext("undefined"!==typeof HTMLElement?pz({key:"css"}):null);Oz.Provider;var Nz=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Oz);return e(n,i,r)}))};var Dz=t.createContext({});var Iz="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",jz=function(e,t){var n={};for(var r in t)Lz.call(t,r)&&(n[r]=t[r]);return n[Iz]=e,n},Fz=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return mz(t,n,r),Pz((function(){return gz(t,n,r)})),null};var zz=Nz((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var a=e[Iz],o=[i],s="";"string"===typeof e.className?s=vz(n.registered,o,e.className):null!=e.className&&(s=e.className+" ");var u=Az(o,void 0,t.useContext(Dz));s+=n.key+"-"+u.name;var l={};for(var c in e)Lz.call(e,c)&&"css"!==c&&c!==Iz&&(l[c]=e[c]);return l.ref=r,l.className=s,t.createElement(t.Fragment,null,t.createElement(Fz,{cache:n,serialized:u,isStringTag:"string"===typeof a}),t.createElement(a,l))})),Bz=(n(2110),function(e,n){var r=arguments;if(null==n||!Lz.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=zz,a[1]=jz(e,n);for(var o=2;o<i;o++)a[o]=r[o];return t.createElement.apply(null,a)});function Uz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Az(t)}var Vz=function(){var e=Uz.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Gz(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Hz=Math.min,Wz=Math.max,Zz=Math.round,$z=Math.floor,qz=function(e){return{x:e,y:e}};function Xz(e){return Cr(Cr({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function Yz(e){return Qz(e)?(e.nodeName||"").toLowerCase():"#document"}function Kz(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Jz(e){var t;return null==(t=(Qz(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Qz(e){return e instanceof Node||e instanceof Kz(e).Node}function eB(e){return e instanceof Element||e instanceof Kz(e).Element}function tB(e){return e instanceof HTMLElement||e instanceof Kz(e).HTMLElement}function nB(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Kz(e).ShadowRoot)}function rB(e){var t=oB(e),n=t.overflow,r=t.overflowX,i=t.overflowY,a=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(a)}function iB(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function aB(e){return["html","body","#document"].includes(Yz(e))}function oB(e){return Kz(e).getComputedStyle(e)}function sB(e){if("html"===Yz(e))return e;var t=e.assignedSlot||e.parentNode||nB(e)&&e.host||Jz(e);return nB(t)?t.host:t}function uB(e){var t=sB(e);return aB(t)?e.ownerDocument?e.ownerDocument.body:e.body:tB(t)&&rB(t)?t:uB(t)}function lB(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);var i=uB(e),a=i===(null==(r=e.ownerDocument)?void 0:r.body),o=Kz(i);return a?t.concat(o,o.visualViewport||[],rB(i)?i:[],o.frameElement&&n?lB(o.frameElement):[]):t.concat(i,lB(i,[],n))}function cB(e){var t=oB(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=tB(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=Zz(n)!==a||Zz(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function hB(e){return eB(e)?e:e.contextElement}function fB(e){var t=hB(e);if(!tB(t))return qz(1);var n=t.getBoundingClientRect(),r=cB(t),i=r.width,a=r.height,o=r.$,s=(o?Zz(n.width):n.width)/i,u=(o?Zz(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),u&&Number.isFinite(u)||(u=1),{x:s,y:u}}var dB=qz(0);function pB(e){var t=Kz(e);return iB()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:dB}function vB(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),a=hB(e),o=qz(1);t&&(r?eB(r)&&(o=fB(r)):o=fB(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Kz(e))&&t}(a,n,r)?pB(a):qz(0),u=(i.left+s.x)/o.x,l=(i.top+s.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(a)for(var f=Kz(a),d=r&&eB(r)?Kz(r):r,p=f.frameElement;p&&r&&d!==f;){var v=fB(p),m=p.getBoundingClientRect(),g=oB(p),y=m.left+(p.clientLeft+parseFloat(g.paddingLeft))*v.x,b=m.top+(p.clientTop+parseFloat(g.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,h*=v.y,u+=y,l+=b,p=Kz(p).frameElement}return Xz({width:c,height:h,x:u,y:l})}function mB(e,t,n,r){void 0===r&&(r={});var i=r,a=i.ancestorScroll,o=void 0===a||a,s=i.ancestorResize,u=void 0===s||s,l=i.elementResize,c=void 0===l?"function"===typeof ResizeObserver:l,h=i.layoutShift,f=void 0===h?"function"===typeof IntersectionObserver:h,d=i.animationFrame,p=void 0!==d&&d,v=hB(e),m=o||u?[].concat(pr(v?lB(v):[]),pr(lB(t))):[];m.forEach((function(e){o&&e.addEventListener("scroll",n,{passive:!0}),u&&e.addEventListener("resize",n)}));var g,y=v&&f?function(e,t){var n,r=null,i=Jz(e);function a(){clearTimeout(n),r&&r.disconnect(),r=null}return function o(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),a();var l=e.getBoundingClientRect(),c=l.left,h=l.top,f=l.width,d=l.height;if(s||t(),f&&d){var p={rootMargin:-$z(h)+"px "+-$z(i.clientWidth-(c+f))+"px "+-$z(i.clientHeight-(h+d))+"px "+-$z(c)+"px",threshold:Wz(0,Hz(1,u))||1},v=!0;try{r=new IntersectionObserver(m,Cr(Cr({},p),{},{root:i.ownerDocument}))}catch(jq){r=new IntersectionObserver(m,p)}r.observe(e)}function m(e){var t=e[0].intersectionRatio;if(t!==u){if(!v)return o();t?o(!1,t):n=setTimeout((function(){o(!1,1e-7)}),100)}v=!1}}(!0),a}(v,n):null,b=-1,x=null;c&&(x=new ResizeObserver((function(e){var r=br(e,1)[0];r&&r.target===v&&x&&(x.unobserve(t),cancelAnimationFrame(b),b=requestAnimationFrame((function(){x&&x.observe(t)}))),n()})),v&&!p&&x.observe(v),x.observe(t));var w=p?vB(e):null;return p&&function t(){var r=vB(e);!w||r.x===w.x&&r.y===w.y&&r.width===w.width&&r.height===w.height||n();w=r,g=requestAnimationFrame(t)}(),n(),function(){m.forEach((function(e){o&&e.removeEventListener("scroll",n),u&&e.removeEventListener("resize",n)})),y&&y(),x&&x.disconnect(),x=null,p&&cancelAnimationFrame(g)}}var gB=t.useLayoutEffect,yB=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],bB=function(){};function xB(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function wB(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=[].concat(r);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&a.push("".concat(xB(e,o)));return a.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var _B=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===(0,vr.Z)(e)&&null!==e?[e]:[];var t},SB=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Cr({},OR(e,yB))},kB=function(e,t,n){var r=e.cx,i=e.getStyles,a=e.getClassNames,o=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},a(t,e),o)}};function MB(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function TB(e){return MB(e)?window.pageYOffset:e.scrollTop}function EB(e,t){MB(e)?window.scrollTo(0,t):e.scrollTop=t}function CB(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function AB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bB,i=TB(e),a=t-i,o=10,s=0;function u(){var t=CB(s+=o,i,a,n);EB(e,t),s<n?window.requestAnimationFrame(u):r(e)}u()}function RB(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?EB(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&EB(e,Math.max(t.offsetTop-i,0))}function PB(){try{return document.createEvent("TouchEvent"),!0}catch(jq){return!1}}var LB=!1,OB={get passive(){return LB=!0}},NB="undefined"!==typeof window?window:{};NB.addEventListener&&NB.removeEventListener&&(NB.addEventListener("p",bB,OB),NB.removeEventListener("p",bB,!1));var DB=LB;function IB(e){return null!=e}function jB(e,t,n){return e?t:n}function FB(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,a=e.shouldScroll,o=e.isFixedPosition,s=e.controlHeight,u=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),l={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return l;var c,h=u.getBoundingClientRect().height,f=n.getBoundingClientRect(),d=f.bottom,p=f.height,v=f.top,m=n.offsetParent.getBoundingClientRect().top,g=o?window.innerHeight:MB(c=u)?window.innerHeight:c.clientHeight,y=TB(u),b=parseInt(getComputedStyle(n).marginBottom,10),x=parseInt(getComputedStyle(n).marginTop,10),w=m-x,_=g-v,S=w+y,k=h-y-v,M=d-g+y+b,T=y+v-x,E=160;switch(i){case"auto":case"bottom":if(_>=p)return{placement:"bottom",maxHeight:t};if(k>=p&&!o)return a&&AB(u,M,E),{placement:"bottom",maxHeight:t};if(!o&&k>=r||o&&_>=r)return a&&AB(u,M,E),{placement:"bottom",maxHeight:o?_-b:k-b};if("auto"===i||o){var C=t,A=o?w:S;return A>=r&&(C=Math.min(A-b-s,t)),{placement:"top",maxHeight:C}}if("bottom"===i)return a&&EB(u,M),{placement:"bottom",maxHeight:t};break;case"top":if(w>=p)return{placement:"top",maxHeight:t};if(S>=p&&!o)return a&&AB(u,T,E),{placement:"top",maxHeight:t};if(!o&&S>=r||o&&w>=r){var R=t;return(!o&&S>=r||o&&w>=r)&&(R=o?w-x:S-x),a&&AB(u,T,E),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return l}var zB=function(e){return"auto"===e?"bottom":e},BB=(0,t.createContext)(null),UB=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,a=e.menuPlacement,o=e.menuPosition,s=e.menuShouldScrollIntoView,u=e.theme,l=((0,t.useContext)(BB)||{}).setPortalPlacement,c=(0,t.useRef)(null),h=br((0,t.useState)(i),2),f=h[0],d=h[1],p=br((0,t.useState)(null),2),v=p[0],m=p[1],g=u.spacing.controlHeight;return gB((function(){var e=c.current;if(e){var t="fixed"===o,n=FB({maxHeight:i,menuEl:e,minHeight:r,placement:a,shouldScroll:s&&!t,isFixedPosition:t,controlHeight:g});d(n.maxHeight),m(n.placement),null===l||void 0===l||l(n.placement)}}),[i,a,o,s,r,l,g]),n({ref:c,placerProps:Cr(Cr({},e),{},{placement:v||zB(a),maxHeight:f})})},VB=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return Cr({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},GB=VB,HB=VB,WB=function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),t)};WB.defaultProps={children:"No options"};var ZB=function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),t)};ZB.defaultProps={children:"Loading..."};var $B,qB=["size"];var XB={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},YB=function(e){var t=e.size,n=OR(e,qB);return Bz("svg",PR({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:XB},n))},KB=function(e){return Bz(YB,PR({size:20},e),Bz("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},JB=function(e){return Bz(YB,PR({size:20},e),Bz("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},QB=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,a=r.colors;return Cr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*i,":hover":{color:n?a.neutral80:a.neutral40}})},eU=QB,tU=QB,nU=Vz($B||($B=Gz(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),rU=function(e){var t=e.delay,n=e.offset;return Bz("span",{css:Uz({animation:"".concat(nU," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},iU=function(e){var t=e.innerProps,n=e.isRtl;return Bz("div",PR({},kB(e,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Bz(rU,{delay:0,offset:n}),Bz(rU,{delay:160,offset:!0}),Bz(rU,{delay:320,offset:!n}))};iU.defaultProps={size:4};var aU=["data"],oU=["innerRef","isDisabled","isHidden","inputClassName"],sU={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},uU={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Cr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},sU)},lU=function(e){return Cr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},sU)},cU=function(e){var t=e.children,n=e.innerProps;return Bz("div",n,t)};var hU={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||Bz(KB,null))},Control:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,a=e.innerProps,o=e.menuIsOpen;return Bz("div",PR({ref:i},kB(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":o}),a),t)},DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||Bz(JB,null))},DownChevron:JB,CrossIcon:KB,Group:function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,a=e.Heading,o=e.headingProps,s=e.innerProps,u=e.label,l=e.theme,c=e.selectProps;return Bz("div",PR({},kB(e,"group",{group:!0}),s),Bz(a,PR({},o,{selectProps:c,theme:l,getStyles:r,getClassNames:i,cx:n}),u),Bz("div",null,t))},GroupHeading:function(e){var t=SB(e);t.data;var n=OR(t,aU);return Bz("div",PR({},kB(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Bz("span",PR({},t,kB(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=SB(e),i=r.innerRef,a=r.isDisabled,o=r.isHidden,s=r.inputClassName,u=OR(r,oU);return Bz("div",PR({},kB(e,"input",{"input-container":!0}),{"data-value":n||""}),Bz("input",PR({className:t({input:!0},s),ref:i,style:lU(o),disabled:a},u)))},LoadingIndicator:iU,Menu:function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return Bz("div",PR({},kB(e,"menu",{menu:!0}),{ref:n},r),t)},MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return Bz("div",PR({},kB(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,i=e.controlElement,a=e.innerProps,o=e.menuPlacement,s=e.menuPosition,u=(0,t.useRef)(null),l=(0,t.useRef)(null),c=br((0,t.useState)(zB(o)),2),h=c[0],f=c[1],d=(0,t.useMemo)((function(){return{setPortalPlacement:f}}),[]),p=br((0,t.useState)(null),2),v=p[0],m=p[1],g=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===s?0:window.pageYOffset,n=e[h]+t;n===(null===v||void 0===v?void 0:v.offset)&&e.left===(null===v||void 0===v?void 0:v.rect.left)&&e.width===(null===v||void 0===v?void 0:v.rect.width)||m({offset:n,rect:e})}}),[i,s,h,null===v||void 0===v?void 0:v.offset,null===v||void 0===v?void 0:v.rect.left,null===v||void 0===v?void 0:v.rect.width]);gB((function(){g()}),[g]);var y=(0,t.useCallback)((function(){"function"===typeof l.current&&(l.current(),l.current=null),i&&u.current&&(l.current=mB(i,u.current,g,{elementResize:"ResizeObserver"in window}))}),[i,g]);gB((function(){y()}),[y]);var b=(0,t.useCallback)((function(e){u.current=e,y()}),[y]);if(!n&&"fixed"!==s||!v)return null;var x=Bz("div",PR({ref:b},kB(Cr(Cr({},e),{},{offset:v.offset,position:s,rect:v.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Bz(BB.Provider,{value:d},n?(0,oP.createPortal)(x,n):x)},LoadingMessage:ZB,NoOptionsMessage:WB,MultiValue:function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,a=e.isDisabled,o=e.removeProps,s=e.selectProps,u=n.Container,l=n.Label,c=n.Remove;return Bz(u,{data:r,innerProps:Cr(Cr({},kB(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),i),selectProps:s},Bz(l,{data:r,innerProps:Cr({},kB(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},t),Bz(c,{data:r,innerProps:Cr(Cr({},kB(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:s}))},MultiValueContainer:cU,MultiValueLabel:cU,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({role:"button"},n),t||Bz(KB,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,a=e.innerRef,o=e.innerProps;return Bz("div",PR({},kB(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:a,"aria-disabled":n},o),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return Bz("div",PR({},kB(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return Bz("div",PR({},kB(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return Bz("div",PR({},kB(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return Bz("div",PR({},kB(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},fU=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function dU(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||fU(r)&&fU(i)))return!1;var r,i;return!0}for(var pU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},vU=function(e){return Bz("span",PR({css:pU},e))},mU={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.isDisabled,i=e.tabSelectsValue;switch(e.context){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,a=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,a=void 0===i?"":i,o=e.selectValue,s=e.isDisabled,u=e.isSelected,l=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&o)return"value ".concat(a," focused, ").concat(l(o,n),".");if("menu"===t){var c=s?" disabled":"",h="".concat(u?"selected":"focused").concat(c);return"option ".concat(a," ").concat(h,", ").concat(l(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},gU=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,a=e.focusableOptions,o=e.isFocused,s=e.selectValue,u=e.selectProps,l=e.id,c=u.ariaLiveMessages,h=u.getOptionLabel,f=u.inputValue,d=u.isMulti,p=u.isOptionDisabled,v=u.isSearchable,m=u.menuIsOpen,g=u.options,y=u.screenReaderStatus,b=u.tabSelectsValue,x=u["aria-label"],w=u["aria-live"],_=(0,t.useMemo)((function(){return Cr(Cr({},mU),c||{})}),[c]),S=(0,t.useMemo)((function(){var e,t="";if(n&&_.onChange){var r=n.option,i=n.options,a=n.removedValue,o=n.removedValues,u=n.value,l=a||r||(e=u,Array.isArray(e)?null:e),c=l?h(l):"",f=i||o||void 0,d=f?f.map(h):[],v=Cr({isDisabled:l&&p(l,s),label:c,labels:d},n);t=_.onChange(v)}return t}),[n,_,p,s,h]),k=(0,t.useMemo)((function(){var e="",t=r||i,n=!!(r&&s&&s.includes(r));if(t&&_.onFocus){var o={focused:t,label:h(t),isDisabled:p(t,s),isSelected:n,options:a,context:t===r?"menu":"value",selectValue:s};e=_.onFocus(o)}return e}),[r,i,h,p,_,a,s]),M=(0,t.useMemo)((function(){var e="";if(m&&g.length&&_.onFilter){var t=y({count:a.length});e=_.onFilter({inputValue:f,resultsMessage:t})}return e}),[a,f,m,_,g,y]),T=(0,t.useMemo)((function(){var e="";if(_.guidance){var t=i?"value":m?"menu":"input";e=_.guidance({"aria-label":x,context:t,isDisabled:r&&p(r,s),isMulti:d,isSearchable:v,tabSelectsValue:b})}return e}),[x,r,i,d,p,v,m,_,s,b]),E="".concat(k," ").concat(M," ").concat(T),C=Bz(t.Fragment,null,Bz("span",{id:"aria-selection"},S),Bz("span",{id:"aria-context"},E)),A="initial-input-focus"===(null===n||void 0===n?void 0:n.action);return Bz(t.Fragment,null,Bz(vU,{id:l},A&&C),Bz(vU,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text"},o&&!A&&C))},yU=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],bU=new RegExp("["+yU.map((function(e){return e.letters})).join("")+"]","g"),xU={},wU=0;wU<yU.length;wU++)for(var _U=yU[wU],SU=0;SU<_U.letters.length;SU++)xU[_U.letters[SU]]=_U.base;var kU=function(e){return e.replace(bU,(function(e){return xU[e]}))},MU=function(e,t){void 0===t&&(t=dU);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var a=e.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}(kU),TU=function(e){return e.replace(/^\s+|\s+$/g,"")},EU=function(e){return"".concat(e.label," ").concat(e.value)},CU=["innerRef"];function AU(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=br(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=br(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(OR(e,CU),"onExited","in","enter","exit","appear");return Bz("input",PR({ref:t},n,{css:Uz({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var RU=["boxSizing","height","overflow","paddingRight","position"],PU={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function LU(e){e.preventDefault()}function OU(e){e.stopPropagation()}function NU(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function DU(){return"ontouchstart"in window||navigator.maxTouchPoints}var IU=!("undefined"===typeof window||!window.document||!window.document.createElement),jU=0,FU={capture:!1,passive:!1};var zU=function(){return document.activeElement&&document.activeElement.blur()},BU={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function UU(e){var n=e.children,r=e.lockEnabled,i=e.captureEnabled,a=function(e){var n=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,a=e.onTopArrive,o=e.onTopLeave,s=(0,t.useRef)(!1),u=(0,t.useRef)(!1),l=(0,t.useRef)(0),c=(0,t.useRef)(null),h=(0,t.useCallback)((function(e,t){if(null!==c.current){var n=c.current,l=n.scrollTop,h=n.scrollHeight,f=n.clientHeight,d=c.current,p=t>0,v=h-f-l,m=!1;v>t&&s.current&&(i&&i(e),s.current=!1),p&&u.current&&(o&&o(e),u.current=!1),p&&t>v?(r&&!s.current&&r(e),d.scrollTop=h,m=!0,s.current=!0):!p&&-t>l&&(a&&!u.current&&a(e),d.scrollTop=0,m=!0,u.current=!0),m&&function(e){e.preventDefault(),e.stopPropagation()}(e)}}),[r,i,a,o]),f=(0,t.useCallback)((function(e){h(e,e.deltaY)}),[h]),d=(0,t.useCallback)((function(e){l.current=e.changedTouches[0].clientY}),[]),p=(0,t.useCallback)((function(e){var t=l.current-e.changedTouches[0].clientY;h(e,t)}),[h]),v=(0,t.useCallback)((function(e){if(e){var t=!!DB&&{passive:!1};e.addEventListener("wheel",f,t),e.addEventListener("touchstart",d,t),e.addEventListener("touchmove",p,t)}}),[p,d,f]),m=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",f,!1),e.removeEventListener("touchstart",d,!1),e.removeEventListener("touchmove",p,!1))}),[p,d,f]);return(0,t.useEffect)((function(){if(n){var e=c.current;return v(e),function(){m(e)}}}),[n,v,m]),function(e){c.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),o=function(e){var n=e.isEnabled,r=e.accountForScrollbars,i=void 0===r||r,a=(0,t.useRef)({}),o=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){if(IU){var t=document.body,n=t&&t.style;if(i&&RU.forEach((function(e){var t=n&&n[e];a.current[e]=t})),i&&jU<1){var r=parseInt(a.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,s=window.innerWidth-o+r||0;Object.keys(PU).forEach((function(e){var t=PU[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(s,"px"))}t&&DU()&&(t.addEventListener("touchmove",LU,FU),e&&(e.addEventListener("touchstart",NU,FU),e.addEventListener("touchmove",OU,FU))),jU+=1}}),[i]),u=(0,t.useCallback)((function(e){if(IU){var t=document.body,n=t&&t.style;jU=Math.max(jU-1,0),i&&jU<1&&RU.forEach((function(e){var t=a.current[e];n&&(n[e]=t)})),t&&DU()&&(t.removeEventListener("touchmove",LU,FU),e&&(e.removeEventListener("touchstart",NU,FU),e.removeEventListener("touchmove",OU,FU)))}}),[i]);return(0,t.useEffect)((function(){if(n){var e=o.current;return s(e),function(){u(e)}}}),[n,s,u]),function(e){o.current=e}}({isEnabled:r});return Bz(t.Fragment,null,r&&Bz("div",{onClick:zU,css:BU}),n((function(e){a(e),o(e)})))}var VU={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},GU=function(e){var t=e.name,n=e.onFocus;return Bz("input",{required:!0,name:t,tabIndex:-1,onFocus:n,css:VU,value:"",onChange:function(){}})},HU={clearIndicator:tU,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,a=i.colors,o=i.borderRadius;return Cr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:r?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},dropdownIndicator:eU,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return Cr({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,a=r.colors;return Cr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,a=i.spacing,o=i.colors;return Cr(Cr({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},uU),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,a=i.colors,o=i.spacing.baseUnit;return Cr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*o})},loadingMessage:HB,menu:function(e,t){var n,r=e.placement,i=e.theme,a=i.borderRadius,o=i.spacing,s=i.colors;return Cr((wr(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),wr(n,"position","absolute"),wr(n,"width","100%"),wr(n,"zIndex",1),n),t?{}:{backgroundColor:s.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return Cr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,a=n.colors;return Cr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,a=e.cropWithEllipsis;return Cr({overflow:"hidden",textOverflow:a||void 0===a?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,a=n.colors,o=e.isFocused;return Cr({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:GB,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,a=e.theme,o=a.spacing,s=a.colors;return Cr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?s.primary:r?s.primary25:"transparent",color:n?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?s.primary:s.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return Cr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,a=r.colors;return Cr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?a.neutral40:a.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,a=e.selectProps.controlShouldRenderValue;return Cr({alignItems:"center",display:r&&i&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var WU={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ZU={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:PB(),captureMenuScroll:!PB(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e){return function(t,n){if(t.data.__isNew__)return!0;var r=Cr({ignoreCase:!0,ignoreAccents:!0,stringify:EU,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,a=r.ignoreAccents,o=r.stringify,s=r.trim,u=r.matchFrom,l=s?TU(n):n,c=s?TU(o(t)):o(t);return i&&(l=l.toLowerCase(),c=c.toLowerCase()),a&&(l=MU(l),c=kU(c)),"start"===u?c.substr(0,l.length)===l:c.indexOf(l)>-1}}(),formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(jq){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function $U(e,t,n,r){return{type:"option",data:t,isDisabled:QU(e,t,n),isSelected:eV(e,t,n),label:KU(e,t),value:JU(e,t),index:r}}function qU(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return $U(e,n,t,r)})).filter((function(t){return YU(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var a=$U(e,n,t,r);return YU(e,a)?a:void 0})).filter(IB)}function XU(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,pr(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function YU(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,a=t.isSelected,o=t.label,s=t.value;return(!nV(e)||!a)&&tV(e,{label:o,value:s,data:i},r)}var KU=function(e,t){return e.getOptionLabel(t)},JU=function(e,t){return e.getOptionValue(t)};function QU(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function eV(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=JU(e,t);return n.some((function(t){return JU(e,t)===r}))}function tV(e,t,n){return!e.filterOption||e.filterOption(t,n)}var nV=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},rV=1,iV=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var t;if((0,u.Z)(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,a=r.name;n.name=a,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,a=i.closeMenuOnSelect,o=i.isMulti,s=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:s}),a&&(t.setState({inputIsHiddenAfterUpdate:!o}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,a=n.name,o=t.state.selectValue,s=i&&t.isOptionSelected(e,o),u=t.isOptionDisabled(e,o);if(s){var l=t.getOptionValue(e);t.setValue(o.filter((function(e){return t.getOptionValue(e)!==l})),"deselect-option",e)}else{if(u)return void t.ariaOnChange(e,{action:"select-option",option:e,name:a});i?t.setValue([].concat(pr(o),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),a=r.filter((function(e){return t.getOptionValue(e)!==i})),o=jB(n,a,a[0]||null);t.onChange(o,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(jB(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),a=jB(e,i,i[0]||null);t.onChange(a,{action:"pop-value",removedValue:r})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return wB.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return KU(t.props,e)},t.getOptionValue=function(e){return JU(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=HU[e](n,r);i.boxSizing="border-box";var a=t.props.styles[e];return a?a(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,Cr(Cr({},hU),e.components);var e},t.buildCategorizedOptions=function(){return qU(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return XU(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:Cr({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&MB(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),a=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||a>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){t.blockOptionHover||t.state.focusedOption===e||t.setState({focusedOption:e})},t.shouldHideSelectedOptions=function(){return nV(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,a=n.escapeClearsValue,o=n.inputValue,s=n.isClearable,u=n.isDisabled,l=n.menuIsOpen,c=n.onKeyDown,h=n.tabSelectsValue,f=n.openMenuOnFocus,d=t.state,p=d.focusedOption,v=d.focusedValue,m=d.selectValue;if(!u&&("function"!==typeof c||(c(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||o)return;t.focusValue("previous");break;case"ArrowRight":if(!r||o)return;t.focusValue("next");break;case"Delete":case"Backspace":if(o)return;if(v)t.removeValue(v);else{if(!i)return;r?t.popValue():s&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!l||!h||!p||f&&t.isOptionSelected(p,m))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(l){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":l?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:o}),t.onMenuClose()):s&&a&&t.clearValue();break;case" ":if(o)return;if(!l){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":l?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":l?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!l)return;t.focusOption("pageup");break;case"PageDown":if(!l)return;t.focusOption("pagedown");break;case"Home":if(!l)return;t.focusOption("first");break;case"End":if(!l)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++rV),t.state.selectValue=_B(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.buildFocusableOptions(),a=i.indexOf(t.state.selectValue[0]);t.state.focusedOption=i[a]}return t}return(0,l.Z)(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&RB(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(RB(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,a=this.buildFocusableOptions(),o="first"===e?0:a.length-1;if(!this.props.isMulti){var s=a.indexOf(r[0]);s>-1&&(o=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:a[o]},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var a=n.length-1,o=-1;if(n.length){switch(e){case"previous":o=0===i?0:-1===i?a:i-1;break;case"next":i>-1&&i<a&&(o=i+1)}this.setState({inputIsHidden:-1!==o,focusedValue:n[o]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,a=r.indexOf(n);n||(a=-1),"up"===e?i=a>0?a-1:r.length-1:"down"===e?i=(a+1)%r.length:"pageup"===e?(i=a-t)<0&&(i=0):"pagedown"===e?(i=a+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(WU):Cr(Cr({},WU),this.props.theme):WU}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,a=this.selectOption,o=this.setValue,s=this.props,u=s.isMulti,l=s.isRtl,c=s.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:u,isRtl:l,options:c,selectOption:a,selectProps:s,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return QU(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return eV(this.props,e,t)}},{key:"filterOption",value:function(e,t){return tV(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,i=e.inputId,a=e.inputValue,o=e.tabIndex,s=e.form,u=e.menuIsOpen,l=e.required,c=this.getComponents().Input,h=this.state,f=h.inputIsHidden,d=h.ariaSelection,p=this.commonProps,v=i||this.getElementId("input"),m=Cr(Cr(Cr({"aria-autocomplete":"list","aria-expanded":u,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":l,role:"combobox"},u&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===d||void 0===d?void 0:d.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(c,PR({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:v,innerRef:this.getInputRef,isDisabled:n,isHidden:f,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:s,type:"text",value:a},m)):t.createElement(AU,PR({id:v,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:bB,onFocus:this.onInputFocus,disabled:n,tabIndex:o,inputMode:"none",form:s,value:""},m))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,a=n.MultiValueLabel,o=n.MultiValueRemove,s=n.SingleValue,u=n.Placeholder,l=this.commonProps,c=this.props,h=c.controlShouldRenderValue,f=c.isDisabled,d=c.isMulti,p=c.inputValue,v=c.placeholder,m=this.state,g=m.selectValue,y=m.focusedValue,b=m.isFocused;if(!this.hasValue()||!h)return p?null:t.createElement(u,PR({},l,{key:"placeholder",isDisabled:f,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),v);if(d)return g.map((function(n,s){var u=n===y,c="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,PR({},l,{components:{Container:i,Label:a,Remove:o},isFocused:u,isDisabled:f,key:c,index:s,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(p)return null;var x=g[0];return t.createElement(s,PR({},l,{data:x,isDisabled:f}),this.formatOptionLabel(x,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,a=r.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||a)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,PR({},n,{innerProps:s,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,a=r.isLoading,o=this.state.isFocused;if(!e||!a)return null;return t.createElement(e,PR({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,a=this.props.isDisabled,o=this.state.isFocused;return t.createElement(r,PR({},i,{isDisabled:a,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,a={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,PR({},n,{innerProps:a,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,a=n.Menu,o=n.MenuList,s=n.MenuPortal,u=n.LoadingMessage,l=n.NoOptionsMessage,c=n.Option,h=this.commonProps,f=this.state.focusedOption,d=this.props,p=d.captureMenuScroll,v=d.inputValue,m=d.isLoading,g=d.loadingMessage,y=d.minMenuHeight,b=d.maxMenuHeight,x=d.menuIsOpen,w=d.menuPlacement,_=d.menuPosition,S=d.menuPortalTarget,k=d.menuShouldBlockScroll,M=d.menuShouldScrollIntoView,T=d.noOptionsMessage,E=d.onMenuScrollToTop,C=d.onMenuScrollToBottom;if(!x)return null;var A,R=function(n,r){var i=n.type,a=n.data,o=n.isDisabled,s=n.isSelected,u=n.label,l=n.value,d=f===a,p=o?void 0:function(){return e.onOptionHover(a)},v=o?void 0:function(){return e.selectOption(a)},m="".concat(e.getElementId("option"),"-").concat(r),g={id:m,onClick:v,onMouseMove:p,onMouseOver:p,tabIndex:-1};return t.createElement(c,PR({},h,{innerProps:g,data:a,isDisabled:o,isSelected:s,key:m,label:u,type:i,value:l,isFocused:d,innerRef:d?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())A=this.getCategorizedOptions().map((function(n){if("group"===n.type){var a=n.data,o=n.options,s=n.index,u="".concat(e.getElementId("group"),"-").concat(s),l="".concat(u,"-heading");return t.createElement(r,PR({},h,{key:u,data:a,options:o,Heading:i,headingProps:{id:l,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return R(e,"".concat(s,"-").concat(e.index))})))}if("option"===n.type)return R(n,"".concat(n.index))}));else if(m){var P=g({inputValue:v});if(null===P)return null;A=t.createElement(u,h,P)}else{var L=T({inputValue:v});if(null===L)return null;A=t.createElement(l,h,L)}var O={minMenuHeight:y,maxMenuHeight:b,menuPlacement:w,menuPosition:_,menuShouldScrollIntoView:M},N=t.createElement(UB,PR({},h,O),(function(n){var r=n.ref,i=n.placerProps,s=i.placement,u=i.maxHeight;return t.createElement(a,PR({},h,O,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove,id:e.getElementId("listbox")},isLoading:m,placement:s}),t.createElement(UU,{captureEnabled:p,onTopArrive:E,onBottomArrive:C,lockEnabled:k},(function(n){return t.createElement(o,PR({},h,{innerRef:function(t){e.getMenuListRef(t),n(t)},isLoading:m,maxHeight:u,focusedOption:f}),A)})))}));return S||"fixed"===_?t.createElement(s,PR({},h,{appendTo:S,controlElement:this.controlRef,menuPlacement:w,menuPosition:_}),N):N}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,i=n.isDisabled,a=n.isMulti,o=n.name,s=n.required,u=this.state.selectValue;if(o&&!i){if(s&&!this.hasValue())return t.createElement(GU,{name:o,onFocus:this.onValueInputFocus});if(a){if(r){var l=u.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:o,type:"hidden",value:l})}var c=u.length>0?u.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:o,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:o,type:"hidden",value:""});return t.createElement("div",null,c)}var h=u[0]?this.getOptionValue(u[0]):"";return t.createElement("input",{name:o,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,a=n.focusedValue,o=n.isFocused,s=n.selectValue,u=this.getFocusableOptions();return t.createElement(gU,PR({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:a,isFocused:o,selectValue:s,focusableOptions:u}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,i=e.SelectContainer,a=e.ValueContainer,o=this.props,s=o.className,u=o.id,l=o.isDisabled,c=o.menuIsOpen,h=this.state.isFocused,f=this.commonProps=this.getCommonProps();return t.createElement(i,PR({},f,{className:s,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:h}),this.renderLiveRegion(),t.createElement(n,PR({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:h,menuIsOpen:c}),t.createElement(a,PR({},f,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,PR({},f,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,a=t.ariaSelection,o=t.isFocused,s=t.prevWasFocused,u=e.options,l=e.value,c=e.menuIsOpen,h=e.inputValue,f=e.isMulti,d=_B(l),p={};if(n&&(l!==n.value||u!==n.options||c!==n.menuIsOpen||h!==n.inputValue)){var v=c?function(e,t){return XU(qU(e,t))}(e,d):[],m=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,d):null,g=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,v);p={selectValue:d,focusedOption:g,focusedValue:m,clearFocusValueOnUpdate:!1}}var y=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},b=a,x=o&&s;return o&&!x&&(b={value:jB(f,d,d[0]||null),options:d,action:"initial-input-focus"},x=!s),"initial-input-focus"===(null===a||void 0===a?void 0:a.action)&&(b=null),Cr(Cr(Cr({},p),y),{},{prevProps:e,ariaSelection:b,prevWasFocused:x})}}]),r}(t.Component);iV.defaultProps=ZU;var aV=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,i=e.defaultMenuIsOpen,a=void 0!==i&&i,o=e.defaultValue,s=void 0===o?null:o,u=e.inputValue,l=e.menuIsOpen,c=e.onChange,h=e.onInputChange,f=e.onMenuClose,d=e.onMenuOpen,p=e.value,v=OR(e,fF),m=br((0,t.useState)(void 0!==u?u:r),2),g=m[0],y=m[1],b=br((0,t.useState)(void 0!==l?l:a),2),x=b[0],w=b[1],_=br((0,t.useState)(void 0!==p?p:s),2),S=_[0],k=_[1],M=(0,t.useCallback)((function(e,t){"function"===typeof c&&c(e,t),k(e)}),[c]),T=(0,t.useCallback)((function(e,t){var n;"function"===typeof h&&(n=h(e,t)),y(void 0!==n?n:e)}),[h]),E=(0,t.useCallback)((function(){"function"===typeof d&&d(),w(!0)}),[d]),C=(0,t.useCallback)((function(){"function"===typeof f&&f(),w(!1)}),[f]),A=void 0!==u?u:g,R=void 0!==l?l:x,P=void 0!==p?p:S;return Cr(Cr({},v),{},{inputValue:A,menuIsOpen:R,onChange:M,onInputChange:T,onMenuClose:C,onMenuOpen:E,value:P})}(e);return t.createElement(iV,PR({ref:n},r))})),oV=aV,sV=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._button=void 0,i._button=t.createRef(),i}return(0,l.Z)(r,[{key:"render",value:function(){return(0,rr.jsx)("button",{className:"ClickButton",ref:this._button,onClick:this.props.onClick,style:this.props.style,children:this.props.buttonValue})}}]),r}(t.Component),uV=n(9902);function lV(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":hover")===e}var cV,hV=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._textInput=void 0,i._sliderInput=void 0,i.onTextInputChange=i.onTextInputChange.bind((0,c.Z)(i)),i.onTextInputKeyDown=i.onTextInputKeyDown.bind((0,c.Z)(i)),i.onSliderChange=i.onSliderChange.bind((0,c.Z)(i)),i._textInput=(0,t.createRef)(),i._sliderInput=(0,t.createRef)();var a=i.value().toString();return i.state={textValue:a,sliderValue:a,prevPropValue:a},i}return(0,l.Z)(r,[{key:"onTextInputChange",value:function(e){for(var t=e.currentTarget.value,n="",r=0,i=0;i<t.length;i++){var a=t[i];"0123456789".includes(a)?n+=a:0===r&&"."===a?(n+=a,r++):0===n.length&&"-"===a&&(n+=a)}this.setState({textValue:n})}},{key:"onTextInputKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=Ib(Number(t.value),this.min(),this.max()),r=this.props.onChange;this.setState({textValue:n.toString(),sliderValue:n.toString()},(function(){r&&r(Number(n))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.sliderValue})}},{key:"onSliderChange",value:function(e){var t=this,n=e.currentTarget.value,r=this.props.onChange;this.setState({sliderValue:n,textValue:n},(function(){r&&r(Number(t.state.sliderValue))}))}},{key:"componentDidUpdate",value:function(e,t){if(!(lV(this._textInput.current)||function(e){if(!e)return!1;var t=e.parentElement;return!!t&&t.querySelector(":focus")===e}(this._textInput.current)||lV(this._sliderInput.current))&&this.value().toString()!==this.state.prevPropValue){var n=this.value().toString();this.setState({textValue:n,sliderValue:n,prevPropValue:n})}}},{key:"render",value:function(){var e,t=this;e=this.props.label?(0,rr.jsx)("div",{className:"labelDiv",children:(0,rr.jsx)("label",{children:this.props.label})}):void 0;var n=this.props.onMouseUp;return(0,rr.jsxs)("div",{className:"LabeledSlider",children:[e,(0,rr.jsxs)("div",{className:"inputDiv",children:[(0,rr.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput}),(0,rr.jsx)("input",{type:"range",max:this.max(),min:this.min(),step:this.step(),value:this.state.sliderValue,onChange:this.onSliderChange,onMouseUp:function(){n&&n(Number(t.state.sliderValue))},ref:this._sliderInput})]})]})}},{key:"min",value:function(){var e;return null!==(e=this.props.min)&&void 0!==e?e:0}},{key:"max",value:function(){var e;return Math.max(this.min(),null!==(e=this.props.max)&&void 0!==e?e:1)}},{key:"value",value:function(){var e=this.props.value;return Ib(void 0===e?this.min():e,this.min(),this.max())}},{key:"step",value:function(){return this.props.step}}]),r}(t.Component),fV=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._button=void 0,i._button=t.createRef(),i}return(0,l.Z)(r,[{key:"render",value:function(){var e=this;return(0,rr.jsx)(WI,{className:"DragButton_".concat(this.props.className?this.props.className:""),onDragStartT:function(t){var n=e.props.onDragStart;if(n){var r=n(t);if(void 0!==r){var i=br(r,2),a=i[0],o=i[1],s=e._button.current;if(s){var u=e.props.getParentDockLayout();u&&(cV=o,t.setData({tab:{id:a}},u),t.startDrag(s,s))}}}},onDragEndT:function(e){cV&&cV(e)},children:(0,rr.jsx)("button",{className:"DragButtonButton",ref:this._button,title:this.props.title,onClickCapture:this.props.onClick,style:this.props.style,children:this.props.buttonValue})})}}]),r}(t.Component);function dV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dV(Object(n),!0).forEach((function(t){yV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gV(e,t,n){return t&&mV(e.prototype,t),n&&mV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bV(){return bV=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bV.apply(this,arguments)}function xV(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_V(e,t)}function wV(e){return wV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wV(e)}function _V(e,t){return _V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_V(e,t)}function SV(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MV(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kV(e)}function TV(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(jq){return!1}}();return function(){var n,r=wV(e);if(t){var i=wV(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MV(this,n)}}function EV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(Fq){s=!0,i=Fq}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||AV(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CV(e){return function(e){if(Array.isArray(e))return RV(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||AV(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AV(e,t){if(e){if("string"===typeof e)return RV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RV(e,t):void 0}}function RV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var PV=gV((function e(t){var n=this,r=t.expanded,i=void 0===r?[]:r,a=t.allowMultipleExpanded,o=void 0!==a&&a,s=t.allowZeroExpanded,u=void 0!==s&&s;vV(this,e),yV(this,"expanded",void 0),yV(this,"allowMultipleExpanded",void 0),yV(this,"allowZeroExpanded",void 0),yV(this,"toggleExpanded",(function(e){return n.isItemDisabled(e)?n:n.isItemExpanded(e)?n.augment({expanded:n.expanded.filter((function(t){return t!==e}))}):n.augment({expanded:n.allowMultipleExpanded?[].concat(CV(n.expanded),[e]):[e]})})),yV(this,"isItemDisabled",(function(e){var t=n.isItemExpanded(e),r=1===n.expanded.length;return Boolean(t&&!n.allowZeroExpanded&&r)})),yV(this,"isItemExpanded",(function(e){return-1!==n.expanded.indexOf(e)})),yV(this,"getPanelAttributes",(function(e,t){var r=null!==t&&void 0!==t?t:n.isItemExpanded(e);return{role:n.allowMultipleExpanded?void 0:"region","aria-hidden":n.allowMultipleExpanded?!r:void 0,"aria-labelledby":n.getButtonId(e),id:n.getPanelId(e),hidden:!r||void 0}})),yV(this,"getHeadingAttributes",(function(){return{role:"heading"}})),yV(this,"getButtonAttributes",(function(e,t){var r=null!==t&&void 0!==t?t:n.isItemExpanded(e),i=n.isItemDisabled(e);return{id:n.getButtonId(e),"aria-disabled":i,"aria-expanded":r,"aria-controls":n.getPanelId(e),role:"button",tabIndex:0}})),yV(this,"getPanelId",(function(e){return"accordion__panel-".concat(e)})),yV(this,"getButtonId",(function(e){return"accordion__heading-".concat(e)})),yV(this,"augment",(function(t){return new e(pV({expanded:n.expanded,allowMultipleExpanded:n.allowMultipleExpanded,allowZeroExpanded:n.allowZeroExpanded},t))})),this.expanded=i,this.allowMultipleExpanded=o,this.allowZeroExpanded=u})),LV=(0,t.createContext)(null),OV=function(e){xV(r,e);var n=TV(r);function r(){var e;vV(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return yV(kV(e=n.call.apply(n,[this].concat(i))),"state",new PV({expanded:e.props.preExpanded,allowMultipleExpanded:e.props.allowMultipleExpanded,allowZeroExpanded:e.props.allowZeroExpanded})),yV(kV(e),"toggleExpanded",(function(t){e.setState((function(e){return e.toggleExpanded(t)}),(function(){e.props.onChange&&e.props.onChange(e.state.expanded)}))})),yV(kV(e),"isItemDisabled",(function(t){return e.state.isItemDisabled(t)})),yV(kV(e),"isItemExpanded",(function(t){return e.state.isItemExpanded(t)})),yV(kV(e),"getPanelAttributes",(function(t,n){return e.state.getPanelAttributes(t,n)})),yV(kV(e),"getHeadingAttributes",(function(){return e.state.getHeadingAttributes()})),yV(kV(e),"getButtonAttributes",(function(t,n){return e.state.getButtonAttributes(t,n)})),e}return gV(r,[{key:"render",value:function(){var e=this.state,n=e.allowZeroExpanded,r=e.allowMultipleExpanded;return(0,t.createElement)(LV.Provider,{value:{allowMultipleExpanded:r,allowZeroExpanded:n,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),r}(t.PureComponent);yV(OV,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var NV,DV=function(e){xV(r,e);var n=TV(r);function r(){var e;vV(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return yV(kV(e=n.call.apply(n,[this].concat(i))),"renderChildren",(function(t){return t?e.props.children(t):null})),e}return gV(r,[{key:"render",value:function(){return(0,t.createElement)(LV.Consumer,null,this.renderChildren)}}]),r}(t.PureComponent),IV=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],jV=function(e){var n=e.className,r=void 0===n?"accordion":n,i=e.allowMultipleExpanded,a=e.allowZeroExpanded,o=e.onChange,s=e.preExpanded,u=SV(e,IV);return(0,t.createElement)(OV,{preExpanded:s,allowMultipleExpanded:i,allowZeroExpanded:a,onChange:o},(0,t.createElement)("div",bV({"data-accordion-component":"Accordion",className:r},u)))};!function(e){e.Accordion="Accordion",e.AccordionItem="AccordionItem",e.AccordionItemButton="AccordionItemButton",e.AccordionItemHeading="AccordionItemHeading",e.AccordionItemPanel="AccordionItemPanel"}(NV||(NV={}));var FV=NV,zV=0;var BV=t.useId||function(){var e=zV;return zV+=1,"raa-".concat(e)},UV=/[\u0009\u000a\u000c\u000d\u0020]/g;function VV(e){return""!==e&&!UV.test(e)||(console.error('uuid must be a valid HTML5 id but was given "'.concat(e,'", ASCII whitespaces are forbidden')),!1)}var GV=(0,t.createContext)(null),HV=function(e){var n=e.children,r=e.uuid,i=e.accordionContext,a=e.dangerouslySetExpanded,o=function(){i.toggleExpanded(r)},s=function(e){var i=null!==a&&void 0!==a?a:e.isItemExpanded(r),s=e.isItemDisabled(r),u=e.getPanelAttributes(r,a),l=e.getHeadingAttributes(r),c=e.getButtonAttributes(r,a);return(0,t.createElement)(GV.Provider,{value:{uuid:r,expanded:i,disabled:s,toggleExpanded:o,panelAttributes:u,headingAttributes:l,buttonAttributes:c}},n)};return(0,t.createElement)(DV,null,s)},WV=function(e){return(0,t.createElement)(DV,null,(function(n){return(0,t.createElement)(HV,bV({},e,{accordionContext:n}))}))},ZV=function(e){var n=e.children,r=function(e){return e?n(e):null};return(0,t.createElement)(GV.Consumer,null,r)},$V=["uuid","dangerouslySetExpanded","className","activeClassName"],qV=function(e){var n=e.uuid,r=e.dangerouslySetExpanded,i=e.className,a=void 0===i?"accordion__item":i,o=e.activeClassName,s=SV(e,$V),u=EV((0,t.useState)(BV()),1)[0],l=null!==n&&void 0!==n?n:u,c=function(e){var n=e.expanded&&o?o:a;return(0,t.createElement)("div",bV({"data-accordion-component":"AccordionItem",className:n},s))};return VV(l.toString()),s.id&&VV(s.id),(0,t.createElement)(WV,{uuid:l,dangerouslySetExpanded:r},(0,t.createElement)(ZV,null,c))};function XV(e){return e&&(e.matches('[data-accordion-component="Accordion"]')?e:XV(e.parentElement))}function YV(e){var t=XV(e);return t&&Array.from(t.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}qV.displayName=FV.AccordionItem;var KV="End",JV="Enter",QV="Home",eG=" ",tG="Spacebar",nG="ArrowUp",rG="ArrowDown",iG="ArrowLeft",aG="ArrowRight",oG=["toggleExpanded","className"],sG=function(e){var n=e.toggleExpanded,r=e.className,i=void 0===r?"accordion__button":r,a=SV(e,oG);return a.id&&VV(a.id),(0,t.createElement)("div",bV({className:i},a,{role:"button",tabIndex:0,onClick:n,onKeyDown:function(e){var t=e.key;if(t!==JV&&t!==eG&&t!==tG||(e.preventDefault(),n()),e.target instanceof HTMLElement)switch(t){case QV:e.preventDefault(),function(e){var t=(YV(e)||[])[0];t&&t.focus()}(e.target);break;case KV:e.preventDefault(),function(e){var t=YV(e)||[],n=t[t.length-1];n&&n.focus()}(e.target);break;case iG:case nG:e.preventDefault(),function(e){var t=YV(e)||[],n=t.indexOf(e);if(-1!==n){var r=t[n-1];r&&r.focus()}}(e.target);break;case aG:case rG:e.preventDefault(),function(e){var t=YV(e)||[],n=t.indexOf(e);if(-1!==n){var r=t[n+1];r&&r.focus()}}(e.target)}},"data-accordion-component":"AccordionItemButton"}))},uG=function(e){return(0,t.createElement)(ZV,null,(function(n){var r=n.toggleExpanded,i=n.buttonAttributes;return(0,t.createElement)(sG,bV({toggleExpanded:r},e,i))}))},lG=function(e){xV(r,e);var n=TV(r);function r(){var e;vV(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return yV(kV(e=n.call.apply(n,[this].concat(i))),"ref",void 0),yV(kV(e),"setRef",(function(t){e.ref=t})),e}return gV(r,[{key:"componentDidUpdate",value:function(){r.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){r.VALIDATE(this.ref)}},{key:"render",value:function(){return(0,t.createElement)("div",bV({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(e){if(void 0===e)throw new Error("ref is undefined");if(1!==e.childElementCount||!e.firstElementChild||"AccordionItemButton"!==e.firstElementChild.getAttribute("data-accordion-component"))throw new Error("AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.\n\nFrom the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):\n\n\u201cThe button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.\u201d\n\n")}}]),r}(t.PureComponent);yV(lG,"defaultProps",{className:"accordion__heading","aria-level":3});var cG=function(e){return(0,t.createElement)(ZV,null,(function(n){var r=n.headingAttributes;return e.id&&VV(e.id),(0,t.createElement)(lG,bV({},e,r))}))};cG.displayName=FV.AccordionItemHeading;var hG=["className","region","id"],fG=function(e){var n=e.className,r=void 0===n?"accordion__panel":n,i=e.region,a=e.id,o=SV(e,hG),s=function(e){var n=e.panelAttributes;a&&VV(a);var s=pV(pV({},n),{},{"aria-labelledby":i?n["aria-labelledby"]:void 0});return(0,t.createElement)("div",bV({"data-accordion-component":"AccordionItemPanel",className:r},o,s,{role:i?"region":void 0}))};return(0,t.createElement)(ZV,null,s)};function dG(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=dG(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var pG=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=dG(e))&&(r&&(r+=" "),r+=t);return r};function vG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function mG(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function gG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function yG(e){if(e.type)return e;if("#"===e.charAt(0))return yG(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(mG(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(mG(10,r))}else i=i.split(",");return i=i.map((function(e){return parseFloat(e)})),{type:n,values:i,colorSpace:r}}function bG(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function xG(e){var t="hsl"===(e=yG(e)).type||"hsla"===e.type?yG(function(e){var t=(e=yG(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),bG({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function wG(e,t){return e=yG(e),t=gG(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,bG(e)}function _G(e,t){if(e=yG(e),t=gG(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return bG(e)}function SG(e,t){if(e=yG(e),t=gG(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return bG(e)}function kG(e){if("string"!==typeof e)throw new Error(mG(7));return e.charAt(0).toUpperCase()+e.slice(1)}var MG=kG,TG=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,EG=bz((function(e){return TG.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),CG=function(e){return"theme"!==e},AG=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?EG:CG},RG=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},PG=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return mz(t,n,r),Pz((function(){return gz(t,n,r)})),null},LG=function e(n,r){var i,a,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var u=RG(n,r,o),l=u||AG(s),c=!l("as");return function(){var h=arguments,f=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)f.push(h[p],h[0][p])}var v=Nz((function(e,n,r){var i=c&&e.as||s,o="",h=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=t.useContext(Dz)}"string"===typeof e.className?o=vz(n.registered,h,e.className):null!=e.className&&(o=e.className+" ");var v=Az(f.concat(h),n.registered,d);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=c&&void 0===u?AG(i):l,g={};for(var y in e)c&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=o,g.ref=r,t.createElement(t.Fragment,null,t.createElement(PG,{cache:n,serialized:v,isStringTag:"string"===typeof i}),t.createElement(i,g))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=f,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,n){return e(t,PR({},r,n,{shouldForwardProp:RG(v,n,!0)})).apply(void 0,f)},v}}.bind();function OG(e,t){return LG(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){LG[e]=LG(e)}));var NG=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function DG(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function IG(e){if(!DG(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=IG(e[n])})),t}function jG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?PR({},e):e;return DG(e)&&DG(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(DG(t[i])&&i in e&&DG(e[i])?r[i]=jG(e[i],t[i],n):n.clone?r[i]=DG(t[i])?IG(t[i]):t[i]:r[i]=t[i])})),r}var FG=["values","unit","step"];function zG(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,s=LR(e,FG),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return PR({},e,wr({},t.key,t.val))}),{})}(n),l=Object.keys(u);function c(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function f(e,t){var r=l.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[l[r]]?n[l[r]]:t)-o/100).concat(i,")")}return PR({keys:l,values:u,up:c,down:h,between:f,only:function(e){return l.indexOf(e)+1<l.length?f(e,l[l.indexOf(e)+1]):c(e)},not:function(e){var t=l.indexOf(e);return 0===t?c(l[1]):t===l.length-1?h(l[t]):f(e,l[l.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var BG={borderRadius:4},UG={xs:0,sm:600,md:900,lg:1200,xl:1536},VG={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(UG[e],"px)")}};function GG(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||VG;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||VG;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||UG).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function HG(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function WG(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function ZG(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function $G(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:ZG(e,n)||i,t&&(r=t(r,i,e)),r}var qG=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=ZG(e.theme,i)||{};return GG(e,n,(function(e){var n=$G(o,a,e);return e===n&&"string"===typeof e&&(n=$G(o,a,"".concat(t).concat("default"===e?"":kG(e)),e)),!1===r?n:wr({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var XG=function(e,t){return t?jG(e,t,{clone:!1}):e};var YG={m:"margin",p:"padding"},KG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},JG={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},QG=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!JG[e])return[e];e=JG[e]}var t=br(e.split(""),2),n=t[0],r=t[1],i=YG[n],a=KG[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),eH=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],tH=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],nH=[].concat(eH,tH);function rH(e,t,n,r){var i,a=null!=(i=ZG(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function iH(e){return rH(e,"spacing",8)}function aH(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function oH(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=aH(t,n),e}),{})}}(QG(n),r);return GG(e,e[n],i)}function sH(e,t){var n=iH(e.theme);return Object.keys(e).map((function(r){return oH(e,t,r,n)})).reduce(XG,{})}function uH(e){return sH(e,eH)}function lH(e){return sH(e,tH)}function cH(e){return sH(e,nH)}uH.propTypes={},uH.filterProps=eH,lH.propTypes={},lH.filterProps=tH,cH.propTypes={},cH.filterProps=nH;function hH(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=iH({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var fH=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?XG(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function dH(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var pH=qG({prop:"border",themeKey:"borders",transform:dH}),vH=qG({prop:"borderTop",themeKey:"borders",transform:dH}),mH=qG({prop:"borderRight",themeKey:"borders",transform:dH}),gH=qG({prop:"borderBottom",themeKey:"borders",transform:dH}),yH=qG({prop:"borderLeft",themeKey:"borders",transform:dH}),bH=qG({prop:"borderColor",themeKey:"palette"}),xH=qG({prop:"borderTopColor",themeKey:"palette"}),wH=qG({prop:"borderRightColor",themeKey:"palette"}),_H=qG({prop:"borderBottomColor",themeKey:"palette"}),SH=qG({prop:"borderLeftColor",themeKey:"palette"}),kH=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=rH(e.theme,"shape.borderRadius",4);return GG(e,e.borderRadius,(function(e){return{borderRadius:aH(t,e)}}))}return null};kH.propTypes={},kH.filterProps=["borderRadius"];fH(pH,vH,mH,gH,yH,bH,xH,wH,_H,SH,kH);var MH=function(e){if(void 0!==e.gap&&null!==e.gap){var t=rH(e.theme,"spacing",8);return GG(e,e.gap,(function(e){return{gap:aH(t,e)}}))}return null};MH.propTypes={},MH.filterProps=["gap"];var TH=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=rH(e.theme,"spacing",8);return GG(e,e.columnGap,(function(e){return{columnGap:aH(t,e)}}))}return null};TH.propTypes={},TH.filterProps=["columnGap"];var EH=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=rH(e.theme,"spacing",8);return GG(e,e.rowGap,(function(e){return{rowGap:aH(t,e)}}))}return null};EH.propTypes={},EH.filterProps=["rowGap"];fH(MH,TH,EH,qG({prop:"gridColumn"}),qG({prop:"gridRow"}),qG({prop:"gridAutoFlow"}),qG({prop:"gridAutoColumns"}),qG({prop:"gridAutoRows"}),qG({prop:"gridTemplateColumns"}),qG({prop:"gridTemplateRows"}),qG({prop:"gridTemplateAreas"}),qG({prop:"gridArea"}));function CH(e,t){return"grey"===t?t:e}fH(qG({prop:"color",themeKey:"palette",transform:CH}),qG({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:CH}),qG({prop:"backgroundColor",themeKey:"palette",transform:CH}));function AH(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var RH=qG({prop:"width",transform:AH}),PH=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return GG(e,e.maxWidth,(function(t){var n,r,i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||UG[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:AH(t)}}))}return null};PH.filterProps=["maxWidth"];var LH=qG({prop:"minWidth",transform:AH}),OH=qG({prop:"height",transform:AH}),NH=qG({prop:"maxHeight",transform:AH}),DH=qG({prop:"minHeight",transform:AH}),IH=(qG({prop:"size",cssProperty:"width",transform:AH}),qG({prop:"size",cssProperty:"height",transform:AH}),fH(RH,PH,LH,OH,NH,DH,qG({prop:"boxSizing"})),{border:{themeKey:"borders",transform:dH},borderTop:{themeKey:"borders",transform:dH},borderRight:{themeKey:"borders",transform:dH},borderBottom:{themeKey:"borders",transform:dH},borderLeft:{themeKey:"borders",transform:dH},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:kH},color:{themeKey:"palette",transform:CH},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:CH},backgroundColor:{themeKey:"palette",transform:CH},p:{style:lH},pt:{style:lH},pr:{style:lH},pb:{style:lH},pl:{style:lH},px:{style:lH},py:{style:lH},padding:{style:lH},paddingTop:{style:lH},paddingRight:{style:lH},paddingBottom:{style:lH},paddingLeft:{style:lH},paddingX:{style:lH},paddingY:{style:lH},paddingInline:{style:lH},paddingInlineStart:{style:lH},paddingInlineEnd:{style:lH},paddingBlock:{style:lH},paddingBlockStart:{style:lH},paddingBlockEnd:{style:lH},m:{style:uH},mt:{style:uH},mr:{style:uH},mb:{style:uH},ml:{style:uH},mx:{style:uH},my:{style:uH},margin:{style:uH},marginTop:{style:uH},marginRight:{style:uH},marginBottom:{style:uH},marginLeft:{style:uH},marginX:{style:uH},marginY:{style:uH},marginInline:{style:uH},marginInlineStart:{style:uH},marginInlineEnd:{style:uH},marginBlock:{style:uH},marginBlockStart:{style:uH},marginBlockEnd:{style:uH},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:MH},rowGap:{style:EH},columnGap:{style:TH},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:AH},maxWidth:{style:PH},minWidth:{transform:AH},height:{transform:AH},maxHeight:{transform:AH},minHeight:{transform:AH},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}),jH=IH;var FH=function(){function e(e,t,n,r){var i,a=(wr(i={},e,t),wr(i,"theme",n),i),o=r[e];if(!o)return wr({},e,t);var s=o.cssProperty,u=void 0===s?e:s,l=o.themeKey,c=o.transform,h=o.style;if(null==t)return null;if("typography"===l&&"inherit"===t)return wr({},e,t);var f=ZG(n,l)||{};if(h)return h(a);return GG(a,t,(function(t){var n=$G(f,c,t);return t===n&&"string"===typeof t&&(n=$G(f,c,"".concat(e).concat("default"===t?"":kG(t)),t)),!1===u?n:wr({},u,n)}))}return function t(n){var r,i=n||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;var u=null!=(r=s.unstable_sxConfig)?r:jH;function l(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=HG(s.breakpoints),a=Object.keys(i),o=i;return Object.keys(r).forEach((function(n){var i,a,l=(i=r[n],a=s,"function"===typeof i?i(a):i);if(null!==l&&void 0!==l)if("object"===typeof l)if(u[n])o=XG(o,e(n,l,s,u));else{var c=GG({theme:s},l,(function(e){return wr({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(c,l)?o=XG(o,c):o[n]=t({sx:l,theme:s})}else o=XG(o,e(n,l,s,u))})),WG(a,o)}return Array.isArray(a)?a.map(l):l(a)}}();FH.filterProps=["sx"];var zH=FH,BH=["breakpoints","palette","spacing","shape"];var UH=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,s=void 0===o?{}:o,u=LR(e,BH),l=zG(n),c=hH(a),h=jG({breakpoints:l,direction:"ltr",components:{},palette:PR({mode:"light"},i),spacing:c,shape:PR({},BG,s)},u),f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return(h=d.reduce((function(e,t){return jG(e,t)}),h)).unstable_sxConfig=PR({},jH,null==u?void 0:u.unstable_sxConfig),h.unstable_sx=function(e){return zH({sx:e,theme:this})},h},VH=["variant"];function GH(e){return 0===e.length}function HH(e){var t=e.variant,n=LR(e,VH),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?GH(r)?e[t]:kG(e[t]):"".concat(GH(r)?t:kG(t)).concat(kG(e[t].toString()))})),r}var WH=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ZH(e){return"string"===typeof e&&e.charCodeAt(0)>96}var $H=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},qH=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=HH(e.props);r[t]=e.style})),r},XH=function(e,t,n,r){var i,a=e.ownerState,o=void 0===a?{}:a,s=[],u=null==n||null==(i=n.components)||null==(i=i[r])?void 0:i.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){o[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[HH(n.props)])})),s};function YH(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var KH=UH(),JH=function(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e};function QH(e){var t,n=e.defaultTheme,r=e.theme,i=e.themeId;return t=r,0===Object.keys(t).length?n:r[i]||r}function eW(e){return e?function(t,n){return n[e]}:null}function tW(e,t){var n;return PR({toolbar:(n={minHeight:56},wr(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),wr(n,e.up("sm"),{minHeight:64}),n)},t)}var nW={black:"#000",white:"#fff"},rW={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iW={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},aW={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},oW={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sW={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uW={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lW={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},cW=["mode","contrastThreshold","tonalOffset"],hW={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nW.white,default:nW.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},fW={text:{primary:nW.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nW.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dW(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=SG(e.main,i):"dark"===t&&(e.dark=_G(e.main,a)))}function pW(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,s=LR(e,cW),u=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sW[200],light:sW[50],dark:sW[400]}:{main:sW[700],light:sW[400],dark:sW[800]}}(n),l=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iW[200],light:iW[50],dark:iW[400]}:{main:iW[500],light:iW[300],dark:iW[700]}}(n),c=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:aW[500],light:aW[300],dark:aW[700]}:{main:aW[700],light:aW[400],dark:aW[800]}}(n),h=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uW[400],light:uW[300],dark:uW[700]}:{main:uW[700],light:uW[500],dark:uW[900]}}(n),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:lW[400],light:lW[300],dark:lW[700]}:{main:lW[800],light:lW[500],dark:lW[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oW[400],light:oW[300],dark:oW[700]}:{main:"#ed6c02",light:oW[500],dark:oW[900]}}(n);function p(e){var t=function(e,t){var n=xG(e),r=xG(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,fW.text.primary)>=i?fW.text.primary:hW.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,s=void 0===a?300:a,u=e.darkShade,l=void 0===u?700:u;if(!(t=PR({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(mG(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(mG(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return dW(t,"light",s,o),dW(t,"dark",l,o),t.contrastText||(t.contrastText=p(t.main)),t},m={dark:fW,light:hW};return jG(PR({common:PR({},nW),mode:n,primary:v({color:u,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:c,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:f,name:"success"}),grey:rW,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},m[n]),s)}var vW=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function mW(e){return Math.round(1e5*e)/1e5}var gW={textTransform:"uppercase"},yW='"Roboto", "Helvetica", "Arial", sans-serif';function bW(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?yW:r,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,h=n.fontWeightMedium,f=void 0===h?500:h,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,m=void 0===v?16:v,g=n.allVariants,y=n.pxToRem,b=LR(n,vW);var x=o/14,w=y||function(e){return"".concat(e/m*x,"rem")},_=function(e,t,n,r,a){return PR({fontFamily:i,fontWeight:e,fontSize:w(t),lineHeight:n},i===yW?{letterSpacing:"".concat(mW(r/t),"em")}:{},a,g)},S={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(c,48,1.167,0),h4:_(c,34,1.235,.25),h5:_(c,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(c,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(c,16,1.5,.15),body2:_(c,14,1.43,.15),button:_(f,14,1.75,.4,gW),caption:_(c,12,1.66,.4),overline:_(c,12,2.66,1,gW),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jG(PR({htmlFontSize:m,pxToRem:w,fontFamily:i,fontSize:o,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:f,fontWeightBold:p},S),b,{clone:!1})}function xW(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var wW=["none",xW(0,2,1,-1,0,1,1,0,0,1,3,0),xW(0,3,1,-2,0,2,2,0,0,1,5,0),xW(0,3,3,-2,0,3,4,0,0,1,8,0),xW(0,2,4,-1,0,4,5,0,0,1,10,0),xW(0,3,5,-1,0,5,8,0,0,1,14,0),xW(0,3,5,-1,0,6,10,0,0,1,18,0),xW(0,4,5,-2,0,7,10,1,0,2,16,1),xW(0,5,5,-3,0,8,10,1,0,3,14,2),xW(0,5,6,-3,0,9,12,1,0,3,16,2),xW(0,6,6,-3,0,10,14,1,0,4,18,3),xW(0,6,7,-4,0,11,15,1,0,4,20,3),xW(0,7,8,-4,0,12,17,2,0,5,22,4),xW(0,7,8,-4,0,13,19,2,0,5,24,4),xW(0,7,9,-4,0,14,21,2,0,5,26,4),xW(0,8,9,-5,0,15,22,2,0,6,28,5),xW(0,8,10,-5,0,16,24,2,0,6,30,5),xW(0,8,11,-5,0,17,26,2,0,6,32,5),xW(0,9,11,-5,0,18,28,2,0,7,34,6),xW(0,9,12,-6,0,19,29,2,0,7,36,6),xW(0,10,13,-6,0,20,31,3,0,8,38,7),xW(0,10,13,-6,0,21,33,3,0,8,40,7),xW(0,10,14,-6,0,22,35,3,0,8,42,7),xW(0,11,14,-7,0,23,36,3,0,9,44,8),xW(0,11,15,-7,0,24,38,3,0,9,46,8)],_W=["duration","easing","delay"],SW={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},kW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function MW(e){return"".concat(Math.round(e),"ms")}function TW(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function EW(e){var t=PR({},SW,e.easing),n=PR({},kW,e.duration);return PR({getAutoHeightDuration:TW,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,l=void 0===u?0:u;LR(r,_W);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:MW(a)," ").concat(s," ").concat("string"===typeof l?l:MW(l))})).join(",")}},e,{easing:t,duration:n})}var CW={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},AW=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function RW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,s=e.typography,u=void 0===s?{}:s,l=LR(e,AW);if(e.vars)throw new Error(mG(18));var c=pW(i),h=UH(e),f=jG(h,{mixins:tW(h.breakpoints,n),palette:c,shadows:wW.slice(),typography:bW(c,u),transitions:EW(o),zIndex:PR({},CW)});f=jG(f,l);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return(f=p.reduce((function(e,t){return jG(e,t)}),f)).unstable_sxConfig=PR({},jH,null==l?void 0:l.unstable_sxConfig),f.unstable_sx=function(e){return zH({sx:e,theme:this})},f}var PW=RW(),LW="$$material",OW=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,r=void 0===n?KH:n,i=e.rootShouldForwardProp,a=void 0===i?YH:i,o=e.slotShouldForwardProp,s=void 0===o?YH:o,u=function(e){return zH(PR({},e,{theme:QH(PR({},e,{defaultTheme:r,themeId:t}))}))};return u.__mui_systemSx=!0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};NG(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var i,o=n.name,l=n.slot,c=n.skipVariantsResolver,h=n.skipSx,f=n.overridesResolver,d=void 0===f?eW(JH(l)):f,p=LR(n,WH),v=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,m=h||!1;var g=YH;"Root"===l||"root"===l?g=a:l?g=s:ZH(e)&&(g=void 0);var y=OG(e,PR({shouldForwardProp:g,label:i},p)),b=function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var l=a?a.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(n){return e(PR({},n,{theme:QH(PR({},n,{defaultTheme:r,themeId:t}))}))}:e})):[],c=n;o&&d&&l.push((function(e){var n=QH(PR({},e,{defaultTheme:r,themeId:t})),i=$H(o,n);if(i){var a={};return Object.entries(i).forEach((function(t){var r=br(t,2),i=r[0],o=r[1];a[i]="function"===typeof o?o(PR({},e,{theme:n})):o})),d(e,a)}return null})),o&&!v&&l.push((function(e){var n=QH(PR({},e,{defaultTheme:r,themeId:t}));return XH(e,qH(o,n),n,o)})),m||l.push(u);var h=l.length-a.length;if(Array.isArray(n)&&h>0){var f=new Array(h).fill("");(c=[].concat(pr(n),pr(f))).raw=[].concat(pr(n.raw),pr(f))}else"function"===typeof n&&n.__emotion_real!==n&&(c=function(e){return n(PR({},e,{theme:QH(PR({},e,{defaultTheme:r,themeId:t}))}))});var p=y.apply(void 0,[c].concat(pr(l)));return e.muiName&&(p.muiName=e.muiName),p};return y.withConfig&&(b.withConfig=y.withConfig),b}}({themeId:LW,defaultTheme:PW,rootShouldForwardProp:function(e){return YH(e)&&"classes"!==e}}),NW=OW;var DW=function(e){var n=e.controlled,r=e.default,i=(e.name,e.state,t.useRef(void 0!==n).current),a=br(t.useState(r),2),o=a[0],s=a[1];return[i?n:o,t.useCallback((function(e){i||s(e)}),[])]};var IW=t.createContext(void 0);function jW(e,t){var n=PR({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=PR({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},a=t[r];n[r]={},a&&Object.keys(a)?i&&Object.keys(i)?(n[r]=PR({},a),Object.keys(i).forEach((function(e){n[r][e]=jW(i[e],a[e])}))):n[r]=a:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function FW(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?jW(t.components[n].defaultProps,r):r}function zW(e){return 0===Object.keys(e).length}var BW=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t.useContext(Dz);return!n||zW(n)?e:n},UW=UH();var VW=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UW;return BW(e)};function GW(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme,i=e.themeId,a=VW(r);return i&&(a=a[i]||a),FW({theme:a,name:n,props:t})}({props:e.props,name:e.name,defaultTheme:PW,themeId:LW})}function HW(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var WW=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(t){HW(t,e)}))}}),n)},ZW="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var $W,qW=function(e){var n=t.useRef(e);return ZW((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])},XW=qW,YW=!0,KW=!1,JW={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function QW(e){e.metaKey||e.altKey||e.ctrlKey||(YW=!0)}function eZ(){YW=!1}function tZ(){"hidden"===this.visibilityState&&KW&&(YW=!0)}function nZ(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return YW||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!JW[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var rZ=function(){var e=t.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",QW,!0),t.addEventListener("mousedown",eZ,!0),t.addEventListener("pointerdown",eZ,!0),t.addEventListener("touchstart",eZ,!0),t.addEventListener("visibilitychange",tZ,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!nZ(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(KW=!0,window.clearTimeout($W),$W=window.setTimeout((function(){KW=!1}),100),n.current=!1,!0)},ref:e}},iZ=n(9611);var aZ=t.createContext(null);function oZ(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function sZ(e,t,n){return null!=n[t]?n[t]:e.props[t]}function uZ(e,n,r){var i=oZ(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var u=o in n,l=o in i,c=n[o],h=(0,t.isValidElement)(c)&&!c.props.in;!l||u&&!h?l||!u||h?l&&u&&(0,t.isValidElement)(c)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:sZ(s,"exit",e),enter:sZ(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:sZ(s,"exit",e),enter:sZ(s,"enter",e)})}})),a}var lZ=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},cZ=function(e){var n,r;function i(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind((0,c.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,(0,iZ.Z)(n,r);var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,oZ(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:sZ(e,"appear",r),enter:sZ(e,"enter",r),exit:sZ(e,"exit",r)})}))):uZ(e,a,o),firstRender:!1}},a.handleExited=function(e,t){var n=oZ(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=PR({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=LR(e,["component","childFactory"]),a=this.state.contextValue,o=lZ(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(aZ.Provider,{value:a},o):t.createElement(aZ.Provider,{value:a},t.createElement(n,i,o))},i}(t.Component);cZ.propTypes={},cZ.defaultProps={component:"div",childFactory:function(e){return e}};var hZ=cZ;var fZ=function(e){var n=e.className,r=e.classes,i=e.pulsate,a=void 0!==i&&i,o=e.rippleX,s=e.rippleY,u=e.rippleSize,l=e.in,c=e.onExited,h=e.timeout,f=br(t.useState(!1),2),d=f[0],p=f[1],v=pG(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),m={width:u,height:u,top:-u/2+s,left:-u/2+o},g=pG(r.child,d&&r.childLeaving,a&&r.childPulsate);return l||d||p(!0),t.useEffect((function(){if(!l&&null!=c){var e=setTimeout(c,h);return function(){clearTimeout(e)}}}),[c,l,h]),(0,rr.jsx)("span",{className:v,style:m,children:(0,rr.jsx)("span",{className:g})})},dZ=function(e){return e},pZ=function(){var e=dZ;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=dZ}}}(),vZ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function mZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=vZ[t];return r?"".concat(n,"-").concat(r):"".concat(pZ.generate(e),"-").concat(t)}function gZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=mZ(e,t,n)})),r}var yZ,bZ,xZ,wZ,_Z,SZ,kZ,MZ,TZ=gZ("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),EZ=["center","classes","className"],CZ=Vz(_Z||(_Z=yZ||(yZ=Gz(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),AZ=Vz(SZ||(SZ=bZ||(bZ=Gz(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),RZ=Vz(kZ||(kZ=xZ||(xZ=Gz(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),PZ=NW("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),LZ=NW(fZ,{name:"MuiTouchRipple",slot:"Ripple"})(MZ||(MZ=wZ||(wZ=Gz(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),TZ.rippleVisible,CZ,550,(function(e){return e.theme.transitions.easing.easeInOut}),TZ.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),TZ.child,TZ.childLeaving,AZ,550,(function(e){return e.theme.transitions.easing.easeInOut}),TZ.childPulsate,RZ,(function(e){return e.theme.transitions.easing.easeInOut})),OZ=t.forwardRef((function(e,n){var r=GW({props:e,name:"MuiTouchRipple"}),i=r.center,a=void 0!==i&&i,o=r.classes,s=void 0===o?{}:o,u=r.className,l=LR(r,EZ),c=br(t.useState([]),2),h=c[0],f=c[1],d=t.useRef(0),p=t.useRef(null);t.useEffect((function(){p.current&&(p.current(),p.current=null)}),[h]);var v=t.useRef(!1),m=t.useRef(0),g=t.useRef(null),y=t.useRef(null);t.useEffect((function(){return function(){m.current&&clearTimeout(m.current)}}),[]);var b=t.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;f((function(e){return[].concat(pr(e),[(0,rr.jsx)(LZ,{classes:{ripple:pG(s.ripple,TZ.ripple),rippleVisible:pG(s.rippleVisible,TZ.rippleVisible),ripplePulsate:pG(s.ripplePulsate,TZ.ripplePulsate),child:pG(s.child,TZ.child),childLeaving:pG(s.childLeaving,TZ.childLeaving),childPulsate:pG(s.childPulsate,TZ.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},d.current)])})),d.current+=1,p.current=a}),[s]),x=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&v.current)v.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(v.current=!0);var c,h,f,d=l?null:y.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),h=Math.round(p.height/2);else{var x=e.touches&&e.touches.length>0?e.touches[0]:e,w=x.clientX,_=x.clientY;c=Math.round(w-p.left),h=Math.round(_-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var S=2*Math.max(Math.abs((d?d.clientWidth:0)-c),c)+2,k=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(S,2)+Math.pow(k,2))}null!=e&&e.touches?null===g.current&&(g.current=function(){b({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},m.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):b({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[a,b]),w=t.useCallback((function(){x({},{pulsate:!0})}),[x]),_=t.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===(null==e?void 0:e.type)&&g.current)return g.current(),g.current=null,void(m.current=setTimeout((function(){_(e,t)})));g.current=null,f((function(e){return e.length>0?e.slice(1):e})),p.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:w,start:x,stop:_}}),[w,x,_]),(0,rr.jsx)(PZ,PR({className:pG(TZ.root,s.root,u),ref:y},l,{children:(0,rr.jsx)(hZ,{component:null,exit:!0,children:h})}))})),NZ=OZ;function DZ(e){return mZ("MuiButtonBase",e)}var IZ,jZ=gZ("MuiButtonBase",["root","disabled","focusVisible"]),FZ=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],zZ=NW("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((wr(IZ={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(jZ.disabled),{pointerEvents:"none",cursor:"default"}),wr(IZ,"@media print",{colorAdjust:"exact"}),IZ)),BZ=t.forwardRef((function(e,n){var r=GW({props:e,name:"MuiButtonBase"}),i=r.action,a=r.centerRipple,o=void 0!==a&&a,s=r.children,u=r.className,l=r.component,c=void 0===l?"button":l,h=r.disabled,f=void 0!==h&&h,d=r.disableRipple,p=void 0!==d&&d,v=r.disableTouchRipple,m=void 0!==v&&v,g=r.focusRipple,y=void 0!==g&&g,b=r.LinkComponent,x=void 0===b?"a":b,w=r.onBlur,_=r.onClick,S=r.onContextMenu,k=r.onDragLeave,M=r.onFocus,T=r.onFocusVisible,E=r.onKeyDown,C=r.onKeyUp,A=r.onMouseDown,R=r.onMouseLeave,P=r.onMouseUp,L=r.onTouchEnd,O=r.onTouchMove,N=r.onTouchStart,D=r.tabIndex,I=void 0===D?0:D,j=r.TouchRippleProps,F=r.touchRippleRef,z=r.type,B=LR(r,FZ),U=t.useRef(null),V=t.useRef(null),G=WW(V,F),H=rZ(),W=H.isFocusVisibleRef,Z=H.onFocus,$=H.onBlur,q=H.ref,X=br(t.useState(!1),2),Y=X[0],K=X[1];f&&Y&&K(!1),t.useImperativeHandle(i,(function(){return{focusVisible:function(){K(!0),U.current.focus()}}}),[]);var J=br(t.useState(!1),2),Q=J[0],ee=J[1];t.useEffect((function(){ee(!0)}),[]);var te=Q&&!p&&!f;function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return XW((function(r){return t&&t(r),!n&&V.current&&V.current[e](r),!0}))}t.useEffect((function(){Y&&y&&!p&&Q&&V.current.pulsate()}),[p,y,Y,Q]);var re=ne("start",A),ie=ne("stop",S),ae=ne("stop",k),oe=ne("stop",P),se=ne("stop",(function(e){Y&&e.preventDefault(),R&&R(e)})),ue=ne("start",N),le=ne("stop",L),ce=ne("stop",O),he=ne("stop",(function(e){$(e),!1===W.current&&K(!1),w&&w(e)}),!1),fe=XW((function(e){U.current||(U.current=e.currentTarget),Z(e),!0===W.current&&(K(!0),T&&T(e)),M&&M(e)})),de=function(){var e=U.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},pe=t.useRef(!1),ve=XW((function(e){y&&!pe.current&&Y&&V.current&&" "===e.key&&(pe.current=!0,V.current.stop(e,(function(){V.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!f&&(e.preventDefault(),_&&_(e))})),me=XW((function(e){y&&" "===e.key&&V.current&&Y&&!e.defaultPrevented&&(pe.current=!1,V.current.stop(e,(function(){V.current.pulsate(e)}))),C&&C(e),_&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&_(e)})),ge=c;"button"===ge&&(B.href||B.to)&&(ge=x);var ye={};"button"===ge?(ye.type=void 0===z?"button":z,ye.disabled=f):(B.href||B.to||(ye.role="button"),f&&(ye["aria-disabled"]=f));var be=WW(n,q,U);var xe=PR({},r,{centerRipple:o,component:c,disabled:f,disableRipple:p,disableTouchRipple:m,focusRipple:y,tabIndex:I,focusVisible:Y}),we=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=vG({root:["root",t&&"disabled",n&&"focusVisible"]},DZ,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(xe);return(0,rr.jsxs)(zZ,PR({as:ge,className:pG(we.root,u),ownerState:xe,onBlur:he,onClick:_,onContextMenu:ie,onFocus:fe,onKeyDown:ve,onKeyUp:me,onMouseDown:re,onMouseLeave:se,onMouseUp:oe,onDragLeave:ae,onTouchEnd:le,onTouchMove:ce,onTouchStart:ue,ref:be,tabIndex:f?-1:I,type:z},ye,B,{children:[s,te?(0,rr.jsx)(NZ,PR({ref:G,center:o},j)):null]}))})),UZ=BZ;function VZ(e){return mZ("PrivateSwitchBase",e)}gZ("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var GZ=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],HZ=NW(UZ)((function(e){var t=e.ownerState;return PR({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),WZ=NW("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ZZ=t.forwardRef((function(e,n){var r=e.autoFocus,i=e.checked,a=e.checkedIcon,o=e.className,s=e.defaultChecked,u=e.disabled,l=e.disableFocusRipple,c=void 0!==l&&l,h=e.edge,f=void 0!==h&&h,d=e.icon,p=e.id,v=e.inputProps,m=e.inputRef,g=e.name,y=e.onBlur,b=e.onChange,x=e.onFocus,w=e.readOnly,_=e.required,S=void 0!==_&&_,k=e.tabIndex,M=e.type,T=e.value,E=LR(e,GZ),C=br(DW({controlled:i,default:Boolean(s),name:"SwitchBase",state:"checked"}),2),A=C[0],R=C[1],P=t.useContext(IW),L=u;P&&"undefined"===typeof L&&(L=P.disabled);var O="checkbox"===M||"radio"===M,N=PR({},e,{checked:A,disabled:L,disableFocusRipple:c,edge:f}),D=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge;return vG({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(MG(i))],input:["input"]},VZ,t)}(N);return(0,rr.jsxs)(HZ,PR({component:"span",className:pG(D.root,o),centerRipple:!0,focusRipple:!c,disabled:L,tabIndex:null,role:void 0,onFocus:function(e){x&&x(e),P&&P.onFocus&&P.onFocus(e)},onBlur:function(e){y&&y(e),P&&P.onBlur&&P.onBlur(e)},ownerState:N,ref:n},E,{children:[(0,rr.jsx)(WZ,PR({autoFocus:r,checked:i,defaultChecked:s,className:D.input,disabled:L,id:O?p:void 0,name:g,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;R(t),b&&b(e,t)}},readOnly:w,ref:m,required:S,ownerState:N,tabIndex:k,type:M},"checkbox"===M&&void 0===T?{}:{value:T},v)),A?a:d]}))})),$Z=ZZ;function qZ(e){return mZ("MuiSwitch",e)}var XZ=gZ("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),YZ=["className","color","edge","size","sx"],KZ=NW("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.edge&&t["edge".concat(MG(n.edge))],t["size".concat(MG(n.size))]]}})((function(e){var t,n=e.ownerState;return PR({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===n.edge&&{marginLeft:-8},"end"===n.edge&&{marginRight:-8},"small"===n.size&&(wr(t={width:40,height:24,padding:7},"& .".concat(XZ.thumb),{width:16,height:16}),wr(t,"& .".concat(XZ.switchBase),wr({padding:4},"&.".concat(XZ.checked),{transform:"translateX(16px)"})),t))})),JZ=NW($Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var n=e.ownerState;return[t.switchBase,wr({},"& .".concat(XZ.input),t.input),"default"!==n.color&&t["color".concat(MG(n.color))]]}})((function(e){var t,n=e.theme;return wr(t={position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:"".concat("light"===n.palette.mode?n.palette.common.white:n.palette.grey[300]),transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest})},"&.".concat(XZ.checked),{transform:"translateX(20px)"}),wr(t,"&.".concat(XZ.disabled),{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:"".concat("light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[600])}),wr(t,"&.".concat(XZ.checked," + .").concat(XZ.track),{opacity:.5}),wr(t,"&.".concat(XZ.disabled," + .").concat(XZ.track),{opacity:n.vars?n.vars.opacity.switchTrackDisabled:"".concat("light"===n.palette.mode?.12:.2)}),wr(t,"& .".concat(XZ.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,n=e.theme,r=e.ownerState;return PR({"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.activeChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):wG(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(wr(t={},"&.".concat(XZ.checked),wr({color:(n.vars||n).palette[r.color].main,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette[r.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):wG(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(XZ.disabled),{color:n.vars?n.vars.palette.Switch["".concat(r.color,"DisabledColor")]:"".concat("light"===n.palette.mode?SG(n.palette[r.color].main,.62):_G(n.palette[r.color].main,.55))})),wr(t,"&.".concat(XZ.checked," + .").concat(XZ.track),{backgroundColor:(n.vars||n).palette[r.color].main}),t))})),QZ=NW("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),e$=NW("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),t$=t.forwardRef((function(e,t){var n=GW({props:e,name:"MuiSwitch"}),r=n.className,i=n.color,a=void 0===i?"primary":i,o=n.edge,s=void 0!==o&&o,u=n.size,l=void 0===u?"medium":u,c=n.sx,h=LR(n,YZ),f=PR({},n,{color:a,edge:s,size:l}),d=function(e){var t=e.classes,n=e.edge,r=e.size,i=e.color,a=e.checked,o=e.disabled;return PR({},t,vG({root:["root",n&&"edge".concat(MG(n)),"size".concat(MG(r))],switchBase:["switchBase","color".concat(MG(i)),a&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},qZ,t))}(f),p=(0,rr.jsx)(e$,{className:d.thumb,ownerState:f});return(0,rr.jsxs)(KZ,{className:pG(d.root,r),sx:c,ownerState:f,children:[(0,rr.jsx)(JZ,PR({type:"checkbox",icon:p,checkedIcon:p,ref:t,ownerState:f},h,{classes:PR({},d,{root:d.switchBase})})),(0,rr.jsx)(QZ,{className:d.track,ownerState:f})]})})),n$=t$,r$=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).state={},r}return(0,l.Z)(n,[{key:"render",value:function(){var e=this;return(0,rr.jsx)("div",{className:"CamerasPanel",children:(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Synchronize Cameras"}),(0,rr.jsx)(n$,{checked:this.props.robotSceneManager.shouldSyncViews(),onChange:function(t){e.props.robotSceneManager.setShouldSyncViews(t.target.checked)}})]})})}}]),n}(t.Component),i$=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r,i,a;return(0,u.Z)(this,n),(a=t.call(this,e)).onTextInputChange=a.onTextInputChange.bind((0,c.Z)(a)),a.onTextInputKeyDown=a.onTextInputKeyDown.bind((0,c.Z)(a)),a.state={oldValue:null!==(r=a.props.value)&&void 0!==r?r:"",currValue:null!==(i=a.props.value)&&void 0!==i?i:""},a}return(0,l.Z)(n,[{key:"onTextInputChange",value:function(e){var t=e.currentTarget.value;this.props.filter&&(t=this.props.filter(t));var n=this.props.onChange;this.setState({currValue:t},(function(){n&&n(t)}))}},{key:"onTextInputKeyDown",value:function(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){var t=e.target;if(t){var n=this.props.filter?this.props.filter(t.value):t.value,r=this.props.onChange,i=this.props.onReturnPressed;this.setState({oldValue:n,currValue:n},(function(){r&&r(n),i&&i(n)}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({currValue:this.state.oldValue})}},{key:"componentDidUpdate",value:function(e,t){e.value!==this.props.value&&void 0!==this.props.value&&this.setState({currValue:this.props.value})}},{key:"render",value:function(){return(0,rr.jsxs)("div",{className:"LabeledTextInput",children:[this.props.labelValue?(0,rr.jsx)("label",{children:this.props.labelValue}):null,(0,rr.jsx)("input",{type:"text",value:this.state.currValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange})]})}}]),n}(t.Component);function a$(){return(a$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o$(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function s$(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,r.current}var u$=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},l$=function(e){return"touches"in e},c$=function(e){return e&&e.ownerDocument.defaultView||self},h$=function(e,t,n){var r=e.getBoundingClientRect(),i=l$(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:u$((i.pageX-(r.left+c$(e).pageXOffset))/r.width),top:u$((i.pageY-(r.top+c$(e).pageYOffset))/r.height)}},f$=function(e){!l$(e)&&e.preventDefault()},d$=t.memo((function(e){var n=e.onMove,r=e.onKey,i=o$(e,["onMove","onKey"]),a=(0,t.useRef)(null),o=s$(n),s=s$(r),u=(0,t.useRef)(null),l=(0,t.useRef)(!1),c=(0,t.useMemo)((function(){var e=function(e){f$(e),(l$(e)?e.touches.length>0:e.buttons>0)&&a.current?o(h$(a.current,e,u.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=l.current,i=c$(a.current),o=n?i.addEventListener:i.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=a.current;if(r&&(f$(t),!function(e,t){return t&&!l$(e)}(t,l.current)&&r)){if(l$(t)){l.current=!0;var i=t.changedTouches||[];i.length&&(u.current=i[0].identifier)}r.focus(),o(h$(r,t,u.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,o]),h=c[0],f=c[1],d=c[2];return(0,t.useEffect)((function(){return d}),[d]),t.createElement("div",a$({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:a,onKeyDown:f,tabIndex:0,role:"slider"}))})),p$=function(e){return e.filter(Boolean).join(" ")},v$=function(e){var n=e.color,r=e.left,i=e.top,a=void 0===i?.5:i,o=p$(["react-colorful__pointer",e.className]);return t.createElement("div",{className:o,style:{top:100*a+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},m$=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},g$=(Math.PI,function(e){return M$(y$(e))}),y$=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?m$(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?m$(parseInt(e.substring(6,8),16)/255,2):1}},b$=function(e){return k$(_$(e))},x$=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:m$(e.h),s:m$(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:m$(i/2),a:m$(r,2)}},w$=function(e){var t=x$(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},_$=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),u=r*(1-(1-t+a)*n),l=a%6;return{r:m$(255*[r,s,o,o,u,r][l]),g:m$(255*[u,r,r,s,o,o][l]),b:m$(255*[o,o,u,r,r,s][l]),a:m$(i,2)}},S$=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},k$=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=i<1?S$(m$(255*i)):"";return"#"+S$(t)+S$(n)+S$(r)+a},M$=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:m$(60*(s<0?s+6:s)),s:m$(a?o/a*100:0),v:m$(a/255*100),a:i}},T$=t.memo((function(e){var n=e.hue,r=e.onChange,i=p$(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(d$,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:u$(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":m$(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(v$,{className:"react-colorful__hue-pointer",left:n/360,color:w$({h:n,s:100,v:100,a:1})})))})),E$=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:w$({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(d$,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:u$(n.s+100*e.left,0,100),v:u$(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+m$(n.s)+"%, Brightness "+m$(n.v)+"%"},t.createElement(v$,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:w$(n)})))})),C$=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},A$=function(e,t){return e.toLowerCase()===t.toLowerCase()||C$(y$(e),y$(t))};function R$(e,n,r){var i=s$(r),a=(0,t.useState)((function(){return e.toHsva(n)})),o=a[0],s=a[1],u=(0,t.useRef)({color:n,hsva:o});(0,t.useEffect)((function(){if(!e.equal(n,u.current.color)){var t=e.toHsva(n);u.current={hsva:t,color:n},s(t)}}),[n,e]),(0,t.useEffect)((function(){var t;C$(o,u.current.hsva)||e.equal(t=e.fromHsva(o),u.current.color)||(u.current={hsva:o,color:t},i(t))}),[o,e,i]);var l=(0,t.useCallback)((function(e){s((function(t){return Object.assign({},t,e)}))}),[]);return[o,l]}var P$,L$="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,O$=new Map,N$=function(e){L$((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!O$.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',O$.set(t,r);var i=P$||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},D$=function(e){var n=e.className,r=e.colorModel,i=e.color,a=void 0===i?r.defaultColor:i,o=e.onChange,s=o$(e,["className","colorModel","color","onChange"]),u=(0,t.useRef)(null);N$(u);var l=R$(r,a,o),c=l[0],h=l[1],f=p$(["react-colorful",n]);return t.createElement("div",a$({},s,{ref:u,className:f}),t.createElement(E$,{hsva:c,onChange:h}),t.createElement(T$,{hue:c.h,onChange:h,className:"react-colorful__last-control"}))},I$={defaultColor:"000",toHsva:g$,fromHsva:function(e){return b$({h:e.h,s:e.s,v:e.v,a:1})},equal:A$},j$=function(e){return t.createElement(D$,a$({},e,{colorModel:I$}))},F$=/^#?([0-9A-F]{3,8})$/i,z$=function(e){var n=e.color,r=void 0===n?"":n,i=e.onChange,a=e.onBlur,o=e.escape,s=e.validate,u=e.format,l=e.process,c=o$(e,["color","onChange","onBlur","escape","validate","format","process"]),h=(0,t.useState)((function(){return o(r)})),f=h[0],d=h[1],p=s$(i),v=s$(a),m=(0,t.useCallback)((function(e){var t=o(e.target.value);d(t),s(t)&&p(l?l(t):t)}),[o,l,s,p]),g=(0,t.useCallback)((function(e){s(e.target.value)||d(o(r)),v(e)}),[r,o,s,v]);return(0,t.useEffect)((function(){d(o(r))}),[r,o]),t.createElement("input",a$({},c,{value:u?u(f):f,spellCheck:"false",onChange:m,onBlur:g}))},B$=function(e){return"#"+e},U$=function(e){var n=e.prefixed,r=e.alpha,i=o$(e,["prefixed","alpha"]),a=(0,t.useCallback)((function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)}),[r]),o=(0,t.useCallback)((function(e){return function(e,t){var n=F$.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,r)}),[r]);return t.createElement(z$,a$({},i,{escape:a,format:n?B$:void 0,process:B$,validate:o}))},V$=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"render",value:function(){var e=this;return(0,rr.jsxs)("div",{className:"ColorPicker",children:[(0,rr.jsx)(j$,{color:this.props.color,onChange:function(t){return e.props.onColorMapChange(t)}}),(0,rr.jsxs)("div",{className:"ColorInput",children:[(0,rr.jsx)("label",{children:"Enter color in hex format (e.g., C5050C):"}),(0,rr.jsx)(U$,{color:this.props.color,onChange:function(t){e.props.onColorMapChange(t),e.props.forceUpdateTabNames()}})]})]})}}]),n}(t.Component),G$={option:function(e,t){return Cr(Cr({},e),{},{fontSize:"15px",color:t.isFocused?"rgb(23, 24, 25)":"rgb(238, 238, 238)",backgroundColor:t.isFocused?"#7BB2D9":"rgb(50, 50, 50)"})},control:function(e){return Cr(Cr({},e),{},{height:"100%",width:"100%",backgroundColor:"rgb(50, 50, 50)",borderColor:"rgb(50, 50, 50)"})},container:function(e,t){return Cr(Cr({},e),{},{height:"100%",width:"100%",display:"inline-flex"})},menuList:function(e,t){return Cr(Cr({},e),{},{width:"100%",backgroundColor:"rgb(50, 50, 50)"})},noOptionsMessage:function(e){return Cr(Cr({},e),{},{fontSize:"15px",height:"100%",width:"100%",backgroundColor:"rgb(50, 50, 50)",borderColor:"rgb(50, 50, 50)"})},placeholder:function(e){return Cr(Cr({},e),{},{fontSize:"15px",color:"rgb(183, 183, 189)"})},singleValue:function(e){return Cr(Cr({},e),{},{color:"rgb(183, 183, 189)"})}},H$=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.dropdownRef=[],i._animationCsvUrlInput=void 0,i.selectedOptions=[],i.recalcTimeWarp=function(){dr.recalculateTimeWarping()},i.state={counter:0,panelHeight:620,panelWidth:1200,dropdowns:[!1,!1],baseScene:void 0,currRobot:new Map,currJoint:new Map,currRobotPart:new Set,need_update:!0,currWarpedScene:void 0,applyToAllScenes:!1,keyObjects:[]},i._graphDiv=(0,t.createRef)();for(var a=0;a<2;a++)i.dropdownRef[a]=(0,t.createRef)();return i._animationCsvUrlInput=(0,t.createRef)(),i.onUploadAnimationCSV=i.onUploadAnimationCSV.bind((0,c.Z)(i)),i.onLoadAnimationCSV=i.onLoadAnimationCSV.bind((0,c.Z)(i)),i}return(0,l.Z)(r,[{key:"genSceneOptions",value:function(){var e,t=[],n=this.props,r=n.robotSceneManager,i=n.robotScene,a=s(r.allManagedRobotScenes());try{for(a.s();!(e=a.n()).done;){var o=e.value;o===i||o.isTimeWarping()||t.push({value:o.id().value(),label:o.name()})}}catch(Fq){a.e(Fq)}finally{a.f()}return t}},{key:"genKeyObjectOptions",value:function(){var e=[],t=this.props.robotScene,n=this.state.baseScene;if(void 0===n)return e;var r,i=s(t.robots());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(void 0!==n.getRobotByName(a.name())){e.push({value:a.id().value(),name:a.name()+"\n position"});var o,u=s(a.articuatedJoints());try{for(u.s();!(o=u.n()).done;){var l=o.value;e.push({value:l.id().value(),name:a.name()+"\n"+l.name()+" position"}),e.push({value:l.id().value(),name:a.name()+"\n"+l.name()+" angle"})}}catch(Fq){u.e(Fq)}finally{u.f()}var c,h=s(a.links());try{for(h.s();!(c=h.n()).done;){var f=c.value;e.push({value:f.id().value(),name:a.name()+"\n"+f.name()+" position"})}}catch(Fq){h.e(Fq)}finally{h.f()}}}}catch(Fq){i.e(Fq)}finally{i.f()}return e}},{key:"onChangeScene",value:function(e){this.deselectDropdowns(0);var t=e.value;if(t){var n=this.props.robotSceneManager,r=n.robotSceneById(t);r&&(n.activeRobotScenes().includes(r)||n.activateRobotScene(r),this.setState({baseScene:r}),this.selectDropdowns(0))}}},{key:"componentDidUpdate",value:function(e){var t=this.props.robotScene;t!==e.robotScene&&!t.isTimeWarping()&&(this.dropdownRef[0].current.setValue(this.dropdownRef[0].current.state.prevProps.placeholder),this.deselectDropdowns(0))}},{key:"deselectDropdowns",value:function(e){this.state.dropdowns[e]=!1,1==e+1?this.selectedOptions=[]:void 0!=this.dropdownRef[e+1]&&this.dropdownRef[e+1].current.setValue(this.dropdownRef[e+1].current.state.prevProps.placeholder)}},{key:"selectDropdowns",value:function(e){this.state.dropdowns[e]=!0}},{key:"createNewGraphTab",value:function(e){}},{key:"onConfirm",value:function(e){for(var t=0;t<1;t++)if(!this.state.dropdowns[t])throw new Error("".concat(t," Not every dropdown is selected. Need to select all dropdowns to show the graph"));if(0==this.selectedOptions.length)throw new Error("Not every dropdown is selected. Need to select all dropdowns to show the graph");var n=this.props,r=n.robotScene,i=n.robotSceneManager,a=this.state,o=a.baseScene,u=(a.keyObjects,r?i.getManagedRobotSceneData(r):void 0);if(void 0!==u){var l=u.robotScene.clone(!0,!1,!1);this.setState({currWarpedScene:l}),l.setName(r.name()+" Time Warped Based On "+(null===o||void 0===o?void 0:o.name())),i.addManagedRobotScenes([{path:pr(u.path),robotScene:l,metrics:new Map(u.metrics)}]),l.setTimeWarpBase(o);var c,h=[],f=s(this.selectedOptions);try{for(f.s();!(c=f.n()).done;){var d=c.value;h.push(d.name);var p=br(d.name.split("\n"),2),v=p[0],m=br(p[1].split(" "),2),g=m[0],y=m[1];if(0===g.length){var b=l.getRobotByName(v);null===b||void 0===b||b.setPositionIncludeInTimeWarpConsideration(!0)}else{var x,w=l.getJointByName(v,g);if(void 0===w)null===(x=w=l.getLinkByName(v,g))||void 0===x||x.setPosIncludeInTimeWarpConsideration(!0);else"angle"==y?w.setAngleIncludeInTimeWarpConsideration(!0):w.setPosIncludeInTimeWarpConsideration(!0)}l.setTimeWarpBase(void 0),l.setTimeWarpBase(o)}}catch(Fq){f.e(Fq)}finally{f.f()}l.setKeyObjects(h)}}},{key:"onTimeWarpBar",value:function(e){var t=this.props,n=t.robotScene;t.robotSceneManager;n.isTimeWarping()?this.props.addNewTimeWarpTimeBar(n.id().value()):void 0!==this.state.currWarpedScene&&this.props.addNewTimeWarpTimeBar(this.state.currWarpedScene.id().value())}},{key:"onAddGroup",value:function(){this.props.animationManager.addStoredAnimation(new qb)}},{key:"deleteAnimationAssociatedwithRobot",value:function(e,t){for(var n=pr(e.animations()),r=0;r<n.length;r++)t===n[r].robot()&&(console.log("remove animations!!!!"),e.removeAnimation(n[r]))}},{key:"autoBindNewAnimationtoRobot",value:function(e){console.log("auto bind new animation with robot!!!");var t,n=e.robotNames(),r=s(this.props.robotScene.robots());try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n.has(i.name())){0===this.props.animationManager.animationGroups.length&&this.onAddGroup();var a,o=s(zb(this.props.animationManager.animationGroups()));try{for(o.s();!(a=o.n()).done;){var u=br(a.value,2),l=(u[0],u[1]);this.deleteAnimationAssociatedwithRobot(l,i),l.addAnimation(new $b(i,e)),-1===this.props.animationManager.activeAnimations().indexOf(l)&&this.props.animationManager.addActiveAnimation(l)}}catch(Fq){o.e(Fq)}finally{o.f()}}}}catch(Fq){r.e(Fq)}finally{r.f()}}},{key:"onLoadAnimationCSV",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadCSVMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(t=this._animationCsvUrlInput.current)){e.next=15;break}if(!((n=t.value).length>0)){e.next=14;break}return e.t0=s,e.next=9,Y_.loadFromURL(n,"ReloadCSV");case 9:e.t1=e.sent,r=(0,e.t0)(e.t1);try{for(r.s();!(i=r.n()).done;)a=i.value,this.props.robotSceneManager.addAnimationTable(a),this.autoBindNewAnimationtoRobot(a)}catch(Fq){r.e(Fq)}finally{r.f()}e.next=15;break;case 14:dr.error("Failed to load the animation CSV file: The URL for the animation CSV file was empty!");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUploadAnimationCSV",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a,o,u,l;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadCSVMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(n=t.currentTarget.files)){e.next=25;break}r=s(n),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return a=i.value,e.t0=s,e.next=12,Y_.loadFromLocalFile(a,"ReloadCSV");case 12:e.t1=e.sent,o=(0,e.t0)(e.t1);try{for(o.s();!(u=o.n()).done;)l=u.value,this.props.robotSceneManager.addAnimationTable(l),this.autoBindNewAnimationtoRobot(l)}catch(Fq){o.e(Fq)}finally{o.f()}case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(5),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[5,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"displayKeyObjects",value:function(e){var t,n=this;if(e){var r=this.props.robotScene.keyObjects();t=(0,rr.jsx)("div",{children:r.map((function(e){return(0,rr.jsx)("p",{children:e},e)}))})}else t=(0,rr.jsx)(uV.default,{placeholder:"Select a key object ...",showCheckbox:!0,displayValue:"name",style:{optionContainer:{border:"none"},option:{color:"rgb(238, 238, 238)",backgroundColor:"rgb(50, 50, 50)",fontSize:"15px"},searchBox:{fontSize:"15px",border:"none",backgroundColor:"rgb(23, 24, 25)",width:"100%",marginLeft:"-1rem"},inputField:{fontSize:"15px",width:"100%",padding:"1rem 1rem"},chips:{backgroundColor:"rgb(50, 50, 50)",color:"rgb(238, 238, 238)",fontSize:"15px"},notFound:{color:"rgb(238, 238, 238)",backgroundColor:"rgb(50, 50, 50)",fontSize:"15px"},placeholder:{backgroundColor:"rgb(238, 238, 238)"}},onSelect:function(e,t){n.selectedOptions.push(t),console.log("select "+t.name)},onRemove:function(e,t){n.selectedOptions=n.selectedOptions.filter((function(e){return e.value!==t.value}))},options:this.genKeyObjectOptions(),selectedValues:this.selectedOptions});return t}},{key:"displayBaseScene",value:function(e){var t;if(e){var n,r=this.props,i=r.robotScene,a=null===(n=r.robotSceneManager.robotSceneById(i.baseSceneId()))||void 0===n?void 0:n.name();t=(0,rr.jsx)("p",{children:a})}else t=(0,rr.jsx)(oV,{placeholder:"Select a base scene ...",ref:this.dropdownRef[0],options:this.genSceneOptions(),onChange:this.onChangeScene.bind(this),isSearchable:!0,styles:G$});return t}},{key:"onTraceSizeChange",value:function(){var e=this;return function(t){e.props.robotScene.setTraceSize(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onAxisSizeChange",value:function(){var e=this;return function(t){e.props.robotScene.setAxisSize(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onDensityChange",value:function(){var e=this;return function(t){e.props.robotScene.setDensity(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onDirectionalLightChange",value:function(){var e=this;return function(t){e.props.robotScene.setDirectionalLightIntensity(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onAmbientLightChange",value:function(){var e=this;return function(t){e.props.robotScene.setAmbientLightIntensity(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onGroundPlaneOpacityChange",value:function(){var e=this;return function(t){e.props.robotScene.setGroundPlaneOpacity(t),e.state.applyToAllScenes&&e.applyChangesToAll()}}},{key:"onColorMapChange",value:function(e){this.props.robotScene.setBackgroundColor(e),this.state.applyToAllScenes&&this.applyChangesToAll()}},{key:"onGroundPlaneColorChange",value:function(e){this.props.robotScene.setGroundPlaneColor(e),this.state.applyToAllScenes&&this.applyChangesToAll()}},{key:"onCheckGroundPlane",value:function(e){this.props.robotScene.setGroundPlaneVisibility(e.currentTarget.checked),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll()}},{key:"onCheckWorldFrame",value:function(e){this.props.robotScene.setWorldFrameObjectVisibility(e.currentTarget.checked),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll()}},{key:"toggleWorldFrame",value:function(){this.props.robotScene.toggleWorldFrame(),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll(),this.props.forceUpdateTabNames()}},{key:"toggleCameraType",value:function(){this.props.robotScene.toggleCameraType(),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll(),this.props.forceUpdateTabNames()}},{key:"onCheckApplytoAll",value:function(e){this.setState({applyToAllScenes:e.currentTarget.checked}),this.applyChangesToAll()}},{key:"applyChangesToAll",value:function(){var e,t=this.props.robotScene,n=t.backgroundColor(),r=t.ambientLightIntensity(),i=t.directionalLightIntensity(),a=t.isGroundPlaneVisible(),o=t.worldFrame(),u=t.cameraType(),l=t.axisSize(),c=t.density(),h=t.isWorldFrameObjectVisible(),f=t.traceSize(),d=t.groundPlaneColor(),p=t.groundPlaneOpacity(),v=s(this.props.robotSceneManager.allManagedRobotScenes());try{for(v.s();!(e=v.n()).done;){var m=e.value;m.setBackgroundColor(n),m.setAmbientLightIntensity(r),m.setDirectionalLightIntensity(i),m.setGroundPlaneVisibility(a),m.setWorldFrame(o),m.setCameraType(u),m.setAxisSize(l),m.setDensity(c),m.setWorldFrameObjectVisibility(h),m.setTraceSize(f),m.setGroundPlaneColor(d),m.setGroundPlaneOpacity(p)}}catch(Fq){v.e(Fq)}finally{v.f()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.robotScene,r=t.robotSceneManager,i=this.state.currWarpedScene,a=n.isTimeWarping(),o=n.axisSize(),s=n.density();return(0,rr.jsxs)("div",{className:"SceneOptionPanel",ref:this._graphDiv,children:[(0,rr.jsxs)("div",{className:"PopUpGroup",children:[(0,rr.jsx)(i$,{labelValue:"Scene Name:",value:n.name(),onReturnPressed:function(t){n.setName(t),e.props.forceUpdateTabNames()}}),(0,rr.jsx)(fV,{buttonValue:"Legend",title:"Click and drag to add a legend to the scene",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){return["SceneLegend&".concat(Lb(4),"&").concat(e.props.robotScene.id().value()),function(e){}]}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.SceneOptionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Appearance"})}),(0,rr.jsx)(fG,{children:(0,rr.jsxs)("div",{className:"SceneViews",children:[(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Ground Plane:"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,rr.jsx)(n$,{checked:n.isGroundPlaneVisible(),onChange:this.onCheckGroundPlane.bind(this)}),(0,rr.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" World Frame:"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,rr.jsx)(n$,{checked:n.isWorldFrameObjectVisible(),onChange:this.onCheckWorldFrame.bind(this)}),(0,rr.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"World Frame Convention:"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" ROS"}),(0,rr.jsx)(n$,{checked:"THREE.js"===n.worldFrame(),onChange:this.toggleWorldFrame.bind(this)}),(0,rr.jsx)("label",{className:"switch-right-label",children:"THREE.js "})]})]}),(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsx)(hV,{label:"Directional Light Intensity",value:n.directionalLightIntensity(),min:0,max:10,step:.1,onChange:this.onDirectionalLightChange()}),(0,rr.jsx)(hV,{label:"Ambient Light Intensity",value:n.ambientLightIntensity(),min:0,max:10,step:.1,onChange:this.onAmbientLightChange()}),(0,rr.jsx)(hV,{label:"Ground Plane Opacity",value:n.groundPlaneOpacity(),min:0,max:1,step:.01,onChange:this.onGroundPlaneOpacityChange()})]}),(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsx)(hV,{label:"Trace Size",value:n.traceSize(),min:1e-4,max:5,step:.001,onChange:this.onTraceSizeChange()},"trace size"),(0,rr.jsx)(hV,{label:"Axis Size",value:o,min:0,max:.2,step:.001,onChange:this.onAxisSizeChange()},"axis size"),(0,rr.jsx)(hV,{label:"Axis Density",value:s,min:1e-4,max:1,step:.001,onChange:this.onDensityChange()},"density")]}),(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{children:"Background Color"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:n.backgroundColor(),onColorMapChange:this.onColorMapChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{children:"Ground Plane Color"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:n.groundPlaneColor(),onColorMapChange:this.onGroundPlaneColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]}),(0,rr.jsx)("div",{className:"top-line",children:(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Apply Changes to All Scenes"}),(0,rr.jsx)(n$,{checked:this.state.applyToAllScenes,onChange:this.onCheckApplytoAll.bind(this)})]})})]})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Camera"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)("div",{className:"SceneViews",children:(0,rr.jsxs)("div",{children:[(0,rr.jsx)("div",{children:(0,rr.jsx)(r$,{robotSceneManager:r})}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Camera Type:"}),(0,rr.jsx)("label",{className:"switch-right-label",children:"Orthographic"}),(0,rr.jsx)(n$,{checked:"Orthographic"===n.cameraType(),onChange:this.toggleCameraType.bind(this)}),(0,rr.jsx)("label",{className:"switch-left-label",children:"Perspective"})]})]})})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Time Warping Options"})}),(0,rr.jsx)(fG,{children:(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Base Scene : "}),(0,rr.jsx)("div",{className:"Select-container",children:this.displayBaseScene(a)})]}),(0,rr.jsx)("div",{className:"row-container",children:(0,rr.jsx)("label",{children:"Key Object : "})}),(0,rr.jsx)("div",{className:"Multiselect-container",children:this.displayKeyObjects(a)}),(0,rr.jsxs)("div",{className:"ButtonsContainer",style:{display:"flex",gap:"1rem"},children:[!a&&(0,rr.jsx)(sV,{buttonValue:"Confirm",onClick:this.onConfirm.bind(this)}),(0,rr.jsx)(sV,{buttonValue:"Warped Time Bar",onClick:this.onTimeWarpBar.bind(this)}),(0,rr.jsx)(fV,{className:"TimeWarp",title:"Click and drag to create a time warp graph",buttonValue:"Warping Graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var t=Lb(4),r=n.isTimeWarping()?n.id().value():null===i||void 0===i?void 0:i.id().value();return["TimeWarpedGraph&".concat(t,"&").concat(r,"&motion"),function(n){e.createNewGraphTab(t)}]}})]})]})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Edit Motion"})}),(0,rr.jsx)(fG,{children:(0,rr.jsxs)("div",{className:"ReloadCSV",children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Replace with a local animation: "}),(0,rr.jsx)(hF,{accept:[".csv"],vertical:!1,onChange:this.onUploadAnimationCSV})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Replace with an online animation: "}),(0,rr.jsx)("input",{ref:this._animationCsvUrlInput,type:"text",placeholder:" URL "}),(0,rr.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadAnimationCSV})]})]})})]})})]})}}]),r}(t.Component),W$=[{robot_name:"sawyer",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/sawyer/urdf/sawyer_gripper.urdf"},{robot_name:"fetch",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/fetch/urdf/fetch.urdf"},{robot_name:"mico",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/kinova/urdf/mico.urdf"},{robot_name:"ur5",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/ur5/urdf/ur5_gripper.urdf"},{robot_name:"ur5_pen",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/ur5/urdf/ur5_pen.urdf"},{robot_name:"spot arm",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/spot_arm/urdf/spot_arm.urdf"},{robot_name:"panda",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/panda/urdf/panda.urdf"},{robot_name:"iiwa",url:"http://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/iiwa/urdf/iiwa.urdf"},{robot_name:"bottle",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/objects/glass_bottle.glb"},{robot_name:"table",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/objects/side_table.glb"},{robot_name:"end-effector targets",url:"EETarget"}],Z$=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._urdfURLInput=void 0,i._jsonURLInput=void 0,i._importSceneURLInput=void 0,i._animationCsvUrlInput=void 0,i._exampleRobotInput=void 0,i._exampleRobotOptions=[],i.dropdownRef=void 0,i.state={savedLayout:void 0},i.dropdownRef=(0,t.createRef)(),i.onLoadURDFURL=i.onLoadURDFURL.bind((0,c.Z)(i)),i.onUploadJsonScene=i.onUploadJsonScene.bind((0,c.Z)(i)),i.onLoadAnimationCSV=i.onLoadAnimationCSV.bind((0,c.Z)(i)),i.onLoadSession=i.onLoadSession.bind((0,c.Z)(i)),i.onSaveSession=i.onSaveSession.bind((0,c.Z)(i)),i.onUploadSession=i.onUploadSession.bind((0,c.Z)(i)),i.onUploadAnimationCSV=i.onUploadAnimationCSV.bind((0,c.Z)(i)),i.onUploadAnimationRosbag=i.onUploadAnimationRosbag.bind((0,c.Z)(i)),i.onSelectExampleRobot=i.onSelectExampleRobot.bind((0,c.Z)(i)),i.currScene=i.currScene.bind((0,c.Z)(i)),i._animationCsvUrlInput=(0,t.createRef)(),i._urdfURLInput=(0,t.createRef)(),i._jsonURLInput=(0,t.createRef)(),i._importSceneURLInput=(0,t.createRef)(),i._exampleRobotInput=(0,t.createRef)();var a,o=s(W$);try{for(o.s();!(a=o.n()).done;){var l=a.value;i._exampleRobotOptions.push({value:l.url,label:l.robot_name})}}catch(Fq){o.e(Fq)}finally{o.f()}return i}return(0,l.Z)(r,[{key:"currScene",value:function(){return this.props.robotSceneManager.currRobotScene(!1)}},{key:"assureRobotScene",value:function(){return this.props.robotSceneManager.currRobotScene(!1)}},{key:"onLoadURDFURL",value:function(){var e=yr(mr().mark((function e(){var t,n,r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadRobotMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(t=this._urdfURLInput.current)){e.next=13;break}if(!((n=t.value).length>0)){e.next=12;break}return e.next=8,this.currScene().loadRobotFromURL(n);case 8:r=e.sent,this.autoBindNewRobotwithAnimation(r),e.next=13;break;case 12:dr.error("Failed to load the URDF file: The URL for the URDF file was empty.");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUploadJsonScene",value:function(e){var t=e.currentTarget.files;t&&this.currScene().loadJsonFromLocalFile(t[0])}},{key:"autoBindNewRobotwithAnimation",value:function(e){0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new qb);var t,n=s(zb(this.props.animationManager.animationGroups()));try{for(n.s();!(t=n.n()).done;){var r,i=br(t.value,2),a=(i[0],i[1]),o=s(this.props.robotSceneManager.animationTables());try{for(o.s();!(r=o.n()).done;){var u=r.value;u.robotNames().has(e.name())&&(a.addAnimation(new $b(e,u)),-1===this.props.animationManager.activeAnimations().indexOf(a)&&this.props.animationManager.addActiveAnimation(a))}}catch(Fq){o.e(Fq)}finally{o.f()}}}catch(Fq){n.e(Fq)}finally{n.f()}}},{key:"autoBindNewAnimationtoRobot",value:function(e){var t,n=e.robotNames(),i=new Set,a="",o=s(n);try{for(o.s();!(t=o.n()).done;){var u=t.value;i.add(u)}}catch(Fq){o.e(Fq)}finally{o.f()}var l,c=s(this.currScene().robots());try{for(c.s();!(l=c.n()).done;){var h=l.value;if(n.has(h.name())){i.delete(h.name()),a=a+h.name()+", ",0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new qb);var f,d=s(zb(this.props.animationManager.animationGroups()));try{for(d.s();!(f=d.n()).done;){var p=br(f.value,2),v=(p[0],p[1]);r.deleteAnimationAssociatedwithRobot(v,h),v.addAnimation(new $b(h,e)),-1===this.props.animationManager.activeAnimations().indexOf(v)&&this.props.animationManager.addActiveAnimation(v)}}catch(Fq){d.e(Fq)}finally{d.f()}}}}catch(Fq){c.e(Fq)}finally{c.f()}var m=document.querySelector(".LoadAndSavePanel"),g=null===m||void 0===m?void 0:m.querySelector(".LoadCSV");if(a.length>0){var y="Successfully bind "+a,b=document.createElement("p");b.innerText=y,b.classList.add("LoadCSVMessage"),null===g||void 0===g||g.appendChild(b)}if(i.size>0){var x,w="",_=s(i);try{for(_.s();!(x=_.n()).done;){w=w+x.value+", "}}catch(Fq){_.e(Fq)}finally{_.f()}var S="Cannot find robot "+w,k=document.createElement("p");k.innerText=S,k.style.color="red",k.classList.add("LoadCSVMessage"),null===g||void 0===g||g.appendChild(k)}}},{key:"onLoadAnimationCSV",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadCSVMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(t=this._animationCsvUrlInput.current)){e.next=15;break}if(!((n=t.value).length>0)){e.next=14;break}return e.t0=s,e.next=9,Y_.loadFromURL(n,"LoadCSV");case 9:e.t1=e.sent,r=(0,e.t0)(e.t1);try{for(r.s();!(i=r.n()).done;)a=i.value,this.props.robotSceneManager.addAnimationTable(a),this.autoBindNewAnimationtoRobot(a)}catch(Fq){r.e(Fq)}finally{r.f()}e.next=15;break;case 14:dr.error("Failed to load the animation CSV file: The URL for the animation CSV file was empty!");case 15:this.props.robotSceneManager.activateRobotScene(this.currScene());case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUploadAnimationCSV",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a,o,u,l;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadCSVMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(n=t.currentTarget.files)){e.next=25;break}r=s(n),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}return a=i.value,e.t0=s,e.next=12,Y_.loadFromLocalFile(a,"LoadCSV");case 12:e.t1=e.sent,o=(0,e.t0)(e.t1);try{for(o.s();!(u=o.n()).done;)l=u.value,console.log(l),this.props.robotSceneManager.addAnimationTable(l),this.autoBindNewAnimationtoRobot(l)}catch(Fq){o.e(Fq)}finally{o.f()}case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(5),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this.props.robotSceneManager.activateRobotScene(this.currScene());case 26:case"end":return e.stop()}}),e,this,[[5,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onUploadAnimationRosbag",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelectorAll(".LoadRosbagMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),!(n=t.currentTarget.files)){e.next=21;break}r=s(n),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Y_.parseRosbag(this.props.robotSceneManager,a,"LoadRosbag");case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:this.props.robotSceneManager.activateRobotScene(this.currScene());case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onUploadSession",value:function(){var e=yr(mr().mark((function e(t){var n,r,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget.files){r=s(n);try{for(r.s();!(i=r.n()).done;)a=i.value,this.props.robotSceneManager.loadSessionFromLocalFile(a,this.props.onRestoreLayout)}catch(Fq){r.e(Fq)}finally{r.f()}}case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSaveSession",value:function(){var e=yr(mr().mark((function e(){var t;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.props.robotSceneManager.saveSession()).layout=this.props.onSaveLayout(),KS(t,"session.json");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoadSession",value:function(){var e=yr(mr().mark((function e(){var t,n;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this._importSceneURLInput.current)&&((n=t.value).length>0?this.props.robotSceneManager.loadSessionFromURL(n,this.props.onRestoreLayout):dr.error("Failed to load the sessions: The URL for the sessions was empty."));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSelectExampleRobot",value:function(){var e=yr(mr().mark((function e(){var t,n,r;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelectorAll(".LoadRobotMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),(t=this.dropdownRef.current)&&t.props&&t.props.value&&(n=t.props.value.label,"EETarget"===(r=t.props.value.value)?this.currScene().addEETarget():r.length>0?this.currScene().loadRobotFromURL(r,n):dr.error("Failed to load the URDF file: The URL for the URDF file was empty."));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSaveLayout",value:function(){var e=this.props.onSaveLayout(),t=JSON.stringify(e),n=JSON.parse(t);console.log(n),void 0!==n&&this.setState({savedLayout:n})}},{key:"render",value:function(){return(0,rr.jsxs)("div",{className:"LoadAndSavePanel",children:[(0,rr.jsx)("div",{className:"PopUpGroup",children:(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.LoadAndSavePanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})}),(0,rr.jsx)("br",{}),(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsxs)("label",{children:[" ",(0,rr.jsx)("b",{children:" Workspace "}),"  "]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Upload a workspace: "}),(0,rr.jsx)(hF,{accept:[".json"],vertical:!1,onChange:this.onUploadSession})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Load from a url: "}),(0,rr.jsx)("input",{ref:this._importSceneURLInput,type:"text",placeholder:"URL"}),(0,rr.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadSession})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Download current workspace: "}),(0,rr.jsx)("input",{type:"button",value:"Download",onClick:this.onSaveSession})]})]}),(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsxs)("label",{children:[" ",(0,rr.jsx)("b",{children:"  Mesh "}),"  "]}),(0,rr.jsxs)("div",{className:"LoadRobot",children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Example robots "}),(0,rr.jsx)("div",{className:"select-container",children:(0,rr.jsx)(oV,{placeholder:"Select a robot ...",options:this._exampleRobotOptions,ref:this.dropdownRef,isSearchable:!0,styles:G$})}),(0,rr.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectExampleRobot})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Load online URDF: "}),(0,rr.jsx)("input",{ref:this._urdfURLInput,type:"text",placeholder:" URL "}),(0,rr.jsx)("label",{children:"  "}),(0,rr.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadURDFURL})]})]})]}),(0,rr.jsxs)("div",{className:"top-line ",children:[(0,rr.jsxs)("label",{children:[" ",(0,rr.jsx)("b",{children:"  Motion "}),"  "]}),(0,rr.jsxs)("div",{className:"LoadCSV",children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Upload a CSV file "}),(0,rr.jsx)(hF,{accept:[".csv"],vertical:!1,onChange:this.onUploadAnimationCSV})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Load CSV from a url: "}),(0,rr.jsx)("input",{ref:this._animationCsvUrlInput,type:"text",placeholder:" URL "}),(0,rr.jsx)("label",{children:"  "}),(0,rr.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadAnimationCSV})]})]}),(0,rr.jsx)("div",{className:"LoadRosbag",children:(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:" Upload a Rosbag: "}),(0,rr.jsx)(hF,{accept:[".bag"],vertical:!1,onChange:this.onUploadAnimationRosbag})]})})]})]})}}],[{key:"deleteAnimationAssociatedwithRobot",value:function(e,t){for(var n,r=pr(e.animations()),i=0;i<r.length;i++)t===r[i].robot()&&(console.log("remove animations!!!!"),e.removeAnimation(r[i]),n=r[i]);return n}}]),r}(t.Component),$$=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};(0,u.Z)(this,e),this._canvas=void 0,this._camera=void 0,this._preprocess=void 0,this._postprocess=void 0,this._canvas=t,this._camera=n,this._preprocess=r,this._postprocess=i}return(0,l.Z)(e,[{key:"canvas",value:function(){return this._canvas}},{key:"camera",value:function(){return this._camera}},{key:"preprocess",value:function(){this._preprocess(this._canvas)}},{key:"postprocess",value:function(){this._postprocess(this._canvas)}}]),e}(),q$={type:"change"},X$={type:"start"},Y$={type:"end"},K$=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r){var i;(0,u.Z)(this,n),i=t.call(this),void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.object=e,i.domElement=r,i.domElement.style.touchAction="none",i.enabled=!0,i.target=new Fs,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.05,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.panSpeed=1,i.screenSpacePanning=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},i.mouseButtons={LEFT:Rr.ROTATE,MIDDLE:Rr.DOLLY,RIGHT:Rr.PAN},i.touches={ONE:Pr.ROTATE,TWO:Pr.DOLLY_PAN},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i._domElementKeyEvents=null,i.getPolarAngle=function(){return h.phi},i.getAzimuthalAngle=function(){return h.theta},i.getDistance=function(){return this.object.position.distanceTo(this.target)},i.listenToKeyEvents=function(e){e.addEventListener("keydown",q),this._domElementKeyEvents=e},i.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},i.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(q$),a.update(),s=o.NONE},i.update=function(){var t=new Fs,n=(new js).setFromUnitVectors(e.up,new Fs(0,1,0)),r=n.clone().invert(),i=new Fs,u=new js,c=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(n),h.setFromVector3(t),a.autoRotate&&s===o.NONE&&C(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(h.theta+=f.theta*a.dampingFactor,h.phi+=f.phi*a.dampingFactor):(h.theta+=f.theta,h.phi+=f.phi);var m=a.minAzimuthAngle,g=a.maxAzimuthAngle;return isFinite(m)&&isFinite(g)&&(m<-Math.PI?m+=c:m>Math.PI&&(m-=c),g<-Math.PI?g+=c:g>Math.PI&&(g-=c),h.theta=m<=g?Math.max(m,Math.min(g,h.theta)):h.theta>(m+g)/2?Math.max(m,h.theta):Math.min(g,h.theta)),h.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(a.minDistance,Math.min(a.maxDistance,h.radius)),!0===a.enableDamping?a.target.addScaledVector(p,a.dampingFactor):a.target.add(p),t.setFromSpherical(h),t.applyQuaternion(r),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(f.theta*=1-a.dampingFactor,f.phi*=1-a.dampingFactor,p.multiplyScalar(1-a.dampingFactor)):(f.set(0,0,0),p.set(0,0,0)),d=1,!!(v||i.distanceToSquared(a.object.position)>l||8*(1-u.dot(a.object.quaternion))>l)&&(a.dispatchEvent(q$),i.copy(a.object.position),u.copy(a.object.quaternion),v=!1,!0)}}(),i.dispose=function(){a.domElement.removeEventListener("contextmenu",X),a.domElement.removeEventListener("pointerdown",G),a.domElement.removeEventListener("pointercancel",Z),a.domElement.removeEventListener("wheel",$),a.domElement.removeEventListener("pointermove",H),a.domElement.removeEventListener("pointerup",W),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",q)};var a=(0,c.Z)(i),o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,l=1e-6,h=new zg,f=new zg,d=1,p=new Fs,v=!1,m=new ws,g=new ws,y=new ws,b=new ws,x=new ws,w=new ws,_=new ws,S=new ws,k=new ws,M=[],T={};function E(){return Math.pow(.95,a.zoomSpeed)}function C(e){f.theta-=e}function A(e){f.phi-=e}var R=function(){var e=new Fs;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),P=function(){var e=new Fs;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),L=function(){var e=new Fs;return function(t,n){var r=a.domElement;if(a.object.isPerspectiveCamera){var i=a.object.position;e.copy(i).sub(a.target);var o=e.length();o*=Math.tan(a.object.fov/2*Math.PI/180),R(2*t*o/r.clientHeight,a.object.matrix),P(2*n*o/r.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(R(t*(a.object.right-a.object.left)/a.object.zoom/r.clientWidth,a.object.matrix),P(n*(a.object.top-a.object.bottom)/a.object.zoom/r.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function O(e){a.object.isPerspectiveCamera?d/=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){a.object.isPerspectiveCamera?d*=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function D(e){m.set(e.clientX,e.clientY)}function I(e){b.set(e.clientX,e.clientY)}function j(){if(1===M.length)m.set(M[0].pageX,M[0].pageY);else{var e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);m.set(e,t)}}function F(){if(1===M.length)b.set(M[0].pageX,M[0].pageY);else{var e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);b.set(e,t)}}function z(){var e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);_.set(0,n)}function B(e){if(1==M.length)g.set(e.pageX,e.pageY);else{var t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}y.subVectors(g,m).multiplyScalar(a.rotateSpeed);var i=a.domElement;C(2*Math.PI*y.x/i.clientHeight),A(2*Math.PI*y.y/i.clientHeight),m.copy(g)}function U(e){if(1===M.length)x.set(e.pageX,e.pageY);else{var t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);x.set(n,r)}w.subVectors(x,b).multiplyScalar(a.panSpeed),L(w.x,w.y),b.copy(x)}function V(e){var t=J(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);S.set(0,i),k.set(0,Math.pow(S.y/_.y,a.zoomSpeed)),O(k.y),_.copy(S)}function G(e){!1!==a.enabled&&(0===M.length&&(a.domElement.setPointerCapture(e.pointerId),a.domElement.addEventListener("pointermove",H),a.domElement.addEventListener("pointerup",W)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(K(e),M.length){case 1:switch(a.touches.ONE){case Pr.ROTATE:if(!1===a.enableRotate)return;j(),s=o.TOUCH_ROTATE;break;case Pr.PAN:if(!1===a.enablePan)return;F(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(a.touches.TWO){case Pr.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;a.enableZoom&&z(),a.enablePan&&F(),s=o.TOUCH_DOLLY_PAN;break;case Pr.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;a.enableZoom&&z(),a.enableRotate&&j(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&a.dispatchEvent(X$)}(e):function(e){var t;switch(e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Rr.DOLLY:if(!1===a.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case Rr.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;I(e),s=o.PAN}else{if(!1===a.enableRotate)return;D(e),s=o.ROTATE}break;case Rr.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;D(e),s=o.ROTATE}else{if(!1===a.enablePan)return;I(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&a.dispatchEvent(X$)}(e))}function H(e){!1!==a.enabled&&("touch"===e.pointerType?function(e){switch(K(e),s){case o.TOUCH_ROTATE:if(!1===a.enableRotate)return;B(e),a.update();break;case o.TOUCH_PAN:if(!1===a.enablePan)return;U(e),a.update();break;case o.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&V(e),a.enablePan&&U(e)}(e),a.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&V(e),a.enableRotate&&B(e)}(e),a.update();break;default:s=o.NONE}}(e):function(e){if(!1===a.enabled)return;switch(s){case o.ROTATE:if(!1===a.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),y.subVectors(g,m).multiplyScalar(a.rotateSpeed);var t=a.domElement;C(2*Math.PI*y.x/t.clientHeight),A(2*Math.PI*y.y/t.clientHeight),m.copy(g),a.update()}(e);break;case o.DOLLY:if(!1===a.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),k.subVectors(S,_),k.y>0?O(E()):k.y<0&&N(E()),_.copy(S),a.update()}(e);break;case o.PAN:if(!1===a.enablePan)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,b).multiplyScalar(a.panSpeed),L(w.x,w.y),b.copy(x),a.update()}(e)}}(e))}function W(e){Y(e),0===M.length&&(a.domElement.releasePointerCapture(e.pointerId),a.domElement.removeEventListener("pointermove",H),a.domElement.removeEventListener("pointerup",W)),a.dispatchEvent(Y$),s=o.NONE}function Z(e){Y(e)}function $(e){!1!==a.enabled&&!1!==a.enableZoom&&s===o.NONE&&(e.preventDefault(),a.dispatchEvent(X$),function(e){e.deltaY<0?N(E()):e.deltaY>0&&O(E()),a.update()}(e),a.dispatchEvent(Y$))}function q(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:L(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:L(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:L(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:L(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function X(e){!1!==a.enabled&&e.preventDefault()}function Y(e){delete T[e.pointerId];for(var t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function K(e){var t=T[e.pointerId];void 0===t&&(t=new ws,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function J(e){var t=e.pointerId===M[0].pointerId?M[1]:M[0];return T[t.pointerId]}return a.domElement.addEventListener("contextmenu",X),a.domElement.addEventListener("pointerdown",G),a.domElement.addEventListener("pointercancel",Z),a.domElement.addEventListener("wheel",$,{passive:!1}),i.update(),i}return(0,l.Z)(n)}(ss);var J$=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._orbitView=void 0,i._orbitCamera=void 0,i._perspecCamera=void 0,i._orthoCamera=void 0,i._controls=void 0,i._canvasRef=void 0,i._resize_observer=void 0,i._raycaster=void 0,i._pointer=void 0,i._syncViewCallback=void 0,i._perspecCamera=new db.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3),i._perspecCamera.position.set(3,3,3),i._perspecCamera.lookAt(0,0,0),i._perspecCamera.up.set(0,0,1),i._orthoCamera=new db.OrthographicCamera(window.innerWidth/-500,window.innerWidth/500,window.innerHeight/500,window.innerHeight/-500,.001,1e3),i._orthoCamera.position.set(3,3,3),i._orthoCamera.lookAt(0,0,0),i._orthoCamera.up.set(0,0,1),i._orbitCamera=i._perspecCamera,i._controls=void 0,i._raycaster=new db.Raycaster,i.onCanvasMouseDown=i.onCanvasMouseDown.bind((0,c.Z)(i)),i.onCanvasMouseMove=i.onCanvasMouseMove.bind((0,c.Z)(i)),i.onCanvasMouseOut=i.onCanvasMouseOut.bind((0,c.Z)(i)),i._pointer=new db.Mesh(new db.SphereGeometry(.01,30,30),new db.MeshBasicMaterial({transparent:!0,opacity:.75,color:new db.Color(16777215*Math.random())})),i._canvasRef=t.createRef(),i.initScene(i.props.robotScene),i}return(0,l.Z)(r,[{key:"canSelectRobot",value:function(){var e;return null!==(e=this.props.allowSelecting)&&void 0!==e&&e&&this.props.robotSceneManager.allowRobotSelection()}},{key:"addPointer",value:function(e,t){if(this.props.allowSelecting){var n=e.scene();-1===n.children.indexOf(this._pointer)&&n.add(this._pointer),this._pointer.position.copy(t),e.render()}}},{key:"removePointer",value:function(e){var t=e.scene();-1!==t.children.indexOf(this._pointer)&&(t.remove(this._pointer),e.render())}},{key:"initScene",value:function(e){e.runOnce(hr.INIT,(function(){e.scene().background=new db.Color(e.backgroundColor()),e.scene().position.set(0,0,0);var t=16777215,n=new db.DirectionalLight(t,e.directionalLightIntensity());n.castShadow=!0,n.shadow.mapSize.setScalar(1024),n.position.set(5,5,30),n.shadow.bias=-5e-4,n.lookAt(0,0,0),e.scene().add(n),e.setDirectionalLight(n);var r=new db.AmbientLight(t,e.ambientLightIntensity());e.scene().add(r),e.setAmbientLight(r);var i=new db.Mesh(new db.PlaneBufferGeometry,new db.MeshStandardMaterial({color:new db.Color(e.groundPlaneColor()),opacity:e.groundPlaneOpacity(),transparent:!0,depthWrite:!0}));i.scale.setScalar(20),i.position.z=-.002,i.receiveShadow=!0,i.visible=e.isGroundPlaneVisible(),e.scene().add(i);var a=new db.GridHelper(20,20,16777215,3355443);a.rotation.x=Math.PI/2,a.position.z=-.001,a.visible=e.isGroundPlaneVisible(),e.scene().add(a),e.setGroundPlane(i,a)}))}},{key:"onCanvasMouseOut",value:function(){this.props.robotSceneManager.allowRobotSelection()&&this.removePointer(this.props.robotScene)}},{key:"onCanvasMouseMove",value:function(e){if(this._canvasRef.current){var t=new db.Vector2,n=e.target;if(n){var r=n,i=e.clientX-(e.clientX-e.offsetX),a=e.clientY-(e.clientY-e.offsetY);t.x=i/r.clientWidth*2-1,t.y=-a/r.clientHeight*2+1}var o,u=this.props.robotScene.robots(),l=[],c=new Map,h=s(u);try{for(h.s();!(o=h.n()).done;){var f=o.value;if(f.visible()){var d,p=s(f.meshes());try{for(p.s();!(d=p.n()).done;){var v=d.value;v.visible&&(c.set(v,f),l.push(v))}}catch(Fq){p.e(Fq)}finally{p.f()}}}}catch(Fq){h.e(Fq)}finally{h.f()}this._raycaster.setFromCamera(t,this._orbitCamera);var m=this._raycaster.intersectObjects(l);if(m.length>0){var g=m[0],y=c.get(g.object);y?this.canSelectRobot()&&this.props.robotScene.setHoveredRobot(y):(console.error("Intersected object was not a robot!"),this.props.robotScene.setHoveredRobot(void 0)),this.addPointer(this.props.robotScene,g.point)}else this.props.robotScene.setHoveredRobot(void 0),this.removePointer(this.props.robotScene)}}},{key:"onCanvasMouseDown",value:function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");if(t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.canSelectRobot()){var n,r=this.props.robotSceneManager,i=this.props.robotScene,a=s(r.allManagedRobotScenes());try{for(a.s();!(n=a.n()).done;){n.value.setSelectedRobot(void 0)}}catch(Fq){a.e(Fq)}finally{a.f()}i.setSelectedRobot(i.hoveredRobot()),r.setCurrRobotScene(i),void 0===i.hoveredRobot()?void 0!==this.props.setSceneOptionPanelActive&&this.props.setSceneOptionPanelActive():void 0!==this.props.setRobotOptionPanelActive&&this.props.setRobotOptionPanelActive();var o,u=s(r.allManagedRobotScenes());try{for(u.s();!(o=u.n()).done;){var l=o.value;l!==i&&l.setHoveredRobot(void 0)}}catch(Fq){u.e(Fq)}finally{u.f()}}}},{key:"updateOrbitControls",value:function(e,t){var n=this;void 0===this._controls||this._controls.dispose(),this._controls=new K$(this._orbitCamera,t);var r=this._controls.update.bind(this._controls);this._controls.update=function(){var t=r();return n.props.robotSceneManager.setCurrSyncViewpoint([n._orbitCamera.getWorldPosition(new db.Vector3),(new db.Quaternion).setFromEuler(n._orbitCamera.rotation)]),e.render(),t},this._controls.target.y=0,this._controls.enableDamping=!0,this._controls.dampingFactor=.5,this._controls.rotateSpeed=.5,this._controls.update()}},{key:"mount",value:function(e,t){var n=this;t&&(this.initScene(e),this.updateOrbitControls(e,t),this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._syncViewCallback=function(e){var t=br(e,2),r=t[0],i=t[1];n._orbitCamera.position.copy(r),n._orbitCamera.rotation.setFromQuaternion(i),n.props.robotScene.render()},this.props.robotSceneManager.addSyncViewCallback(this._syncViewCallback),this._orbitView=new $$(t,this._orbitCamera,(function(e){var t=Math.floor(e.clientWidth),n=Math.floor(e.clientHeight);e.width===t&&e.height===n||(e.width=t,e.height=n)})),e.addView(this._orbitView),e.render(),t.addEventListener("mouseout",this.onCanvasMouseOut),t.addEventListener("mousemove",this.onCanvasMouseMove),t.addEventListener("click",this.onCanvasMouseDown),this._resize_observer&&this._resize_observer.unobserve(t),this._resize_observer=new ResizeObserver((function(){n.props.robotScene.render()})),this._resize_observer.observe(t))}},{key:"unmount",value:function(e,t){var n;(this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._controls&&(this._controls.dispose(),this._controls=void 0),this._orbitView&&(e.removeView(this._orbitView),this._orbitView=void 0),t)&&(t.removeEventListener("mouseout",this.onCanvasMouseOut),t.removeEventListener("mousemove",this.onCanvasMouseMove),t.removeEventListener("click",this.onCanvasMouseDown),null===(n=this._resize_observer)||void 0===n||n.unobserve(t));this.removePointer(e)}},{key:"componentDidUpdate",value:function(e){e.robotScene!==this.props.robotScene&&(this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current)),this.props.robotScene.isToggleWorldFrame()&&("ROS"===this.props.robotScene.worldFrame()?this._orbitCamera.up.set(0,0,1):this._orbitCamera.up.set(0,1,0),this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current),this.props.robotScene.finishToggleWorldFrame()),this.props.robotScene.isToggleCamera()&&("Orthographic"===this.props.robotScene.cameraType()?this._orbitCamera=this._orthoCamera:this._orbitCamera=this._perspecCamera,this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current),this.props.robotScene.finishToggleCamera())}},{key:"componentDidMount",value:function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.mount(this.props.robotScene,this._canvasRef.current)}},{key:"componentWillUnmount",value:function(){this.unmount(this.props.robotScene,this._canvasRef.current)}},{key:"decomposeId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"dragOverHandler",value:function(e){e.preventDefault()}},{key:"dropHandler",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("text/plain"),n=br(this.decomposeId(t),3),r=n[0],i=n[1],a=n[2],o=this.props.robotSceneManager.robotSceneById(r);if(void 0!==o){var s=o.getRobotByName(i);if(void 0!==s){var u=this.props.robotScene;if(void 0!==a){var l=s.jointMap().get(a);void 0===l&&(l=s.linkMap().get(a)),u===o?u.hasChildTrace(s,l)||u.addChildTrace(s,sR.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),l):u.hasReceivedGhostTrace(s,l)||o.sendGhostTracesTo(s,sR.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),l,u)}else{if(s.controlledCloneInScene(u));else s.addControlledClone(u).setOpacity(.5),u.render()}}}}},{key:"render",value:function(){return(0,rr.jsx)("div",{className:"RobotCanvas",onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),children:(0,rr.jsx)("canvas",{className:"RobotCanvasCanvas",ref:this._canvasRef})})}}]),r}(t.Component),Q$=Wb(5e3),eq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i.prevTimes=void 0,i.prevVals=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i)),i.state={prev_x:null,prev_y:null,margin:{top:20,right:10,bottom:40,left:60},prev_lines:new Map,time_min:-999,time_max:-999,val_concat:[],newCurr:i.props.currTime,mouseXCoord:-1,originalMouseXCoord:-1,currDragItem:null},i.prevTimes=i.props.times,i.prevVals=i.props.vals,i}return(0,l.Z)(r,[{key:"componentDidMount",value:function(){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var e=this.props,t=e.height,n=e.width;n-=20,t-=20;var r=this.drawGraph(!0,!0);r&&TC(this._graphDiv.current).append("svg").attr("width",n).attr("height",t).node().appendChild(r)}},{key:"componentDidUpdate",value:function(e){var t=e.startTime!==this.props.startTime||e.endTime!==this.props.endTime,n=e.lineWidth!==this.props.lineWidth,r=e.axisColor!==this.props.axisColor,i=!Yb().isEqual(new Set(e.line_colors),new Set(this.props.line_colors))&&e.line_colors.length===this.props.line_colors.length,a=e.height!==this.props.height||e.width!==this.props.width;if(e.times!==this.props.times||e.vals!==this.props.vals||a||i||t||n||r){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var o=this.props,s=o.width,u=o.height;s-=20,u-=20;var l=this.drawGraph(t,i,a,n);l&&TC(this._graphDiv.current).append("svg").attr("width",s).attr("height",u).node().appendChild(l)}}},{key:"filterData",value:function(e,t){var n=[],r=[],i=this.props,a=i.times,o=i.vals;if(0===a.length||0===o.length)return[[[0,8]],[[0,8]]];for(var s=0,u=a[0].length-1,l=0;l<a[0].length;l++)if(a[0][l]>=e){s=l;break}for(var c=a[0].length-1;c>=0;c--)if(a[0][c]<=t){u=c;break}for(var h=0;h<a.length;h++){var f=0;n[h]=[],r[h]=[];for(var d=s;d<u;d++)n[h][f]=a[h][d],r[h][f]=o[h][d],f++}return[n,r]}},{key:"prevMapChanged",value:function(){var e=this.props.prev_map,t=this.state.prev_lines;if(0===e.size)return!0;var n,r=s(e);try{for(r.s();!(n=r.n()).done;){if(!(br(n.value,1)[0]in t))return!0}}catch(Fq){r.e(Fq)}finally{r.f()}return!1}},{key:"dragCurr",value:function(e){var t=this.state,n=t.time_min,i=t.time_max,a=t.margin,o=t.mouseXCoord,s=t.originalMouseXCoord,u=t.currDragItem,l=this.props.width-a.right-a.left,c=e.x;if(c>l&&this.state.mouseXCoord<0)this.setState({mouseXCoord:c,currDragItem:"curr"});else{if(c>l){if("curr"!==u)return;c=c-o+s}var h=r.TimeFromXPosition(l,n,i,c);h<n?h=n:h>i&&(h=i),this.props.onCurrChange(h)}}},{key:"dragStart",value:function(e){var t=this.state,n=t.time_min,i=t.time_max,a=t.margin,o=t.mouseXCoord,s=t.originalMouseXCoord,u=t.currDragItem,l=this.props.width-a.right-a.left,c=e.x;if(e.x<0&&(c=0),c>l&&this.state.mouseXCoord<0)this.setState({mouseXCoord:c,currDragItem:"start"});else{if(c>l){if("start"!==u)return;c=c-o+s}var h=r.TimeFromXPosition(l,n,i,c);h>i?h=i:h<n&&(h=n),this.props.onStartChange(h)}}},{key:"dragEnd",value:function(e){var t=this.state,n=t.time_min,i=t.time_max,a=t.margin,o=t.mouseXCoord,s=t.originalMouseXCoord,u=t.currDragItem,l=this.props.width-a.right-a.left,c=e.x;if(c>l&&this.state.mouseXCoord<0)this.setState({mouseXCoord:c,currDragItem:"end"});else{if(c>l){if("end"!==u)return;c=c-o+s}var h=r.TimeFromXPosition(l,n,i,c);h>i?h=i:h<n&&(h=n),this.props.onEndChange(h)}}},{key:"currMouse",value:function(e){this.setState({originalMouseXCoord:e.x})}},{key:"endMouse",value:function(e){this.setState({mouseXCoord:-1,originalMouseXCoord:-1})}},{key:"createOnClickHandler",value:function(e){var t=this;return function(){t.props.onDeleteChange&&t.props.onDeleteChange(e)}}},{key:"drawGraph",value:function(e,t,n,i){for(var a=this,o=this.props,s=(o.times,o.vals,o.startTime),u=o.endTime,l=o.currTime,c=(o.isZoom,o.isTimeWarp),h=(o.isDiff,o.line_names,o.line_colors),f=o.prev_map,d=o.line_ids,p=o.title,v=o.lineWidth,m=o.axisColor,g=o.onGraphUpdate,y=this.props.width,b=this.props.height,x=this.prevMapChanged(),w=this.state,_=w.margin,S=w.prev_lines,k=w.prev_x,M=w.prev_y,T=y-_.left-_.right-20,E=b-_.top-_.bottom-20,C=TC(this._graphDiv.current).append("svg").remove().attr("width",T).attr("height",E).append("g").attr("transform","translate(".concat(_.left,",     ").concat(_.top,")")),A=br(this.filterData(s,u),2),R=A[0],P=A[1],L=[r.parseData(R[0],P[0])],O=1;O<R.length;O++)L.push(r.parseData(R[O],P[O]));var N,D,I=FC().on("start",(function(e){a.currMouse(e)})).on("drag",(function(e){a.dragCurr(e)})).on("end",(function(e){a.endMouse(e)})),j=r.concatData(R),F=r.concatData(P),z=(r.xPositionFromTime(T,lk(j),uk(j),s),r.xPositionFromTime(T,lk(j),uk(j),l));r.xPositionFromTime(T,lk(j),uk(j),u);C.append("rect").attr("x",z-1).attr("y",0).attr("width",2).attr("height",E).attr("fill","#b00").attr("fill-opacity","75%"),console.log("width: "+T+" height: "+E),g(!1)||x||e||n||!k||!M||i?(N=BA().range([0,T]).domain(sk(j)),D=BA().range([E,0]).domain(sk(F))):(N=k,D=M);var B,U=bk(N).tickSize(0).tickPadding(10).tickValues(ck(lk(j),uk(j)+(uk(j)-lk(j))/8,(uk(j)-lk(j))/8)),V=xk(D).tickSize(0).tickPadding(10).tickValues(ck(lk(F),uk(F)+(uk(F)-lk(F))/8,(uk(F)-lk(F))/8)),G=C.append("g").attr("transform","translate(0, ".concat(E,")")).classed("GraphAxis",!0).call(U),H=C.append("g").classed("GraphAxis",!0).call(V),W=V.tickSizeInner(-T).tickPadding(10).tickFormat("").tickSizeOuter(0),Z=C.append("g").classed("GraphGrid",!0).call(W);H.select(".domain").attr("stroke-width",0),Z.select(".domain").attr("stroke-width",0),G.selectAll("line, path").style("stroke",m),H.selectAll("line, path").style("stroke",m),Z.selectAll("line, path").style("stroke",m),G.selectAll("text").style("fill",m),H.selectAll("text").style("fill",m);var $=rR().x((function(e){return N(e.times)})).y((function(e){return D(e.vals)}));if(c){if(2===L.length){var q=C.append("path").remove().append("path").data([L[1]]).attr("class","line").attr("fill","none").attr("stroke",h[1]).attr("stroke-width",v).attr("d",$).node();C.node().appendChild(q);var X=C.append("path").remove().append("path").data([L[0]]).attr("class","line").attr("fill","none").attr("stroke",h[0]).attr("stroke-width",v).attr("d",$).node();C.node().appendChild(X)}}else for(var Y=0;Y<L.length;Y++)if(B=d[Y],-1===f.get(B)||!S.has(B)||e||t||n||g(!1)||i){var K=C.append("path").remove().append("path").data([L[Y]]).attr("class","line").attr("fill","none").attr("stroke",h[Y]).attr("stroke-width",v).attr("d",$).node();C.node().appendChild(K),S.set(B,K)}else C.node().appendChild(S.get(B));var J="Time",Q=p;return c&&(J="Base Scene Time",Q="Time Warped Scene Time"),C.append("text").attr("class","xLabel").attr("fill",m).attr("text-anchor","middle").attr("x",.5*T).attr("y",E+35).text(J),C.append("text").attr("class","yLabel").attr("fill",m).attr("text-anchor","middle").attr("y",-45).attr("x",-.5*E).attr("transform","rotate(-90)").text(Q),C.append("rect").attr("x",z-20).attr("y",0).attr("width",40).attr("height",E).attr("fill","#b00").attr("fill-opacity","0%").call(I),this.setState({prev_lines:S,prev_x:N,prev_y:D,time_min:lk(j),time_max:uk(j)}),g(!0),C.node()}},{key:"render",value:function(){var e=this.props,t=e.isZoom,n=e.isDiff,r=e.isTimeWarp,i=e.times,a=e.title,o=(e.selected,{display:"inline-block",marginBottom:"10px",color:e.axisColor});return(0,rr.jsxs)("div",{children:[t&&!n&&!r&&0!==i.length&&(0,rr.jsx)("p",{style:o,children:"Zoomed-in Pos/Vel/Acc/Jerk Graph"}),!t&&n&&!r&&(0,rr.jsx)("div",{style:{textAlign:"center"},children:(0,rr.jsxs)("p",{style:o,children:[a," Difference Graph"]})}),!t&&!n&&r&&(0,rr.jsxs)("p",{style:o,children:[a," Graph"]}),(0,rr.jsx)("div",{className:"lineGraph",ref:this._graphDiv})]})}}],[{key:"parseData",value:function(e,t){if(void 0==e||void 0==t)return Q$("ERROR: undefined arrays!"),[];if(e.length!==t.length)return Q$("ERROR: parseData param arrays length discrepancy"),[{times:-99999,vals:0}];for(var n=[],r=0;r<e.length;r++)n.push({times:e[r],vals:t[r]});return n}},{key:"concatData",value:function(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},{key:"xPositionFromTime",value:function(e,t,n,r){return(r-t)/(n-t)*e}},{key:"TimeFromXPosition",value:function(e,t,n,r){var i=r/e*(n-t);return i>n?i=n:i<t&&(i=t),i}}]),r}(t.Component),tq=Wb(5e3),nq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.times=void 0,i.values=void 0,i.clickHandler=function(e){var t,n=document.querySelectorAll(".RobotCanvasCanvas");n.forEach((function(e){return e.classList.remove("selected")})),(n=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(t=i._graphDiv.current)||void 0===t||t.classList.add("selected"),i.props.graph.setCurrProperty(i.state.currProperty),i.props.robotSceneManager.setCurrGraph(i.props.graph.id()),i.props.setGraphOptionPanelActive()},i.getPositions.bind((0,c.Z)(i)),i.fillGraphData.bind((0,c.Z)(i));var a=i.props.robotSceneManager;return i.state={counter:0,graph_list:new Map,prev_times:{start:a.currStartTime(),end:a.currEndTime(),curr:a.currTime()},use_timeWarp:!1,line_names:[],line_ids:[],color_map:new Map,refresh:!1,currObjects:new Set,currProperty:i.props.graph.currProperty(),currScene:void 0,panelHeight:200,panelWidth:300,is_part_changed:new Map,need_update:!0,graph_update:!1,filter:i.props.graph.filter(),velocity_map:new Map,acceleration_map:new Map},i.times=[],i.values=[],i._graphDiv=(0,t.createRef)(),i}return(0,l.Z)(r,[{key:"getPositions",value:function(e,t,n,r,i,a){var o,s,u=this.props.robotSceneManager,l=u.robotSceneById(e),c=u.startTime(),h=u.endTime(),f=l.timeWarping();if(s=a&&f?f.timeWarpMap()[1]:sR.frameRange(c,h,20,2e3),void 0===n)return[(o=l.frameDataFor(t,s,void 0)).times,this.getNumArr(o.robotPositions,i)];if(n instanceof fS)return console.log("robot link"),[(o=l.frameDataFor(t,s,n)).times,this.getNumArr(o.linkPositions,i)];if(n instanceof hS)return console.log("robot joint"),o=l.frameDataFor(t,s,n),console.log("positions"),console.log(o),r?[o.times,o.jointAngles]:[o.times,this.getNumArr(o.jointPositions,i)];throw new Error("Unknown robot part type")}},{key:"getNumArr",value:function(e,t){var n=[];if("magnitude"===t)for(var r=0;r<e.length;r++){var i=e[r].x,a=e[r].y,o=e[r].z;n.push(Math.sqrt(i*i+a*a+o*o))}else for(var s=0;s<e.length;s++)n.push(e[s][t]);return n}},{key:"isAllJoints",value:function(e,t,n,r){if("x"!==n&&"y"!==n&&"z"!==n&&"angle"!==n&&"magnitude"!==n)return tq("invalid type in isAllJoints"),!1;var i,a=s(e.jointMap());try{for(a.s();!(i=a.n()).done;){var o=br(i.value,1)[0];if(!t.has(o))return!1;if("angle"===n){if("position"===r&&!t.get(o).angle[0])return!1;if("velocity"===r&&!t.get(o).angle[1])return!1;if("acceleration"===r&&!t.get(o).angle[2])return!1;if("jerk"===r&&!t.get(o).angle[3])return!1}else{if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(o).position_type.includes(n)||"position"!==r))return!1;if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(o).velocity_type.includes(n)||"velocity"!==r))return!1;if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(o).acceleration_type.includes(n)||"acceleration"!==r))return!1;if(("x"===n||"y"===n||"z"===n||"magnitude"===n)&&!t.get(o).jerk_type.includes(n)&&"jerk"===r)return!1}}}catch(Fq){a.e(Fq)}finally{a.f()}return!0}},{key:"onGraphUpdate",value:function(e){var t=this.state.graph_update;return e?(this.setState({graph_update:!1}),!1):t}},{key:"booleanSum",value:function(e){var t,n=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=Number(i)}}catch(Fq){r.e(Fq)}finally{r.f()}return n}},{key:"isPartChanged",value:function(){var e,t=s(this.state.is_part_changed);try{for(t.s();!(e=t.n()).done;){if(-1===br(e.value,2)[1])return!0}}catch(Fq){t.e(Fq)}finally{t.f()}return!1}},{key:"genChangeData",value:function(e,t,n){void 0===n&&(n=this.state.filter);var r=[];r[0]=[],r[1]=[];for(var i=[];n&&n>0&&t.length>1;){i[0]=t[0]/4+t[0]/2+t[1]/4;for(var a=1;a<t.length-1;a++)i[a]=t[a-1]/4+t[a]/2+t[a+1]/4;i[t.length-1]=t[t.length-1]/4+t[t.length-1]/2+t[t.length-2]/4,t=Yb().cloneDeep(i),n--}for(var o=0;o<e.length-1;o++)r[0][o]=e[o],r[1][o]=(t[o+1]-t[o])/(e[o+1]-e[o]);return r[0][e.length-1]=e[e.length-1],r[1][e.length-1]=r[1][e.length-2],r}},{key:"getPositionVector",value:function(e,t,n,r){var i,a,o=this.props.robotSceneManager,s=o.robotSceneById(e),u=o.startTime(),l=o.endTime(),c=s.timeWarping();if(a=r&&c?c.timeWarpMap()[1]:sR.frameRange(u,l,20,2e3),void 0===n)return[(i=s.frameDataFor(t,a,void 0)).times,i.robotPositions];if(n instanceof fS)return[(i=s.frameDataFor(t,a,n)).times,i.linkPositions];if(n instanceof hS)return[(i=s.frameDataFor(t,a,n)).times,i.jointPositions];throw new Error("Unknown robot part type")}},{key:"getVectorArray",value:function(e){for(var t=[[],[],[]],n=0;n<e.length;n++)t[0].push(e[n].x),t[1].push(e[n].y),t[2].push(e[n].z);return t}},{key:"getVelocityVector",value:function(e,t,n,r,i){var a=this.getPositionVector(e,t,n,r),o=br(this.getVectorArray(a[1]),3),s=o[0],u=o[1],l=o[2],c=this.genChangeData(a[0],s)[1],h=this.genChangeData(a[0],u)[1],f=this.genChangeData(a[0],l)[1];return[a[0],c,h,f]}},{key:"getAccelerationVector",value:function(e,t,n,r,i){var a=br(this.getVelocityVector(e,t,n,r,i),4),o=a[0],s=a[1],u=a[2],l=a[3];return[o,this.genChangeData(o,s)[1],this.genChangeData(o,u)[1],this.genChangeData(o,l)[1]]}},{key:"getJerkVector",value:function(e,t,n,r,i){var a=br(this.getAccelerationVector(e,t,n,r,i),4),o=a[0],s=a[1],u=a[2],l=a[3];return[o,this.genChangeData(o,s)[1],this.genChangeData(o,u)[1],this.genChangeData(o,l)[1]]}},{key:"calculateMagitude",value:function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Math.sqrt(e[i]*e[i]+t[i]*t[i]+n[i]*n[i]));return r}},{key:"fillTimeValData",value:function(e,t,n,r){t.push(r),n.push(e)}},{key:"checkId",value:function(e,t,n){if(!t.has(e.value)){if(!t.has(e.value+"&tw"))return console.log("Error: ".concat(e," does not exist in is_part_changed but in graph_list!")),!1;n.value=!0,e.value+="&tw"}return!0}},{key:"fillGraphData",value:function(e,t,n){var r=this.state,i=r.graph_list,a=r.is_part_changed,o=r.color_map,u=(r.currScene,r.refresh),l=r.velocity_map,c=r.acceleration_map,h=this.props.robotSceneManager,f=this.props.graph,d=this.times,p=this.values,v=0,m=[],g=[],y=[],b=[],x=new Map,w="",_="",S=this.state.use_timeWarp,k=new Map;u||(x=Yb().cloneDeep(o));var M,T=s(i);try{for(T.s();!(M=T.n()).done;){for(var E=br(M.value,2),C=E[0],A=E[1],R=br(C.split("#"),2),P=R[0],L=R[1],O=A.position_type,N=A.velocity_type,D=A.acceleration_type,I=A.jerk_type,j=0;j<O.length;j++){var F;if(console.log("object position"+C),_="".concat(C,"&").concat(O[j],"&position"),this.checkId({value:_},a,{value:S})){var z=a.get(_);if(-1===z||n){var B=this.getPositions(P,A.robot,void 0,!1,O[j],S);m[v]=B[0],g[v]=B[1]}else m[v]=d[z],g[v]=p[z];k.set(O[j],v),a.set(_,v),w="".concat(null===(F=h.robotSceneById(P))||void 0===F?void 0:F.name(),"_").concat(L,"_").concat(O[j],"_Cartesian position").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var U=0;U<N.length;U++){var V;if(S=!1,console.log("object velocity"+C),_="".concat(C,"&").concat(N[U],"&velocity"),this.checkId({value:_},a,{value:S})){var G=a.get(_);if(-1===G||n)if("magnitude"===N[U]){var H=this.getVelocityVector(P,A.robot,void 0,S);m[v]=H[0],g[v]=this.calculateMagitude(H[1],H[2],H[3])}else{var W=void 0,Z=k.get(N[U]);W=Z?[m[Z],g[Z]]:this.getPositions(P,A.robot,void 0,!1,N[U],S);var $=this.genChangeData(W[0],W[1]);l.set(C+"&"+N[U],this.genChangeData(W[0],W[1],0)),m[v]=$[0],g[v]=$[1]}else m[v]=d[G],g[v]=p[G];a.set(_,v),w="".concat(null===(V=h.robotSceneById(P))||void 0===V?void 0:V.name(),"_").concat(L,"_").concat(N[U],"_Cartesian velocity").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var q=0;q<D.length;q++){var X;if(S=!1,console.log("object acceleration"+C),_="".concat(C,"&").concat(D[q],"&acceleration"),this.checkId({value:_},a,{value:S})){var Y=a.get(_);if(-1===Y||n)if("magnitude"===D[q]){var K=this.getAccelerationVector(P,A.robot,void 0,S);m[v]=K[0],g[v]=this.calculateMagitude(K[1],K[2],K[3])}else{var J=void 0,Q=l.get(_);if(Q)J=[Q[0],Q[1]];else{tq("no index for velocity");var ee=void 0,te=k.get(D[q]);te?(tq("has position"),ee=[m[te],g[te]]):(tq("no index for position"),ee=this.getPositions(P,A.robot,void 0,!1,D[q],S)),tq("computed velocity");var ne=this.genChangeData(ee[0],ee[1],0);l.set(C+"&"+D[q],ne),J=[ne[0],ne[1]]}var re=this.genChangeData(J[0],J[1]);c.set(C+"&"+D[q],this.genChangeData(J[0],J[1],0)),m[v]=re[0],g[v]=re[1]}else m[v]=d[Y],g[v]=p[Y];a.set(_,v),w="".concat(null===(X=h.robotSceneById(P))||void 0===X?void 0:X.name(),"_").concat(L,"_").concat(D[q],"_Cartesian acceleration").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var ie=0;ie<I.length;ie++){var ae;if(console.log("object jerk"+C),S=!1,_="".concat(C,"&").concat(I[ie],"&jerk"),this.checkId({value:_},a,{value:S})){var oe=a.get(_);if(-1===oe||n)if("magnitude"===I[ie]){var se=this.getJerkVector(P,A.robot,void 0,S);m[v]=se[0],g[v]=this.calculateMagitude(se[1],se[2],se[3])}else{var ue=void 0,le=c.get(C+"&"+I[ie]);if(le)ue=[le[0],le[1]];else{var ce=void 0,he=l.get(C+"&"+I[ie]);if(he)ce=[he[0],he[1]];else{var fe=void 0,de=k.get(I[ie]);fe=de?[m[de],g[de]]:this.getPositions(P,A.robot,void 0,!1,I[ie],S);var pe=this.genChangeData(fe[0],fe[1],0);l.set(C+"&"+I[ie],pe),ce=[pe[0],pe[1]]}var ve=this.genChangeData(ce[0],ce[1],0);c.set(C+"&"+I[ie],ve),ue=[ve[0],ve[1]]}var me=this.genChangeData(ue[0],ue[1]);m[v]=me[0],g[v]=me[1]}else m[v]=d[oe],g[v]=p[oe];a.set(_,v),w="".concat(null===(ae=h.robotSceneById(P))||void 0===ae?void 0:ae.name(),"_").concat(L,"_").concat(I[ie],"_Cartesian jerk").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}var ge,ye=s(A.robotParts);try{for(ye.s();!(ge=ye.n()).done;){var be=br(ge.value,2),xe=be[0],we=be[1];if(S=!1,we.angle[0]){var _e;if(_=C+"&"+xe+"&angle&position",!this.checkId({value:_},a,{value:S}))continue;var Se=a.get(_);if(-1===Se||n){console.log("filter changes");var ke=this.getPositions(P,A.robot,we.robotPart,!0,"x",S);m[v]=ke[0],g[v]=ke[1]}else m[v]=d[Se],g[v]=p[Se];a.set(_,v),w="".concat(null===(_e=h.robotSceneById(P))||void 0===_e?void 0:_e.name(),"_").concat(L,"_\n").concat(xe,"_joint_position").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}if(we.angle[1]){var Me;if(_=C+"&"+xe+"&angle&velocity",!this.checkId({value:_},a,{value:S}))continue;var Te=a.get(_);if(-1===Te||n){var Ee=void 0;Ee=we.angle[0]?[m[v-1],g[v-1]]:this.getPositions(P,A.robot,we.robotPart,!0,"x",S);var Ce=this.genChangeData(Ee[0],Ee[1]);m[v]=Ce[0],g[v]=Ce[1]}else m[v]=d[Te],g[v]=p[Te];a.set(_,v),w="".concat(null===(Me=h.robotSceneById(P))||void 0===Me?void 0:Me.name(),"_").concat(L,"_\n").concat(xe,"_joint_velocity").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}if(we.angle[2]){var Ae,Re=C+"&"+xe+"&angle";if(_=Re+"&acceleration",!this.checkId({value:_},a,{value:S}))continue;var Pe=a.get(_);if(-1===Pe||n){var Le=void 0,Oe=l.get(Re);if(Oe)Le=[Oe[0],Oe[1]];else{console.log("no cache for velocity "+Re);var Ne=void 0,De=a.get(Re+"&position");De?(console.log("has position"),Ne=[m[De],g[De]]):Ne=this.getPositions(P,A.robot,we.robotPart,!0,"x",S),console.log(m);var Ie=this.genChangeData(Ne[0],Ne[1],0);l.set(Re,Ie),Le=[Ie[0],Ie[1]]}var je=this.genChangeData(Le[0],Le[1]);c.set(Re,this.genChangeData(Le[0],Le[1],0)),m[v]=je[0],g[v]=je[1]}else m[v]=d[Pe],g[v]=p[Pe];a.set(_,v),w="".concat(null===(Ae=h.robotSceneById(P))||void 0===Ae?void 0:Ae.name(),"_").concat(L,"_\n").concat(xe,"_joint_acceleration").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}if(we.angle[3]){var Fe,ze=C+"&"+xe+"&angle";if(_=ze+"&jerk",!this.checkId({value:_},a,{value:S}))continue;var Be=a.get(_);if(-1===Be||n){var Ue=void 0,Ve=c.get(ze);if(Ve)Ue=[Ve[0],Ve[1]];else{var Ge=void 0,He=l.get(ze);if(He)Ge=[He[0],He[1]];else{tq("no cache for velocity "+ze);var We=void 0,Ze=a.get(ze+"&position");Ze?(tq("has position"),We=[m[Ze],g[Ze]]):We=this.getPositions(P,A.robot,we.robotPart,!0,"x",S),tq("computed velocity");var $e=this.genChangeData(We[0],We[1],0);l.set(ze,$e),Ge=[$e[0],$e[1]]}var qe=this.genChangeData(Ge[0],Ge[1]);c.set(ze,this.genChangeData(Ge[0],Ge[1],0)),Ue=[qe[0],qe[1]]}var Xe=this.genChangeData(Ue[0],Ue[1]);c.set(ze,this.genChangeData(Ue[0],Ue[1],0)),m[v]=Xe[0],g[v]=Xe[1]}else m[v]=d[Be],g[v]=p[Be];a.set(_,v),w="".concat(null===(Fe=h.robotSceneById(P))||void 0===Fe?void 0:Fe.name(),"_").concat(L,"_\n").concat(xe,"_joint_jerk").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}for(var Ye=we.position_type,Ke=we.velocity_type,Je=we.acceleration_type,Qe=we.jerk_type,et=new Map,tt=0;tt<Ye.length;tt++){var nt;if(S=!1,_=C+"&"+xe+"&"+Ye[tt]+"&position",console.log("id is "+_),this.checkId({value:_},a,{value:S})){var rt=a.get(_);if(console.log("generate positions"),-1===rt||n){console.log("new one");var it=this.getPositions(P,A.robot,we.robotPart,!1,Ye[tt],S);console.log("positions"),console.log(it),m[v]=it[0],g[v]=it[1]}else console.log("old one"),m[v]=d[rt],g[v]=p[rt];et.set(Ye[tt],v),a.set(_,v),w="".concat(null===(nt=h.robotSceneById(P))||void 0===nt?void 0:nt.name(),"_").concat(L,"_").concat(xe,"_").concat(Ye[tt],"_Cartesian position").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var at=0;at<Ke.length;at++){var ot;S=!1;var st=C+"&"+xe+"&"+Ke[at];if(_=st+"&velocity",console.log(_),this.checkId({value:_},a,{value:S})){var ut=a.get(_);if(-1===ut||n)if("magnitude"===Ke[at]){var lt=this.getVelocityVector(P,A.robot,we.robotPart,S);m[v]=lt[0],g[v]=this.calculateMagitude(lt[1],lt[2],lt[3])}else{var ct=void 0,ht=et.get(Ke[at]);ct=ht?[m[ht],g[ht]]:this.getPositions(P,A.robot,we.robotPart,!1,Ke[at],S);var ft=this.genChangeData(ct[0],ct[1]);l.set(st,this.genChangeData(ct[0],ct[1],0)),m[v]=ft[0],g[v]=ft[1]}else m[v]=d[ut],g[v]=p[ut];a.set(_,v),w="".concat(null===(ot=h.robotSceneById(P))||void 0===ot?void 0:ot.name(),"_").concat(L,"_").concat(xe,"_").concat(Ke[at],"_Cartesian velocity").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var dt=0;dt<Je.length;dt++){var pt;S=!1;var vt=C+"&"+xe+"&"+Je[dt];if(_="".concat(vt,"&acceleration"),this.checkId({value:_},a,{value:S})){var mt=a.get(_);if(-1===mt||n)if("magnitude"===Je[dt]){var gt=this.getAccelerationVector(P,A.robot,we.robotPart,S);m[v]=gt[0],g[v]=this.calculateMagitude(gt[1],gt[2],gt[3])}else{var yt=void 0,bt=l.get(vt);if(bt)yt=[bt[0],bt[1]];else{tq("no cache for velocity "+vt);var xt=void 0,wt=et.get(Je[dt]);wt?(tq("has position"),xt=[m[wt],g[wt]]):(tq("no index for position"),xt=this.getPositions(P,A.robot,we.robotPart,!1,Je[dt],S)),tq("computed velocity");var _t=this.genChangeData(xt[0],xt[1],0);l.set(vt,_t),yt=[_t[0],_t[1]]}var St=this.genChangeData(yt[0],yt[1]);c.set(vt,this.genChangeData(yt[0],yt[1],0)),m[v]=St[0],g[v]=St[1]}else m[v]=d[mt],g[v]=p[mt];a.set(_,v),w="".concat(null===(pt=h.robotSceneById(P))||void 0===pt?void 0:pt.name(),"_").concat(L,"_").concat(xe,"_").concat(Je[dt],"_Cartesian acceleration").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}for(var kt=0;kt<Qe.length;kt++){var Mt;S=!1;var Tt=C+"&"+xe+"&"+Qe[kt];if(_="".concat(Tt,"&jerk"),this.checkId({value:_},a,{value:S})){var Et=a.get(_);if(-1===Et||n)if("magnitude"===Je[kt]){var Ct=this.getJerkVector(P,A.robot,we.robotPart,S);m[v]=Ct[0],g[v]=this.calculateMagitude(Ct[1],Ct[2],Ct[3])}else{var At=void 0,Rt=c.get(Tt);if(Rt)At=[Rt[0],Rt[1]];else{var Pt=void 0,Lt=l.get(Tt);if(Lt)Pt=[Lt[0],Lt[1]];else{var Ot=void 0,Nt=et.get(Qe[kt]);Ot=Nt?[m[Nt],g[Nt]]:this.getPositions(P,A.robot,we.robotPart,!1,Qe[kt],S);var Dt=this.genChangeData(Ot[0],Ot[1],0);l.set(Tt,Dt),Pt=[Dt[0],Dt[1]]}var It=this.genChangeData(Pt[0],Pt[1],0);c.set(Tt,It),At=[It[0],It[1]]}var jt=this.genChangeData(At[0],At[1]);m[v]=jt[0],g[v]=jt[1]}else m[v]=d[Et],g[v]=p[Et];a.set(_,v),w="".concat(null===(Mt=h.robotSceneById(P))||void 0===Mt?void 0:Mt.name(),"_").concat(L,"_").concat(xe,"_").concat(Qe[kt],"_Cartesian jerk").concat(S?"_tw":""),this.fillTimeValData(_,y,b,w),x.has(_)||x.set(_,f.getColor()),v++}}}}catch(Fq){ye.e(Fq)}finally{ye.f()}}}catch(Fq){T.e(Fq)}finally{T.f()}d=m,p=g,this.times=d,this.values=p,this.setState({prev_times:{start:h.currStartTime(),end:h.currEndTime(),curr:h.currTime()},line_names:y,line_ids:b,color_map:x,refresh:!1,is_part_changed:a,need_update:!1,velocity_map:l,acceleration_map:c}),this.props.graph.setLineNames(y),this.props.graph.setLineIds(b);for(var Ft=[],zt=0,Bt=b;zt<Bt.length;zt++){var Ut=Bt[zt];Ft.push(x.get(Ut))}this.props.graph.setLineColors(Ft)}},{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e,t=this,n=document.querySelectorAll(".RobotCanvasCanvas");n.forEach((function(e){return e.classList.remove("selected")})),(n=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((function(e){t.setState({panelWidth:e[0].contentRect.width,panelHeight:.85*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);var r,i=this.props.graph,a=[],o=s(i.lineIds());try{for(o.s();!(r=o.n()).done;){var u=r.value,l=br(this.decomposeEventName(u),5),c=l[0],h=l[1],f=l[2],d=(l[3],l[4],c+"#"+h+"&"+f);a.push(d)}}catch(Fq){o.e(Fq)}finally{o.f()}this.addNewLines(a,i.currProperty())}},{key:"componentDidUpdate",value:function(e){var t=this.props.graph.deleteLine();if(void 0!==t){var n=br(t.split("&"),4),i=n[0],a=n[1];n[2],n[3];this.state.currObjects.has(i+"&"+a)&&(r.removeRobotPartFromGraph(t,this.props.robotSceneManager),this.state.currObjects.delete(i+"&"+a),this.OnChangeGraph([t],!1),this.props.graph.setDeleteLine(void 0,void 0))}var o=this.state,s=o.prev_times,u=o.refresh,l=o.need_update,c=s.start!==this.props.robotSceneManager.currStartTime()||s.end!==this.props.robotSceneManager.currEndTime();c&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}});var h=s.curr!==this.props.robotSceneManager.currTime();if((h||u||l)&&this.fillGraphData(c,h),this.props.force_update!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph()===this.props.graph){var f=this.props,d=f.eventName,p=f.add;(d!==e.eventName||p!==e.add)&&this.onChangeGraphWithManyLines(d,p),this.props.graph.filter()!==this.state.filter&&(this.setState({filter:this.props.graph.filter()}),this.onChangeFilter(this.props.graph.filter()))}}},{key:"decomposeEventName",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1],i=t[2],a=t[3],o=br(n.split("#"),2);return[o[0],o[1],r,i,a]}},{key:"convertStringToDataType",value:function(e){if("position"!==e&&"velocity"!==e&&"acceleration"!==e&&"jerk"!==e)throw Error("".concat(e," is not a property!!!!"));return e}},{key:"onChangeGraphWithManyLines",value:function(e,t){this.setState({currProperty:e[0]}),this.state.graph_list.clear(),this.props.graph.resetColor(),this.state.color_map.clear(),this.state.is_part_changed.clear();var n,r=[],i=xb(e[0]),a=s(this.state.currObjects);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push(o+i)}}catch(Fq){a.e(Fq)}finally{a.f()}this.OnChangeGraph(r,t)}},{key:"OnChangeGraph",value:function(e,t){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.OnChangeGraphHelper(i,t)}}catch(Fq){r.e(Fq)}finally{r.f()}this.fillGraphData()}},{key:"OnChangeGraphHelper",value:function(e,t){console.log("on change graph called in GraphPanel"),console.log("event name is "+e);var n=this.decomposeEventName(e),i=this.props.robotSceneManager,a=i.robotSceneById(n[0]);if(void 0!=a){console.log("scene id is "+n[0]);var o=n[1];if(void 0!=o){console.log("robot name is "+o);var s=n[2];if(void 0!=s){console.log("part name is "+s);var u=n[3];if(void 0!=u&&(console.log("current specific prop is "+u),"rotation"!==n[4])){var l=this.convertStringToDataType(n[4]);if(void 0!=l){console.log("current data type is "+l);var c=n[0]+"#"+o,h=this.state,f=h.graph_list,d=h.is_part_changed,p=h.use_timeWarp,v=this.state.line_ids,m=a.id().value(),g=f.get(c);if(p&&(e+="&tw"),v.includes(e)?d.set(e,v.indexOf(e)):d.set(e,-1),t||(d.delete(e),this.state.color_map.delete(e)),g){var y=g.robotParts.get(s);if(y){if("angle"===u)"position"===l?y.angle[0]=!y.angle[0]:"velocity"===l?y.angle[1]=!y.angle[1]:"acceleration"===l?y.angle[2]=!y.angle[2]:"jerk"===l&&(y.angle[3]=!y.angle[3]);else if("x"===u||"y"===u||"z"===u||"magnitude"===u){var b;if("position"===l)b=y.position_type;else if("velocity"===l)b=y.velocity_type;else if("acceleration"===l)b=y.acceleration_type;else{if("jerk"!==l)return void tq("Error: Checkbox invalid data type: "+l);b=y.jerk_type}var x=b.indexOf(u);-1!==x?b.splice(x,1):b.push(u),b.sort(),"position"===l?y.position_type=b:"velocity"===l?y.velocity_type=b:"acceleration"===l?y.acceleration_type=b:"jerk"===l&&(y.jerk_type=b)}y.angle||y.position_type.length||y.velocity_type.length||y.acceleration_type.length||y.jerk_type.length?g.robotParts.set(s,y):g.robotParts.delete(s)}else{var w;if(0===g.robot.jointMap().size&&0===g.robot.linkMap().size)w=void 0;else if(!(w=g.robot.jointMap().get(s))&&!(w=g.robot.linkMap().get(s)))return void tq("Error: robot joint name cannot be found");var _={robotPart:w,position_type:"position"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],velocity_type:"velocity"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],acceleration_type:"acceleration"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],jerk_type:"jerk"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],angle:["position"===l&&"angle"===u,"velocity"===l&&"angle"===u,"acceleration"===l&&"angle"===u,"jerk"===l&&"angle"===u]};g.robotParts.set(s,_)}g.robotParts.size||g.position_type.length||g.velocity_type.length||g.acceleration_type.length||g.jerk_type.length?f.set(c,g):f.delete(c)}else{var S=r.getRobotByName(i.robotSceneById(m),o);if(!S)return void tq("Error: robot name cannot be found");var k,M={robotScene:m,robot:S,position_type:[],velocity_type:[],acceleration_type:[],jerk_type:[],robotParts:new Map};if(0===M.robot.jointMap().size&&0===M.robot.linkMap().size)k=void 0;else if(!(k=M.robot.jointMap().get(s))&&!(k=M.robot.linkMap().get(s)))return void tq("Error: robot joint name cannot be found");var T={robotPart:k,position_type:"position"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],velocity_type:"velocity"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],acceleration_type:"acceleration"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],jerk_type:"jerk"===l&&("x"===u||"y"===u||"z"===u||"magnitude"===u)?[u]:[],angle:["position"===l&&"angle"===u,"velocity"===l&&"angle"===u,"acceleration"===l&&"angle"===u,"jerk"===l&&"angle"===u]};M.robotParts.set(s,T),f.set(c,M)}this.setState({graph_list:f,is_part_changed:d,graph_update:!0})}}}}}}},{key:"onCheckUseTW",value:function(e){var t=this.state.use_timeWarp;this.setState({use_timeWarp:!t,graph_update:!0,need_update:!0})}},{key:"onChangeFilter",value:function(e){console.log("on change filter"),this.setState({filter:e,graph_update:!0}),this.fillGraphData(!1,!1,!0)}},{key:"onCurrTimeChange",value:function(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}},{key:"onStartTimeChange",value:function(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}},{key:"onEndTimeChange",value:function(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}},{key:"onDeleteChange",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1];t[2],t[3];this.state.currObjects.delete(n+"&"+r),this.OnChangeGraph([e],!1)}},{key:"dragOverHandler",value:function(e){e.preventDefault()}},{key:"dropHandler",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("text/plain");this.addNewLines([t],this.state.currProperty)}},{key:"addNewLines",value:function(e,t){var n,r=xb(t),i=this.state.currObjects,a=[],o=s(e);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!i.has(u)){i.add(u);var l=br(this.decomposeId(u),3),c=l[0],h=l[1],f=l[2],d=this.props.robotSceneManager,p=d.robotSceneById(c);if(void 0!==p){d.isActiveRobotScene(p)||d.activateRobotScene(p);var v=p.getJointByName(h,f);if(void 0===v&&(v=p.getLinkByName(h,f)),void 0!==v)v.addToGraph();else{var m=p.getRobotByName(h);void 0!==m&&m.addToGraph()}}a.push(u+r)}}}catch(Fq){o.e(Fq)}finally{o.f()}a.length>0&&this.OnChangeGraph(a,!0)}},{key:"decomposeId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"render",value:function(){var e,t=this,n=this.times,r=this.values,i=this.state,a=i.color_map,o=i.is_part_changed,u=i.prev_times,l=i.panelHeight,c=i.panelWidth,h=i.currProperty,f=i.line_names,d=i.line_ids,p=[],v=s(d);try{for(v.s();!(e=v.n()).done;){var m=e.value;p.push(a.get(m))}}catch(Fq){v.e(Fq)}finally{v.f()}var g=br(h.split("&"),3),y=g[1],b=g[2],x=b+" in "+y;"rotation"===b&&(x="the rotation can only be shown in difference"),b.startsWith("joint")&&(x=b);var w=this.props.robotSceneManager.getCurrGraph()===this.props.graph;return(0,rr.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,rr.jsxs)("div",{className:"LegendMessage",children:[(0,rr.jsx)(fV,{buttonValue:"Legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){return["LineGraphLegend&".concat(Lb(4),"&").concat(t.props.graph.id()),function(e){}]}}),(0,rr.jsx)("div",{className:"PopUpGroup",children:(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.GraphPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})})]}),(0,rr.jsx)(eq,{times:n,vals:r,startTime:u.start,endTime:u.end,currTime:u.curr,isZoom:!1,isDiff:!1,isTimeWarp:!1,line_names:f,line_colors:p,title:x,width:c,height:l,line_ids:d,prev_map:o,selected:w,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this),onDeleteChange:this.onDeleteChange.bind(this)})]})}}],[{key:"getRobotByName",value:function(e,t){for(var n=e.robots(),r=0;r<n.length;r++)if(n[r].name()===t)return n[r]}},{key:"removeRobotPartFromGraph",value:function(e,t){var n=br(e.split("#"),2),r=n[0],i=br(n[1].split("&"),3),a=i[0],o=i[1],s=t.robotSceneById(r);if(void 0!==s){var u=s.getJointByName(a,o);if(void 0===u&&(u=s.getLinkByName(a,o)),void 0!==u)u.removeFromGraph();else{var l=s.getRobotByName(a);void 0!==l&&l.removeFromGraph()}dr.render(),dr.updateUI(),console.log(u)}}}]),r}(t.Component),rq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.times=void 0,i.values=void 0,i.line_ids_diff=[],i.currProperty=void 0,i.clickHandler=function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=i._graphDiv.current)||void 0===e||e.classList.add("selected"),i.props.setGraphOptionPanelActive(),i.props.graph.setCurrProperty(i.currProperty),i.props.robotSceneManager.setCurrGraph(i.props.graph.id())},i.fillGraphData.bind((0,c.Z)(i));var a=i.props.robotSceneManager;return i.state={counter:0,diff_times:[],diff_values:[],line_names_diff:[],line_ids:[],prev_times:{start:a.currStartTime(),end:a.currEndTime(),curr:a.currTime()},use_timeWarp:!1,color_map:new Map,currObjects:[],panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1,is_part_changed:new Map,filter:i.props.graph.filter()},i._graphDiv=(0,t.createRef)(),i.times=[],i.values=[],i.currProperty=i.props.graph.currProperty(),i}return(0,l.Z)(r,[{key:"onGraphUpdate",value:function(e){var t=this.state.graph_update;return e?(this.setState({graph_update:!1}),!1):t}},{key:"getRotations",value:function(e,t,n,r){var i,a,o=this.props.robotSceneManager,s=o.robotSceneById(e),u=o.startTime(),l=o.endTime(),c=s.timeWarping();if(a=r&&c?c.timeWarpMap()[1]:sR.frameRange(u,l,20,2e3),void 0===n)return[(i=s.frameDataFor(t,a,void 0)).times,i.robotRotations];if(n instanceof fS)return[(i=s.frameDataFor(t,a,n)).times,i.linkRotations];if(n instanceof hS)return[(i=s.frameDataFor(t,a,n)).times,i.jointRotations];throw new Error("Unknown robot part type")}},{key:"getPositions",value:function(e,t,n,r,i,a){var o,s,u=this.props.robotSceneManager,l=u.robotSceneById(e),c=u.startTime(),h=u.endTime(),f=l.timeWarping();if(s=a&&f?f.timeWarpMap()[1]:sR.frameRange(c,h,20,2e3),void 0===n)return[(o=l.frameDataFor(t,s,void 0)).times,this.getNumArr(o.robotPositions,i)];if(n instanceof fS)return[(o=l.frameDataFor(t,s,n)).times,this.getNumArr(o.linkPositions,i)];if(n instanceof hS)return o=l.frameDataFor(t,s,n),r?[o.times,o.jointAngles]:[o.times,this.getNumArr(o.jointPositions,i)];throw new Error("Unknown robot part type")}},{key:"getVelocity",value:function(e,t,n,r,i,a){if("magnitude"===i){var o=this.getVelocityVector(e,t,n,a);return[o[0],this.calculateMagitude(o[1],o[2],o[3])]}var s=this.getPositions(e,t,n,r,i,a);return this.genChangeData(s[0],s[1])}},{key:"getAcceleration",value:function(e,t,n,r,i,a){if("magnitude"===i){var o=this.getAccelerationVector(e,t,n,a);return[o[0],this.calculateMagitude(o[1],o[2],o[3])]}var s=this.getVelocity(e,t,n,r,i,a);return this.genChangeData(s[0],s[1])}},{key:"getJerk",value:function(e,t,n,r,i,a){if("magnitude"===i){var o=this.getJerkVector(e,t,n,a);return[o[0],this.calculateMagitude(o[1],o[2],o[3])]}var s=this.getAcceleration(e,t,n,r,i,a);return this.genChangeData(s[0],s[1])}},{key:"getPositionVector",value:function(e,t,n,r){var i,a,o=this.props.robotSceneManager,s=o.robotSceneById(e),u=o.startTime(),l=o.endTime(),c=s.timeWarping();if(a=r&&c?c.timeWarpMap()[1]:sR.frameRange(u,l,20,2e3),void 0===n)return[(i=s.frameDataFor(t,a,void 0)).times,i.robotPositions];if(n instanceof fS)return[(i=s.frameDataFor(t,a,n)).times,i.linkPositions];if(n instanceof hS)return[(i=s.frameDataFor(t,a,n)).times,i.jointPositions];throw new Error("Unknown robot part type")}},{key:"getVectorArray",value:function(e){for(var t=[[],[],[]],n=0;n<e.length;n++)t[0].push(e[n].x),t[1].push(e[n].y),t[2].push(e[n].z);return t}},{key:"getVelocityVector",value:function(e,t,n,r,i){var a=this.getPositionVector(e,t,n,r),o=br(this.getVectorArray(a[1]),3),s=o[0],u=o[1],l=o[2],c=this.genChangeData(a[0],s)[1],h=this.genChangeData(a[0],u)[1],f=this.genChangeData(a[0],l)[1];return[a[0],c,h,f]}},{key:"getAccelerationVector",value:function(e,t,n,r,i){var a=br(this.getVelocityVector(e,t,n,r,i),4),o=a[0],s=a[1],u=a[2],l=a[3];return[o,this.genChangeData(o,s)[1],this.genChangeData(o,u)[1],this.genChangeData(o,l)[1]]}},{key:"getJerkVector",value:function(e,t,n,r,i){var a=br(this.getAccelerationVector(e,t,n,r,i),4),o=a[0],s=a[1],u=a[2],l=a[3];return[o,this.genChangeData(o,s)[1],this.genChangeData(o,u)[1],this.genChangeData(o,l)[1]]}},{key:"calculateMagitude",value:function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Math.sqrt(e[i]*e[i]+t[i]*t[i]+n[i]*n[i]));return r}},{key:"getPositionsBounded",value:function(e,t,n,r,i,a){var o,s,u,l=this.props.robotSceneManager,c=l.robotSceneById(e),h=l.currStartTime(),f=l.currEndTime()+.1;a?s=sR.frameRange(h,f,20,2e3,null===(u=c.timeWarping())||void 0===u?void 0:u.timeWarp):s=sR.frameRange(h,f,20,2e3);if(void 0===n)return[(o=c.frameDataFor(t,s,void 0)).times,this.getNumArr(o.robotPositions,i)];if(n instanceof fS)return[(o=c.frameDataFor(t,s,n)).times,this.getNumArr(o.linkPositions,i)];if(n instanceof hS)return o=c.frameDataFor(t,s,n),r?[o.times,o.jointAngles]:[o.times,this.getNumArr(o.jointPositions,i)];throw new Error("Unknown robot part type")}},{key:"getNumArr",value:function(e,t){var n=[];if("magnitude"===t)for(var r=0;r<e.length;r++){var i=e[r].x,a=e[r].y,o=e[r].z;n.push(Math.sqrt(i*i+a*a+o*o))}else for(var s=0;s<e.length;s++)n.push(e[s][t]);return n}},{key:"genChangeData",value:function(e,t,n){void 0===n&&(n=this.state.filter);var r=[[],[]];r[0]=[],r[1]=[];for(var i=[];n&&n>0&&t.length>1;){i[0]=t[0]/4+t[0]/2+t[1]/4;for(var a=1;a<t.length-1;a++)i[a]=t[a-1]/4+t[a]/2+t[a+1]/4;i[t.length-1]=t[t.length-1]/4+t[t.length-1]/2+t[t.length-2]/4,t=Yb().cloneDeep(i),n--}for(var o=0;o<e.length-1;o++)r[0][o]=e[o],r[1][o]=(t[o+1]-t[o])/(e[o+1]-e[o]);return r[0][e.length-1]=e[e.length-1],r[1][e.length-1]=r[1][e.length-2],r}},{key:"calculateDifference",value:function(e,t){if("number"===typeof e&&"number"===typeof t)return t-e;if(e instanceof js&&t instanceof js){e=e.normalize();var n=(t=t.normalize()).clone().multiply(e.clone().invert()),r=2*Math.acos(n.w);return r>Math.PI&&(r=2*Math.PI-r),r}return 0}},{key:"decomposePropertyName",value:function(e){var t=br(e.split("&"),3);return[t[1],t[2]]}},{key:"fillGraphData",value:function(e,t,n){console.log("fill graph data is called");var r=xb(this.currProperty),i=this.state,a=i.currObjects,o=i.is_part_changed,u=i.line_ids,l=i.use_timeWarp,c=i.color_map,h=this.props.robotSceneManager,f=br(this.decomposePropertyName(r),2),d=f[0],p=f[1];if(void 0!=d){console.log("current specific prop is "+d);var v=!1;if("angle"==d&&(v=!0),void 0!==p){var m=this.convertStringToDataType(p);if(void 0!=m){console.log("current data type is "+m);var g=[],y=[],b=this.times,x=this.values,w=0,_=[],S=[],k=[],M=new Map;M=Yb().cloneDeep(c);var T,E=s(a);try{for(E.s();!(T=E.n()).done;){var C=T.value;console.log("fillGraphData called in DifferenceGraphPanel");var A=this.decomposeDragButtonId(C),R=A[0],P=h.robotSceneById(R);if(void 0==P)return;console.log("scene id is "+R);var L=A[1];if(void 0==L)return;var O=P.getRobotByName(L);if(void 0===O)return;console.log("robot name is "+L);var N=A[2];if(void 0==N)return;var D=O.jointMap().get(N);if(void 0===D&&void 0===(D=O.linkMap().get(N))){if(N!==L)return;D=void 0}console.log("part name is "+N);A[0];var I=C+r;u.includes(I)?o.set(I,u.indexOf(I)):o.set(I,-1);var j=o.get(I);if(-1===j||n){var F=v?"x":this.convertStringToVectorKey(d);if("rotation"===m){var z=this.getRotations(R,O,D,l);g[w]=z[0],y[w]=z[1]}else if("position"===m){var B=this.getPositions(R,O,D,v,F,l);g[w]=B[0],y[w]=B[1]}else if("velocity"===m){var U=this.getVelocity(R,O,D,v,F,l);g[w]=U[0],y[w]=U[1]}else if("acceleration"===m){var V=this.getAcceleration(R,O,D,v,F,l);g[w]=V[0],y[w]=V[1]}else if("jerk"===m){var G=this.getJerk(R,O,D,v,F,l);g[w]=G[0],y[w]=G[1]}else console.log("wrong data type")}else g[w]=b[j],y[w]=x[j];var H="".concat(P.name(),"_").concat(L,"_").concat(N);S[w]=I,k[w]=H,o.set(I,w++)}}catch(Fq){E.e(Fq)}finally{E.f()}if(2===y.length&&2===g.length&&y[0].length===y[1].length){console.log("Can draw diff"),_[0]=[],_[1]=[];for(var W=0;W<y[0].length;W++)_[0][W]=0,_[1][W]=this.calculateDifference(y[0][W],y[1][W]),M.has(S[W])||M.set(S[W],this.props.graph.getColor());this.line_ids_diff=S,this.setState({line_names_diff:k}),this.props.graph.setLineNames(k),this.props.graph.setLineIds(S);var Z,$=[],q=s(S);try{for(q.s();!(Z=q.n()).done;){var X=Z.value;$.push(M.get(X))}}catch(Fq){q.e(Fq)}finally{q.f()}this.props.graph.setLineColors($)}b=g,x=y,this.times=b,this.values=x,this.setState({diff_values:_,diff_times:g,prev_times:{start:h.currStartTime(),end:h.currEndTime(),curr:h.currTime()},color_map:M,is_part_changed:o,need_update:!1})}}}}},{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e,t=this,n=document.querySelectorAll(".RobotCanvasCanvas");n.forEach((function(e){return e.classList.remove("selected")})),(n=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((function(e){t.setState({panelWidth:e[0].contentRect.width,panelHeight:.85*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);var r=this.props.graph;this.currProperty=r.currProperty();var i,a=s(r.lineIds());try{for(a.s();!(i=a.n()).done;){var o=i.value,u=br(this.decomposeEventName(o),5),l=u[0],c=u[1],h=u[2],f=(u[3],u[4],l+"#"+c+"&"+h);this.addNewLine(f,r.currProperty())}}catch(Fq){a.e(Fq)}finally{a.f()}}},{key:"componentDidUpdate",value:function(e){var t=this.state,n=t.prev_times,r=t.need_update,i=n.start!==this.props.robotSceneManager.currStartTime()||n.end!==this.props.robotSceneManager.currEndTime(),a=n.curr!==this.props.robotSceneManager.currTime();if(i&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}}),(a||r)&&this.fillGraphData(i,a),this.props.force_update!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph()===this.props.graph){var o=this.props,s=o.eventName,u=o.add;(s!==e.eventName||u!==e.add)&&(this.currProperty=s[0],this.props.graph.resetColor(),this.fillGraphData()),this.props.graph.filter()!==this.state.filter&&(this.setState({filter:this.props.graph.filter()}),this.onChangeFilter(this.props.graph.filter()))}}},{key:"onChangeFilter",value:function(e){console.log("on change filter"),this.setState({filter:e,graph_update:!0}),this.fillGraphData(!1,!1,!0)}},{key:"decomposeEventName",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1],i=t[2],a=t[3],o=br(n.split("#"),2);return[o[0],o[1],r,i,a]}},{key:"convertStringToDataType",value:function(e){if("position"!==e&&"velocity"!==e&&"acceleration"!==e&&"jerk"!==e&&"rotation"!==e)throw Error("".concat(e," is not a property!!!!"));return e}},{key:"convertStringToVectorKey",value:function(e){if("x"!==e&&"y"!==e&&"z"!==e&&"magnitude"!==e)throw Error("".concat(e," is not a property!!!!"));return e}},{key:"onCheckUseTW",value:function(e){var t=this.state.use_timeWarp;this.setState({use_timeWarp:!t,graph_update:!0,need_update:!0})}},{key:"onCurrTimeChange",value:function(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}},{key:"onStartTimeChange",value:function(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}},{key:"onEndTimeChange",value:function(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}},{key:"onDeleteChange",value:function(e){}},{key:"dragOverHandler",value:function(e){e.preventDefault()}},{key:"dropHandler",value:function(e){e.preventDefault();e.target;var t=e.dataTransfer.getData("text/plain"),n=xb(this.currProperty);this.addNewLine(t,n)}},{key:"addNewLine",value:function(e,t){var n=br(this.decomposeId(e),3),r=n[0],i=n[1],a=n[2],o=this.props.robotSceneManager,s=o.robotSceneById(r);if(void 0!==s){o.isActiveRobotScene(s)||o.activateRobotScene(s);var u=s.getJointByName(i,a);if(void 0===u&&(u=s.getLinkByName(i,a)),void 0!==u)u.addToGraph();else{var l=s.getRobotByName(i);void 0!==l&&l.addToGraph()}}var c=this.state.currObjects;c.length>2||(c.push(e),this.line_ids_diff.push(e+t),2===this.line_ids_diff.length&&this.fillGraphData(),this.setState({currObjects:this.state.currObjects}))}},{key:"decomposeId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"decomposeDragButtonId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"decomposeLineId",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1],i=t[2],a=t[3],o=br(n.split("#"),2);return[o[0],o[1],r,i,a]}},{key:"showDiffLineNames",value:function(){for(var e=this.state.currObjects,t=[],n=0;n<2;n++)if(void 0!==e[n]){var r,i=br(this.decomposeDragButtonId(e[n]),3),a=i[0],o=i[1],s=i[2],u=null===(r=this.props.robotSceneManager.robotSceneById(a))||void 0===r?void 0:r.name();t[n]=u+"_"+o+"_"+s}return(0,rr.jsxs)("div",{children:[void 0!==t[0]&&(0,rr.jsxs)("p",{children:["the first (reference) line is ",t[0]]}),void 0!==t[1]&&(0,rr.jsxs)("p",{children:["the second line is ",t[1]]})]})}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.diff_values,i=n.diff_times,a=(n.use_timeWarp,n.color_map),o=(n.prev_times,n.panelHeight),u=n.panelWidth,l=n.line_names_diff,c=this.currProperty,h=this.props.is_part_changed,f=this.props.robotSceneManager,d=this.line_ids_diff,p=[],v=s(d);try{for(v.s();!(e=v.n()).done;){var m=e.value;p.push(a.get(m))}}catch(Fq){v.e(Fq)}finally{v.f()}var g=br(c.split("&"),3),y=g[1],b=g[2],x=b+" in "+y;"rotation"===b&&(x="Rotational"),b.startsWith("joint")&&(x=b);var w=this.props.robotSceneManager.getCurrGraph()===this.props.graph;return(0,rr.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,rr.jsxs)("div",{className:"LegendMessage",children:[(0,rr.jsx)(fV,{buttonValue:"Legend",className:"Legend",title:"Click and drag to open the legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){return["LineGraphLegend&".concat(Lb(4),"&").concat(t.props.graph.id()),function(e){}]}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.DifferenceGraphPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),this.showDiffLineNames(),(0,rr.jsx)(eq,{times:i,vals:r,startTime:f.currStartTime(),endTime:f.currEndTime(),currTime:f.currTime(),isZoom:!1,isDiff:!0,isTimeWarp:!1,line_names:l,line_colors:p,title:x,width:u,height:o,line_ids:d,prev_map:h,selected:w,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this),onDeleteChange:this.onDeleteChange.bind(this)})]})}}]),r}(t.Component),iq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._button=void 0,i._button=t.createRef(),i}return(0,l.Z)(r,[{key:"render",value:function(){return(0,rr.jsx)("button",{className:"DeleteButton",ref:this._button,onClick:this.props.onClick,style:this.props.style,id:this.props.id,children:(0,rr.jsx)($n,{className:"TrashIcon",icon:Kn})})}}]),r}(t.Component),aq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).genGoToSceneCallback=function(e,t){return t.stopPropagation(),function(){r.props.robotSceneManager.setCurrRobotScene(e),console.log("shit"),r.props.robotSceneManager.isActiveRobotScene(e)||(console.log("hello"),r.props.robotSceneManager.activateRobotScene(e))}},r.state={selectedScenes:new Map,selectedRobots:new Map},r}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){document.getElementById("SelectionPanel"),document.getElementById("group1")}},{key:"genSceneOptions",value:function(){var e,t=[],n=s(this.props.robotSceneManager.allManagedRobotScenes());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push({value:r.id().value(),label:r.name()})}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"genRobotOptions",value:function(e){var t=[];if(null!=e){var n,r=s(e.robots());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push({value:i.id().value(),label:i.name(),ghost:!1})}}catch(Fq){r.e(Fq)}finally{r.f()}var a,o=s(e.ghostRobots());try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push({value:u.id().value(),label:u.name()+"-ghost",ghost:!0})}}catch(Fq){o.e(Fq)}finally{o.f()}}return t}},{key:"genRobotPartOptions",value:function(e,t){if(null!=e&&void 0!=t){var n=nq.getRobotByName(e,t);if(void 0!==(null===n||void 0===n?void 0:n.objectType))return this.genPartOptions(t,n)}}},{key:"genPartOptions",value:function(e,t){var n=[];0!==t.getArticuatedJointMap().size&&n.push({value:"Articulated Joints",label:"Articulated Joints",id:"Articulated Joints",inScene:!1,inGraph:!1});var r,i=s(t.getArticuatedJointMap());try{for(i.s();!(r=i.n()).done;){var a=br(r.value,2),o=a[0],u=a[1];n.push({value:"".concat(e,"&").concat(o),label:o,id:u.id().value(),inScene:u.isInScene(),inGraph:u.isInGraph()})}}catch(Fq){i.e(Fq)}finally{i.f()}0!==t.getFixedJointMap().size&&n.push({value:"Fixed Joints",label:"Fixed Joints",id:"Fixed Joints",inScene:!1,inGraph:!1});var l,c=s(t.getFixedJointMap());try{for(c.s();!(l=c.n()).done;){var h=br(l.value,2),f=h[0],d=h[1];n.push({value:"".concat(e,"&").concat(f),label:f,id:d.id().value(),inScene:d.isInScene(),inGraph:d.isInGraph()})}}catch(Fq){c.e(Fq)}finally{c.f()}0!==t.linkMap().size&&n.push({value:"Links",label:"Links",id:"Links",inScene:!1,inGraph:!1});var p,v=s(t.linkMap());try{for(v.s();!(p=v.n()).done;){var m=br(p.value,2),g=m[0],y=m[1];n.push({value:"".concat(e,"&").concat(g),label:g,id:y.id().value(),inScene:y.isInScene(),inGraph:y.isInGraph()})}}catch(Fq){v.e(Fq)}finally{v.f()}return n.push({value:"Robot",label:"Robot",id:"Robot",inScene:!1,inGraph:!1}),n.push({value:"".concat(e,"&").concat(e),label:"".concat(e),id:t.id().value(),inScene:t.isInScene(),inGraph:t.isInGraph()}),n}},{key:"dragStartHandler",value:function(e){e.dataTransfer.setData("text/plain",e.target.id)}},{key:"appendRobotPartOptions",value:function(e,t,n){var r,i=this,a=e.id().value()+"#"+n,o=this.state.selectedRobots.get(a);return void 0!==o&&o?null===(r=this.genRobotPartOptions(e,t))||void 0===r?void 0:r.map((function(t){return(0,rr.jsx)(fG,{children:i.genRobotPartList(e,t)},t.id)})):void 0}},{key:"genRobotPartList",value:function(e,t){return"Articulated Joints"===t.value||"Fixed Joints"===t.value||"Links"===t.value||"Robot"===t.value?(0,rr.jsx)("div",{children:t.value}):(0,rr.jsxs)("div",{style:{marginLeft:"-10px",display:"inline-block",whiteSpace:"nowrap"},children:[t.inScene&&(0,rr.jsx)("span",{children:"S\xa0"}),!t.inScene&&(0,rr.jsx)("span",{children:"\xa0 \xa0"}),t.inGraph&&(0,rr.jsx)("span",{children:"G\xa0"}),!t.inGraph&&(0,rr.jsx)("span",{children:"\xa0 \xa0"}),(0,rr.jsx)("button",{className:"DragButton_RobotPart",title:"Click and drop it to a 3D scene or a 2D graph to see its traces",id:e.id().value()+"#"+t.value,draggable:"true",onDragStart:this.dragStartHandler,children:t.label})]})}},{key:"onSelectRobot",value:function(e,t,n){n.stopPropagation(),this.props.setRobotOptionPanelActive(),void 0!==e&&(this.props.robotSceneManager.setCurrRobotScene(e),this.props.robotSceneManager.isActiveRobotScene(e)||this.props.robotSceneManager.activateRobotScene(e),void 0!==t&&e.setSelectedRobot(t))}},{key:"appendRobotOptions",value:function(e){var t=this,n=this.state.selectedScenes.get(e.id().value());return void 0!==n&&n?(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,onChange:this.onChangeRobot.bind(this),children:this.genRobotOptions(e).map((function(n){return(0,rr.jsxs)(qV,{uuid:e.id().value()+"#"+n.value,children:[(0,rr.jsx)(cG,{children:(0,rr.jsxs)(uG,{children:[(0,rr.jsx)(iq,{onClick:function(r){return t.onDelete(r,e.id().value()+"#"+n.value,"robot",n.ghost)}}),(0,rr.jsx)("button",{className:"DragButton_Robot",title:"Click and drop it to a 3D scene or a 2D graph to add a ghost",id:e.id().value()+"#"+n.label,draggable:"true",onDragStart:t.dragStartHandler,onClick:function(r){return t.onSelectRobot(e,e.robotById(n.value),r)},children:n.label})]})}),t.appendRobotPartOptions(e,n.label,n.value)]},e.id().value()+"#"+n.value)}))}):void 0}},{key:"onChangeRobot",value:function(e){var t,n=new Map,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.set(i,!0)}}catch(Fq){r.e(Fq)}finally{r.f()}this.setState({selectedRobots:n})}},{key:"onChangeScene",value:function(e){var t,n=new Map,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.set(i,!0)}}catch(Fq){r.e(Fq)}finally{r.f()}this.setState({selectedScenes:n})}},{key:"onDelete",value:function(e,t,n,r){e.stopPropagation();var i=this.props.robotSceneManager;if("scene"===n){var a=this.props.robotSceneManager.robotSceneById(t);a&&i.removeRobotScene(a)}else if("robot"===n){var o=br(t.split("#"),2),s=o[0],u=o[1],l=this.props.robotSceneManager.robotSceneById(s);if(l)if(void 0!==r&&!0===r)l.removeGhostRobot(u);else{var c=l.robotById(u);c&&l.removeChildRobot(c)}}}},{key:"onSelectScene",value:function(e,t){t.stopPropagation(),this.props.robotSceneManager.setCurrRobotScene(e),this.props.robotSceneManager.isActiveRobotScene(e)||this.props.robotSceneManager.activateRobotScene(e),this.props.setSceneOptionPanelActive()}},{key:"render",value:function(){var e=this,t=(this.state.selectedScenes,this.props.robotSceneManager),n=t.allManagedRobotScenes(),r=t.currRobotScene(),i=r?t.getManagedRobotSceneData(r):void 0;return(0,rr.jsxs)("div",{className:"SelectionPanel",id:"SelectionPanel",children:[(0,rr.jsxs)("div",{id:"group1",className:"PopUpGroup",children:[(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.SelectionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})}),(0,rr.jsx)("div",{className:"SceneSelectorPanel",children:(0,rr.jsxs)("div",{className:"ButtonGroup",children:[(0,rr.jsx)("input",{className:"Button",type:"button",value:"New Scene",onClick:function(){var e=t.addDefaultManagedRobotScene();t.setCurrRobotScene(e)}}),(0,rr.jsx)("input",{className:"Button",type:"button",value:"Clone Scene",onClick:function(e){if(void 0!==i){var n=i.robotScene.clone(!0,!1,!0);t.addManagedRobotScenes([{path:pr(i.path),robotScene:n,metrics:new Map(i.metrics)}])}}})]})})]}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,onChange:this.onChangeScene.bind(this),children:n.map((function(n){return(0,rr.jsxs)(qV,{uuid:n.id().value(),children:[(0,rr.jsx)(cG,{children:(0,rr.jsxs)(uG,{children:[(0,rr.jsx)(iq,{id:n.id().value(),onClick:function(t){return e.onDelete(t,n.id().value(),"scene")}}),(0,rr.jsx)(fV,{title:"Click and drag to open the scene",className:"Scene",buttonValue:n.name(),getParentDockLayout:e.props.getParentDockLayout,onClick:function(t){return e.onSelectScene(n,t)},onDragStart:function(){t.setAllowRobotSelection(!1);return["RobotScene&".concat(Lb(4),"&").concat(n.id().value()),function(e){t.setAllowRobotSelection(!0),t.isActiveRobotScene(n)||t.activateRobotScene(n),t.setCurrRobotScene(n)}]}},"".concat(n.name()))]})}),(0,rr.jsx)(fG,{children:e.appendRobotOptions(n)})]},n.id().value())}))})]})}}]),n}(t.Component),oq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.data_types=["joint position","joint velocity","joint acceleration","joint jerk","Cartesian position","Cartesian velocity","Cartesian acceleration","Cartesian jerk","rotation"],i.speci_property_types=["magnitude","x","y","z","angle"],i.selectedOptions=[],i.dropdownRef=[],i.currDataType=void 0,i.currSpeciProperty=void 0,i.state={counter:0,panelHeight:620,panelWidth:1200,dropdowns:[!1,!1],currScene:null,currRobot:new Map,currJoint:new Map,need_update:!0,currSelectedGraph:void 0},i._graphDiv=(0,t.createRef)();for(var a=0;a<2;a++)i.dropdownRef[a]=(0,t.createRef)();return i.currDataType=i.data_types[0],i.currSpeciProperty=i.speci_property_types[0],i}return(0,l.Z)(r,[{key:"booleanSum",value:function(e){var t,n=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=Number(i)}}catch(Fq){r.e(Fq)}finally{r.f()}return n}},{key:"genPropertyOptions",value:function(){var e,t=[],n=this.props.robotSceneManager.getCurrGraph(),r=s(this.data_types);try{for(r.s();!(e=r.n()).done;){var i=e.value;("rotation"!==i||void 0===n||n.isDiff())&&t.push({value:i,label:i})}}catch(Fq){r.e(Fq)}finally{r.f()}return t}},{key:"genSpeciPropertyOptions",value:function(){var e,t=[],n=s(this.speci_property_types);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push({value:r,label:r})}}catch(Fq){n.e(Fq)}finally{n.f()}return t}},{key:"componentDidUpdate",value:function(e){this.props.robotSceneManager.getCurrGraph()!==this.state.currSelectedGraph&&(this.setState({currSelectedGraph:this.props.robotSceneManager.getCurrGraph()}),this.setOptions())}},{key:"deselectDropdowns",value:function(e){this.state.dropdowns[e]=!1,void 0!=this.dropdownRef[e+1]&&void 0!=this.dropdownRef[e+1].current&&this.dropdownRef[e+1].current.setValue(this.dropdownRef[e+1].current.state.prevProps.placeholder)}},{key:"selectDropdowns",value:function(e){this.state.dropdowns[e]=!0}},{key:"onChangeProperty",value:function(e){this.deselectDropdowns(0);var t=e.value;t&&(this.currDataType=t,this.selectDropdowns(0),"rotation"===t?(this.selectDropdowns(1),this.onUpdate(t,"x")):"position"!==t&&(this.selectDropdowns(1),this.currSpeciProperty="magnitude",this.dropdownRef[1].current.setValue({value:"magnitude",label:"magnitude"}),this.onUpdate(t,"magnitude")))}},{key:"onChangeSpeciProperty",value:function(e){this.state.dropdowns[1]=!1;var t=e.value;t&&(this.currSpeciProperty=t,this.selectDropdowns(1),this.onUpdate(this.currDataType,t))}},{key:"onUpdate",value:function(e,t){for(var n,r=0;r<2;r++)if(!this.state.dropdowns[r])throw new Error("".concat(r," Not every dropdown is selected. Need to select all dropdowns to show the graph"));console.log("on Update");var i=[];i[0]="&"+t+"&"+e,null===(n=this.props.robotSceneManager.getCurrGraph())||void 0===n||n.setCurrProperty(i[0]),this.props.updateGraphPropertyPanelState(i,!0,void 0,void 0)}},{key:"decomposeEventName",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1],i=t[2],a=t[3],o=br(n.split("#"),2);return[o[0],o[1],r,i,a]}},{key:"convertOptionListtoSpeciProperties",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].name;if("x"!==r&&"y"!==r&&"z"!==r&&"angle"!==r)throw Error("".concat(r," is not a valid specific property"));t[n]=r}return t}},{key:"setOptions",value:function(){var e=this.props.robotSceneManager.getCurrGraph();if(void 0!==e){var t=br(e.currProperty().split("&"),3),n=t[1],r=t[2];this.dropdownRef[0].current.setValue({value:r,label:r}),this.dropdownRef[1].current.setValue({value:n,label:n})}}},{key:"createNewGraphTab",value:function(e,t){var n=new bR(e,t,!1);this.props.updateGraphPropertyPanelState(void 0,void 0,void 0,n)}},{key:"onChangeFilter",value:function(e){var t;console.log("on change filter"),this.props.forceUpdateTabNames(),null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setFilter(e)}},{key:"onChangeLineWidth",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setLineWidth(e)}},{key:"onBackgroundColorChange",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setBackgroundColor(e),this.props.forceUpdateTabNames()}},{key:"onAxisColorChange",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setAxisColor(e),this.props.forceUpdateTabNames()}},{key:"render",value:function(){var e=this,t=(this.props.filter_prop,{display:"flex"});this.currDataType.startsWith("joint")&&(t={display:"none"});var n=this.props.robotSceneManager.getCurrGraph();return(0,rr.jsxs)("div",{className:"GraphOptionPanel",ref:this._graphDiv,children:[(0,rr.jsxs)("div",{style:{marginBottom:"5px"},className:"PopUpGroup",children:[(0,rr.jsx)(i$,{labelValue:"Name:",value:null===n||void 0===n?void 0:n.name(),onReturnPressed:function(t){null===n||void 0===n||n.setName(t),e.props.forceUpdateTabNames()}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.GraphOptionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsxs)("div",{className:"labeledSelect",children:[(0,rr.jsx)("label",{children:" Y-axis: "}),(0,rr.jsx)("div",{className:"select-container",children:(0,rr.jsx)(oV,{placeholder:"Select a property ...",ref:this.dropdownRef[0],options:this.genPropertyOptions(),onChange:this.onChangeProperty.bind(this),isSearchable:!0,styles:G$})}),(0,rr.jsxs)("div",{className:"Select",style:t,children:[(0,rr.jsx)("span",{children:"Details:"}),(0,rr.jsx)("div",{className:"Select-container",children:(0,rr.jsx)(oV,{placeholder:"Select a specific property ...",ref:this.dropdownRef[1],options:this.genSpeciPropertyOptions(),onChange:this.onChangeSpeciProperty.bind(this),isSearchable:!0,styles:G$})})]})]}),(0,rr.jsxs)("div",{className:"ButtonsContainer",children:[(0,rr.jsx)(fV,{buttonValue:"New Graph",title:"Click and drag to create a new graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var t=Lb(4);return["Graph&".concat(t,"&motion"),function(n){e.createNewGraphTab(t,!1)}]}}),(0,rr.jsx)(fV,{buttonValue:"Difference Graph",title:"Click and drag to create a new difference graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var t=Lb(4);return["DifferenceGraph&".concat(t,"&motion"),function(n){e.createNewGraphTab(t,!0)}]}})]}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Graph Views"})}),(0,rr.jsx)(fG,{children:(0,rr.jsxs)("div",{className:"GraphViews",children:[(0,rr.jsx)(hV,{label:"Convolution Filtering Level: ",min:0,max:10,step:1,value:null===n||void 0===n?void 0:n.filter(),onChange:this.onChangeFilter.bind(this)}),(0,rr.jsx)(hV,{label:"Line width: ",min:.1,max:10,step:.1,value:null===n||void 0===n?void 0:n.lineWidth(),onChange:this.onChangeLineWidth.bind(this)}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===n||void 0===n?void 0:n.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Axis Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===n||void 0===n?void 0:n.axisColor(),onColorMapChange:this.onAxisColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})})]})})]})}}]),r}(t.Component),sq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).jointAngleCallbackGen=r.jointAngleCallbackGen.bind((0,c.Z)(r)),r.onSizeChange=r.onSizeChange.bind((0,c.Z)(r)),r.positionCallbackGen=r.positionCallbackGen.bind((0,c.Z)(r)),r.toggleRotType=r.toggleRotType.bind((0,c.Z)(r)),r.toggleAngleType=r.toggleAngleType.bind((0,c.Z)(r)),r.state={rotationType:"Euler",angleType:"Degree"},r}return(0,l.Z)(n,[{key:"toggleRotType",value:function(){this.setState({rotationType:"Quaternion"===this.state.rotationType?"Euler":"Quaternion"})}},{key:"toggleAngleType",value:function(){this.setState({angleType:"Degree"===this.state.angleType?"Radian":"Degree"})}},{key:"onSizeChange",value:function(e){var t=this;return function(n){e?t.props.robot.setScaleOffset(new db.Vector3(n,n,n)):t.props.robot.setScale(new db.Vector3(n,n,n)),t.props.robotScene.render()}}},{key:"positionCallbackGen",value:function(e,t){var n=this;return"x"!==e&&"y"!==e&&"z"!==e&&(console.error('Postion "'.concat(e,'" is not one of "x", "y", "z"!')),e="x"),function(r){var i,a=n.props.robot,o=[(i=t?a.getPositionOffset():a.getPosition()).x,i.y,i.z],s=o[0],u=o[1],l=o[2];"x"===e?s=r:"y"===e?u=r:"z"===e&&(l=r),t?a.setPositionOffset(new db.Vector3(s,u,l)):a.setPosition(new db.Vector3(s,u,l))}}},{key:"rotationCallbackGen",value:function(e,t,n,r){var i=this;return"x"!==e&&"y"!==e&&"z"!==e&&"w"!==e&&(console.error('Rotation axis "'.concat(e,'" is not one of ["x", "y", "z", "w"]!')),e="x"),function(a){var o,s=i.props.robot;if(o=t?s.getQuaternionOffset().clone():s.getQuaternion().clone(),"Euler"===n){var u=i.props.robot.eulerRotation();if(console.log("before"),console.log(u),console.log(o),"Degree"===r&&(a=Eb(a)),"x"===e)u.x=a;else if("y"===e)u.y=a;else if("z"===e)u.z=a;else if("w"===e)return;o.setFromEuler(u),console.log("after"),console.log(u),console.log(o)}else"Quaternion"===n&&("x"===e?o.x=a:"y"===e?o.y=a:"z"===e?o.z=a:"w"===e&&(o.w=a));t?s.setQuaternionOffset(o):s.setQuaternion(o)}}},{key:"jointAngleCallbackGen",value:function(e,t){return function(n){"Degree"===t?e.setAngle(Eb(n)):e.setAngle(n)}}},{key:"render",value:function(){var e=this,t=this.state.rotationType,n=this.state.angleType,r=[],i=this.props.robot,a=i.idValue();!function(o){var s=o?i.getScaleOffset():i.getScale();r.push((0,rr.jsx)(hV,{label:"".concat(o?"":"Relative ","Scale"),min:0,max:2,step:.001,value:s.x,onChange:e.onSizeChange(o)},"".concat(a," ").concat(o?"Absolute":"Relative"," Scale")));for(var u=0,l=["x","y","z"];u<l.length;u++){var c=l[u],h=void 0;h=o?i.getPositionOffset():i.getPosition();var f=void 0;"x"===c?f=h.x:"y"===c?f=h.y:"z"===c&&(f=h.z),r.push((0,rr.jsx)(hV,{label:"".concat(o?"":"Relative ","Position ").concat(c.toUpperCase()),value:f,min:-3,max:3,step:.001,onChange:e.positionCallbackGen(c,o)},"".concat(a," ").concat(o?"Absolute":"Relative"," ").concat(c," Position")))}for(var d=.001,p=0,v=["x","y","z","w"];p<v.length;p++){var m=v[p],g=m,y=0,b=void 0,x=1,w=-1;if(b=o?i.getQuaternionOffset():i.getQuaternion(),"Euler"===t){var _=e.props.robot.eulerRotation();if("x"===g)y=_.x;else if("y"===g)y=_.y;else{if("z"!==g){if("w"===g)continue;console.error('Unknown axis "'.concat(g,'"'));continue}y=_.z}"Degree"===n?(y=Cb(y),x=360,w=-360):(x=2*Math.PI,w=2*-Math.PI,d=Math.PI/180*.001)}else if("Quaternion"===t)if("x"===g)y=b.x;else if("y"===g)y=b.y;else if("z"===g)y=b.z;else{if("w"!==g){console.error('Unknown axis "'.concat(g,'"'));continue}y=b.w}r.push((0,rr.jsx)(hV,{label:"".concat(o?"":"Relative ","Rotation ").concat(g.toUpperCase()),value:y,min:w,max:x,step:d,onChange:e.rotationCallbackGen(g,o,t,n)},"".concat(a," ").concat(o?"Absolute":"Relative"," ").concat(m," Rotation")))}}(!0);var o,u=s(this.props.robot.getArticuatedJointMap());try{for(u.s();!(o=u.n()).done;){var l=br(o.value,2),c=l[0],h=l[1],f=h.minAngle(),d=h.maxAngle(),p=h.angle(),v=Math.PI/180*.001;"Degree"===n&&(f=Cb(f),d=Cb(d),p=Cb(p),v=.001),r.push((0,rr.jsx)(hV,{label:"Joint "+c,min:f,max:d,value:p,step:v,onChange:this.jointAngleCallbackGen(h,n)},"".concat(h.idValue()," Rotation")))}}catch(Fq){u.e(Fq)}finally{u.f()}return(0,rr.jsxs)("div",{className:"RobotJointsPanel",children:[(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Rotations"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" Euler"}),(0,rr.jsx)(n$,{checked:"Euler"===this.state.rotationType,onChange:this.toggleRotType}),(0,rr.jsx)("label",{className:"switch-right-label",children:" Quaternion "})]}),(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Unit"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" Degree"}),(0,rr.jsx)(n$,{checked:"Degree"===this.state.angleType,onChange:this.toggleAngleType}),(0,rr.jsx)("label",{className:"switch-right-label",children:" Radian "})]})]}),(0,rr.jsx)("div",{children:r})]})}}]),n}(t.Component),uq=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).onAddGroup=r.onAddGroup.bind((0,c.Z)(r)),r.state={updateCnt:0},r}return(0,l.Z)(n,[{key:"update",value:function(){this.setState({updateCnt:(this.state.updateCnt+1)%1e6})}},{key:"onAddGroup",value:function(){this.props.animationManager.addStoredAnimation(new qb),this.update()}},{key:"render",value:function(){var e,t,n=this.props.robotScene.robots(),r=this.props.robotSceneManager.animationTables(),i=this.props.animationManager.animationGroups(),a="",o="This tab binds motions to robots. You can not do it now because ";0===n.length?a=o+"no robots have been loaded in.":0===r.length?a=o+"no motions have been loaded in.":0===i.length&&this.onAddGroup();var u,l=s(zb(this.props.animationManager.animationGroups()));try{for(l.s();!(u=l.n()).done;){var c,h=br(u.value,2),f=(h[0],s(zb(h[1].animations())));try{for(f.s();!(c=f.n()).done;){var d=br(c.value,2),p=(d[0],d[1]);p.robot()===this.props.robot&&(t=p)}}catch(Fq){f.e(Fq)}finally{f.f()}}}catch(Fq){l.e(Fq)}finally{l.f()}return(0,rr.jsx)("div",{className:"AnimationEditor",children:a.length>0?(0,rr.jsx)("label",{children:a}):(0,rr.jsx)("div",{children:(0,rr.jsx)(i$,{labelValue:"Offset:",value:"".concat(null===(e=t)||void 0===e?void 0:e.offset()),filter:jb,onReturnPressed:function(e){var n,r=parseFloat(e);isNaN(r)||(null===(n=t)||void 0===n||n.setOffset(r))}})})})}}]),n}(t.Component),lq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._table=void 0,i._table=t.createRef(),i}return(0,l.Z)(r,[{key:"render",value:function(){console.log("render");var e,t,n=this.props,r=n.animationManager,i=(n.robotSceneManager,n.robot),a=s(zb(r.animationGroups()));try{for(a.s();!(t=a.n()).done;){var o,u=br(t.value,2),l=(u[0],s(zb(u[1].animations())));try{for(l.s();!(o=l.n()).done;){var c=br(o.value,2),h=(c[0],c[1]);h.robot()===i&&(e=h)}}catch(Fq){l.e(Fq)}finally{l.f()}}}catch(Fq){a.e(Fq)}finally{a.f()}if(void 0!==e){for(var f=e.animationTable().toCSV().slice(0,10),d=0;d<f.length;d++)for(var p=0;p<f[d].length;p++)isNaN(Number(f[d][p]))||(f[d][p]=Number(f[d][p]).toFixed(3));return(0,rr.jsxs)("div",{className:"DataTable",children:[(0,rr.jsx)("span",{children:"Note: The data table only shows the first 10 rows of the data"}),(0,rr.jsx)("table",{children:(0,rr.jsx)("tbody",{children:f.map((function(e,t){return(0,rr.jsx)("tr",{children:e.map((function(e,t){return(0,rr.jsx)("td",{style:{paddingRight:"10px"},children:e})}))},t)}))})})]})}}}]),r}(t.Component),cq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i._jointMotionOptions=[],i.dropdownRef=void 0;i.props.robotSceneManager;i.state={counter:0,panelHeight:620,panelWidth:1200,need_update:!0,show_data:!1},i._graphDiv=(0,t.createRef)(),i.dropdownRef=[];for(var a=0;a<2;a++)i.dropdownRef[a]=(0,t.createRef)();return i.onShowRobot=i.onShowRobot.bind((0,c.Z)(i)),i.onOpacityChange=i.onOpacityChange.bind((0,c.Z)(i)),i}return(0,l.Z)(r,[{key:"booleanSum",value:function(e){var t,n=0,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=Number(i)}}catch(Fq){r.e(Fq)}finally{r.f()}return n}},{key:"componentDidUpdate",value:function(e){}},{key:"onSelectJointMotion",value:function(){document.querySelectorAll(".SelectJointMotionMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}));var e=this.props.robotSceneManager,t=e.currRobotScene();if(void 0!==t){var n=t.selectedRobot();if(void 0!==n){var r=this.dropdownRef[0].current;if(r&&r.props&&r.props.value){var i=r.props.value.value,a=(r.props.value.label,e.getJointMotionById(i));if(console.log(a),void 0===a)return;var o=Y_.createTableWithJointMotion(n.name(),a.time,a.motion);this.props.robotSceneManager.addAnimationTable(o),0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new qb),console.log(o);var u,l=s(zb(this.props.animationManager.animationGroups()));try{for(l.s();!(u=l.n()).done;){var c=br(u.value,2),h=(c[0],c[1]),f=Z$.deleteAnimationAssociatedwithRobot(h,n);if(void 0!==f){var d=f.animationTable();o.setDescMap(d.descMap())}console.log(o),h.addAnimation(new $b(n,o)),-1===this.props.animationManager.activeAnimations().indexOf(h)&&this.props.animationManager.addActiveAnimation(h)}}catch(Fq){l.e(Fq)}finally{l.f()}this.props.robotSceneManager.activateRobotScene(t);var p=document.createElement("p");p.innerText="Joint Motion Binded Successfully!",p.classList.add("SelectJointMotionMessage");var v=document.querySelector(".RobotOptionPanel"),m=null===v||void 0===v?void 0:v.querySelector(".Select-JointMotion");null===m||void 0===m||m.appendChild(p)}else{var g=document.createElement("p");g.innerText="Error binding joint",g.style.color="red",g.classList.add("SelectJointMotionMessage");var y=document.querySelector(".RobotOptionPanel"),b=null===y||void 0===y?void 0:y.querySelector(".Select-JointMotion");null===b||void 0===b||b.appendChild(g)}}}}},{key:"isChildJoint",value:function(e,t){var n,r=e.getArticuatedJointMap(),i=s(t.motion.keys());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!r.has(a))return!1}}catch(Fq){i.e(Fq)}finally{i.f()}return!0}},{key:"genJointMotionOptions",value:function(){var e=[],t=this.props.robotSceneManager,n=t.currRobotScene();if(void 0===n)return[];var r=n.selectedRobot();if(void 0===r)return[];var i,a=s(t.getAllJointMotions());try{for(a.s();!(i=a.n()).done;){var o=br(i.value,2),u=(o[0],o[1]);this.isChildJoint(r,u)&&e.push({label:u.name,value:u.id})}}catch(Fq){a.e(Fq)}finally{a.f()}return e}},{key:"onSelectTF",value:function(){document.querySelectorAll(".SelectTransformationMessage").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}));var e=this.props.robotSceneManager,t=e.currRobotScene();if(void 0!==t){var n=t.selectedRobot();if(void 0!==n){var r=this.dropdownRef[1].current;if(r&&r.props&&r.props.value){var i=r.props.value.value,a=(r.props.value.label,e.getTFById(i));if(void 0===a)return;var o=Y_.createTableWithTF(n.name(),a.time,a.tfs);this.props.robotSceneManager.addAnimationTable(o),0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new qb);var u,l=s(zb(this.props.animationManager.animationGroups()));try{for(l.s();!(u=l.n()).done;){var c=br(u.value,2),h=(c[0],c[1]),f=Z$.deleteAnimationAssociatedwithRobot(h,n);if(void 0!==f){var d=f.animationTable();o.setAngleMap(d.angleMap())}console.log(o),h.addAnimation(new $b(n,o)),-1===this.props.animationManager.activeAnimations().indexOf(h)&&this.props.animationManager.addActiveAnimation(h)}}catch(Fq){l.e(Fq)}finally{l.f()}this.props.robotSceneManager.activateRobotScene(t);var p=document.createElement("p");p.innerText="Transformation Binded Successfully!",p.classList.add("SelectTransformationMessage");var v=document.querySelector(".RobotOptionPanel"),m=null===v||void 0===v?void 0:v.querySelector(".Select-Transformation");null===m||void 0===m||m.appendChild(p)}else{var g=document.createElement("p");g.innerText="Error binding transformation",g.style.color="red",g.classList.add("SelectTransformationMessage");var y=document.querySelector(".RobotOptionPanel"),b=null===y||void 0===y?void 0:y.querySelector(".Select-Transformation");null===b||void 0===b||b.appendChild(g)}}}}},{key:"isRobotTf",value:function(e,t){return e.links()[0].getLinkName()===t.first_link}},{key:"genTFOptions",value:function(){var e=[],t=this.props.robotSceneManager,n=t.currRobotScene();if(void 0===n)return[];var r=n.selectedRobot();if(void 0===r)return[];var i,a=s(t.getAllTFs());try{for(a.s();!(i=a.n()).done;){var o=br(i.value,2),u=(o[0],o[1]);this.isRobotTf(r,u)&&e.push({label:u.name,value:u.id})}}catch(Fq){a.e(Fq)}finally{a.f()}return e}},{key:"decomposeEventName",value:function(e){var t=br(e.split("&"),4),n=t[0],r=t[1],i=t[2],a=t[3],o=br(n.split("#"),2);return[o[0],o[1],r,i,a]}},{key:"onShowRobot",value:function(e){var t=this.props.robotSceneManager.currRobotScene();if(void 0!==t){var n=t.selectedRobot();void 0!==n&&(n.setVisible(e.currentTarget.checked),dr.updateUI())}}},{key:"onOpacityChange",value:function(){var e=this;return function(t){var n=e.props.robotSceneManager.currRobotScene();if(void 0!==n){var r=n.selectedRobot();void 0!==r&&(r.setOpacity(t),e.forceUpdate())}}}},{key:"onShowData",value:function(){this.setState({show_data:!this.state.show_data})}},{key:"render",value:function(){var e=this.props.robotSceneManager.currRobotScene();if(void 0===e)return(0,rr.jsx)("div",{className:"RobotOptionPanel",children:"This tab is for selecting which robot (if any) you would like. You do not have an robot selected currently, so this cannot be done. Please select an robot."},Lb(4));var t=e.selectedRobot();if(void 0===t)return(0,rr.jsx)("div",{className:"RobotOptionPanel",children:"This tab is for selecting which robot (if any) you would like. You do not have an robot selected currently, so this cannot be done. Please select an robot."},Lb(4));var n=t.opacity();return(0,rr.jsxs)("div",{className:"RobotOptionPanel",ref:this._graphDiv,children:[(0,rr.jsxs)("div",{className:"PopUpGroup",children:[(0,rr.jsx)(i$,{labelValue:"Name:",value:t.name(),onReturnPressed:function(e){t.setName(e)}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.RobotOptionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Robot Appearance"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)("div",{className:"RobotSelectorPanel",children:(0,rr.jsxs)("div",{className:"RobotPanel",style:{marginBottom:"10px"},children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Show Object"}),(0,rr.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,rr.jsx)(n$,{checked:t.visible(),onChange:this.onShowRobot}),(0,rr.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,rr.jsx)(hV,{label:"Robot Opacity",min:-.01,step:.01,max:1,value:n,onChange:this.onOpacityChange()},"Robot Opacity")]})})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Edit Object Positions/Robot Joints"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(sq,{robotScene:e,robot:t})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Edit Motion Data"})}),(0,rr.jsx)(fG,{children:(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"top-line",children:[(0,rr.jsx)(uq,{robotScene:e,animationManager:this.props.animationManager,robotSceneManager:this.props.robotSceneManager,robot:t}),(0,rr.jsx)("input",{type:"button",value:"show raw data",onClick:this.onShowData.bind(this),style:{marginTop:"1rem"}}),this.state.show_data&&(0,rr.jsx)(lq,{robotScene:e,animationManager:this.props.animationManager,robotSceneManager:this.props.robotSceneManager,robot:t})]}),(0,rr.jsx)("div",{className:"top-line",children:(0,rr.jsxs)("div",{className:"Select-JointMotion",children:[(0,rr.jsx)("label",{children:" Available Joint Motions "}),(0,rr.jsx)("div",{className:"Select-container",children:(0,rr.jsx)(oV,{placeholder:"Select a joint motion ...",options:this.genJointMotionOptions(),ref:this.dropdownRef[0],isSearchable:!0,styles:G$})}),(0,rr.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectJointMotion.bind(this)})]})}),(0,rr.jsx)("div",{className:"top-line",children:(0,rr.jsxs)("div",{className:"Select-Transformation",children:[(0,rr.jsx)("label",{children:"Available Transformations"}),(0,rr.jsx)("div",{className:"Select-container",children:(0,rr.jsx)(oV,{placeholder:"Select a transformation",options:this.genTFOptions(),ref:this.dropdownRef[1],isSearchable:!0,styles:G$})}),(0,rr.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectTF.bind(this)})]})})]})})]})})]})}}]),r}(t.Component),hq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.times=void 0,i.values=void 0,i.clickHandler=function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=i._graphDiv.current)||void 0===e||e.classList.add("selected"),i.props.setGraphOptionPanelActive(),i.props.robotSceneManager.setCurrGraph(i.props.graph.id())},i.fillGraphData.bind((0,c.Z)(i));var a=i.props.robotSceneManager;return i.state={counter:0,zoomed_times:[],zoomed_values:[],prev_times:{start:a.currStartTime(),end:a.currEndTime(),curr:a.currTime()},show_zoomed:!1,line_names:[],line_ids:[],color_map:new Map,refresh:!1,clear:!1,currScene:void 0,panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1},i.times=[],i.values=[],i._graphDiv=(0,t.createRef)(),i}return(0,l.Z)(r,[{key:"onGraphUpdate",value:function(e){var t=this.state.graph_update;return e?(this.setState({graph_update:!1}),!1):t}},{key:"interpolate",value:function(e,t,n,r,i){if(n===e)return i;var a=(t-e)/(n-e);return a*i+(1-a)*r}},{key:"fillGraphData",value:function(e,t,n){console.log("fill graph data is called");var r=this.state,i=(r.zoomed_times,r.zoomed_values,r.refresh,r.clear),a=(r.show_zoomed,this.props.robotScene),o=this.props.robotSceneManager,u=this.times,l=this.values;if(i)return u=[],l=[],this.times=u,this.values=l,void this.setState({zoomed_times:[],zoomed_values:[],line_names:[],line_ids:[],clear:!1,need_update:!1});var c=[],h=[],f=[],d=[],p=new Map;if(this.props.isTimeWarp){var v;if(void 0===a)return;var m=null===(v=a.timeWarping())||void 0===v?void 0:v.timeWarpMap(),g=o.startTime(),y=o.endTime();m&&2===m.length?(c.push(m[0].concat()),h.push(m[1].concat())):(c.push([g,y]),h.push([g,y]));var b,x=[],w=s(c[0]);try{for(w.s();!(b=w.n()).done;){var _=b.value;x.push(this.interpolate(g,_,y,g,y))}}catch(Fq){w.e(Fq)}finally{w.f()}c.push(c[0]),h.push(x),f=["time warp","reference"],d=["warp","ref"],p.set("time warp","#99f"),p.set("reference","green"),u=[],l=[],this.times=c,this.values=h,this.setState({zoomed_times:[],zoomed_values:[],prev_times:{start:o.currStartTime(),end:o.currEndTime(),curr:o.currTime()},line_names:f,line_ids:d,color_map:p,need_update:!1}),this.props.graph.setLineNames(f),this.props.graph.setLineIds(d);for(var S=[],k=0,M=f;k<M.length;k++){var T=M[k];S.push(p.get(T))}this.props.graph.setLineColors(S)}else;}},{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this._panel_resize_observer=new ResizeObserver((function(t){e.setState({panelWidth:t[0].contentRect.width,panelHeight:.85*t[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this.fillGraphData()}},{key:"componentDidUpdate",value:function(e){var t=this.state,n=t.prev_times,r=t.refresh,i=t.clear,a=t.need_update,o=n.start!==this.props.robotSceneManager.currStartTime()||n.end!==this.props.robotSceneManager.currEndTime(),s=n.curr!==this.props.robotSceneManager.currTime();o&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}}),(s||r||i||a)&&this.fillGraphData(o,s),this.props.force_update!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph(),this.props.graph}},{key:"onCurrTimeChange",value:function(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}},{key:"onStartTimeChange",value:function(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}},{key:"onEndTimeChange",value:function(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}},{key:"render",value:function(){var e,t=this,n=this.times,r=this.values,i=this.props.robotScene,a=this.state,o=(a.zoomed_times,a.color_map),u=a.prev_times,l=a.panelHeight,c=a.panelWidth,h=a.line_names,f=a.line_ids,d=[],p=s(h);try{for(p.s();!(e=p.n()).done;){var v=e.value;d.push(o.get(v))}}catch(Fq){p.e(Fq)}finally{p.f()}var m=this.props.robotSceneManager.getCurrGraph()===this.props.graph,g=void 0===i?"Time Warp":i.name();return(0,rr.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor(),overflow:"auto"},children:[(0,rr.jsxs)("div",{className:"LegendMessage",children:[(0,rr.jsx)(fV,{buttonValue:"Legend",title:"Click and drag to open the legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){return["LineGraphLegend&".concat(Lb(4),"&").concat(t.props.graph.id()),function(e){}]}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.TimeWarpedGraphPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsx)(eq,{times:n,vals:r,startTime:u.start,endTime:u.end,currTime:u.curr,isZoom:!1,isDiff:!1,isTimeWarp:!0,line_names:h,line_colors:d,title:g,width:c,height:l,line_ids:f,prev_map:new Map,selected:m,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this)})]})}}]),r}(t.Component),fq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i._panel_resize_observer=void 0,i.w=void 0,i.h=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i)),i.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,line_names:i.props.graph.lineNames(),line_ids:i.props.graph.lineIds(),line_colors:i.props.graph.lineColors(),panelHeight:0,panelWidth:294},i.w=0,i.h=0,i}return(0,l.Z)(r,[{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this._panel_resize_observer=new ResizeObserver((function(t){e.setState({panelWidth:t[0].contentRect.width,panelHeight:t[0].contentRect.height}),e._graphDiv.current&&e._graphDiv.current.children.length>0&&e._graphDiv.current.removeChild(e._graphDiv.current.children[0]);var n=e.drawGraph(t[0].contentRect.width,t[0].contentRect.height);n&&TC(e._graphDiv.current).append("svg").attr("width",e.w).attr("height",e.h).node().appendChild(n)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)}},{key:"componentDidUpdate",value:function(e){var t=!Yb().isEqual(new Set(this.state.line_colors),new Set(this.props.graph.lineColors()))||this.state.line_colors.length!==this.props.graph.lineColors().length,n=!Yb().isEqual(new Set(this.state.line_names),new Set(this.props.graph.lineNames()))||this.state.line_names.length!==this.props.graph.lineNames().length;if(t||n){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]),this.setState({line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors()});var r=this.drawGraph();r&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(r)}}},{key:"createOnClickHandler",value:function(e,t){var n=this;return function(){n.props.graph.setDeleteLine(e,t),n.props.updateLegendState(!0)}}},{key:"drawGraph",value:function(e,t){var n=this,r=this.props.graph,i=r.lineNames(),a=r.lineIds(),o=r.lineColors(),s=this.state,u=(s.margin,s.prev_lines),l=s.panelHeight,c=s.panelWidth,h=void 0===e?c:e,f=void 0===t?l:t,d=h,p=TC(this._graphDiv.current).append("svg").remove().attr("width",h).attr("height",f).append("g"),v=5;v+=18;for(var m=function(e){p.append("circle").attr("fill",o[e]).attr("cx",15).attr("cy",v).attr("r",8);var t=i[e];if(!r.isDiff()&&!r.isTimeWarp()){var s=.99*d-16;p.append("foreignObject").attr("x",0+s).attr("y",v-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",n.createOnClickHandler(a[e],o[e])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n')}var u=.9*d-16-16,l=20*Math.ceil(7*t.length/u),c=p.append("foreignObject").attr("x",25).attr("y",v-8).attr("width",u).attr("height",l);a[e],c.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",o[e]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(t,"</p>")),v+=l+5},g=0;g<i.length;g++)m(g);return this.w=h,this.h=50*(i.length+1)+100,this.setState({prev_lines:u}),p.node()}},{key:"render",value:function(){return(0,rr.jsx)("div",{children:(0,rr.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}]),r}(t.Component),dq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i._panel_resize_observer=void 0,i.w=void 0,i.h=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i)),i.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,panelHeight:0,panelWidth:294},i.w=0,i.h=0,i}return(0,l.Z)(r,[{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this._panel_resize_observer=new ResizeObserver((function(t){e.setState({panelWidth:t[0].contentRect.width,panelHeight:t[0].contentRect.height}),e._graphDiv.current&&e._graphDiv.current.children.length>0&&e._graphDiv.current.removeChild(e._graphDiv.current.children[0]);var n=e.drawGraph(t[0].contentRect.width,t[0].contentRect.height);n&&TC(e._graphDiv.current).append("svg").attr("width",e.w).attr("height",e.h).node().appendChild(n)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)}},{key:"componentDidUpdate",value:function(e){if(this.props.robotScene.update()){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();console.log("width "+this.w+" height "+this.h),t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t),this.props.robotScene.setUpdate(!1)}}},{key:"onDeleteTraceHandler",value:function(e){var t=this;return function(){var n=br(e.split("&"),2),r=n[0],i=n[1],a=br(r.split("#"),2),o=a[0],s=a[1],u=t.props,l=u.robotScene,c=u.robotSceneManager.robotSceneById(o);if(void 0!==c){var h=c.robotById(s);if(void 0!==h){var f=h.jointMap().get(i);void 0===f&&void 0===(f=h.linkMap().get(i))&&i!==h.name()||(c===l?l.removeChildTrace(h,f):c.removeGhostTracesFrom(h,f,l))}}}}},{key:"onDeleteArrowHandler",value:function(e){var t=this;return function(){t.props.robotScene.removeArrow(e)}}},{key:"getTraceName",value:function(e){var t,n=e.robot(),r=e.robotPart();return(null===(t=n.parentScene())||void 0===t?void 0:t.name())+"_"+n.name()+"_"+(null===r||void 0===r?void 0:r.name())}},{key:"createLineNames",value:function(e,t){var n,r=[],i=[],a=[],o=[],u=[],l=[],c=(this.props.robotScene,s(e));try{for(c.s();!(n=c.n()).done;){var h,f,d,p,v=n.value,m=v.robot(),g=v.robotPart(),y=(null===(h=m.parentScene())||void 0===h?void 0:h.name())+"_"+m.name()+"_"+(null===g||void 0===g?void 0:g.name()),b=(null===(f=m.parentScene())||void 0===f?void 0:f.id().value())+"#"+m.id().value()+"&"+(null===g||void 0===g?void 0:g.name());if(void 0===g)y=(null===(d=m.parentScene())||void 0===d?void 0:d.name())+"_"+m.name()+"_"+m.name(),b=(null===(p=m.parentScene())||void 0===p?void 0:p.id().value())+"#"+m.id().value()+"&"+m.name();var x=v.color();r.push(y),i.push(b),a.push(x)}}catch(Fq){c.e(Fq)}finally{c.f()}var w,_=s(t);try{for(_.s();!(w=_.n()).done;){var S=w.value,k="From "+this.getTraceName(S.traceFrom())+" to "+this.getTraceName(S.traceTo()),M=S.id(),T=S.color();o.push(k),u.push(M),l.push(T)}}catch(Fq){_.e(Fq)}finally{_.f()}return[r,i,a,o,u,l]}},{key:"drawGraph",value:function(e,t){var n=this,r=this.props.robotScene,i=this.state,a=(i.margin,i.prev_lines),o=i.panelHeight,s=i.panelWidth,u=r.getAllTraces(),l=r.getAllArrows(),c=br(this.createLineNames(u,l),6),h=c[0],f=c[1],d=c[2],p=c[3],v=c[4],m=c[5],g=void 0===e?s:e,y=void 0===t?o:t,b=g,x=TC(this._graphDiv.current).append("svg").remove().attr("width",g).attr("height",y).append("g"),w=5;x.append("foreignObject").attr("x",15).attr("y",w).attr("width",50).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Traces:</p>');var _=x.append("g").attr("class","context-menu").style("display","none");document.addEventListener("click",(function(){_.style("display","none")}));var S=_.append("g").attr("class","option").style("cursor","pointer").on("click",(function(){console.log("Option 1 clicked")}));S.append("rect").attr("width",140).attr("height",20).attr("fill","white"),S.append("text").attr("x",60).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Select for compare");var k=_.append("g").attr("class","option").attr("transform","translate(0,".concat(20,")")).style("cursor","pointer").on("click",(function(){console.log("Option 2 clicked")}));k.append("rect").attr("width",140).attr("height",20).attr("fill","white"),k.append("text").attr("x",70).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Compare with selected");var M='\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n';w+=30;for(var T=function(e){x.append("circle").attr("fill",d[e]).attr("cx",15).attr("cy",w).attr("r",8);var t=h[e],i=.99*b-16;x.append("foreignObject").attr("x",0+i).attr("y",w-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",n.onDeleteTraceHandler(f[e])).html(M);var a,o=.9*b-16-16,s=20*Math.ceil(7*t.length/o),l=x.append("foreignObject").attr("x",25).attr("y",w-8).attr("width",o).attr("height",s);a=u[e],l.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",d[e]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(t,"</p>")).on("contextmenu",(function(e){e.preventDefault();var t=x.node().getBoundingClientRect(),n=e.pageX-t.left,i=e.pageY-t.top;_.attr("transform","translate(".concat(n,", ").concat(i,")")),_.style("display","block"),S.on("click",(function(){r.setTraceFrom(a)})),k.on("click",(function(){r.setTraceTo(a)})),x.node().appendChild(_.node())})),w+=s+5},E=0;E<h.length;E++)T(E);l.length>0&&(x.append("foreignObject").attr("x",15).attr("y",w).attr("width",200).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Difference between Traces:</p>'),w+=30);for(var C=function(e){x.append("circle").attr("fill",m[e]).attr("cx",15).attr("cy",w).attr("r",8);var t=p[e],r=.99*b-16;x.append("foreignObject").attr("x",0+r).attr("y",w-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",n.onDeleteArrowHandler(v[e])).html(M);var i=.9*b-16-16,a=20*Math.ceil(7*t.length/i),o=x.append("foreignObject").attr("x",25).attr("y",w-8).attr("width",i).attr("height",a);l[e],o.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",m[e]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(t,"</p>")),w+=a+5},A=0;A<p.length;A++)C(A);return this.w=g,this.h=50*(h.length+p.length+1)+100,this.setState({prev_lines:a}),x.node()}},{key:"render",value:function(){return(0,rr.jsx)("div",{children:(0,rr.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}]),r}(t.Component),pq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._quaternionDiv=void 0,i.state={counter:0,update:!1},i._quaternionDiv=(0,t.createRef)(),i}return(0,l.Z)(r,[{key:"componentDidUpdate",value:function(e){}},{key:"onBackgroundColorChange",value:function(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setBackgroundColor(e)}},{key:"onLineGroupColorChange",value:function(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setLineGroupColor(e)}},{key:"onChangeLineOpacity",value:function(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setLineGroupOpacity(e)}},{key:"onCheckWorldFrame",value:function(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setWorldFrameObjectVisibility(e.currentTarget.checked),this.setState({update:!this.state.update})}},{key:"render",value:function(){var e=this,t=this.props.currQuaternionSpaceScene;return(0,rr.jsxs)("div",{className:"SceneOptionPanel",ref:this._quaternionDiv,children:[(0,rr.jsxs)("div",{className:"PopUpGroup",children:[(0,rr.jsx)(i$,{labelValue:"Name:",value:void 0===t?"No Scene":t.name(),onReturnPressed:function(n){void 0!==t&&(t.setName(n),e.props.forceUpdateTabNames())}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.QSceneOptionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsxs)("div",{className:"ButtonsContainer",style:{display:"flex",gap:"1rem"},children:[(0,rr.jsx)(fV,{buttonValue:"New Quaternion Space",title:"Click and drag to create a new quaternion space",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var e=(new tx).value();return["QuaternionSpaceScene&".concat(e,"&motion"),function(e){}]}}),(0,rr.jsx)(fV,{buttonValue:"Legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var e=void 0===t?Lb(4):t.id().value();return["QuaternionSpaceLegend&".concat(Lb(4),"&").concat(e),function(e){}]}})]}),(0,rr.jsxs)("div",{className:"top-line bottom-line",children:[(0,rr.jsxs)("div",{className:"row-container",children:[(0,rr.jsx)("label",{children:"Show World Frame"}),(0,rr.jsx)("label",{className:"switch-right-label",children:"Show"}),(0,rr.jsx)(n$,{checked:null===t||void 0===t?void 0:t.isWorldFrameObjectVisible(),onChange:this.onCheckWorldFrame.bind(this)}),(0,rr.jsx)("label",{className:"switch-left-label",children:"Hide"})]}),(0,rr.jsx)(hV,{label:"Opacity of Longitude and Latitude: ",min:0,max:1,step:.01,value:null===t||void 0===t?void 0:t.lineGroupOpacity(),onChange:this.onChangeLineOpacity.bind(this)})]}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===t||void 0===t?void 0:t.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Longitude and Latitude Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===t||void 0===t?void 0:t.lineGroupColor(),onColorMapChange:this.onLineGroupColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})}}]),r}(t.Component),vq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._orbitView=void 0,i._orbitCamera=void 0,i._canvasRef=void 0,i._resize_observer=void 0,i._raycaster=void 0,i._pointer=void 0,i._syncViewCallback=void 0,i._orbitCamera=new db.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3),i._orbitCamera.position.set(2,2,2),i._orbitCamera.lookAt(0,0,0),i._orbitCamera.up.set(0,0,1),i._raycaster=new db.Raycaster,i.onCanvasMouseDown=i.onCanvasMouseDown.bind((0,c.Z)(i)),i._pointer=new db.Mesh(new db.SphereGeometry(.01,30,30),new db.MeshBasicMaterial({transparent:!0,opacity:.75,color:new db.Color(16777215*Math.random())})),i._canvasRef=t.createRef(),i.initScene(i.props.quaternionSpaceScene),i}return(0,l.Z)(r,[{key:"canSelectRobot",value:function(){var e;return null!==(e=this.props.allowSelecting)&&void 0!==e&&e&&this.props.robotSceneManager.allowRobotSelection()}},{key:"addPointer",value:function(e,t){if(this.props.allowSelecting){var n=e.scene();-1===n.children.indexOf(this._pointer)&&n.add(this._pointer),this._pointer.position.copy(t),e.render()}}},{key:"removePointer",value:function(e){var t=e.scene();-1!==t.children.indexOf(this._pointer)&&(t.remove(this._pointer),e.render())}},{key:"initScene",value:function(e){e.runOnce(hr.INIT,(function(){e.scene().background=new db.Color(e.backgroundColor()),e.scene().position.set(0,0,0);var t=16777215,n=new db.DirectionalLight(t,1);n.castShadow=!0,n.shadow.mapSize.setScalar(1024),n.position.set(5,5,30),n.shadow.bias=-5e-4,n.lookAt(0,0,0),e.scene().add(n);var r=new db.AmbientLight(t,.2);e.scene().add(r);var i=new db.Mesh(new db.PlaneBufferGeometry,new db.ShadowMaterial({opacity:.25}));i.scale.setScalar(30),i.receiveShadow=!0,e.scene().add(i)}))}},{key:"onCanvasMouseDown",value:function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.props.robotSceneManager.setCurrQuaternionSpaceScene(this.props.quaternionSpaceScene.id().value()),this.props.setQuaternionSceneOptionPanelActive()}},{key:"mount",value:function(e,t){var n=this;if(t){this.initScene(e);var r=new K$(this._orbitCamera,t),i=r.update.bind(r);r.update=function(){var t=i();return n.props.robotSceneManager.setCurrSyncViewpoint([n._orbitCamera.getWorldPosition(new db.Vector3),(new db.Quaternion).setFromEuler(n._orbitCamera.rotation)]),e.render(),t},r.target.y=0,r.enableDamping=!0,r.dampingFactor=.5,r.rotateSpeed=.5,r.update(),this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._syncViewCallback=function(e){var t=br(e,2),r=t[0],i=t[1];n._orbitCamera.position.copy(r),n._orbitCamera.rotation.setFromQuaternion(i),n.props.quaternionSpaceScene.render()},this._orbitView=new $$(t,this._orbitCamera,(function(e){var t=Math.floor(e.clientWidth),n=Math.floor(e.clientHeight);e.width===t&&e.height===n||(e.width=t,e.height=n)})),e.addView(this._orbitView),e.render(),t.addEventListener("click",this.onCanvasMouseDown),this._resize_observer&&this._resize_observer.unobserve(t),this._resize_observer=new ResizeObserver((function(){n.props.quaternionSpaceScene.render()})),this._resize_observer.observe(t)}}},{key:"unmount",value:function(e,t){var n;(this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._orbitView&&(e.removeView(this._orbitView),this._orbitView=void 0),t)&&(t.removeEventListener("click",this.onCanvasMouseDown),null===(n=this._resize_observer)||void 0===n||n.unobserve(t));this.removePointer(e)}},{key:"componentDidUpdate",value:function(e){e.quaternionSpaceScene!==this.props.quaternionSpaceScene&&(this.unmount(e.quaternionSpaceScene,this._canvasRef.current),this.mount(this.props.quaternionSpaceScene,this._canvasRef.current))}},{key:"componentDidMount",value:function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.mount(this.props.quaternionSpaceScene,this._canvasRef.current)}},{key:"componentWillUnmount",value:function(){this.unmount(this.props.quaternionSpaceScene,this._canvasRef.current)}},{key:"decomposeId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"dragOverHandler",value:function(e){e.preventDefault()}},{key:"dropHandler",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("text/plain"),n=br(this.decomposeId(t),3),r=n[0],i=n[1],a=n[2],o=this.props.robotSceneManager.robotSceneById(r);if(void 0!==o){this.props.robotSceneManager.isActiveRobotScene(o)||this.props.robotSceneManager.activateRobotScene(o);var s=o.getRobotByName(i);if(void 0!==s){var u=this.props.quaternionSpaceScene;if(void 0!==a){var l=s.jointMap().get(a);void 0===l&&(l=s.linkMap().get(a)),u.hasChildTrace(s,l)||u.addChildTrace(o,s,sR.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),l)}}}}},{key:"render",value:function(){return(0,rr.jsx)("div",{className:"RobotCanvas",onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),children:(0,rr.jsx)("canvas",{className:"RobotCanvasCanvas",ref:this._canvasRef})})}}]),r}(t.Component),mq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i._panel_resize_observer=void 0,i.w=void 0,i.h=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i)),i.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,panelHeight:0,panelWidth:294},i.w=0,i.h=0,i}return(0,l.Z)(r,[{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this._panel_resize_observer=new ResizeObserver((function(t){e.setState({panelWidth:t[0].contentRect.width,panelHeight:t[0].contentRect.height}),e._graphDiv.current&&e._graphDiv.current.children.length>0&&e._graphDiv.current.removeChild(e._graphDiv.current.children[0]);var n=e.drawGraph(t[0].contentRect.width,t[0].contentRect.height);n&&TC(e._graphDiv.current).append("svg").attr("width",e.w).attr("height",e.h).node().appendChild(n)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)}},{key:"componentDidUpdate",value:function(e){if(this.props.quaternionSpaceScene.update()){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t),this.props.quaternionSpaceScene.setUpdate(!1)}}},{key:"onDeleteTraceHandler",value:function(e){var t=this;return function(){var n=br(e.split("&"),2),r=n[0],i=n[1],a=br(r.split("#"),2),o=a[0],s=a[1],u=t.props,l=u.quaternionSpaceScene,c=u.robotSceneManager.robotSceneById(o);if(void 0!==c){var h=c.robotById(s);if(void 0!==h){var f=h.jointMap().get(i);void 0===f&&void 0===(f=h.linkMap().get(i))&&i!==h.name()||l.removeChildTrace(h,f)}}}}},{key:"getTraceName",value:function(e){var t,n=e.robot(),r=e.robotPart();return(null===(t=n.parentScene())||void 0===t?void 0:t.name())+"_"+n.name()+"_"+(null===r||void 0===r?void 0:r.name())}},{key:"createLineNames",value:function(e){var t,n=[],r=[],i=[],a=(this.props.quaternionSpaceScene,s(e));try{for(a.s();!(t=a.n()).done;){var o,u,l,c,h=t.value,f=h.robot(),d=h.robotPart(),p=(null===(o=f.parentScene())||void 0===o?void 0:o.name())+"_"+f.name()+"_"+(null===d||void 0===d?void 0:d.name()),v=(null===(u=f.parentScene())||void 0===u?void 0:u.id().value())+"#"+f.id().value()+"&"+(null===d||void 0===d?void 0:d.name());if(void 0===d)p=(null===(l=f.parentScene())||void 0===l?void 0:l.name())+"_"+f.name()+"_"+f.name(),v=(null===(c=f.parentScene())||void 0===c?void 0:c.id().value())+"#"+f.id().value()+"&"+f.name();var m=h.color();n.push(p),r.push(v),i.push(m)}}catch(Fq){a.e(Fq)}finally{a.f()}return[n,r,i]}},{key:"drawGraph",value:function(e,t){var n=this,r=this.props.quaternionSpaceScene,i=this.state,a=(i.margin,i.prev_lines),o=i.panelHeight,s=i.panelWidth,u=r.getAllTraces(),l=br(this.createLineNames(u),3),c=l[0],h=l[1],f=l[2],d=void 0===e?s:e,p=void 0===t?o:t,v=d,m=TC(this._graphDiv.current).append("svg").remove().attr("width",d).attr("height",p).append("g"),g=5;m.append("foreignObject").attr("x",15).attr("y",g).attr("width",50).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Traces:</p>');var y=m.append("g").attr("class","context-menu").style("display","none");document.addEventListener("click",(function(){y.style("display","none")}));var b=y.append("g").attr("class","option").style("cursor","pointer").on("click",(function(){console.log("Option 1 clicked")}));b.append("rect").attr("width",80).attr("height",20).attr("fill","white"),b.append("text").attr("x",40).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Flip Trace");g+=30;for(var x=function(e){m.append("circle").attr("fill",f[e]).attr("cx",15).attr("cy",g).attr("r",8);var t=c[e],r=.99*v-16;m.append("foreignObject").attr("x",0+r).attr("y",g-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",n.onDeleteTraceHandler(h[e])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n');var i,a=.9*v-16-16,o=20*Math.ceil(7*t.length/a),s=m.append("foreignObject").attr("x",25).attr("y",g-8).attr("width",a).attr("height",o);i=u[e],s.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",f[e]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(t,"</p>")).on("contextmenu",(function(e){e.preventDefault();var t=m.node().getBoundingClientRect(),n=e.pageX-t.left,r=e.pageY-t.top;y.attr("transform","translate(".concat(n,", ").concat(r,")")),y.style("display","block"),b.on("click",(function(){i.flipTrace()})),m.node().appendChild(y.node())})),g+=o+5},w=0;w<c.length;w++)x(w);return this.w=d,this.h=50*(c.length+1)+100,this.setState({prev_lines:a}),m.node()}},{key:"render",value:function(){return(0,rr.jsx)("div",{children:(0,rr.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}]),r}(t.Component),gq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.state={counter:0,panelHeight:620,panelWidth:1200,currRobot:new Map,need_update:!0},i._graphDiv=(0,t.createRef)(),i}return(0,l.Z)(r,[{key:"componentDidUpdate",value:function(e){}},{key:"onChangeLineWidth",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setLineWidth(e)}},{key:"onChangeNNeighbors",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setNNeighbors(e)}},{key:"onChangeMinDis",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setMinDis(e)}},{key:"onChangeSpread",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setSpread(e)}},{key:"onBackgroundColorChange",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setBackgroundColor(e),this.props.forceUpdateTabNames()}},{key:"onAxisColorChange",value:function(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setAxisColor(e),this.props.forceUpdateTabNames()}},{key:"render",value:function(){var e,t,n,r=this,i=this.props.currSelectedGraph;return(0,rr.jsxs)("div",{className:"GraphOptionPanel",ref:this._graphDiv,children:[(0,rr.jsxs)("div",{style:{marginBottom:"5px"},className:"PopUpGroup",children:[(0,rr.jsx)(i$,{labelValue:"Name:",value:void 0===i?"No Umap Graph":i.name(),onReturnPressed:function(e){void 0!==i&&(i.setName(e),r.props.forceUpdateTabNames())}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.UmapGraphOptionPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsx)("div",{className:"ButtonsContainer",children:(0,rr.jsx)(fV,{buttonValue:"New Umap Graph",title:"Click and drag to create a new Umap Graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){var e=Lb(4);return["UmapGraph&".concat(e,"&motion"),function(e){}]}})}),(0,rr.jsxs)("div",{className:"top-line bottom-line",children:[(0,rr.jsx)(hV,{label:"Line width: ",min:.1,max:10,step:.1,value:null===i||void 0===i?void 0:i.lineWidth(),onChange:this.onChangeLineWidth.bind(this)}),(0,rr.jsx)(hV,{label:"number of neighbors: ",min:1,max:100,step:1,value:null===i||void 0===i?void 0:i.nNeighbors(),onMouseUp:null===(e=this.props.robotSceneManager.getCurrUmapGraph())||void 0===e?void 0:e.setNNeighbors.bind(this.props.robotSceneManager.getCurrUmapGraph())}),(0,rr.jsx)(hV,{label:"min distance: ",min:.1,max:10,step:.1,value:null===i||void 0===i?void 0:i.minDis(),onMouseUp:null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t?void 0:t.setMinDis.bind(this.props.robotSceneManager.getCurrUmapGraph())}),(0,rr.jsx)(hV,{label:"spread: ",min:.1,max:1,step:.01,value:null===i||void 0===i?void 0:i.spread(),onMouseUp:null===(n=this.props.robotSceneManager.getCurrUmapGraph())||void 0===n?void 0:n.setSpread.bind(this.props.robotSceneManager.getCurrUmapGraph())})]}),(0,rr.jsxs)("div",{children:[(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===i||void 0===i?void 0:i.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,rr.jsx)(jV,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,rr.jsxs)(qV,{children:[(0,rr.jsx)(cG,{children:(0,rr.jsx)(uG,{style:{fontWeight:"bold"},children:"Axis Color:"})}),(0,rr.jsx)(fG,{children:(0,rr.jsx)(V$,{color:null===i||void 0===i?void 0:i.axisColor(),onColorMapChange:this.onAxisColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})]})}}]),r}(t.Component),yq=n(1842),bq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i));var a=i.props;a.width,a.height;return i.state={prev_x:null,prev_y:null,margin:{top:0,right:10,bottom:20,left:10},time_min:-999,time_max:-999,val_concat:[],newCurr:i.props.currTime,mouseXCoord:-1,originalMouseXCoord:-1,currDragItem:null},i}return(0,l.Z)(r,[{key:"componentDidMount",value:function(){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var e=this.props,t=e.height,n=e.width,r=this.drawGraph(!0,!0);r&&TC(this._graphDiv.current).append("svg").attr("width",n).attr("height",t).node().appendChild(r)}},{key:"componentDidUpdate",value:function(e){var t=e.startTime!==this.props.startTime||e.endTime!==this.props.endTime,n=!Yb().isEqual(new Set(e.line_colors),new Set(this.props.line_colors))&&e.line_colors.length===this.props.line_colors.length,r=e.height!==this.props.height||e.width!==this.props.width,i=e.currTime!==this.props.currTime,a=e.lineWidth!==this.props.lineWidth,o=e.axisColor!==this.props.axisColor;if(e.times!==this.props.times||e.xVals!==this.props.xVals||r||n||a||o||t||i){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var s=this.props,u=s.width,l=s.height,c=this.drawGraph(t,n,r);c&&TC(this._graphDiv.current).append("svg").attr("width",u).attr("height",l).node().appendChild(c)}}},{key:"filterData",value:function(e,t){var n=[],r=[],i=[],a=this.props,o=a.times,s=a.xVals,u=a.yVals;if(0===o.length)return[[[0]],[[0]],[[0]]];for(var l=0;l<o.length;l++){var c=0;n[l]=[],r[l]=[],i[l]=[];var h=Sb(o[l],e),f=_b(o[l],t);void 0===h&&(h=0),void 0===f&&(f=o[l].length-1);for(var d=h;d<f;d++)n[l][c]=o[l][d],r[l][c]=s[l][d],i[l][c]=u[l][d],c++}return[n,r,i]}},{key:"parseData",value:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push({x:e[r],y:t[r]});return n}},{key:"concatData",value:function(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},{key:"calculateOffset",value:function(e,t,n,r){return n===t?0:(r-t)/(n-t)*e}},{key:"getCurrTimeIndex",value:function(e,t){return bb(e,t)}},{key:"getCurrCoordinate",value:function(e,t,n,r,i){var a=e,o=e+1;if(o>=t.length)return[t[t.length-1],n[t.length-1]];if(-1===a)return[t[0],n[0]];var s=function(e,t,n){return e*(1-n)+t*n},u=(r-i[a])/(i[o]-i[a]);return[s(t[a],t[o],u),s(n[a],n[o],u)]}},{key:"currMouse",value:function(e){this.setState({originalMouseXCoord:e.x})}},{key:"endMouse",value:function(e){this.setState({mouseXCoord:-1,originalMouseXCoord:-1})}},{key:"calculateDistance",value:function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}},{key:"filterDataByDistance",value:function(e){var t=[];if(0==e.length)return t;var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)this.calculateDistance(e[r],e[r-1])<=2?n.push(e[r]):(t.push(n),(n=[]).push(e[r]));return n.length>0&&t.push(n),t}},{key:"drawGraph",value:function(e,t,n){for(var r=this.props,i=r.times,a=r.xVals,o=r.yVals,u=r.startTime,l=r.endTime,c=r.currTime,h=r.isTimeWarp,f=r.lineWidth,d=r.axisColor,p=(r.line_names,r.line_colors),v=r.line_ids,m=r.onGraphUpdate,g=this.props.width,y=this.props.height,b=this.state,x=b.margin,w=(b.prev_x,b.prev_y,g-x.left-x.right),_=y-x.top-x.bottom,S=TC(this._graphDiv.current).append("svg").remove().attr("width",w+x.left+x.right).attr("height",_+x.top+x.bottom).append("g").attr("transform","translate(".concat(x.left,",     ").concat(x.top,")")),k=br(this.filterData(u,l),3),M=(k[0],k[1]),T=k[2],E=[this.parseData(M[0],T[0])],C=1;C<M.length;C++)E.push(this.parseData(M[C],T[C])),console.log(C+" "+E[C].length);for(var A,R,P=this.concatData(M),L=this.concatData(T),O=0;O<a.length;O++){var N=this.getCurrTimeIndex(i[O],c),D=br(this.getCurrCoordinate(N,a[O],o[O],c,i[O]),2),I=D[0],j=D[1],F=this.calculateOffset(w,lk(P),uk(P),I),z=this.calculateOffset(_,lk(L),uk(L),j);S.append("circle").attr("cx",F).attr("cy",_-z).attr("r",4).attr("fill","#b00").attr("fill-opacity","75%")}m(!1),A=BA().range([0,w]).domain(sk(P)),R=BA().range([_,0]).domain(sk(L));var B,U=bk(A).tickSize(0).tickValues([]),V=xk(R).tickSize(0).tickValues([]),G=(B=A,yk(1,B)).tickSize(0).tickValues([]),H=function(e){return yk(2,e)}(R).tickSize(0).tickValues([]),W=S.append("g").attr("transform","translate(0, ".concat(_,")")).classed("GraphAxis",!0).call(U),Z=S.append("g").classed("GraphAxis",!0).call(V),$=S.append("g").classed("GraphAxis",!0).call(G),q=S.append("g").attr("transform","translate(".concat(w,", 0)")).classed("GraphAxis",!0).call(H);W.selectAll("line, path").style("stroke",d),Z.selectAll("line, path").style("stroke",d),$.selectAll("line, path").style("stroke",d),q.selectAll("line, path").style("stroke",d);var X=rR().x((function(e){return A(e.x)})).y((function(e){return R(e.y)}));if(h){var Y=S.append("path").remove().append("path").data([E[1]]).attr("class","line").attr("fill","none").attr("stroke",p[1]).attr("stroke-width",f).attr("d",X).node();S.node().appendChild(Y);var K=S.append("path").remove().append("path").data([E[0]]).attr("class","line").attr("fill","none").attr("stroke",p[0]).attr("stroke-width",f).attr("d",X).node();S.node().appendChild(K)}else for(var J=0;J<E.length;J++){v[J];var Q,ee=s(this.filterDataByDistance(E[J]));try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value,ne=S.append("path").remove().append("path").data([te]).attr("class","line").attr("fill","none").attr("stroke",p[J]).attr("stroke-width",f).attr("d",X).node();S.node().appendChild(ne)}}catch(Fq){ee.e(Fq)}finally{ee.f()}}return this.setState({prev_x:A,prev_y:R}),m(!0),S.node()}},{key:"render",value:function(){var e=this.props;e.isTimeWarp,e.times,e.selected,e.axisColor;return(0,rr.jsxs)("div",{children:[(0,rr.jsx)("div",{style:{textAlign:"center"}}),(0,rr.jsx)("div",{className:"UmapGraph",ref:this._graphDiv})]})}}],[{key:"TimeFromXPosition",value:function(e,t,n,r){var i=r/e*(n-t);return i>n?i=n:i<t&&(i=t),i}}]),r}(t.Component),xq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._panel_resize_observer=void 0,i._graphDiv=void 0,i.times=void 0,i.xVals=void 0,i.yVals=void 0,i.clickHandler=function(){var e,t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((function(e){return e.classList.remove("selected")})),(t=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=i._graphDiv.current)||void 0===e||e.classList.add("selected"),i.props.robotSceneManager.setCurrUmapGraph(i.props.graph.id()),i.props.setUmapGraphOptionPanelActive()},i.fillGraphData.bind((0,c.Z)(i));var a=i.props.robotSceneManager;return i.state={counter:0,line_names:[],line_ids:[],line_colors:[],prev_times:{start:a.currStartTime(),end:a.currEndTime(),curr:a.currTime()},use_timeWarp:!1,color_map:new Map,currRobots:new Map,panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1,nNeighbors:i.props.graph.nNeighbors(),minDis:i.props.graph.minDis(),spread:i.props.graph.spread()},i._graphDiv=(0,t.createRef)(),i.times=[],i.xVals=[],i.yVals=[],i}return(0,l.Z)(r,[{key:"onGraphUpdate",value:function(e){var t=this.state.graph_update;return e?(this.setState({graph_update:!1}),!1):t}},{key:"getAllArticulatedJointsPositions",value:function(e,t,n){var r,i=this.props.robotSceneManager,a=i.startTime(),o=i.endTime(),u=e.timeWarping();r=n&&u?u.timeWarpMap()[1]:sR.frameRange(a,o,20,2e3);var l,c=[],h=[],f=[],d=s(t.getArticuatedJointMap());try{for(d.s();!(l=d.n()).done;){var p=br(l.value,2)[1],v=e.frameDataFor(t,r,p);f.push(v.jointAngles),h=v.times}}catch(Fq){d.e(Fq)}finally{d.f()}if(f.length>0)for(var m=0;m<f[0].length;m++){for(var g=[],y=0;y<f.length;y++)g.push(f[y][m]);c.push(g)}return[h,c]}},{key:"convertJointDataToUmap",value:function(){var e=yr(mr().mark((function e(t){var n,r,i;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dr.setPopupHelpPage({page:qn.LoadingStarted,type:"UMAP"}),n=this.props.graph,r=new yq.u({nNeighbors:n.nNeighbors(),minDist:n.minDis(),spread:n.spread()}),e.next=5,r.fitAsync(t,(function(e){}));case 5:return i=e.sent,dr.setPopupHelpPage({page:qn.LoadingSuccess,type:"UMAP"}),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"generateLineName",value:function(e){var t=br(this.decomposeId(e),2),n=t[0],r=t[1],i=this.props.robotSceneManager.robotSceneById(n);return(null===i||void 0===i?void 0:i.name())+"_"+r}},{key:"decomposeUmapData",value:function(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r][0]),n.push(e[r][1]);return[t,n]}},{key:"compareJointData",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(Math.abs(e[n]-t[n])>.01)return!1;return!0}},{key:"filterUmapData",value:function(e,t){for(var n=1;n<e.length;n++)this.compareJointData(e[n-1],e[n])&&(t[n]=t[n-1]);return t}},{key:"filterJointData",value:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++)0!==i&&this.compareJointData(e[i-1],e[i])||(n.push(e[i]),r.push(t[i]));return[n,r]}},{key:"fillGraphData",value:function(){var e=yr(mr().mark((function e(){var t,n,r,i,a,o,u,l,c,h,f,d,v,m,g,y,b,x,w,_,S,k,M,T,E,C,A,R,P,L,O,N,D,I,j,F,z,B,U,V,G;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,n=t.currRobots,r=t.color_map,i=[],a=[],o=[],u=[],l=[],c=[],h=[],f=[],d=[],v=s(n);try{for(v.s();!(m=v.n()).done;)g=br(m.value,2),g[0],y=br(g[1],2),b=y[0],x=y[1],w=this.filterJointData(x,b),_=br(w,2),S=_[0],k=_[1],h=h.concat(S),f.push(k),p()(S.length===k.length),d.push(S.length)}catch(Fq){v.e(Fq)}finally{v.f()}if(0===h.length){e.next=18;break}return e.next=13,this.convertJointDataToUmap(h);case 13:M=e.sent,T=0,E=0,C=s(n);try{for(C.s();!(A=C.n()).done;){for(R=br(A.value,2),P=R[0],L=br(R[1],2),O=L[0],L[1],i.push(this.generateLineName(P)),a.push(P),o.push(r.get(P)),N=M.slice(T,T+d[E]),D=this.decomposeUmapData(N),I=br(D,2),j=I[0],F=I[1],p()(j.length===d[E]),p()(F.length===d[E]),z=0,B=[],U=[],V=[],G=0;G<O.length;G++)z+1<f[E].length&&O[G]>=f[E][z+1]&&z++,B.push(j[z]),U.push(F[z]),V.push(O[G]);u.push(B),l.push(U),c.push(O),T+=d[E],E++}}catch(Fq){C.e(Fq)}finally{C.f()}case 18:this.xVals=u,this.yVals=l,this.times=c,this.props.graph.setLineNames(i),this.props.graph.setLineIds(a),this.props.graph.setLineColors(o),this.setState({line_names:i,line_colors:o,line_ids:a,need_update:!1});case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e,t=this,n=document.querySelectorAll(".RobotCanvasCanvas");n.forEach((function(e){return e.classList.remove("selected")})),(n=document.querySelectorAll(".GraphPanel")).forEach((function(e){return e.classList.remove("selected")})),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((function(e){t.setState({panelWidth:e[0].contentRect.width,panelHeight:.9*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);var r,i=[],a=s(this.props.graph.lineIds());try{for(a.s();!(r=a.n()).done;){var o=r.value,u=br(this.decomposeId(o),2),l=u[0]+"#"+u[1];this.changeLines(l,!0),i.push(l)}}catch(Fq){a.e(Fq)}finally{a.f()}}},{key:"componentDidUpdate",value:function(e){var t=this.props.graph.deleteLine();void 0!==t&&this.state.currRobots.has(t)&&(this.state.currRobots.delete(t),this.changeLines(t,!1),this.props.graph.setDeleteLine(void 0,void 0)),this.props.graph.nNeighbors()===this.state.nNeighbors&&this.props.graph.minDis()===this.state.minDis&&this.props.graph.spread()===this.state.spread||(this.setState({nNeighbors:this.props.graph.nNeighbors(),minDis:this.props.graph.minDis(),spread:this.props.graph.spread()}),this.props.graph.resetColor(),this.fillGraphData());var n=this.state,r=n.prev_times,i=(n.need_update,r.start!==this.props.robotSceneManager.currStartTime()||r.end!==this.props.robotSceneManager.currEndTime()),a=r.curr!==this.props.robotSceneManager.currTime();(i||a)&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}}),this.props.force_update!==e.force_update&&this.setState({need_update:!0})}},{key:"onCurrTimeChange",value:function(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}},{key:"onStartTimeChange",value:function(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}},{key:"onEndTimeChange",value:function(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}},{key:"changeLines",value:function(e,t){if(!this.state.currRobots.has(e)){var n=br(this.decomposeId(e),2),r=n[0],i=n[1],a=this.props.robotSceneManager,o=a.robotSceneById(r);if(void 0!==o){a.isActiveRobotScene(o)||a.activateRobotScene(o);var s=o.getRobotByName(i);if(void 0!==s){if(t){var u=br(this.getAllArticulatedJointsPositions(o,s),2),l=u[0],c=u[1];this.state.currRobots.set(e,[l,c]),this.state.color_map.set(e,this.props.graph.getColor())}else this.state.currRobots.delete(e),this.state.color_map.delete(e);this.fillGraphData()}}}}},{key:"dragOverHandler",value:function(e){e.preventDefault()}},{key:"dropHandler",value:function(e){e.preventDefault();e.target;var t=e.dataTransfer.getData("text/plain");this.changeLines(t,!0)}},{key:"decomposeId",value:function(e){var t=br(e.split("#"),2);return[t[0],t[1]]}},{key:"decomposeDragButtonId",value:function(e){var t=br(e.split("&"),2),n=t[0],r=t[1],i=br(n.split("#"),2);return[i[0],i[1],r]}},{key:"render",value:function(){var e=this,t=this.state,n=t.line_names,r=t.line_ids,i=t.line_colors,a=(t.use_timeWarp,t.color_map,t.prev_times),o=t.panelHeight,s=t.panelWidth;this.props.isTimeWarp;return(0,rr.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,rr.jsxs)("div",{className:"LegendMessage",children:[(0,rr.jsx)(fV,{buttonValue:"Legend",className:"Legend",title:"Click and drag to open the legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:function(){return["UmapLegend&".concat(Lb(4),"&").concat(e.props.graph.id()),function(e){}]}}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.UmapGraphPanel)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})})]}),(0,rr.jsx)(bq,{times:this.times,xVals:this.xVals,yVals:this.yVals,startTime:a.start,endTime:a.end,currTime:a.curr,isTimeWarp:!1,line_names:n,line_colors:i,width:s,height:o,line_ids:r,selected:this.props.robotSceneManager.getCurrUmapGraph()===this.props.graph,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this)})]})}}]),r}(t.Component),wq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;return(0,u.Z)(this,r),(i=n.call(this,e))._graphDiv=void 0,i._panel_resize_observer=void 0,i.w=void 0,i.h=void 0,i._graphDiv=(0,t.createRef)(),i.drawGraph.bind((0,c.Z)(i)),i.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,line_names:i.props.graph.lineNames(),line_ids:i.props.graph.lineIds(),line_colors:i.props.graph.lineColors(),panelHeight:0,panelWidth:294},i.w=0,i.h=0,i}return(0,l.Z)(r,[{key:"componentWillUnmount",value:function(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}},{key:"componentDidMount",value:function(){var e=this;this._panel_resize_observer=new ResizeObserver((function(t){e.setState({panelWidth:t[0].contentRect.width,panelHeight:t[0].contentRect.height}),e._graphDiv.current&&e._graphDiv.current.children.length>0&&e._graphDiv.current.removeChild(e._graphDiv.current.children[0]);var n=e.drawGraph(t[0].contentRect.width,t[0].contentRect.height);n&&TC(e._graphDiv.current).append("svg").attr("width",e.w).attr("height",e.h).node().appendChild(n)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);var t=this.drawGraph();t&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)}},{key:"componentDidUpdate",value:function(e){var t=!Yb().isEqual(new Set(this.state.line_colors),new Set(this.props.graph.lineColors()))||this.state.line_colors.length!==this.props.graph.lineColors().length,n=!Yb().isEqual(new Set(this.state.line_names),new Set(this.props.graph.lineNames()))||this.state.line_names.length!==this.props.graph.lineNames().length;if(t||n){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]),this.setState({line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors()});var r=this.drawGraph();r&&TC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(r)}}},{key:"createOnClickHandler",value:function(e,t){var n=this;return function(){n.props.graph.setDeleteLine(e,t),n.props.updateLegendState(!0)}}},{key:"drawGraph",value:function(e,t){var n=this,r=this.props.graph,i=r.lineNames(),a=r.lineIds(),o=r.lineColors(),s=this.state,u=(s.margin,s.prev_lines),l=s.panelHeight,c=s.panelWidth,h=void 0===e?c:e,f=void 0===t?l:t,d=h,p=TC(this._graphDiv.current).append("svg").remove().attr("width",h).attr("height",f).append("g"),v=5;v+=18;for(var m=function(e){p.append("circle").attr("fill",o[e]).attr("cx",15).attr("cy",v).attr("r",8);var t=i[e],r=.99*d-16;p.append("foreignObject").attr("x",0+r).attr("y",v-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",n.createOnClickHandler(a[e],o[e])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n');var s=.9*d-16-16,u=20*Math.ceil(7*t.length/s),l=p.append("foreignObject").attr("x",25).attr("y",v-8).attr("width",s).attr("height",u);a[e],l.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",o[e]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(t,"</p>")),v+=u+5},g=0;g<i.length;g++)m(g);return this.w=h,this.h=50*(i.length+1)+100,this.setState({prev_lines:u}),p.node()}},{key:"render",value:function(){return(0,rr.jsx)("div",{children:(0,rr.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}]),r}(t.Component),_q="Time Bar",Sq="File",kq="Home",Mq="Selection",Tq="Graph Options",Eq="Scene Options",Cq="Robot Options",Aq=Lb(4),Rq="Graph&".concat(Aq,"&motion"),Pq="Quaternion Options",Lq="UMAP Options",Oq=t.createContext(),Nq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=n.call(this,e))._layoutRef=void 0,i.hasTabById=function(e){var t=i._layoutRef.current;return!!t&&void 0!==t.find(e)},i.removeTabById=function(e){var t=i._layoutRef.current;if(t){var n=t.find(e);void 0!==n&&t.dockMove(n,null,"remove")}},i.robotSceneIdParts=function(e){var t,n=e.indexOf("&"),r=e.slice(0,n),i=e.slice(n+1,e.length),a=void 0;if(-1!==(n=i.indexOf("&"))?(a=i.slice(0,n),t=i.slice(n+1,i.length)):t=i,void 0===a)throw new Error("RobotScene with undefined ID in DockLayout");return[r,a,t]},i.getDefaultLayout=function(){var e="vertical";return{dockbox:{mode:e,children:[{mode:"horizontal",children:[{tabs:[{id:Mq}]},{size:700,tabs:[{id:kq}]},{size:300,mode:e,children:[{tabs:[{id:Sq},{id:Eq},{id:Cq},{id:Tq},{id:Pq},{id:Lq}]},{size:250,tabs:[{id:Rq}]}]}]},{size:30,tabs:[{id:_q}]}]}}},i.getLayout=function(){var e=i._layoutRef.current;return e||void 0},i.missingTab=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Missing Tab";return setTimeout(i.removeTabById,0,e),(0,rr.jsx)("div",{children:t},e)},i.tabWrap=function(e){return function(t){var n=t.id,r=e(n);return void 0!==r?r:(setTimeout(i.removeTabById,0,n),{id:n,closable:!0,cached:!0,title:"Missing Tab",content:(0,rr.jsx)("div",{children:"Missing Tab Data"},"Undefined Tab!")})}},i.loadTab=function(e){if(void 0===e)return console.error("Undefined ID"),{closable:!0,title:"Undefined Tab",content:(0,rr.jsx)("div",{},"Undefined Tab!")};if(e===_q)return{id:_q,title:_q,cached:!0,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(cF,{robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,event_x:i.state.event_x,global:!0})}})};if(e.startsWith("TimeWarpTimeBar")){var t=e.substring("TimeWarpTimeBar".length),n=i.props.robotSceneManager.robotSceneById(t),r=null===n||void 0===n?void 0:n.name();return{id:e,title:void 0===r?"Animate Timewarp":r+" Time Bar",cached:!0,closable:!0,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(cF,{robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,event_x:i.state.event_x,currTimeBar_prop:"double",global:!1,targetSceneId:t})}})}}if(e===Sq)return{id:Sq,title:Sq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(Z$,{robotSceneManager:e.robotSceneManager,animationManager:e.robotScene.animationManager(),onSaveLayout:i.onSaveLayout.bind((0,c.Z)(i)),onRestoreLayout:i.onRestoreLayout.bind((0,c.Z)(i))})}})};if(e===kq)return{id:kq,title:kq,content:i.createHomeTab()};if(e===Tq){var a=i.props.robotSceneManager;return{id:Tq,title:Tq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(oq,{robotSceneManager:a,updateGraphPropertyPanelState:i.updateGraphPropertyPanelState.bind((0,c.Z)(i)),filter_prop:i.state.filter,getParentDockLayout:e.getParentDockLayout,forceUpdateTabNames:i.forceUpdateTabNames.bind((0,c.Z)(i))})}})}}if(e===Eq){i.props.robotSceneManager;return{id:Eq,title:Eq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(H$,{getParentDockLayout:e.getParentDockLayout,robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,animationManager:e.robotScene.animationManager(),addNewTimeWarpTimeBar:i.addNewTimeWarpTimeBar.bind((0,c.Z)(i)),forceUpdateTabNames:i.forceUpdateTabNames.bind((0,c.Z)(i))})}})}}if(e===Cq){var o=i.props.robotSceneManager;return{id:Cq,title:Cq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(cq,{robotSceneManager:o,getParentDockLayout:e.getParentDockLayout,animationManager:e.robotScene.animationManager()})}})}}if(e===Pq){var s=i.props.robotSceneManager;return{id:Pq,title:Pq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(pq,{robotSceneManager:s,getParentDockLayout:e.getParentDockLayout,forceUpdateTabNames:i.forceUpdateTabNames.bind((0,c.Z)(i)),currQuaternionSpaceScene:s.getCurrQuaternionSpaceScene()})}})}}if(e===Lq){var u=i.props.robotSceneManager;return{id:Lq,title:Lq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(gq,{robotSceneManager:u,getParentDockLayout:e.getParentDockLayout,currSelectedGraph:u.getCurrUmapGraph(),forceUpdateTabNames:i.forceUpdateTabNames.bind((0,c.Z)(i))})}})}}if(e===Mq)return{id:Mq,title:Mq,content:(0,rr.jsx)(Oq.Consumer,{children:function(e){return(0,rr.jsx)(aq,{robotSceneManager:e.robotSceneManager,getParentDockLayout:e.getParentDockLayout,setSceneOptionPanelActive:i.setSceneOptionPanelActive.bind((0,c.Z)(i)),setRobotOptionPanelActive:i.setRobotOptionPanelActive.bind((0,c.Z)(i))})}})};if(e===Rq){var l=br(e.split("&"),3),h=l[1],f=(l[2],i.props.robotSceneManager),d=f.getGraphById(h);return void 0===d&&(d=new bR(h,!1,!1),f.addGraph(d),f.setCurrGraph(d.id())),{id:e,closable:!0,cached:!0,title:d.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==d)return(0,rr.jsx)(nq,{robotSceneManager:f,getParentDockLayout:e.getParentDockLayout,eventName:i.state.eventName,add:i.state.add,filter_prop:i.state.filter,is_part_changed:i.state.is_part_changed,force_update:i.state.force_update,graph:d,graph_update:i.state.graph_update,setGraphOptionPanelActive:i.setGraphOptionPanelActive.bind((0,c.Z)(i))},h)}})}}if(e.startsWith("Graph")){var p=br(e.split("&"),3),v=p[1],m=(p[2],i.props.robotSceneManager),g=m.getGraphById(v);return void 0===g&&(g=new bR(v,!1,!1),m.addGraph(g),m.setCurrGraph(g.id())),{id:e,closable:!0,cached:!0,title:g.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==g)return(0,rr.jsx)(nq,{robotSceneManager:m,getParentDockLayout:e.getParentDockLayout,eventName:i.state.eventName,add:i.state.add,filter_prop:i.state.filter,is_part_changed:i.state.is_part_changed,force_update:i.state.force_update,graph:g,graph_update:i.state.graph_update,setGraphOptionPanelActive:i.setGraphOptionPanelActive.bind((0,c.Z)(i))},v)}})}}if(e.startsWith("DifferenceGraph")){var y=br(e.split("&"),3),b=y[1],x=(y[2],i.props.robotSceneManager),w=x.getGraphById(b);return void 0===w&&(w=new bR(b,!0,!1),x.addGraph(w),x.setCurrGraph(w.id())),{id:e,closable:!0,cached:!0,title:w.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==w)return(0,rr.jsx)(rq,{robotSceneManager:x,getParentDockLayout:e.getParentDockLayout,is_part_changed:i.state.is_part_changed,eventName:i.state.eventName,add:i.state.add,filter_prop:i.state.filter,force_update:i.state.force_update,graph:w,setGraphOptionPanelActive:i.setGraphOptionPanelActive.bind((0,c.Z)(i))},b)}})}}if(e.startsWith("TimeWarpedGraph")){var _=br(e.split("&"),4),S=_[1],k=_[2],M=(_[3],i.props.robotSceneManager),T=M.robotSceneById(k);if(void 0===T)return;var E=M.getGraphById(S);return void 0===E&&(E=new bR(S,!1,!0),M.addGraph(E)),{id:e,closable:!0,cached:!0,title:E.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==E)return(0,rr.jsx)(hq,{robotSceneManager:M,robotScene:T,isTimeWarp:!0,force_update:i.state.force_update,getParentDockLayout:e.getParentDockLayout,graph:E,setGraphOptionPanelActive:i.setGraphOptionPanelActive.bind((0,c.Z)(i))},S)}})}}if(e.startsWith("UmapGraph")){var C=br(e.split("&"),3),A=C[1],R=C[2],P=i.props.robotSceneManager,L=P.getUmapGraphById(A);return void 0===L&&(L=new wR(A),P.addUmapGraph(L),P.setCurrUmapGraph(A)),{id:e,closable:!0,cached:!0,title:L.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==L)return(0,rr.jsx)(xq,{robotSceneManager:P,isTimeWarp:"warp"===R,getParentDockLayout:e.getParentDockLayout,force_update:i.state.force_update,graph:L,setUmapGraphOptionPanelActive:i.setUmapGraphOptionPanelActive.bind((0,c.Z)(i))},A)}})}}if(e.startsWith("LineGraphLegend")){var O=br(e.split("&"),3),N=(O[1],O[2]),D=i.props.robotSceneManager.getGraphById(N);if(void 0===D)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+D.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==D)return(0,rr.jsx)(fq,{graph:D,updateLegendState:i.updateLegendState.bind((0,c.Z)(i))})}})}}if(e.startsWith("SceneLegend")){var I=br(e.split("&"),3),j=(I[1],I[2]),F=i.props.robotSceneManager,z=F.robotSceneById(j);return{id:e,closable:!0,cached:!0,title:"Legend of "+(null===z||void 0===z?void 0:z.name()),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==z)return(0,rr.jsx)(dq,{robotSceneManager:F,robotScene:z})}})}}if(e.startsWith("QuaternionSpaceLegend")){var B=br(e.split("&"),3),U=(B[1],B[2]),V=i.props.robotSceneManager,G=V.getQuaternionSpaceSceneById(U);if(void 0===G)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+(null===G||void 0===G?void 0:G.name()),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==G)return(0,rr.jsx)(mq,{robotSceneManager:V,quaternionSpaceScene:G})}})}}if(e.startsWith("UmapLegend")){var H=br(e.split("&"),3),W=(H[1],H[2]),Z=i.props.robotSceneManager.getUmapGraphById(W);if(void 0===Z)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+Z.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(e){if(void 0!==Z)return(0,rr.jsx)(wq,{graph:Z,updateLegendState:i.updateLegendState.bind((0,c.Z)(i))})}})}}if(e.startsWith("RobotScene")){var $=br(i.robotSceneIdParts(e),3),q=$[1],X=$[2],Y=i.props.robotSceneManager,K=Y.robotSceneById(X);if(void 0===K)return;var J=K,Q=e;return{id:e,closable:!0,cached:!0,title:K.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(){return Y.hasManagedRobotScene(J)?(0,rr.jsx)(J$,{allowSelecting:!0,robotScene:J,robotSceneManager:Y,setSceneOptionPanelActive:i.setSceneOptionPanelActive.bind((0,c.Z)(i)),setRobotOptionPanelActive:i.setRobotOptionPanelActive.bind((0,c.Z)(i))},q):i.missingTab(Q,"Missing Scene")}})}}if(e.startsWith("QuaternionSpaceScene")){var ee=br(e.split("&"),3),te=ee[1],ne=(ee[2],i.props.robotSceneManager),re=ne.getQuaternionSpaceSceneById(te);return void 0===re&&(re=new gR(ne,te),ne.setCurrQuaternionSpaceScene(te)),{id:e,closable:!0,cached:!0,title:re.name(),content:(0,rr.jsx)(Oq.Consumer,{children:function(){if(void 0!==re)return(0,rr.jsx)(vq,{allowSelecting:!0,quaternionSpaceScene:re,robotSceneManager:ne,setQuaternionSceneOptionPanelActive:i.setQuaternionSceneOptionPanelActive.bind((0,c.Z)(i))},te)}})}}return console.error('Unknown tab with id "'.concat(e,'"')),{id:e,closable:!0,title:"Unknown Tab",content:i.missingTab(e,"Missing Tab")}},i.onLayoutChange=function(e,t,n){if(e!==i.state.layoutBase){if(null!==t&&void 0!==t&&t.startsWith("RobotScene")&&"remove"===n){var r=br(i.robotSceneIdParts(t),3)[2],a=i.props.robotSceneManager,o=a.robotSceneById(r);o&&a.deactivateRobotScene(o)}if(null!==t&&void 0!==t&&(t.startsWith("Graph")||t.startsWith("DifferenceGraph")||t===Rq)&&"remove"===n){var u=br(t.split("&"),3),l=u[1],c=(u[2],i.props.robotSceneManager),h=c.getGraphById(l);if(void 0!==h){c.removeGraph(l);var f,d=s(h.lineIds());try{for(d.s();!(f=d.n()).done;){var p=f.value;nq.removeRobotPartFromGraph(p,i.props.robotSceneManager)}}catch(Fq){d.e(Fq)}finally{d.f()}}}if(null!==t&&void 0!==t&&t.startsWith("QuaternionSpaceScene")&&"remove"===n){var v=br(t.split("&"),3),m=v[1];v[2];i.props.robotSceneManager.removeQuaternionSpaceScene(m)}i.setState({layoutBase:e})}},i._layoutRef=t.createRef(),i.state={layoutBase:i.getDefaultLayout(),eventName:[],add:!0,clear:!1,refresh:!1,line_names:[],times:[],values:[],line_ids:[],legend:!0,need_update:!0,filter:0,show_diff:!1,diff_line_ids:[],is_part_changed:new Map,clear_options:!1,event_x:0,time_warp_time_bars:[],force_update:!1,graph_update:!1};var a=new bR(Aq,!1,!1);return i.props.robotSceneManager.addGraph(a),i.props.robotSceneManager.setCurrGraph(Aq),i.drag=i.drag.bind((0,c.Z)(i)),i.onRestoreLayout=i.onRestoreLayout.bind((0,c.Z)(i)),i}return(0,l.Z)(r,[{key:"addNewTimeWarpTimeBar",value:function(e){var t,n="TimeWarpTimeBar"+e,r=Cr({},this.state.layoutBase);null===(t=r.dockbox.children[1].tabs)||void 0===t||t.push({id:n}),this.setState({layoutBase:r})}},{key:"onSaveLayout",value:function(){var e=this.getLayout();return null===e||void 0===e?void 0:e.saveLayout()}},{key:"onRestoreLayout",value:function(e){var t;(console.log("restore layout"),void 0!==this.getLayout()&&void 0!==e)&&(console.log(e),null===(t=this._layoutRef.current)||void 0===t||t.loadLayout(e),this.setState({layoutBase:e}))}},{key:"setSceneOptionPanelActive",value:function(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Eq,null,!0)}},{key:"setRobotOptionPanelActive",value:function(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Cq,null,!0)}},{key:"setGraphOptionPanelActive",value:function(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Tq,null,!0)}},{key:"setQuaternionSceneOptionPanelActive",value:function(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Pq,null,!0)}},{key:"setUmapGraphOptionPanelActive",value:function(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Lq,null,!0)}},{key:"forceUpdateTabNames",value:function(){var e=Cr({},this.state.layoutBase);this.setState({layoutBase:e,force_update:!this.state.force_update})}},{key:"updateLegendState",value:function(e){this.setState({graph_update:void 0===e?this.state.graph_update:e})}},{key:"updateGraphPropertyPanelState",value:function(e,t,n,r,i,a){this.setState({eventName:void 0===e?this.state.eventName:e,add:void 0===t?this.state.add:t,filter:void 0===n?this.state.filter:n,legend:void 0===i?this.state.legend:i,clear_options:void 0===a?this.state.clear_options:a})}},{key:"onClickImage",value:function(e){this.props.robotSceneManager.loadSessionFromURL(e,this.onRestoreLayout)}},{key:"createHomeTab",value:function(){var e=this;return(0,rr.jsx)("div",{className:"HomeTab",children:(0,rr.jsxs)("div",{children:[(0,rr.jsx)("h1",{children:"\ud83d\udc4b Welcome to Motion Comparator"}),(0,rr.jsx)("br",{}),(0,rr.jsx)("br",{}),(0,rr.jsx)("h3",{children:" Motion Comparator helps roboticists visualize \ud83d\udc40, understand \ud83d\udca1, compare \ud83d\udd0d, and communiate \ud83d\udcac robot motions. "}),(0,rr.jsx)("br",{}),(0,rr.jsx)("br",{}),(0,rr.jsxs)("div",{className:"PopUpGroup",style:{justifyContent:"center",alignItems:"center"},children:[(0,rr.jsx)("p",{children:" Explore the examples below or click on the help icon "}),(0,rr.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:function(){return dr.setPopupHelpPage(qn.Home)},children:(0,rr.jsx)($n,{className:"Icon",icon:Qn})}),(0,rr.jsx)("p",{children:"to get started."})]}),(0,rr.jsx)("br",{}),(0,rr.jsx)("br",{}),(0,rr.jsxs)("div",{children:[(0,rr.jsxs)("div",{className:"ExampleImageGroup",children:[(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/panda_pick_and_place/panda_pick_and_place.png",className:"ExampleImage",alt:"Panda Pick and Place"}),(0,rr.jsx)("div",{className:"ExampleImageOverlay",onClick:function(){return e.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/panda_pick_and_place/panda_pick_and_place.json")},children:(0,rr.jsx)("div",{className:"ExampleImageOverlayText",children:"Pick and Place Motions of Panda Robot "})})]}),(0,rr.jsxs)("div",{className:"ExampleImageGroup",children:[(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/mico_legible/mico_legible.png",className:"ExampleImage",alt:"Mico Legible"}),(0,rr.jsx)("div",{className:"ExampleImageOverlay",onClick:function(){return e.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/mico_legible/mico_legible.json")},children:(0,rr.jsx)("div",{className:"ExampleImageOverlayText",children:"Legible Motions of Mico Robot "})})]}),(0,rr.jsxs)("div",{className:"ExampleImageGroup",children:[(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/spot_arm_sweep/spot_arm_sweep.png",className:"ExampleImage",alt:"Pick and Place"}),(0,rr.jsx)("div",{className:"ExampleImageOverlay",onClick:function(){return e.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/spot_arm_sweep/spot_arm_sweep.json")},children:(0,rr.jsx)("div",{className:"ExampleImageOverlayText",children:"Sweeping Motions of Spot Robot "})})]}),(0,rr.jsxs)("div",{className:"ExampleImageGroup",children:[(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/sawyer_teleop/sawyer_teleop.png",className:"ExampleImage",alt:"Pick and Place"}),(0,rr.jsx)("div",{className:"ExampleImageOverlay",onClick:function(){return e.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/sawyer_teleop/sawyer_teleop.json")},children:(0,rr.jsx)("div",{className:"ExampleImageOverlayText",children:"Teleoperation of Sawyer Robot "})})]}),(0,rr.jsxs)("div",{className:"ExampleImageGroup",children:[(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/ur5_rangedik/ur5_rangedik.png",className:"ExampleImage",alt:"Trajectory Tracking"}),(0,rr.jsx)("div",{className:"ExampleImageOverlay",onClick:function(){return e.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/ur5_rangedik/ur5_rangedik.json")},children:(0,rr.jsx)("div",{className:"ExampleImageOverlayText",children:"Trajectory Tracking of UR5 Robot "})})]}),(0,rr.jsx)("br",{}),(0,rr.jsx)("br",{}),(0,rr.jsx)("a",{href:"https://github.com/motion-comparator/MotionComparator",target:"_blank",rel:"noopener noreferrer",children:(0,rr.jsx)("img",{src:"https://raw.githubusercontent.com/tandpfun/skill-icons/main/icons/Github-Light.svg",className:"GithubIcon",alt:"Github"})})]})]})})}},{key:"drag",value:function(e){var t=e.target.className;"string"===typeof t&&t.includes("-option")||this.setState({event_x:e.pageX})}},{key:"render",value:function(){var e=this.props.robotSceneManager,t=this.props.robotSceneManager.currRobotScene(!1),n=t.selectedRobot();this._layoutRef.current;return(0,rr.jsx)("div",{className:"RobotWorkspace",onMouseMove:this.drag,children:(0,rr.jsx)(Oq.Provider,{value:{robotSceneManager:e,robotScene:t,selectedRobot:n,getParentDockLayout:this.getLayout},children:(0,rr.jsx)(tF,{ref:this._layoutRef,layout:this.state.layoutBase,onLayoutChange:this.onLayoutChange,loadTab:this.tabWrap(this.loadTab)})})})}}]),r}(t.Component),Dq=function(e){(0,h.Z)(r,e);var n=(0,f.Z)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,r),(e=n.call(this,i))._disallowUpdateUI=void 0,e._workspaceRef=void 0,e.goToPage=e.goToPage.bind((0,c.Z)(e)),e.currPage=e.currPage.bind((0,c.Z)(e)),e.href=e.href.bind((0,c.Z)(e)),e.updateUI=e.updateUI.bind((0,c.Z)(e)),e.error=e.error.bind((0,c.Z)(e)),e._disallowUpdateUI=0;var a,o,s=new kR,l=e.href(),h=l.split("?");if(1===h.length)a=fr.BUILD_PAGE;else if(2===h.length){a=fr.BUILD_PAGE;var f=h[1];o=f}else a=fr.BUILD_PAGE,e.warn("More than one question mark \"?\" in this page's URL. Did you mean to go to the view/playback page instead? If so, include only 1 question mark at the end of the website's url and put the url to the json of the scene you want to go to after it.");return e.state={currPageName:a,robotSceneManager:s,jsonURL:o,uiUpdateCnt:0,currPopupHelpPage:{page:qn.None},prev_times:{startTime:s.startTime(),endTime:s.endTime()}},e._workspaceRef=t.createRef(),e}return(0,l.Z)(r,[{key:"recalculateTimeWarping",value:function(){var e,t=s(this.state.robotSceneManager.allManagedRobotScenes());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isTimeWarping()){var r=n.currTimeWarpBase();n.setTimeWarpBase(void 0),n.setTimeWarpBase(r)}}}catch(Fq){t.e(Fq)}finally{t.f()}}},{key:"robotSceneManager",value:function(){return this.state.robotSceneManager}},{key:"addAnimationTable",value:function(e){this.state.robotSceneManager.addAnimationTable(e)}},{key:"removeAnimationTable",value:function(e){this.state.robotSceneManager.removeAnimationTable(e)}},{key:"renderScenes",value:function(){var e;null===(e=this.state.robotSceneManager.currRobotScene())||void 0===e||e.render()}},{key:"href",value:function(){return window.location.href}},{key:"goToPage",value:function(e){this.setState({currPageName:e})}},{key:"currPage",value:function(){return this.state.currPageName}},{key:"error",value:function(e){console.error(e)}},{key:"warn",value:function(e){console.warn(e)}},{key:"popupHelpPage",value:function(){return this.state.currPopupHelpPage}},{key:"setPopupHelpPage",value:function(e){var t="string"===typeof e?{page:e}:e;this.setState({currPopupHelpPage:t})}},{key:"updateUI",value:function(){this._disallowUpdateUI<=0&&this.setState({uiUpdateCnt:(this.state.uiUpdateCnt+1)%1e9}),this._disallowUpdateUI<0&&console.warn("disallowUpdateUI is less than 0!")}},{key:"allowUpdateUI",value:function(){this._disallowUpdateUI+=1}},{key:"disallowUpdateUI",value:function(){this._disallowUpdateUI-=1}},{key:"componentDidMount",value:function(){var e=this;if(dr.setApp(this),this.state.jsonURL){var t,n=this.state.jsonURL;null===(t=this.state.robotSceneManager.currRobotScene())||void 0===t||t.runOnce("Load:".concat(n),(function(){var t;e.state.robotSceneManager.loadSessionFromURL(n,null===(t=e._workspaceRef.current)||void 0===t?void 0:t.onRestoreLayout)}))}}},{key:"componentDidUpdate",value:function(){var e=this.state.prev_times,t=e.startTime,n=e.endTime,r=this.state.robotSceneManager,i=[r.startTime(),r.endTime()],a=i[0],o=i[1];t===a&&n===o||(this.recalculateTimeWarping(),this.setState({prev_times:{startTime:a,endTime:o}}))}},{key:"render",value:function(){return(0,rr.jsxs)("div",{className:"App",children:[(0,rr.jsx)("div",{className:"BuildPage",children:(0,rr.jsx)(Nq,{ref:this._workspaceRef,robotSceneManager:this.state.robotSceneManager})}),ir(this.state.currPopupHelpPage)]})}}]),r}(t.Component),Iq=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,rr.jsx)(t.StrictMode,{children:(0,rr.jsx)(Dq,{})})),Iq()}()}();
//# sourceMappingURL=main.1a361501.js.map