/*! For license information please see main.1b105c30.js.LICENSE.txt */
(()=>{var e={3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,v=0,b=0,y=0,x="";function w(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:a,return:""}}function _(e,t){return a(w("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return y=b>0?u(x,--b):0,g--,10===y&&(g=1,m--),y}function M(){return y=b<v?u(x,b++):0,g++,10===y&&(g=1,m++),y}function T(){return u(x,b)}function E(){return b}function C(e,t){return h(x,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return m=g=1,v=d(x=e),b=0,[]}function k(e){return x="",e}function P(e){return s(C(b-1,N(91===e?e+2:40===e?e+1:e)))}function L(e){for(;(y=T())&&y<33;)M();return A(e)>2||A(y)>3?"":" "}function O(e,t){for(;--t&&M()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return C(e,E()+(t<6&&32==T()&&32==M()))}function N(e){for(;M();)switch(y){case e:return b;case 34:case 39:34!==e&&39!==e&&N(y);break;case 40:41===e&&N(e);break;case 92:M()}return b}function I(e,t){for(;M()&&e+y!==57&&(e+y!==84||47!==T()););return"/*"+C(t,b-1)+"*"+o(47===e?e:M())}function D(e){for(;!A(T());)M();return C(e,b)}var j="-ms-",F="-moz-",z="-webkit-",B="comm",U="rule",G="decl",V="@keyframes";function H(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case G:return e.return=e.return||e.value;case B:return"";case V:return e.return=e.value+"{"+H(e.children,r)+"}";case U:e.value=e.props.join(",")}return d(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function $(e){return k(q("",null,null,null,[""],e=R(e),0,[0],e))}function q(e,t,n,r,i,a,s,h,p){for(var m=0,g=0,v=s,b=0,y=0,x=0,w=1,_=1,C=1,A=0,R="",k=i,N=a,j=r,F=R;_;)switch(x=A,A=M()){case 40:if(108!=x&&58==u(F,v-1)){-1!=c(F+=l(P(A),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:F+=P(A);break;case 9:case 10:case 13:case 32:F+=L(x);break;case 92:F+=O(E()-1,7);continue;case 47:switch(T()){case 42:case 47:f(Y(I(M(),E()),t,n),p);break;default:F+="/"}break;case 123*w:h[m++]=d(F)*C;case 125*w:case 59:case 0:switch(A){case 0:case 125:_=0;case 59+g:-1==C&&(F=l(F,/\f/g,"")),y>0&&d(F)-v&&f(y>32?K(F+";",r,n,v-1):K(l(F," ","")+";",r,n,v-2),p);break;case 59:F+=";";default:if(f(j=X(F,t,n,m,g,i,h,R,k=[],N=[],v),a),123===A)if(0===g)q(F,t,j,j,k,a,v,h,N);else switch(99===b&&110===u(F,3)?100:b){case 100:case 108:case 109:case 115:q(e,j,j,r&&f(X(e,j,j,0,0,i,h,R,i,k=[],v),N),i,N,v,h,r?k:N);break;default:q(F,j,j,j,[""],N,0,h,N)}}m=g=y=0,w=C=1,R=F="",v=s;break;case 58:v=1+d(F),y=x;default:if(w<1)if(123==A)--w;else if(125==A&&0==w++&&125==S())continue;switch(F+=o(A),A*w){case 38:C=g>0?1:(F+="\f",-1);break;case 44:h[m++]=(d(F)-1)*C,C=1;break;case 64:45===T()&&(F+=P(M())),b=T(),g=v=d(R=F+=D(E())),A++;break;case 45:45===x&&2==d(F)&&(w=0)}}return a}function X(e,t,n,r,o,a,c,u,d,f,m){for(var g=o-1,v=0===o?a:[""],b=p(v),y=0,x=0,_=0;y<r;++y)for(var S=0,M=h(e,g+1,g=i(x=c[y])),T=e;S<b;++S)(T=s(x>0?v[S]+" "+M:l(M,/&\f/g,v[S])))&&(d[_++]=T);return w(e,t,n,0===o?U:u,d,f,m)}function Y(e,t,n){return w(e,t,n,B,o(y),h(e,2,-2),0)}function K(e,t,n,r){return w(e,t,n,G,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!A(i);)M();return C(e,b)},Q=function(e,t){return k(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=J(b-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=M());return e}(R(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],o=Q(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+j+e+e;case 6828:case 4268:return z+e+j+e+e;case 6165:return z+e+j+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+j+"flex-$1$2")+e;case 5443:return z+e+j+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+j+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+j+l(e,"shrink","negative")+e;case 5292:return z+e+j+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+j+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+j+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+j+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+j+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+j+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=ne(e.value,e.length);break;case V:return H([_(e,{value:l(e.value,"@","@"+z)})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([_(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([_(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[l(t,/:(plac\w+)/,j+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,o,a=e.stylisPlugins||re,s={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,h=[W,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([ee,te].concat(a,h));o=function(e,t,n,r){c=n,H($(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return f.sheet.hydrate(l),f}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},4575:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,E:()=>g,T:()=>h,c:()=>f,h:()=>d,w:()=>u});var r=n(5043),i=n(3803),o=n(1722),a=n(6598),s=n(9436),l=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null),c=l.Provider,u=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(l);return e(t,i,n)}))},h=r.createContext({});var d={}.hasOwnProperty,p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var r in t)d.call(t,r)&&(n[r]=t[r]);return n[p]=e,n},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,o.SF)(t,n,r),(0,s.s)((function(){return(0,o.sk)(t,n,r)})),null},g=u((function(e,t,n){var i=e.css;"string"===typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e[p],l=[i],c="";"string"===typeof e.className?c=(0,o.Rk)(t.registered,l,e.className):null!=e.className&&(c=e.className+" ");var u=(0,a.J)(l,void 0,r.useContext(h));c+=t.key+"-"+u.name;var f={};for(var g in e)d.call(e,g)&&"css"!==g&&g!==p&&(f[g]=e[g]);return f.className=c,n&&(f.ref=n),r.createElement(r.Fragment,null,r.createElement(m,{cache:t,serialized:u,isStringTag:"string"===typeof s}),r.createElement(s,f))}))},3290:(e,t,n)=>{"use strict";n.d(t,{AH:()=>u,Y:()=>l,i7:()=>h,mL:()=>c});var r=n(4575),i=n(5043),o=n(1722),a=n(9436),s=n(6598),l=(n(3803),n(219),function(e,t){var n=arguments;if(null==t||!r.h.call(t,"css"))return i.createElement.apply(void 0,n);var o=n.length,a=new Array(o);a[0]=r.E,a[1]=(0,r.c)(e,t);for(var s=2;s<o;s++)a[s]=n[s];return i.createElement.apply(null,a)}),c=(0,r.w)((function(e,t){var n=e.styles,l=(0,s.J)([n],void 0,i.useContext(r.T)),c=i.useRef();return(0,a.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),c.current=[n,r],function(){n.flush()}}),[t]),(0,a.i)((function(){var e=c.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null}));function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.J)(t)}var h=function(){var e=u.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},6598:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,i.A)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},d="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return f={name:i.name,styles:i.styles,next:f},i.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)f={name:s.name,styles:s.styles,next:f},s=s.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(e,t,n[i])+";";else for(var a in n){var s=n[a];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?r+=a+"{"+t[l]+"}":c(l)&&(r+=u(a)+":"+h(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&o)throw new Error(d);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var f=p(e,t,s);switch(a){case"animation":case"animationName":r+=u(a)+":"+f+";";break;default:r+=a+"{"+f+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(r+=u(a)+":"+h(a,s[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var v=t[g];return void 0!==v?v:g}var f,m=/label:\s*([^\s;\n{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";f=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=p(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=p(n,t,e[a]),r)i+=o[a]}m.lastIndex=0;for(var s,l="";null!==(s=m.exec(i));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:f}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>s,s:()=>a});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(e){return e()},s=o||i.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},2380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){if(!(e instanceof Blob))throw new Error("Expected file to be a File or Blob.");this._blob=e,this._size=e.size}async read(e,t){const n=await this._blob.slice(e,e+t).arrayBuffer();return new Uint8Array(n)}size(){return this._size}}},4923:(e,t,n)=>{const{default:r}=n(2380);e.exports={BlobReader:r}},8899:(e,t,n)=>{var r,i,o,a,s,l,c,u,h,d,p,f,m,g,v=n(166).default;(()=>{var t={417:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Md5:()=>r});var r=function(){function e(){}return e.AddUnsigned=function(e,t){var n,r,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o},e.FF=function(e,t,n,r,i,o,a){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.F(t,n,r),i),a)),this.AddUnsigned(this.RotateLeft(e,o),t)},e.GG=function(e,t,n,r,i,o,a){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.G(t,n,r),i),a)),this.AddUnsigned(this.RotateLeft(e,o),t)},e.HH=function(e,t,n,r,i,o,a){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.H(t,n,r),i),a)),this.AddUnsigned(this.RotateLeft(e,o),t)},e.II=function(e,t,n,r,i,o,a){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.I(t,n,r),i),a)),this.AddUnsigned(this.RotateLeft(e,o),t)},e.ConvertToWordArray=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,s=0;s<n;)a=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o},e.WordToHex=function(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n},e.Utf8Encode=function(e){var t,n="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n+=String.fromCharCode(t):t>127&&t<2048?(n+=String.fromCharCode(t>>6|192),n+=String.fromCharCode(63&t|128)):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128),n+=String.fromCharCode(63&t|128));return n},e.init=function(e){for("string"!==typeof e&&(e=JSON.stringify(e)),this._string=this.Utf8Encode(e),this.x=this.ConvertToWordArray(this._string),this.a=1732584193,this.b=4023233417,this.c=2562383102,this.d=271733878,this.k=0;this.k<this.x.length;this.k+=16)this.AA=this.a,this.BB=this.b,this.CC=this.c,this.DD=this.d,this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k],this.S11,3614090360),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+1],this.S12,3905402710),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S13,606105819),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+3],this.S14,3250441966),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S11,4118548399),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+5],this.S12,1200080426),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S13,2821735955),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+7],this.S14,4249261313),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S11,1770035416),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+9],this.S12,2336552879),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S13,4294925233),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+11],this.S14,2304563134),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S11,1804603682),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+13],this.S12,4254626195),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S13,2792965006),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+15],this.S14,1236535329),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S21,4129170786),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+6],this.S22,3225465664),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S23,643717713),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k],this.S24,3921069994),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S21,3593408605),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+10],this.S22,38016083),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S23,3634488961),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+4],this.S24,3889429448),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S21,568446438),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+14],this.S22,3275163606),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S23,4107603335),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+8],this.S24,1163531501),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S21,2850285829),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+2],this.S22,4243563512),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S23,1735328473),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+12],this.S24,2368359562),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S31,4294588738),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+8],this.S32,2272392833),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S33,1839030562),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+14],this.S34,4259657740),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S31,2763975236),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+4],this.S32,1272893353),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S33,4139469664),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+10],this.S34,3200236656),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S31,681279174),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k],this.S32,3936430074),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S33,3572445317),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+6],this.S34,76029189),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S31,3654602809),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+12],this.S32,3873151461),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S33,530742520),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+2],this.S34,3299628645),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k],this.S41,4096336452),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+7],this.S42,1126891415),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S43,2878612391),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+5],this.S44,4237533241),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S41,1700485571),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+3],this.S42,2399980690),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S43,4293915773),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+1],this.S44,2240044497),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S41,1873313359),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+15],this.S42,4264355552),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S43,2734768916),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+13],this.S44,1309151649),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S41,4149444226),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+11],this.S42,3174756917),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S43,718787259),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+9],this.S44,3951481745),this.a=this.AddUnsigned(this.a,this.AA),this.b=this.AddUnsigned(this.b,this.BB),this.c=this.AddUnsigned(this.c,this.CC),this.d=this.AddUnsigned(this.d,this.DD);return(this.WordToHex(this.a)+this.WordToHex(this.b)+this.WordToHex(this.c)+this.WordToHex(this.d)).toLowerCase()},e.x=Array(),e.S11=7,e.S12=12,e.S13=17,e.S14=22,e.S21=5,e.S22=9,e.S23=14,e.S24=20,e.S31=4,e.S32=11,e.S33=16,e.S34=23,e.S41=6,e.S42=10,e.S43=15,e.S44=21,e.RotateLeft=function(e,t){return e<<t|e>>>32-t},e.F=function(e,t,n){return e&t|~e&n},e.G=function(e,t,n){return e&n|t&~n},e.H=function(e,t,n){return e^t^n},e.I=function(e,t,n){return t^(e|~n)},e}()},271:function(e,t){var n,r,i;r=[],void 0===(i="function"===typeof(n=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n="boolean"===typeof(new RegExp).sticky;function r(e){return e&&"[object RegExp]"===t.call(e)}function i(e){return e&&"object"===typeof e&&!r(e)&&!Array.isArray(e)}function o(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(e){return new RegExp("|"+e).exec("").length-1}function s(e){return"("+e+")"}function l(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function c(e){if("string"===typeof e)return"(?:"+o(e)+")";if(r(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function u(e){for(var t=Object.getOwnPropertyNames(e),n=[],r=0;r<t.length;r++){var o=t[r],a=e[o],s=[].concat(a);if("include"!==o){var l=[];s.forEach((function(e){i(e)?(l.length&&n.push(d(o,l)),n.push(d(o,e)),l=[]):l.push(e)})),l.length&&n.push(d(o,l))}else for(var c=0;c<s.length;c++)n.push({include:s[c]})}return n}function h(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.include)for(var i=[].concat(r.include),o=0;o<i.length;o++)t.push({include:i[o]});else{if(!r.type)throw new Error("Rule has no type: "+JSON.stringify(r));t.push(d(r.type,r))}}return t}function d(t,n){if(i(n)||(n={match:n}),n.include)throw new Error("Matching rules cannot also include states");var o={defaultType:t,lineBreaks:!!n.error||!!n.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var a in n)e.call(n,a)&&(o[a]=n[a]);if("string"===typeof o.type&&t!==o.type)throw new Error("Type transform cannot be a string (type '"+o.type+"' for token '"+t+"')");var s=o.match;return o.match=Array.isArray(s)?s:s?[s]:[],o.match.sort((function(e,t){return r(e)&&r(t)?0:r(t)?-1:r(e)?1:t.length-e.length})),o}function p(e){return Array.isArray(e)?h(e):u(e)}var f=d("error",{lineBreaks:!0,shouldThrow:!0});function m(e,t){for(var i=null,o=Object.create(null),u=!0,h=null,d=[],p=[],m=0;m<e.length;m++)e[m].fallback&&(u=!1);for(m=0;m<e.length;m++){var g=e[m];if(g.include)throw new Error("Inheritance is not allowed in stateless lexers");if(g.error||g.fallback){if(i)throw!g.fallback===!i.fallback?new Error("Multiple "+(g.fallback?"fallback":"error")+" rules not allowed (for token '"+g.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+g.defaultType+"')");i=g}var v=g.match.slice();if(u)for(;v.length&&"string"===typeof v[0]&&1===v[0].length;)o[v.shift().charCodeAt(0)]=g;if(g.pop||g.push||g.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+g.defaultType+"')");if(g.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+g.defaultType+"')")}if(0!==v.length){u=!1,d.push(g);for(var b=0;b<v.length;b++){var y=v[b];if(r(y))if(null===h)h=y.unicode;else if(h!==y.unicode&&!1===g.fallback)throw new Error("If one rule is /u then all must be")}var x=l(v.map(c)),w=new RegExp(x);if(w.test(""))throw new Error("RegExp matches empty string: "+w);if(a(x)>0)throw new Error("RegExp has capture groups: "+w+"\nUse (?: \u2026 ) instead");if(!g.lineBreaks&&w.test("\n"))throw new Error("Rule should declare lineBreaks: "+w);p.push(s(x))}}var _=i&&i.fallback,S=n&&!_?"ym":"gm",M=n||_?"":"|";return!0===h&&(S+="u"),{regexp:new RegExp(l(p)+M,S),groups:d,fast:o,error:i||f}}function g(e){var t=m(p(e));return new x({start:t},"start")}function v(e,t,n){var r=e&&(e.push||e.next);if(r&&!n[r])throw new Error("Missing state '"+r+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!==+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}function b(e,t){var n=e.$all?p(e.$all):[];delete e.$all;var r=Object.getOwnPropertyNames(e);t||(t=r[0]);for(var i=Object.create(null),o=0;o<r.length;o++)i[b=r[o]]=p(e[b]).concat(n);for(o=0;o<r.length;o++)for(var a=i[b=r[o]],s=Object.create(null),l=0;l<a.length;l++){var c=a[l];if(c.include){var u=[l,1];if(c.include!==b&&!s[c.include]){s[c.include]=!0;var h=i[c.include];if(!h)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+b+"')");for(var d=0;d<h.length;d++){var f=h[d];-1===a.indexOf(f)&&u.push(f)}}a.splice.apply(a,u),l--}}var g=Object.create(null);for(o=0;o<r.length;o++){var b;g[b=r[o]]=m(i[b],!0)}for(o=0;o<r.length;o++){var y=r[o],w=g[y],_=w.groups;for(l=0;l<_.length;l++)v(_[l],y,g);var S=Object.getOwnPropertyNames(w.fast);for(l=0;l<S.length;l++)v(w.fast[S[l]],y,g)}return new x(g,t)}function y(e){for(var t=Object.create(null),n=Object.create(null),r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var o=r[i],a=e[o];(Array.isArray(a)?a:[a]).forEach((function(e){if((n[e.length]=n[e.length]||[]).push(e),"string"!==typeof e)throw new Error("keyword must be string (in keyword '"+o+"')");t[e]=o}))}function s(e){return JSON.stringify(e)}var l="";for(var c in l+="switch (value.length) {\n",n){var u=n[c];l+="case "+c+":\n",l+="switch (value) {\n",u.forEach((function(e){var n=t[e];l+="case "+s(e)+": return "+s(n)+"\n"})),l+="}\n"}return l+="}\n",Function("value",l)}var x=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};x.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},x.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},x.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},x.prototype.popState=function(){this.setState(this.stack.pop())},x.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var w=n?function(e,t){return e.exec(t)}:function(e,t){var n=e.exec(t);return 0===n[0].length?null:n};function _(){return this.value}if(x.prototype._getGroup=function(e){for(var t=this.groups.length,n=0;n<t;n++)if(void 0!==e[n+1])return this.groups[n];throw new Error("Cannot find token type for matched text")},x.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var n=this.buffer;if(e!==n.length){if(a=this.fast[n.charCodeAt(e)])return this._token(a,n.charAt(e),e);var r=this.re;r.lastIndex=e;var i=w(r,n),o=this.error;if(null==i)return this._token(o,n.slice(e,n.length),e);var a=this._getGroup(i),s=i[0];return o.fallback&&i.index!==e?(this.queuedGroup=a,this.queuedText=s,this._token(o,n.slice(e,i.index),e)):this._token(a,s,e)}},x.prototype._token=function(e,t,n){var r=0;if(e.lineBreaks){var i=/\n/g,o=1;if("\n"===t)r=1;else for(;i.exec(t);)r++,o=i.lastIndex}var a={type:"function"===typeof e.type&&e.type(t)||e.defaultType,value:"function"===typeof e.value?e.value(t):t,text:t,toString:_,offset:n,lineBreaks:r,line:this.line,col:this.col},s=t.length;if(this.index+=s,this.line+=r,0!==r?this.col=s-o+1:this.col+=s,e.shouldThrow)throw new Error(this.formatError(a,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),a},"undefined"!==typeof Symbol&&Symbol.iterator){var S=function(e){this.lexer=e};S.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},S.prototype[Symbol.iterator]=function(){return this},x.prototype[Symbol.iterator]=function(){return new S(this)}}return x.prototype.formatError=function(e,t){if(null==e){var n=this.buffer.slice(this.index);e={text:n,offset:this.index,lineBreaks:-1===n.indexOf("\n")?0:1,line:this.line,col:this.col}}var r=Math.max(0,e.offset-e.col+1),i=e.lineBreaks?e.text.indexOf("\n"):e.text.length,o=this.buffer.substring(r,e.offset+i);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+o+"\n",t+="  "+Array(e.col).join(" ")+"^"},x.prototype.clone=function(){return new x(this.states,this.state)},x.prototype.has=function(e){return!0},{compile:g,states:b,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:y}})?n.apply(t,r):n)||(e.exports=i)},558:(e,t,n)=>{!function(){function t(e){return e[0]}const r=n(271).compile({space:{match:/\s+/,lineBreaks:!0},number:/-?(?:[0-9]|[1-9][0-9]+)(?:\.[0-9]+)?(?:[eE][-+]?[0-9]+)?\b/,comment:/#[^\n]*/,"[":"[","]":"]",assignment:/=[^\n]*/,fieldOrType:/[a-zA-Z_][a-zA-Z0-9_]*(?:\/[a-zA-Z][a-zA-Z0-9_]*)?/});function i(e){return e.reduce(((e,t)=>({...e,...t})),{})}var o={Lexer:r,ParserRules:[{name:"main$ebnf$1",symbols:["comment"],postprocess:t},{name:"main$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","boolType","arrayType","__","field","_","main$ebnf$1","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$2",symbols:["comment"],postprocess:t},{name:"main$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","bigintType","arrayType","__","field","_","main$ebnf$2","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$3",symbols:["comment"],postprocess:t},{name:"main$ebnf$3",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","numericType","arrayType","__","field","_","main$ebnf$3","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$4",symbols:["comment"],postprocess:t},{name:"main$ebnf$4",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","stringType","arrayType","__","field","_","main$ebnf$4","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$5",symbols:["comment"],postprocess:t},{name:"main$ebnf$5",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","timeType","arrayType","__","field","_","main$ebnf$5","simple"],postprocess:function(e){return i(e)}},{name:"main$ebnf$6",symbols:["comment"],postprocess:t},{name:"main$ebnf$6",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","customType","arrayType","__","field","_","main$ebnf$6","complex"],postprocess:function(e){return i(e)}},{name:"main$ebnf$7",symbols:["comment"],postprocess:t},{name:"main$ebnf$7",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","boolType","__","constantField","_","boolConstantValue","_","main$ebnf$7"],postprocess:function(e){return i(e)}},{name:"main$ebnf$8",symbols:["comment"],postprocess:t},{name:"main$ebnf$8",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","bigintType","__","constantField","_","bigintConstantValue","_","main$ebnf$8"],postprocess:function(e){return i(e)}},{name:"main$ebnf$9",symbols:["comment"],postprocess:t},{name:"main$ebnf$9",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","numericType","__","constantField","_","numericConstantValue","_","main$ebnf$9"],postprocess:function(e){return i(e)}},{name:"main$ebnf$10",symbols:["comment"],postprocess:t},{name:"main$ebnf$10",symbols:[],postprocess:function(e){return null}},{name:"main",symbols:["_","stringType","__","constantField","_","stringConstantValue","_","main$ebnf$10"],postprocess:function(e){return i(e)}},{name:"main",symbols:["comment"],postprocess:function(e){return null}},{name:"main",symbols:["blankLine"],postprocess:function(e){return null}},{name:"boolType",symbols:[{literal:"bool"}],postprocess:function(e){return{type:e[0].value}}},{name:"bigintType$subexpression$1",symbols:[{literal:"int64"}]},{name:"bigintType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"bigintType",symbols:["bigintType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"stringType",symbols:[{literal:"string"}],postprocess:function(e){return{type:e[0].value}}},{name:"timeType$subexpression$1",symbols:[{literal:"time"}]},{name:"timeType$subexpression$1",symbols:[{literal:"duration"}]},{name:"timeType",symbols:["timeType$subexpression$1"],postprocess:function(e){return{type:e[0][0].value}}},{name:"customType",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){const r=e[0].value;return["bool","byte","char","float32","float64","int8","uint8","int16","uint16","int32","uint32","int64","uint64","string","time","duration"].includes(r)?n:{type:r}}},{name:"arrayType",symbols:[{literal:"["},"_",{literal:"]"}],postprocess:function(e){return{isArray:!0}}},{name:"arrayType",symbols:[{literal:"["},"_","number","_",{literal:"]"}],postprocess:function(e){return{isArray:!0,arrayLength:e[2]}}},{name:"arrayType",symbols:["_"],postprocess:function(e){return{isArray:!1}}},{name:"field",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){const r=e[0].value;return void 0==r.match(/^[a-zA-Z][a-zA-Z0-9_]*$/)?n:{name:r}}},{name:"constantField",symbols:[r.has("fieldOrType")?{type:"fieldOrType"}:fieldOrType],postprocess:function(e,t,n){const r=e[0].value;return void 0==r.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?n:{name:r,isConstant:!0}}},{name:"boolConstantValue",symbols:["assignment"],postprocess:function(e,t,n){const r=e[0].split("#")[0].trim();return"True"===r||"1"===r?{value:!0,valueText:r}:"False"===r||"0"===r?{value:!1,valueText:r}:n}},{name:"numericConstantValue",symbols:["assignment"],postprocess:function(e,t,n){const r=e[0].split("#")[0].trim(),i=parseFloat(r);return isNaN(i)?n:{value:i,valueText:r}}},{name:"bigintConstantValue",symbols:["assignment"],postprocess:function(e,t,n){const r=e[0].split("#")[0].trim();try{return{value:BigInt(r),valueText:r}}catch{return n}}},{name:"stringConstantValue",symbols:["assignment"],postprocess:function(e){return{value:e[0],valueText:e[0]}}},{name:"bool$subexpression$1",symbols:[{literal:"True"}]},{name:"bool$subexpression$1",symbols:[{literal:"1"}]},{name:"bool",symbols:["bool$subexpression$1"],postprocess:function(e){return!0}},{name:"bool$subexpression$2",symbols:[{literal:"False"}]},{name:"bool$subexpression$2",symbols:[{literal:"0"}]},{name:"bool",symbols:["bool$subexpression$2"],postprocess:function(e){return!1}},{name:"number",symbols:[r.has("number")?{type:"number"}:number],postprocess:function(e){return parseFloat(e[0].value)}},{name:"assignment",symbols:[r.has("assignment")?{type:"assignment"}:assignment],postprocess:function(e){return e[0].value.substr(1).trim()}},{name:"comment",symbols:[r.has("comment")?{type:"comment"}:comment],postprocess:function(e){return null}},{name:"blankLine",symbols:["_"],postprocess:function(e){return null}},{name:"_$subexpression$1",symbols:[]},{name:"_$subexpression$1",symbols:[r.has("space")?{type:"space"}:space]},{name:"_",symbols:["_$subexpression$1"],postprocess:function(e){return null}},{name:"__",symbols:[r.has("space")?{type:"space"}:space],postprocess:function(e){return null}},{name:"simple",symbols:[],postprocess:function(){return{isComplex:!1}}},{name:"complex",symbols:[],postprocess:function(){return{isComplex:!0}}}],ParserStart:"main"};"undefined"!==typeof e.exports?e.exports=o:window.grammar=o}()},568:(e,t,n)=>{!function(){function t(e){return e[0]}const r=[,"struct","module","const","include","typedef","boolean","wstring","string","sequence","TRUE","FALSE","byte","octet","wchar","char","double","float","int8","uint8","int16","uint16","int32","uint32","int64","uint64","unsigned","short","long"].reduce(((e,t)=>(e[t]=t,e)),{}),i=n(271),o=i.compile({SPACE:{match:/\s+/,lineBreaks:!0},DECIMALEXP:/(?:(?:\d+\.\d*)|(?:\d*\.\d+)|(?:[0-9]+))[eE](?:[+|-])?[0-9]+/,DECIMAL:/(?:(?:\d+\.\d*)|(?:\d*\.\d+))/,INTEGER:/\d+/,COMMENT:/(?:\/\/[^\n]*)|(?:\/\*(?:.|\n)+?\*\/)/,HEX_LITERAL:/0x(?:[0-9a-fA-F])+?/,STRING:{match:/"(?:\\["\\rnu]|[^"\\])*"/,value:e=>e.slice(1,-1)},LCBR:"{",RCBR:"}",LBR:"[",RBR:"]",LT:"<",GT:">",LPAR:"(",RPAR:")",";":";",",":",",AT:"@",PND:"#",PT:".","/":"/",SIGN:/[+-]/,HEADER:/={80}\nIDL: [a-zA-Z][\w]+(?:\/[a-zA-Z][\w]+)*/,EQ:/=[^\n]*?/,NAME:{match:/[a-zA-Z_][a-zA-Z0-9_]*(?:\:\:[a-zA-Z][a-zA-Z0-9_]*)*/,type:i.keywords(r)}}),a=["SPACE","COMMENT"];var s;o.next=(s=o.next,()=>{let e;for(;(e=s.call(o))&&a.includes(e.type););return e});const l={"unsigned short":"uint16","unsigned long":"uint32","unsigned long long":"uint64",short:"int16",long:"int32","long long":"int64",double:"float64",float:"float32",octet:"byte",wchar:"char"};function c(e){return e.join("")}function u(e){return e.reduce(((e,t)=>({...e,...t})),{})}function h(){return null}function d(e){const t=parseInt(e);return isNaN(t)?null!==e&&void 0!==e&&e.value?{usesConstant:!0,name:e.value}:void 0:t}function p(e){const t=Object.entries(e).filter((e=>{let[t,n]=e;return!0===(null===n||void 0===n?void 0:n.usesConstant)})).map((e=>{let[t,{name:n}]=e;return[t,n]}));return{...e,constantUsage:t}}var f={Lexer:o,ParserRules:[{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:["header"],postprocess:t},{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main$ebnf$1$subexpression$1$ebnf$2",symbols:[]},{name:"main$ebnf$1$subexpression$1$ebnf$2",symbols:["main$ebnf$1$subexpression$1$ebnf$2","importDcl"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$1$ebnf$3",symbols:["definition"]},{name:"main$ebnf$1$subexpression$1$ebnf$3",symbols:["main$ebnf$1$subexpression$1$ebnf$3","definition"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","main$ebnf$1$subexpression$1$ebnf$2","main$ebnf$1$subexpression$1$ebnf$3"]},{name:"main$ebnf$1",symbols:["main$ebnf$1$subexpression$1"]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:["header"],postprocess:t},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"main$ebnf$1$subexpression$2$ebnf$2",symbols:[]},{name:"main$ebnf$1$subexpression$2$ebnf$2",symbols:["main$ebnf$1$subexpression$2$ebnf$2","importDcl"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$2$ebnf$3",symbols:["definition"]},{name:"main$ebnf$1$subexpression$2$ebnf$3",symbols:["main$ebnf$1$subexpression$2$ebnf$3","definition"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main$ebnf$1$subexpression$2",symbols:["main$ebnf$1$subexpression$2$ebnf$1","main$ebnf$1$subexpression$2$ebnf$2","main$ebnf$1$subexpression$2$ebnf$3"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","main$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"main",symbols:["main$ebnf$1"],postprocess:e=>e[0].flatMap((e=>e[2].flat()))},{name:"header",symbols:[o.has("HEADER")?{type:"HEADER"}:HEADER],postprocess:h},{name:"importDcl$subexpression$1",symbols:[o.has("STRING")?{type:"STRING"}:STRING]},{name:"importDcl$subexpression$1$ebnf$1",symbols:[]},{name:"importDcl$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:"/"},o.has("NAME")?{type:"NAME"}:NAME]},{name:"importDcl$subexpression$1$ebnf$1",symbols:["importDcl$subexpression$1$ebnf$1","importDcl$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"importDcl$subexpression$1",symbols:[{literal:"<"},o.has("NAME")?{type:"NAME"}:NAME,"importDcl$subexpression$1$ebnf$1",{literal:"."},{literal:"idl"},{literal:">"}]},{name:"importDcl",symbols:[{literal:"#"},{literal:"include"},"importDcl$subexpression$1"],postprocess:h},{name:"moduleDcl$ebnf$1$subexpression$1",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1$subexpression$1"]},{name:"moduleDcl$ebnf$1$subexpression$2",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1","moduleDcl$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"moduleDcl",symbols:["multiAnnotations",{literal:"module"},"fieldName",{literal:"{"},"moduleDcl$ebnf$1",{literal:"}"}],postprocess:function(e){return{definitionType:"module",name:e[2].name,definitions:e[4].flat(1)}}},{name:"definition$subexpression$1",symbols:["typeDcl"]},{name:"definition$subexpression$1",symbols:["constantDcl"]},{name:"definition$subexpression$1",symbols:["moduleDcl"]},{name:"definition",symbols:["definition$subexpression$1","semi"],postprocess:e=>e[0][0]},{name:"typeDcl$subexpression$1",symbols:["structWithAnnotations"]},{name:"typeDcl$subexpression$1",symbols:["typedefWithAnnotations"]},{name:"typeDcl",symbols:["typeDcl$subexpression$1"],postprocess:e=>e[0][0]},{name:"structWithAnnotations",symbols:["multiAnnotations","struct"],postprocess:e=>e[1]},{name:"struct$ebnf$1$subexpression$1",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1$subexpression$1"]},{name:"struct$ebnf$1$subexpression$2",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1","struct$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"struct",symbols:[{literal:"struct"},"fieldName",{literal:"{"},"struct$ebnf$1",{literal:"}"}],postprocess:e=>({definitionType:"struct",name:e[1].name,definitions:e[3].flat(2).filter((e=>null!==e))})},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","allTypes","fieldName","arrayLength"]},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","allTypes","fieldName"]},{name:"typedefWithAnnotations$subexpression$1",symbols:["typedef","sequenceType","fieldName"]},{name:"typedefWithAnnotations",symbols:["multiAnnotations","typedefWithAnnotations$subexpression$1"],postprocess:e=>({definitionType:"typedef",...p(u(e.flat(1)))})},{name:"typedef",symbols:[{literal:"typedef"}],postprocess:h},{name:"constantDcl",symbols:["multiAnnotations","constType"],postprocess:e=>e[1]},{name:"member",symbols:["fieldWithAnnotation","semi"],postprocess:e=>e[0]},{name:"fieldWithAnnotation",symbols:["multiAnnotations","fieldDcl"],postprocess:e=>{let t=[];e[0]&&(t=e[0]);return e[1].map((e=>p(u([...t,e]))))}},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames","arrayLength"]},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames"]},{name:"fieldDcl$subexpression$1",symbols:["sequenceType","multiFieldNames"]},{name:"fieldDcl",symbols:["fieldDcl$subexpression$1"],postprocess:e=>e[0].splice(1,1)[0].map((t=>u([...e[0],t])))},{name:"multiFieldNames$ebnf$1",symbols:[]},{name:"multiFieldNames$ebnf$1$subexpression$1",symbols:[{literal:","},"fieldName"]},{name:"multiFieldNames$ebnf$1",symbols:["multiFieldNames$ebnf$1","multiFieldNames$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiFieldNames",symbols:["fieldName","multiFieldNames$ebnf$1"],postprocess:e=>e.flat(2).filter((e=>null!==e&&e.name))},{name:"multiAnnotations$ebnf$1",symbols:[]},{name:"multiAnnotations$ebnf$1",symbols:["multiAnnotations$ebnf$1","annotation"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiAnnotations",symbols:["multiAnnotations$ebnf$1"],postprocess:e=>e[0]?e[0].filter((e=>null!==e)):null},{name:"annotation$ebnf$1$subexpression$1",symbols:[{literal:"("},"multiAnnotationParams",{literal:")"}]},{name:"annotation$ebnf$1",symbols:["annotation$ebnf$1$subexpression$1"],postprocess:t},{name:"annotation$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"annotation",symbols:["at",o.has("NAME")?{type:"NAME"}:NAME,"annotation$ebnf$1"],postprocess:e=>{const t=e[2]?e[2][1]:{};if("default"===e[1].value){return{defaultValue:t.value}}return null}},{name:"multiAnnotationParams$ebnf$1",symbols:[]},{name:"multiAnnotationParams$ebnf$1$subexpression$1",symbols:[{literal:","},"annotationParam"]},{name:"multiAnnotationParams$ebnf$1",symbols:["multiAnnotationParams$ebnf$1","multiAnnotationParams$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"multiAnnotationParams",symbols:["annotationParam","multiAnnotationParams$ebnf$1"],postprocess:e=>u([e[0],...e[1].flatMap((e=>{let[,t]=e;return t}))])},{name:"annotationParam$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME,"assignment"]},{name:"annotationParam",symbols:["annotationParam$subexpression$1"],postprocess:e=>({[e[0][0].value]:e[0][1].value})},{name:"annotationParam$subexpression$2",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"annotationParam",symbols:["annotationParam$subexpression$2"],postprocess:h},{name:"at",symbols:[{literal:"@"}],postprocess:h},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","floatAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","intAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","stringType","fieldName","stringAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","booleanType","fieldName","booleanAssignment","simple"]},{name:"constType",symbols:["constType$subexpression$1"],postprocess:e=>{const t=u(e[0]);t.name,t.value;return t}},{name:"constKeyword",symbols:[{literal:"const"}],postprocess:e=>({isConstant:!0})},{name:"fieldName",symbols:[o.has("NAME")?{type:"NAME"}:NAME],postprocess:e=>({name:e[0].value})},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"sequenceType$ebnf$1$subexpression$1",symbols:[{literal:","},"sequenceType$ebnf$1$subexpression$1$subexpression$1"]},{name:"sequenceType$ebnf$1",symbols:["sequenceType$ebnf$1$subexpression$1"],postprocess:t},{name:"sequenceType$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"sequenceType",symbols:[{literal:"sequence"},{literal:"<"},"allTypes","sequenceType$ebnf$1",{literal:">"}],postprocess:e=>{const t=null!==e[3]?d(e[3][1][0]):void 0;return{...e[2],isArray:!0,arrayUpperBound:t}}},{name:"arrayLength$subexpression$1",symbols:["INT"]},{name:"arrayLength$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"arrayLength",symbols:[{literal:"["},"arrayLength$subexpression$1",{literal:"]"}],postprocess:e=>{let[,t]=e;return{isArray:!0,arrayLength:d(t?t[0]:void 0)}}},{name:"assignment$subexpression$1",symbols:["floatAssignment"]},{name:"assignment$subexpression$1",symbols:["intAssignment"]},{name:"assignment$subexpression$1",symbols:["stringAssignment"]},{name:"assignment$subexpression$1",symbols:["booleanAssignment"]},{name:"assignment$subexpression$1",symbols:["variableAssignment"]},{name:"assignment",symbols:["assignment$subexpression$1"],postprocess:e=>e[0][0]},{name:"floatAssignment$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatAssignment$subexpression$1",symbols:["FLOAT"]},{name:"floatAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"floatAssignment$subexpression$1"],postprocess:e=>{let[,t]=e;return{valueText:t[0],value:parseFloat(t[0])}}},{name:"intAssignment$subexpression$1",symbols:["SIGNED_INT"]},{name:"intAssignment$subexpression$1",symbols:["INT"]},{name:"intAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"intAssignment$subexpression$1"],postprocess:e=>{let[,t]=e;return{valueText:t[0],value:parseInt(t[0])}}},{name:"stringAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"STR"],postprocess:e=>{let[,t]=e;return{valueText:t,value:t}}},{name:"booleanAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,"BOOLEAN"],postprocess:e=>{let[,t]=e;return{valueText:t,value:"TRUE"===t}}},{name:"variableAssignment",symbols:[o.has("EQ")?{type:"EQ"}:EQ,o.has("NAME")?{type:"NAME"}:NAME],postprocess:e=>{let[,t]=e;return{valueText:t.value,value:{usesConstant:!0,name:t.value}}}},{name:"allTypes$subexpression$1",symbols:["primitiveTypes"]},{name:"allTypes$subexpression$1",symbols:["customType"]},{name:"allTypes",symbols:["allTypes$subexpression$1"],postprocess:e=>e[0][0]},{name:"primitiveTypes$subexpression$1",symbols:["stringType"]},{name:"primitiveTypes$subexpression$1",symbols:["numericType"]},{name:"primitiveTypes$subexpression$1",symbols:["booleanType"]},{name:"primitiveTypes",symbols:["primitiveTypes$subexpression$1"],postprocess:e=>({...e[0][0],isComplex:!1})},{name:"customType",symbols:[o.has("NAME")?{type:"NAME"}:NAME],postprocess:e=>{const t=e[0].value,n=t.includes("::");return{type:t,isComplex:n}}},{name:"stringType$subexpression$1",symbols:[{literal:"string"}]},{name:"stringType$subexpression$1",symbols:[{literal:"wstring"}]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:[o.has("NAME")?{type:"NAME"}:NAME]},{name:"stringType$ebnf$1$subexpression$1",symbols:[{literal:"<"},"stringType$ebnf$1$subexpression$1$subexpression$1",{literal:">"}]},{name:"stringType$ebnf$1",symbols:["stringType$ebnf$1$subexpression$1"],postprocess:t},{name:"stringType$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"stringType",symbols:["stringType$subexpression$1","stringType$ebnf$1"],postprocess:e=>{let t;return null!==e[1]&&(t=d(e[1][1]?e[1][1][0]:void 0)),{type:"string",upperBound:t}}},{name:"booleanType",symbols:[{literal:"boolean"}],postprocess:e=>({type:"bool"})},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"octet"}]},{name:"numericType$subexpression$1",symbols:[{literal:"wchar"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:e=>{const t=e[0].map((e=>null===e||void 0===e?void 0:e.value)).filter((e=>!!e)).join(" ");let n=l[t];return{type:n||t}}},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"TRUE"}]},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"FALSE"}]},{name:"BOOLEAN",symbols:["BOOLEAN$subexpression$1"],postprocess:c},{name:"STR$ebnf$1",symbols:[o.has("STRING")?{type:"STRING"}:STRING]},{name:"STR$ebnf$1",symbols:["STR$ebnf$1",o.has("STRING")?{type:"STRING"}:STRING],postprocess:function(e){return e[0].concat([e[1]])}},{name:"STR",symbols:["STR$ebnf$1"],postprocess:e=>c(e.flat(1).filter((e=>null!==e)))},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_FLOAT",symbols:["SIGNED_FLOAT$subexpression$1","FLOAT"],postprocess:c},{name:"FLOAT$subexpression$1",symbols:[o.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL]},{name:"FLOAT$subexpression$1",symbols:[o.has("DECIMALEXP")?{type:"DECIMALEXP"}:DECIMALEXP]},{name:"FLOAT",symbols:["FLOAT$subexpression$1"],postprocess:c},{name:"FLOAT$subexpression$2",symbols:[o.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL,{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$2"],postprocess:e=>e[0][0].value},{name:"FLOAT$subexpression$3",symbols:["INT",{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$3"],postprocess:e=>e[0][0]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_INT",symbols:["SIGNED_INT$subexpression$1","INT"],postprocess:c},{name:"INT",symbols:[o.has("INTEGER")?{type:"INTEGER"}:INTEGER],postprocess:c},{name:"semi",symbols:[{literal:";"}],postprocess:h},{name:"simple",symbols:[],postprocess:()=>({isComplex:!1})}],ParserStart:"main"};"undefined"!==typeof e.exports?e.exports=f:window.grammar=f}()},654:function(e){var t,n;t=this,n=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach((function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)}))}function i(){this.reset("")}function o(e,t,o){if(e instanceof r){var a=e;o=t}else a=r.fromCompiled(e,t);for(var s in this.grammar=a,this.options={keepHistory:!1,lexer:a.lexer||new i},o||{})this.options[s]=o[s];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(a,0);this.table=[l],l.wants[a.start]=[],l.predict(a.start),l.process(),this.current=0}function a(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t="undefined"===typeof e?this.symbols.map(a).join(" "):this.symbols.slice(0,e).map(a).join(" ")+" \u25cf "+this.symbols.slice(e).map(a).join(" ");return this.name+" \u2192 "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,i=0;i<t.length;i++){var a=t[i];if(a.isComplete){if(a.finish(),a.data!==o.fail){for(var s=a.wantedBy,l=s.length;l--;){var c=s[l];this.complete(c,a)}if(a.reference===this.index){var u=a.rule.name;(this.completed[u]=this.completed[u]||[]).push(a)}}}else{if("string"!==typeof(u=a.rule.symbols[a.dot])){this.scannable.push(a);continue}if(n[u]){if(n[u].push(a),r.hasOwnProperty(u)){var h=r[u];for(l=0;l<h.length;l++){var d=h[l];this.complete(a,d)}}}else n[u]=[a],this.predict(u)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var i=n[r],o=this.wants[e],a=new t(i,0,this.index,o);this.states.push(a)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var i=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var o=new r(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),n);return o.lexer=i,o},i.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(e,t){var n=this.buffer;if("string"===typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var o=this.index-this.lastLineBreak,a=String(this.line).length;return t+=" at line "+this.line+" col "+o+":\n\n",t+=r.map((function(e,t){return s(this.line-r.length+t+1,a)+" "+e}),this).join("\n"),t+="\n"+s("",a+o)+"^\n"}return t+" at index "+(this.index-1);function s(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(g){var o=new n(this.grammar,this.current+1);throw this.table.push(o),(l=new Error(this.reportLexerError(g))).offset=this.current,l.token=g.token,l}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var s=this.current+1;o=new n(this.grammar,s),this.table.push(o);for(var l,c=void 0!==t.text?t.text:t.value,u=r.constructor===i?t.value:t,h=a.scannable,d=h.length;d--;){var p=h[d],f=p.rule.symbols[p.dot];if(f.test?f.test(u):f.type?f.type===t.type:f.literal===c){var m=p.nextState({data:u,token:t,isToken:!0,reference:s-1});o.states.push(m)}}if(o.process(),0===o.states.length)throw(l=new Error(this.reportError(t))).offset=this.current,l.token=t,l;this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},o.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},o.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,i=this.table[r],o=i.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!==typeof t}));return 0===o.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),o.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],r=t.rule.symbols[t.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(e,n)}),this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],a=o.rule.toString(o.dot);a===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+a)),n=a}},o.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},o.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),i=this.buildFirstStateStack(n,r);return null===i?null:[e].concat(i)},o.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},o.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},o.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},o.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&e.push(n)})),e.map((function(e){return e.data}))},{Parser:o,Grammar:r,Rule:e}},e.exports?e.exports=n():t.nearley=n()},515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRos2Type=void 0;const n=String.raw(r||(r=v(["(?<type>[a-zA-Z0-9_/]+)"]))),b=String.raw(i||(i=v(["(?:<=(?<stringBound>d+))"],["(?:<=(?<stringBound>\\d+))"]))),y=String.raw(o||(o=v(["(?:(?<unboundedArray>[])|[(?<arrayLength>d+)]|[<=(?<arrayBound>d+)])"],["(?:(?<unboundedArray>\\[\\])|\\[(?<arrayLength>\\d+)\\]|\\[<=(?<arrayBound>\\d+)\\])"]))),x=String.raw(a||(a=v(["(?<name>[a-zA-Z0-9_]+)"]))),w=String.raw(s||(s=v(["'(?:\\.|[^'\\])*'|\"(?:\\.|[^\"\\])*\""],["'(?:\\\\.|[^'\\\\])*'|\"(?:\\\\.|[^\"\\\\])*\""]))),_=String.raw(l||(l=v(["(?:","|(?:\\.|[^s'\"#\\])(?:\\.|[^#\\])*)"],["(?:","|(?:\\\\.|[^\\s'\"#\\\\])(?:\\\\.|[^#\\\\])*)"])),w),S=String.raw(c||(c=v(["(?:","|(?:\\.|[^s'\"],#\\])(?:\\.|[^],#\\])*)"],["(?:","|(?:\\\\.|[^\\s'\"\\],#\\\\])(?:\\\\.|[^\\],#\\\\])*)"])),w),M=String.raw(u||(u=v(["s*=s*(?<constantValue>","?)"],["\\s*=\\s*(?<constantValue>","?)"])),_),T=String.raw(h||(h=v(["[(?:",",)*","?]"],["\\[(?:",",)*","?\\]"])),S,S),E=String.raw(d||(d=v(["(?<defaultValue>","|",")"])),T,_),C=String.raw(p||(p=v(["(?:#.*)"]))),A=new RegExp(String.raw(f||(f=v(["^","","?","?s+","(?:","|s+",")?s*","?$"],["^","","?","?\\s+","(?:","|\\s+",")?\\s*","?$"])),n,b,y,x,M,E,C)),R=String.raw(m||(m=v(["\\(?<char>['\"abfnrtv\\])|\\(?<oct>[0-7]{1,3})|\\x(?<hex2>[a-fA-F0-9]{2})|\\u(?<hex4>[a-fA-F0-9]{4})|\\U(?<hex8>[a-fA-F0-9]{8})"],["\\\\(?<char>['\"abfnrtv\\\\])|\\\\(?<oct>[0-7]{1,3})|\\\\x(?<hex2>[a-fA-F0-9]{2})|\\\\u(?<hex4>[a-fA-F0-9]{4})|\\\\U(?<hex8>[a-fA-F0-9]{8})"]))),k=["bool","byte","char","float32","float64","int8","uint8","int16","uint16","int32","uint32","int64","uint64","string","wstring","time","duration","builtin_interfaces/Time","builtin_interfaces/Duration","builtin_interfaces/msg/Time","builtin_interfaces/msg/Duration"];function P(e,t,n){const r=BigInt(e);if(r<t||r>n)throw new Error("Number ".concat(e," out of range [").concat(t,", ").concat(n,"]"));return r}function L(e,t,n){const r=parseInt(e);if(Number.isNaN(r))throw new Error("Invalid numeric literal: ".concat(e));if(r<t||r>n)throw new Error("Number ".concat(e," out of range [").concat(t,", ").concat(n,"]"));return r}const O=new RegExp(S,"y"),N=/\s*(,)\s*|\s*$/y;function I(e,t){if(!t.startsWith("[")||!t.endsWith("]"))throw new Error("Array must start with [ and end with ]");const n=t.substring(1,t.length-1);if("string"===e||"wstring"===e){const e=[];let t=0;for(;t<n.length;){if(","===n[t])throw new Error("Expected array element before comma");O.lastIndex=t;let r=O.exec(n);if(r&&(e.push(D(r[0])),t=O.lastIndex),N.lastIndex=t,r=N.exec(n),!r)throw new Error("Expected comma or end of array");if(!r[1])break;t=N.lastIndex}return e}return n.split(",").map((t=>j(e,t.trim())))}function D(e){let t="",n=e;for(const r of["'",'"'])if(e.startsWith(r)){if(!e.endsWith(r))throw new Error("Expected terminating ".concat(r," in string literal: ").concat(e));t=r,n=e.substring(r.length,e.length-r.length);break}if(void 0==!new RegExp(String.raw(g||(g=v(["^(?:[^\\","]|",")*$"],["^(?:[^\\\\","]|",")*$"])),t,R)).test(n))throw new Error("Invalid string literal: ".concat(n));return n.replace(new RegExp(R,"g"),(function(){var e,t;const{char:n,oct:r,hex2:i,hex4:o,hex8:a}=(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e],s=null!==(t=null!==i&&void 0!==i?i:o)&&void 0!==t?t:a;if(void 0!=n)return{"'":"'",'"':'"',a:"\x07",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v","\\":"\\"}[n];if(void 0!=r)return String.fromCodePoint(parseInt(r,8));if(void 0!=s)return String.fromCodePoint(parseInt(s,16));throw new Error("Expected exactly one matched group")}))}function j(e,t){switch(e){case"bool":if(["true","True","1"].includes(t))return!0;if(["false","False","0"].includes(t))return!1;break;case"float32":case"float64":{const e=parseFloat(t);if(!Number.isNaN(e))return e;break}case"int8":return L(t,-128,127);case"uint8":return L(t,0,255);case"int16":return L(t,-32768,32767);case"uint16":return L(t,0,65535);case"int32":return L(t,-2147483648,2147483647);case"uint32":return L(t,0,4294967295);case"int64":return P(t,~0x7fffffffffffffffn,0x7fffffffffffffffn);case"uint64":return P(t,0n,0xffffffffffffffffn);case"string":case"wstring":return D(t)}throw new Error("Invalid literal of type ".concat(e,": ").concat(t))}function F(e){switch(e){case"char":return"uint8";case"byte":return"int8";case"builtin_interfaces/Time":case"builtin_interfaces/msg/Time":return"time";case"builtin_interfaces/Duration":case"builtin_interfaces/msg/Duration":return"duration"}return e}t.buildRos2Type=function(e){const t=[];let n;for(const{line:r}of e){let e;if(!r.startsWith("#"))if(e=/^MSG: ([^ ]+)\s*(?:#.+)?$/.exec(r))n=e[1];else{if(!(e=A.exec(r)))throw new Error("Could not parse line: '".concat(r,"'"));{const{type:n,stringBound:r,unboundedArray:i,arrayLength:o,arrayBound:a,name:s,constantValue:l,defaultValue:c}=e.groups,u=F(n);if(void 0!=r&&"string"!==u&&"wstring"!==u)throw new Error("Invalid string bound for type ".concat(u));if(void 0!=l){if(!/^[A-Z](?:_?[A-Z0-9]+)*$/.test(s))throw new Error("Invalid constant name: ".concat(s))}else if(!/^[a-z](?:_?[a-z0-9]+)*$/.test(s))throw new Error("Invalid field name: ".concat(s));const h=!k.includes(u),d=void 0!=i||void 0!=o||void 0!=a;t.push({name:s,type:u,isComplex:void 0!=l?h||void 0:h,isConstant:void 0!=l||void 0,isArray:void 0!=l?d||void 0:d,arrayLength:void 0!=o?parseInt(o):void 0,arrayUpperBound:void 0!=a?parseInt(a):void 0,upperBound:void 0!=r?parseInt(r):void 0,defaultValue:void 0!=c?d?I(u,c.trim()):j(u,c.trim()):void 0,value:void 0!=l?j(u,l.trim()):void 0,valueText:null===l||void 0===l?void 0:l.trim()})}}}return{name:n,definitions:t}}},715:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(322),t),i(n(867),t),i(n(733),t),i(n(210),t)},322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.md5=void 0;const r=n(417),i=new Set(["int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","string","bool","char","byte","time","duration"]);function o(e,t){let n="";const a=e.definitions.filter((e=>{let{isConstant:t}=e;return t})),s=e.definitions.filter((e=>{let{isConstant:t}=e;return void 0==t||!t}));for(const r of a){var l;n+="".concat(r.type," ").concat(r.name,"=").concat(null!==(l=r.valueText)&&void 0!==l?l:String(r.value),"\n")}for(const r of s)if(c=r.type,i.has(c)){const e=void 0!=r.arrayLength?String(r.arrayLength):"",t=!0===r.isArray?"[".concat(e,"]"):"";n+="".concat(r.type).concat(t," ").concat(r.name,"\n")}else{const e=t.get(r.type);if(void 0==e)throw new Error('Missing definition for submessage type "'.concat(r.type,'"'));const i=o(e,t);n+="".concat(i," ").concat(r.name,"\n")}var c;return n=n.trimEnd(),r.Md5.init(n)}t.md5=function(e){if(0===e.length)throw new Error("Cannot produce md5sum for empty msgDefs");const t=new Map;for(const n of e)void 0!=n.name&&t.set(n.name,n);return o(e[0],t)}},867:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeType=t.fixupTypes=t.parse=t.ROS2IDL_GRAMMAR=void 0;const i=n(654),o=n(515),a=r(n(558)),s=r(n(568)),l=i.Grammar.fromCompiled(a.default);function c(e){e.forEach((t=>{let{definitions:n}=t;n.forEach((t=>{if(!0===t.isComplex){const n=function(e,t){const n=e.filter((e=>{var n;const r=null!==(n=e.name)&&void 0!==n?n:"";if(0===t.length)return 0===r.length;const i=t.includes("/")?t:"/".concat(t);return r.endsWith(i)}));if(void 0==n[0])throw new Error("Expected 1 top level type definition for '".concat(t,"' but found ").concat(n.length));return n[0]}(e,t.type).name;if(void 0==n)throw new Error("Missing type definition for ".concat(t.type));t.type=n}}))}))}function u(e,t){const n=[];let r;return e.forEach((e=>{let{line:o}=e;if(o.startsWith("MSG:")){const[e,t]=function(e){return e.replace(/#.*/gi,"").split(" ").filter((e=>e))}(o);return void(r=null===t||void 0===t?void 0:t.trim())}const a=new i.Parser(t);a.feed(o);const s=a.finish();if(0===s.length)throw new Error("Could not parse line: '".concat(o,"'"));if(s.length>1)throw new Error("Ambiguous line: '".concat(o,"'"));const l=s[0];void 0!=l&&(l.type=h(l.type),n.push(l))})),{name:r,definitions:n}}function h(e){return"char"===e?"uint8":"byte"===e?"int8":e}t.ROS2IDL_GRAMMAR=i.Grammar.fromCompiled(s.default),t.parse=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.split("\n").map((e=>e.trim())).filter((e=>e));let r=[];const i=[];return n.forEach((e=>{e.startsWith("#")||(e.startsWith("==")?(i.push(!0===t.ros2?(0,o.buildRos2Type)(r):u(r,l)),r=[]):r.push({line:e}))})),i.push(!0===t.ros2?(0,o.buildRos2Type)(r):u(r,l)),!0!==t.skipTypeFixup&&c(i),i},t.fixupTypes=c,t.normalizeType=h},733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRos2idl=void 0;const r=n(654),i=n(867);function o(e,t){const n=e[e.length-1].definitions;n&&n.forEach((n=>o([...e,n],t))),t(e)}function a(e){const t=[];return o([e],(e=>{const n=e[e.length-1];if("module"===n.definitionType){const r=n.definitions.filter((e=>"typedef"!==e.definitionType));r.every((e=>e.isConstant))&&t.push({name:e.map((e=>e.name)).join("/"),definitions:r})}else"struct"===n.definitionType&&t.push({name:e.map((e=>e.name)).join("/"),definitions:n.definitions})})),t}t.parseRos2idl=function(e){return function(e,t){const n=new r.Parser(t);n.feed(e);const s=n.finish();if(0===s.length)throw new Error("Could not parse message definition (unexpected end of input): '".concat(e,"'"));const l=function(e){const t=[];for(const n of e){const e=new Map,r=new Map;o([n],(t=>{const n=t[t.length-1];if("typedef"===n.definitionType){const{definitionType:t,name:r,...i}=n;e.set(n.name,i)}else!0===n.isConstant&&r.set(n.name,n.value)})),o([n],(t=>{const i=t[t.length-1];if(void 0==i.definitions){i.type&&e.has(i.type)&&Object.assign(i,{...e.get(i.type),name:i.name});for(const[e,t]of null!==(o=i.constantUsage)&&void 0!==o?o:[]){var o,a;if(!r.has(t))throw new Error("Could not find constant <".concat(t,"> for field <").concat(null!==(a=i.name)&&void 0!==a?a:"undefined","> in <").concat(n.name,">"));i[e]=r.get(t)}delete i.constantUsage,void 0!=i.type&&(i.type=i.type.replace(/::/g,"/"))}}));const i=a(n);t.push(...i)}return t}(s[0]);for(const{definitions:r}of l)for(const e of r)e.type=(0,i.normalizeType)(e.type);return l}(e,i.ROS2IDL_GRAMMAR)}},210:(e,t)=>{"use strict";function n(e){return Array.isArray(e)?"[".concat(e.map((e=>"bigint"===typeof e?e.toString():JSON.stringify(e))).join(", "),"]"):"bigint"===typeof e?e.toString():JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0,t.stringify=function(e){let t="";for(let o=0;o<e.length;o++){const a=e[o],s=a.definitions.filter((e=>{let{isConstant:t}=e;return t})),l=a.definitions.filter((e=>{let{isConstant:t}=e;return void 0==t||!t}));var r;if(o>0)t+="\n================================================================================\n",t+="MSG: ".concat(null!==(r=a.name)&&void 0!==r?r:"","\n");for(const e of s){var i;t+="".concat(e.type," ").concat(e.name," = ").concat(null!==(i=e.valueText)&&void 0!==i?i:String(e.value),"\n")}if(l.length>0){t.length>0&&(t+="\n");for(const e of l){const r=void 0!=e.upperBound?"<=".concat(e.upperBound):"",i=void 0!=e.arrayLength?String(e.arrayLength):void 0!=e.arrayUpperBound?"<=".concat(e.arrayUpperBound):"",o=!0===e.isArray?"[".concat(i,"]"):"",a=void 0!=e.defaultValue?" ".concat(n(e.defaultValue)):"";t+="".concat(e.type).concat(r).concat(o," ").concat(e.name).concat(a,"\n")}}}return t.trimEnd()}}},n={};function b(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,b),i.exports}b.d=(e,t)=>{for(var n in t)b.o(t,n)&&!b.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},b.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),b.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var y=b(715);e.exports=y})()},7108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3277:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7108),t),i(n(7631),t)},7631:(e,t)=>{"use strict";function n(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(e.sec<0||e.nsec<0))throw new Error("Invalid negative time { sec: ".concat(e.sec,", nsec: ").concat(e.nsec," }"));const t=Math.floor(e.sec),n=Math.floor(e.nsec);return"".concat(t,".").concat(n.toFixed().padStart(9,"0"))}function r(e){const t=9-e.length;return Math.round(parseInt(e,10)*10**t)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.nsec,i=Math.floor(r/1e9),o=r%1e9,a={sec:e.sec+i,nsec:Math.abs(-1===Math.sign(o)?1e9+o:o)};if(!t&&a.sec<0||a.nsec<0)throw new Error("Cannot normalize invalid time ".concat(n(a,!0)));return a}function o(e,t){let{sec:n,nsec:r}=e,{sec:o,nsec:a}=t;return i({sec:n+o,nsec:r+a})}function a(e,t){let{sec:n,nsec:r}=e,{sec:o,nsec:a}=t;return i({sec:n-o,nsec:r-a},!0)}function s(e){let{sec:t,nsec:n}=e;return t+1e-9*n}function l(e){let t=Math.trunc(e),n=Math.round(1e9*(e-t));return t+=Math.trunc(n/1e9),n%=1e9,{sec:t,nsec:n}}function c(e,t){const n=e.sec-t.sec;return 0!==n?n:e.nsec-t.nsec}Object.defineProperty(t,"__esModule",{value:!0}),t.areEqual=t.isGreaterThan=t.isLessThan=t.compare=t.isTimeInRangeInclusive=t.clampTime=t.fromMicros=t.fromMillis=t.toMillis=t.fromNanoSec=t.fromSec=t.toSec=t.toMicroSec=t.toNanoSec=t.subtract=t.add=t.fixTime=t.interpolate=t.percentOf=t.fromDate=t.toDate=t.fromRFC3339String=t.toRFC3339String=t.fromString=t.toString=t.isTime=void 0,t.isTime=function(e){return"object"===typeof e&&!!e&&"sec"in e&&"nsec"in e&&2===Object.getOwnPropertyNames(e).length},t.toString=n,t.fromString=function(e){if(/^\d+\.?$/.test(e)){const t=parseInt(e,10);return{sec:isNaN(t)?0:t,nsec:0}}if(!/^\d+\.\d+$/.test(e))return;const t=e.split(".");if(0===t.length)return;const[n,o]=t;if(void 0==n||void 0==o)return;const a=parseInt(n,10),s=r(o);return i({sec:isNaN(a)?0:a,nsec:s})},t.toRFC3339String=function(e){if(e.sec<0||e.nsec<0)throw new Error("Invalid negative time { sec: ".concat(e.sec,", nsec: ").concat(e.nsec," }"));if(e.nsec>=1e9)throw new Error("Invalid nanosecond value ".concat(e.nsec));const t=new Date(1e3*e.sec),n=t.getUTCFullYear(),r=(t.getUTCMonth()+1).toFixed().padStart(2,"0"),i=t.getUTCDate().toFixed().padStart(2,"0"),o=t.getUTCHours().toFixed().padStart(2,"0"),a=t.getUTCMinutes().toFixed().padStart(2,"0"),s=t.getUTCSeconds().toFixed().padStart(2,"0"),l=e.nsec.toFixed().padStart(9,"0");return"".concat(n,"-").concat(r,"-").concat(i,"T").concat(o,":").concat(a,":").concat(s,".").concat(l,"Z")},t.fromRFC3339String=function(e){const t=/^(\d{4,})-(\d\d)-(\d\d)[Tt](\d\d):(\d\d):(\d\d)(?:\.(\d+))?(?:[Zz]|([+-])(\d\d):(\d\d))$/.exec(e);if(null==t)return;const[,n,o,a,s,l,c,u,h,d,p]=t,f="-"===h?-1:1,m=Date.UTC(+n,+o-1,+a,+s-f*+(null!==d&&void 0!==d?d:0),+l-f*+(null!==p&&void 0!==p?p:0),+c);return m%1e3===0?i({sec:m/1e3,nsec:void 0!=u?r(u):0}):void 0},t.toDate=function(e){const{sec:t,nsec:n}=e;return new Date(1e3*t+n/1e6)},t.fromDate=function(e){const t=e.getTime(),n=t%1e3;return{sec:Math.floor(t/1e3),nsec:1e6*n}},t.percentOf=function(e,t,n){const r=a(t,e);return s(a(n,e))/s(r)},t.interpolate=function(e,t,n){return o(e,l(n*s(a(t,e))))},t.fixTime=i,t.add=o,t.subtract=a,t.toNanoSec=function(e){let{sec:t,nsec:n}=e;return 1000000000n*BigInt(t)+BigInt(n)},t.toMicroSec=function(e){let{sec:t,nsec:n}=e;return(1e9*t+n)/1e3},t.toSec=s,t.fromSec=l,t.fromNanoSec=function(e){return{sec:Number(e/1000000000n),nsec:Number(e%1000000000n)}},t.toMillis=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=1e3*e.sec,r=e.nsec/1e6;return t?n+Math.ceil(r):n+Math.floor(r)},t.fromMillis=function(e){let t=Math.trunc(e/1e3),n=Math.round(1e6*(e-1e3*t));return t+=Math.trunc(n/1e9),n%=1e9,{sec:t,nsec:n}},t.fromMicros=function(e){let t=Math.trunc(e/1e6),n=Math.round(1e3*(e-1e6*t));return t+=Math.trunc(n/1e9),n%=1e9,{sec:t,nsec:n}},t.clampTime=function(e,t,n){return c(t,e)>0?{sec:t.sec,nsec:t.nsec}:c(n,e)<0?{sec:n.sec,nsec:n.nsec}:{sec:e.sec,nsec:e.nsec}},t.isTimeInRangeInclusive=function(e,t,n){return!(c(t,e)>0||c(n,e)<0)},t.compare=c,t.isLessThan=function(e,t){return c(e,t)<0},t.isGreaterThan=function(e,t){return c(e,t)>0},t.areEqual=function(e,t){return e.sec===t.sec&&e.nsec===t.nsec}},7713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>S,StyledEngineProvider:()=>_,ThemeContext:()=>l.T,css:()=>b.AH,default:()=>M,internal_processStyles:()=>T,keyframes:()=>b.i7});var r=n(8168),i=n(5043),o=n(918),a=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,o.A)((function(e){return a.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(4575),c=n(1722),u=n(6598),h=n(9436),d=s,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:p},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.SF)(t,n,r),(0,h.s)((function(){return(0,c.sk)(t,n,r)})),null},v=function e(t,n){var o,a,s=t.__emotion_real===t,h=s&&t.__emotion_base||t;void 0!==n&&(o=n.label,a=n.target);var d=m(t,n,s),p=d||f(h),v=!p("as");return function(){var b=arguments,y=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&y.push("label:"+o+";"),null==b[0]||void 0===b[0].raw)y.push.apply(y,b);else{y.push(b[0][0]);for(var x=b.length,w=1;w<x;w++)y.push(b[w],b[0][w])}var _=(0,l.w)((function(e,t,n){var r=v&&e.as||h,o="",s=[],m=e;if(null==e.theme){for(var b in m={},e)m[b]=e[b];m.theme=i.useContext(l.T)}"string"===typeof e.className?o=(0,c.Rk)(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var x=(0,u.J)(y.concat(s),t.registered,m);o+=t.key+"-"+x.name,void 0!==a&&(o+=" "+a);var w=v&&void 0===d?f(r):p,_={};for(var S in e)v&&"as"===S||w(S)&&(_[S]=e[S]);return _.className=o,n&&(_.ref=n),i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:x,isStringTag:"string"===typeof r}),i.createElement(r,_))}));return _.displayName=void 0!==o?o:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",_.defaultProps=t.defaultProps,_.__emotion_real=_,_.__emotion_base=h,_.__emotion_styles=y,_.__emotion_forwardProp=d,Object.defineProperty(_,"toString",{value:function(){return"."+a}}),_.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:m(_,i,!0)})).apply(void 0,y)},_}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var b=n(3290),y=n(3803),x=n(579);let w;function _(e){const{injectFirst:t,children:n}=e;return t&&w?(0,x.jsx)(l.C,{value:w,children:n}):n}function S(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,x.jsx)(b.mL,{styles:r})}function M(e,t){return v(e,t)}"object"===typeof document&&(w=(0,y.A)({key:"css",prepend:!0}));const T=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.X4=p,t.e$=f,t.eM=function(e,t){const n=d(e),r=d(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(457)),o=r(n(9214));function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function s(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(s(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function h(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const c=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",c.push(t[3])),u({type:s,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(h(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function p(e,t){return e=l(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function f(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return d(e)>.5?f(e,t):m(e,t)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=f,slotShouldForwardProp:l=f}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:h,slot:p,skipVariantsResolver:m,skipSx:x,overridesResolver:w=b(g(p))}=c,_=(0,o.default)(c,d),S=void 0!==m?m:p&&"Root"!==p&&"root"!==p||!1,M=x||!1;let T=f;"Root"===p||"root"===p?T=r:p?T=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(T=void 0);const E=(0,a.default)(e,(0,i.default)({shouldForwardProp:T,label:undefined},_)),C=e=>"function"===typeof e&&e.__emotion_real!==e||(0,s.isPlainObject)(e)?r=>y(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,A=function(r){let o=C(r);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];const c=s?s.map(C):[];h&&w&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[h]||!r.components[h].styleOverrides)return null;const o=r.components[h].styleOverrides,a={};return Object.entries(o).forEach((t=>{let[n,o]=t;a[n]=y(o,(0,i.default)({},e,{theme:r}))})),w(e,a)})),h&&!S&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return y({variants:null==o||null==(r=o.components)||null==(r=r[h])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),M||c.push(u);const d=c.length-s.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const p=E(o,...c);return e.muiName&&(p.muiName=e.muiName),p};return E.withConfig&&(A.withConfig=E.withConfig),A}};var i=r(n(4634)),o=r(n(4893)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(7713)),s=n(9482),l=(r(n(7918)),r(n(3382)),r(n(4989))),c=r(n(9265));const u=["ownerState"],h=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function b(e){return e?(t,n)=>n[e]:null}function y(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const a="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(a))return a.flatMap((e=>y(e,(0,i.default)({ownerState:n},r))));if(a&&"object"===typeof a&&Array.isArray(a.variants)){const{variants:e=[]}=a;let t=(0,o.default)(a,h);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return a}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>a,NI:()=>o,vf:()=>s,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function o(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||i;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=o.breakpoints||i;return Object.keys(t).reduce(((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function s(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(8587),i=n(8168);const o=["values","unit","step"],a=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5}=e,l=(0,r.A)(e,o),c=a(t),u=Object.keys(c);function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-s/100).concat(n,")")}function p(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-s/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:h,down:d,between:p,only:function(e){return u.indexOf(e)+1<u.length?p(e,u[u.indexOf(e)+1]):h(e)},not:function(e){const t=u.indexOf(e);return 0===t?h(u[1]):t===u.length-1?d(u[t]):p(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(9172),a=n(4853);const s={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),h=n(9703);const d=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:p,shape:f={}}=e,m=(0,i.A)(e,d),g=(0,a.A)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(p);let b=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:v,shape:(0,r.A)({},s,f)},m);b.applyStyles=h.A;for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];return b=x.reduce(((e,t)=>(0,o.A)(e,t)),b),b.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),b.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},b}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9172);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>b,Ms:()=>y});var r=n(9751),i=n(7162),o=n(3815);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],i=s[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,r){var o;const a=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),a=e[n];return(0,r.NI)(e,a,o)}function v(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.A,{})}function b(e){return v(e,u)}function y(e){return v(e,h)}function x(e){return v(e,d)}b.propTypes={},b.filterProps=u,y.propTypes={},y.filterProps=h,x.propTypes={},x.filterProps=d},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>a,Yn:()=>o});var r=n(7598),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function a(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,s)||{};return(0,i.NI)(e,c,(e=>{let i=a(u,l,e);return e===i&&"string"===typeof e&&(i=a(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var r=n(8604),i=n(7162),o=n(3815);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var s=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),b=c("borderBottomColor"),y=c("borderLeftColor"),x=c("outline",l),w=c("outlineColor"),_=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};_.propTypes={},_.filterProps=["borderRadius"];a(u,h,d,p,f,m,g,v,b,y,_,x,w);const S=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const M=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};M.propTypes={},M.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];a(S,M,T,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function E(e,t){return"grey"===t?t:e}a((0,i.Ay)({prop:"color",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:E}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:E}));function C(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const A=(0,i.Ay)({prop:"width",transform:C}),R=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:C(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};R.filterProps=["maxWidth"];const k=(0,i.Ay)({prop:"minWidth",transform:C}),P=(0,i.Ay)({prop:"height",transform:C}),L=(0,i.Ay)({prop:"maxHeight",transform:C}),O=(0,i.Ay)({prop:"minHeight",transform:C}),N=((0,i.Ay)({prop:"size",cssProperty:"width",transform:C}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:C}),a(A,R,k,P,L,O,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_},color:{themeKey:"palette",transform:E},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:E},backgroundColor:{themeKey:"palette",transform:E},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:T},columnGap:{style:M},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:C},maxWidth:{style:R},minWidth:{transform:C},height:{transform:C},maxHeight:{transform:C},minHeight:{transform:C},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},9265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>u,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>s.A});var r=n(8812),i=n(8168),o=n(8587),a=n(9172),s=n(7758);const l=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function u(e){const{sx:t}=e,n=(0,o.A)(e,l),{systemProps:r,otherProps:s}=c(n);let u;return u=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,a.Q)(e)?(0,i.A)({},r,e):r}:(0,i.A)({},r,t),(0,i.A)({},s,{sx:u})}},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(7598),i=n(3815),o=n(7162),a=n(9751),s=n(7758);function l(){function e(e,t,n,i){const s={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,o.Yn)(n,u)||{};if(d)return d(s);return(0,a.NI)(s,t,(t=>{let n=(0,o.BO)(p,h,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,h,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:s.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,a.EU)(l.breakpoints),s=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(s=r[n],h=l,"function"===typeof s?s(h):s);var s,h;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,a.NI)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))})),(0,a.vf)(s,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},7598:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7868);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7918:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7598)},9214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},9172:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const s=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{i(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&i(e[r])?s[r]=a(e[r],t[r],n):n.clone?s[r]=i(t[r])?o(t[r]):t[r]:s[r]=t[r]})),s}},9482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(9172)},7868:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(7868)},3382:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function s(e,t,n){const r=a(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return a(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return s(e,e.render,"ForwardRef");case r.Memo:return s(e,e.type,"memo");default:return}}}},2539:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}var s,l,c=n(6608).codes,u=c.ERR_AMBIGUOUS_ARGUMENT,h=c.ERR_INVALID_ARG_TYPE,d=c.ERR_INVALID_ARG_VALUE,p=c.ERR_INVALID_RETURN_VALUE,f=c.ERR_MISSING_ARGS,m=n(3823),g=n(6494).inspect,v=n(6494).types,b=v.isPromise,y=v.isRegExp,x=n(7095)(),w=n(3799)(),_=n(2028)("RegExp.prototype.test");new Map;function S(){var e=n(6062);s=e.isDeepEqual,l=e.isDeepStrictEqual}var M=!1,T=e.exports=R,E={};function C(e){if(e.message instanceof Error)throw e.message;throw new m(e)}function A(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new m({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];A.apply(void 0,[R,t.length].concat(t))}T.fail=function e(t,n,r,i,o){var a,s=arguments.length;if(0===s)a="Failed";else if(1===s)r=t,t=void 0;else{if(!1===M)M=!0,(process.emitWarning?process.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");2===s&&(i="!=")}if(r instanceof Error)throw r;var l={actual:t,expected:n,operator:void 0===i?"fail":i,stackStartFn:o||e};void 0!==r&&(l.message=r);var c=new m(l);throw a&&(c.message=a,c.generatedMessage=!0),c},T.AssertionError=m,T.ok=R,T.equal=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t!=n&&C({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},T.notEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t==n&&C({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},T.deepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===s&&S(),s(t,n)||C({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},T.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===s&&S(),s(t,n)&&C({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},T.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===s&&S(),l(t,n)||C({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},T.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===s&&S();l(t,n)&&C({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},T.strictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");w(t,n)||C({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},T.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");w(t,n)&&C({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var k=o((function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"===typeof r[e]&&y(t[e])&&_(t[e],r[e])?i[e]=r[e]:i[e]=t[e])}))}));function P(e,t,n,i){if("function"!==typeof t){if(y(t))return _(t,e);if(2===arguments.length)throw new h("expected",["Function","RegExp"],t);if("object"!==r(e)||null===e){var o=new m({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:i});throw o.operator=i.name,o}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(0===a.length)throw new d("error",t,"may not be an empty object");return void 0===s&&S(),a.forEach((function(r){"string"===typeof e[r]&&y(t[r])&&_(t[r],e[r])||function(e,t,n,r,i,o){if(!(n in e)||!l(e[n],t[n])){if(!r){var a=new k(e,i),s=new k(t,i,e),c=new m({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}C({actual:e,expected:t,message:r,operator:o.name,stackStartFn:o})}}(e,t,r,n,a,i)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function L(e){if("function"!==typeof e)throw new h("fn","Function",e);try{e()}catch(t){return t}return E}function O(e){return b(e)||null!==e&&"object"===r(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function N(e){return Promise.resolve().then((function(){var t;if("function"===typeof e){if(!O(t=e()))throw new p("instance of Promise","promiseFn",t)}else{if(!O(e))throw new h("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return E})).catch((function(e){return e}))}))}function I(e,t,n,i){if("string"===typeof n){if(4===arguments.length)throw new h("error",["Object","Error","Function","RegExp"],n);if("object"===r(t)&&null!==t){if(t.message===n)throw new u("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new u("error/message",'The error "'.concat(t,'" is identical to the message.'));i=n,n=void 0}else if(null!=n&&"object"!==r(n)&&"function"!==typeof n)throw new h("error",["Object","Error","Function","RegExp"],n);if(t===E){var o="";n&&n.name&&(o+=" (".concat(n.name,")")),o+=i?": ".concat(i):".";var a="rejects"===e.name?"rejection":"exception";C({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(o),stackStartFn:e})}if(n&&!P(t,n,i,e))throw t}function D(e,t,n,r){if(t!==E){if("string"===typeof n&&(r=n,n=void 0),!n||P(t,n)){var i=r?": ".concat(r):".",o="doesNotReject"===e.name?"rejection":"exception";C({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function j(e,t,n,i,o){if(!y(t))throw new h("regexp","RegExp",t);var a="match"===o;if("string"!==typeof e||_(t,e)!==a){if(n instanceof Error)throw n;var s=!n;n=n||("string"!==typeof e?'The "string" argument must be of type string. Received type '+"".concat(r(e)," (").concat(g(e),")"):(a?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(g(t),". Input:\n\n").concat(g(e),"\n"));var l=new m({actual:e,expected:t,message:n,operator:o,stackStartFn:i});throw l.generatedMessage=s,l}}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];A.apply(void 0,[F,t.length].concat(t))}T.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];I.apply(void 0,[e,L(t)].concat(r))},T.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return N(t).then((function(t){return I.apply(void 0,[e,t].concat(r))}))},T.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];D.apply(void 0,[e,L(t)].concat(r))},T.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return N(t).then((function(t){return D.apply(void 0,[e,t].concat(r))}))},T.ifError=function e(t){if(null!==t&&void 0!==t){var n="ifError got unwanted exception: ";"object"===r(t)&&"string"===typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=g(t);var i=new m({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),o=t.stack;if("string"===typeof o){var a=o.split("\n");a.shift();for(var s=i.stack.split("\n"),l=0;l<a.length;l++){var c=s.indexOf(a[l]);if(-1!==c){s=s.slice(0,c);break}}i.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw i}},T.match=function e(t,n,r){j(t,n,r,e,"match")},T.doesNotMatch=function e(t,n,r){j(t,n,r,e,"doesNotMatch")},T.strict=x(F,T,{equal:T.strictEqual,deepEqual:T.deepStrictEqual,notEqual:T.notStrictEqual,notDeepEqual:T.notDeepStrictEqual}),T.strict.strict=T.strict},3823:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function l(e,t){if(t&&("object"===m(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){var t="function"===typeof Map?new Map:void 0;return u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},u(e)}function h(e,t,n){return h=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},h.apply(null,arguments)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}var g=n(6494).inspect,v=n(6608).codes.ERR_INVALID_ARG_TYPE;function b(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var y="",x="",w="",_="",S={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function M(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function T(e){return g(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function E(e,t,n){var r="",i="",o=0,a="",s=!1,l=T(e),c=l.split("\n"),u=T(t).split("\n"),h=0,d="";if("strictEqual"===n&&"object"===m(e)&&"object"===m(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===c.length&&1===u.length&&c[0]!==u[0]){var p=c[0].length+u[0].length;if(p<=10){if(("object"!==m(e)||null===e)&&("object"!==m(t)||null===t)&&(0!==e||0!==t))return"".concat(S[n],"\n\n")+"".concat(c[0]," !== ").concat(u[0],"\n")}else if("strictEqualObject"!==n){if(p<(process.stderr&&process.stderr.isTTY?process.stderr.columns:80)){for(;c[0][h]===u[0][h];)h++;h>2&&(d="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",h),"^"),h=0)}}}for(var f=c[c.length-1],g=u[u.length-1];f===g&&(h++<2?a="\n  ".concat(f).concat(a):r=f,c.pop(),u.pop(),0!==c.length&&0!==u.length);)f=c[c.length-1],g=u[u.length-1];var v=Math.max(c.length,u.length);if(0===v){var M=l.split("\n");if(M.length>30)for(M[26]="".concat(y,"...").concat(_);M.length>27;)M.pop();return"".concat(S.notIdentical,"\n\n").concat(M.join("\n"),"\n")}h>3&&(a="\n".concat(y,"...").concat(_).concat(a),s=!0),""!==r&&(a="\n  ".concat(r).concat(a),r="");var E=0,C=S[n]+"\n".concat(x,"+ actual").concat(_," ").concat(w,"- expected").concat(_),A=" ".concat(y,"...").concat(_," Lines skipped");for(h=0;h<v;h++){var R=h-o;if(c.length<h+1)R>1&&h>2&&(R>4?(i+="\n".concat(y,"...").concat(_),s=!0):R>3&&(i+="\n  ".concat(u[h-2]),E++),i+="\n  ".concat(u[h-1]),E++),o=h,r+="\n".concat(w,"-").concat(_," ").concat(u[h]),E++;else if(u.length<h+1)R>1&&h>2&&(R>4?(i+="\n".concat(y,"...").concat(_),s=!0):R>3&&(i+="\n  ".concat(c[h-2]),E++),i+="\n  ".concat(c[h-1]),E++),o=h,i+="\n".concat(x,"+").concat(_," ").concat(c[h]),E++;else{var k=u[h],P=c[h],L=P!==k&&(!b(P,",")||P.slice(0,-1)!==k);L&&b(k,",")&&k.slice(0,-1)===P&&(L=!1,P+=","),L?(R>1&&h>2&&(R>4?(i+="\n".concat(y,"...").concat(_),s=!0):R>3&&(i+="\n  ".concat(c[h-2]),E++),i+="\n  ".concat(c[h-1]),E++),o=h,i+="\n".concat(x,"+").concat(_," ").concat(P),r+="\n".concat(w,"-").concat(_," ").concat(k),E+=2):(i+=r,r="",1!==R&&0!==h||(i+="\n  ".concat(P),E++))}if(E>20&&h<v-2)return"".concat(C).concat(A,"\n").concat(i,"\n").concat(y,"...").concat(_).concat(r,"\n")+"".concat(y,"...").concat(_)}return"".concat(C).concat(s?A:"","\n").concat(i).concat(r).concat(a).concat(d)}var C=function(e,t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var n,r,o,s=function(e){var t=d();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}(u);function u(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),"object"!==m(e)||null===e)throw new v("options","Object",e);var n=e.message,r=e.operator,i=e.stackStartFn,o=e.actual,a=e.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)t=s.call(this,String(n));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&1!==process.stderr.getColorDepth()?(y="\x1b[34m",x="\x1b[32m",_="\x1b[39m",w="\x1b[31m"):(y="",x="",_="",w="")),"object"===m(o)&&null!==o&&"object"===m(a)&&null!==a&&"stack"in o&&o instanceof Error&&"stack"in a&&a instanceof Error&&(o=M(o),a=M(a)),"deepStrictEqual"===r||"strictEqual"===r)t=s.call(this,E(o,a,r));else if("notDeepStrictEqual"===r||"notStrictEqual"===r){var d=S[r],p=T(o).split("\n");if("notStrictEqual"===r&&"object"===m(o)&&null!==o&&(d=S.notStrictEqualObject),p.length>30)for(p[26]="".concat(y,"...").concat(_);p.length>27;)p.pop();t=1===p.length?s.call(this,"".concat(d," ").concat(p[0])):s.call(this,"".concat(d,"\n\n").concat(p.join("\n"),"\n"))}else{var f=T(o),g="",b=S[r];"notDeepEqual"===r||"notEqual"===r?(f="".concat(S[r],"\n\n").concat(f)).length>1024&&(f="".concat(f.slice(0,1021),"...")):(g="".concat(T(a)),f.length>512&&(f="".concat(f.slice(0,509),"...")),g.length>512&&(g="".concat(g.slice(0,509),"...")),"deepEqual"===r||"equal"===r?f="".concat(b,"\n\n").concat(f,"\n\nshould equal\n\n"):g=" ".concat(r," ").concat(g)),t=s.call(this,"".concat(f).concat(g))}return Error.stackTraceLimit=h,t.generatedMessage=!n,Object.defineProperty(c(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=o,t.expected=a,t.operator=r,Error.captureStackTrace&&Error.captureStackTrace(c(t),i),t.stack,t.name="AssertionError",l(t)}return n=u,(r=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(e,t){return g(this,i(i({},t),{},{customInspect:!1,depth:0}))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(u(Error),g.custom);e.exports=C},6608:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c,u,h={};function d(e,t,n){n||(n=Error);var r=function(n){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,n);var r,o,l,c=s(u);function u(n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o=c.call(this,function(e,n,r){return"string"===typeof t?t:t(e,n,r)}(n,r,i)),o.code=e,o}return r=u,o&&i(r.prototype,o),l&&i(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r}(n);h[e]=r}function p(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,a,s,l;if(void 0===c&&(c=n(2539)),c("string"===typeof e,"'name' must be a string"),"string"===typeof t&&(a="not ",t.substr(!s||s<0?0:+s,a.length)===a)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))l="The ".concat(e," ").concat(o," ").concat(p(t,"type"));else{var u=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(u," ").concat(o," ").concat(p(t,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),d("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===u&&(u=n(6494));var i=u.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),d("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),d("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===c&&(c=n(2539)),c(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=h},6062:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=void 0!==/a/g.flags,s=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},l=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},c=Object.is?Object.is:n(2702),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:n(2384);function d(e){return e.call.bind(e)}var p=d(Object.prototype.hasOwnProperty),f=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),g=n(6494).types,v=g.isAnyArrayBuffer,b=g.isArrayBufferView,y=g.isDate,x=g.isMap,w=g.isRegExp,_=g.isSet,S=g.isNativeError,M=g.isBoxedPrimitive,T=g.isNumberObject,E=g.isStringObject,C=g.isBooleanObject,A=g.isBigIntObject,R=g.isSymbolObject,k=g.isFloat32Array,P=g.isFloat64Array;function L(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function O(e){return Object.keys(e).filter(L).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function N(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}var I=0,D=1,j=2,F=3;function z(e,t,n,r){if(e===t)return 0!==e||(!n||c(e,t));if(n){if("object"!==o(e))return"number"===typeof e&&h(e)&&h(t);if("object"!==o(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==o(e))return(null===t||"object"!==o(t))&&e==t;if(null===t||"object"!==o(t))return!1}var i,s,l,u,d=m(e);if(d!==m(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var p=O(e),f=O(t);return p.length===f.length&&U(e,t,n,r,D,p)}if("[object Object]"===d&&(!x(e)&&x(t)||!_(e)&&_(t)))return!1;if(y(e)){if(!y(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(w(e)){if(!w(t)||(l=e,u=t,!(a?l.source===u.source&&l.flags===u.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(u))))return!1}else if(S(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(b(e)){if(n||!k(e)&&!P(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===N(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var g=O(e),L=O(t);return g.length===L.length&&U(e,t,n,r,I,g)}if(_(e))return!(!_(t)||e.size!==t.size)&&U(e,t,n,r,j);if(x(e))return!(!x(t)||e.size!==t.size)&&U(e,t,n,r,F);if(v(e)){if(s=t,(i=e).byteLength!==s.byteLength||0!==N(new Uint8Array(i),new Uint8Array(s)))return!1}else if(M(e)&&!function(e,t){return T(e)?T(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):E(e)?E(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):C(e)?C(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):A(e)?A(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):R(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return U(e,t,n,r,I)}function B(e,t){return t.filter((function(t){return f(e,t)}))}function U(e,t,n,i,a,c){if(5===arguments.length){c=Object.keys(e);var h=Object.keys(t);if(c.length!==h.length)return!1}for(var d=0;d<c.length;d++)if(!p(t,c[d]))return!1;if(n&&5===arguments.length){var m=u(e);if(0!==m.length){var g=0;for(d=0;d<m.length;d++){var v=m[d];if(f(e,v)){if(!f(t,v))return!1;c.push(v),g++}else if(f(t,v))return!1}var b=u(t);if(m.length!==b.length&&B(t,b).length!==g)return!1}else{var y=u(t);if(0!==y.length&&0!==B(t,y).length)return!1}}if(0===c.length&&(a===I||a===D&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var x=i.val1.get(e);if(void 0!==x){var w=i.val2.get(t);if(void 0!==w)return x===w}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var _=function(e,t,n,i,a,c){var u=0;if(c===j){if(!function(e,t,n,r){for(var i=null,a=s(e),l=0;l<a.length;l++){var c=a[l];if("object"===o(c)&&null!==c)null===i&&(i=new Set),i.add(c);else if(!t.has(c)){if(n)return!1;if(!H(e,t,c))return!1;null===i&&(i=new Set),i.add(c)}}if(null!==i){for(var u=s(t),h=0;h<u.length;h++){var d=u[h];if("object"===o(d)&&null!==d){if(!G(i,d,n,r))return!1}else if(!n&&!e.has(d)&&!G(i,d,n,r))return!1}return 0===i.size}return!0}(e,t,n,a))return!1}else if(c===F){if(!function(e,t,n,i){for(var a=null,s=l(e),c=0;c<s.length;c++){var u=r(s[c],2),h=u[0],d=u[1];if("object"===o(h)&&null!==h)null===a&&(a=new Set),a.add(h);else{var p=t.get(h);if(void 0===p&&!t.has(h)||!z(d,p,n,i)){if(n)return!1;if(!W(e,t,h,d,i))return!1;null===a&&(a=new Set),a.add(h)}}}if(null!==a){for(var f=l(t),m=0;m<f.length;m++){var g=r(f[m],2),v=g[0],b=g[1];if("object"===o(v)&&null!==v){if(!$(a,e,v,b,n,i))return!1}else if(!n&&(!e.has(v)||!z(e.get(v),b,!1,i))&&!$(a,e,v,b,!1,i))return!1}return 0===a.size}return!0}(e,t,n,a))return!1}else if(c===D)for(;u<e.length;u++){if(!p(e,u)){if(p(t,u))return!1;for(var h=Object.keys(e);u<h.length;u++){var d=h[u];if(!p(t,d)||!z(e[d],t[d],n,a))return!1}return h.length===Object.keys(t).length}if(!p(t,u)||!z(e[u],t[u],n,a))return!1}for(u=0;u<i.length;u++){var f=i[u];if(!z(e[f],t[f],n,a))return!1}return!0}(e,t,n,c,i,a);return i.val1.delete(e),i.val2.delete(t),_}function G(e,t,n,r){for(var i=s(e),o=0;o<i.length;o++){var a=i[o];if(z(t,a,n,r))return e.delete(a),!0}return!1}function V(e){switch(o(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(h(e))return!1}return!0}function H(e,t,n){var r=V(n);return null!=r?r:t.has(r)&&!e.has(r)}function W(e,t,n,r,i){var o=V(n);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!z(r,a,!1,i))&&(!e.has(o)&&z(r,a,!1,i))}function $(e,t,n,r,i,o){for(var a=s(e),l=0;l<a.length;l++){var c=a[l];if(z(n,c,i,o)&&z(r,t.get(c),i,o))return e.delete(c),!0}return!1}e.exports={isDeepEqual:function(e,t){return z(e,t,false)},isDeepStrictEqual:function(e,t){return z(e,t,true)}}},5:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,l=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(92)),i=l(n(93)),o=l(n(94)),a=l(n(95)),s=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),l=s.default.find(a,(function(e){return t.isOS(e)}));if(l){var c=this.satisfies(n[l]);if(void 0!==c)return c}var u=s.default.find(a,(function(e){return t.isPlatform(e)}));if(u){var h=this.satisfies(n[u]);if(void 0!==h)return h}}if(o>0){var d=Object.keys(i),p=s.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},2028:(e,t,n)=>{"use strict";var r=n(2),i=n(1712),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i(n):n}},1712:(e,t,n)=>{"use strict";var r=n(3864),i=n(2),o=n(5438),a=n(4902),s=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),c=i("%Reflect.apply%",!0)||r.call(l,s),u=n(2090),h=i("%Math.max%");e.exports=function(e){if("function"!==typeof e)throw new a("a function is required");var t=c(r,l,arguments);return o(t,1+h(0,e.length-(arguments.length-1)),!0)};var d=function(){return c(r,s,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},4992:(e,t,n)=>{"use strict";var r=n(2090),i=n(2557),o=n(4902),a=n(5558);e.exports=function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new o("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!a&&a(e,t);if(r)r(e,t,{configurable:null===c&&h?h.configurable:!c,enumerable:null===s&&h?h.enumerable:!s,value:n,writable:null===l&&h?h.writable:!l});else{if(!u&&(s||l||c))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},1779:(e,t,n)=>{"use strict";var r=n(2678),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=n(4992),l=n(2101)(),c=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if("function"!==typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;l?s(e,t,n,!0):s(e,t,n)},u=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)c(e,o[s],t[o[s]],n[o[s]])};u.supportsDescriptors=!!l,e.exports=u},2090:(e,t,n)=>{"use strict";var r=n(2)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(i){r=!1}e.exports=r},9820:e=>{"use strict";e.exports=EvalError},9304:e=>{"use strict";e.exports=Error},1725:e=>{"use strict";e.exports=RangeError},5077:e=>{"use strict";e.exports=ReferenceError},2557:e=>{"use strict";e.exports=SyntaxError},4902:e=>{"use strict";e.exports=TypeError},3094:e=>{"use strict";e.exports=URIError},1903:(e,t,n)=>{"use strict";var r=n(8799),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a):"string"===typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,a):function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a)}},7724:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!==typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,a=function(e,t){for(var n=[],r=t||0,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n}(arguments,1),s=n(0,i.length-a.length),l=[],c=0;c<s;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var t=i.apply(this,r(a,arguments));return Object(t)===t?t:this}return i.apply(e,r(a,arguments))})),i.prototype){var u=function(){};u.prototype=i.prototype,o.prototype=new u,u.prototype=null}return o}},3864:(e,t,n)=>{"use strict";var r=n(7724);e.exports=Function.prototype.bind||r},2:(e,t,n)=>{"use strict";var r,i=n(9304),o=n(9820),a=n(1725),s=n(5077),l=n(2557),c=n(4902),u=n(3094),h=Function,d=function(e){try{return h('"use strict"; return ('+e+").constructor;")()}catch(t){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(I){p=null}var f=function(){throw new c},m=p?function(){try{return f}catch(e){try{return p(arguments,"callee").get}catch(t){return f}}}():f,g=n(2108)(),v=n(951)(),b=Object.getPrototypeOf||(v?function(e){return e.__proto__}:null),y={},x="undefined"!==typeof Uint8Array&&b?b(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&b?b([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":y,"%AsyncGenerator%":y,"%AsyncGeneratorFunction%":y,"%AsyncIteratorPrototype%":y,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":y,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&b?b(b([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&g&&b?b((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&g&&b?b((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&b?b(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":x,"%TypeError%":c,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(b)try{null.error}catch(I){var _=b(b(I));w["%Error.prototype%"]=_}var S=function e(t){var n;if("%AsyncFunction%"===t)n=d("async function () {}");else if("%GeneratorFunction%"===t)n=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=d("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&b&&(n=b(i.prototype))}return w[t]=n,n},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=n(3864),E=n(4384),C=T.call(Function.call,Array.prototype.concat),A=T.call(Function.apply,Array.prototype.splice),R=T.call(Function.call,String.prototype.replace),k=T.call(Function.call,String.prototype.slice),P=T.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,N=function(e,t){var n,r=e;if(E(M,r)&&(r="%"+(n=M[r])[0]+"%"),E(w,r)){var i=w[r];if(i===y&&(i=S(r)),"undefined"===typeof i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===P(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=k(e,0,1),n=k(e,-1);if("%"===t&&"%"!==n)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var r=[];return R(e,L,(function(e,t,n,i){r[r.length]=n?R(i,O,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=N("%"+r+"%",t),o=i.name,a=i.value,s=!1,u=i.alias;u&&(r=u[0],A(n,C([0,1],u)));for(var h=1,d=!0;h<n.length;h+=1){var f=n[h],m=k(f,0,1),g=k(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&d||(s=!0),E(w,o="%"+(r+="."+f)+"%"))a=w[o];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&h+1>=n.length){var v=p(a,f);a=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:a[f]}else d=E(a,f),a=a[f];d&&!s&&(w[o]=a)}}return a}},5558:(e,t,n)=>{"use strict";var r=n(2)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(i){r=null}e.exports=r},2101:(e,t,n)=>{"use strict";var r=n(2090),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},951:e=>{"use strict";var t={__proto__:null,foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof n)}},2108:(e,t,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(9534);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},9534:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4635:(e,t,n)=>{"use strict";var r=n(9534);e.exports=function(){return r()&&!!Symbol.toStringTag}},4384:(e,t,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(3864);e.exports=o.call(r,i)},8378:(e,t,n)=>{e.exports=n(3890)},3890:function(e,t){var n,r,i;(function(){var o,a,s,l,c,u,h,d,p,f,m,g,v,b,y;s=Math.floor,f=Math.min,a=function(e,t){return e<t?-1:e>t?1:0},p=function(e,t,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=a),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)i(t,e[o=s((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(e,[n,n-n].concat(t)),t},u=function(e,t,n){return null==n&&(n=a),e.push(t),b(e,0,e.length-1,n)},c=function(e,t){var n,r;return null==t&&(t=a),n=e.pop(),e.length?(r=e[0],e[0]=n,y(e,0,t)):r=n,r},d=function(e,t,n){var r;return null==n&&(n=a),r=e[0],e[0]=t,y(e,0,n),r},h=function(e,t,n){var r;return null==n&&(n=a),e.length&&n(e[0],t)<0&&(t=(r=[e[0],t])[0],e[0]=r[1],y(e,0,n)),t},l=function(e,t){var n,r,i,o,l,c;for(null==t&&(t=a),o=function(){c=[];for(var t=0,n=s(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)c.push(t);return c}.apply(this).reverse(),l=[],r=0,i=o.length;r<i;r++)n=o[r],l.push(y(e,n,t));return l},v=function(e,t,n){var r;if(null==n&&(n=a),-1!==(r=e.indexOf(t)))return b(e,0,r,n),y(e,r,n)},m=function(e,t,n){var r,i,o,s,c;if(null==n&&(n=a),!(i=e.slice(0,t)).length)return i;for(l(i,n),o=0,s=(c=e.slice(t)).length;o<s;o++)r=c[o],h(i,r,n);return i.sort(n).reverse()},g=function(e,t,n){var r,i,o,s,u,h,d,m,g;if(null==n&&(n=a),10*t<=e.length){if(!(o=e.slice(0,t).sort(n)).length)return o;for(i=o[o.length-1],s=0,h=(d=e.slice(t)).length;s<h;s++)n(r=d[s],i)<0&&(p(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(l(e,n),g=[],u=0,m=f(t,e.length);0<=m?u<m:u>m;0<=m?++u:--u)g.push(c(e,n));return g},b=function(e,t,n,r){var i,o,s;for(null==r&&(r=a),i=e[n];n>t&&r(i,o=e[s=n-1>>1])<0;)e[n]=o,n=s;return e[n]=i},y=function(e,t,n){var r,i,o,s,l;for(null==n&&(n=a),i=e.length,l=t,o=e[t],r=2*t+1;r<i;)(s=r+1)<i&&!(n(e[r],e[s])<0)&&(r=s),e[t]=e[r],r=2*(t=r)+1;return e[t]=o,b(e,l,t,n)},o=function(){function e(e){this.cmp=null!=e?e:a,this.nodes=[]}return e.push=u,e.pop=c,e.replace=d,e.pushpop=h,e.heapify=l,e.updateItem=v,e.nlargest=m,e.nsmallest=g,e.prototype.push=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pop=function(){return c(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return d(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return l(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),r=[],void 0===(i="function"===typeof(n=function(){return o})?n.apply(t,r):n)||(e.exports=i)}).call(this)},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var b=d(n,v);try{c(t,v,b)}catch(y){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===u},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===b||e.$$typeof===y||e.$$typeof===x||e.$$typeof===v)},t.typeOf=w},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},6329:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8317:(e,t,n)=>{"use strict";var r=n(4635)(),i=n(2028)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},8799:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof i&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(p){p!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=r.call(e);return o.test(t)}catch(n){return!1}},s=function(e){try{return!a(e)&&(r.call(e),!0)}catch(t){return!1}},l=Object.prototype.toString,c="function"===typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"===typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(e){if((u||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(n){}return!1})}e.exports=i?function(e){if(h(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;try{i(e,null,t)}catch(r){if(r!==n)return!1}return!a(e)&&s(e)}:function(e){if(h(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(c)return s(e);if(a(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},1583:(e,t,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(4635)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if("undefined"===typeof r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&l(t)}return l(e)===r}},8724:e=>{"use strict";e.exports=function(e){return e!==e}},2384:(e,t,n)=>{"use strict";var r=n(1712),i=n(1779),o=n(8724),a=n(7057),s=n(6607),l=r(a(),Number);i(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},7057:(e,t,n)=>{"use strict";var r=n(8724);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},6607:(e,t,n)=>{"use strict";var r=n(1779),i=n(7057);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},9849:(e,t,n)=>{"use strict";var r=n(8004);e.exports=function(e){return!!r(e)}},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,h,d,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=l,r=c;return l=c=void 0,f=t,h=e.apply(r,n)}function y(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function x(){var e=i();if(y(e))return w(e);d=setTimeout(x,function(e){var n=t-(e-p);return g?s(n,u-(e-f)):n}(e))}function w(e){return d=void 0,v&&l?b(e):(l=c=void 0,h)}function _(){var e=i(),n=y(e);if(l=arguments,c=this,p=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(x,t),m?b(e):h}(p);if(g)return clearTimeout(d),d=setTimeout(x,t),b(p)}return void 0===d&&(d=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=p=c=d=void 0},_.flush=function(){return void 0===d?h:w(i())},_}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},3536:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,h=128,d=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],b="[object Arguments]",y="[object Array]",x="[object Boolean]",w="[object Date]",_="[object Error]",S="[object Function]",M="[object GeneratorFunction]",T="[object Map]",E="[object Number]",C="[object Object]",A="[object Promise]",R="[object RegExp]",k="[object Set]",P="[object String]",L="[object Symbol]",O="[object WeakMap]",N="[object ArrayBuffer]",I="[object DataView]",D="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",G="[object Uint8ClampedArray]",V="[object Uint16Array]",H="[object Uint32Array]",W=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(X.source),J=RegExp(Y.source),Q=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Re="\\ufe0e\\ufe0f",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['\u2019]",Le="["+Me+"]",Oe="["+ke+"]",Ne="["+Te+"]",Ie="\\d+",De="["+Ee+"]",je="["+Ce+"]",Fe="[^"+Me+ke+Ie+Ee+Ce+Ae+"]",ze="\\ud83c[\\udffb-\\udfff]",Be="[^"+Me+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ae+"]",He="\\u200d",We="(?:"+je+"|"+Fe+")",$e="(?:"+Ve+"|"+Fe+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+Ne+"|"+ze+")"+"?",Ke="["+Re+"]?",Je=Ke+Ye+("(?:"+He+"(?:"+[Be,Ue,Ge].join("|")+")"+Ke+Ye+")*"),Qe="(?:"+[De,Ue,Ge].join("|")+")"+Je,Ze="(?:"+[Be+Ne+"?",Ne,Ue,Ge,Le].join("|")+")",et=RegExp(Pe,"g"),tt=RegExp(Ne,"g"),nt=RegExp(ze+"(?="+ze+")|"+Ze+Je,"g"),rt=RegExp([Ve+"?"+je+"+"+qe+"(?="+[Oe,Ve,"$"].join("|")+")",$e+"+"+Xe+"(?="+[Oe,Ve+We,"$"].join("|")+")",Ve+"?"+We+"+"+qe,Ve+"+"+Xe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Qe].join("|"),"g"),it=RegExp("["+He+Me+Te+Re+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[D]=lt[j]=lt[F]=lt[z]=lt[B]=lt[U]=lt[G]=lt[V]=lt[H]=!0,lt[b]=lt[y]=lt[N]=lt[x]=lt[I]=lt[w]=lt[_]=lt[S]=lt[T]=lt[E]=lt[C]=lt[R]=lt[k]=lt[P]=lt[O]=!1;var ct={};ct[b]=ct[y]=ct[N]=ct[I]=ct[x]=ct[w]=ct[D]=ct[j]=ct[F]=ct[z]=ct[B]=ct[T]=ct[E]=ct[C]=ct[R]=ct[k]=ct[P]=ct[L]=ct[U]=ct[G]=ct[V]=ct[H]=!0,ct[_]=ct[S]=ct[O]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,bt=vt&&vt.exports===gt,yt=bt&&pt.process,xt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),wt=xt&&xt.isArrayBuffer,_t=xt&&xt.isDate,St=xt&&xt.isMap,Mt=xt&&xt.isRegExp,Tt=xt&&xt.isSet,Et=xt&&xt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function At(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Nt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=qt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Gt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Gt(e,Wt,n)}function Ht(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Wt(e){return e!==e}function $t(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:m}function qt(e){return function(t){return null==t?i:t[e]}}function Xt(e){return function(t){return null==e?i:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Kt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Qt(e){return e?e.slice(0,gn(e)+1).replace(ae,""):e}function Zt(e){return function(t){return e(t)}}function en(e,t){return It(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}var on=Xt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Xt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Xt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bn=function e(t){var n=(t=null==t?mt:bn.defaults(mt.Object(),t,bn.pick(mt,at))).Array,r=t.Date,se=t.Error,Me=t.Function,Te=t.Math,Ee=t.Object,Ce=t.RegExp,Ae=t.String,Re=t.TypeError,ke=n.prototype,Pe=Me.prototype,Le=Ee.prototype,Oe=t["__core-js_shared__"],Ne=Pe.toString,Ie=Le.hasOwnProperty,De=0,je=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Le.toString,ze=Ne.call(Ee),Be=mt._,Ue=Ce("^"+Ne.call(Ie).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=bt?t.Buffer:i,Ve=t.Symbol,He=t.Uint8Array,We=Ge?Ge.allocUnsafe:i,$e=un(Ee.getPrototypeOf,Ee),qe=Ee.create,Xe=Le.propertyIsEnumerable,Ye=ke.splice,Ke=Ve?Ve.isConcatSpreadable:i,Je=Ve?Ve.iterator:i,Qe=Ve?Ve.toStringTag:i,Ze=function(){try{var e=ho(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,it=r&&r.now!==mt.Date.now&&r.now,ut=t.setTimeout!==mt.setTimeout&&t.setTimeout,pt=Te.ceil,ft=Te.floor,gt=Ee.getOwnPropertySymbols,vt=Ge?Ge.isBuffer:i,yt=t.isFinite,xt=ke.join,Bt=un(Ee.keys,Ee),Xt=Te.max,yn=Te.min,xn=r.now,wn=t.parseInt,_n=Te.random,Sn=ke.reverse,Mn=ho(t,"DataView"),Tn=ho(t,"Map"),En=ho(t,"Promise"),Cn=ho(t,"Set"),An=ho(t,"WeakMap"),Rn=ho(Ee,"create"),kn=An&&new An,Pn={},Ln=Fo(Mn),On=Fo(Tn),Nn=Fo(En),In=Fo(Cn),Dn=Fo(An),jn=Ve?Ve.prototype:i,Fn=jn?jn.valueOf:i,zn=jn?jn.toString:i;function Bn(e){if(ts(e)&&!Ha(e)&&!(e instanceof Hn)){if(e instanceof Vn)return e;if(Ie.call(e,"__wrapped__"))return zo(e)}return new Vn(e)}var Un=function(){function e(){}return function(t){if(!es(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Gn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new $n(e);this.size=t.size}function Kn(e,t){var n=Ha(e),r=!n&&Va(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&cs(e),a=n||r||i||o,s=a?Jt(e.length,Ae):[],l=s.length;for(var c in e)!t&&!Ie.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yo(c,l))||s.push(c);return s}function Jn(e){var t=e.length;return t?e[Xr(0,t-1)]:i}function Qn(e,t){return Io(Ri(e),sr(t,0,e.length))}function Zn(e){return Io(Ri(e))}function er(e,t,n){(n!==i&&!Ba(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function tr(e,t,n){var r=e[t];Ie.call(e,t)&&Ba(r,n)&&(n!==i||t in e)||or(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(Ba(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ir(e,t){return e&&ki(t,Ps(t),e)}function or(e,t,n){"__proto__"==t&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,o=t.length,a=n(o),s=null==e;++r<o;)a[r]=s?i:Es(e,t[r]);return a}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,o,a){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!es(e))return e;var h=Ha(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ri(e,s)}else{var d=mo(e),p=d==S||d==M;if(Xa(e))return Si(e,l);if(d==C||d==b||p&&!o){if(s=c||p?{}:vo(e),!l)return c?function(e,t){return ki(e,fo(e),t)}(e,function(e,t){return e&&ki(t,Ls(t),e)}(s,e)):function(e,t){return ki(e,po(e),t)}(e,ir(s,e))}else{if(!ct[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case N:return Mi(e);case x:case w:return new r(+e);case I:return function(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case j:case F:case z:case B:case U:case G:case V:case H:return Ti(e,n);case T:return new r;case E:case P:return new r(e);case R:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new r;case L:return i=e,Fn?Ee(Fn.call(i)):{}}var i}(e,d,l)}}a||(a=new Yn);var f=a.get(e);if(f)return f;a.set(e,s),as(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):ns(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,a))}));var m=h?i:(u?c?io:ro:c?Ls:Ps)(e);return Rt(m||e,(function(r,i){m&&(r=e[i=r]),tr(s,i,lr(r,t,n,i,e,a))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new Re(o);return Po((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,o=Ot,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=It(t,Zt(n))),r?(o=Nt,a=!1):t.length>=200&&(o=tn,a=!1,t=new Xn(t));e:for(;++i<s;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h===h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,r)||l.push(u)}return l}Bn.templateSettings={escape:Q,evaluate:Z,interpolate:ee,variable:"",imports:{_:Bn}},Bn.prototype=Gn.prototype,Bn.prototype.constructor=Bn,Vn.prototype=Un(Gn.prototype),Vn.prototype.constructor=Vn,Hn.prototype=Un(Gn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Rn){var n=t[e];return n===a?i:n}return Ie.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return Rn?t[e]!==i:Ie.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&t===i?a:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},$n.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},$n.prototype.has=function(e){return nr(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||$n),string:new Wn}},qn.prototype.delete=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return co(this,e).get(e)},qn.prototype.has=function(e){return co(this,e).has(e)},qn.prototype.set=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,a),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new $n,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Oi(xr),pr=Oi(wr,!0);function fr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(l===i?s===s&&!ls(s):n(s,l)))var l=s,c=a}return c}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?vr(s,t-1,n,r,i):Dt(i,s):r||(i[i.length]=s)}return i}var br=Ni(),yr=Ni(!0);function xr(e,t){return e&&br(e,t,Ps)}function wr(e,t){return e&&yr(e,t,Ps)}function _r(e,t){return Lt(t,(function(t){return Ja(e[t])}))}function Sr(e,t){for(var n=0,r=(t=yi(t,e)).length;null!=e&&n<r;)e=e[jo(t[n++])];return n&&n==r?e:i}function Mr(e,t,n){var r=t(e);return Ha(e)?r:Dt(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Qe&&Qe in Ee(e)?function(e){var t=Ie.call(e,Qe),n=e[Qe];try{e[Qe]=i;var r=!0}catch(a){}var o=Fe.call(e);r&&(t?e[Qe]=n:delete e[Qe]);return o}(e):function(e){return Fe.call(e)}(e)}function Er(e,t){return e>t}function Cr(e,t){return null!=e&&Ie.call(e,t)}function Ar(e,t){return null!=e&&t in Ee(e)}function Rr(e,t,r){for(var o=r?Nt:Ot,a=e[0].length,s=e.length,l=s,c=n(s),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=It(d,Zt(t))),u=yn(d.length,u),c[l]=!r&&(t||a>=120&&d.length>=120)?new Xn(l&&d):i}d=e[0];var p=-1,f=c[0];e:for(;++p<a&&h.length<u;){var m=d[p],g=t?t(m):m;if(m=r||0!==m?m:0,!(f?tn(f,g):o(h,g,r))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):o(e[l],g,r)))continue e}f&&f.push(g),h.push(m)}}return h}function kr(e,t,n){var r=null==(e=Ao(e,t=yi(t,e)))?e:e[jo(Ko(t))];return null==r?i:Ct(r,e,n)}function Pr(e){return ts(e)&&Tr(e)==b}function Lr(e,t,n,r,o){return e===t||(null==e||null==t||!ts(e)&&!ts(t)?e!==e&&t!==t:function(e,t,n,r,o,a){var s=Ha(e),l=Ha(t),c=s?y:mo(e),u=l?y:mo(t),h=(c=c==b?C:c)==C,d=(u=u==b?C:u)==C,p=c==u;if(p&&Xa(e)){if(!Xa(t))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new Yn),s||cs(e)?to(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case x:case w:case E:return Ba(+e,+t);case _:return e.name==t.name&&e.message==t.message;case R:case P:return e==t+"";case T:var s=cn;case k:var l=1&r;if(s||(s=dn),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=to(s(e),s(t),r,i,o,a);return a.delete(e),u;case L:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,o,a);if(!(1&n)){var f=h&&Ie.call(e,"__wrapped__"),m=d&&Ie.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return a||(a=new Yn),o(g,v,n,r,a)}}if(!p)return!1;return a||(a=new Yn),function(e,t,n,r,o,a){var s=1&n,l=ro(e),c=l.length,u=ro(t),h=u.length;if(c!=h&&!s)return!1;var d=c;for(;d--;){var p=l[d];if(!(s?p in t:Ie.call(t,p)))return!1}var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var g=!0;a.set(e,t),a.set(t,e);var v=s;for(;++d<c;){var b=e[p=l[d]],y=t[p];if(r)var x=s?r(y,b,p,t,e,a):r(b,y,p,e,t,a);if(!(x===i?b===y||o(b,y,n,r,a):x)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,r,o,a)}(e,t,n,r,Lr,o))}function Or(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Ee(e);o--;){var l=n[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var c=(l=n[o])[0],u=e[c],h=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new Yn;if(r)var p=r(u,h,c,e,t,d);if(!(p===i?Lr(h,u,3,r,d):p))return!1}}return!0}function Nr(e){return!(!es(e)||(t=e,je&&je in t))&&(Ja(e)?Ue:be).test(Fo(e));var t}function Ir(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ha(e)?Ur(e[0],e[1]):Br(e):dl(e)}function Dr(e){if(!Mo(e))return Bt(e);var t=[];for(var n in Ee(e))Ie.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=Mo(e),n=[];for(var r in e)("constructor"!=r||!t&&Ie.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function zr(e,t){var r=-1,i=$a(e)?n(e.length):[];return dr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Br(e){var t=uo(e);return 1==t.length&&t[0][2]?Eo(t[0][0],t[0][1]):function(n){return n===e||Or(n,e,t)}}function Ur(e,t){return wo(e)&&To(t)?Eo(jo(e),t):function(n){var r=Es(n,e);return r===i&&r===t?Cs(n,e):Lr(t,r,3)}}function Gr(e,t,n,r,o){e!==t&&br(t,(function(a,s){if(o||(o=new Yn),es(a))!function(e,t,n,r,o,a,s){var l=Ro(e,n),c=Ro(t,n),u=s.get(c);if(u)return void er(e,n,u);var h=a?a(l,c,n+"",e,t,s):i,d=h===i;if(d){var p=Ha(c),f=!p&&Xa(c),m=!p&&!f&&cs(c);h=c,p||f||m?Ha(l)?h=l:qa(l)?h=Ri(l):f?(d=!1,h=Si(c,!0)):m?(d=!1,h=Ti(c,!0)):h=[]:is(c)||Va(c)?(h=l,Va(l)?h=vs(l):es(l)&&!Ja(l)||(h=vo(c))):d=!1}d&&(s.set(c,h),o(h,c,r,a,s),s.delete(c));er(e,n,h)}(e,t,s,n,Gr,r,o);else{var l=r?r(Ro(e,s),a,s+"",e,t,o):i;l===i&&(l=a),er(e,s,l)}}),Ls)}function Vr(e,t){var n=e.length;if(n)return yo(t+=t<0?n:0,n)?e[t]:i}function Hr(e,t,n){t=t.length?It(t,(function(e){return Ha(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=It(t,Zt(lo()));var i=zr(e,(function(e,n,i){var o=It(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var l=Ei(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Sr(e,a);n(s,a)&&Zr(o,yi(a,e),s)}return o}function $r(e,t,n,r){var i=r?Ht:Vt,o=-1,a=t.length,s=e;for(e===t&&(t=Ri(t)),n&&(s=It(e,Zt(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;yo(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Xr(e,t){return e+ft(_n()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=ft(t/2))&&(e+=e)}while(t);return n}function Kr(e,t){return Lo(Co(e,t,rl),e+"")}function Jr(e){return Jn(Bs(e))}function Qr(e,t){var n=Bs(e);return Io(n,sr(t,0,n.length))}function Zr(e,t,n,r){if(!es(e))return e;for(var o=-1,a=(t=yi(t,e)).length,s=a-1,l=e;null!=l&&++o<a;){var c=jo(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=es(h)?h:yo(t[o+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ei=kn?function(e,t){return kn.set(e,t),e}:rl,ti=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Io(Bs(e))}function ri(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function ii(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ai(e,t,rl,n)}function ai(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,l=null===t,c=ls(t),u=t===i;o<a;){var h=ft((o+a)/2),d=n(e[h]),p=d!==i,f=null===d,m=d===d,g=ls(d);if(s)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?d<=t:d<t);v?o=h+1:a=h}return yn(a,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ba(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function li(e){return"number"==typeof e?e:ls(e)?m:+e}function ci(e){if("string"==typeof e)return e;if(Ha(e))return It(e,ci)+"";if(ls(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Ot,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Nt;else if(o>=200){var c=t?null:Yi(e);if(c)return dn(c);a=!1,i=tn,l=new Xn}else l=t?[]:s;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function hi(e,t){return null==(e=Ao(e,t=yi(t,e)))||delete e[jo(Ko(t))]}function di(e,t,n,r){return Zr(e,t,n(Sr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ri(e,r?0:o,r?o+1:i):ri(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],l=-1;++l<i;)l!=o&&(a[o]=hr(a[o]||s,e[l],t,r));return ui(vr(a,1),t,r)}function gi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var l=r<a?t[r]:i;n(s,e[r],l)}return s}function vi(e){return qa(e)?e:[]}function bi(e){return"function"==typeof e?e:rl}function yi(e,t){return Ha(e)?e:wo(e,t)?[e]:Do(bs(e))}var xi=Kr;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var _i=nt||function(e){return mt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Mi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ti(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,a=ls(e),s=t!==i,l=null===t,c=t===t,u=ls(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!u&&e<t||u&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Ci(e,t,r,i){for(var o=-1,a=e.length,s=r.length,l=-1,c=t.length,u=Xt(a-s,0),h=n(c+u),d=!i;++l<c;)h[l]=t[l];for(;++o<s;)(d||o<a)&&(h[r[o]]=e[o]);for(;u--;)h[l++]=e[o++];return h}function Ai(e,t,r,i){for(var o=-1,a=e.length,s=-1,l=r.length,c=-1,u=t.length,h=Xt(a-l,0),d=n(h+u),p=!i;++o<h;)d[o]=e[o];for(var f=o;++c<u;)d[f+c]=t[c];for(;++s<l;)(p||o<a)&&(d[f+r[s]]=e[o++]);return d}function Ri(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function ki(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),o?or(n,l,c):tr(n,l,c)}return n}function Pi(e,t){return function(n,r){var i=Ha(n)?At:rr,o=t?t():{};return i(n,e,lo(r,2),o)}}function Li(e){return Kr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&xo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Ee(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}function Oi(e,t){return function(n,r){if(null==n)return n;if(!$a(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ee(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=Ee(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Ii(e){return function(t){var n=ln(t=bs(t))?mn(t):i,r=n?n[0]:t.charAt(0),o=n?wi(n,1).join(""):t.slice(1);return r[e]()+o}}function Di(e){return function(t){return jt(Js(Vs(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function Fi(e){return function(t,n,r){var o=Ee(t);if(!$a(t)){var a=lo(n,3);t=Ps(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function zi(e){return no((function(t){var n=t.length,r=n,a=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Re(o);if(a&&!l&&"wrapper"==ao(s))var l=new Vn([],!0)}for(r=l?r:n;++r<n;){var c=ao(s=t[r]),u="wrapper"==c?oo(s):i;l=u&&_o(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ao(u[0])].apply(l,u[3]):1==s.length&&_o(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ha(r))return l.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Bi(e,t,r,o,a,s,l,c,u,d){var p=t&h,f=1&t,m=2&t,g=24&t,v=512&t,b=m?i:ji(e);return function h(){for(var y=arguments.length,x=n(y),w=y;w--;)x[w]=arguments[w];if(g)var _=so(h),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(x,_);if(o&&(x=Ci(x,o,a,g)),s&&(x=Ai(x,s,l,g)),y-=S,g&&y<d){var M=hn(x,_);return qi(e,t,Bi,h.placeholder,r,x,M,c,u,d-y)}var T=f?r:this,E=m?T[e]:e;return y=x.length,c?x=function(e,t){var n=e.length,r=yn(t.length,n),o=Ri(e);for(;r--;){var a=t[r];e[r]=yo(a,n)?o[a]:i}return e}(x,c):v&&y>1&&x.reverse(),p&&u<y&&(x.length=u),this&&this!==mt&&this instanceof h&&(E=b||ji(E)),E.apply(T,x)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return xr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Gi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=e(n,r)}return o}}function Vi(e){return no((function(t){return t=It(t,Zt(lo())),Kr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function Hi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/fn(t)));return ln(t)?wi(mn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,r,o){return o&&"number"!=typeof o&&xo(t,r,o)&&(r=o=i),t=ps(t),r===i?(r=t,t=0):r=ps(r),function(e,t,r,i){for(var o=-1,a=Xt(pt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,o=o===i?t<r?1:-1:ps(o),e)}}function $i(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function qi(e,t,n,r,o,a,s,l,h,d){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,o,p?a:i,p?s:i,p?i:a,p?i:s,l,h,d],m=n.apply(i,f);return _o(e)&&ko(m,f),m.placeholder=r,Oo(m,e,t)}function Xi(e){var t=Te[e];return function(e,n){if(e=gs(e),(n=null==n?0:yn(fs(n),292))&&yt(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Cn&&1/dn(new Cn([,-0]))[1]==p?function(e){return new Cn(e)}:ll;function Ki(e){return function(t){var n=mo(t);return n==T?cn(t):n==k?pn(t):function(e,t){return It(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,a,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Re(o);var b=a?a.length:0;if(b||(t&=-97,a=p=i),m=m===i?m:Xt(fs(m),0),g=g===i?g:fs(g),b-=p?p.length:0,t&u){var y=a,x=p;a=p=i}var w=v?i:oo(e),_=[e,t,r,a,p,y,x,f,m,g];if(w&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ci(c,l,t[4]):l,e[4]=c?hn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ai(c,l,t[6]):l,e[6]=c?hn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&h&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(_,w),e=_[0],t=_[1],r=_[2],a=_[3],p=_[4],!(g=_[9]=_[9]===i?v?0:e.length:Xt(_[9]-b,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,r){var o=ji(e);return function a(){for(var s=arguments.length,l=n(s),c=s,u=so(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:hn(l,u);return(s-=h.length)<r?qi(e,t,Bi,a.placeholder,i,l,h,i,i,r-s):Ct(this&&this!==mt&&this instanceof a?o:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?Bi.apply(i,_):function(e,t,r,i){var o=1&t,a=ji(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=n(u+l),d=this&&this!==mt&&this instanceof t?a:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return Ct(d,o?r:this,h)}}(e,t,r,a);else var S=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Oo((w?ei:ko)(S,_),e,t)}function Qi(e,t,n,r){return e===i||Ba(e,Le[n])&&!Ie.call(r,n)?t:e}function Zi(e,t,n,r,o,a){return es(e)&&es(t)&&(a.set(t,e),Gr(e,t,i,Zi,a),a.delete(t)),e}function eo(e){return is(e)?i:e}function to(e,t,n,r,o,a){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var d=-1,p=!0,f=2&n?new Xn:i;for(a.set(e,t),a.set(t,e);++d<l;){var m=e[d],g=t[d];if(r)var v=s?r(g,m,d,t,e,a):r(m,g,d,e,t,a);if(v!==i){if(v)continue;p=!1;break}if(f){if(!zt(t,(function(e,t){if(!tn(f,t)&&(m===e||o(m,e,n,r,a)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function no(e){return Lo(Co(e,i,Wo),e+"")}function ro(e){return Mr(e,Ps,po)}function io(e){return Mr(e,Ls,fo)}var oo=kn?function(e){return kn.get(e)}:ll;function ao(e){for(var t=e.name+"",n=Pn[t],r=Ie.call(Pn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function so(e){return(Ie.call(Bn,"placeholder")?Bn:e).placeholder}function lo(){var e=Bn.iteratee||il;return e=e===il?Ir:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function uo(e){for(var t=Ps(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,To(i)]}return t}function ho(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var po=gt?function(e){return null==e?[]:(e=Ee(e),Lt(gt(e),(function(t){return Xe.call(e,t)})))}:ml,fo=gt?function(e){for(var t=[];e;)Dt(t,po(e)),e=$e(e);return t}:ml,mo=Tr;function go(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,o=!1;++r<i;){var a=jo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Za(i)&&yo(a,i)&&(Ha(e)||Va(e))}function vo(e){return"function"!=typeof e.constructor||Mo(e)?{}:Un($e(e))}function bo(e){return Ha(e)||Va(e)||!!(Ke&&e&&e[Ke])}function yo(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&xe.test(e))&&e>-1&&e%1==0&&e<t}function xo(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?$a(n)&&yo(t,n.length):"string"==r&&t in n)&&Ba(n[t],e)}function wo(e,t){if(Ha(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function _o(e){var t=ao(e),n=Bn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=oo(n);return!!r&&e===r[0]}(Mn&&mo(new Mn(new ArrayBuffer(1)))!=I||Tn&&mo(new Tn)!=T||En&&mo(En.resolve())!=A||Cn&&mo(new Cn)!=k||An&&mo(new An)!=O)&&(mo=function(e){var t=Tr(e),n=t==C?e.constructor:i,r=n?Fo(n):"";if(r)switch(r){case Ln:return I;case On:return T;case Nn:return A;case In:return k;case Dn:return O}return t});var So=Oe?Ja:gl;function Mo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function To(e){return e===e&&!es(e)}function Eo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ee(n)))}}function Co(e,t,r){return t=Xt(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=Xt(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=i[o];return l[t]=r(s),Ct(e,this,l)}}function Ao(e,t){return t.length<2?e:Sr(e,ri(t,0,-1))}function Ro(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var ko=No(ei),Po=ut||function(e,t){return mt.setTimeout(e,t)},Lo=No(ti);function Oo(e,t,n){var r=t+"";return Lo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Rt(v,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function No(e){var t=0,n=0;return function(){var r=xn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Io(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Xr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Do=function(e){var t=Na(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fo(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function zo(e){if(e instanceof Hn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Ri(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Kr((function(e,t){return qa(e)?hr(e,vr(t,1,qa,!0)):[]})),Uo=Kr((function(e,t){var n=Ko(t);return qa(n)&&(n=i),qa(e)?hr(e,vr(t,1,qa,!0),lo(n,2)):[]})),Go=Kr((function(e,t){var n=Ko(t);return qa(n)&&(n=i),qa(e)?hr(e,vr(t,1,qa,!0),i,n):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Xt(r+i,0)),Gt(e,lo(t,3),i)}function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=fs(n),o=n<0?Xt(r+o,0):yn(o,r-1)),Gt(e,lo(t,3),o,!0)}function Wo(e){return(null==e?0:e.length)?vr(e,1):[]}function $o(e){return e&&e.length?e[0]:i}var qo=Kr((function(e){var t=It(e,vi);return t.length&&t[0]===e[0]?Rr(t):[]})),Xo=Kr((function(e){var t=Ko(e),n=It(e,vi);return t===Ko(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Rr(n,lo(t,2)):[]})),Yo=Kr((function(e){var t=Ko(e),n=It(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Rr(n,i,t):[]}));function Ko(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Jo=Kr(Qo);function Qo(e,t){return e&&e.length&&t&&t.length?$r(e,t):e}var Zo=no((function(e,t){var n=null==e?0:e.length,r=ar(e,t);return qr(e,It(t,(function(e){return yo(e,n)?+e:e})).sort(Ei)),r}));function ea(e){return null==e?e:Sn.call(e)}var ta=Kr((function(e){return ui(vr(e,1,qa,!0))})),na=Kr((function(e){var t=Ko(e);return qa(t)&&(t=i),ui(vr(e,1,qa,!0),lo(t,2))})),ra=Kr((function(e){var t=Ko(e);return t="function"==typeof t?t:i,ui(vr(e,1,qa,!0),i,t)}));function ia(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(qa(e))return t=Xt(e.length,t),!0})),Jt(t,(function(t){return It(e,qt(t))}))}function oa(e,t){if(!e||!e.length)return[];var n=ia(e);return null==t?n:It(n,(function(e){return Ct(t,i,e)}))}var aa=Kr((function(e,t){return qa(e)?hr(e,t):[]})),sa=Kr((function(e){return mi(Lt(e,qa))})),la=Kr((function(e){var t=Ko(e);return qa(t)&&(t=i),mi(Lt(e,qa),lo(t,2))})),ca=Kr((function(e){var t=Ko(e);return t="function"==typeof t?t:i,mi(Lt(e,qa),i,t)})),ua=Kr(ia);var ha=Kr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oa(e,n)}));function da(e){var t=Bn(e);return t.__chain__=!0,t}function pa(e,t){return t(e)}var fa=no((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&yo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ma=Pi((function(e,t,n){Ie.call(e,n)?++e[n]:or(e,n,1)}));var ga=Fi(Vo),va=Fi(Ho);function ba(e,t){return(Ha(e)?Rt:dr)(e,lo(t,3))}function ya(e,t){return(Ha(e)?kt:pr)(e,lo(t,3))}var xa=Pi((function(e,t,n){Ie.call(e,n)?e[n].push(t):or(e,n,[t])}));var wa=Kr((function(e,t,r){var i=-1,o="function"==typeof t,a=$a(e)?n(e.length):[];return dr(e,(function(e){a[++i]=o?Ct(t,e,r):kr(e,t,r)})),a})),_a=Pi((function(e,t,n){or(e,n,t)}));function Sa(e,t){return(Ha(e)?It:zr)(e,lo(t,3))}var Ma=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ta=Kr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&xo(e,t[0],t[1])?t=[]:n>2&&xo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,vr(t,1),[])})),Ea=it||function(){return mt.Date.now()};function Ca(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Re(o);return e=fs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Ra=Kr((function(e,t,n){var r=1;if(n.length){var i=hn(n,so(Ra));r|=c}return Ji(e,r,t,n,i)})),ka=Kr((function(e,t,n){var r=3;if(n.length){var i=hn(n,so(ka));r|=c}return Ji(t,r,e,n,i)}));function Pa(e,t,n){var r,a,s,l,c,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof e)throw new Re(o);function m(t){var n=r,o=a;return r=a=i,h=t,l=e.apply(o,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-h>=s}function v(){var e=Ea();if(g(e))return b(e);c=Po(v,function(e){var n=t-(e-u);return p?yn(n,s-(e-h)):n}(e))}function b(e){return c=i,f&&r?m(e):(r=a=i,l)}function y(){var e=Ea(),n=g(e);if(r=arguments,a=this,u=e,n){if(c===i)return function(e){return h=e,c=Po(v,t),d?m(e):l}(u);if(p)return _i(c),c=Po(v,t),m(u)}return c===i&&(c=Po(v,t)),l}return t=gs(t)||0,es(n)&&(d=!!n.leading,s=(p="maxWait"in n)?Xt(gs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),y.cancel=function(){c!==i&&_i(c),h=0,r=u=a=c=i},y.flush=function(){return c===i?l:b(Ea())},y}var La=Kr((function(e,t){return ur(e,1,t)})),Oa=Kr((function(e,t,n){return ur(e,gs(t)||0,n)}));function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Re(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Na.Cache||qn),n}function Ia(e){if("function"!=typeof e)throw new Re(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=qn;var Da=xi((function(e,t){var n=(t=1==t.length&&Ha(t[0])?It(t[0],Zt(lo())):It(vr(t,1),Zt(lo()))).length;return Kr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ct(e,this,r)}))})),ja=Kr((function(e,t){var n=hn(t,so(ja));return Ji(e,c,i,t,n)})),Fa=Kr((function(e,t){var n=hn(t,so(Fa));return Ji(e,u,i,t,n)})),za=no((function(e,t){return Ji(e,d,i,i,i,t)}));function Ba(e,t){return e===t||e!==e&&t!==t}var Ua=$i(Er),Ga=$i((function(e,t){return e>=t})),Va=Pr(function(){return arguments}())?Pr:function(e){return ts(e)&&Ie.call(e,"callee")&&!Xe.call(e,"callee")},Ha=n.isArray,Wa=wt?Zt(wt):function(e){return ts(e)&&Tr(e)==N};function $a(e){return null!=e&&Za(e.length)&&!Ja(e)}function qa(e){return ts(e)&&$a(e)}var Xa=vt||gl,Ya=_t?Zt(_t):function(e){return ts(e)&&Tr(e)==w};function Ka(e){if(!ts(e))return!1;var t=Tr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Ja(e){if(!es(e))return!1;var t=Tr(e);return t==S||t==M||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==fs(e)}function Za(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var ns=St?Zt(St):function(e){return ts(e)&&mo(e)==T};function rs(e){return"number"==typeof e||ts(e)&&Tr(e)==E}function is(e){if(!ts(e)||Tr(e)!=C)return!1;var t=$e(e);if(null===t)return!0;var n=Ie.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==ze}var os=Mt?Zt(Mt):function(e){return ts(e)&&Tr(e)==R};var as=Tt?Zt(Tt):function(e){return ts(e)&&mo(e)==k};function ss(e){return"string"==typeof e||!Ha(e)&&ts(e)&&Tr(e)==P}function ls(e){return"symbol"==typeof e||ts(e)&&Tr(e)==L}var cs=Et?Zt(Et):function(e){return ts(e)&&Za(e.length)&&!!lt[Tr(e)]};var us=$i(Fr),hs=$i((function(e,t){return e<=t}));function ds(e){if(!e)return[];if($a(e))return ss(e)?mn(e):Ri(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=mo(e);return(t==T?cn:t==k?dn:Bs)(e)}function ps(e){return e?(e=gs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fs(e){var t=ps(e),n=t%1;return t===t?n?t-n:t:0}function ms(e){return e?sr(fs(e),0,g):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return m;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ve.test(e);return n||ye.test(e)?dt(e.slice(2),n?2:8):ge.test(e)?m:+e}function vs(e){return ki(e,Ls(e))}function bs(e){return null==e?"":ci(e)}var ys=Li((function(e,t){if(Mo(t)||$a(t))ki(t,Ps(t),e);else for(var n in t)Ie.call(t,n)&&tr(e,n,t[n])})),xs=Li((function(e,t){ki(t,Ls(t),e)})),ws=Li((function(e,t,n,r){ki(t,Ls(t),e,r)})),_s=Li((function(e,t,n,r){ki(t,Ps(t),e,r)})),Ss=no(ar);var Ms=Kr((function(e,t){e=Ee(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&xo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Ls(a),l=-1,c=s.length;++l<c;){var u=s[l],h=e[u];(h===i||Ba(h,Le[u])&&!Ie.call(e,u))&&(e[u]=a[u])}return e})),Ts=Kr((function(e){return e.push(i,Zi),Ct(Ns,i,e)}));function Es(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Cs(e,t){return null!=e&&go(e,t,Ar)}var As=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),el(rl)),Rs=Ui((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Ie.call(e,t)?e[t].push(n):e[t]=[n]}),lo),ks=Kr(kr);function Ps(e){return $a(e)?Kn(e):Dr(e)}function Ls(e){return $a(e)?Kn(e,!0):jr(e)}var Os=Li((function(e,t,n){Gr(e,t,n)})),Ns=Li((function(e,t,n,r){Gr(e,t,n,r)})),Is=no((function(e,t){var n={};if(null==e)return n;var r=!1;t=It(t,(function(t){return t=yi(t,e),r||(r=t.length>1),t})),ki(e,io(e),n),r&&(n=lr(n,7,eo));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ds=no((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Cs(e,n)}))}(e,t)}));function js(e,t){if(null==e)return{};var n=It(io(e),(function(e){return[e]}));return t=lo(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Fs=Ki(Ps),zs=Ki(Ls);function Bs(e){return null==e?[]:en(e,Ps(e))}var Us=Di((function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)}));function Gs(e){return Ks(bs(e).toLowerCase())}function Vs(e){return(e=bs(e))&&e.replace(we,on).replace(tt,"")}var Hs=Di((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ws=Di((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),$s=Ii("toLowerCase");var qs=Di((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Di((function(e,t,n){return e+(n?" ":"")+Ks(t)}));var Ys=Di((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ks=Ii("toUpperCase");function Js(e,t,n){return e=bs(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Qs=Kr((function(e,t){try{return Ct(e,i,t)}catch(n){return Ka(n)?n:new se(n)}})),Zs=no((function(e,t){return Rt(t,(function(t){t=jo(t),or(e,t,Ra(e[t],e))})),e}));function el(e){return function(){return e}}var tl=zi(),nl=zi(!0);function rl(e){return e}function il(e){return Ir("function"==typeof e?e:lr(e,1))}var ol=Kr((function(e,t){return function(n){return kr(n,e,t)}})),al=Kr((function(e,t){return function(n){return kr(e,n,t)}}));function sl(e,t,n){var r=Ps(t),i=_r(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=_r(t,Ps(t)));var o=!(es(n)&&"chain"in n)||!!n.chain,a=Ja(e);return Rt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ri(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function ll(){}var cl=Vi(It),ul=Vi(Pt),hl=Vi(zt);function dl(e){return wo(e)?qt(jo(e)):function(e){return function(t){return Sr(t,e)}}(e)}var pl=Wi(),fl=Wi(!0);function ml(){return[]}function gl(){return!1}var vl=Gi((function(e,t){return e+t}),0),bl=Xi("ceil"),yl=Gi((function(e,t){return e/t}),1),xl=Xi("floor");var wl=Gi((function(e,t){return e*t}),1),_l=Xi("round"),Sl=Gi((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Re(o);return e=fs(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=Ca,Bn.assign=ys,Bn.assignIn=xs,Bn.assignInWith=ws,Bn.assignWith=_s,Bn.at=Ss,Bn.before=Aa,Bn.bind=Ra,Bn.bindAll=Zs,Bn.bindKey=ka,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ha(e)?e:[e]},Bn.chain=da,Bn.chunk=function(e,t,r){t=(r?xo(e,t,r):t===i)?1:Xt(fs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,l=n(pt(o/t));a<o;)l[s++]=ri(e,a,a+=t);return l},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dt(Ha(r)?Ri(r):[r],vr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=lo();return e=t?It(e,(function(e){if("function"!=typeof e[1])throw new Re(o);return[n(e[0]),e[1]]})):[],Kr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ct(i[0],this,n))return Ct(i[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Ps(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Bn.constant=el,Bn.countBy=ma,Bn.create=function(e,t){var n=Un(e);return null==t?n:ir(n,t)},Bn.curry=function e(t,n,r){var o=Ji(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.curryRight=function e(t,n,r){var o=Ji(t,l,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.debounce=Pa,Bn.defaults=Ms,Bn.defaultsDeep=Ts,Bn.defer=La,Bn.delay=Oa,Bn.difference=Bo,Bn.differenceBy=Uo,Bn.differenceWith=Go,Bn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:fs(t))<0?0:t,r):[]},Bn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:fs(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!0):[]},Bn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&xo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=fs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:fs(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Bn.filter=function(e,t){return(Ha(e)?Lt:gr)(e,lo(t,3))},Bn.flatMap=function(e,t){return vr(Sa(e,t),1)},Bn.flatMapDeep=function(e,t){return vr(Sa(e,t),p)},Bn.flatMapDepth=function(e,t,n){return n=n===i?1:fs(n),vr(Sa(e,t),n)},Bn.flatten=Wo,Bn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,p):[]},Bn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:fs(t)):[]},Bn.flip=function(e){return Ji(e,512)},Bn.flow=tl,Bn.flowRight=nl,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Bn.functions=function(e){return null==e?[]:_r(e,Ps(e))},Bn.functionsIn=function(e){return null==e?[]:_r(e,Ls(e))},Bn.groupBy=xa,Bn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},Bn.intersection=qo,Bn.intersectionBy=Xo,Bn.intersectionWith=Yo,Bn.invert=As,Bn.invertBy=Rs,Bn.invokeMap=wa,Bn.iteratee=il,Bn.keyBy=_a,Bn.keys=Ps,Bn.keysIn=Ls,Bn.map=Sa,Bn.mapKeys=function(e,t){var n={};return t=lo(t,3),xr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Bn.mapValues=function(e,t){var n={};return t=lo(t,3),xr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Bn.matches=function(e){return Br(lr(e,1))},Bn.matchesProperty=function(e,t){return Ur(e,lr(t,1))},Bn.memoize=Na,Bn.merge=Os,Bn.mergeWith=Ns,Bn.method=ol,Bn.methodOf=al,Bn.mixin=sl,Bn.negate=Ia,Bn.nthArg=function(e){return e=fs(e),Kr((function(t){return Vr(t,e)}))},Bn.omit=Is,Bn.omitBy=function(e,t){return js(e,Ia(lo(t)))},Bn.once=function(e){return Aa(2,e)},Bn.orderBy=function(e,t,n,r){return null==e?[]:(Ha(t)||(t=null==t?[]:[t]),Ha(n=r?i:n)||(n=null==n?[]:[n]),Hr(e,t,n))},Bn.over=cl,Bn.overArgs=Da,Bn.overEvery=ul,Bn.overSome=hl,Bn.partial=ja,Bn.partialRight=Fa,Bn.partition=Ma,Bn.pick=Ds,Bn.pickBy=js,Bn.property=dl,Bn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},Bn.pull=Jo,Bn.pullAll=Qo,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,lo(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,i,n):e},Bn.pullAt=Zo,Bn.range=pl,Bn.rangeRight=fl,Bn.rearg=za,Bn.reject=function(e,t){return(Ha(e)?Lt:gr)(e,Ia(lo(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Re(o);return Kr(e,t=t===i?t:fs(t))},Bn.reverse=ea,Bn.sampleSize=function(e,t,n){return t=(n?xo(e,t,n):t===i)?1:fs(t),(Ha(e)?Qn:Qr)(e,t)},Bn.set=function(e,t,n){return null==e?e:Zr(e,t,n)},Bn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Zr(e,t,n,r)},Bn.shuffle=function(e){return(Ha(e)?Zn:ni)(e)},Bn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&xo(e,t,n)?(t=0,n=r):(t=null==t?0:fs(t),n=n===i?r:fs(n)),ri(e,t,n)):[]},Bn.sortBy=Ta,Bn.sortedUniq=function(e){return e&&e.length?si(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?si(e,lo(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&xo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ci(t))&&ln(e)?wi(mn(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Re(o);return t=null==t?0:Xt(fs(t),0),Kr((function(n){var r=n[t],i=wi(n,0,t);return r&&Dt(i,r),Ct(e,this,i)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:fs(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:fs(t)))<0?0:t,r):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?pi(e,lo(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?pi(e,lo(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Re(o);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pa(e,t,{leading:r,maxWait:t,trailing:i})},Bn.thru=pa,Bn.toArray=ds,Bn.toPairs=Fs,Bn.toPairsIn=zs,Bn.toPath=function(e){return Ha(e)?It(e,jo):ls(e)?[e]:Ri(Do(bs(e)))},Bn.toPlainObject=vs,Bn.transform=function(e,t,n){var r=Ha(e),i=r||Xa(e)||cs(e);if(t=lo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:es(e)&&Ja(o)?Un($e(e)):{}}return(i?Rt:xr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Bn.unary=function(e){return Ca(e,1)},Bn.union=ta,Bn.unionBy=na,Bn.unionWith=ra,Bn.uniq=function(e){return e&&e.length?ui(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?ui(e,lo(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},Bn.unset=function(e,t){return null==e||hi(e,t)},Bn.unzip=ia,Bn.unzipWith=oa,Bn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},Bn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},Bn.values=Bs,Bn.valuesIn=function(e){return null==e?[]:en(e,Ls(e))},Bn.without=aa,Bn.words=Js,Bn.wrap=function(e,t){return ja(bi(t),e)},Bn.xor=sa,Bn.xorBy=la,Bn.xorWith=ca,Bn.zip=ua,Bn.zipObject=function(e,t){return gi(e||[],t||[],tr)},Bn.zipObjectDeep=function(e,t){return gi(e||[],t||[],Zr)},Bn.zipWith=ha,Bn.entries=Fs,Bn.entriesIn=zs,Bn.extend=xs,Bn.extendWith=ws,sl(Bn,Bn),Bn.add=vl,Bn.attempt=Qs,Bn.camelCase=Us,Bn.capitalize=Gs,Bn.ceil=bl,Bn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))===n?n:0),t!==i&&(t=(t=gs(t))===t?t:0),sr(gs(e),t,n)},Bn.clone=function(e){return lr(e,4)},Bn.cloneDeep=function(e){return lr(e,5)},Bn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Bn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Bn.conformsTo=function(e,t){return null==t||cr(e,t,Ps(t))},Bn.deburr=Vs,Bn.defaultTo=function(e,t){return null==e||e!==e?t:e},Bn.divide=yl,Bn.endsWith=function(e,t,n){e=bs(e),t=ci(t);var r=e.length,o=n=n===i?r:sr(fs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Bn.eq=Ba,Bn.escape=function(e){return(e=bs(e))&&J.test(e)?e.replace(Y,an):e},Bn.escapeRegExp=function(e){return(e=bs(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Bn.every=function(e,t,n){var r=Ha(e)?Pt:fr;return n&&xo(e,t,n)&&(t=i),r(e,lo(t,3))},Bn.find=ga,Bn.findIndex=Vo,Bn.findKey=function(e,t){return Ut(e,lo(t,3),xr)},Bn.findLast=va,Bn.findLastIndex=Ho,Bn.findLastKey=function(e,t){return Ut(e,lo(t,3),wr)},Bn.floor=xl,Bn.forEach=ba,Bn.forEachRight=ya,Bn.forIn=function(e,t){return null==e?e:br(e,lo(t,3),Ls)},Bn.forInRight=function(e,t){return null==e?e:yr(e,lo(t,3),Ls)},Bn.forOwn=function(e,t){return e&&xr(e,lo(t,3))},Bn.forOwnRight=function(e,t){return e&&wr(e,lo(t,3))},Bn.get=Es,Bn.gt=Ua,Bn.gte=Ga,Bn.has=function(e,t){return null!=e&&go(e,t,Cr)},Bn.hasIn=Cs,Bn.head=$o,Bn.identity=rl,Bn.includes=function(e,t,n,r){e=$a(e)?e:Bs(e),n=n&&!r?fs(n):0;var i=e.length;return n<0&&(n=Xt(i+n,0)),ss(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=Xt(r+i,0)),Vt(e,t,i)},Bn.inRange=function(e,t,n){return t=ps(t),n===i?(n=t,t=0):n=ps(n),function(e,t,n){return e>=yn(t,n)&&e<Xt(t,n)}(e=gs(e),t,n)},Bn.invoke=ks,Bn.isArguments=Va,Bn.isArray=Ha,Bn.isArrayBuffer=Wa,Bn.isArrayLike=$a,Bn.isArrayLikeObject=qa,Bn.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Tr(e)==x},Bn.isBuffer=Xa,Bn.isDate=Ya,Bn.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Bn.isEmpty=function(e){if(null==e)return!0;if($a(e)&&(Ha(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||cs(e)||Va(e)))return!e.length;var t=mo(e);if(t==T||t==k)return!e.size;if(Mo(e))return!Dr(e).length;for(var n in e)if(Ie.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Lr(e,t)},Bn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Lr(e,t,i,n):!!r},Bn.isError=Ka,Bn.isFinite=function(e){return"number"==typeof e&&yt(e)},Bn.isFunction=Ja,Bn.isInteger=Qa,Bn.isLength=Za,Bn.isMap=ns,Bn.isMatch=function(e,t){return e===t||Or(e,t,uo(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Or(e,t,uo(t),n)},Bn.isNaN=function(e){return rs(e)&&e!=+e},Bn.isNative=function(e){if(So(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=rs,Bn.isObject=es,Bn.isObjectLike=ts,Bn.isPlainObject=is,Bn.isRegExp=os,Bn.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=f},Bn.isSet=as,Bn.isString=ss,Bn.isSymbol=ls,Bn.isTypedArray=cs,Bn.isUndefined=function(e){return e===i},Bn.isWeakMap=function(e){return ts(e)&&mo(e)==O},Bn.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Tr(e)},Bn.join=function(e,t){return null==e?"":xt.call(e,t)},Bn.kebabCase=Hs,Bn.last=Ko,Bn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=fs(n))<0?Xt(r+o,0):yn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Gt(e,Wt,o,!0)},Bn.lowerCase=Ws,Bn.lowerFirst=$s,Bn.lt=us,Bn.lte=hs,Bn.max=function(e){return e&&e.length?mr(e,rl,Er):i},Bn.maxBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Er):i},Bn.mean=function(e){return $t(e,rl)},Bn.meanBy=function(e,t){return $t(e,lo(t,2))},Bn.min=function(e){return e&&e.length?mr(e,rl,Fr):i},Bn.minBy=function(e,t){return e&&e.length?mr(e,lo(t,2),Fr):i},Bn.stubArray=ml,Bn.stubFalse=gl,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=wl,Bn.nth=function(e,t){return e&&e.length?Vr(e,fs(t)):i},Bn.noConflict=function(){return mt._===this&&(mt._=Be),this},Bn.noop=ll,Bn.now=Ea,Bn.pad=function(e,t,n){e=bs(e);var r=(t=fs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(ft(i),n)+e+Hi(pt(i),n)},Bn.padEnd=function(e,t,n){e=bs(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?e+Hi(t-r,n):e},Bn.padStart=function(e,t,n){e=bs(e);var r=(t=fs(t))?fn(e):0;return t&&r<t?Hi(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(bs(e).replace(ae,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&xo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ps(e),t===i?(t=e,e=0):t=ps(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=_n();return yn(e+o*(t-e+ht("1e-"+((o+"").length-1))),t)}return Xr(e,t)},Bn.reduce=function(e,t,n){var r=Ha(e)?jt:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,dr)},Bn.reduceRight=function(e,t,n){var r=Ha(e)?Ft:Yt,i=arguments.length<3;return r(e,lo(t,4),n,i,pr)},Bn.repeat=function(e,t,n){return t=(n?xo(e,t,n):t===i)?1:fs(t),Yr(bs(e),t)},Bn.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var r=-1,o=(t=yi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[jo(t[r])];a===i&&(r=o,a=n),e=Ja(a)?a.call(e):a}return e},Bn.round=_l,Bn.runInContext=e,Bn.sample=function(e){return(Ha(e)?Jn:Jr)(e)},Bn.size=function(e){if(null==e)return 0;if($a(e))return ss(e)?fn(e):e.length;var t=mo(e);return t==T||t==k?e.size:Dr(e).length},Bn.snakeCase=qs,Bn.some=function(e,t,n){var r=Ha(e)?zt:ii;return n&&xo(e,t,n)&&(t=i),r(e,lo(t,3))},Bn.sortedIndex=function(e,t){return oi(e,t)},Bn.sortedIndexBy=function(e,t,n){return ai(e,t,lo(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Ba(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return ai(e,t,lo(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Ba(e[n],t))return n}return-1},Bn.startCase=Xs,Bn.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:sr(fs(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Bn.subtract=Sl,Bn.sum=function(e){return e&&e.length?Kt(e,rl):0},Bn.sumBy=function(e,t){return e&&e.length?Kt(e,lo(t,2)):0},Bn.template=function(e,t,n){var r=Bn.templateSettings;n&&xo(e,t,n)&&(t=i),e=bs(e),t=ws({},t,r,Qi);var o,a,s=ws({},t.imports,r.imports,Qi),l=Ps(s),c=en(s,l),u=0,h=t.interpolate||_e,d="__p += '",p=Ce((t.escape||_e).source+"|"+h.source+"|"+(h===ee?fe:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),f="//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,l){return r||(r=i),d+=e.slice(u,l).replace(Se,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=Ie.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(W,""):d).replace($,"$1").replace(q,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Qs((function(){return Me(l,f+"return "+d).apply(i,c)}));if(g.source=d,Ka(g))throw g;return g},Bn.times=function(e,t){if((e=fs(e))<1||e>f)return[];var n=g,r=yn(e,g);t=lo(t),e-=g;for(var i=Jt(r,t);++n<e;)t(n);return i},Bn.toFinite=ps,Bn.toInteger=fs,Bn.toLength=ms,Bn.toLower=function(e){return bs(e).toLowerCase()},Bn.toNumber=gs,Bn.toSafeInteger=function(e){return e?sr(fs(e),-9007199254740991,f):0===e?e:0},Bn.toString=bs,Bn.toUpper=function(e){return bs(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=bs(e))&&(n||t===i))return Qt(e);if(!e||!(t=ci(t)))return e;var r=mn(e),o=mn(t);return wi(r,nn(r,o),rn(r,o)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var r=mn(e);return wi(r,0,rn(r,mn(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ci(t)))return e;var r=mn(e);return wi(r,nn(r,mn(t))).join("")},Bn.truncate=function(e,t){var n=30,r="...";if(es(t)){var o="separator"in t?t.separator:o;n="length"in t?fs(t.length):n,r="omission"in t?ci(t.omission):r}var a=(e=bs(e)).length;if(ln(e)){var s=mn(e);a=s.length}if(n>=a)return e;var l=n-fn(r);if(l<1)return r;var c=s?wi(s,0,l).join(""):e.slice(0,l);if(o===i)return c+r;if(s&&(l+=c.length-l),os(o)){if(e.slice(l).search(o)){var u,h=c;for(o.global||(o=Ce(o.source,bs(me.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(ci(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},Bn.unescape=function(e){return(e=bs(e))&&K.test(e)?e.replace(X,vn):e},Bn.uniqueId=function(e){var t=++De;return bs(e)+t},Bn.upperCase=Ys,Bn.upperFirst=Ks,Bn.each=ba,Bn.eachRight=ya,Bn.first=$o,sl(Bn,function(){var e={};return xr(Bn,(function(t,n){Ie.call(Bn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Bn.VERSION="4.17.21",Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),Rt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===i?1:Xt(fs(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Rt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:lo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Rt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Rt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(rl)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Kr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return kr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Ia(lo(e)))},Hn.prototype.slice=function(e,t){e=fs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=fs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(g)},xr(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Bn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Bn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Hn,c=s[0],u=l||Ha(t),h=function(e){var t=o.apply(Bn,Dt([e],s));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=a&&!d,m=l&&!p;if(!a&&u){t=m?t:new Hn(this);var g=e.apply(t,s);return g.__actions__.push({func:pa,args:[h],thisArg:i}),new Vn(g,d)}return f&&m?e.apply(this,s):(g=this.thru(h),f?r?g.value()[0]:g.value():g)})})),Rt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ke[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ha(i)?i:[],e)}return this[n]((function(n){return t.apply(Ha(n)?n:[],e)}))}})),xr(Hn.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";Ie.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[Bi(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ri(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ri(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ri(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ha(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=Xt(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,h=u.length,d=0,p=yn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return fi(e,this.__actions__);var f=[];e:for(;l--&&d<p;){for(var m=-1,g=e[c+=t];++m<h;){var v=u[m],b=v.iteratee,y=v.type,x=b(g);if(2==y)g=x;else if(!x){if(1==y)continue e;break e}}f[d++]=g}return f},Bn.prototype.at=fa,Bn.prototype.chain=function(){return da(this)},Bn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof Gn;){var r=zo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:pa,args:[ea],thisArg:i}),new Vn(t,this.__chain__)}return this.thru(ea)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Je&&(Bn.prototype[Je]=function(){return this}),Bn}();mt._=bn,(r=function(){return bn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},801:(e,t,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},3783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});const r=Object.prototype.toString;function i(e){const t=r.call(e);return t.endsWith("Array]")&&!t.includes("Big")}const o=Object.prototype.toString;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){const t=o.call(e);return t.endsWith("Array]")&&!t.includes("Big")}(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,a=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[r],l=r+1;l<a;l++)e[l]>s&&(s=e[l]);return s}const s=Object.prototype.toString;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){const t=s.call(e);return t.endsWith("Array]")&&!t.includes("Big")}(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],l=r+1;l<o;l++)e[l]<a&&(a=e[l]);return a}function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!i(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=l(e),o=a(e);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=n.min,c=void 0===s?n.autoMinMax?r:0:s,u=n.max,h=void 0===u?n.autoMinMax?o:1:u;if(c>=h)throw new RangeError("min option must be smaller than max option");for(var d=(h-c)/(o-r),p=0;p<e.length;p++)t[p]=(e[p]-r)*d+c;return t}},1440:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});const r=Object.prototype.toString;function i(e){return r.call(e).endsWith("Array]")}function o(e,t,n){let r=0;const i=n(t);for(let o=0;o<e.x.length;o++)r+=Math.abs(e.y[o]-i(e.x[o]));return r}var a=n(6832);a.y3,a.jy,a.oN,a.Hc,a.cg,a.hj,a.LU,a.Tb;const s=a.uq,l=(a.Zm,a.Dq,a.__,a.q0,a.lh,a.pI,a.zC,a.zg,a.g6,a.OL,a.ks,a.QR,a.jp,a.mk,a.W2,a.l,a.KY,a.dv,a.BR,a.Wu,a.uq,a.uq,a.a4,a.DI);a.Jo,a.Zi,a.kH,a.LV;function c(e,t,n,r,i){let o=n*r*r,a=s.eye(t.length,t.length,o);const c=i(t);let u=new Float64Array(e.x.length);for(let s=0;s<e.x.length;s++)u[s]=c(e.x[s]);let h=function(e,t,n,r,i){const o=n.length,a=e.x.length;let l=new Array(o);for(let s=0;s<o;s++){l[s]=new Array(a);let o=n.slice();o[s]+=r;let c=i(o);for(let n=0;n<a;n++)l[s][n]=t[n]-c(e.x[n])}return new s(l)}(e,u,t,r,i),d=function(e,t){const n=e.x.length;let r=new Array(n);for(let i=0;i<n;i++)r[i]=[e.y[i]-t[i]];return new s(r)}(e,u),p=l(a.add(h.mmul(h.transpose())));return(t=(t=new s([t])).sub(p.mmul(h).mmul(d).mul(r).transpose())).to1DArray()}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{maxIterations:r=100,gradientDifference:a=.1,damping:s=0,errorTolerance:l=.01,minValues:u,maxValues:h,initialValues:d}=n;if(s<=0)throw new Error("The damping option must be a positive number");if(!e.x||!e.y)throw new Error("The data parameter must have x and y elements");if(!i(e.x)||e.x.length<2||!i(e.y)||e.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(e.x.length!==e.y.length)throw new Error("The data parameter elements must have the same size");let p=d||new Array(t.length).fill(1),f=p.length;if(h=h||new Array(f).fill(Number.MAX_SAFE_INTEGER),u=u||new Array(f).fill(Number.MIN_SAFE_INTEGER),h.length!==u.length)throw new Error("minValues and maxValues must be the same size");if(!i(p))throw new Error("initialValues must be an array");let m,g=o(e,p,t),v=g<=l;for(m=0;m<r&&!v;m++){p=c(e,p,s,a,t);for(let e=0;e<f;e++)p[e]=Math.min(Math.max(u[e],p[e]),h[e]);if(g=o(e,p,t),isNaN(g))break;v=g<=l}return{parameterValues:p,parameterError:g,iterations:m}}},6832:(e,t,n)=>{"use strict";var r=n(2459).default,i=n(7088).default,o=n(6668).default,a=n(3312).default,s=n(3693).default,l=n(1756).default;var c=n(8612),u=n(3783);const h=" ".repeat(2),d=" ".repeat(4);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=t;return"".concat(e.constructor.name," {\n").concat(h,"[\n").concat(d).concat(function(e,t,n,r,i){const{rows:o,columns:a}=e,s=Math.min(o,t),l=Math.min(a,n),c=[];if("auto"===i){i=!1;e:for(let t=0;t<s;t++)for(let n=0;n<l;n++)if(e.get(t,n)<0){i=!0;break e}}for(let u=0;u<s;u++){let t=[];for(let n=0;n<l;n++)t.push(f(e.get(u,n),r,i));c.push("".concat(t.join(" ")))}l!==a&&(c[c.length-1]+=" ... ".concat(a-n," more columns"));s!==o&&c.push("... ".concat(o-t," more rows"));return c.join("\n".concat(d))}(e,n,r,i,o),"\n").concat(h,"]\n").concat(h,"rows: ").concat(e.rows,"\n").concat(h,"columns: ").concat(e.columns,"\n}")}function f(e,t,n){return(e>=0&&n?" ".concat(m(e,t-1)):m(e,t)).padEnd(t)}function m(e,t){let n=e.toString();if(n.length<=t)return n;let r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function g(e,t,n){let r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function v(e,t,n){let r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function b(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function y(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function x(e,t){if(!c.isAnyArray(t))throw new TypeError("row indices must be an array");for(let n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function w(e,t){if(!c.isAnyArray(t))throw new TypeError("column indices must be an array");for(let n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function _(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(M("startRow",t),M("endRow",n),M("startColumn",r),M("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];for(let r=0;r<e;r++)n.push(t);return n}function M(e,t){if("number"!==typeof t)throw new TypeError("".concat(e," must be a number"))}function T(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}class E{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let r=new R(e,t);for(let i=0;i<e;i++)for(let e=0;e<t;e++)r.set(i,e,n[i*t+e]);return r}static rowVector(e){let t=new R(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new R(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new R(e,t)}static ones(e,t){return new R(e,t).fill(1)}static rand(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new R(e,t);for(let o=0;o<e;o++)for(let e=0;e<t;e++)i.set(o,e,r());return i}static randInt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new R(e,t);for(let l=0;l<e;l++)for(let e=0;e<t;e++){let t=r+Math.round(o()*a);s.set(l,e,t)}return s}static eye(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);let r=Math.min(e,t),i=this.zeros(e,t);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(e,t,n){let r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);let i=Math.min(r,t,n),o=this.zeros(t,n);for(let a=0;a<i;a++)o.set(a,a,e[a]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new R(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(e.get(o,n),t.get(o,n)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(e.get(o,n),t.get(o,n)));return i}static checkMatrix(e){return E.isMatrix(e)?e:new R(e)}static isMatrix(e){return null!=e&&"Matrix"===e.klass}get size(){return this.rows*this.columns}apply(e){if("function"!==typeof e)throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(0!==this.get(e,e))return!1;return!0}isEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(let n=t+1;n<this.rows;n++)0!==this.get(e,n)&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let r=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);let i=e.get(t,n);for(let r=n;r<e.columns;r++)e.set(t,r,e.get(t,r)/i);for(let r=t+1;r<e.rows;r++){let i=e.get(r,n)/e.get(t,n);e.set(r,n,0);for(let o=n+1;o<e.columns;o++)e.set(r,o,e.get(r,o)-e.get(t,o)*i)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;for(;r>=0;)if(0===e.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===e.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=e.get(n,i);for(let a=i;a<t;a++){let t=e.get(n,a)-o*e.get(r,a);e.set(n,a,t)}}r--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new R(this.rows*t,this.columns*n);for(let i=0;i<t;i++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*i,this.columns*e);return r}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){g(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return R.rowVector(this.getRow(e))}setRow(e,t){g(this,e),t=b(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){g(this,e),g(this,t);for(let n=0;n<this.columns;n++){let r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}getColumn(e){v(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return R.columnVector(this.getColumn(e))}setColumn(e,t){v(this,e),t=y(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){v(this,e),v(this,t);for(let n=0;n<this.rows;n++){let r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}addRowVector(e){e=b(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=b(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=b(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=b(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=y(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=y(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=y(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=y(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){g(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){v(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[t]&&(e[t]=this.get(t,n));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}default:throw new Error("invalid option: ".concat(e))}}maxIndex(){T(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[t]&&(e[t]=this.get(t,n));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}default:throw new Error("invalid option: ".concat(e))}}minIndex(){T(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}maxRow(e){if(g(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){g(this,e),T(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){if(g(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){g(this,e),T(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){if(v(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){v(this,e),T(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){if(v(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){v(this,e),T(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius";switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(e))}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){E.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}mmul(e){e=R.checkMatrix(e);let t=this.rows,n=this.columns,r=e.columns,i=new R(t,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let t=0;t<n;t++)o[t]=e.get(t,a);for(let e=0;e<t;e++){let t=0;for(let r=0;r<n;r++)t+=this.get(e,r)*o[r];i.set(e,a,t)}}return i}strassen2x2(e){e=R.checkMatrix(e);let t=new R(2,2);const n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),o=e.get(0,1),a=this.get(1,0),s=e.get(1,0),l=this.get(1,1),c=e.get(1,1),u=(n+l)*(r+c),h=(a+l)*r,d=n*(o-c),p=l*(s-r),f=(n+i)*c,m=u+p-f+(i-l)*(s+c),g=d+f,v=h+p,b=u-h+d+(a-n)*(r+o);return t.set(0,0,m),t.set(0,1,g),t.set(1,0,v),t.set(1,1,b),t}strassen3x3(e){e=R.checkMatrix(e);let t=new R(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),c=this.get(2,1),u=this.get(2,2),h=e.get(0,0),d=e.get(0,1),p=e.get(0,2),f=e.get(1,0),m=e.get(1,1),g=e.get(1,2),v=e.get(2,0),b=e.get(2,1),y=e.get(2,2),x=(n-o)*(-d+m),w=(-n+o+a)*(h-d+m),_=(o+a)*(-h+d),S=n*h,M=(-n+l+c)*(h-p+g),T=(-n+l)*(p-g),E=(l+c)*(-h+p),C=(-i+c+u)*(m+v-b),A=(i-u)*(m-b),k=i*v,P=(c+u)*(-v+b),L=(-i+a+s)*(g+v-y),O=(i-s)*(g-y),N=(a+s)*(-v+y),I=S+k+r*f,D=(n+r+i-o-a-c-u)*m+w+_+S+C+k+P,j=S+M+E+(n+r+i-a-s-l-c)*g+k+L+N,F=x+a*(-h+d+f-m-g-v+y)+w+S+k+L+O,z=x+w+_+S+s*b,B=k+L+O+N+o*p,U=S+M+T+c*(-h+p+f-m-g-v+b)+C+A+k,G=C+A+k+P+l*d,V=S+M+T+E+u*y;return t.set(0,0,I),t.set(0,1,D),t.set(0,2,j),t.set(1,0,F),t.set(1,1,z),t.set(1,2,B),t.set(2,0,U),t.set(2,1,G),t.set(2,2,V),t}mmulStrassen(e){e=R.checkMatrix(e);let t=this.clone(),n=t.rows,r=t.columns,i=e.rows,o=e.columns;function a(e,t,n){let r=e.rows,i=e.columns;if(r===t&&i===n)return e;{let r=E.zeros(t,n);return r=r.setSubMatrix(e,0,0),r}}r!==i&&console.warn("Multiplying ".concat(n," x ").concat(r," and ").concat(i," x ").concat(o," matrix: dimensions do not match."));let s=Math.max(n,i),l=Math.max(r,o);return t=a(t,s,l),function e(t,n,r,i){if(r<=512||i<=512)return t.mmul(n);r%2===1&&i%2===1?(t=a(t,r+1,i+1),n=a(n,r+1,i+1)):r%2===1?(t=a(t,r+1,i),n=a(n,r+1,i)):i%2===1&&(t=a(t,r,i+1),n=a(n,r,i+1));let o=parseInt(t.rows/2,10),s=parseInt(t.columns/2,10),l=t.subMatrix(0,o-1,0,s-1),c=n.subMatrix(0,o-1,0,s-1),u=t.subMatrix(0,o-1,s,t.columns-1),h=n.subMatrix(0,o-1,s,n.columns-1),d=t.subMatrix(o,t.rows-1,0,s-1),p=n.subMatrix(o,n.rows-1,0,s-1),f=t.subMatrix(o,t.rows-1,s,t.columns-1),m=n.subMatrix(o,n.rows-1,s,n.columns-1),g=e(E.add(l,f),E.add(c,m),o,s),v=e(E.add(d,f),c,o,s),b=e(l,E.sub(h,m),o,s),y=e(f,E.sub(p,c),o,s),x=e(E.add(l,u),m,o,s),w=e(E.sub(d,l),E.add(c,h),o,s),_=e(E.sub(u,f),E.add(p,m),o,s),S=E.add(g,y);S.sub(x),S.add(_);let M=E.add(b,x),T=E.add(v,y),C=E.sub(g,v);C.add(b),C.add(w);let A=E.zeros(2*S.rows,2*S.columns);return A=A.setSubMatrix(S,0,0),A=A.setSubMatrix(M,S.rows,0),A=A.setSubMatrix(T,0,S.columns),A=A.setSubMatrix(C,S.rows,S.columns),A.subMatrix(0,r-1,0,i-1)}(t,e=a(e,s,l),s,l)}scaleRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new R(this.rows,this.columns);for(let i=0;i<this.rows;i++){const e=this.getRow(i);e.length>0&&u(e,{min:t,max:n,output:e}),r.setRow(i,e)}return r}scaleColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new R(this.rows,this.columns);for(let i=0;i<this.columns;i++){const e=this.getColumn(i);e.length&&u(e,{min:t,max:n,output:e}),r.setColumn(i,e)}return r}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let e=this.get(t,n),r=this.get(t,this.columns-1-n);this.set(t,n,r),this.set(t,this.columns-1-n,e)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let e=this.get(n,t),r=this.get(this.rows-1-n,t);this.set(n,t,r),this.set(this.rows-1-n,t,e)}return this}kroneckerProduct(e){e=R.checkMatrix(e);let t=this.rows,n=this.columns,r=e.rows,i=e.columns,o=new R(t*r,n*i);for(let a=0;a<t;a++)for(let t=0;t<n;t++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*t+s,this.get(a,t)*e.get(n,s));return o}kroneckerSum(e){if(e=R.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,r=this.kroneckerProduct(R.eye(n,n)),i=R.eye(t,t).kroneckerProduct(e);return r.add(i)}transpose(){let e=new R(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){_(this,e,t,n,r);let i=new R(t-e+1,r-n+1);for(let o=e;o<=t;o++)for(let t=n;t<=r;t++)i.set(o-e,t-n,this.get(o,t));return i}subMatrixRow(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new R(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[i]));r.set(i,o-t,this.get(e[i],o))}return r}subMatrixColumn(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new R(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[i]));r.set(o-t,i,this.get(o,e[i]))}return r}setSubMatrix(e,t,n){if((e=R.checkMatrix(e)).isEmpty())return this;_(this,t,t+e.rows-1,n,n+e.columns-1);for(let r=0;r<e.rows;r++)for(let i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}selection(e,t){x(this,e),w(this,t);let n=new R(e.length,t.length);for(let r=0;r<e.length;r++){let i=e[r];for(let e=0;e<t.length;e++){let o=t[e];n.set(r,e,this.get(i,o))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){return this.constructor.copy(this,new R(this.rows,this.columns))}static copy(e,t){for(const[n,r,i]of e.entries())t.set(n,r,i);return t}sum(e){switch(e){case"row":return function(e){let t=S(e.rows);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}(this);case"column":return function(e){let t=S(e.columns);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}(this);case void 0:return function(e){let t=0;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t+=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}product(e){switch(e){case"row":return function(e){let t=S(e.rows,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}(this);case"column":return function(e){let t=S(e.columns,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}(this);case void 0:return function(e){let t=1;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t*=e.get(n,r);return t}(this);default:throw new Error("invalid option: ".concat(e))}}mean(e){const t=this.sum(e);switch(e){case"row":for(let e=0;e<this.rows;e++)t[e]/=this.columns;return t;case"column":for(let e=0;e<this.columns;e++)t[e]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}variance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(e)}=t;if("boolean"!==typeof n)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!c.isAnyArray(r))throw new TypeError("mean must be an array");return function(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let t=0;t<i;t++)l=e.get(a,t)-n[a],r+=l,s+=l*l;t?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!c.isAnyArray(r))throw new TypeError("mean must be an array");return function(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let t=0;t<r;t++)l=e.get(t,a)-n[a],i+=l,s+=l*l;t?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!==typeof r)throw new TypeError("mean must be a number");return function(e,t,n){const r=e.rows,i=e.columns,o=r*i;let a=0,s=0,l=0;for(let c=0;c<r;c++)for(let t=0;t<i;t++)l=e.get(c,t)-n,a+=l,s+=l*l;return t?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error("invalid option: ".concat(e))}}standardDeviation(e,t){"object"===typeof e&&(t=e,e=void 0);const n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":if(!c.isAnyArray(n))throw new TypeError("center must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}(this,n),this;case"column":if(!c.isAnyArray(n))throw new TypeError("center must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}(this,n),this;case void 0:if("number"!==typeof n)throw new TypeError("center must be a number");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}(this,n),this;default:throw new Error("invalid option: ".concat(e))}}scale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof e&&(t=e,e=void 0),"object"!==typeof t)throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":if(void 0===n)n=function(e){const t=[];for(let n=0;n<e.rows;n++){let r=0;for(let t=0;t<e.columns;t++)r+=e.get(n,t)**2/(e.columns-1);t.push(Math.sqrt(r))}return t}(this);else if(!c.isAnyArray(n))throw new TypeError("scale must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}(this,n),this;case"column":if(void 0===n)n=function(e){const t=[];for(let n=0;n<e.columns;n++){let r=0;for(let t=0;t<e.rows;t++)r+=e.get(t,n)**2/(e.rows-1);t.push(Math.sqrt(r))}return t}(this);else if(!c.isAnyArray(n))throw new TypeError("scale must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}(this,n),this;case void 0:if(void 0===n)n=function(e){const t=e.size-1;let n=0;for(let r=0;r<e.columns;r++)for(let i=0;i<e.rows;i++)n+=e.get(i,r)**2/t;return Math.sqrt(n)}(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}(this,n),this;default:throw new Error("invalid option: ".concat(e))}}toString(e){return p(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}}function C(e,t){return e-t}E.prototype.klass="Matrix","undefined"!==typeof Symbol&&(E.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return p(this)}),E.random=E.rand,E.randomInt=E.randInt,E.diagonal=E.diag,E.prototype.diagonal=E.prototype.diag,E.identity=E.eye,E.prototype.negate=E.prototype.neg,E.prototype.tensorProduct=E.prototype.kroneckerProduct;var A=new WeakSet;class R extends E{constructor(e,t){if(super(),a(this,A),s(this,"data",void 0),R.isMatrix(e))l(A,this,k).call(this,e.rows,e.columns),R.copy(e,this);else if(Number.isInteger(e)&&e>=0)l(A,this,k).call(this,e,t);else{if(!c.isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");{const n=e;if("number"!==typeof(t=(e=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<e;r++){if(n[r].length!==t)throw new RangeError("Inconsistent array dimensions");if(!n[r].every((e=>"number"===typeof e)))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}this.rows=e,this.columns=t}}}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return g(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return void 0===t&&(t=e,e=this.rows),g(this,e,!0),t=Float64Array.from(b(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){v(this,e);for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let r=0;r<e;r++)n[r]=this.data[t][r];for(let r=e+1;r<this.columns;r++)n[r-1]=this.data[t][r];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){"undefined"===typeof t&&(t=e,e=this.columns),v(this,e,!0),t=y(this,t);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}function k(e,t){if(this.data=[],!(Number.isInteger(t)&&t>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<e;n++)this.data.push(new Float64Array(t));this.rows=e,this.columns=t}!function(e,t){e.prototype.add=function(e){return"number"===typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return"number"===typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"===typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"===typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"===typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"===typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return"number"===typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return"number"===typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return"number"===typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return"number"===typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return"number"===typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return"number"===typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e);return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)**e.get(t,n));return this}}(E,R);var P=new WeakMap;class L extends E{get size(){return o(P,this).size}get rows(){return o(P,this).rows}get columns(){return o(P,this).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return R.isMatrix(e)&&"SymmetricMatrix"===e.klassType}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}constructor(e){if(super(),r(this,P,void 0),R.isMatrix(e)){if(!e.isSymmetric())throw new TypeError("not symmetric data");i(P,this,R.copy(e,new R(e.rows,e.rows)))}else if(Number.isInteger(e)&&e>=0)i(P,this,new R(e,e));else if(i(P,this,new R(e)),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const e=new L(this.diagonalSize);for(const[t,n,r]of this.upperRightEntries())e.set(t,n,r);return e}toMatrix(){return new R(this)}get(e,t){return o(P,this).get(e,t)}set(e,t,n){return o(P,this).set(e,t,n),o(P,this).set(t,e,n),this}removeCross(e){return o(P,this).removeRow(e),o(P,this).removeColumn(e),this}addCross(e,t){void 0===t&&(t=e,e=this.diagonalSize);const n=t.slice();return n.splice(e,1),o(P,this).addRow(e,n),o(P,this).addColumn(e,t),this}applyMask(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const t=[];for(const[n,r]of e.entries())r||t.push(n);t.reverse();for(const n of t)this.removeCross(n);return this}toCompact(){const{diagonalSize:e}=this,t=new Array(e*(e+1)/2);for(let n=0,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=++r);return t}static fromCompact(e){const t=e.length,n=(Math.sqrt(8*t+1)-1)/2;if(!Number.isInteger(n))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(e)));const r=new L(n);for(let i=0,o=0,a=0;a<t;a++)r.set(i,o,e[a]),++i>=n&&(i=++o);return r}*upperRightEntries(){for(let e=0,t=0;e<this.diagonalSize;void 0){const n=this.get(e,t);yield[e,t,n],++t>=this.diagonalSize&&(t=++e)}}*upperRightValues(){for(let e=0,t=0;e<this.diagonalSize;void 0){const n=this.get(e,t);yield n,++t>=this.diagonalSize&&(t=++e)}}}L.prototype.klassType="SymmetricMatrix";class O extends L{static isDistanceMatrix(e){return L.isSymmetricMatrix(e)&&"DistanceMatrix"===e.klassSubType}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,t,n){return e===t&&(n=0),super.set(e,t,n)}addCross(e,t){return void 0===t&&(t=e,e=this.diagonalSize),(t=t.slice())[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new L(this)}clone(){const e=new O(this.diagonalSize);for(const[t,n,r]of this.upperRightEntries())t!==n&&e.set(t,n,r);return e}toCompact(){const{diagonalSize:e}=this,t=new Array((e-1)*e/2);for(let n=1,r=0,i=0;i<t.length;i++)t[i]=this.get(r,n),++n>=e&&(n=1+ ++r);return t}static fromCompact(e){const t=e.length;if(0===t)return new this(0);const n=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(n))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(e)));const r=new this(n);for(let i=1,o=0,a=0;a<t;a++)r.set(i,o,e[a]),++i>=n&&(i=1+ ++o);return r}}O.prototype.klassSubType="DistanceMatrix";class N extends E{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class I extends N{constructor(e,t,n){x(e,t),w(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class D extends E{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let r=this._calculateIndex(e,t);return this.data[r]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class j extends E{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}class F{constructor(e){let t,n,r,i,o,a,s,l,c,u=(e=j.checkMatrix(e)).clone(),h=u.rows,d=u.columns,p=new Float64Array(h),f=1;for(t=0;t<h;t++)p[t]=t;for(l=new Float64Array(h),n=0;n<d;n++){for(t=0;t<h;t++)l[t]=u.get(t,n);for(t=0;t<h;t++){for(c=Math.min(t,n),o=0,r=0;r<c;r++)o+=u.get(t,r)*l[r];l[t]-=o,u.set(t,n,l[t])}for(i=n,t=n+1;t<h;t++)Math.abs(l[t])>Math.abs(l[i])&&(i=t);if(i!==n){for(r=0;r<d;r++)a=u.get(i,r),u.set(i,r,u.get(n,r)),u.set(n,r,a);s=p[i],p[i]=p[n],p[n]=s,f=-f}if(n<h&&0!==u.get(n,n))for(t=n+1;t<h;t++)u.set(t,n,u.get(t,n)/u.get(n,n))}this.LU=u,this.pivotVector=p,this.pivotSign=f}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(0===e.get(n,n))return!0;return!1}solve(e){e=R.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,o=e.columns,a=e.subMatrixRow(this.pivotVector,0,o-1),s=t.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*t.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/t.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*t.get(n,i))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let r=0;r<n;r++)t*=e.get(r,r);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new R(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i>t?r.set(i,t,e.get(i,t)):i===t?r.set(i,t,1):r.set(i,t,0);return r}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new R(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i<=t?r.set(i,t,e.get(i,t)):r.set(i,t,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function z(e,t){let n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}class B{constructor(e){let t,n,r,i,o=(e=j.checkMatrix(e)).clone(),a=e.rows,s=e.columns,l=new Float64Array(s);for(r=0;r<s;r++){let e=0;for(t=r;t<a;t++)e=z(e,o.get(t,r));if(0!==e){for(o.get(r,r)<0&&(e=-e),t=r;t<a;t++)o.set(t,r,o.get(t,r)/e);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,t=r;t<a;t++)i+=o.get(t,r)*o.get(t,n);for(i=-i/o.get(r,r),t=r;t<a;t++)o.set(t,n,o.get(t,n)+i*o.get(t,r))}}l[r]=-e}this.QR=o,this.Rdiag=l}solve(e){e=R.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=e.columns,l=e.clone(),c=t.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=t.get(r,o)*l.get(r,i);for(a=-a/t.get(o,o),r=o;r<n;r++)l.set(r,i,l.get(r,i)+a*t.get(r,o))}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)l.set(o,i,l.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)l.set(r,i,l.get(r,i)-l.get(o,i)*t.get(r,o))}return l.subMatrix(0,c-1,0,s-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}get upperTriangularMatrix(){let e,t,n=this.QR,r=n.columns,i=new R(r,r);for(e=0;e<r;e++)for(t=0;t<r;t++)e<t?i.set(e,t,n.get(e,t)):e===t?i.set(e,t,this.Rdiag[e]):i.set(e,t,0);return i}get orthogonalMatrix(){let e,t,n,r,i=this.QR,o=i.rows,a=i.columns,s=new R(o,a);for(n=a-1;n>=0;n--){for(e=0;e<o;e++)s.set(e,n,0);for(s.set(n,n,1),t=n;t<a;t++)if(0!==i.get(n,n)){for(r=0,e=n;e<o;e++)r+=i.get(e,n)*s.get(e,t);for(r=-r/i.get(n,n),e=n;e<o;e++)s.set(e,t,s.get(e,t)+r*i.get(e,n))}}return s}}class U{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((e=j.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,r=e.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=t;let s,l=Boolean(i),c=Boolean(o),u=!1;if(n<r)if(a){s=e.transpose(),n=s.rows,r=s.columns,u=!0;let t=l;l=c,c=t}else s=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=e.clone();let h=Math.min(n,r),d=Math.min(n+1,r),p=new Float64Array(d),f=new R(n,h),m=new R(r,r),g=new Float64Array(r),v=new Float64Array(n),b=new Float64Array(d);for(let T=0;T<d;T++)b[T]=T;let y=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(y,x);for(let T=0;T<w;T++){if(T<y){p[T]=0;for(let e=T;e<n;e++)p[T]=z(p[T],s.get(e,T));if(0!==p[T]){s.get(T,T)<0&&(p[T]=-p[T]);for(let e=T;e<n;e++)s.set(e,T,s.get(e,T)/p[T]);s.set(T,T,s.get(T,T)+1)}p[T]=-p[T]}for(let e=T+1;e<r;e++){if(T<y&&0!==p[T]){let t=0;for(let r=T;r<n;r++)t+=s.get(r,T)*s.get(r,e);t=-t/s.get(T,T);for(let r=T;r<n;r++)s.set(r,e,s.get(r,e)+t*s.get(r,T))}g[e]=s.get(T,e)}if(l&&T<y)for(let e=T;e<n;e++)f.set(e,T,s.get(e,T));if(T<x){g[T]=0;for(let e=T+1;e<r;e++)g[T]=z(g[T],g[e]);if(0!==g[T]){g[T+1]<0&&(g[T]=0-g[T]);for(let e=T+1;e<r;e++)g[e]/=g[T];g[T+1]+=1}if(g[T]=-g[T],T+1<n&&0!==g[T]){for(let e=T+1;e<n;e++)v[e]=0;for(let e=T+1;e<n;e++)for(let t=T+1;t<r;t++)v[e]+=g[t]*s.get(e,t);for(let e=T+1;e<r;e++){let t=-g[e]/g[T+1];for(let r=T+1;r<n;r++)s.set(r,e,s.get(r,e)+t*v[r])}}if(c)for(let e=T+1;e<r;e++)m.set(e,T,g[e])}}let _=Math.min(r,n+1);if(y<r&&(p[y]=s.get(y,y)),n<_&&(p[_-1]=0),x+1<_&&(g[x]=s.get(x,_-1)),g[_-1]=0,l){for(let e=y;e<h;e++){for(let t=0;t<n;t++)f.set(t,e,0);f.set(e,e,1)}for(let e=y-1;e>=0;e--)if(0!==p[e]){for(let t=e+1;t<h;t++){let r=0;for(let i=e;i<n;i++)r+=f.get(i,e)*f.get(i,t);r=-r/f.get(e,e);for(let i=e;i<n;i++)f.set(i,t,f.get(i,t)+r*f.get(i,e))}for(let t=e;t<n;t++)f.set(t,e,-f.get(t,e));f.set(e,e,1+f.get(e,e));for(let t=0;t<e-1;t++)f.set(t,e,0)}else{for(let t=0;t<n;t++)f.set(t,e,0);f.set(e,e,1)}}if(c)for(let T=r-1;T>=0;T--){if(T<x&&0!==g[T])for(let e=T+1;e<r;e++){let t=0;for(let n=T+1;n<r;n++)t+=m.get(n,T)*m.get(n,e);t=-t/m.get(T+1,T);for(let n=T+1;n<r;n++)m.set(n,e,m.get(n,e)+t*m.get(n,T))}for(let e=0;e<r;e++)m.set(e,T,0);m.set(T,T,1)}let S=_-1,M=Number.EPSILON;for(;_>0;){let e,t;for(e=_-2;e>=-1&&-1!==e;e--){const t=Number.MIN_VALUE+M*Math.abs(p[e]+Math.abs(p[e+1]));if(Math.abs(g[e])<=t||Number.isNaN(g[e])){g[e]=0;break}}if(e===_-2)t=4;else{let n;for(n=_-1;n>=e&&n!==e;n--){let t=(n!==_?Math.abs(g[n]):0)+(n!==e+1?Math.abs(g[n-1]):0);if(Math.abs(p[n])<=M*t){p[n]=0;break}}n===e?t=3:n===_-1?t=1:(t=2,e=n)}switch(e++,t){case 1:{let t=g[_-2];g[_-2]=0;for(let n=_-2;n>=e;n--){let i=z(p[n],t),o=p[n]/i,a=t/i;if(p[n]=i,n!==e&&(t=-a*g[n-1],g[n-1]=o*g[n-1]),c)for(let e=0;e<r;e++)i=o*m.get(e,n)+a*m.get(e,_-1),m.set(e,_-1,-a*m.get(e,n)+o*m.get(e,_-1)),m.set(e,n,i)}break}case 2:{let t=g[e-1];g[e-1]=0;for(let r=e;r<_;r++){let i=z(p[r],t),o=p[r]/i,a=t/i;if(p[r]=i,t=-a*g[r],g[r]=o*g[r],l)for(let t=0;t<n;t++)i=o*f.get(t,r)+a*f.get(t,e-1),f.set(t,e-1,-a*f.get(t,r)+o*f.get(t,e-1)),f.set(t,r,i)}break}case 3:{const t=Math.max(Math.abs(p[_-1]),Math.abs(p[_-2]),Math.abs(g[_-2]),Math.abs(p[e]),Math.abs(g[e])),i=p[_-1]/t,o=p[_-2]/t,a=g[_-2]/t,s=p[e]/t,u=g[e]/t,h=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let v=0;0===h&&0===d||(v=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),v=d/(h+v));let b=(s+i)*(s-i)+v,y=s*u;for(let x=e;x<_-1;x++){let t=z(b,y);0===t&&(t=Number.MIN_VALUE);let i=b/t,o=y/t;if(x!==e&&(g[x-1]=t),b=i*p[x]+o*g[x],g[x]=i*g[x]-o*p[x],y=o*p[x+1],p[x+1]=i*p[x+1],c)for(let e=0;e<r;e++)t=i*m.get(e,x)+o*m.get(e,x+1),m.set(e,x+1,-o*m.get(e,x)+i*m.get(e,x+1)),m.set(e,x,t);if(t=z(b,y),0===t&&(t=Number.MIN_VALUE),i=b/t,o=y/t,p[x]=t,b=i*g[x]+o*p[x+1],p[x+1]=-o*g[x]+i*p[x+1],y=o*g[x+1],g[x+1]=i*g[x+1],l&&x<n-1)for(let e=0;e<n;e++)t=i*f.get(e,x)+o*f.get(e,x+1),f.set(e,x+1,-o*f.get(e,x)+i*f.get(e,x+1)),f.set(e,x,t)}g[_-2]=b;break}case 4:if(p[e]<=0&&(p[e]=p[e]<0?-p[e]:0,c))for(let t=0;t<=S;t++)m.set(t,e,-m.get(t,e));for(;e<S&&!(p[e]>=p[e+1]);){let t=p[e];if(p[e]=p[e+1],p[e+1]=t,c&&e<r-1)for(let n=0;n<r;n++)t=m.get(n,e+1),m.set(n,e+1,m.get(n,e)),m.set(n,e,t);if(l&&e<n-1)for(let r=0;r<n;r++)t=f.get(r,e+1),f.set(r,e+1,f.get(r,e)),f.set(r,e,t);e++}_--}}if(u){let e=m;m=f,f=e}this.m=n,this.n=r,this.s=p,this.U=f,this.V=m}solve(e){let t=e,n=this.threshold,r=this.s.length,i=R.zeros(r,r);for(let h=0;h<r;h++)Math.abs(this.s[h])<=n?i.set(h,h,0):i.set(h,h,1/this.s[h]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),l=a.rows,c=o.rows,u=R.zeros(l,c);for(let h=0;h<l;h++)for(let e=0;e<c;e++){let t=0;for(let n=0;n<r;n++)t+=s.get(h,n)*o.get(e,n);u.set(h,e,t)}return u.mmul(t)}solveForDiagonal(e){return this.solve(R.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new R(n,this.s.length);for(let c=0;c<n;c++)for(let n=0;n<r;n++)Math.abs(this.s[n])>t&&i.set(c,n,e.get(c,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new R(n,a);for(let c=0;c<n;c++)for(let e=0;e<a;e++){let t=0;for(let n=0;n<s;n++)t+=i.get(c,n)*o.get(e,n);l.set(c,e,t)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return R.diag(this.s)}}function G(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=j.checkMatrix(e),t=j.checkMatrix(t),n?new U(e).solve(t):e.isSquare()?new F(e).solve(t):new B(e).solve(t)}function V(e,t){let n=[];for(let r=0;r<e;r++)r!==t&&n.push(r);return n}function H(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(e>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(t.rows+1).fill(0);{let e=t.addRow(n,[0]);for(let t=0;t<e.rows;t++)Math.abs(e.get(t,0))<r&&e.set(t,0,0);return e.to1DArray()}}class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{assumeSymmetric:n=!1}=t;if(!(e=j.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let r,i,o=e.columns,a=new R(o,o),s=new Float64Array(o),l=new Float64Array(o),c=e,u=!1;if(u=!!n||e.isSymmetric(),u){for(r=0;r<o;r++)for(i=0;i<o;i++)a.set(r,i,c.get(r,i));!function(e,t,n,r){let i,o,a,s,l,c,u,h;for(l=0;l<e;l++)n[l]=r.get(e-1,l);for(s=e-1;s>0;s--){for(h=0,a=0,c=0;c<s;c++)h+=Math.abs(n[c]);if(0===h)for(t[s]=n[s-1],l=0;l<s;l++)n[l]=r.get(s-1,l),r.set(s,l,0),r.set(l,s,0);else{for(c=0;c<s;c++)n[c]/=h,a+=n[c]*n[c];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),t[s]=h*o,a-=i*o,n[s-1]=i-o,l=0;l<s;l++)t[l]=0;for(l=0;l<s;l++){for(i=n[l],r.set(l,s,i),o=t[l]+r.get(l,l)*i,c=l+1;c<=s-1;c++)o+=r.get(c,l)*n[c],t[c]+=r.get(c,l)*i;t[l]=o}for(i=0,l=0;l<s;l++)t[l]/=a,i+=t[l]*n[l];for(u=i/(a+a),l=0;l<s;l++)t[l]-=u*n[l];for(l=0;l<s;l++){for(i=n[l],o=t[l],c=l;c<=s-1;c++)r.set(c,l,r.get(c,l)-(i*t[c]+o*n[c]));n[l]=r.get(s-1,l),r.set(s,l,0)}}n[s]=a}for(s=0;s<e-1;s++){if(r.set(e-1,s,r.get(s,s)),r.set(s,s,1),a=n[s+1],0!==a){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/a;for(l=0;l<=s;l++){for(o=0,c=0;c<=s;c++)o+=r.get(c,s+1)*r.get(c,l);for(c=0;c<=s;c++)r.set(c,l,r.get(c,l)-o*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(l=0;l<e;l++)n[l]=r.get(e-1,l),r.set(e-1,l,0);r.set(e-1,e-1,1),t[0]=0}(o,l,s,a),function(e,t,n,r){let i,o,a,s,l,c,u,h,d,p,f,m,g,v,b,y;for(a=1;a<e;a++)t[a-1]=t[a];t[e-1]=0;let x=0,w=0,_=Number.EPSILON;for(c=0;c<e;c++){for(w=Math.max(w,Math.abs(n[c])+Math.abs(t[c])),u=c;u<e&&!(Math.abs(t[u])<=_*w);)u++;if(u>c)do{for(i=n[c],h=(n[c+1]-i)/(2*t[c]),d=z(h,1),h<0&&(d=-d),n[c]=t[c]/(h+d),n[c+1]=t[c]*(h+d),p=n[c+1],o=i-n[c],a=c+2;a<e;a++)n[a]-=o;for(x+=o,h=n[u],f=1,m=f,g=f,v=t[c+1],b=0,y=0,a=u-1;a>=c;a--)for(g=m,m=f,y=b,i=f*t[a],o=f*h,d=z(h,t[a]),t[a+1]=b*d,b=t[a]/d,f=h/d,h=f*n[a]-b*i,n[a+1]=o+b*(f*i+b*n[a]),l=0;l<e;l++)o=r.get(l,a+1),r.set(l,a+1,b*r.get(l,a)+f*o),r.set(l,a,f*r.get(l,a)-b*o);h=-b*y*g*v*t[c]/p,t[c]=b*h,n[c]=f*h}while(Math.abs(t[c])>_*w);n[c]=n[c]+x,t[c]=0}for(a=0;a<e-1;a++){for(l=a,h=n[a],s=a+1;s<e;s++)n[s]<h&&(l=s,h=n[s]);if(l!==a)for(n[l]=n[a],n[a]=h,s=0;s<e;s++)h=r.get(s,a),r.set(s,a,r.get(s,l)),r.set(s,l,h)}}(o,l,s,a)}else{let e=new R(o,o),t=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)e.set(r,i,c.get(r,i));!function(e,t,n,r){let i,o,a,s,l,c,u,h=0,d=e-1;for(c=h+1;c<=d-1;c++){for(u=0,s=c;s<=d;s++)u+=Math.abs(t.get(s,c-1));if(0!==u){for(a=0,s=d;s>=c;s--)n[s]=t.get(s,c-1)/u,a+=n[s]*n[s];for(o=Math.sqrt(a),n[c]>0&&(o=-o),a-=n[c]*o,n[c]=n[c]-o,l=c;l<e;l++){for(i=0,s=d;s>=c;s--)i+=n[s]*t.get(s,l);for(i/=a,s=c;s<=d;s++)t.set(s,l,t.get(s,l)-i*n[s])}for(s=0;s<=d;s++){for(i=0,l=d;l>=c;l--)i+=n[l]*t.get(s,l);for(i/=a,l=c;l<=d;l++)t.set(s,l,t.get(s,l)-i*n[l])}n[c]=u*n[c],t.set(c,c-1,u*o)}}for(s=0;s<e;s++)for(l=0;l<e;l++)r.set(s,l,s===l?1:0);for(c=d-1;c>=h+1;c--)if(0!==t.get(c,c-1)){for(s=c+1;s<=d;s++)n[s]=t.get(s,c-1);for(l=c;l<=d;l++){for(o=0,s=c;s<=d;s++)o+=n[s]*r.get(s,l);for(o=o/n[c]/t.get(c,c-1),s=c;s<=d;s++)r.set(s,l,r.get(s,l)+o*n[s])}}}(o,e,t,a),function(e,t,n,r,i){let o,a,s,l,c,u,h,d,p,f,m,g,v,b,y,x=e-1,w=0,_=e-1,S=Number.EPSILON,M=0,T=0,E=0,C=0,A=0,R=0,k=0,P=0;for(o=0;o<e;o++)for((o<w||o>_)&&(n[o]=i.get(o,o),t[o]=0),a=Math.max(o-1,0);a<e;a++)T+=Math.abs(i.get(o,a));for(;x>=w;){for(l=x;l>w&&(R=Math.abs(i.get(l-1,l-1))+Math.abs(i.get(l,l)),0===R&&(R=T),!(Math.abs(i.get(l,l-1))<S*R));)l--;if(l===x)i.set(x,x,i.get(x,x)+M),n[x]=i.get(x,x),t[x]=0,x--,P=0;else if(l===x-1){if(h=i.get(x,x-1)*i.get(x-1,x),E=(i.get(x-1,x-1)-i.get(x,x))/2,C=E*E+h,k=Math.sqrt(Math.abs(C)),i.set(x,x,i.get(x,x)+M),i.set(x-1,x-1,i.get(x-1,x-1)+M),d=i.get(x,x),C>=0){for(k=E>=0?E+k:E-k,n[x-1]=d+k,n[x]=n[x-1],0!==k&&(n[x]=d-h/k),t[x-1]=0,t[x]=0,d=i.get(x,x-1),R=Math.abs(d)+Math.abs(k),E=d/R,C=k/R,A=Math.sqrt(E*E+C*C),E/=A,C/=A,a=x-1;a<e;a++)k=i.get(x-1,a),i.set(x-1,a,C*k+E*i.get(x,a)),i.set(x,a,C*i.get(x,a)-E*k);for(o=0;o<=x;o++)k=i.get(o,x-1),i.set(o,x-1,C*k+E*i.get(o,x)),i.set(o,x,C*i.get(o,x)-E*k);for(o=w;o<=_;o++)k=r.get(o,x-1),r.set(o,x-1,C*k+E*r.get(o,x)),r.set(o,x,C*r.get(o,x)-E*k)}else n[x-1]=d+E,n[x]=d+E,t[x-1]=k,t[x]=-k;x-=2,P=0}else{if(d=i.get(x,x),p=0,h=0,l<x&&(p=i.get(x-1,x-1),h=i.get(x,x-1)*i.get(x-1,x)),10===P){for(M+=d,o=w;o<=x;o++)i.set(o,o,i.get(o,o)-d);R=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2)),d=p=.75*R,h=-.4375*R*R}if(30===P&&(R=(p-d)/2,R=R*R+h,R>0)){for(R=Math.sqrt(R),p<d&&(R=-R),R=d-h/((p-d)/2+R),o=w;o<=x;o++)i.set(o,o,i.get(o,o)-R);M+=R,d=p=h=.964}for(P+=1,c=x-2;c>=l&&(k=i.get(c,c),A=d-k,R=p-k,E=(A*R-h)/i.get(c+1,c)+i.get(c,c+1),C=i.get(c+1,c+1)-k-A-R,A=i.get(c+2,c+1),R=Math.abs(E)+Math.abs(C)+Math.abs(A),E/=R,C/=R,A/=R,c!==l)&&!(Math.abs(i.get(c,c-1))*(Math.abs(C)+Math.abs(A))<S*(Math.abs(E)*(Math.abs(i.get(c-1,c-1))+Math.abs(k)+Math.abs(i.get(c+1,c+1)))));)c--;for(o=c+2;o<=x;o++)i.set(o,o-2,0),o>c+2&&i.set(o,o-3,0);for(s=c;s<=x-1&&(b=s!==x-1,s!==c&&(E=i.get(s,s-1),C=i.get(s+1,s-1),A=b?i.get(s+2,s-1):0,d=Math.abs(E)+Math.abs(C)+Math.abs(A),0!==d&&(E/=d,C/=d,A/=d)),0!==d);s++)if(R=Math.sqrt(E*E+C*C+A*A),E<0&&(R=-R),0!==R){for(s!==c?i.set(s,s-1,-R*d):l!==c&&i.set(s,s-1,-i.get(s,s-1)),E+=R,d=E/R,p=C/R,k=A/R,C/=E,A/=E,a=s;a<e;a++)E=i.get(s,a)+C*i.get(s+1,a),b&&(E+=A*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-E*k)),i.set(s,a,i.get(s,a)-E*d),i.set(s+1,a,i.get(s+1,a)-E*p);for(o=0;o<=Math.min(x,s+3);o++)E=d*i.get(o,s)+p*i.get(o,s+1),b&&(E+=k*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-E*A)),i.set(o,s,i.get(o,s)-E),i.set(o,s+1,i.get(o,s+1)-E*C);for(o=w;o<=_;o++)E=d*r.get(o,s)+p*r.get(o,s+1),b&&(E+=k*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-E*A)),r.set(o,s,r.get(o,s)-E),r.set(o,s+1,r.get(o,s+1)-E*C)}}}if(0===T)return;for(x=e-1;x>=0;x--)if(E=n[x],C=t[x],0===C)for(l=x,i.set(x,x,1),o=x-1;o>=0;o--){for(h=i.get(o,o)-E,A=0,a=l;a<=x;a++)A+=i.get(o,a)*i.get(a,x);if(t[o]<0)k=h,R=A;else if(l=o,0===t[o]?i.set(o,x,0!==h?-A/h:-A/(S*T)):(d=i.get(o,o+1),p=i.get(o+1,o),C=(n[o]-E)*(n[o]-E)+t[o]*t[o],u=(d*R-k*A)/C,i.set(o,x,u),i.set(o+1,x,Math.abs(d)>Math.abs(k)?(-A-h*u)/d:(-R-p*u)/k)),u=Math.abs(i.get(o,x)),S*u*u>1)for(a=o;a<=x;a++)i.set(a,x,i.get(a,x)/u)}else if(C<0)for(l=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,C/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-E)/i.get(x,x-1))):(y=$(0,-i.get(x-1,x),i.get(x-1,x-1)-E,C),i.set(x-1,x-1,y[0]),i.set(x-1,x,y[1])),i.set(x,x-1,0),i.set(x,x,1),o=x-2;o>=0;o--){for(f=0,m=0,a=l;a<=x;a++)f+=i.get(o,a)*i.get(a,x-1),m+=i.get(o,a)*i.get(a,x);if(h=i.get(o,o)-E,t[o]<0)k=h,A=f,R=m;else if(l=o,0===t[o]?(y=$(-f,-m,h,C),i.set(o,x-1,y[0]),i.set(o,x,y[1])):(d=i.get(o,o+1),p=i.get(o+1,o),g=(n[o]-E)*(n[o]-E)+t[o]*t[o]-C*C,v=2*(n[o]-E)*C,0===g&&0===v&&(g=S*T*(Math.abs(h)+Math.abs(C)+Math.abs(d)+Math.abs(p)+Math.abs(k))),y=$(d*A-k*f+C*m,d*R-k*m-C*f,g,v),i.set(o,x-1,y[0]),i.set(o,x,y[1]),Math.abs(d)>Math.abs(k)+Math.abs(C)?(i.set(o+1,x-1,(-f-h*i.get(o,x-1)+C*i.get(o,x))/d),i.set(o+1,x,(-m-h*i.get(o,x)-C*i.get(o,x-1))/d)):(y=$(-A-p*i.get(o,x-1),-R-p*i.get(o,x),k,C),i.set(o+1,x-1,y[0]),i.set(o+1,x,y[1]))),u=Math.max(Math.abs(i.get(o,x-1)),Math.abs(i.get(o,x))),S*u*u>1)for(a=o;a<=x;a++)i.set(a,x-1,i.get(a,x-1)/u),i.set(a,x,i.get(a,x)/u)}for(o=0;o<e;o++)if(o<w||o>_)for(a=o;a<e;a++)r.set(o,a,i.get(o,a));for(a=e-1;a>=w;a--)for(o=w;o<=_;o++){for(k=0,s=w;s<=Math.min(a,_);s++)k+=r.get(o,s)*i.get(s,a);r.set(o,a,k)}}(o,l,s,a,e)}this.n=o,this.e=l,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e,t,n=this.n,r=this.e,i=this.d,o=new R(n,n);for(e=0;e<n;e++){for(t=0;t<n;t++)o.set(e,t,0);o.set(e,e,i[e]),r[e]>0?o.set(e,e+1,r[e]):r[e]<0&&o.set(e,e-1,r[e])}return o}}function $(e,t,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(e+i*t)/o,(t-i*e)/o]):(i=n/r,o=r+i*n,[(i*e+t)/o,(i*t-e)/o])}class q{constructor(e){if(!(e=j.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");let t,n,r,i=e,o=i.rows,a=new R(o,o),s=!0;for(n=0;n<o;n++){let e=0;for(r=0;r<n;r++){let o=0;for(t=0;t<r;t++)o+=a.get(r,t)*a.get(n,t);o=(i.get(n,r)-o)/a.get(r,r),a.set(n,r,o),e+=o*o}for(e=i.get(n,n)-e,s&=e>0,a.set(n,n,Math.sqrt(Math.max(e,0))),r=n+1;r<o;r++)a.set(n,r,0)}this.L=a,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=j.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,a=e.columns,s=e.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*t.get(o,r));s.set(o,i,s.get(o,i)/t.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*t.get(r,o));s.set(o,i,s.get(o,i)/t.get(o,o))}return s}get lowerTriangularMatrix(){return this.L}}class X{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=j.checkMatrix(e);let{Y:n}=t;const{scaleScores:r=!1,maxIterations:i=1e3,terminationCriteria:o=1e-10}=t;let a;if(n){if(n=c.isAnyArray(n)&&"number"===typeof n[0]?R.columnVector(n):j.checkMatrix(n),n.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=n.getColumnVector(0)}else a=e.getColumnVector(0);let s,l,u,h,d=1;for(let c=0;c<i&&d>o;c++)u=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),u=u.div(u.norm()),s=e.mmul(u).div(u.transpose().mmul(u).get(0,0)),c>0&&(d=s.clone().sub(h).pow(2).sum()),h=s.clone(),n?(l=n.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),l=l.div(l.norm()),a=n.mmul(l).div(l.transpose().mmul(l).get(0,0))):a=s;if(n){let t=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0));t=t.div(t.norm());let r=e.clone().sub(s.clone().mmul(t.transpose())),i=a.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),o=n.clone().sub(s.clone().mulS(i.get(0,0)).mmul(l.transpose()));this.t=s,this.p=t.transpose(),this.w=u.transpose(),this.q=l,this.u=a,this.s=s.transpose().mmul(s),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=u.transpose(),this.s=s.transpose().mmul(s).sqrt(),this.t=r?s.clone().div(this.s.get(0,0)):s,this.xResidual=e.sub(s.mmul(u.transpose()))}}t.y3=E,t.jy=q,t.oN=q,t.Hc=O,t.cg=W,t.hj=W,t.LU=F,t.Tb=F,t.uq=R,t.Zm=class extends N{constructor(e,t){w(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}},t.Dq=class extends N{constructor(e,t){v(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}},t.__=class extends N{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}},t.q0=class extends N{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}},t.lh=class extends N{constructor(e,t){x(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}},t.pI=class extends N{constructor(e,t){g(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}},t.zC=I,t.zg=class extends N{constructor(e,t,n,r,i){_(e,t,n,r,i),super(e,n-t+1,i-r+1),this.startRow=t,this.startColumn=r}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}},t.g6=class extends N{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}},t.OL=X,t.ks=X,t.QR=B,t.jp=B,t.mk=U,t.W2=U,t.l=L,t.KY=D,t.dv=j,t.BR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new R(e);let r=!1;if("object"!==typeof t||R.isMatrix(t)||c.isAnyArray(t)?t=new R(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=n;i&&(e.center("column"),r||t.center("column")),o&&(e.scale("column"),r||t.scale("column"));const a=e.standardDeviation("column",{unbiased:!0}),s=r?a:t.standardDeviation("column",{unbiased:!0}),l=e.transpose().mmul(t);for(let c=0;c<l.rows;c++)for(let t=0;t<l.columns;t++)l.set(c,t,l.get(c,t)*(1/(a[c]*s[t]))*(1/(e.rows-1)));return l},t.Wu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new R(e);let r=!1;if("object"!==typeof t||R.isMatrix(t)||c.isAnyArray(t)?t=new R(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=n;i&&(e=e.center("column"),r||(t=t.center("column")));const o=e.transpose().mmul(t);for(let a=0;a<o.rows;a++)for(let t=0;t<o.columns;t++)o.set(a,t,o.get(a,t)*(1/(e.rows-1)));return o},t.a4=function e(t){if((t=R.checkMatrix(t)).isSquare()){if(0===t.columns)return 1;let n,r,i,o;if(2===t.columns)return n=t.get(0,0),r=t.get(0,1),i=t.get(1,0),o=t.get(1,1),n*o-r*i;if(3===t.columns){let o,a,s;return o=new I(t,[1,2],[1,2]),a=new I(t,[1,2],[0,2]),s=new I(t,[1,2],[0,1]),n=t.get(0,0),r=t.get(0,1),i=t.get(0,2),n*e(o)-r*e(a)+i*e(s)}return new F(t).determinant}throw Error("determinant can only be calculated for a square matrix")},t.DI=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=j.checkMatrix(e),t?new U(e).inverse():G(e,R.eye(e.rows))},t.Jo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=t;let i=(e=R.checkMatrix(e)).rows,o=new R(i,i);for(let a=0;a<i;a++){let t=R.columnVector(e.getRow(a)),s=e.subMatrixRow(V(i,a)).transpose(),l=new U(s).solve(t),c=R.sub(t,s.mmul(l)).abs().max();o.setRow(a,H(c,l,a,n,r))}return o},t.Zi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((e=R.checkMatrix(e)).isEmpty())return e.transpose();let n=new U(e,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let a=0;a<o.length;a++)Math.abs(o[a])>t?o[a]=1/o[a]:o[a]=0;return i.mmul(R.diag(o).mmul(r.transpose()))},t.kH=G,t.LV=function(e,t){if(c.isAnyArray(e))return e[0]&&c.isAnyArray(e[0])?new j(e):new D(e,t);throw new Error("the argument is not an array")}},8612:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isAnyArray:()=>i});const r=Object.prototype.toString;function i(e){const t=r.call(e);return t.endsWith("Array]")&&!t.includes("Big")}},4168:(e,t,n)=>{"use strict";e.exports=n(5958)},5958:(e,t,n)=>{"use strict";var r,i=n(5043),o=(r=i)&&"object"==typeof r&&"default"in r?r.default:r;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('.multiSelectContainer,.multiSelectContainer *,.multiSelectContainer :after,.multiSelectContainer :before{box-sizing:border-box}.multiSelectContainer{position:relative;text-align:left;width:100%}.disable_ms{opacity:.5;pointer-events:none}.display-none{display:none}.searchWrapper{border:1px solid #ccc;border-radius:4px;min-height:22px;padding:5px;position:relative}.multiSelectContainer input{background:transparent;border:none;margin-top:3px}.multiSelectContainer input:focus{outline:none}.chip{align-items:center;background:#0096fb;border-radius:11px;color:#fff;display:inline-flex;font-size:13px;line-height:19px;margin-bottom:5px;margin-right:5px;padding:4px 10px}.chip,.singleChip{white-space:nowrap}.singleChip{background:none;border-radius:none;color:inherit}.singleChip i{display:none}.closeIcon{cursor:pointer;float:right;height:13px;margin-left:5px;width:13px}.optionListContainer{background:#fff;border-radius:4px;margin-top:1px;position:absolute;width:100%;z-index:2}.multiSelectContainer ul{border:1px solid #ccc;border-radius:4px;display:block;margin:0;max-height:250px;overflow-y:auto;padding:0}.multiSelectContainer li{padding:10px}.multiSelectContainer li:hover{background:#0096fb;color:#fff;cursor:pointer}.checkbox{margin-right:10px}.disableSelection{opacity:.5;pointer-events:none}.highlightOption{background:#0096fb;color:#fff}.displayBlock{display:block}.displayNone{display:none}.notFound{display:block;padding:10px}.singleSelect{padding-right:20px}li.groupHeading{color:#908e8e;padding:5px 15px;pointer-events:none}li.groupChildEle{padding-left:30px}.icon_down_dir{position:absolute;right:10px;top:50%;transform:translateY(-50%);width:14px}.icon_down_dir:before{content:"\\e803"}.custom-close{display:flex}');var l={circle:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cg%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M256%2C33C132.3%2C33%2C32%2C133.3%2C32%2C257c0%2C123.7%2C100.3%2C224%2C224%2C224c123.7%2C0%2C224-100.3%2C224-224C480%2C133.3%2C379.7%2C33%2C256%2C33z%20%20%20%20M364.3%2C332.5c1.5%2C1.5%2C2.3%2C3.5%2C2.3%2C5.6c0%2C2.1-0.8%2C4.2-2.3%2C5.6l-21.6%2C21.7c-1.6%2C1.6-3.6%2C2.3-5.6%2C2.3c-2%2C0-4.1-0.8-5.6-2.3L256%2C289.8%20%20%20l-75.4%2C75.7c-1.5%2C1.6-3.6%2C2.3-5.6%2C2.3c-2%2C0-4.1-0.8-5.6-2.3l-21.6-21.7c-1.5-1.5-2.3-3.5-2.3-5.6c0-2.1%2C0.8-4.2%2C2.3-5.6l75.7-76%20%20%20l-75.9-75c-3.1-3.1-3.1-8.2%2C0-11.3l21.6-21.7c1.5-1.5%2C3.5-2.3%2C5.6-2.3c2.1%2C0%2C4.1%2C0.8%2C5.6%2C2.3l75.7%2C74.7l75.7-74.7%20%20%20c1.5-1.5%2C3.5-2.3%2C5.6-2.3c2.1%2C0%2C4.1%2C0.8%2C5.6%2C2.3l21.6%2C21.7c3.1%2C3.1%2C3.1%2C8.2%2C0%2C11.3l-75.9%2C75L364.3%2C332.5z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",circle2:"data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2096%2096%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cg%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M48%2C0A48%2C48%2C0%2C1%2C0%2C96%2C48%2C48.0512%2C48.0512%2C0%2C0%2C0%2C48%2C0Zm0%2C84A36%2C36%2C0%2C1%2C1%2C84%2C48%2C36.0393%2C36.0393%2C0%2C0%2C1%2C48%2C84Z%22%2F%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M64.2422%2C31.7578a5.9979%2C5.9979%2C0%2C0%2C0-8.4844%2C0L48%2C39.5156l-7.7578-7.7578a5.9994%2C5.9994%2C0%2C0%2C0-8.4844%2C8.4844L39.5156%2C48l-7.7578%2C7.7578a5.9994%2C5.9994%2C0%2C1%2C0%2C8.4844%2C8.4844L48%2C56.4844l7.7578%2C7.7578a5.9994%2C5.9994%2C0%2C0%2C0%2C8.4844-8.4844L56.4844%2C48l7.7578-7.7578A5.9979%2C5.9979%2C0%2C0%2C0%2C64.2422%2C31.7578Z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",close:"data:image/svg+xml,%3Csvg%20height%3D%22135.467mm%22%20style%3D%22shape-rendering%3AgeometricPrecision%3B%20text-rendering%3AgeometricPrecision%3B%20image-rendering%3AoptimizeQuality%3B%20fill-rule%3Aevenodd%3B%20clip-rule%3Aevenodd%22%20viewBox%3D%220%200%2013547%2013547%22%20width%3D%22135.467mm%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cdefs%3E%20%20%20%20%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20%20%20%20%20.fil0%20%7Bfill%3Anone%7D%20%20%20%20%20%20%20%20%20%20%20%20.fil1%20%7Bfill%3A%23fff%7D%20%20%20%20%20%20%20%20%3C%2Fstyle%3E%20%20%20%20%3C%2Fdefs%3E%20%20%20%20%3Cg%20id%3D%22Ebene_x0020_1%22%3E%20%20%20%20%20%20%20%20%3Cpolygon%20class%3D%22fil0%22%20points%3D%220%2C0%2013547%2C0%2013547%2C13547%200%2C13547%20%22%2F%3E%20%20%20%20%20%20%20%20%3Cpath%20class%3D%22fil1%22%20d%3D%22M714%2012832l12118%200%200%20-12117%20-12118%200%200%2012117zm4188%20-2990l1871%20-1871%201871%201871%201197%20-1197%20-1871%20-1871%201871%20-1871%20-1197%20-1197%20-1871%201871%20-1871%20-1871%20-1197%201197%201871%201871%20-1871%201871%201197%201197z%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",cancel:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E"};function c(e){var t,n,r=i.useRef(null);return n=e.outsideClick,i.useEffect((function(){function e(e){t.current&&!t.current.contains(e.target)&&n()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t=r]),o.createElement("div",{ref:r},e.children)}var u=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={inputValue:"",options:t.options,filteredOptions:t.options,unfilteredOptions:t.options,selectedValues:Object.assign([],t.selectedValues),preSelectedValues:Object.assign([],t.selectedValues),toggleOptionsList:!1,highlightOption:t.avoidHighlightFirstOption?-1:0,showCheckbox:t.showCheckbox,keepSearchTerm:t.keepSearchTerm,groupedObject:[],closeIconType:l[t.closeIcon]||l.circle},n.optionTimeout=null,n.searchWrapper=o.createRef(),n.searchBox=o.createRef(),n.onChange=n.onChange.bind(s(n)),n.onKeyPress=n.onKeyPress.bind(s(n)),n.onFocus=n.onFocus.bind(s(n)),n.onBlur=n.onBlur.bind(s(n)),n.renderMultiselectContainer=n.renderMultiselectContainer.bind(s(n)),n.renderSelectedList=n.renderSelectedList.bind(s(n)),n.onRemoveSelectedItem=n.onRemoveSelectedItem.bind(s(n)),n.toggelOptionList=n.toggelOptionList.bind(s(n)),n.onArrowKeyNavigation=n.onArrowKeyNavigation.bind(s(n)),n.onSelectItem=n.onSelectItem.bind(s(n)),n.filterOptionsByInput=n.filterOptionsByInput.bind(s(n)),n.removeSelectedValuesFromOptions=n.removeSelectedValuesFromOptions.bind(s(n)),n.isSelectedValue=n.isSelectedValue.bind(s(n)),n.fadeOutSelection=n.fadeOutSelection.bind(s(n)),n.isDisablePreSelectedValues=n.isDisablePreSelectedValues.bind(s(n)),n.renderGroupByOptions=n.renderGroupByOptions.bind(s(n)),n.renderNormalOption=n.renderNormalOption.bind(s(n)),n.listenerCallback=n.listenerCallback.bind(s(n)),n.resetSelectedValues=n.resetSelectedValues.bind(s(n)),n.getSelectedItems=n.getSelectedItems.bind(s(n)),n.getSelectedItemsCount=n.getSelectedItemsCount.bind(s(n)),n.hideOnClickOutside=n.hideOnClickOutside.bind(s(n)),n.onCloseOptionList=n.onCloseOptionList.bind(s(n)),n.isVisible=n.isVisible.bind(s(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i.initialSetValue=function(){var e=this.props,t=e.groupBy,n=this.state.options;e.showCheckbox||e.singleSelect||this.removeSelectedValuesFromOptions(!1),t&&this.groupByOptions(n)},i.resetSelectedValues=function(){var e=this,t=this.state.unfilteredOptions;return new Promise((function(n){e.setState({selectedValues:[],preSelectedValues:[],options:t,filteredOptions:t},(function(){n(),e.initialSetValue()}))}))},i.getSelectedItems=function(){return this.state.selectedValues},i.getSelectedItemsCount=function(){return this.state.selectedValues.length},i.componentDidMount=function(){this.initialSetValue(),this.searchWrapper.current.addEventListener("click",this.listenerCallback)},i.componentDidUpdate=function(e){var t=this.props,n=t.options,r=t.selectedValues,i=e.selectedValues;JSON.stringify(e.options)!==JSON.stringify(n)&&this.setState({options:n,filteredOptions:n,unfilteredOptions:n},this.initialSetValue),JSON.stringify(i)!==JSON.stringify(r)&&this.setState({selectedValues:Object.assign([],r),preSelectedValues:Object.assign([],r)},this.initialSetValue)},i.listenerCallback=function(){this.searchBox.current.focus()},i.componentWillUnmount=function(){this.optionTimeout&&clearTimeout(this.optionTimeout),this.searchWrapper.current.removeEventListener("click",this.listenerCallback)},i.removeSelectedValuesFromOptions=function(e){var t=this.props,n=t.isObject,r=t.displayValue,i=t.groupBy,o=this.state,a=o.selectedValues,s=void 0===a?[]:a,l=o.unfilteredOptions;if(!e&&i&&this.groupByOptions(o.options),s.length||e){if(n){var c=l.filter((function(e){return-1===s.findIndex((function(t){return t[r]===e[r]}))}));return i&&this.groupByOptions(c),void this.setState({options:c,filteredOptions:c},this.filterOptionsByInput)}var u=l.filter((function(e){return-1===s.indexOf(e)}));this.setState({options:u,filteredOptions:u},this.filterOptionsByInput)}},i.groupByOptions=function(e){var t=this.props.groupBy,n=e.reduce((function(e,n){var r=n[t]||"Others";return e[r]=e[r]||[],e[r].push(n),e}),Object.create({}));this.setState({groupedObject:n})},i.onChange=function(e){var t=this.props.onSearch;this.setState({inputValue:e.target.value},this.filterOptionsByInput),t&&t(e.target.value)},i.onKeyPress=function(e){var t=this.props.onKeyPressFn;t&&t(e,e.target.value)},i.filterOptionsByInput=function(){var e,t=this,n=this.state,r=n.inputValue,i=this.props,o=i.displayValue;e=n.filteredOptions.filter(i.isObject?function(e){return t.matchValues(e[o],r)}:function(e){return t.matchValues(e,r)}),this.groupByOptions(e),this.setState({options:e})},i.matchValues=function(e,t){return this.props.caseSensitiveSearch?e.indexOf(t)>-1:e.toLowerCase?e.toLowerCase().indexOf(t.toLowerCase())>-1:e.toString().indexOf(t)>-1},i.onArrowKeyNavigation=function(e){var t=this.state,n=t.options,r=t.highlightOption,i=t.toggleOptionsList,o=t.selectedValues;if(8!==e.keyCode||t.inputValue||this.props.disablePreSelectedValues||!o.length||this.onRemoveSelectedItem(o.length-1),n.length)if(38===e.keyCode)this.setState(r>0?function(e){return{highlightOption:e.highlightOption-1}}:{highlightOption:n.length-1});else if(40===e.keyCode)this.setState(r<n.length-1?function(e){return{highlightOption:e.highlightOption+1}}:{highlightOption:0});else if("Enter"===e.key&&n.length&&i){if(-1===r)return;this.onSelectItem(n[r])}},i.onRemoveSelectedItem=function(e){var t,n=this,r=this.state.selectedValues,i=this.props,o=i.onRemove,a=i.showCheckbox,s=i.displayValue;t=i.isObject?r.findIndex((function(t){return t[s]===e[s]})):r.indexOf(e),r.splice(t,1),o(r,e),this.setState({selectedValues:r},(function(){a||n.removeSelectedValuesFromOptions(!0)})),this.props.closeOnSelect||this.searchBox.current.focus()},i.onSelectItem=function(e){var t=this,n=this.state.selectedValues,r=this.props,i=r.selectionLimit,o=r.onSelect,a=r.singleSelect,s=r.showCheckbox;if(this.state.keepSearchTerm||this.setState({inputValue:""}),a)return this.onSingleSelect(e),void o([e],e);this.isSelectedValue(e)?this.onRemoveSelectedItem(e):i!=n.length&&(n.push(e),o(n,e),this.setState({selectedValues:n},(function(){s?t.filterOptionsByInput():t.removeSelectedValuesFromOptions(!0)})),this.props.closeOnSelect||this.searchBox.current.focus())},i.onSingleSelect=function(e){this.setState({selectedValues:[e],toggleOptionsList:!1})},i.isSelectedValue=function(e){var t=this.props,n=t.displayValue,r=this.state.selectedValues;return t.isObject?r.filter((function(t){return t[n]===e[n]})).length>0:r.filter((function(t){return t===e})).length>0},i.renderOptionList=function(){var e=this.props,t=e.groupBy,n=e.style,r=e.emptyRecordMsg,i=e.loadingMessage,a=void 0===i?"loading...":i,s=this.state.options;return e.loading?o.createElement("ul",{className:"optionContainer",style:n.optionContainer},"string"==typeof a&&o.createElement("span",{style:n.loadingMessage,className:"notFound"},a),"string"!=typeof a&&a):o.createElement("ul",{className:"optionContainer",style:n.optionContainer},0===s.length&&o.createElement("span",{style:n.notFound,className:"notFound"},r),t?this.renderGroupByOptions():this.renderNormalOption())},i.renderGroupByOptions=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,a=t.showCheckbox,s=t.style,l=t.singleSelect,c=this.state.groupedObject;return Object.keys(c).map((function(t){return o.createElement(o.Fragment,{key:t},o.createElement("li",{className:"groupHeading",style:s.groupHeading},t),c[t].map((function(t,n){var c=e.isSelectedValue(t);return o.createElement("li",{key:"option"+n,style:s.option,className:"groupChildEle option "+(c?"selected":"")+" "+(e.fadeOutSelection(t)?"disableSelection":"")+" "+(e.isDisablePreSelectedValues(t)?"disableSelection":""),onClick:function(){return e.onSelectItem(t)}},a&&!l&&o.createElement("input",{type:"checkbox",className:"checkbox",readOnly:!0,checked:c}),e.props.optionValueDecorator(r?t[i]:(t||"").toString(),t))})))}))},i.renderNormalOption=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,a=t.showCheckbox,s=t.style,l=t.singleSelect,c=this.state.highlightOption;return this.state.options.map((function(t,n){var u=e.isSelectedValue(t);return o.createElement("li",{key:"option"+n,style:s.option,className:"option "+(u?"selected":"")+" "+(c===n?"highlightOption highlight":"")+" "+(e.fadeOutSelection(t)?"disableSelection":"")+" "+(e.isDisablePreSelectedValues(t)?"disableSelection":""),onClick:function(){return e.onSelectItem(t)}},a&&!l&&o.createElement("input",{type:"checkbox",readOnly:!0,className:"checkbox",checked:u}),e.props.optionValueDecorator(r?t[i]:(t||"").toString(),t))}))},i.renderSelectedList=function(){var e=this,t=this.props,n=t.isObject,r=void 0!==n&&n,i=t.displayValue,a=t.style,s=t.singleSelect,l=t.customCloseIcon,c=this.state,u=c.closeIconType;return c.selectedValues.map((function(t,n){return o.createElement("span",{className:"chip  "+(s&&"singleChip")+" "+(e.isDisablePreSelectedValues(t)&&"disableSelection"),key:n,style:a.chips},e.props.selectedValueDecorator(r?t[i]:(t||"").toString(),t),!e.isDisablePreSelectedValues(t)&&(l?o.createElement("i",{className:"custom-close",onClick:function(){return e.onRemoveSelectedItem(t)}},l):o.createElement("img",{className:"icon_cancel closeIcon",src:u,onClick:function(){return e.onRemoveSelectedItem(t)}})))}))},i.isDisablePreSelectedValues=function(e){var t=this.props,n=t.displayValue,r=this.state.preSelectedValues;return!(!t.disablePreSelectedValues||!r.length)&&(t.isObject?r.filter((function(t){return t[n]===e[n]})).length>0:r.filter((function(t){return t===e})).length>0)},i.fadeOutSelection=function(e){var t=this.props,n=t.selectionLimit;if(!t.singleSelect){var r=this.state.selectedValues;return-1!=n&&n==r.length&&(n==r.length?!t.showCheckbox||!this.isSelectedValue(e):void 0)}},i.toggelOptionList=function(){this.setState({toggleOptionsList:!this.state.toggleOptionsList,highlightOption:this.props.avoidHighlightFirstOption?-1:0})},i.onCloseOptionList=function(){this.setState({toggleOptionsList:!1,highlightOption:this.props.avoidHighlightFirstOption?-1:0,inputValue:""})},i.onFocus=function(){this.state.toggleOptionsList?clearTimeout(this.optionTimeout):this.toggelOptionList()},i.onBlur=function(){this.setState({inputValue:""},this.filterOptionsByInput),this.optionTimeout=setTimeout(this.onCloseOptionList,250)},i.isVisible=function(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},i.hideOnClickOutside=function(){var e=this,t=document.getElementsByClassName("multiselect-container")[0];document.addEventListener("click",(function(n){t&&!t.contains(n.target)&&e.isVisible(t)&&e.toggelOptionList()}))},i.renderMultiselectContainer=function(){var e=this.state,t=e.inputValue,n=e.toggleOptionsList,r=e.selectedValues,i=this.props,a=i.placeholder,s=i.style,l=i.singleSelect,c=i.id,u=i.name,h=i.hidePlaceholder,d=i.disable,p=i.showArrow,f=i.customArrow;return o.createElement("div",{className:"multiselect-container multiSelectContainer "+(d?"disable_ms":"")+" "+(i.className||""),id:c||"multiselectContainerReact",style:s.multiselectContainer},o.createElement("div",{className:"search-wrapper searchWrapper "+(l?"singleSelect":""),ref:this.searchWrapper,style:s.searchBox,onClick:l?this.toggelOptionList:function(){}},!i.hideSelectedList&&this.renderSelectedList(),o.createElement("input",{type:"text",ref:this.searchBox,className:"searchBox "+(l&&r.length?"display-none":""),id:(c||"search")+"_input",name:(u||"search_name")+"_input",onChange:this.onChange,onKeyPress:this.onKeyPress,value:t,onFocus:this.onFocus,onBlur:this.onBlur,placeholder:l&&r.length||h&&r.length?"":a,onKeyDown:this.onArrowKeyNavigation,style:s.inputField,autoComplete:"off",disabled:l||d}),(l||p)&&o.createElement(o.Fragment,null,f?o.createElement("span",{className:"icon_down_dir"},f):o.createElement("img",{src:"data:image/svg+xml,%3Csvg%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20width%3D%2232%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cg%20id%3D%22background%22%3E%20%20%20%20%20%20%20%20%3Crect%20fill%3D%22none%22%20height%3D%2232%22%20width%3D%2232%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%20%20%3Cg%20id%3D%22arrow_x5F_down%22%3E%20%20%20%20%20%20%20%20%3Cpolygon%20points%3D%222.002%2C10%2016.001%2C24%2030.002%2C10%20%20%22%2F%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",className:"icon_cancel icon_down_dir"}))),o.createElement("div",{className:"optionListContainer "+(n?"displayBlock":"displayNone"),onMouseDown:function(e){e.preventDefault()}},this.renderOptionList()))},i.render=function(){return o.createElement(c,{outsideClick:this.onCloseOptionList},this.renderMultiselectContainer())},r}(o.Component);u.defaultProps={options:[],disablePreSelectedValues:!1,selectedValues:[],isObject:!0,displayValue:"model",showCheckbox:!1,selectionLimit:-1,placeholder:"Select",groupBy:"",style:{},emptyRecordMsg:"No Options Available",onSelect:function(){},onRemove:function(){},onKeyPressFn:function(){},closeIcon:"circle2",singleSelect:!1,caseSensitiveSearch:!1,id:"",name:"",closeOnSelect:!0,avoidHighlightFirstOption:!1,hidePlaceholder:!1,showArrow:!1,keepSearchTerm:!1,customCloseIcon:"",className:"",customArrow:void 0,selectedValueDecorator:function(e){return e},optionValueDecorator:function(e){return e}},t.default=u},7974:e=>{"use strict";var t=function(e){return e!==e};e.exports=function(e,n){return 0===e&&0===n?1/e===1/n:e===n||!(!t(e)||!t(n))}},2702:(e,t,n)=>{"use strict";var r=n(1779),i=n(1712),o=n(7974),a=n(3799),s=n(5289),l=i(a(),Object);r(l,{getPolyfill:a,implementation:o,shim:s}),e.exports=l},3799:(e,t,n)=>{"use strict";var r=n(7974);e.exports=function(){return"function"===typeof Object.is?Object.is:r}},5289:(e,t,n)=>{"use strict";var r=n(3799),i=n(1779);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},1038:(e,t,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(234),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{h(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var v in e)f&&"prototype"===v||!i.call(e,v)||d.push(String(v));if(l)for(var b=function(e){if("undefined"===typeof window||!p)return h(e);try{return h(e)}catch(t){return!1}}(e),y=0;y<u.length;++y)b&&"constructor"===u[y]||!i.call(e,u[y])||d.push(u[y]);return d}}e.exports=r},2678:(e,t,n)=>{"use strict";var r=Array.prototype.slice,i=n(234),o=Object.keys,a=o?function(e){return o(e)}:n(1038),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},234:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},5590:(e,t,n)=>{"use strict";var r=n(2678),i=n(9534)(),o=n(2028),a=Object,s=o("Array.prototype.push"),l=o("Object.prototype.propertyIsEnumerable"),c=i?Object.getOwnPropertySymbols:null;e.exports=function(e,t){if(null==e)throw new TypeError("target must be an object");var n=a(e);if(1===arguments.length)return n;for(var o=1;o<arguments.length;++o){var u=a(arguments[o]),h=r(u),d=i&&(Object.getOwnPropertySymbols||c);if(d)for(var p=d(u),f=0;f<p.length;++f){var m=p[f];l(u,m)&&s(h,m)}for(var g=0;g<h.length;++g){var v=h[g];if(l(u,v)){var b=u[v];n[v]=b}}}return n}},7095:(e,t,n)=>{"use strict";var r=n(5590);e.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1}()?r:Object.assign:r}},7163:e=>{"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2409:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.popupWindowBorder=t.popupSupported=t.isSafari=t.gerWindowBorder=void 0;const i=r(n(5)),o="object"===typeof window?i.default.getParser(window.navigator.userAgent):null;function a(){switch(null===o||void 0===o?void 0:o.getOSName(!0)){case"windows":{let e;switch(o.getBrowserName(!0)){case"firefox":e=[68,8,8];break;case"microsoft edge":e=[62,8,8];break;default:e=[60,8,8]}return window.devicePixelRatio>1&&(e[0]-=2,e[1]-=1,e[2]-=1),e}case"macos":switch(o.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}t.gerWindowBorder=a,t.isSafari="safari"===(null===o||void 0===o?void 0:o.getBrowserName(!0)),t.popupSupported="desktop"===(null===o||void 0===o?void 0:o.getPlatformType()),t.popupWindowBorder=a()},8420:(e,t,n)=>{"use strict";t.y=t.OS=void 0;const r=n(2409);function i(e){let[t,n,i]=r.gerWindowBorder();e.outerWidth===e.screen.availWidth&&(n=0,i=0);let o=(e.outerWidth-2*n)/e.innerWidth,a=(e.outerHeight-t-i)/e.innerHeight,s=Math.min(a,o);return s=s>1.8?Math.round(s):s>.73?Math.round(20*s)/20:2/Math.round(2/s),s}function o(e){let t=e?i(e):1,n=e.outerWidth-e.innerWidth*t>>1,r=Math.round(e.outerHeight-e.innerHeight*t);return n>32?n=8:r-=n,[n,r,t]}class a{init(e,t,n,r,i,o,a,s){this.scaleX=a/n,this.scaleY=s/r,this.offsetX=i-e*this.scaleX,this.offsetY=o-t*this.scaleY}map(e){return{x:e.x*this.scaleX+this.offsetX,y:e.y*this.scaleY+this.offsetY}}revertMap(e){return{x:(e.x-this.offsetX)/this.scaleX,y:(e.y-this.offsetY)/this.scaleY}}}t.OS=function e(t,n){if(!t)return null;let r,i=t.getBoundingClientRect(),s=new a;if(s.init(0,0,t.offsetWidth,t.offsetHeight,i.x,i.y,i.width,i.height),n){let{x:e,y:t}=s.map({x:n.left,y:n.top}),{x:i,y:o}=s.map({x:n.left+n.width,y:n.top+n.height});r={left:e,top:t,width:i-e,height:o-t}}else r={left:i.left,top:i.top,width:i.width,height:i.height};let l=t.ownerDocument.defaultView;if(!l)return i;if(l.frameElement)return e(l.frameElement,r);let[c,u,h]=o(l);return 1!==h&&(r.left*=h,r.top*=h,r.width*=h,r.height*=h),r.left+=l.screenX+c,r.top+=l.screenY+u,r},t.y=function e(t,n,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!t)return null;if(n){if(i={left:n.screenX,top:n.screenY,width:n.outerWidth,height:n.outerHeight},s){const[e,t,n]=r.popupWindowBorder;i.left+=t,i.top+=e,i.width-=2*t,i.height-=e+n}}else if(!i)return null;let l=t.ownerDocument.defaultView;if(!l)return i;if(l.frameElement)i=e(l.frameElement,null,i);else{let[e,t,n]=o(l);i.left-=l.screenX+e,i.top-=l.screenY+t,1!==n&&(i.left/=n,i.top/=n,i.width/=n,i.height/=n)}let c,u=t.getBoundingClientRect(),h=new a;h.init(0,0,t.offsetWidth,t.offsetHeight,u.x,u.y,u.width,u.height);let{x:d,y:p}=h.revertMap({x:i.left,y:i.top}),{x:f,y:m}=h.revertMap({x:i.left+i.width,y:i.top+i.height});return c={left:d,top:p,width:f-d,height:m-p},c}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D,j=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case T:return"Profiler";case M:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Me=null;function Te(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){Se?Me?Me.push(e):Me=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Me;if(Me=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Re(){}var ke=!1;function Pe(e,t,n){if(ke)return e(t,n);ke=!0;try{return Ae(e,t,n)}finally{ke=!1,(null!==Se||null!==Me)&&(Re(),Ce())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Oe=!1}function Ie(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,je=null,Fe=!1,ze=null,Be={onError:function(e){De=!0,je=e}};function Ue(e,t,n,r,i,o,a,s,l){De=!1,je=null,Ie.apply(Be,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Mt,Tt,Et=!1,Ct=[],At=null,Rt=null,kt=null,Pt=new Map,Lt=new Map,Ot=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=bi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Et=!1,null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==kt&&Ft(kt)&&(kt=null),Pt.forEach(zt),Lt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Gt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Ut(At,e),null!==Rt&&Ut(Rt,e),null!==kt&&Ut(kt,e),Pt.forEach(t),Lt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=yt,o=Vt.transition;Vt.transition=null;try{yt=1,qt(e,t,n,r)}finally{yt=i,Vt.transition=o}}function $t(e,t,n,r){var i=yt,o=Vt.transition;Vt.transition=null;try{yt=4,qt(e,t,n,r)}finally{yt=i,Vt.transition=o}}function qt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),It(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Dt(At,e,t,n,r,i),!0;case"dragenter":return Rt=Dt(Rt,e,t,n,r,i),!0;case"mouseover":return kt=Dt(kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Dt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lt.set(o,Dt(Lt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=yi(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=bi(e=we(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=j({},cn,{view:0,detail:0}),dn=on(hn),pn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(j({},pn,{dataTransfer:0})),gn=on(j({},hn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),xn=on(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return Mn}var En=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(En),An=on(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),kn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Pn),On=[9,13,27,32],Nn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var Dn=u&&"TextEvent"in window&&!In,jn=u&&(!Nn||In&&8<In&&11>=In),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=$r(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,qn=null;function Xn(e){Fr(e,0)}function Yn(e){if(q(xi(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),qn=$n=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Wn(t,qn,e,we(e)),Pe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=$r(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Mr={};function Tr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mr)return Sr[e]=n[t];return e}u&&(Mr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Tr("animationend"),Cr=Tr("animationiteration"),Ar=Tr("animationstart"),Rr=Tr("transitionend"),kr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){kr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Nr=Pr[Or];Lr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Lr(Er,"onAnimationEnd"),Lr(Cr,"onAnimationIteration"),Lr(Ar,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(o(198));var u=je;De=!1,je=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var i=Wt;break;case 4:i=$t;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=bi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=o,i=we(n),a=[];e:{var s=kr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Er:case Cr:case Ar:l=vn;break;case Rr:l=kn;break;case"scroll":l=dn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Le(f,d))&&u.push(Wr(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(h=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==c?s:xi(c),(s=new u(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,bi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=qr(p))f++;for(p=0,m=d;m;m=qr(m))p++;for(;0<f-p;)u=qr(u),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Hn(s))if(Jn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var b;if(Nn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gn&&(b=en()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Gn=!0)),0<(v=$r(r,y)).length&&(y=new xn(y,e,null,n,i),a.push({event:y,listeners:v}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Nn&&Bn(e,t)?(e=en(),Zt=Qt=Jt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=b))}Fr(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Le(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Le(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Le(n,o))&&a.unshift(Wr(n,l,s)):i||null!=(l=Le(n,o))&&a.push(Wr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function bi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[pi]||null}var _i=[],Si=-1;function Mi(e){return{current:e}}function Ti(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ei(e,t){Si++,_i[Si]=e.current,e.current=t}var Ci={},Ai=Mi(Ci),Ri=Mi(!1),ki=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ri),Ti(Ai)}function Ni(e,t,n){if(Ai.current!==Ci)throw Error(o(168));Ei(Ai,t),Ei(Ri,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return j({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,ki=Ai.current,Ei(Ai,e),Ei(Ri,Ri.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ii(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ri),Ti(Ai),Ei(Ai,e)):Ti(Ri),Ei(Ri,n)}var Fi=null,zi=!1,Bi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Gi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=yt;try{var n=Fi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe(Ze,Gi),i}finally{yt=t,Bi=!1}}return null}var Vi=[],Hi=0,Wi=null,$i=0,qi=[],Xi=0,Yi=null,Ki=1,Ji="";function Qi(e,t){Vi[Hi++]=$i,Vi[Hi++]=Wi,Wi=e,$i=t}function Zi(e,t,n){qi[Xi++]=Ki,qi[Xi++]=Ji,qi[Xi++]=Yi,Yi=e;var r=Ki;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Ki=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Qi(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=Vi[--Hi],Vi[Hi]=null,$i=Vi[--Hi],Vi[Hi]=null;for(;e===Yi;)Yi=qi[--Xi],qi[Xi]=null,Ji=qi[--Xi],qi[Xi]=null,Ki=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ki,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&yo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Nc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case L:return d(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Ic(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case L:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||I(n))return null!==i?null:h(e,t,n,r,null);bo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||I(r))return h(t,e=e.get(n)||null,r,i,null);bo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(i,h),io&&Qi(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Qi(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Qi(i,m),c}function g(i,s,l,c){var u=I(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(i,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y,m=v}if(b.done)return n(i,m),io&&Qi(i,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=d(i,b.value,c))&&(s=a(b,s,g),null===h?u=b:h.sibling=b,h=b);return io&&Qi(i,g),u}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=f(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=a(b,s,g),null===h?u=b:h.sibling=b,h=b);return e&&m.forEach((function(e){return t(i,e)})),io&&Qi(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&yo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Ic(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Nc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case _:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case L:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(I(a))return g(r,o,a,l);bo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=jc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=xo(!0),_o=xo(!1),So=Mi(null),Mo=null,To=null,Eo=null;function Co(){Eo=To=Mo=null}function Ao(e){var t=So.current;Ti(So),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){Mo=e,Eo=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===Mo)throw Error(o(308));To=e,Mo.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Lo=null;function Oo(e){null===Lo?Lo=[e]:Lo.push(e)}function No(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Io(e,r)}function Io(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Io(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Io(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Go(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=j({},h,d);break e;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Wo={},$o=Mi(Wo),qo=Mi(Wo),Xo=Mi(Wo);function Yo(e){if(e===Wo)throw Error(o(174));return e}function Ko(e,t){switch(Ei(Xo,t),Ei(qo,e),Ei($o,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti($o),Ei($o,t)}function Jo(){Ti($o),Ti(qo),Ti(Xo)}function Qo(e){Yo(Xo.current);var t=Yo($o.current),n=le(t,e.type);t!==n&&(Ei(qo,e),Ei($o,n))}function Zo(e){qo.current===e&&(Ti($o),Ti(qo))}var ea=Mi(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ha)}if(ia.current=Qa,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==da;return da=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Dl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Dl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ys=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ma(e,t){var n=sa,r=ya(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ys=!0),r=r.queue,Da(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(o(349));0!==(30&aa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&Ra(e)}function Ca(e,t,n){return n((function(){Aa(t)&&Ra(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=Io(e,1);null!==t&&nc(t,e,1,-1)}function ka(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function La(){return ya().memoizedState}function Oa(e,t,n,r){var i=ba();sa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Na(e,t,n,r){var i=ya();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(t,n,o,r))}sa.flags|=e,i.memoizedState=Pa(1|t,n,o,r)}function Ia(e,t){return Oa(8390656,8,e,t)}function Da(e,t){return Na(2048,8,e,t)}function ja(e,t){return Na(4,2,e,t)}function Fa(e,t){return Na(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4,4,za.bind(null,t,e),n)}function Ua(){}function Ga(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Dl|=n,e.baseState=!0),t)}function Wa(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{yt=n,oa.transition=r}}function $a(){return ya().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ka(t,n);else if(null!==(n=No(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Xa(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ka(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Oo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=No(e,t,i,r))&&(nc(n,e,r,i=ec()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Qa={readContext:Po,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Po,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:ka,useDebugValue:Ua,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Wa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ba();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rl)throw Error(o(349));0!==(30&aa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ia(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Rl.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Ki&~(1<<32-at(Ki)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Po,useCallback:Ga,useContext:Po,useEffect:Da,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Va,useReducer:wa,useRef:La,useState:function(){return wa(xa)},useDebugValue:Ua,useDeferredValue:function(e){return Ha(ya(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ma,useId:$a,unstable_isNewReconciler:!1},ts={readContext:Po,useCallback:Ga,useContext:Po,useEffect:Da,useImperativeHandle:Ba,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Va,useReducer:_a,useRef:La,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ma,useId:$a,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=zo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bo(e,i,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Li(t)?ki:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Li(t)?ki:Ai.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),hs(0,t)},n}function fs(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,ys=!1;function xs(e,t,n,r){t.child=null===e?_o(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=ga(e,t,n,r,o,i),n=va(),null===e||ys?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Oc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ys=!0)}}return Es(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ol,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ol,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ei(Ol,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ei(Ol,Ll),Ll|=r;return xs(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var o=Li(n)?ki:Ai.current;return o=Pi(t,o),ko(t,i),n=ga(e,t,n,r,o,i),r=va(),null===e||ys?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Cs(e,t,n,r,i){if(Li(n)){var o=!0;Di(t)}else o=!1;if(ko(t,i),null===t.stateNode)Vs(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Li(n)?ki:Ai.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Do=!1;var d=t.memoizedState;a.state=d,Vo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Ri.current||Do?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Do||os(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Li(n)?ki:Ai.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Do=!1,d=t.memoizedState,a.state=d,Vo(t,r,a,i);var f=t.memoizedState;s!==h||d!==f||Ri.current||Do?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(c=Do||os(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),Hs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),Ko(e,t.containerInfo)}function ks(e,t,n,r,i){return fo(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Ps,Ls,Os,Ns,Is={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Dc(l,i,0,null),e=Ic(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Is,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(a=Ic(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Is,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Rl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Io(e,i),nc(r,e,i,-1))}return mc(),zs(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Ki,qi[Xi++]=Ji,qi[Xi++]=Yi,Ki=e.id,Ji=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Oc(r,s):(s=Ic(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Is,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ro(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(t),null;case 1:case 17:return Li(t.type)&&Oi(),$s(t),null;case 3:return r=t.stateNode,Jo(),Ti(Ri),Ti(Ai),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ls(e,t),$s(t),null;case 5:Zo(t);var i=Yo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return $s(t),null}if(e=Yo($o.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in be(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":$(r),Z(r,a,!0);break;case"textarea":$(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)zr(Ir[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":K(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in be(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $s(t),null;case 6:if(e&&null!=t.stateNode)Ns(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo($o.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return $s(t),null;case 13:if(Ti(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$s(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),$s(t),null);case 4:return Jo(),Ls(e,t),null===e&&Gr(t.stateNode.containerInfo),$s(t),null;case 10:return Ao(t.type._context),$s(t),null;case 19:if(Ti(ea),null===(a=t.memoizedState))return $s(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Gl&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return $s(t),null}else 2*Je()-a.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Ei(ea,r?1&n|2:1&n),t):($s(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&($s(t),6&t.subtreeFlags&&(t.flags|=8192)):$s(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Li(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Ti(Ri),Ti(Ai),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ti(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ea),null;case 4:return Jo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo($o.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Mc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Mc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ks||Zs(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ks&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Mc(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Mc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Mc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Mc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Mc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),ye(l,s);var u=ye(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):y(i,h,d,u)}switch(l){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Mc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Mc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Mc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||h,ml(t,e),Ks=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Mc(r,n,g)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Qs=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Mc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Mc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Mc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qs=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Qs=l):_l(i);for(;null!==o;)Qs=o,yl(o,t,n),o=o.sibling;Qs=i,Ys=s,Ks=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Gt(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&il(t)}catch(p){Mc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function _l(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Mc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Mc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Mc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Mc(t,a,l)}}}catch(l){Mc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Sl,Ml=Math.ceil,Tl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Al=0,Rl=null,kl=null,Pl=0,Ll=0,Ol=Mi(0),Nl=0,Il=null,Dl=0,jl=0,Fl=0,zl=null,Bl=null,Ul=0,Gl=1/0,Vl=null,Hl=!1,Wl=null,$l=null,ql=!1,Xl=null,Yl=0,Kl=0,Jl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Al)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,r){if(50<Kl)throw Kl=0,Jl=null,Error(o(185));vt(e,n,r),0!==(2&Al)&&e===Rl||(e===Rl&&(0===(2&Al)&&(jl|=n),4===Nl&&sc(e,Pl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Gl=Je()+500,zi&&Gi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Rl?Pl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai((function(){0===(6&Al)&&Gi()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,Zl=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var a=fc();for(Rl===e&&Pl===t||(Vl=null,Gl=Je()+500,dc(e,t));;)try{bc();break}catch(l){pc(e,l)}Co(),Tl.current=a,Al=i,null!==kl?t=0:(Rl=null,Pl=0,t=Nl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Il,dc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=ft(e))&&(r=a,t=oc(e,a))),1===t))throw n=Il,dc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Bl,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Bl,Vl),t);break}wc(e,Bl,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ml(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Bl,Vl),r);break}wc(e,Bl,Vl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(o(327));_c();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Il,dc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Vl),rc(e,Je()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Gl=Je()+500,zi&&Gi())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&_c();var t=Al;Al|=1;var n=Cl.transition,r=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=r,Cl.transition=n,0===(6&(Al=t))&&Gi()}}function hc(){Ll=Ol.current,Ti(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Jo(),Ti(Ri),Ti(Ai),ra();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Ti(ea);break;case 10:Ao(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rl=e,kl=e=Oc(e.current,null),Pl=Ll=t,Nl=0,Il=null,Fl=jl=Dl=0,Bl=zl=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(r=(n=Lo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Lo=null}return e}function pc(e,t){for(;;){var n=kl;try{if(Co(),ia.current=Qa,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,El.current=null,null===n||null===n.return){Nl=1,Il=t,kl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Nl&&(Nl=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Go(a,ps(0,c,t));break e;case 1:l=c;var b=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===$l||!$l.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Go(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=Qa,null===e?Qa:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Rl||0===(268435455&Dl)&&0===(268435455&jl)||sc(Rl,Pl)}function gc(e,t){var n=Al;Al|=2;var r=fc();for(Rl===e&&Pl===t||(Vl=null,dc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Co(),Al=n,Tl.current=r,null!==kl)throw Error(o(261));return Rl=null,Pl=0,Nl}function vc(){for(;null!==kl;)yc(kl)}function bc(){for(;null!==kl&&!Ye();)yc(kl)}function yc(e){var t=Sl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?xc(e):kl=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ll)))return void(kl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Nl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Nl&&(Nl=5)}function wc(e,t,n){var r=yt,i=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,r){do{_c()}while(null!==Xl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Rl&&(kl=Rl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Rc(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=yt;yt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ei=Ht,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=s),p===a&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Mc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ke(),Al=l,yt=s,Cl.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Yl=i),a=e.pendingLanes,0===a&&($l=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Gi()}(e,t,n,r)}finally{Cl.transition=i,yt=r}return null}function _c(){if(null!==Xl){var e=xt(Yl),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var p=(h=Qs).sibling,f=h.return;if(ol(h),h===u){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Qs=b;break e}Qs=a.return}}var y=e.current;for(Qs=y;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=y;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Mc(l,l.return,_)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(Al=i,Gi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{yt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Bo(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Mc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=Bo(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Pl&n)===n&&(4===Nl||3===Nl&&(130023424&Pl)===Pl&&500>Je()-Ul?dc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Io(e,t))&&(vt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ec(e,n)}function Rc(e,t){return qe(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new kc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ic(n.children,i,a,t);case M:s=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=a,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=a,e;case k:return(e=Pc(19,n,t,i)).elementType=k,e.lanes=a,e;case O:return Dc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case C:s=9;break e;case A:s=11;break e;case P:s=14;break e;case L:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ic(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function Uc(e){if(!e)return Ci;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ii(e,n,t)}return t}function Gc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=Uc(null),n=e.current,(o=zo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(i,t,a))&&(nc(e,i,a,o),Uo(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),fo();break;case 5:Qo(t);break;case 1:Li(t.type)&&Di(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ei(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ei(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Hs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,io&&0!==(1048576&t.flags)&&Zi(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);ko(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Vo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=ks(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Qo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ts(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return js(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ei(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ri.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ro(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ro(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Po(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),_s(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,Li(r)?(e=!0,Di(t)):e=!1,ko(t,n),as(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Gs(e,t,n);case 22:return Ms(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hc(a);s.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}var a=Gc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fi]=a.current,Gr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fi]=l.current,Gr(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),rc(t,Je()),0===(6&Al)&&(Gl=Je()+500,Gi()))}break;case 13:uc((function(){var t=Io(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),$c(e,1)}},_t=function(e){if(13===e.tag){var t=Io(e,134217728);if(null!==t)nc(t,e,134217728,ec());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Io(e,t);if(null!==n)nc(n,e,t,ec());$c(e,t)}},Mt=function(){return yt},Tt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));q(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Re=uc;var eu={usingClientEntryPoint:!1,Events:[yi,xi,wi,Ee,Ce,cc]},tu={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,a,s),e[fi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=h,t.Memo=f,t.isFragment=function(e){return v(e)===o},t.isMemo=function(e){return v(e)===f}},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,m(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!M.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(a,t,i,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=R(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,i,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},O={transition:null},N={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!M.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,O(_);else{var t=r(u);null!==t&&N(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,b(E),E=-1),f=!0;var o=p;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&N(w,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,T=null,E=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function k(){if(null!==T){var e=t.unstable_now();A=e;var n=!0;try{n=T(!0,e)}finally{n?S():(M=!1,T=null)}}else M=!1}if("function"===typeof y)S=function(){y(k)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=k,S=function(){L.postMessage(null)}}else S=function(){v(k,0)};function O(e){T=e,M||(M=!0,S())}function N(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,N(w,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,O(_))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},5438:(e,t,n)=>{"use strict";var r=n(2),i=n(4992),o=n(2101)(),a=n(5558),s=n(4902),l=r("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new s("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||l(t)!==t)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,c=!0;if("length"in e&&a){var u=a(e,"length");u&&!u.configurable&&(r=!1),u&&!u.writable&&(c=!1)}return(r||c||!n)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},7324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},8122:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.smallestFlagged=t.deheapSort=t.buildCandidates=t.uncheckedHeapPush=t.heapPush=t.rejectionSample=t.makeHeap=void 0;var a=o(n(9783));function s(e,t){var n=function(n){return a.empty(e).map((function(){return a.filled(t,n)}))},r=[];return r.push(n(-1)),r.push(n(1/0)),r.push(n(0)),r}function l(e,t,n,r,i){t=Math.floor(t);var o=e[0][t],a=e[1][t];e[2][t];if(n>=a[0])return 0;for(var s=0;s<o.length;s++)if(r===o[s])return 0;return c(e,t,n,r,i)}function c(e,t,n,r,i){var o=e[0][t],a=e[1][t],s=e[2][t];if(n>=a[0])return 0;a[0]=n,o[0]=r,s[0]=i;for(var l=0,c=0;;){var u=2*l+1,h=u+1,d=e[0][0].length;if(u>=d)break;if(h>=d){if(!(a[u]>n))break;c=u}else if(a[u]>=a[h]){if(!(n<a[u]))break;c=u}else{if(!(n<a[h]))break;c=h}a[l]=a[c],o[l]=o[c],s[l]=s[c],l=c}return a[l]=n,o[l]=r,s[l]=i,1}function u(e,t,n,r){for(;2*r+1<n;){var i=2*r+1,o=i+1,a=r;if(e[a]<e[i]&&(a=i),o<n&&e[a]<e[o]&&(a=o),a===r)break;var s=e[r];e[r]=e[a],e[a]=s;var l=t[r];t[r]=t[a],t[a]=l,r=a}}t.makeHeap=s,t.rejectionSample=function(e,t,n){for(var r=a.zeros(e),i=0;i<e;i++){for(var o=!0,s=0;o;){s=a.tauRandInt(t,n);for(var l=!1,c=0;c<i;c++)if(s===r[c]){l=!0;break}l||(o=!1)}r[i]=s}return r},t.heapPush=l,t.uncheckedHeapPush=c,t.buildCandidates=function(e,t,n,r,i){for(var o=s(t,r),c=0;c<t;c++)for(var u=0;u<n;u++)if(!(e[0][c][u]<0)){var h=e[0][c][u],d=e[2][c][u],p=a.tauRand(i);l(o,c,p,h,d),l(o,h,p,c,d),e[2][c][u]=0}return o},t.deheapSort=function(e){for(var t=e[0],n=e[1],r=0;r<t.length;r++)for(var i=t[r],o=n[r],a=0;a<i.length-1;a++){var s=i.length-a-1,l=o.length-a-1,c=i[0];i[0]=i[s],i[s]=c;var h=o[0];o[0]=o[l],o[l]=h,u(o,i,l,0)}return{indices:t,weights:n}},t.smallestFlagged=function(e,t){for(var n=e[0][t],r=e[1][t],i=e[2][t],o=1/0,a=-1,s=0;s>n.length;s++)1===i[s]&&r[s]<o&&(o=r[s],a=s);return a>=0?(i[a]=0,Math.floor(n[a])):-1}},742:(e,t,n)=>{"use strict";var r=n(2919);Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return r.UMAP}})},9589:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getCSR=t.normalize=t.eliminateZeros=t.multiplyScalar=t.maximum=t.subtract=t.add=t.pairwiseMultiply=t.identity=t.transpose=t.SparseMatrix=void 0;var c=a(n(9783)),u=function(){function e(e,t,n,r){if(this.entries=new Map,this.nRows=0,this.nCols=0,e.length!==t.length||e.length!==n.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=r[0],this.nCols=r[1];for(var i=0;i<n.length;i++){var o=e[i],a=t[i];this.checkDims(o,a);var s=this.makeKey(o,a);this.entries.set(s,{value:n[i],row:o,col:a})}}return e.prototype.makeKey=function(e,t){return e+":"+t},e.prototype.checkDims=function(e,t){if(!(e<this.nRows&&t<this.nCols))throw new Error("row and/or col specified outside of matrix dimensions")},e.prototype.set=function(e,t,n){this.checkDims(e,t);var r=this.makeKey(e,t);this.entries.has(r)?this.entries.get(r).value=n:this.entries.set(r,{value:n,row:e,col:t})},e.prototype.get=function(e,t,n){void 0===n&&(n=0),this.checkDims(e,t);var r=this.makeKey(e,t);return this.entries.has(r)?this.entries.get(r).value:n},e.prototype.getAll=function(e){void 0===e&&(e=!0);var t=[];return this.entries.forEach((function(e){t.push(e)})),e&&t.sort((function(e,t){return e.row===t.row?e.col-t.col:e.row-t.row})),t},e.prototype.getDims=function(){return[this.nRows,this.nCols]},e.prototype.getRows=function(){return Array.from(this.entries,(function(e){var t=s(e,2);t[0];return t[1].row}))},e.prototype.getCols=function(){return Array.from(this.entries,(function(e){var t=s(e,2);t[0];return t[1].col}))},e.prototype.getValues=function(){return Array.from(this.entries,(function(e){var t=s(e,2);t[0];return t[1].value}))},e.prototype.forEach=function(e){this.entries.forEach((function(t){return e(t.value,t.row,t.col)}))},e.prototype.map=function(t){var n=[];this.entries.forEach((function(e){n.push(t(e.value,e.row,e.col))}));var r=[this.nRows,this.nCols];return new e(this.getRows(),this.getCols(),n,r)},e.prototype.toArray=function(){var e=this,t=c.empty(this.nRows).map((function(){return c.zeros(e.nCols)}));return this.entries.forEach((function(e){t[e.row][e.col]=e.value})),t},e}();t.SparseMatrix=u,t.transpose=function(e){var t=[],n=[],r=[];e.forEach((function(e,i,o){t.push(i),n.push(o),r.push(e)}));var i=[e.nCols,e.nRows];return new u(n,t,r,i)},t.identity=function(e){for(var t=s(e,1)[0],n=new u([],[],[],e),r=0;r<t;r++)n.set(r,r,1);return n},t.pairwiseMultiply=function(e,t){return d(e,t,(function(e,t){return e*t}))},t.add=function(e,t){return d(e,t,(function(e,t){return e+t}))},t.subtract=function(e,t){return d(e,t,(function(e,t){return e-t}))},t.maximum=function(e,t){return d(e,t,(function(e,t){return e>t?e:t}))},t.multiplyScalar=function(e,t){return e.map((function(e){return e*t}))},t.eliminateZeros=function(e){for(var t=new Set,n=e.getValues(),r=e.getRows(),i=e.getCols(),o=0;o<n.length;o++)0===n[o]&&t.add(o);var a=function(e,n){return!t.has(n)},s=n.filter(a),l=r.filter(a),c=i.filter(a);return new u(l,c,s,e.getDims())},t.normalize=function(e,t){var n,r;void 0===t&&(t="l2");var i=h[t],o=new Map;e.forEach((function(e,t,n){var r=o.get(t)||[];r.push(n),o.set(t,r)}));var a=new u([],[],[],e.getDims()),s=function(t){for(var n=o.get(t).sort(),r=n.map((function(n){return e.get(t,n)})),s=i(r),l=0;l<s.length;l++)a.set(t,n[l],s[l])};try{for(var c=l(o.keys()),d=c.next();!d.done;d=c.next()){s(d.value)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return a};var h=((r={}).max=function(e){for(var t=-1/0,n=0;n<e.length;n++)t=e[n]>t?e[n]:t;return e.map((function(e){return e/t}))},r.l1=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return e.map((function(e){return e/t}))},r.l2=function(e){for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return e.map((function(e){return Math.sqrt(Math.pow(e,2)/t)}))},r);function d(e,t,n){for(var r=new Set,i=[],o=[],a=[],s=function(r,s){i.push(r),o.push(s);var l=n(e.get(r,s),t.get(r,s));a.push(l)},l=e.getValues(),c=e.getRows(),h=e.getCols(),d=0;d<l.length;d++){var p=(v=c[d])+":"+(b=h[d]);r.add(p),s(v,b)}var f=t.getValues(),m=t.getRows(),g=t.getCols();for(d=0;d<f.length;d++){var v,b;p=(v=m[d])+":"+(b=g[d]);r.has(p)||s(v,b)}var y=[e.nRows,e.nCols];return new u(i,o,a,y)}t.getCSR=function(e){var t=[];e.forEach((function(e,n,r){t.push({value:e,row:n,col:r})})),t.sort((function(e,t){return e.row===t.row?e.col-t.col:e.row-t.row}));for(var n=[],r=[],i=[],o=-1,a=0;a<t.length;a++){var s=t[a],l=s.row,c=s.col,u=s.value;l!==o&&(o=l,i.push(a)),n.push(c),r.push(u)}return{indices:n,values:r,indptr:i}}},5433:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.initializeSearch=t.makeInitializedNNSearch=t.makeInitializations=t.makeNNDescent=void 0;var s=o(n(8122)),l=o(n(9589)),c=o(n(1248)),u=o(n(9783));t.makeNNDescent=function(e,t){return function(n,r,i,o,a,l,c,h){void 0===o&&(o=10),void 0===a&&(a=50),void 0===l&&(l=.001),void 0===c&&(c=.5),void 0===h&&(h=!0);for(var d=n.length,p=s.makeHeap(n.length,i),f=0;f<n.length;f++)for(var m=s.rejectionSample(i,n.length,t),g=0;g<m.length;g++){var v=e(n[f],n[m[g]]);s.heapPush(p,f,v,m[g],1),s.heapPush(p,m[g],v,f,1)}if(h)for(var b=0;b<r.length;b++)for(f=0;f<r[b].length&&!(r[b][f]<0);f++)for(g=f+1;g<r[b].length&&!(r[b][g]<0);g++){v=e(n[r[b][f]],n[r[b][g]]);s.heapPush(p,r[b][f],v,r[b][g],1),s.heapPush(p,r[b][g],v,r[b][f],1)}for(b=0;b<o;b++){var y=s.buildCandidates(p,d,i,a,t),x=0;for(f=0;f<d;f++)for(g=0;g<a;g++){var w=Math.floor(y[0][f][g]);if(!(w<0||u.tauRand(t)<c))for(var _=0;_<a;_++){var S=Math.floor(y[0][f][_]),M=y[2][f][g],T=y[2][f][_];if(!(S<0||!M&&!T)){v=e(n[w],n[S]);x+=s.heapPush(p,w,v,S,1),x+=s.heapPush(p,S,v,w,1)}}}if(x<=l*i*n.length)break}return s.deheapSort(p)}},t.makeInitializations=function(e){return{initFromRandom:function(t,n,r,i,o){for(var a=0;a<r.length;a++)for(var l=u.rejectionSample(t,n.length,o),c=0;c<l.length;c++)if(!(l[c]<0)){var h=e(n[l[c]],r[a]);s.heapPush(i,a,h,l[c],1)}},initFromTree:function(t,n,r,i,o){for(var a=0;a<r.length;a++)for(var l=c.searchFlatTree(r[a],t,o),u=0;u<l.length;u++){if(l[u]<0)return;var h=e(n[l[u]],r[a]);s.heapPush(i,a,h,l[u],1)}}}},t.makeInitializedNNSearch=function(e){return function(t,n,r,i){for(var o,c,u=l.getCSR(n),h=u.indices,d=u.indptr,p=0;p<i.length;p++)for(var f=new Set(r[0][p]);;){var m=s.smallestFlagged(r,p);if(-1===m)break;var g=h.slice(d[m],d[m+1]);try{for(var v=(o=void 0,a(g)),b=v.next();!b.done;b=v.next()){var y=b.value;if(y!==m&&-1!==y&&!f.has(y)){var x=e(t[y],i[p]);s.uncheckedHeapPush(r,p,x,y,1),f.add(y)}}}catch(w){o={error:w}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}}return r}},t.initializeSearch=function(e,t,n,r,i,o,l){var c,u,h=s.makeHeap(n.length,r);if(i(r,t,n,h,l),e)try{for(var d=a(e),p=d.next();!p.done;p=d.next()){o(p.value,t,n,h,l)}}catch(f){c={error:f}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}return h}},1248:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},l=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.searchFlatTree=t.makeLeafArray=t.makeForest=t.FlatTree=void 0;var c=o(n(9783)),u=function(e,t,n,r){this.hyperplanes=e,this.offsets=t,this.children=n,this.indices=r};function h(e,t,n,r,i){if(void 0===n&&(n=30),t.length>n){var o=function(e,t,n){var r=e[0].length,i=c.tauRandInt(t.length,n),o=c.tauRandInt(t.length,n);o=(o+=i===o?1:0)%t.length;for(var a=t[i],s=t[o],l=0,u=c.zeros(r),h=0;h<u.length;h++)u[h]=e[a][h]-e[s][h],l-=u[h]*(e[a][h]+e[s][h])/2;var d=0,p=0,f=c.zeros(t.length);for(h=0;h<t.length;h++){for(var m=l,g=0;g<r;g++)m+=u[g]*e[t[h]][g];0===m?(f[h]=c.tauRandInt(2,n),0===f[h]?d+=1:p+=1):m>0?(f[h]=0,d+=1):(f[h]=1,p+=1)}var v=c.zeros(d),b=c.zeros(p);d=0,p=0;for(h=0;h<f.length;h++)0===f[h]?(v[d]=t[h],d+=1):(b[p]=t[h],p+=1);return{indicesLeft:v,indicesRight:b,hyperplane:u,offset:l}}(e,t,i),a=o.indicesLeft,s=o.indicesRight,l=o.hyperplane,u=o.offset;return{leftChild:h(e,a,n,r+1,i),rightChild:h(e,s,n,r+1,i),isLeaf:!1,hyperplane:l,offset:u}}return{indices:t,isLeaf:!0}}function d(e,t,n,r,i,o,a){var l;if(e.isLeaf)return r[o][0]=-a,(l=i[a]).splice.apply(l,s([0,e.indices.length],e.indices)),{nodeNum:o,leafNum:a+=1};t[o]=e.hyperplane,n[o]=e.offset,r[o][0]=o+1;var c=o,u=d(e.leftChild,t,n,r,i,o+1,a);return o=u.nodeNum,a=u.leafNum,r[c][1]=o+1,{nodeNum:(u=d(e.rightChild,t,n,r,i,o+1,a)).nodeNum,leafNum:u.leafNum}}function p(e){return e.isLeaf?1:1+p(e.leftChild)+p(e.rightChild)}function f(e){return e.isLeaf?1:f(e.leftChild)+f(e.rightChild)}function m(e,t,n,r){for(var i=t,o=0;o<n.length;o++)i+=e[o]*n[o];return 0===i?c.tauRandInt(2,r):i>0?0:1}t.FlatTree=u,t.makeForest=function(e,t,n,r){var i=Math.max(10,t);return c.range(n).map((function(t,n){return function(e,t,n,r){void 0===t&&(t=30);var i=c.range(e.length),o=h(e,i,t,n,r);return o}(e,i,n,r)})).map((function(e){return function(e,t){var n=p(e),r=f(e),i=c.range(n).map((function(){return c.zeros(e.hyperplane?e.hyperplane.length:0)})),o=c.zeros(n),a=c.range(n).map((function(){return[-1,-1]})),s=c.range(r).map((function(){return c.range(t).map((function(){return-1}))}));return d(e,i,o,a,s,0,0),new u(i,o,a,s)}(e,i)}))},t.makeLeafArray=function(e){var t,n;if(e.length>0){var r=[];try{for(var i=l(e),o=i.next();!o.done;o=i.next()){var a=o.value;r.push.apply(r,s(a.indices))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return[[-1]]},t.searchFlatTree=function(e,t,n){for(var r=0;t.children[r][0]>0;){r=0===m(t.hyperplanes[r],t.offsets[r],e,n)?t.children[r][0]:t.children[r][1]}var i=-1*t.children[r][0];return t.indices[i]}},2919:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initTransform=t.resetLocalConnectivity=t.fastIntersection=t.findABParams=t.cosine=t.euclidean=t.UMAP=void 0;var h=o(n(8122)),d=o(n(9589)),p=o(n(5433)),f=o(n(1248)),m=o(n(9783)),g=u(n(1440)),v=1e-5,b=.001,y=function(){function e(e){var t=this;void 0===e&&(e={}),this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=x,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new w;var n=function(n){void 0!==e[n]&&(t[n]=e[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return e.prototype.fit=function(e){return this.initializeFit(e),this.optimizeLayout(),this.embedding},e.prototype.fitAsync=function(e,t){return void 0===t&&(t=function(){return!0}),a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this.initializeFit(e),[4,this.optimizeLayoutAsync(t)];case 1:return n.sent(),[2,this.embedding]}}))}))},e.prototype.setSupervisedProjection=function(e,t){void 0===t&&(t={}),this.Y=e,this.targetMetric=t.targetMetric||this.targetMetric,this.targetWeight=t.targetWeight||this.targetWeight,this.targetNNeighbors=t.targetNNeighbors||this.targetNNeighbors},e.prototype.setPrecomputedKNN=function(e,t){this.knnIndices=e,this.knnDistances=t},e.prototype.initializeFit=function(e){if(e.length<=this.nNeighbors)throw new Error("Not enough data points ("+e.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===e&&this.isInitialized)return this.getNEpochs();if(this.X=e,!this.knnIndices&&!this.knnDistances){var t=this.nearestNeighbors(e);this.knnIndices=t.knnIndices,this.knnDistances=t.knnDistances}this.graph=this.fuzzySimplicialSet(e,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(e),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),r=n.head,i=n.tail,o=n.epochsPerSample;return this.optimizationState.head=r,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},e.prototype.makeSearchFns=function(){var e=p.makeInitializations(this.distanceFn),t=e.initFromTree,n=e.initFromRandom;this.initFromTree=t,this.initFromRandom=n,this.search=p.makeInitializedNNSearch(this.distanceFn)},e.prototype.makeSearchGraph=function(e){for(var t=this.knnIndices,n=this.knnDistances,r=[e.length,e.length],i=new d.SparseMatrix([],[],[],r),o=0;o<t.length;o++)for(var a=t[o],s=n[o],l=0;l<a.length;l++){var c=a[l],u=s[l];u>0&&i.set(o,c,u)}var h=d.transpose(i);return d.maximum(i,h)},e.prototype.transform=function(e){var t=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var r=Math.floor(this.nNeighbors*this.transformQueueSize);r=Math.min(n.length,r);var i=p.initializeSearch(this.rpForest,n,e,r,this.initFromRandom,this.initFromTree,this.random),o=this.search(n,this.searchGraph,i,e),a=h.deheapSort(o),s=a.indices,l=a.weights;s=s.map((function(e){return e.slice(0,t.nNeighbors)})),l=l.map((function(e){return e.slice(0,t.nNeighbors)}));var c=Math.max(0,this.localConnectivity-1),u=this.smoothKNNDistance(l,this.nNeighbors,c),f=u.sigmas,g=u.rhos,v=this.computeMembershipStrengths(s,l,f,g),b=v.rows,y=v.cols,x=v.vals,w=[e.length,n.length],_=new d.SparseMatrix(b,y,x,w),S=d.normalize(_,"l1"),M=d.getCSR(S),T=e.length,E=C(m.reshape2d(M.indices,T,this.nNeighbors),m.reshape2d(M.values,T,this.nNeighbors),this.embedding),A=this.nEpochs?this.nEpochs/3:_.nRows<=1e4?100:30,R=_.getValues().reduce((function(e,t){return t>e?t:e}),0);_=_.map((function(e){return e<R/A?0:e})),_=d.eliminateZeros(_);var k=this.makeEpochsPerSample(_.getValues(),A),P=_.getRows(),L=_.getCols();return this.assignOptimizationStateParameters({headEmbedding:E,tailEmbedding:this.embedding,head:P,tail:L,currentEpoch:0,nEpochs:A,nVertices:_.getDims()[1],epochsPerSample:k}),this.prepareForOptimizationLoop(),this.optimizeLayout()},e.prototype.processGraphForSupervisedProjection=function(){var e=this.Y,t=this.X;if(e){if(e.length!==t.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var n=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,e,n)}}},e.prototype.step=function(){var e=this.optimizationState.currentEpoch;return e<this.getNEpochs()&&this.optimizeLayoutStep(e),this.optimizationState.currentEpoch},e.prototype.getEmbedding=function(){return this.embedding},e.prototype.nearestNeighbors=function(e){var t,n=this.distanceFn,r=this.nNeighbors,i=p.makeNNDescent(n,this.random),o=5+Math.floor(.5===(t=Math.pow(e.length,.5)/20)?0:Math.round(t)),a=Math.max(5,Math.floor(Math.round(function(e){return Math.log(e)/Math.log(2)}(e.length))));this.rpForest=f.makeForest(e,r,o,this.random);var s=i(e,f.makeLeafArray(this.rpForest),r,a);return{knnIndices:s.indices,knnDistances:s.weights}},e.prototype.fuzzySimplicialSet=function(e,t,n){void 0===n&&(n=1);var r=this,i=r.knnIndices,o=void 0===i?[]:i,a=r.knnDistances,s=void 0===a?[]:a,l=r.localConnectivity,c=this.smoothKNNDistance(s,t,l),u=c.sigmas,h=c.rhos,p=this.computeMembershipStrengths(o,s,u,h),f=p.rows,m=p.cols,g=p.vals,v=[e.length,e.length],b=new d.SparseMatrix(f,m,g,v),y=d.transpose(b),x=d.pairwiseMultiply(b,y),w=d.subtract(d.add(b,y),x),_=d.multiplyScalar(w,n),S=d.multiplyScalar(x,1-n);return d.add(_,S)},e.prototype.categoricalSimplicialSetIntersection=function(e,t,n,r){void 0===r&&(r=1);var i=T(e,t,r,n);return E(i=d.eliminateZeros(i))},e.prototype.smoothKNNDistance=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=64),void 0===i&&(i=1);for(var o=Math.log(t)/Math.log(2)*i,a=m.zeros(e.length),s=m.zeros(e.length),l=0;l<e.length;l++){var c=0,u=1/0,h=1,d=e[l],p=d.filter((function(e){return e>0}));if(p.length>=n){var f=Math.floor(n),g=n-f;f>0?(a[l]=p[f-1],g>v&&(a[l]+=g*(p[f]-p[f-1]))):a[l]=g*p[0]}else p.length>0&&(a[l]=m.max(p));for(var y=0;y<r;y++){for(var x=0,w=1;w<e[l].length;w++){var _=e[l][w]-a[l];x+=_>0?Math.exp(-_/h):1}if(Math.abs(x-o)<v)break;x>o?h=(c+(u=h))/2:(c=h,u===1/0?h*=2:h=(c+u)/2)}if(s[l]=h,a[l]>0){var S=m.mean(d);s[l]<b*S&&(s[l]=b*S)}else{var M=m.mean(e.map(m.mean));s[l]<b*M&&(s[l]=b*M)}}return{sigmas:s,rhos:a}},e.prototype.computeMembershipStrengths=function(e,t,n,r){for(var i=e.length,o=e[0].length,a=m.zeros(i*o),s=m.zeros(i*o),l=m.zeros(i*o),c=0;c<i;c++)for(var u=0;u<o;u++){var h=0;-1!==e[c][u]&&(h=e[c][u]===c?0:t[c][u]-r[c]<=0?1:Math.exp(-(t[c][u]-r[c])/n[c]),a[c*o+u]=c,s[c*o+u]=e[c][u],l[c*o+u]=h)}return{rows:a,cols:s,vals:l}},e.prototype.initializeSimplicialSetEmbedding=function(){for(var e=this,t=this.getNEpochs(),n=this.nComponents,r=this.graph.getValues(),i=0,o=0;o<r.length;o++){var a=r[o];i<r[o]&&(i=a)}var s=this.graph.map((function(e){return e<i/t?0:e}));this.embedding=m.zeros(s.nRows).map((function(){return m.zeros(n).map((function(){return 20*m.tauRand(e.random)-10}))}));var l=[],c=[],u=[],h=s.getAll();for(o=0;o<h.length;o++){var d=h[o];d.value&&(l.push(d.value),u.push(d.row),c.push(d.col))}return{head:c,tail:u,epochsPerSample:this.makeEpochsPerSample(l,t)}},e.prototype.makeEpochsPerSample=function(e,t){var n=m.filled(e.length,-1),r=m.max(e),i=e.map((function(e){return e/r*t}));return i.forEach((function(e,r){e>0&&(n[r]=t/i[r])})),n},e.prototype.assignOptimizationStateParameters=function(e){Object.assign(this.optimizationState,e)},e.prototype.prepareForOptimizationLoop=function(){var e=this,t=e.repulsionStrength,n=e.learningRate,r=e.negativeSampleRate,i=this.optimizationState,o=i.epochsPerSample,a=i.headEmbedding,s=i.tailEmbedding,l=a[0].length,u=a.length===s.length,h=o.map((function(e){return e/r})),d=c(h),p=c(o);this.assignOptimizationStateParameters({epochOfNextSample:p,epochOfNextNegativeSample:d,epochsPerNegativeSample:h,moveOther:u,initialAlpha:n,alpha:n,gamma:t,dim:l})},e.prototype.initializeOptimization=function(){var e=this.embedding,t=this.embedding,n=this.optimizationState,r=n.head,i=n.tail,o=n.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,l=M(this.spread,this.minDist),c=l.a,u=l.b;this.assignOptimizationStateParameters({headEmbedding:e,tailEmbedding:t,head:r,tail:i,epochsPerSample:o,a:c,b:u,nEpochs:a,nVertices:s})},e.prototype.optimizeLayoutStep=function(e){for(var t=this.optimizationState,n=t.head,r=t.tail,i=t.headEmbedding,o=t.tailEmbedding,a=t.epochsPerSample,s=t.epochOfNextSample,l=t.epochOfNextNegativeSample,c=t.epochsPerNegativeSample,u=t.moveOther,h=t.initialAlpha,d=t.alpha,p=t.gamma,f=t.a,g=t.b,v=t.dim,b=t.nEpochs,y=t.nVertices,x=0;x<a.length;x++)if(!(s[x]>e)){var w=n[x],M=r[x],T=i[w],E=o[M],C=S(T,E),A=0;C>0&&(A=-2*f*g*Math.pow(C,g-1),A/=f*Math.pow(C,g)+1);for(var R=0;R<v;R++){var k=_(A*(T[R]-E[R]),4);T[R]+=k*d,u&&(E[R]+=-k*d)}s[x]+=a[x];for(var P=Math.floor((e-l[x])/c[x]),L=0;L<P;L++){var O=m.tauRandInt(y,this.random),N=o[O],I=S(T,N),D=0;if(I>0)D=2*p*g,D/=(.001+I)*(f*Math.pow(I,g)+1);else if(w===O)continue;for(R=0;R<v;R++){k=4;D>0&&(k=_(D*(T[R]-N[R]),4)),T[R]+=k*d}}l[x]+=P*c[x]}return t.alpha=h*(1-e/b),t.currentEpoch+=1,i},e.prototype.optimizeLayoutAsync=function(e){var t=this;return void 0===e&&(e=function(){return!0}),new Promise((function(n,r){var i=function(){return a(t,void 0,void 0,(function(){var t,o,a,l,c,u;return s(this,(function(s){try{if(t=this.optimizationState,o=t.nEpochs,a=t.currentEpoch,this.embedding=this.optimizeLayoutStep(a),l=this.optimizationState.currentEpoch,c=!1===e(l),u=l===o,c||u)return[2,n(u)];setTimeout((function(){return i()}),0)}catch(h){r(h)}return[2]}))}))};setTimeout((function(){return i()}),0)}))},e.prototype.optimizeLayout=function(e){void 0===e&&(e=function(){return!0});for(var t=!1,n=[];!t;){var r=this.optimizationState,i=r.nEpochs,o=r.currentEpoch;n=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===e(a);t=a===i||s}return n},e.prototype.getNEpochs=function(){var e=this.graph;if(this.nEpochs>0)return this.nEpochs;var t=e.nRows;return t<=2500?500:t<=5e3?400:t<=7500?300:200},e}();function x(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return Math.sqrt(n)}t.UMAP=y,t.euclidean=x,t.cosine=function(e,t){for(var n=0,r=0,i=0,o=0;o<e.length;o++)n+=e[o]*t[o],r+=Math.pow(e[o],2),i+=Math.pow(t[o],2);return 0===r&&0===i?0:0===r||0===i?1:1-n/Math.sqrt(r*i)};var w=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function _(e,t){return e>t?t:e<-t?-t:e}function S(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(e[r]-t[r],2);return n}function M(e,t){var n=m.linear(0,3*e,300).map((function(e){return e<t?1:e})),r=m.zeros(n.length).map((function(r,i){return n[i]>=t?Math.exp(-(n[i]-t)/e):r})),i={x:n,y:r},o={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},a=g.default(i,(function(e){var t=l(e,2),n=t[0],r=t[1];return function(e){return 1/(1+n*Math.pow(e,2*r))}}),o).parameterValues,s=l(a,2);return{a:s[0],b:s[1]}}function T(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=5),e.map((function(e,i,o){return-1===t[i]||-1===t[o]?e*Math.exp(-n):t[i]!==t[o]?e*Math.exp(-r):e}))}function E(e){e=d.normalize(e,"max");var t=d.transpose(e),n=d.pairwiseMultiply(t,e);return e=d.add(e,d.subtract(t,n)),d.eliminateZeros(e)}function C(e,t,n){for(var r=m.zeros(e.length).map((function(e){return m.zeros(n[0].length)})),i=0;i<e.length;i++)for(var o=0;o<e[0].length;o++)for(var a=0;a<n[0].length;a++){var s=e[i][o];r[i][a]+=t[i][o]*n[s][a]}return r}t.findABParams=M,t.fastIntersection=T,t.resetLocalConnectivity=E,t.initTransform=C},9783:function(e,t){"use strict";var n=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function r(e,t){return Math.floor(t()*e)}function i(e){for(var t=[],n=0;n<e;n++)t.push(void 0);return t}function o(e,t){return i(e).map((function(){return t}))}function a(e){return o(e,0)}function s(e){return e.reduce((function(e,t){return e+t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.reshape2d=t.rejectionSample=t.max2d=t.max=t.mean=t.sum=t.linear=t.ones=t.zeros=t.filled=t.range=t.empty=t.norm=t.tauRand=t.tauRandInt=void 0,t.tauRandInt=r,t.tauRand=function(e){return e()},t.norm=function(e){var t,r,i=0;try{for(var o=n(e),a=o.next();!a.done;a=o.next()){var s=a.value;i+=Math.pow(s,2)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return Math.sqrt(i)},t.empty=i,t.range=function(e){return i(e).map((function(e,t){return t}))},t.filled=o,t.zeros=a,t.ones=function(e){return o(e,1)},t.linear=function(e,t,n){return i(n).map((function(r,i){return e+i*((t-e)/(n-1))}))},t.sum=s,t.mean=function(e){return s(e)/e.length},t.max=function(e){for(var t=0,n=0;n<e.length;n++)t=e[n]>t?e[n]:t;return t},t.max2d=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)t=e[n][r]>t?e[n][r]:t;return t},t.rejectionSample=function(e,t,n){for(var i=a(e),o=0;o<e;o++)for(var s=!0;s;){for(var l=r(t,n),c=!1,u=0;u<o;u++)if(l===i[u]){c=!0;break}c||(s=!1),i[o]=l}return i},t.reshape2d=function(e,t,n){var r=[],i=0;if(e.length!==t*n)throw new Error("Array dimensions must match input length.");for(var o=0;o<t;o++){for(var a=[],s=0;s<n;s++)a.push(e[i]),i+=1;r.push(a),1}return r}},5446:e=>{e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},9321:(e,t,n)=>{"use strict";var r=n(8317),i=n(1583),o=n(8004),a=n(9849);function s(e){return e.call.bind(e)}var l="undefined"!==typeof BigInt,c="undefined"!==typeof Symbol,u=s(Object.prototype.toString),h=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var f=s(BigInt.prototype.valueOf);if(c)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(n){return!1}}function v(e){return"[object Map]"===u(e)}function b(e){return"[object Set]"===u(e)}function y(e){return"[object WeakMap]"===u(e)}function x(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function _(e){return"undefined"!==typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===u(e)}function M(e){return"undefined"!==typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||M(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},v.working="undefined"!==typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(v.working?v(e):e instanceof Map)},b.working="undefined"!==typeof Set&&b(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(b.working?b(e):e instanceof Set)},y.working="undefined"!==typeof WeakMap&&y(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},x.working="undefined"!==typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},w.working="undefined"!==typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=_,S.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=M;var T="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===u(e)}function C(e){return"undefined"!==typeof T&&("undefined"===typeof E.working&&(E.working=E(new T)),E.working?E(e):e instanceof T)}function A(e){return g(e,h)}function R(e){return g(e,d)}function k(e){return g(e,p)}function P(e){return l&&g(e,f)}function L(e){return c&&g(e,m)}t.isSharedArrayBuffer=C,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=A,t.isStringObject=R,t.isBooleanObject=k,t.isBigIntObject=P,t.isSymbolObject=L,t.isBoxedPrimitive=function(e){return A(e)||R(e)||k(e)||P(e)||L(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(_(e)||C(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},6494:(e,t,n)=>{var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])g(s)||!w(s)?a+=" "+s:a+=" "+l(s);return a},t.deprecate=function(e,n){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var o={},a=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"/MotionComparator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var s={NODE_ENV:"production",PUBLIC_URL:"/MotionComparator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function l(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),h(r,e,r.depth)}function c(e,t){var n=l.styles[t];return n?"\x1b["+l.colors[n][0]+"m"+e+"\x1b["+l.colors[n][1]+"m":e}function u(e,t){return e}function h(e,n,r){if(e.customInspect&&n&&M(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=h(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(M(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var c,u="",w=!1,T=["{","}"];(f(n)&&(w=!0,T=["[","]"]),M(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return x(n)&&(u=" "+RegExp.prototype.toString.call(n)),_(n)&&(u=" "+Date.prototype.toUTCString.call(n)),S(n)&&(u=" "+d(n)),0!==a.length||w&&0!=n.length?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=w?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)A(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return p(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,T)):T[0]+u+T[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),A(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?h(e,l.value,null):h(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function m(e){return"boolean"===typeof e}function g(e){return null===e}function v(e){return"number"===typeof e}function b(e){return"string"===typeof e}function y(e){return void 0===e}function x(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"===typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===T(e)}function S(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function M(e){return"function"===typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(a.test(e)){var n=process.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(9321),t.isArray=f,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=b,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=y,t.isRegExp=x,t.types.isRegExp=x,t.isObject=w,t.isDate=_,t.types.isDate=_,t.isError=S,t.types.isNativeError=S,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(5446);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(6329),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var R="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!==typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=R,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(k.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},8004:(e,t,n)=>{"use strict";var r=n(1903),i=n(2936),o=n(1712),a=n(2028),s=n(5558),l=a("Object.prototype.toString"),c=n(4635)(),u="undefined"===typeof globalThis?n.g:globalThis,h=i(),d=a("String.prototype.slice"),p=Object.getPrototypeOf,f=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},m={__proto__:null};r(h,c&&s&&p?function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),r=s(n,Symbol.toStringTag);if(!r){var i=p(n);r=s(i,Symbol.toStringTag)}m["$"+e]=o(r.get)}}:function(e){var t=new u[e],n=t.slice||t.set;n&&(m["$"+e]=o(n))});e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!c){var t=d(l(e),8,-1);return f(h,t)>-1?t:"Object"===t&&function(e){var t=!1;return r(m,(function(n,r){if(!t)try{n(e),t=d(r,1)}catch(i){}})),t}(e)}return s?function(e){var t=!1;return r(m,(function(n,r){if(!t)try{"$"+n(e)===r&&(t=d(r,1))}catch(i){}})),t}(e):null}},1756:e=>{e.exports=function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")},e.exports.__esModule=!0,e.exports.default=e.exports},7101:e=>{e.exports=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")},e.exports.__esModule=!0,e.exports.default=e.exports},6668:(e,t,n)=>{var r=n(1756);e.exports=function(e,t){return e.get(r(e,t))},e.exports.__esModule=!0,e.exports.default=e.exports},2459:(e,t,n)=>{var r=n(7101);e.exports=function(e,t,n){r(e,t),t.set(e,n)},e.exports.__esModule=!0,e.exports.default=e.exports},7088:(e,t,n)=>{var r=n(1756);e.exports=function(e,t,n){return e.set(r(e,t),n),n},e.exports.__esModule=!0,e.exports.default=e.exports},3312:(e,t,n)=>{var r=n(7101);e.exports=function(e,t){r(e,t),t.add(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},166:e=>{e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2936:(e,t,n)=>{"use strict";var r=n(7163),i="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof i[r[t]]&&(e[e.length]=r[t]);return e}},4437:function(e){e.exports=function(){"use strict";for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t=e,n=function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},r={},i=0,o=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<o.length;i+=1){var a=o[i];r["[object "+a+"]"]=a.toLowerCase()}var s=function(e){return r[Object.prototype.toString.call(e)]||"object"},l=s,c=function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==l(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},u=s,h=function(e){if(e.length<2)return null;var t=e.length-1;return"string"==u(e[t])?e[t].toLowerCase():null},d=Math.PI,p={clip_rgb:n,limit:e,type:s,unpack:c,last:h,PI:d,TWOPI:2*d,PITHIRD:d/3,DEG2RAD:d/180,RAD2DEG:180/d},f={format:{},autodetect:[]},m=p.last,g=p.clip_rgb,v=p.type,b=f,y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===v(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=m(e),i=!1;if(!r){i=!0,b.sorted||(b.autodetect=b.autodetect.sort((function(e,t){return t.p-e.p})),b.sorted=!0);for(var o=0,a=b.autodetect;o<a.length;o+=1){var s=a[o];if(r=s.test.apply(s,e))break}}if(!b.format[r])throw new Error("unknown format: "+e);var l=b.format[r].apply(null,i?e:e.slice(0,-1));n._rgb=g(l),3===n._rgb.length&&n._rgb.push(1)};y.prototype.toString=function(){return"function"==v(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var x=y,w=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(w.Color,[null].concat(e)))};w.Color=x,w.version="2.4.2";var _=w,S=p.unpack,M=Math.max,T=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=S(e,"rgb"),r=n[0],i=n[1],o=n[2],a=1-M(r/=255,M(i/=255,o/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-i-a)*s,(1-o-a)*s,a]},E=T,C=p.unpack,A=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=C(e,"cmyk"))[0],r=e[1],i=e[2],o=e[3],a=e.length>4?e[4]:1;return 1===o?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),i>=1?0:255*(1-i)*(1-o),a]},R=A,k=_,P=x,L=f,O=p.unpack,N=p.type,I=E;P.prototype.cmyk=function(){return I(this._rgb)},k.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(P,[null].concat(e,["cmyk"])))},L.format.cmyk=R,L.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=O(e,"cmyk"),"array"===N(e)&&4===e.length)return"cmyk"}});var D=p.unpack,j=p.last,F=function(e){return Math.round(100*e)/100},z=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=D(e,"hsla"),r=j(e)||"lsa";return n[0]=F(n[0]||0),n[1]=F(100*n[1])+"%",n[2]=F(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},B=z,U=p.unpack,G=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=U(e,"rgba"))[0],r=e[1],i=e[2];n/=255,r/=255,i/=255;var o,a,s=Math.min(n,r,i),l=Math.max(n,r,i),c=(l+s)/2;return l===s?(o=0,a=Number.NaN):o=c<.5?(l-s)/(l+s):(l-s)/(2-l-s),n==l?a=(r-i)/(l-s):r==l?a=2+(i-n)/(l-s):i==l&&(a=4+(n-r)/(l-s)),(a*=60)<0&&(a+=360),e.length>3&&void 0!==e[3]?[a,o,c,e[3]]:[a,o,c]},V=G,H=p.unpack,W=p.last,$=B,q=V,X=Math.round,Y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=H(e,"rgba"),r=W(e)||"rgb";return"hsl"==r.substr(0,3)?$(q(n),r):(n[0]=X(n[0]),n[1]=X(n[1]),n[2]=X(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},K=Y,J=p.unpack,Q=Math.round,Z=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,i,o,a=(t=J(t,"hsl"))[0],s=t[1],l=t[2];if(0===s)r=i=o=255*l;else{var c=[0,0,0],u=[0,0,0],h=l<.5?l*(1+s):l+s-l*s,d=2*l-h,p=a/360;c[0]=p+1/3,c[1]=p,c[2]=p-1/3;for(var f=0;f<3;f++)c[f]<0&&(c[f]+=1),c[f]>1&&(c[f]-=1),6*c[f]<1?u[f]=d+6*(h-d)*c[f]:2*c[f]<1?u[f]=h:3*c[f]<2?u[f]=d+(h-d)*(2/3-c[f])*6:u[f]=d;r=(e=[Q(255*u[0]),Q(255*u[1]),Q(255*u[2])])[0],i=e[1],o=e[2]}return t.length>3?[r,i,o,t[3]]:[r,i,o,1]},ee=Z,te=ee,ne=f,re=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ie=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,oe=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ae=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,se=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,le=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ce=Math.round,ue=function(e){var t;if(e=e.toLowerCase().trim(),ne.format.named)try{return ne.format.named(e)}catch(f){}if(t=e.match(re)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(ie)){for(var i=t.slice(1,5),o=0;o<4;o++)i[o]=+i[o];return i}if(t=e.match(oe)){for(var a=t.slice(1,4),s=0;s<3;s++)a[s]=ce(2.55*a[s]);return a[3]=1,a}if(t=e.match(ae)){for(var l=t.slice(1,5),c=0;c<3;c++)l[c]=ce(2.55*l[c]);return l[3]=+l[3],l}if(t=e.match(se)){var u=t.slice(1,4);u[1]*=.01,u[2]*=.01;var h=te(u);return h[3]=1,h}if(t=e.match(le)){var d=t.slice(1,4);d[1]*=.01,d[2]*=.01;var p=te(d);return p[3]=+t[4],p}};ue.test=function(e){return re.test(e)||ie.test(e)||oe.test(e)||ae.test(e)||se.test(e)||le.test(e)};var he=ue,de=_,pe=x,fe=f,me=p.type,ge=K,ve=he;pe.prototype.css=function(e){return ge(this._rgb,e)},de.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(pe,[null].concat(e,["css"])))},fe.format.css=ve,fe.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===me(e)&&ve.test(e))return"css"}});var be=x,ye=_,xe=f,we=p.unpack;xe.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=we(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},ye.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(be,[null].concat(e,["gl"])))},be.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var _e=p.unpack,Se=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=_e(e,"rgb"),i=r[0],o=r[1],a=r[2],s=Math.min(i,o,a),l=Math.max(i,o,a),c=l-s,u=100*c/255,h=s/(255-c)*100;return 0===c?n=Number.NaN:(i===l&&(n=(o-a)/c),o===l&&(n=2+(a-i)/c),a===l&&(n=4+(i-o)/c),(n*=60)<0&&(n+=360)),[n,u,h]},Me=Se,Te=p.unpack,Ee=Math.floor,Ce=function(){for(var e,t,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=Te(a,"hcg"))[0],d=a[1],p=a[2];p*=255;var f=255*d;if(0===d)l=c=u=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var m=Ee(h/=60),g=h-m,v=p*(1-d),b=v+f*(1-g),y=v+f*g,x=v+f;switch(m){case 0:l=(e=[x,y,v])[0],c=e[1],u=e[2];break;case 1:l=(t=[b,x,v])[0],c=t[1],u=t[2];break;case 2:l=(n=[v,x,y])[0],c=n[1],u=n[2];break;case 3:l=(r=[v,b,x])[0],c=r[1],u=r[2];break;case 4:l=(i=[y,v,x])[0],c=i[1],u=i[2];break;case 5:l=(o=[x,v,b])[0],c=o[1],u=o[2]}}return[l,c,u,a.length>3?a[3]:1]},Ae=Ce,Re=p.unpack,ke=p.type,Pe=_,Le=x,Oe=f,Ne=Me;Le.prototype.hcg=function(){return Ne(this._rgb)},Pe.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Le,[null].concat(e,["hcg"])))},Oe.format.hcg=Ae,Oe.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Re(e,"hcg"),"array"===ke(e)&&3===e.length)return"hcg"}});var Ie=p.unpack,De=p.last,je=Math.round,Fe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ie(e,"rgba"),r=n[0],i=n[1],o=n[2],a=n[3],s=De(e)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l="000000"+((r=je(r))<<16|(i=je(i))<<8|(o=je(o))).toString(16);l=l.substr(l.length-6);var c="0"+je(255*a).toString(16);switch(c=c.substr(c.length-2),s.toLowerCase()){case"rgba":return"#"+l+c;case"argb":return"#"+c+l;default:return"#"+l}},ze=Fe,Be=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ue=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Ge=function(e){if(e.match(Be)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(Ue)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},Ve=_,He=x,We=p.type,$e=f,qe=ze;He.prototype.hex=function(e){return qe(this._rgb,e)},Ve.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(He,[null].concat(e,["hex"])))},$e.format.hex=Ge,$e.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===We(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var Xe=p.unpack,Ye=p.TWOPI,Ke=Math.min,Je=Math.sqrt,Qe=Math.acos,Ze=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=Xe(e,"rgb"),i=r[0],o=r[1],a=r[2],s=Ke(i/=255,o/=255,a/=255),l=(i+o+a)/3,c=l>0?1-s/l:0;return 0===c?n=NaN:(n=(i-o+(i-a))/2,n/=Je((i-o)*(i-o)+(i-a)*(o-a)),n=Qe(n),a>o&&(n=Ye-n),n/=Ye),[360*n,c,l]},et=Ze,tt=p.unpack,nt=p.limit,rt=p.TWOPI,it=p.PITHIRD,ot=Math.cos,at=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=tt(e,"hsi"))[0],a=e[1],s=e[2];return isNaN(o)&&(o=0),isNaN(a)&&(a=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((i=(1-a)/3)+(n=(1+a*ot(rt*o)/ot(it-rt*o))/3)):o<2/3?i=1-((n=(1-a)/3)+(r=(1+a*ot(rt*(o-=1/3))/ot(it-rt*o))/3)):n=1-((r=(1-a)/3)+(i=(1+a*ot(rt*(o-=2/3))/ot(it-rt*o))/3)),[255*(n=nt(s*n*3)),255*(r=nt(s*r*3)),255*(i=nt(s*i*3)),e.length>3?e[3]:1]},st=at,lt=p.unpack,ct=p.type,ut=_,ht=x,dt=f,pt=et;ht.prototype.hsi=function(){return pt(this._rgb)},ut.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(ht,[null].concat(e,["hsi"])))},dt.format.hsi=st,dt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=lt(e,"hsi"),"array"===ct(e)&&3===e.length)return"hsi"}});var ft=p.unpack,mt=p.type,gt=_,vt=x,bt=f,yt=V;vt.prototype.hsl=function(){return yt(this._rgb)},gt.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(vt,[null].concat(e,["hsl"])))},bt.format.hsl=ee,bt.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ft(e,"hsl"),"array"===mt(e)&&3===e.length)return"hsl"}});var xt=p.unpack,wt=Math.min,_t=Math.max,St=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=xt(e,"rgb"))[0],a=e[1],s=e[2],l=wt(o,a,s),c=_t(o,a,s),u=c-l;return i=c/255,0===c?(n=Number.NaN,r=0):(r=u/c,o===c&&(n=(a-s)/u),a===c&&(n=2+(s-o)/u),s===c&&(n=4+(o-a)/u),(n*=60)<0&&(n+=360)),[n,r,i]},Mt=St,Tt=p.unpack,Et=Math.floor,Ct=function(){for(var e,t,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var l,c,u,h=(a=Tt(a,"hsv"))[0],d=a[1],p=a[2];if(p*=255,0===d)l=c=u=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var f=Et(h/=60),m=h-f,g=p*(1-d),v=p*(1-d*m),b=p*(1-d*(1-m));switch(f){case 0:l=(e=[p,b,g])[0],c=e[1],u=e[2];break;case 1:l=(t=[v,p,g])[0],c=t[1],u=t[2];break;case 2:l=(n=[g,p,b])[0],c=n[1],u=n[2];break;case 3:l=(r=[g,v,p])[0],c=r[1],u=r[2];break;case 4:l=(i=[b,g,p])[0],c=i[1],u=i[2];break;case 5:l=(o=[p,g,v])[0],c=o[1],u=o[2]}}return[l,c,u,a.length>3?a[3]:1]},At=Ct,Rt=p.unpack,kt=p.type,Pt=_,Lt=x,Ot=f,Nt=Mt;Lt.prototype.hsv=function(){return Nt(this._rgb)},Pt.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lt,[null].concat(e,["hsv"])))},Ot.format.hsv=At,Ot.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Rt(e,"hsv"),"array"===kt(e)&&3===e.length)return"hsv"}});var It={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Dt=It,jt=p.unpack,Ft=Math.pow,zt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=jt(e,"rgb"),r=n[0],i=n[1],o=n[2],a=Gt(r,i,o),s=a[0],l=a[1],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-a[2])]},Bt=function(e){return(e/=255)<=.04045?e/12.92:Ft((e+.055)/1.055,2.4)},Ut=function(e){return e>Dt.t3?Ft(e,1/3):e/Dt.t2+Dt.t0},Gt=function(e,t,n){return e=Bt(e),t=Bt(t),n=Bt(n),[Ut((.4124564*e+.3575761*t+.1804375*n)/Dt.Xn),Ut((.2126729*e+.7151522*t+.072175*n)/Dt.Yn),Ut((.0193339*e+.119192*t+.9503041*n)/Dt.Zn)]},Vt=zt,Ht=It,Wt=p.unpack,$t=Math.pow,qt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,i,o=(e=Wt(e,"lab"))[0],a=e[1],s=e[2];return r=(o+16)/116,n=isNaN(a)?r:r+a/500,i=isNaN(s)?r:r-s/200,r=Ht.Yn*Yt(r),n=Ht.Xn*Yt(n),i=Ht.Zn*Yt(i),[Xt(3.2404542*n-1.5371385*r-.4985314*i),Xt(-.969266*n+1.8760108*r+.041556*i),Xt(.0556434*n-.2040259*r+1.0572252*i),e.length>3?e[3]:1]},Xt=function(e){return 255*(e<=.00304?12.92*e:1.055*$t(e,1/2.4)-.055)},Yt=function(e){return e>Ht.t1?e*e*e:Ht.t2*(e-Ht.t0)},Kt=qt,Jt=p.unpack,Qt=p.type,Zt=_,en=x,tn=f,nn=Vt;en.prototype.lab=function(){return nn(this._rgb)},Zt.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(en,[null].concat(e,["lab"])))},tn.format.lab=Kt,tn.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Jt(e,"lab"),"array"===Qt(e)&&3===e.length)return"lab"}});var rn=p.unpack,on=p.RAD2DEG,an=Math.sqrt,sn=Math.atan2,ln=Math.round,cn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=rn(e,"lab"),r=n[0],i=n[1],o=n[2],a=an(i*i+o*o),s=(sn(o,i)*on+360)%360;return 0===ln(1e4*a)&&(s=Number.NaN),[r,a,s]},un=cn,hn=p.unpack,dn=Vt,pn=un,fn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=hn(e,"rgb"),r=n[0],i=n[1],o=n[2],a=dn(r,i,o),s=a[0],l=a[1],c=a[2];return pn(s,l,c)},mn=fn,gn=p.unpack,vn=p.DEG2RAD,bn=Math.sin,yn=Math.cos,xn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=gn(e,"lch"),r=n[0],i=n[1],o=n[2];return isNaN(o)&&(o=0),[r,yn(o*=vn)*i,bn(o)*i]},wn=xn,_n=p.unpack,Sn=wn,Mn=Kt,Tn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=_n(e,"lch"))[0],r=e[1],i=e[2],o=Sn(n,r,i),a=o[0],s=o[1],l=o[2],c=Mn(a,s,l);return[c[0],c[1],c[2],e.length>3?e[3]:1]},En=Tn,Cn=p.unpack,An=En,Rn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Cn(e,"hcl").reverse();return An.apply(void 0,n)},kn=Rn,Pn=p.unpack,Ln=p.type,On=_,Nn=x,In=f,Dn=mn;Nn.prototype.lch=function(){return Dn(this._rgb)},Nn.prototype.hcl=function(){return Dn(this._rgb).reverse()},On.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Nn,[null].concat(e,["lch"])))},On.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Nn,[null].concat(e,["hcl"])))},In.format.lch=En,In.format.hcl=kn,["lch","hcl"].forEach((function(e){return In.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=Pn(t,e),"array"===Ln(t)&&3===t.length)return e}})}));var jn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Fn=x,zn=f,Bn=p.type,Un=jn,Gn=Ge,Vn=ze;Fn.prototype.name=function(){for(var e=Vn(this._rgb,"rgb"),t=0,n=Object.keys(Un);t<n.length;t+=1){var r=n[t];if(Un[r]===e)return r.toLowerCase()}return e},zn.format.named=function(e){if(e=e.toLowerCase(),Un[e])return Gn(Un[e]);throw new Error("unknown color name: "+e)},zn.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===Bn(e)&&Un[e.toLowerCase()])return"named"}});var Hn=p.unpack,Wn=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Hn(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},$n=Wn,qn=p.type,Xn=function(e){if("number"==qn(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},Yn=_,Kn=x,Jn=f,Qn=p.type,Zn=$n;Kn.prototype.num=function(){return Zn(this._rgb)},Yn.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Kn,[null].concat(e,["num"])))},Jn.format.num=Xn,Jn.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===Qn(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var er=_,tr=x,nr=f,rr=p.unpack,ir=p.type,or=Math.round;tr.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(or)},tr.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:or(t):t}))},er.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(tr,[null].concat(e,["rgb"])))},nr.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=rr(e,"rgba");return void 0===n[3]&&(n[3]=1),n},nr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=rr(e,"rgba"),"array"===ir(e)&&(3===e.length||4===e.length&&"number"==ir(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var ar=Math.log,sr=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=i<6?0:-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*ar(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*ar(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*ar(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*ar(n),r=255),[t,n,r,1]},lr=sr,cr=p.unpack,ur=Math.round,hr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=cr(e,"rgb"),i=r[0],o=r[2],a=1e3,s=4e4,l=.4;s-a>l;){var c=lr(n=.5*(s+a));c[2]/c[0]>=o/i?s=n:a=n}return ur(n)},dr=_,pr=x,fr=f,mr=hr;pr.prototype.temp=pr.prototype.kelvin=pr.prototype.temperature=function(){return mr(this._rgb)},dr.temp=dr.kelvin=dr.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(pr,[null].concat(e,["temp"])))},fr.format.temp=fr.format.kelvin=fr.format.temperature=sr;var gr=p.unpack,vr=Math.cbrt,br=Math.pow,yr=Math.sign,xr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=gr(e,"rgb"),r=n[0],i=n[1],o=n[2],a=[_r(r/255),_r(i/255),_r(o/255)],s=a[0],l=a[1],c=a[2],u=vr(.4122214708*s+.5363325363*l+.0514459929*c),h=vr(.2119034982*s+.6806995451*l+.1073969566*c),d=vr(.0883024619*s+.2817188376*l+.6299787005*c);return[.2104542553*u+.793617785*h-.0040720468*d,1.9779984951*u-2.428592205*h+.4505937099*d,.0259040371*u+.7827717662*h-.808675766*d]},wr=xr;function _r(e){var t=Math.abs(e);return t<.04045?e/12.92:(yr(e)||1)*br((t+.055)/1.055,2.4)}var Sr=p.unpack,Mr=Math.pow,Tr=Math.sign,Er=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Sr(e,"lab"))[0],r=e[1],i=e[2],o=Mr(n+.3963377774*r+.2158037573*i,3),a=Mr(n-.1055613458*r-.0638541728*i,3),s=Mr(n-.0894841775*r-1.291485548*i,3);return[255*Ar(4.0767416621*o-3.3077115913*a+.2309699292*s),255*Ar(-1.2684380046*o+2.6097574011*a-.3413193965*s),255*Ar(-.0041960863*o-.7034186147*a+1.707614701*s),e.length>3?e[3]:1]},Cr=Er;function Ar(e){var t=Math.abs(e);return t>.0031308?(Tr(e)||1)*(1.055*Mr(t,1/2.4)-.055):12.92*e}var Rr=p.unpack,kr=p.type,Pr=_,Lr=x,Or=f,Nr=wr;Lr.prototype.oklab=function(){return Nr(this._rgb)},Pr.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Lr,[null].concat(e,["oklab"])))},Or.format.oklab=Cr,Or.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Rr(e,"oklab"),"array"===kr(e)&&3===e.length)return"oklab"}});var Ir=p.unpack,Dr=wr,jr=un,Fr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ir(e,"rgb"),r=n[0],i=n[1],o=n[2],a=Dr(r,i,o),s=a[0],l=a[1],c=a[2];return jr(s,l,c)},zr=Fr,Br=p.unpack,Ur=wn,Gr=Cr,Vr=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=Br(e,"lch"))[0],r=e[1],i=e[2],o=Ur(n,r,i),a=o[0],s=o[1],l=o[2],c=Gr(a,s,l);return[c[0],c[1],c[2],e.length>3?e[3]:1]},Hr=Vr,Wr=p.unpack,$r=p.type,qr=_,Xr=x,Yr=f,Kr=zr;Xr.prototype.oklch=function(){return Kr(this._rgb)},qr.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Xr,[null].concat(e,["oklch"])))},Yr.format.oklch=Hr,Yr.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Wr(e,"oklch"),"array"===$r(e)&&3===e.length)return"oklch"}});var Jr=x,Qr=p.type;Jr.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Qr(e)?t?(this._rgb[3]=e,this):new Jr([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};var Zr=x,ei=It;Zr.prototype.darken=function(e){void 0===e&&(e=1);var t=this,n=t.lab();return n[0]-=ei.Kn*e,new Zr(n,"lab").alpha(t.alpha(),!0)},Zr.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},Zr.prototype.darker=Zr.prototype.darken,Zr.prototype.brighter=Zr.prototype.brighten,x.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],i=this[n]();if(r){var o=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(o>-1)return i[o];throw new Error("unknown channel "+r+" in mode "+n)}return i};var ti=x,ni=p.type,ri=Math.pow,ii=1e-7,oi=20;ti.prototype.luminance=function(e){if(void 0!==e&&"number"===ni(e)){if(0===e)return new ti([0,0,0,this._rgb[3]],"rgb");if(1===e)return new ti([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n="rgb",r=oi,i=function(t,o){var a=t.interpolate(o,.5,n),s=a.luminance();return Math.abs(e-s)<ii||!r--?a:s>e?i(t,a):i(a,o)},o=(t>e?i(new ti([0,0,0]),this):i(this,new ti([255,255,255]))).rgb();return new ti(o.concat([this._rgb[3]]))}return ai.apply(void 0,this._rgb.slice(0,3))};var ai=function(e,t,n){return.2126*(e=si(e))+.7152*(t=si(t))+.0722*(n=si(n))},si=function(e){return(e/=255)<=.03928?e/12.92:ri((e+.055)/1.055,2.4)},li={},ci=x,ui=p.type,hi=li,di=function(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=r[0]||"lrgb";if(hi[o]||r.length||(o=Object.keys(hi)[0]),!hi[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==ui(e)&&(e=new ci(e)),"object"!==ui(t)&&(t=new ci(t)),hi[o](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))},pi=x,fi=di;pi.prototype.mix=pi.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return fi.apply(void 0,[this,e,t].concat(n))};var mi=x;mi.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new mi([t[0]*n,t[1]*n,t[2]*n,n],"rgb")};var gi=x,vi=It;gi.prototype.saturate=function(e){void 0===e&&(e=1);var t=this,n=t.lch();return n[1]+=vi.Kn*e,n[1]<0&&(n[1]=0),new gi(n,"lch").alpha(t.alpha(),!0)},gi.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var bi=x,yi=p.type;bi.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),i=r[0],o=r[1],a=this[i]();if(o){var s=i.indexOf(o)-("ok"===i.substr(0,2)?2:0);if(s>-1){if("string"==yi(t))switch(t.charAt(0)){case"+":case"-":a[s]+=+t;break;case"*":a[s]*=+t.substr(1);break;case"/":a[s]/=+t.substr(1);break;default:a[s]=+t}else{if("number"!==yi(t))throw new Error("unsupported value for Color.set");a[s]=t}var l=new bi(a,i);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+o+" in mode "+i)}return a};var xi=x,wi=function(e,t,n){var r=e._rgb,i=t._rgb;return new xi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};li.rgb=wi;var _i=x,Si=Math.sqrt,Mi=Math.pow,Ti=function(e,t,n){var r=e._rgb,i=r[0],o=r[1],a=r[2],s=t._rgb,l=s[0],c=s[1],u=s[2];return new _i(Si(Mi(i,2)*(1-n)+Mi(l,2)*n),Si(Mi(o,2)*(1-n)+Mi(c,2)*n),Si(Mi(a,2)*(1-n)+Mi(u,2)*n),"rgb")};li.lrgb=Ti;var Ei=x,Ci=function(e,t,n){var r=e.lab(),i=t.lab();return new Ei(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};li.lab=Ci;var Ai=x,Ri=function(e,t,n,r){var i,o,a,s,l,c,u,h,d,p,f,m,g;return"hsl"===r?(a=e.hsl(),s=t.hsl()):"hsv"===r?(a=e.hsv(),s=t.hsv()):"hcg"===r?(a=e.hcg(),s=t.hcg()):"hsi"===r?(a=e.hsi(),s=t.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=e.hcl(),s=t.hcl()):"oklch"===r&&(a=e.oklch().reverse(),s=t.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(l=(i=a)[0],u=i[1],d=i[2],c=(o=s)[0],h=o[1],p=o[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?m=Number.NaN:(m=c,1!=d&&0!=d||"hsv"==r||(f=h)):(m=l,1!=p&&0!=p||"hsv"==r||(f=u)):m=l+n*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===f&&(f=u+n*(h-u)),g=d+n*(p-d),new Ai("oklch"===r?[g,f,m]:[m,f,g],r)},ki=Ri,Pi=function(e,t,n){return ki(e,t,n,"lch")};li.lch=Pi,li.hcl=Pi;var Li=x,Oi=function(e,t,n){var r=e.num(),i=t.num();return new Li(r+n*(i-r),"num")};li.num=Oi;var Ni=Ri,Ii=function(e,t,n){return Ni(e,t,n,"hcg")};li.hcg=Ii;var Di=Ri,ji=function(e,t,n){return Di(e,t,n,"hsi")};li.hsi=ji;var Fi=Ri,zi=function(e,t,n){return Fi(e,t,n,"hsl")};li.hsl=zi;var Bi=Ri,Ui=function(e,t,n){return Bi(e,t,n,"hsv")};li.hsv=Ui;var Gi=x,Vi=function(e,t,n){var r=e.oklab(),i=t.oklab();return new Gi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};li.oklab=Vi;var Hi=Ri,Wi=function(e,t,n){return Hi(e,t,n,"oklch")};li.oklch=Wi;var $i=x,qi=p.clip_rgb,Xi=Math.pow,Yi=Math.sqrt,Ki=Math.PI,Ji=Math.cos,Qi=Math.sin,Zi=Math.atan2,eo=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=i})),e=e.map((function(e){return new $i(e)})),"lrgb"===t)return to(e,n);for(var o=e.shift(),a=o.get(t),s=[],l=0,c=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*n[0],s.push(isNaN(a[u])?0:n[0]),"h"===t.charAt(u)&&!isNaN(a[u])){var h=a[u]/180*Ki;l+=Ji(h)*n[0],c+=Qi(h)*n[0]}var d=o.alpha()*n[0];e.forEach((function(e,r){var i=e.get(t);d+=e.alpha()*n[r+1];for(var o=0;o<a.length;o++)if(!isNaN(i[o]))if(s[o]+=n[r+1],"h"===t.charAt(o)){var u=i[o]/180*Ki;l+=Ji(u)*n[r+1],c+=Qi(u)*n[r+1]}else a[o]+=i[o]*n[r+1]}));for(var p=0;p<a.length;p++)if("h"===t.charAt(p)){for(var f=Zi(c/s[p],l/s[p])/Ki*180;f<0;)f+=360;for(;f>=360;)f-=360;a[p]=f}else a[p]=a[p]/s[p];return d/=r,new $i(a,t).alpha(d>.99999?1:d,!0)},to=function(e,t){for(var n=e.length,r=[0,0,0,0],i=0;i<e.length;i++){var o=e[i],a=t[i]/n,s=o._rgb;r[0]+=Xi(s[0],2)*a,r[1]+=Xi(s[1],2)*a,r[2]+=Xi(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Yi(r[0]),r[1]=Yi(r[1]),r[2]=Yi(r[2]),r[3]>.9999999&&(r[3]=1),new $i(qi(r))},no=_,ro=p.type,io=Math.pow,oo=function(e){var t="rgb",n=no("#ccc"),r=0,i=[0,1],o=[],a=[0,0],s=!1,l=[],c=!1,u=0,h=1,d=!1,p={},f=!0,m=1,g=function(e){if((e=e||["#fff","#000"])&&"string"===ro(e)&&no.brewer&&no.brewer[e.toLowerCase()]&&(e=no.brewer[e.toLowerCase()]),"array"===ro(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=no(e[t]);o.length=0;for(var n=0;n<e.length;n++)o.push(n/(e.length-1))}return w(),l=e},v=function(e){if(null!=s){for(var t=s.length-1,n=0;n<t&&e>=s[n];)n++;return n-1}return 0},b=function(e){return e},y=function(e){return e},x=function(e,r){var i,c;if(null==r&&(r=!1),isNaN(e)||null===e)return n;c=r?e:s&&s.length>2?v(e)/(s.length-2):h!==u?(e-u)/(h-u):1,c=y(c),r||(c=b(c)),1!==m&&(c=io(c,m)),c=a[0]+c*(1-a[0]-a[1]),c=Math.min(1,Math.max(0,c));var d=Math.floor(1e4*c);if(f&&p[d])i=p[d];else{if("array"===ro(l))for(var g=0;g<o.length;g++){var x=o[g];if(c<=x){i=l[g];break}if(c>=x&&g===o.length-1){i=l[g];break}if(c>x&&c<o[g+1]){c=(c-x)/(o[g+1]-x),i=no.interpolate(l[g],l[g+1],c,t);break}}else"function"===ro(l)&&(i=l(c));f&&(p[d]=i)}return i},w=function(){return p={}};g(e);var _=function(e){var t=no(x(e));return c&&t[c]?t[c]():t};return _.classes=function(e){if(null!=e){if("array"===ro(e))s=e,i=[e[0],e[e.length-1]];else{var t=no.analyze(i);s=0===e?[t.min,t.max]:no.limits(t,"e",e)}return _}return s},_.domain=function(e){if(!arguments.length)return i;u=e[0],h=e[e.length-1],o=[];var t=l.length;if(e.length===t&&u!==h)for(var n=0,r=Array.from(e);n<r.length;n+=1){var a=r[n];o.push((a-u)/(h-u))}else{for(var s=0;s<t;s++)o.push(s/(t-1));if(e.length>2){var c=e.map((function(t,n){return n/(e.length-1)})),d=e.map((function(e){return(e-u)/(h-u)}));d.every((function(e,t){return c[t]===e}))||(y=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=d[t+1];)t++;var n=(e-d[t])/(d[t+1]-d[t]);return c[t]+n*(c[t+1]-c[t])})}}return i=[u,h],_},_.mode=function(e){return arguments.length?(t=e,w(),_):t},_.range=function(e,t){return g(e),_},_.out=function(e){return c=e,_},_.spread=function(e){return arguments.length?(r=e,_):r},_.correctLightness=function(e){return null==e&&(e=!0),d=e,w(),b=d?function(e){for(var t=x(0,!0).lab()[0],n=x(1,!0).lab()[0],r=t>n,i=x(e,!0).lab()[0],o=t+(n-t)*e,a=i-o,s=0,l=1,c=20;Math.abs(a)>.01&&c-- >0;)r&&(a*=-1),a<0?(s=e,e+=.5*(l-e)):(l=e,e+=.5*(s-e)),i=x(e,!0).lab()[0],a=i-o;return e}:function(e){return e},_},_.padding=function(e){return null!=e?("number"===ro(e)&&(e=[e,e]),a=e,_):a},_.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===t)r=[_(.5)];else if(t>1){var o=i[0],a=i[1]-o;r=ao(0,t,!1).map((function(e){return _(o+e/(t-1)*a)}))}else{e=[];var c=[];if(s&&s.length>2)for(var u=1,h=s.length,d=1<=h;d?u<h:u>h;d?u++:u--)c.push(.5*(s[u-1]+s[u]));else c=i;r=c.map((function(e){return _(e)}))}return no[n]&&(r=r.map((function(e){return e[n]()}))),r},_.cache=function(e){return null!=e?(f=e,_):f},_.gamma=function(e){return null!=e?(m=e,_):m},_.nodata=function(e){return null!=e?(n=no(e),_):n},_};function ao(e,t,n){for(var r=[],i=e<t,o=n?i?t+1:t-1:t,a=e;i?a<o:a>o;i?a++:a--)r.push(a);return r}var so=x,lo=oo,co=function(e){for(var t=[1,1],n=1;n<e;n++){for(var r=[1],i=1;i<=t.length;i++)r[i]=(t[i]||0)+t[i-1];t=r}return t},uo=function(e){var t,n,r,i,o,a,s;if(2===(e=e.map((function(e){return new so(e)}))).length)t=e.map((function(e){return e.lab()})),o=t[0],a=t[1],i=function(e){var t=[0,1,2].map((function(t){return o[t]+e*(a[t]-o[t])}));return new so(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),o=n[0],a=n[1],s=n[2],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]}));return new so(t,"lab")};else if(4===e.length){var l;r=e.map((function(e){return e.lab()})),o=r[0],a=r[1],s=r[2],l=r[3],i=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]}));return new so(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");var c,u,h;c=e.map((function(e){return e.lab()})),h=e.length-1,u=co(h),i=function(e){var t=1-e,n=[0,1,2].map((function(n){return c.reduce((function(r,i,o){return r+u[o]*Math.pow(t,h-o)*Math.pow(e,o)*i[n]}),0)}));return new so(n,"lab")}}return i},ho=function(e){var t=uo(e);return t.scale=function(){return lo(t)},t},po=_,fo=function(e,t,n){if(!fo[n])throw new Error("unknown blend mode "+n);return fo[n](e,t)},mo=function(e){return function(t,n){var r=po(n).rgb(),i=po(t).rgb();return po.rgb(e(r,i))}},go=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}},vo=function(e){return e},bo=function(e,t){return e*t/255},yo=function(e,t){return e>t?t:e},xo=function(e,t){return e>t?e:t},wo=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},_o=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},So=function(e,t){return 255*(1-(1-t/255)/(e/255))},Mo=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e};fo.normal=mo(go(vo)),fo.multiply=mo(go(bo)),fo.screen=mo(go(wo)),fo.overlay=mo(go(_o)),fo.darken=mo(go(yo)),fo.lighten=mo(go(xo)),fo.dodge=mo(go(Mo)),fo.burn=mo(go(So));for(var To=fo,Eo=p.type,Co=p.clip_rgb,Ao=p.TWOPI,Ro=Math.pow,ko=Math.sin,Po=Math.cos,Lo=_,Oo=function(e,t,n,r,i){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var o,a=0;"array"===Eo(i)?o=i[1]-i[0]:(o=0,i=[i,i]);var s=function(s){var l=Ao*((e+120)/360+t*s),c=Ro(i[0]+o*s,r),u=(0!==a?n[0]+s*a:n)*c*(1-c)/2,h=Po(l),d=ko(l);return Lo(Co([255*(c+u*(-.14861*h+1.78277*d)),255*(c+u*(-.29227*h-.90649*d)),255*(c+u*(1.97294*h)),1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===Eo(n=e)?0===(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(e){return null==e?i:("array"===Eo(e)?(i=e,o=e[1]-e[0]):(i=[e,e],o=0),s)},s.scale=function(){return Lo.scale(s)},s.hue(n),s},No=x,Io="0123456789abcdef",Do=Math.floor,jo=Math.random,Fo=function(){for(var e="#",t=0;t<6;t++)e+=Io.charAt(Do(16*jo()));return new No(e,"hex")},zo=s,Bo=Math.log,Uo=Math.pow,Go=Math.floor,Vo=Math.abs,Ho=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===zo(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===zo(e)&&(e=e[t]),void 0===e||null===e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return Wo(n,e,t)},n},Wo=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==zo(e)&&(e=Ho(e));var r=e.min,i=e.max,o=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,i];var a=[];if("c"===t.substr(0,1)&&(a.push(r),a.push(i)),"e"===t.substr(0,1)){a.push(r);for(var s=1;s<n;s++)a.push(r+s/n*(i-r));a.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var l=Math.LOG10E*Bo(r),c=Math.LOG10E*Bo(i);a.push(r);for(var u=1;u<n;u++)a.push(Uo(10,l+u/n*(c-l)));a.push(i)}else if("q"===t.substr(0,1)){a.push(r);for(var h=1;h<n;h++){var d=(o.length-1)*h/n,p=Go(d);if(p===d)a.push(o[p]);else{var f=d-p;a.push(o[p]*(1-f)+o[p+1]*f)}}a.push(i)}else if("k"===t.substr(0,1)){var m,g=o.length,v=new Array(g),b=new Array(n),y=!0,x=0,w=null;(w=[]).push(r);for(var _=1;_<n;_++)w.push(r+_/n*(i-r));for(w.push(i);y;){for(var S=0;S<n;S++)b[S]=0;for(var M=0;M<g;M++)for(var T=o[M],E=Number.MAX_VALUE,C=void 0,A=0;A<n;A++){var R=Vo(w[A]-T);R<E&&(E=R,C=A),b[C]++,v[M]=C}for(var k=new Array(n),P=0;P<n;P++)k[P]=null;for(var L=0;L<g;L++)null===k[m=v[L]]?k[m]=o[L]:k[m]+=o[L];for(var O=0;O<n;O++)k[O]*=1/b[O];y=!1;for(var N=0;N<n;N++)if(k[N]!==w[N]){y=!0;break}w=k,++x>200&&(y=!1)}for(var I={},D=0;D<n;D++)I[D]=[];for(var j=0;j<g;j++)I[m=v[j]].push(o[j]);for(var F=[],z=0;z<n;z++)F.push(I[z][0]),F.push(I[z][I[z].length-1]);F=F.sort((function(e,t){return e-t})),a.push(F[0]);for(var B=1;B<F.length;B+=2){var U=F[B];isNaN(U)||-1!==a.indexOf(U)||a.push(U)}}return a},$o={analyze:Ho,limits:Wo},qo=x,Xo=function(e,t){e=new qo(e),t=new qo(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Yo=x,Ko=Math.sqrt,Jo=Math.pow,Qo=Math.min,Zo=Math.max,ea=Math.atan2,ta=Math.abs,na=Math.cos,ra=Math.sin,ia=Math.exp,oa=Math.PI,aa=function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);var o=function(e){return 360*e/(2*oa)},a=function(e){return 2*oa*e/360};e=new Yo(e),t=new Yo(t);var s=Array.from(e.lab()),l=s[0],c=s[1],u=s[2],h=Array.from(t.lab()),d=h[0],p=h[1],f=h[2],m=(l+d)/2,g=(Ko(Jo(c,2)+Jo(u,2))+Ko(Jo(p,2)+Jo(f,2)))/2,v=.5*(1-Ko(Jo(g,7)/(Jo(g,7)+Jo(25,7)))),b=c*(1+v),y=p*(1+v),x=Ko(Jo(b,2)+Jo(u,2)),w=Ko(Jo(y,2)+Jo(f,2)),_=(x+w)/2,S=o(ea(u,b)),M=o(ea(f,y)),T=S>=0?S:S+360,E=M>=0?M:M+360,C=ta(T-E)>180?(T+E+360)/2:(T+E)/2,A=1-.17*na(a(C-30))+.24*na(a(2*C))+.32*na(a(3*C+6))-.2*na(a(4*C-63)),R=E-T;R=ta(R)<=180?R:E<=T?R+360:R-360,R=2*Ko(x*w)*ra(a(R)/2);var k=d-l,P=w-x,L=1+.015*Jo(m-50,2)/Ko(20+Jo(m-50,2)),O=1+.045*_,N=1+.015*_*A,I=30*ia(-Jo((C-275)/25,2)),D=-2*Ko(Jo(_,7)/(Jo(_,7)+Jo(25,7)))*ra(2*a(I)),j=Ko(Jo(k/(n*L),2)+Jo(P/(r*O),2)+Jo(R/(i*N),2)+D*(P/(r*O))*(R/(i*N)));return Zo(0,Qo(100,j))},sa=x,la=function(e,t,n){void 0===n&&(n="lab"),e=new sa(e),t=new sa(t);var r=e.get(n),i=t.get(n),o=0;for(var a in r){var s=(r[a]||0)-(i[a]||0);o+=s*s}return Math.sqrt(o)},ca=x,ua=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(ca,[null].concat(e))),!0}catch(n){return!1}},ha=_,da=oo,pa={cool:function(){return da([ha.hsl(180,1,.9),ha.hsl(250,.7,.4)])},hot:function(){return da(["#000","#f00","#ff0","#fff"]).mode("rgb")}},fa={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ma=0,ga=Object.keys(fa);ma<ga.length;ma+=1){var va=ga[ma];fa[va.toLowerCase()]=fa[va]}var ba=fa,ya=_;return ya.average=eo,ya.bezier=ho,ya.blend=To,ya.cubehelix=Oo,ya.mix=ya.interpolate=di,ya.random=Fo,ya.scale=oo,ya.analyze=$o.analyze,ya.contrast=Xo,ya.deltaE=aa,ya.distance=la,ya.limits=$o.limits,ya.valid=ua,ya.scales=pa,ya.colors=jn,ya.brewer=ba,ya}()},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".68e97868.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="MotionComparator:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/MotionComparator/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkMotionComparator=self.webpackChunkMotionComparator||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>ii,AddEquation:()=>Cr,AddOperation:()=>Zr,AdditiveAnimationBlendMode:()=>Yo,AdditiveBlending:()=>Sr,AlphaFormat:()=>Fi,AlwaysDepth:()=>Hr,AlwaysStencilFunc:()=>Ta,AmbientLight:()=>cg,AmbientLightProbe:()=>Eg,AnimationClip:()=>Nm,AnimationLoader:()=>Gm,AnimationMixer:()=>ov,AnimationObjectGroup:()=>rv,AnimationUtils:()=>wm,ArcCurve:()=>ef,ArrayCamera:()=>Md,ArrowHelper:()=>Xv,Audio:()=>Fg,AudioAnalyser:()=>Hg,AudioContext:()=>Sg,AudioListener:()=>jg,AudioLoader:()=>Mg,AxesHelper:()=>Yv,AxisHelper:()=>Mb,BackSide:()=>vr,BasicDepthPacking:()=>aa,BasicShadowMap:()=>dr,BinaryTextureLoader:()=>Rb,Bone:()=>up,BooleanKeyframeTrack:()=>Cm,BoundingBoxHelper:()=>Tb,Box2:()=>mv,Box3:()=>gs,Box3Helper:()=>Vv,BoxBufferGeometry:()=>Sc,BoxGeometry:()=>Sc,BoxHelper:()=>Gv,BufferAttribute:()=>zl,BufferGeometry:()=>rc,BufferGeometryLoader:()=>gg,ByteType:()=>Ci,Cache:()=>Dm,Camera:()=>Ac,CameraHelper:()=>zv,CanvasRenderer:()=>Pb,CanvasTexture:()=>Up,CatmullRomCurve3:()=>sf,CineonToneMapping:()=>ri,CircleBufferGeometry:()=>Gp,CircleGeometry:()=>Gp,ClampToEdgeWrapping:()=>fi,Clock:()=>Pg,Color:()=>Il,ColorKeyframeTrack:()=>Am,CompressedTexture:()=>Bp,CompressedTextureLoader:()=>Vm,ConeBufferGeometry:()=>Hp,ConeGeometry:()=>Hp,CubeCamera:()=>Pc,CubeReflectionMapping:()=>si,CubeRefractionMapping:()=>li,CubeTexture:()=>Lc,CubeTextureLoader:()=>Wm,CubeUVReflectionMapping:()=>hi,CubeUVRefractionMapping:()=>di,CubicBezierCurve:()=>hf,CubicBezierCurve3:()=>df,CubicInterpolant:()=>Sm,CullFaceBack:()=>cr,CullFaceFront:()=>ur,CullFaceFrontBack:()=>hr,CullFaceNone:()=>lr,Curve:()=>Qp,CurvePath:()=>yf,CustomBlending:()=>Er,CustomToneMapping:()=>oi,CylinderBufferGeometry:()=>Vp,CylinderGeometry:()=>Vp,Cylindrical:()=>pv,DataTexture:()=>hp,DataTexture2DArray:()=>Cu,DataTexture3D:()=>Ou,DataTextureLoader:()=>$m,DataUtils:()=>Zv,DecrementStencilOp:()=>fa,DecrementWrapStencilOp:()=>ga,DefaultLoadingManager:()=>Fm,DepthFormat:()=>Hi,DepthStencilFormat:()=>Wi,DepthTexture:()=>Ad,DirectionalLight:()=>lg,DirectionalLightHelper:()=>Dv,DiscreteInterpolant:()=>Tm,DodecahedronBufferGeometry:()=>$p,DodecahedronGeometry:()=>$p,DoubleSide:()=>br,DstAlphaFactor:()=>Fr,DstColorFactor:()=>Br,DynamicBufferAttribute:()=>fb,DynamicCopyUsage:()=>Oa,DynamicDrawUsage:()=>Ca,DynamicReadUsage:()=>ka,EdgesGeometry:()=>Jp,EdgesHelper:()=>Eb,EllipseCurve:()=>Zp,EqualDepth:()=>qr,EqualStencilFunc:()=>xa,EquirectangularReflectionMapping:()=>ci,EquirectangularRefractionMapping:()=>ui,Euler:()=>el,EventDispatcher:()=>ja,ExtrudeBufferGeometry:()=>Kf,ExtrudeGeometry:()=>Kf,FaceColors:()=>rb,FileLoader:()=>Um,FlatShading:()=>yr,Float16BufferAttribute:()=>ql,Float32Attribute:()=>_b,Float32BufferAttribute:()=>Xl,Float64Attribute:()=>Sb,Float64BufferAttribute:()=>Yl,FloatType:()=>Li,Fog:()=>Nd,FogExp2:()=>Od,Font:()=>Fb,FontLoader:()=>jb,FrontSide:()=>gr,Frustum:()=>Bc,GLBufferAttribute:()=>lv,GLSL1:()=>Ia,GLSL3:()=>Da,GammaEncoding:()=>ta,GreaterDepth:()=>Yr,GreaterEqualDepth:()=>Xr,GreaterEqualStencilFunc:()=>Ma,GreaterStencilFunc:()=>_a,GridHelper:()=>Pv,Group:()=>Td,HalfFloatType:()=>Oi,HemisphereLight:()=>Ym,HemisphereLightHelper:()=>kv,HemisphereLightProbe:()=>Tg,IcosahedronBufferGeometry:()=>Qf,IcosahedronGeometry:()=>Qf,ImageBitmapLoader:()=>wg,ImageLoader:()=>Hm,ImageUtils:()=>is,ImmediateRenderObject:()=>zb,IncrementStencilOp:()=>pa,IncrementWrapStencilOp:()=>ma,InstancedBufferAttribute:()=>mp,InstancedBufferGeometry:()=>mg,InstancedInterleavedBuffer:()=>sv,InstancedMesh:()=>xp,Int16Attribute:()=>bb,Int16BufferAttribute:()=>Vl,Int32Attribute:()=>xb,Int32BufferAttribute:()=>Wl,Int8Attribute:()=>mb,Int8BufferAttribute:()=>Bl,IntType:()=>ki,InterleavedBuffer:()=>Dd,InterleavedBufferAttribute:()=>Fd,Interpolant:()=>_m,InterpolateDiscrete:()=>Go,InterpolateLinear:()=>Vo,InterpolateSmooth:()=>Ho,InvertStencilOp:()=>va,JSONLoader:()=>Lb,KeepStencilOp:()=>ha,KeyframeTrack:()=>Em,LOD:()=>rp,LatheBufferGeometry:()=>Zf,LatheGeometry:()=>Zf,Layers:()=>tl,LensFlare:()=>Nb,LessDepth:()=>Wr,LessEqualDepth:()=>$r,LessEqualStencilFunc:()=>wa,LessStencilFunc:()=>ya,Light:()=>Xm,LightProbe:()=>dg,Line:()=>Cp,Line3:()=>bv,LineBasicMaterial:()=>wp,LineCurve:()=>pf,LineCurve3:()=>ff,LineDashedMaterial:()=>ym,LineLoop:()=>Pp,LinePieces:()=>tb,LineSegments:()=>kp,LineStrip:()=>eb,LinearEncoding:()=>Zo,LinearFilter:()=>wi,LinearInterpolant:()=>Mm,LinearMipMapLinearFilter:()=>Ti,LinearMipMapNearestFilter:()=>Si,LinearMipmapLinearFilter:()=>Mi,LinearMipmapNearestFilter:()=>_i,LinearToneMapping:()=>ti,Loader:()=>zm,LoaderUtils:()=>fg,LoadingManager:()=>jm,LoopOnce:()=>zo,LoopPingPong:()=>Uo,LoopRepeat:()=>Bo,LuminanceAlphaFormat:()=>Gi,LuminanceFormat:()=>Ui,MOUSE:()=>ar,Material:()=>Al,MaterialLoader:()=>pg,Math:()=>Ya,MathUtils:()=>Ya,Matrix3:()=>Ja,Matrix4:()=>Hs,MaxEquation:()=>Pr,Mesh:()=>wc,MeshBasicMaterial:()=>Dl,MeshDepthMaterial:()=>gd,MeshDistanceMaterial:()=>vd,MeshFaceMaterial:()=>ob,MeshLambertMaterial:()=>vm,MeshMatcapMaterial:()=>bm,MeshNormalMaterial:()=>gm,MeshPhongMaterial:()=>fm,MeshPhysicalMaterial:()=>pm,MeshStandardMaterial:()=>dm,MeshToonMaterial:()=>mm,MinEquation:()=>kr,MirroredRepeatWrapping:()=>mi,MixOperation:()=>Qr,MultiMaterial:()=>ab,MultiplyBlending:()=>Tr,MultiplyOperation:()=>Jr,NearestFilter:()=>gi,NearestMipMapLinearFilter:()=>xi,NearestMipMapNearestFilter:()=>bi,NearestMipmapLinearFilter:()=>yi,NearestMipmapNearestFilter:()=>vi,NeverDepth:()=>Vr,NeverStencilFunc:()=>ba,NoBlending:()=>wr,NoColors:()=>nb,NoToneMapping:()=>ei,NormalAnimationBlendMode:()=>Xo,NormalBlending:()=>_r,NotEqualDepth:()=>Kr,NotEqualStencilFunc:()=>Sa,NumberKeyframeTrack:()=>Rm,Object3D:()=>ml,ObjectLoader:()=>vg,ObjectSpaceNormalMap:()=>ca,OctahedronBufferGeometry:()=>em,OctahedronGeometry:()=>em,OneFactor:()=>Or,OneMinusDstAlphaFactor:()=>zr,OneMinusDstColorFactor:()=>Ur,OneMinusSrcAlphaFactor:()=>jr,OneMinusSrcColorFactor:()=>Ir,OrthographicCamera:()=>Zc,PCFShadowMap:()=>pr,PCFSoftShadowMap:()=>fr,PMREMGenerator:()=>mu,ParametricGeometry:()=>Ib,Particle:()=>lb,ParticleBasicMaterial:()=>hb,ParticleSystem:()=>cb,ParticleSystemMaterial:()=>db,Path:()=>xf,PerspectiveCamera:()=>Rc,Plane:()=>jc,PlaneBufferGeometry:()=>Vc,PlaneGeometry:()=>Vc,PlaneHelper:()=>Hv,PointCloud:()=>sb,PointCloudMaterial:()=>ub,PointLight:()=>ag,PointLightHelper:()=>Ev,Points:()=>jp,PointsMaterial:()=>Lp,PolarGridHelper:()=>Lv,PolyhedronBufferGeometry:()=>Wp,PolyhedronGeometry:()=>Wp,PositionalAudio:()=>Vg,PropertyBinding:()=>nv,PropertyMixer:()=>Wg,QuadraticBezierCurve:()=>mf,QuadraticBezierCurve3:()=>gf,Quaternion:()=>ds,QuaternionKeyframeTrack:()=>Pm,QuaternionLinearInterpolant:()=>km,REVISION:()=>or,RGBADepthPacking:()=>sa,RGBAFormat:()=>Bi,RGBAIntegerFormat:()=>Ji,RGBA_ASTC_10x10_Format:()=>wo,RGBA_ASTC_10x5_Format:()=>bo,RGBA_ASTC_10x6_Format:()=>yo,RGBA_ASTC_10x8_Format:()=>xo,RGBA_ASTC_12x10_Format:()=>_o,RGBA_ASTC_12x12_Format:()=>So,RGBA_ASTC_4x4_Format:()=>co,RGBA_ASTC_5x4_Format:()=>uo,RGBA_ASTC_5x5_Format:()=>ho,RGBA_ASTC_6x5_Format:()=>po,RGBA_ASTC_6x6_Format:()=>fo,RGBA_ASTC_8x5_Format:()=>mo,RGBA_ASTC_8x6_Format:()=>go,RGBA_ASTC_8x8_Format:()=>vo,RGBA_BPTC_Format:()=>Mo,RGBA_ETC2_EAC_Format:()=>lo,RGBA_PVRTC_2BPPV1_Format:()=>oo,RGBA_PVRTC_4BPPV1_Format:()=>io,RGBA_S3TC_DXT1_Format:()=>Zi,RGBA_S3TC_DXT3_Format:()=>eo,RGBA_S3TC_DXT5_Format:()=>to,RGBDEncoding:()=>oa,RGBEEncoding:()=>na,RGBEFormat:()=>Vi,RGBFormat:()=>zi,RGBIntegerFormat:()=>Ki,RGBM16Encoding:()=>ia,RGBM7Encoding:()=>ra,RGB_ETC1_Format:()=>ao,RGB_ETC2_Format:()=>so,RGB_PVRTC_2BPPV1_Format:()=>ro,RGB_PVRTC_4BPPV1_Format:()=>no,RGB_S3TC_DXT1_Format:()=>Qi,RGFormat:()=>Xi,RGIntegerFormat:()=>Yi,RawShaderMaterial:()=>eu,Ray:()=>Vs,Raycaster:()=>cv,RectAreaLight:()=>ug,RedFormat:()=>$i,RedIntegerFormat:()=>qi,ReinhardToneMapping:()=>ni,RepeatWrapping:()=>pi,ReplaceStencilOp:()=>da,ReverseSubtractEquation:()=>Rr,RingBufferGeometry:()=>tm,RingGeometry:()=>tm,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Do,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Oo,SRGB8_ALPHA8_ASTC_10x6_Format:()=>No,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Io,SRGB8_ALPHA8_ASTC_12x10_Format:()=>jo,SRGB8_ALPHA8_ASTC_12x12_Format:()=>Fo,SRGB8_ALPHA8_ASTC_4x4_Format:()=>To,SRGB8_ALPHA8_ASTC_5x4_Format:()=>Eo,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Co,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Ao,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Ro,SRGB8_ALPHA8_ASTC_8x5_Format:()=>ko,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Po,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Lo,Scene:()=>Id,SceneUtils:()=>Ob,ShaderChunk:()=>Hc,ShaderLib:()=>$c,ShaderMaterial:()=>Cc,ShadowMaterial:()=>hm,Shape:()=>wf,ShapeBufferGeometry:()=>nm,ShapeGeometry:()=>nm,ShapePath:()=>Kv,ShapeUtils:()=>qf,ShortType:()=>Ai,Skeleton:()=>fp,SkeletonHelper:()=>Mv,SkinnedMesh:()=>cp,SmoothShading:()=>xr,Sphere:()=>Is,SphereBufferGeometry:()=>rm,SphereGeometry:()=>rm,Spherical:()=>dv,SphericalHarmonics3:()=>hg,SplineCurve:()=>vf,SpotLight:()=>tg,SpotLightHelper:()=>xv,Sprite:()=>Zd,SpriteMaterial:()=>zd,SrcAlphaFactor:()=>Dr,SrcAlphaSaturateFactor:()=>Gr,SrcColorFactor:()=>Nr,StaticCopyUsage:()=>La,StaticDrawUsage:()=>Ea,StaticReadUsage:()=>Ra,StereoCamera:()=>kg,StreamCopyUsage:()=>Na,StreamDrawUsage:()=>Aa,StreamReadUsage:()=>Pa,StringKeyframeTrack:()=>Lm,SubtractEquation:()=>Ar,SubtractiveBlending:()=>Mr,TOUCH:()=>sr,TangentSpaceNormalMap:()=>la,TetrahedronBufferGeometry:()=>im,TetrahedronGeometry:()=>im,TextGeometry:()=>Db,Texture:()=>as,TextureLoader:()=>qm,TorusBufferGeometry:()=>om,TorusGeometry:()=>om,TorusKnotBufferGeometry:()=>am,TorusKnotGeometry:()=>am,Triangle:()=>El,TriangleFanDrawMode:()=>Qo,TriangleStripDrawMode:()=>Jo,TrianglesDrawMode:()=>Ko,TubeBufferGeometry:()=>sm,TubeGeometry:()=>sm,UVMapping:()=>ai,Uint16Attribute:()=>yb,Uint16BufferAttribute:()=>Hl,Uint32Attribute:()=>wb,Uint32BufferAttribute:()=>$l,Uint8Attribute:()=>gb,Uint8BufferAttribute:()=>Ul,Uint8ClampedAttribute:()=>vb,Uint8ClampedBufferAttribute:()=>Gl,Uniform:()=>av,UniformsLib:()=>Wc,UniformsUtils:()=>Ec,UnsignedByteType:()=>Ei,UnsignedInt248Type:()=>ji,UnsignedIntType:()=>Pi,UnsignedShort4444Type:()=>Ni,UnsignedShort5551Type:()=>Ii,UnsignedShort565Type:()=>Di,UnsignedShortType:()=>Ri,VSMShadowMap:()=>mr,Vector2:()=>Ka,Vector3:()=>ps,Vector4:()=>ls,VectorKeyframeTrack:()=>Om,Vertex:()=>pb,VertexColors:()=>ib,VideoTexture:()=>zp,WebGL1Renderer:()=>Ld,WebGLCubeRenderTarget:()=>Oc,WebGLMultipleRenderTargets:()=>us,WebGLMultisampleRenderTarget:()=>hs,WebGLRenderTarget:()=>cs,WebGLRenderTargetCube:()=>kb,WebGLRenderer:()=>Pd,WebGLUtils:()=>Sd,WireframeGeometry:()=>lm,WireframeHelper:()=>Cb,WrapAroundEnding:()=>qo,XHRLoader:()=>Ab,ZeroCurvatureEnding:()=>Wo,ZeroFactor:()=>Lr,ZeroSlopeEnding:()=>$o,ZeroStencilOp:()=>ua,sRGBEncoding:()=>ea});var t=n(5043),r=n(4391),i=n(2539),o=n.n(i);const a=()=>{};let s={},l={},c=null,u={mark:a,measure:a};try{"undefined"!==typeof window&&(s=window),"undefined"!==typeof document&&(l=document),"undefined"!==typeof MutationObserver&&(c=MutationObserver),"undefined"!==typeof performance&&(u=performance)}catch(tq){}const{userAgent:h=""}=s.navigator||{},d=s,p=l,f=c,m=u,g=(d.document,!!p.documentElement&&!!p.head&&"function"===typeof p.addEventListener&&"function"===typeof p.createElement),v=~h.indexOf("MSIE")||~h.indexOf("Trident/");var b="classic",y="duotone",x="sharp",w="sharp-duotone",_=[b,y,x,w],S={fak:"kit","fa-kit":"kit"},M={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},T={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},E=[1,2,3,4,5,6,7,8,9,10],C=E.concat([11,12,13,14,15,16,17,18,19,20]),A={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},R=[...Object.keys({classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",A.GROUP,A.SWAP_OPACITY,A.PRIMARY,A.SECONDARY].concat(E.map((e=>"".concat(e,"x")))).concat(C.map((e=>"w-".concat(e)))),k={kit:"fak"},P={"kit-duotone":"fakd"};const L="___FONT_AWESOME___",O=16,N="fa",I="svg-inline--fa",D="data-fa-i2svg",j="data-fa-pseudo-element",F="data-fa-pseudo-element-pending",z="data-prefix",B="data-icon",U="fontawesome-i2svg",G="async",V=["HTML","HEAD","STYLE","SCRIPT"],H=(()=>{try{return!0}catch(e){return!1}})(),W=[b,x,w];function $(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[b]})}const q={...T};q[b]={...T[b],...S,...M};const X=$(q),Y={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}};Y[b]={...Y[b],...k,...P};const K=$(Y),J={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}};J[b]={...J[b],fak:"fa-kit"};const Q=$(J),Z={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}};Z[b]={...Z[b],"fa-kit":"fak"};const ee=$(Z),te=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,ne="fa-layers-text",re=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,ie=($({classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}}),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),oe=A,ae=new Set;Object.keys(K[b]).map(ae.add.bind(ae)),Object.keys(K[x]).map(ae.add.bind(ae)),Object.keys(K[w]).map(ae.add.bind(ae));const se=["kit",...R],le=d.FontAwesomeConfig||{};if(p&&"function"===typeof p.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=p.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));void 0!==r&&null!==r&&(le[n]=r)}))}const ce={styleDefault:"solid",familyDefault:"classic",cssPrefix:N,replacementClass:I,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};le.familyPrefix&&(le.cssPrefix=le.familyPrefix);const ue={...ce,...le};ue.autoReplaceSvg||(ue.observeMutations=!1);const he={};Object.keys(ce).forEach((e=>{Object.defineProperty(he,e,{enumerable:!0,set:function(t){ue[e]=t,de.forEach((e=>e(he)))},get:function(){return ue[e]}})})),Object.defineProperty(he,"familyPrefix",{enumerable:!0,set:function(e){ue.cssPrefix=e,de.forEach((e=>e(he)))},get:function(){return ue.cssPrefix}}),d.FontAwesomeConfig=he;const de=[];const pe=O,fe={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};const me="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ge(){let e=12,t="";for(;e-- >0;)t+=me[62*Math.random()|0];return t}function ve(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function be(e){return e.classList?ve(e.classList):(e.getAttribute("class")||"").split(" ").filter((e=>e))}function ye(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xe(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";")),"")}function we(e){return e.size!==fe.size||e.x!==fe.x||e.y!==fe.y||e.rotate!==fe.rotate||e.flipX||e.flipY}var _e=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function Se(){const e=N,t=I,n=he.cssPrefix,r=he.replacementClass;let i=_e;if(n!==e||r!==t){const o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}let Me=!1;function Te(){he.autoAddCss&&!Me&&(!function(e){if(!e||!g)return;const t=p.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=p.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const e=n[i],t=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(t)>-1&&(r=e)}p.head.insertBefore(t,r)}(Se()),Me=!0)}var Ee={mixout:()=>({dom:{css:Se,insertCss:Te}}),hooks:()=>({beforeDOMElementCreation(){Te()},beforeI2svg(){Te()}})};const Ce=d||{};Ce[L]||(Ce[L]={}),Ce[L].styles||(Ce[L].styles={}),Ce[L].hooks||(Ce[L].hooks={}),Ce[L].shims||(Ce[L].shims=[]);var Ae=Ce[L];const Re=[],ke=function(){p.removeEventListener("DOMContentLoaded",ke),Pe=1,Re.map((e=>e()))};let Pe=!1;function Le(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"===typeof e?ye(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,'="').concat(ye(e[n]),'" ')),"").trim()}(n),">").concat(r.map(Le).join(""),"</").concat(t,">")}function Oe(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}g&&(Pe=(p.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(p.readyState),Pe||p.addEventListener("DOMContentLoaded",ke));var Ne=function(e,t,n,r){var i,o,a,s=Object.keys(e),l=s.length,c=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<l;i++)a=c(a,e[o=s[i]],o,e);return a};function Ie(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function De(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function je(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,i=De(t);"function"!==typeof Ae.hooks.addPack||r?Ae.styles[e]={...Ae.styles[e]||{},...i}:Ae.hooks.addPack(e,De(t)),"fas"===e&&je("fa",t)}const{styles:Fe,shims:ze}=Ae,Be={[b]:Object.values(Q[b]),[x]:Object.values(Q[x]),[w]:Object.values(Q[w])};let Ue=null,Ge={},Ve={},He={},We={},$e={};const qe={[b]:Object.keys(X[b]),[x]:Object.keys(X[x]),[w]:Object.keys(X[w])};function Xe(e,t){const n=t.split("-"),r=n[0],i=n.slice(1).join("-");return r!==e||""===i||(o=i,~se.indexOf(o))?null:i;var o}const Ye=()=>{const e=e=>Ne(Fe,((t,n,r)=>(t[r]=Ne(n,e,{}),t)),{});Ge=e(((e,t,n)=>{if(t[3]&&(e[t[3]]=n),t[2]){t[2].filter((e=>"number"===typeof e)).forEach((t=>{e[t.toString(16)]=n}))}return e})),Ve=e(((e,t,n)=>{if(e[n]=n,t[2]){t[2].filter((e=>"string"===typeof e)).forEach((t=>{e[t]=n}))}return e})),$e=e(((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach((t=>{e[t]=n})),e}));const t="far"in Fe||he.autoFetchSvg,n=Ne(ze,((e,n)=>{const r=n[0];let i=n[1];const o=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:o}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:o}),e}),{names:{},unicodes:{}});He=n.names,We=n.unicodes,Ue=nt(he.styleDefault,{family:he.familyDefault})};var Ke;function Je(e,t){return(Ge[e]||{})[t]}function Qe(e,t){return($e[e]||{})[t]}function Ze(e){return He[e]||{prefix:null,iconName:null}}function et(){return Ue}Ke=e=>{Ue=nt(e.styleDefault,{family:he.familyDefault})},de.push(Ke),Ye();const tt=()=>({prefix:null,iconName:null,rest:[]});function nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=b}=t,r=X[n][e],i=K[n][e]||K[n][r],o=e in Ae.styles?e:null;return i||o||null}const rt={[b]:Object.keys(Q[b]),[x]:Object.keys(Q[x]),[w]:Object.keys(Q[w])};function it(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t,r={[b]:"".concat(he.cssPrefix,"-").concat(b),[x]:"".concat(he.cssPrefix,"-").concat(x),[w]:"".concat(he.cssPrefix,"-").concat(w)};let i=null,o=b;const a=_.filter((e=>e!==y));a.forEach((t=>{(e.includes(r[t])||e.some((e=>rt[t].includes(e))))&&(o=t)}));const s=e.reduce(((e,t)=>{const s=Xe(he.cssPrefix,t);if(Fe[t]?(t=Be[o].includes(t)?ee[o][t]:t,i=t,e.prefix=t):qe[o].indexOf(t)>-1?(i=t,e.prefix=nt(t,{family:o})):s?e.iconName=s:t===he.replacementClass||a.some((e=>t===r[e]))||e.rest.push(t),!n&&e.prefix&&e.iconName){const t="fa"===i?Ze(e.iconName):{},n=Qe(e.prefix,e.iconName);t.prefix&&(i=null),e.iconName=t.iconName||n||e.iconName,e.prefix=t.prefix||e.prefix,"far"!==e.prefix||Fe.far||!Fe.fas||he.autoFetchSvg||(e.prefix="fas")}return e}),tt());return(e.includes("fa-brands")||e.includes("fab"))&&(s.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(s.prefix="fad"),s.prefix||o!==x||!Fe.fass&&!he.autoFetchSvg||(s.prefix="fass",s.iconName=Qe(s.prefix,s.iconName)||s.iconName),s.prefix||o!==w||!Fe.fasds&&!he.autoFetchSvg||(s.prefix="fasds",s.iconName=Qe(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==i||(s.prefix=et()||"fas"),s}let ot=[],at={};const st={},lt=Object.keys(st);function ct(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(at[e]||[]).forEach((e=>{t=e.apply(null,[t,...r])})),t}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(at[e]||[]).forEach((e=>{e.apply(null,n)}))}function ht(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return st[e]?st[e].apply(null,t):void 0}function dt(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||et();if(t)return t=Qe(n,t)||t,Oe(pt.definitions,n,t)||Oe(Ae.styles,n,t)}const pt=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach((e=>{this.definitions[e]={...this.definitions[e]||{},...r[e]},je(e,r[e]);const t=Q[b][e];t&&je(t,r[e]),Ye()}))}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((t=>{const{prefix:r,iconName:i,icon:o}=n[t],a=o[2];e[r]||(e[r]={}),a.length>0&&a.forEach((t=>{"string"===typeof t&&(e[r][t]=o)})),e[r][i]=o})),e}},ft={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g?(ut("beforeI2svg",e),ht("pseudoElements2svg",e),ht("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===he.autoReplaceSvg&&(he.autoReplaceSvg=!0),he.observeMutations=!0,n=()=>{vt({autoReplaceSvgRoot:t}),ut("watch",e)},g&&(Pe?setTimeout(n,0):Re.push(n))}},mt={icon:e=>{if(null===e)return null;if("object"===typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Qe(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=nt(e[0]);return{prefix:n,iconName:Qe(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(he.cssPrefix,"-"))>-1||e.match(te))){const t=it(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||et(),iconName:Qe(t.prefix,t.iconName)||t.iconName}}if("string"===typeof e){const t=et();return{prefix:t,iconName:Qe(t,e)||e}}}},gt={noAuto:()=>{he.autoReplaceSvg=!1,he.observeMutations=!1,ut("noAuto")},config:he,dom:ft,parse:mt,library:pt,findIconDefinition:dt,toHtml:Le},vt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=p}=e;(Object.keys(Ae.styles).length>0||he.autoFetchSvg)&&g&&he.autoReplaceSvg&&gt.dom.i2svg({node:t})};function bt(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((e=>Le(e)))}}),Object.defineProperty(e,"node",{get:function(){if(!g)return;const t=p.createElement("div");return t.innerHTML=e.html,t.children}}),e}function yt(e){const{icons:{main:t,mask:n},prefix:r,iconName:i,transform:o,symbol:a,title:s,maskId:l,titleId:c,extra:u,watchable:h=!1}=e,{width:d,height:p}=n.found?n:t,f="fak"===r,m=[he.replacementClass,i?"".concat(he.cssPrefix,"-").concat(i):""].filter((e=>-1===u.classes.indexOf(e))).filter((e=>""!==e||!!e)).concat(u.classes).join(" ");let g={children:[],attributes:{...u.attributes,"data-prefix":r,"data-icon":i,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(p)}};const v=f&&!~u.classes.indexOf("fa-fw")?{width:"".concat(d/p*16*.0625,"em")}:{};h&&(g.attributes[D]=""),s&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||ge())},children:[s]}),delete g.attributes.title);const b={...g,prefix:r,iconName:i,main:t,mask:n,maskId:l,transform:o,symbol:a,styles:{...v,...u.styles}},{children:y,attributes:x}=n.found&&t.found?ht("generateAbstractMask",b)||{children:[],attributes:{}}:ht("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=y,b.attributes=x,a?function(e){let{prefix:t,iconName:n,children:r,attributes:i,symbol:o}=e;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...i,id:!0===o?"".concat(t,"-").concat(he.cssPrefix,"-").concat(n):o},children:r}]}]}(b):function(e){let{children:t,main:n,mask:r,attributes:i,styles:o,transform:a}=e;if(we(a)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};i.style=xe({...o,"transform-origin":"".concat(r.x+a.x/16,"em ").concat(r.y+a.y/16,"em")})}return[{tag:"svg",attributes:i,children:t}]}(b)}function xt(e){const{content:t,width:n,height:r,transform:i,title:o,extra:a,watchable:s=!1}=e,l={...a.attributes,...o?{title:o}:{},class:a.classes.join(" ")};s&&(l[D]="");const c={...a.styles};we(i)&&(c.transform=function(e){let{transform:t,width:n=O,height:r=O,startCentered:i=!1}=e,o="";return o+=i&&v?"translate(".concat(t.x/pe-n/2,"em, ").concat(t.y/pe-r/2,"em) "):i?"translate(calc(-50% + ".concat(t.x/pe,"em), calc(-50% + ").concat(t.y/pe,"em)) "):"translate(".concat(t.x/pe,"em, ").concat(t.y/pe,"em) "),o+="scale(".concat(t.size/pe*(t.flipX?-1:1),", ").concat(t.size/pe*(t.flipY?-1:1),") "),o+="rotate(".concat(t.rotate,"deg) "),o}({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=xe(c);u.length>0&&(l.style=u);const h=[];return h.push({tag:"span",attributes:l,children:[t]}),o&&h.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),h}const{styles:wt}=Ae;function _t(e){const t=e[0],n=e[1],[r]=e.slice(4);let i=null;return i=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(he.cssPrefix,"-").concat(oe.GROUP)},children:[{tag:"path",attributes:{class:"".concat(he.cssPrefix,"-").concat(oe.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(he.cssPrefix,"-").concat(oe.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:i}}const St={found:!1,width:512,height:512};function Mt(e,t){let n=t;return"fa"===t&&null!==he.styleDefault&&(t=et()),new Promise(((r,i)=>{if("fa"===n){const n=Ze(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&wt[t]&&wt[t][e]){return r(_t(wt[t][e]))}!function(e,t){H||he.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r({...St,icon:he.showMissingIcons&&e&&ht("missingIconAbstract")||{}})}))}const Tt=()=>{},Et=he.measurePerformance&&m&&m.mark&&m.measure?m:{mark:Tt,measure:Tt},Ct='FA "6.6.0"',At=e=>{Et.mark("".concat(Ct," ").concat(e," ends")),Et.measure("".concat(Ct," ").concat(e),"".concat(Ct," ").concat(e," begins"),"".concat(Ct," ").concat(e," ends"))};var Rt={begin:e=>(Et.mark("".concat(Ct," ").concat(e," begins")),()=>At(e)),end:At};const kt=()=>{};function Pt(e){return"string"===typeof(e.getAttribute?e.getAttribute(D):null)}function Lt(e){return p.createElementNS("http://www.w3.org/2000/svg",e)}function Ot(e){return p.createElement(e)}function Nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?Lt:Ot)}=t;if("string"===typeof e)return p.createTextNode(e);const r=n(e.tag);Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])}));return(e.children||[]).forEach((function(e){r.appendChild(Nt(e,{ceFn:n}))})),r}const It={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach((e=>{t.parentNode.insertBefore(Nt(e),t)})),null===t.getAttribute(D)&&he.keepOriginalSource){let e=p.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~be(t).indexOf(he.replacementClass))return It.replace(e);const r=new RegExp("".concat(he.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce(((e,t)=>(t===he.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e)),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const i=n.map((e=>Le(e))).join("\n");t.setAttribute(D,""),t.innerHTML=i}};function Dt(e){e()}function jt(e,t){const n="function"===typeof t?t:kt;if(0===e.length)n();else{let t=Dt;he.mutateApproach===G&&(t=d.requestAnimationFrame||Dt),t((()=>{const t=!0===he.autoReplaceSvg?It.replace:It[he.autoReplaceSvg]||It.replace,r=Rt.begin("mutate");e.map(t),r(),n()}))}}let Ft=!1;function zt(){Ft=!0}function Bt(){Ft=!1}let Ut=null;function Gt(e){if(!f)return;if(!he.observeMutations)return;const{treeCallback:t=kt,nodeCallback:n=kt,pseudoElementsCallback:r=kt,observeMutationsRoot:i=p}=e;Ut=new f((e=>{if(Ft)return;const i=et();ve(e).forEach((e=>{if("childList"===e.type&&e.addedNodes.length>0&&!Pt(e.addedNodes[0])&&(he.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&he.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&Pt(e.target)&&~ie.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(z):null,n=e.getAttribute?e.getAttribute(B):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=it(be(e.target));e.target.setAttribute(z,t||i),n&&e.target.setAttribute(B,n)}else(function(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(he.replacementClass)})(e.target)&&n(e.target)}))})),g&&Ut.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Vt(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let i=it(be(e));return i.prefix||(i.prefix=et()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Ve[e]||{})[t]}(i.prefix,e.innerText)||Je(i.prefix,Ie(e.innerText))),!i.iconName&&he.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=Vt(e),o=function(e){const t=ve(e.attributes).reduce(((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e)),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return he.autoA11y&&(n?t["aria-labelledby"]="".concat(he.replacementClass,"-title-").concat(r||ge()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=ct("parseNodeAttributes",{},e);let s=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce(((e,t)=>{const n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return{iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:fe,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:s,attributes:o},...a}}const{styles:Wt}=Ae;function $t(e){const t="nest"===he.autoReplaceSvg?Ht(e,{styleParser:!1}):Ht(e);return~t.extra.classes.indexOf(ne)?ht("generateLayersText",e,t):ht("generateSvgReplacementMutation",e,t)}let qt=new Set;function Xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!g)return Promise.resolve();const n=p.documentElement.classList,r=e=>n.add("".concat(U,"-").concat(e)),i=e=>n.remove("".concat(U,"-").concat(e)),o=he.autoFetchSvg?qt:W.map((e=>"fa-".concat(e))).concat(Object.keys(Wt));o.includes("fa")||o.push("fa");const a=[".".concat(ne,":not([").concat(D,"])")].concat(o.map((e=>".".concat(e,":not([").concat(D,"])")))).join(", ");if(0===a.length)return Promise.resolve();let s=[];try{s=ve(e.querySelectorAll(a))}catch(u){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");const l=Rt.begin("onTree"),c=s.reduce(((e,t)=>{try{const n=$t(t);n&&e.push(n)}catch(u){H||"MissingIcon"===u.name&&console.error(u)}return e}),[]);return new Promise(((e,n)=>{Promise.all(c).then((n=>{jt(n,(()=>{r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((e=>{l(),n(e)}))}))}function Yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$t(e).then((e=>{e&&jt([e],t)}))}W.map((e=>{qt.add("fa-".concat(e))})),Object.keys(X[b]).map(qt.add.bind(qt)),Object.keys(X[x]).map(qt.add.bind(qt)),Object.keys(X[w]).map(qt.add.bind(qt)),qt=[...qt];const Kt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=fe,symbol:r=!1,mask:i=null,maskId:o=null,title:a=null,titleId:s=null,classes:l=[],attributes:c={},styles:u={}}=t;if(!e)return;const{prefix:h,iconName:d,icon:p}=e;return bt({type:"icon",...e},(()=>(ut("beforeDOMElementCreation",{iconDefinition:e,params:t}),he.autoA11y&&(a?c["aria-labelledby"]="".concat(he.replacementClass,"-title-").concat(s||ge()):(c["aria-hidden"]="true",c.focusable="false")),yt({icons:{main:_t(p),mask:i?_t(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:d,transform:{...fe,...n},symbol:r,title:a,maskId:o,titleId:s,extra:{attributes:c,styles:u,classes:l}}))))};var Jt={mixout(){return{icon:(e=Kt,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:dt(t||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:dt(i||{})),e(r,{...n,mask:i})})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=Xt,e.nodeCallback=Yt,e)}),provides(e){e.i2svg=function(e){const{node:t=p,callback:n=()=>{}}=e;return Xt(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:i,prefix:o,transform:a,symbol:s,mask:l,maskId:c,extra:u}=t;return new Promise(((t,h)=>{Promise.all([Mt(n,o),l.iconName?Mt(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((l=>{let[h,d]=l;t([e,yt({icons:{main:h,mask:d},prefix:o,iconName:n,transform:a,symbol:s,maskId:c,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:i,styles:o}=e;const a=xe(o);let s;return a.length>0&&(n.style=a),we(i)&&(s=ht("generateAbstractTransformGrouping",{main:r,transform:i,containerWidth:r.width,iconWidth:r.width})),t.push(s||r.icon),{children:t,attributes:n}}}},Qt={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return bt({type:"layer"},(()=>{ut("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e((e=>{Array.isArray(e)?e.map((e=>{r=r.concat(e.abstract)})):r=r.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(he.cssPrefix,"-layers"),...n].join(" ")},children:r}]}))}})},Zt={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:o={}}=t;return bt({type:"counter",content:e},(()=>(ut("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,i={...r.attributes,...n?{title:n}:{},class:r.classes.join(" ")},o=xe(r.styles);o.length>0&&(i.style=o);const a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}({content:e.toString(),title:n,extra:{attributes:i,styles:o,classes:["".concat(he.cssPrefix,"-layers-counter"),...r]}}))))}})},en={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=fe,title:r=null,classes:i=[],attributes:o={},styles:a={}}=t;return bt({type:"text",content:e},(()=>(ut("beforeDOMElementCreation",{content:e,params:t}),xt({content:e,transform:{...fe,...n},title:r,extra:{attributes:o,styles:a,classes:["".concat(he.cssPrefix,"-layers-text"),...i]}}))))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:i}=t;let o=null,a=null;if(v){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();o=n.width/t,a=n.height/t}return he.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,xt({content:e.innerHTML,width:o,height:a,transform:r,title:n,extra:i,watchable:!0})])}}};const tn=new RegExp('"',"ug"),nn=[1105920,1112319],rn={FontAwesome:{normal:"fas",400:"fas"},"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"},"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"},"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},on=Object.keys(rn).reduce(((e,t)=>(e[t.toLowerCase()]=rn[t],e)),{}),an=Object.keys(on).reduce(((e,t)=>{const n=on[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e}),{});function sn(e,t){const n="".concat(F).concat(t.replace(":","-"));return new Promise(((r,i)=>{if(null!==e.getAttribute(n))return r();const o=ve(e.children).filter((e=>e.getAttribute(j)===t))[0],a=d.getComputedStyle(e,t),s=a.getPropertyValue("font-family"),l=s.match(re),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return e.removeChild(o),r();if(l&&"none"!==u&&""!==u){const u=a.getPropertyValue("content");let h=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),i=isNaN(r)?"normal":r;return(on[n]||{})[i]||an[n]}(s,c);const{value:d,isSecondary:f}=function(e){const t=e.replace(tn,""),n=function(e,t){const n=e.length;let r,i=e.charCodeAt(t);return i>=55296&&i<=56319&&n>t+1&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?1024*(i-55296)+r-56320+65536:i}(t,0),r=n>=nn[0]&&n<=nn[1],i=2===t.length&&t[0]===t[1];return{value:Ie(i?t[0]:t),isSecondary:r||i}}(u),m=l[0].startsWith("FontAwesome");let g=Je(h,d),v=g;if(m){const e=function(e){const t=We[e],n=Je("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);e.iconName&&e.prefix&&(g=e.iconName,h=e.prefix)}if(!g||f||o&&o.getAttribute(z)===h&&o.getAttribute(B)===v)r();else{e.setAttribute(n,v),o&&e.removeChild(o);const a={iconName:null,title:null,titleId:null,prefix:null,transform:fe,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:s}=a;s.attributes[j]=t,Mt(g,h).then((i=>{const o=yt({...a,icons:{main:i,mask:tt()},prefix:h,iconName:v,extra:s,watchable:!0}),l=p.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(l,e.firstChild):e.appendChild(l),l.outerHTML=o.map((e=>Le(e))).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function ln(e){return Promise.all([sn(e,"::before"),sn(e,"::after")])}function cn(e){return e.parentNode!==document.head&&!~V.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(j)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function un(e){if(g)return new Promise(((t,n)=>{const r=ve(e.querySelectorAll("*")).filter(cn).map(ln),i=Rt.begin("searchPseudoElements");zt(),Promise.all(r).then((()=>{i(),Bt(),t()})).catch((()=>{i(),Bt(),n()}))}))}var hn={hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=un,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=p}=e;he.searchPseudoElements&&un(t)}}};let dn=!1;var pn={mixout:()=>({dom:{unwatch(){zt(),dn=!0}}}),hooks:()=>({bootstrap(){Gt(ct("mutationObserverCallbacks",{}))},noAuto(){Ut&&Ut.disconnect()},watch(e){const{observeMutationsRoot:t}=e;dn?Bt():Gt(ct("mutationObserverCallbacks",{observeMutationsRoot:t}))}})};const fn=e=>e.toLowerCase().split(" ").reduce(((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var mn={mixout:()=>({parse:{transform:e=>fn(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=fn(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:i}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={transform:"".concat(a," ").concat(s," ").concat(l)},u={transform:"translate(".concat(i/2*-1," -256)")};return{tag:"g",attributes:{...o},children:[{tag:"g",attributes:{...c},children:[{tag:t.icon.tag,children:t.icon.children,attributes:{...t.icon.attributes,...u}}]}]}}}};const gn={x:0,y:0,width:"100%",height:"100%"};function vn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var bn={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?it(n.split(" ").map((e=>e.trim()))):tt();return r.prefix||(r.prefix=et()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:i,maskId:o,transform:a}=e;const{width:s,icon:l}=r,{width:c,icon:u}=i,h=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:a,containerWidth:c,iconWidth:s}),d={tag:"rect",attributes:{...gn,fill:"white"}},p=l.children?{children:l.children.map(vn)}:{},f={tag:"g",attributes:{...h.inner},children:[vn({tag:l.tag,attributes:{...l.attributes,...h.path},...p})]},m={tag:"g",attributes:{...h.outer},children:[f]},g="mask-".concat(o||ge()),v="clip-".concat(o||ge()),b={tag:"mask",attributes:{...gn,id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[d,m]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(x=u,"g"===x.tag?x.children:[x])},b]};var x;return t.push(y,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(g,")"),...gn}}),{children:t,attributes:n}}}},yn={provides(e){let t=!1;d.matchMedia&&(t=d.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:{...n,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const i={...r,attributeName:"opacity"},o={tag:"circle",attributes:{...n,cx:"256",cy:"364",r:"28"},children:[]};return t||o.children.push({tag:"animate",attributes:{...r,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...i,values:"1;0;1;1;0;1;"}}),e.push(o),e.push({tag:"path",attributes:{...n,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:t?[]:[{tag:"animate",attributes:{...i,values:"1;0;0;0;0;1;"}}]}),t||e.push({tag:"path",attributes:{...n,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...i,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},xn={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})};!function(e,t){let{mixoutsTo:n}=t;ot=e,at={},Object.keys(st).forEach((e=>{-1===lt.indexOf(e)&&delete st[e]})),ot.forEach((e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((e=>{"function"===typeof t[e]&&(n[e]=t[e]),"object"===typeof t[e]&&Object.keys(t[e]).forEach((r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){const t=e.hooks();Object.keys(t).forEach((e=>{at[e]||(at[e]=[]),at[e].push(t[e])}))}e.provides&&e.provides(st)}))}([Ee,Jt,Qt,Zt,en,hn,pn,mn,bn,yn,xn],{mixoutsTo:gt});const wn=gt.parse,_n=gt.icon;var Sn=n(5173),Mn=n.n(Sn);function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kn(e){return function(e){if(Array.isArray(e))return Pn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ln(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var On=["style"];var Nn=!1;try{Nn=!0}catch(tq){}function In(e){return e&&"object"===Cn(e)&&e.prefix&&e.iconName&&e.icon?e:wn.icon?wn.icon(e):null===e?null:e&&"object"===Cn(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Dn(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?An({},e,t):{}}var jn={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Fn=t.forwardRef((function(e,t){var n=En(En({},jn),e),r=n.icon,i=n.mask,o=n.symbol,a=n.className,s=n.title,l=n.titleId,c=n.maskId,u=In(r),h=Dn("classes",[].concat(kn(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,o=e.bounce,a=e.shake,s=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,p=e.inverse,f=e.border,m=e.listItem,g=e.flip,v=e.size,b=e.rotation,y=e.pull,x=(An(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":a,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":p,"fa-border":f,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),"undefined"!==typeof v&&null!==v),An(t,"fa-rotate-".concat(b),"undefined"!==typeof b&&null!==b&&0!==b),An(t,"fa-pull-".concat(y),"undefined"!==typeof y&&null!==y),An(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(x).map((function(e){return x[e]?e:null})).filter((function(e){return e}))}(n)),kn((a||"").split(" ")))),d=Dn("transform","string"===typeof n.transform?wn.transform(n.transform):n.transform),p=Dn("mask",In(i)),f=_n(u,En(En(En(En({},h),d),p),{},{symbol:o,title:s,titleId:l,maskId:c}));if(!f)return function(){var e;!Nn&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=f.abstract,g={ref:t};return Object.keys(n).forEach((function(e){jn.hasOwnProperty(e)||(g[e]=n[e])})),zn(m[0],g)}));Fn.displayName="FontAwesomeIcon",Fn.propTypes={beat:Mn().bool,border:Mn().bool,beatFade:Mn().bool,bounce:Mn().bool,className:Mn().string,fade:Mn().bool,flash:Mn().bool,mask:Mn().oneOfType([Mn().object,Mn().array,Mn().string]),maskId:Mn().string,fixedWidth:Mn().bool,inverse:Mn().bool,flip:Mn().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Mn().oneOfType([Mn().object,Mn().array,Mn().string]),listItem:Mn().bool,pull:Mn().oneOf(["right","left"]),pulse:Mn().bool,rotation:Mn().oneOf([0,90,180,270]),shake:Mn().bool,size:Mn().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Mn().bool,spinPulse:Mn().bool,spinReverse:Mn().bool,symbol:Mn().oneOfType([Mn().bool,Mn().string]),title:Mn().string,titleId:Mn().string,transform:Mn().oneOfType([Mn().string,Mn().object]),swapOpacity:Mn().bool};var zn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Ln(t.slice(0,r)),o=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{})}(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Ln(t)]=r}return e}),{attrs:{}}),a=r.style,s=void 0===a?{}:a,l=Rn(r,On);return o.attrs.style=En(En({},o.attrs.style),s),t.apply(void 0,[n.tag,En(En({},o.attrs),l)].concat(kn(i)))}.bind(null,t.createElement);const Bn={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},Un=Bn,Gn={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},Vn={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64l32 0c35.3 0 64 28.7 64 64l0 3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74l0 1.4c0 17.7 14.3 32 32 32s32-14.3 32-32l0-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7l0-3.6c0-70.7-57.3-128-128-128l-32 0C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},Hn={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"]},Wn={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},$n={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]};var qn=n(579);let Xn=function(e){return e.None="None",e.Home="Home",e.LoadAndSavePanel="Load&Save",e.DifferenceGraphPanel="Difference Graph",e.GraphOptionPanel="Graph Options",e.GraphPanel="Graph",e.UmapGraphOptionPanel="Umap Graph Option",e.UmapGraphPanel="Umap Graph",e.TimeWarpedGraphPanel="Time Warped Graph",e.SelectionPanel="Selection",e.RobotOptionPanel="Robot Options",e.QSceneOptionPanel="Quaternion Options",e.SceneOptionPanel="Scene Options",e.LegendPanel="Legend",e.TimeBarPanel="Time Bar",e.WarpedTimeBarPanel="Time Warped Time Bar",e.TimeWarping="Time Warping",e.Umap="UMAP",e.Qscene="Quaternion Space Scene",e.AnimationCSV="Animation CSV",e.AnimationRosbag="Animation Rosbag",e.PageNotFound="Page Not Found",e.LoadingStarted="Loading Started",e.LoadingFailed="Loading Failed",e.LoadingSuccess="Loading Success",e}({});function Yn(e){let t="string"===typeof e?{page:e}:e,n=t.page.replaceAll(" ",""),r=er(t);return null===r?(0,qn.jsx)(qn.Fragment,{}):(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"HelpPopup HelpPopup-".concat(n),children:[t.page!==Xn.LoadingStarted&&(0,qn.jsx)("button",{className:"Xmark",onClick:()=>ir.setPopupHelpPage(Xn.None),children:(0,qn.jsx)(Fn,{icon:$n})}),(0,qn.jsx)("div",{className:"content",children:r})]}),(0,qn.jsx)("div",{className:"overlay"})]})}function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="string"===typeof e?e:e.page;return(0,qn.jsx)("span",{children:(0,qn.jsx)("button",{className:n,onClick:()=>ir.setPopupHelpPage(e),children:t||r})})}function Jn(){return(0,qn.jsx)(qn.Fragment,{children:(0,qn.jsx)("p",{children:Kn(Xn.Home)})})}const Qn="HelpBody",Zn="HelpTitle";function er(e){return e.page===Xn.None?null:e.page===Xn.Home?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Motion Comparator"}),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("h3",{children:"Key Features"}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:"Viewable 3D scenes"}),(0,qn.jsx)("li",{children:"Convenient time-series plots"}),(0,qn.jsx)("li",{children:"Scrubbable time bars"}),(0,qn.jsx)("li",{children:"Object traces in cartesian space"}),(0,qn.jsx)("li",{children:"Quaternion traces"}),(0,qn.jsx)("li",{children:"UMAP graphs of robot joint states"}),(0,qn.jsx)("li",{children:"Time warping for temporary motion alignment"}),(0,qn.jsx)("li",{children:"Juxtaposition, superposition, and explicit encoding designs"}),(0,qn.jsx)("li",{children:"Hyper-customizable and sharable layouts"})]}),(0,qn.jsx)("br",{}),(0,qn.jsx)("h3",{children:" Panels "}),"Panels are modular visualization interfaces that can be configured and arranged into customizable layouts. Each panel has its own help page that you can get to either from here or from the panel itself.",(0,qn.jsxs)("ul",{children:[(0,qn.jsxs)("li",{children:["A ",Kn(Xn.LoadAndSavePanel)," panel loads or saves motion data.  "]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.SelectionPanel)," panel allows you to see and select any part of any object in any scene. You can also create 3D scenes, traces, and various visualization using this panel."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.TimeBarPanel)," panel shows the current time, start time, and end time of of the application."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.DifferenceGraphPanel)," panel shows the differences between elements in a scene."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.GraphOptionPanel)," panel customizes the graph panel."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.GraphPanel)," panel visualizes robot motions in time-series plots."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.LegendPanel)," panel shows the legend of a graph."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.UmapGraphPanel)," panel maps the higher-dimentional joint data to a lower-dimensional graph."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.UmapGraphOptionPanel)," panel allows you to change the look details of a UMAP panel."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.TimeWarpedGraphPanel)," panel graphs the time warp between two time-warped scenes."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.RobotOptionPanel)," panel allows some aspects of a robot (such as its position and rotation) to be edited."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.SceneOptionPanel)," panel allows customization of the 3D scene. Aspects such as lighting, background color, and time-warping objectives can be edited using this panel."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.QSceneOptionPanel)," panel maps the rotation of an item (such as a robot or joint) over the course of its motion."]}),(0,qn.jsxs)("li",{children:["A ",Kn(Xn.WarpedTimeBarPanel)," panel is like the ",Kn(Xn.TimeBarPanel)," panel but with extra options for time warped data."]})]}),(0,qn.jsx)("h3",{children:" Other Pages "}),(0,qn.jsxs)("ul",{children:[(0,qn.jsxs)("li",{children:["The ",Kn(Xn.Umap),' page describes what a "UMAP" is. ']}),(0,qn.jsxs)("li",{children:["The ",Kn(Xn.TimeWarping),' page describes what "time warping" is. ']}),(0,qn.jsxs)("li",{children:["The ",Kn(Xn.AnimationCSV)," page describes the animation CSV format. "]})]})]})]}):e.page===Xn.SelectionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Selection Panel"}),(0,qn.jsxs)("div",{className:Qn,children:[Jn(),(0,qn.jsx)("p",{children:"This panel lists out all scenes, robots, and robot joints in a hierarchy so that they can be found and selected with ease."}),(0,qn.jsx)("br",{}),(0,qn.jsx)("h3",{children:" Openning a 3D scene "}),(0,qn.jsx)("p",{children:"Scenes are shown as the top level of the selection hierarchy."}),(0,qn.jsx)("p",{children:"You can open a scene by clicking and dragging it into the current workspace."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropToOpenA3DScene.gif",alt:"A gif showing how to open a 3D scene"}),(0,qn.jsx)("h3",{children:" Adding a ghost robot to a 3D scene "}),(0,qn.jsx)("p",{children:"Objects (such as robots) only exist within scenes and therefore appear as the children of scenes within the selection hierarchy."}),(0,qn.jsx)("p",{children:"You can add the ghost of an object to a scene by clicking and dragging the object's name into the scene you want its ghost to appear in."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddGhostToScene.gif",alt:"A gif showing how to add a ghost robot"}),(0,qn.jsx)("h3",{children:" Adding the Trace of a Joint "}),(0,qn.jsx)("p",{children:"Since joints can only appear as part of an object (since all robots are objects) joints appear as the children of objects within the selection hierarchy."}),(0,qn.jsx)("p",{children:"You can add the trace of an object's joint by clicking and dragging the joint's name into the scene you would like the trace to appear in."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddTraceToScene.gif",alt:"a gif showing a joint's trace being added to a scene"}),(0,qn.jsx)("h3",{children:" Deleting an Object "}),(0,qn.jsx)("p",{children:"An object can be deleted from a scene by clicking the trash icon next to it in the selection hierarchy."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DeleteObjectFromScene.gif",alt:"a gif showing the deletion of an object"}),(0,qn.jsx)("h3",{children:" Creating a new Scene "}),(0,qn.jsx)("p",{children:'A new, empty scene can be created by clicking the "New Scene" button.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreationOfNewEmptyScene.gif",alt:"a gif showing the creation of a scene"}),(0,qn.jsxs)("p",{children:["To learn about how to add objects/animations to the newly created scene, go to the ",Kn(Xn.LoadAndSavePanel)," page."]}),(0,qn.jsx)("h3",{children:" Cloning a Scene "}),(0,qn.jsx)("p",{children:'A scene can be cloned by clicking on the scene you desire to clone and then clicking the "Clone Scene" button.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CloningScene.gif",alt:"a gif of a scene being cloned"})]})]}):e.page===Xn.GraphOptionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Graph Options Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsxs)("p",{children:["This panel is used to create new ",Kn(Xn.GraphPanel)," panels and new ",Kn(Xn.DifferenceGraphPanel)," panels. It also allows you to edit said panels."]}),(0,qn.jsx)("h3",{children:" Adding a Line "}),(0,qn.jsxs)("p",{children:["To learn how to add a line to a graph (i.e. graph some aspect of an object) go to the ",Kn(Xn.GraphPanel)," or ",Kn(Xn.DifferenceGraphPanel)," page."]}),(0,qn.jsx)("h3",{children:" Creating a Graph Panel "}),(0,qn.jsxs)("p",{children:["To create a new ",Kn(Xn.GraphPanel)," or ",Kn(Xn.DifferenceGraphPanel),' panel, click and drag the text that says "New Graph" or "Difference Graph" into the workspace.']}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreatingEmptyGraphs.gif",alt:"gif of a graph panel being clicked and dragged into the workspace"}),(0,qn.jsxs)("p",{children:['To edit the panel after you have created it, first select the graph panel you want to edit by clicking on it. Then, you can use the "property" dropbox of the ',Kn(Xn.GraphOptionPanel)," panel to edit what aspect of each joint/object is being graphed."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ChangingThePropertiesOfAGraph.gif",alt:"gif of person changing the properties of a graph"})]})]}):e.page===Xn.GraphPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Graph Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"Each panel of this type contains a 2D plot where time is the x-axis and some other aspect of a robot (such as the position or rotation of its joint(s)) is graphed on the y-axis."}),(0,qn.jsxs)("p",{children:["You can create an empty graph via the",Kn(Xn.GraphOptionPanel)," panel."]}),(0,qn.jsx)("h3",{children:" Adding a Line"}),(0,qn.jsxs)("p",{children:["To graph an object's joint, click and drag it from the",Kn(Xn.SelectionPanel)," panel and into the graph panel."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/AddJointValueToGraph.gif",alt:"A gif showing an object's joint being clicked and dragged into a graph panel"}),(0,qn.jsx)("p",{children:"This can be done for as many joints as you wish."}),(0,qn.jsxs)("p",{children:["To learn more about how to edit the graph, go to the",Kn(Xn.GraphOptionPanel)," panel."]}),(0,qn.jsx)("h3",{children:" Opening a Legend "}),(0,qn.jsx)("p",{children:"In addition to the graph panel itself, a linked panel can be used to show the legend of the graph i.e. what the graph graphs."}),(0,qn.jsxs)("p",{children:['To see the legend of a graph, click and drag the button that says "Legend" into the workspace, and a',Kn(Xn.LegendPanel)," will appear."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropLegendOfGraph.gif",alt:"a gif to show how to click and drag to open a legend"})]})]}):e.page===Xn.DifferenceGraphPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Difference Graph Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"Panels of this type graph the differences between two aspects of two motions."}),(0,qn.jsx)("p",{children:"For example, below you can see a graph of the end effector positions for two robots over the course of their animations."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/PictureOfDifferenceGraphWithDifferences.gif",alt:"picture of difference graph"}),(0,qn.jsx)("p",{children:"If we time warp the two scenes and then graph them again, you can now see that their end effectors follow the exact same path (i.e. the difference between their time-warped end effectors are now 0 at every time step), they just do so at different times."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/PictureOfDifferenceGraphWithNoDifferences.gif",alt:"picture of difference graph where end effector differences are now 0 at every time step"}),(0,qn.jsx)("h3",{children:" Graphing Elements "}),(0,qn.jsx)("p",{children:"When first created, the graph will be empty except for a red, vertical bar that shows the current time as it corresponds on the graph."}),(0,qn.jsx)("p",{children:"You can then graph the difference between two elements of two motions by dragging and dropping said elements into the difference graph."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/CreationAndPopulationOfDiffGraph.gif",alt:"gif of dragging and dropping said elements into the difference graph"}),(0,qn.jsx)("h3",{children:" Graph Legend "}),(0,qn.jsx)("p",{children:'You can open a legend for the graph by dragging and dropping the "Legend" text into the workspace.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DragAndDropDifferenceGraphLegend.gif",alt:"gif of dragging and dropping a legend for the graph into the workspace"}),(0,qn.jsx)("h3",{children:" Editing the Graph "}),(0,qn.jsxs)("p",{children:["You can edit the graph using the ",Kn(Xn.GraphOptionPanel)," panel."]})]})]}):e.page===Xn.UmapGraphOptionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"UMAP Graph Option Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:" This is the panel contains all the information about UMAP graphs. "}),(0,qn.jsx)("h3",{children:" Create a UMAP Graph Panel "}),(0,qn.jsx)("p",{children:'You can drag-and-drop the "New UMAP Graph" button to create a new UMAP Graph Panel.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_CreateUmap.gif"}),(0,qn.jsx)("h3",{children:" Control the settings of the selected UMAP Graph Panel "}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:'type the name in the text input field next to "Name" and press "enter" key to change the name of the UMAP Graph'}),(0,qn.jsx)("li",{children:'click on "Background Color" or "Axis Color" and then click on the color map to change the background color and the axis color (border color)'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeColor.gif"}),(0,qn.jsx)("li",{children:"drag the slide bar to change the line width of the curves shown in the graph"}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeLineWidth.gif"}),(0,qn.jsx)("li",{children:"drag the slide bar to change the three parameters (number of neighbors, minimum distance, and spread) in order to create a UMAP"}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/UmapOption_ChangeParams.gif"})]})]})]}):e.page===Xn.UmapGraphPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"UMAP Graph Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsxs)("p",{children:["Panels of this type display the curves generated by a ",Kn(Xn.Umap),"."]}),(0,qn.jsx)("h3",{children:" Add a line"}),(0,qn.jsxs)("p",{children:["You can add a line by clicking and draging a robot (not robot part) from the ",Kn(Xn.SelectionPanel)," panel. Normally it takes a few seconds to calculate and display the line."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/Umap_AddLine.gif"}),(0,qn.jsx)("h3",{children:" Open a legend "}),(0,qn.jsx)("p",{children:"Click and drag the legend button to create a legend panel for this UMAP Graph Panel"}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/Umap_OpenLegend.gif"})]})]}):e.page===Xn.SceneOptionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Scene Options Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:" This panel is used to edit the current scene. "}),(0,qn.jsx)("h3",{children:" Selecting the Scene to Edit "}),(0,qn.jsxs)("p",{children:["To edit a scene, you must first select one. To do so, click on a view of the scene you would like to edit. You will know that you have selected the scene when the view of it that you clicked is outlined. If possible, the ",Kn(Xn.SceneOptionPanel)," panel will also be switched to automatically."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ClickingOnSceneToSelectIt.gif",alt:"gif of selecting a scene"}),(0,qn.jsx)("h3",{children:" Editing the Scene "}),(0,qn.jsxs)("p",{children:["To edit the scene, use the buttons in the",Kn(Xn.SceneOptionPanel)," panel. They allow you to synchronize all views so that they have the same position/rotations, change the view, show and/or hide the ground plane, change the directional lighting, edit the sizes of traces, time warp the scene relative to another scene, and replace animations in the scene."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SceneOptionsEditingScene.gif",alt:'gif of editing the scene using the "Scene Options" panel'}),(0,qn.jsx)("h3",{children:" The Scene Legend "}),(0,qn.jsx)("p",{children:'The "legend" of a scene allows you to both see what traces are currently shown in a scene and to delete said traces at will.'}),(0,qn.jsx)("p",{children:'You can open the current scene\'s legend by clicking and dragging the "Legend" button into the workspace.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SceneLegendAndDeletionOfTraces.gif",alt:"gif of a scene's legend being created and then used to delete the traces in the scene"})]})]}):e.page===Xn.LoadAndSavePanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Files Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("h3",{children:" Uploading and Downloading Workspaces "}),(0,qn.jsx)("p",{children:"This panel is used to load and/or save entire workspaces (including the current layout) as well as load objects and animations into the currently-selected scene."}),(0,qn.jsx)("p",{children:'You can upload a workspace by either by using a raw URL to the json file or by uploading it from a local file. You can also download the current workspace by clicking the "Download" button.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/LS_Workspace.gif",alt:"gif of loading and saving the workspace"}),(0,qn.jsx)("p",{children:'If you would like to load a robot or object into the current scene, you can do so by either selecting an example robot in the robot dropdown and clicking "Confirm" or by uploading one from a URL. Uploaded robots and/or objects can be in either the ".glb" or ".urdf" format.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/LooadingInExampleRobot.gif",alt:"gif of loading an example robot into the current scene"}),(0,qn.jsxs)("p",{children:['Once you have objects loaded into the current scene, you can add animations to them via the "Load motion data" section of the ',Kn(Xn.LoadAndSavePanel)," panel."]}),(0,qn.jsxs)("p",{children:["Robot motions must be in a special CSV format or rosbag to work. If you would like to learn more about motions and what the CSV format looks like, go ",Kn(Xn.AnimationCSV,"here"),". If you would like to learn more about how to load a rosbag, go ",Kn(Xn.AnimationRosbag,"here"),"."]})]})]}):e.page===Xn.LegendPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Legend Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"Panels of this type are used to display the legend of whatever graph panel they came from."}),(0,qn.jsx)("h3",{children:" Graph Panels "}),(0,qn.jsxs)("ul",{children:[(0,qn.jsxs)("li",{children:[" ",Kn(Xn.GraphPanel)," "]}),(0,qn.jsxs)("li",{children:[" ",Kn(Xn.DifferenceGraphPanel)," "]}),(0,qn.jsxs)("li",{children:[" ",Kn(Xn.UmapGraphPanel)," "]}),(0,qn.jsxs)("li",{children:[" ",Kn(Xn.TimeWarpedGraphPanel)," "]})]})]})]}):e.page===Xn.TimeWarpedGraphPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Timewarped Graph Panel"}),Jn(),(0,qn.jsx)("div",{className:Qn,children:(0,qn.jsxs)("p",{children:["Panels of this type are like a",Kn(Xn.GraphPanel)," but for timewarped data."]})})]}):e.page===Xn.RobotOptionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Robot Options Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"This panel allows you to edit some aspects of the currently-selected robot."}),(0,qn.jsx)("h3",{children:" Selecting a Robot "}),(0,qn.jsxs)("p",{children:["The easiest way to select an object is for you to first find/open a view of the scene with the object that you would like to select and then for you to click on said object. When an object is successfully selected, it will become highlighted in blue (which may or may not be difficult to see depending on the colors/textures of the robot). If possible, the ",Kn(Xn.RobotOptionPanel)," panel will also be switched to upon selection."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SelectingRobotByClickingOnIt.gif",alt:"gif of a robot being selected by clicking on it"}),(0,qn.jsxs)("p",{children:["For the purposes of this application, a robot is simply an object. The object may or may not have joints, but you can select it and manipulate it all the same. As such, to select a robot you can use the ",Kn(Xn.SelectionPanel)," panel and select what its help page refers to as an object."]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/SelectingRobotViaSelectionPanel.gif",alt:"gif of selection panel being used to select the robot"}),(0,qn.jsx)("h3",{children:" Editing a Robot "}),(0,qn.jsxs)("p",{children:["A selected robot can be edited via the ",Kn(Xn.RobotOptionPanel)," panel."]}),(0,qn.jsx)("p",{children:"This panel allows you to edit the opacity of the robot and the position/rotation/scale of the robot. It also allows you to view any animation data that is animating the robot."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/RobotOptionsRobotEditing.gif",alt:"gif of a robot being edited using the Robot Options panel"})]})]}):e.page===Xn.QSceneOptionPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Quaternion Options Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:" This is the panel contains all the information about Quaternion Space Scene. "}),(0,qn.jsxs)("h3",{children:[" Create a ",Kn(Xn.Qscene)," Panel "]}),(0,qn.jsx)("p",{children:'You can drag-and-drop the "New Quaternion Space" button to create a new Quaternion Space Scene Panel.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/QScene_CreateQScene.gif"}),(0,qn.jsx)("h3",{children:" Selecting a Quaternion Space Scene to Edit "}),(0,qn.jsxs)("p",{children:["To edit a scene, you must first select one. To do so, click on a view of the scene you would like to edit. You will know that you have selected the scene when the view of it that you clicked is outlined. If possible, the ",Kn(Xn.QSceneOptionPanel)," panel will also be switched to automatically."]}),(0,qn.jsx)("h3",{children:" Editing a Quaternion Space Scene "}),(0,qn.jsxs)("p",{children:["To edit the scene, use the buttons in the ",Kn(Xn.QSceneOptionPanel)," panel. They allow you to show/hide the world frame, change the opacity and color of the longitude and latitude lines displayed on the sphere, and change the background color of the scene"]}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/QScene_ChangeSettings.gif"})]})]}):e.page===Xn.Qscene?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Quaternion Space Scene"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"Quaternion traces are lines in 4D Euclidean space that encode an object\u2019s orientation changes."}),(0,qn.jsx)("h3",{children:" Related Pages "}),(0,qn.jsx)("ul",{children:(0,qn.jsxs)("li",{children:[" ",Kn(Xn.QSceneOptionPanel)," "]})})]})]}):e.page===Xn.TimeBarPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Time Bar Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("h3",{children:" The Time Bar "}),(0,qn.jsx)("p",{children:"The time bar of the Time Bar panel allows you to define both the start and end time of all animations as well as scrub through them."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/TimeBarBeingScrubbed.gif",alt:"gif of scrubbing the time bar"}),(0,qn.jsx)("p",{children:"In addition, if you would like to play, pause, or restart the animaions, you can do so using the buttons on this panel."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/TimeBarBeingPlayedPausedReset.gif",alt:"gif of playing, stopping, and resetting the animations via the time bar"})]})]}):e.page===Xn.WarpedTimeBarPanel?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Time Warped Time Bar Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsxs)("p",{children:[" Panels of this type are similar to the ",Kn(Xn.TimeBarPanel)," panel but contain two extra time bar options.  These extra options are specifically meant to help visualize ",Kn(Xn.TimeWarping,"time warping")," and can be switched to via the drop-down menu next to the currently-shown time bar. "]}),(0,qn.jsx)("h3",{children:" The Default Time Bar "}),(0,qn.jsxs)("p",{children:["This time bar works exactly the same as the one in the",Kn(Xn.TimeBarPanel)," panel so it will not be further explained here."]}),(0,qn.jsx)("h3",{children:" Colored Time Bar "}),(0,qn.jsx)("p",{children:"This time bar has all the abilities that the default time bar has but also displays where the target scene of the time warping was slowed or sped up via colors. Blue means that it was slowed and red means that it was sped up. White means that it was unchanged."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/ColoredTimeBarInUse.gif",alt:"gif of playing, stopping, and resetting the animations via the colored time bar"}),(0,qn.jsx)("h3",{children:" Double Time Bar "}),(0,qn.jsx)("p",{children:'The double time bar, as its name suggests, consists of two time bars -- one for the base scene and one for the target scene -- as well as the mapping between them. The mapping shows, generally, what each time in the base scene is mapped to in the target scene. We say "generally" because it actually only shows a small number of the actual number of mappings there are (otherwise the mapping area becomes too cluttered to be useful), but it is enough to get a good idea of what the mapping looks like.'}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DoubleTimeBarPlaying.gif",alt:"gif of the double time bars while the animations are playing"}),(0,qn.jsx)("p",{children:"Also of note is the fact that both time bars are accurate for their respective scenes so you can scrub around the target scene or base scene as you desire."}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/DoubleTimeBarBeingScrubbed.gif",alt:"gif of the base and target scene time bars being scrubbed"})]})]}):e.page===Xn.TimeWarping?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Time Warping"}),Jn(),(0,qn.jsx)("div",{className:Qn,children:(0,qn.jsx)("p",{children:"Time warping takes certain aspects (joint positions, joint angles, object position, etc.) of two objects in two different scenes and time warps the scenes in order to best match the values of those aspects over the course of their animations. This is useful if, for example, you have two scenes with the same general motion but one had its events happen much slower than the other such that their corresponding events happened seconds apart. This offset makes it very difficult to juxtapose the animations as their relevant events happen seconds apart, but time warping can be used to ameliorate this and make their relevant events happen at the same time."})})]}):e.page===Xn.Umap?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Legend Panel"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:"UMAP stands for Uniform Manifold Approximation and Projection and is a dimension reduction technique that can be used for visualisation similarly to t-SNE, but also for general non-linear dimension reduction."}),(0,qn.jsx)("h3",{children:" Related Pages "}),(0,qn.jsxs)("ul",{children:[(0,qn.jsxs)("li",{children:[" ",Kn(Xn.UmapGraphOptionPanel)," "]}),(0,qn.jsxs)("li",{children:[" ",Kn(Xn.UmapGraphPanel)," "]})]})]})]}):e.page===Xn.AnimationCSV?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Animation CSV Format"}),Jn(),(0,qn.jsxs)("div",{className:Qn,children:[(0,qn.jsx)("p",{children:'This application compares "robot motions". A "robot motion" is simply an object moving over time. To make an object move over time, the application must know what positions/angles/etc. an object has over time. To give it this information, we give it an "animation" in the form of an "animation CSV".'}),(0,qn.jsx)("p",{children:'Each "animation CSV" starts off with a row of column names and then a number of rows of column values, each value meaning something different depending on what its column\'s name is. For example, one of the columns must always be the "time" column, which gives the time stamp of each row. Then the other columns can manipulate positions, rotations, or any other features of an object that can be animated and the application will make sure that they are set to their given values at the given time stamp. In this way, every row (besides the first row which consists of column names) acts as a "frame" of the animation.'}),(0,qn.jsx)("h3",{children:" Animation CSV Format "}),(0,qn.jsx)("p",{children:"Each CSV must start with 1 row of column names (strings) and then 1 or more rows of column values (floats or integers)."}),(0,qn.jsx)("p",{children:'Each column name selects one attribute of one object and manipulates it over time (each row is a "frame" of the animation).'}),(0,qn.jsx)("p",{children:'As such, there must be a "time" column that has the time in either seconds, milliseconds, microseconds, or nanoseconds. The unit is inferred based on the ending time in the CSV.'}),(0,qn.jsxs)("table",{children:[(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"seconds"}),(0,qn.jsx)("td",{children:"by default"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"milliseconds"}),(0,qn.jsx)("td",{children:"if the total time is > 1000"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"microseconds"}),(0,qn.jsx)("td",{children:"if the total time is > 1000000"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"nanoseconds"}),(0,qn.jsx)("td",{children:"if the total time is > 1000000000"})]})]}),(0,qn.jsx)("br",{}),(0,qn.jsx)("p",{children:"The time column must be increasing as you go down the CSV, but the first time stamp does not have to be at time 0 (it can be -1234.5, 12.3, etc.)."}),(0,qn.jsx)("p",{children:"The animation CSV also has special column names to select different attributes of an object and animate them over time:"}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:' Position: "X_POS", "Y_POS", "Z_POS" '}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:" Used to select and animate the (x, y, z) position of an object. "}),(0,qn.jsx)("li",{children:" Expected values are between -10.0 and 10.0 inclusive. "})]})]}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:' Rotation: "X_ROT", "Y_ROT", "Z_ROT", "W_ROT" '}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:" Used to select and affect the (x, y, z) euler rotation of an object. "}),(0,qn.jsx)("li",{children:' If "W_ROT" is present, then it actually animates the (x, y, z, w) quaternion rotation of an object. '}),(0,qn.jsx)("li",{children:" All values should be in radians. "})]})]}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:' Scale: "X_SCALE", "Y_SCALE", "Z_SCALE" '}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:" Used to select and affect the (x, y, z) scale of an object. "}),(0,qn.jsx)("li",{children:" Values can be anything you want but keep in mind that the expected viewing area is a 10 by 10 by 10 cube so making the scale larger than 10 is going to make it take up the entire screen. "})]})]}),(0,qn.jsx)("p",{children:'Other than the "time" column, every other column name should start with the name of the object it is selecting (found in the "[Select Object](SelectObjectTab)" tab.) and then (if the column is for one of the special attributes listed above) the attribute selector (listed above) should be appended to the column name.'}),(0,qn.jsx)("p",{children:"If anything other than an attribute selector is appended to the URDF name, it is assumed to be the name of the joint on the URDF that the column is selecting."}),(0,qn.jsx)("p",{children:'Valid column names can be composed of any number of alphanumeric characters ("abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789") or underscores ("_").'}),(0,qn.jsx)("p",{children:'Additionally, you are allowed to use a hyphen "-" to seperate the object name from the position/rotation/scale/joint selector.'}),(0,qn.jsx)("h3",{children:" Example "}),(0,qn.jsx)("p",{children:"Below is an example animation CSV that you could put in a file and load directly into the application (there are explanations of its columns beneath it as well as a repeat of the CSV in a more readable format)."}),(0,qn.jsxs)("table",{children:[(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("th",{children:"time"}),(0,qn.jsx)("th",{children:"ik_solutions-right_j0"}),(0,qn.jsx)("th",{children:"ik_solutions-right_j1"}),(0,qn.jsx)("th",{children:"ik_solutions-X_POS"}),(0,qn.jsx)("th",{children:"ik_solutions-Y_POS"}),(0,qn.jsx)("th",{children:"ik_solutions-Z_POS"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"0.03330000000000003"}),(0,qn.jsx)("td",{children:"1.1204203532251877"}),(0,qn.jsx)("td",{children:"0.21976057475879832"}),(0,qn.jsx)("td",{children:"-0.5517561517071136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"0.50381920383039"}),(0,qn.jsx)("td",{children:"1.8204203732251877"}),(0,qn.jsx)("td",{children:"0.21973057475879832"}),(0,qn.jsx)("td",{children:"-0.35123049822136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"0.98992327397899"}),(0,qn.jsx)("td",{children:"1.8204203732251877"}),(0,qn.jsx)("td",{children:"0.21973057475879832"}),(0,qn.jsx)("td",{children:"-0.35123049822136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"1.12309487213904"}),(0,qn.jsx)("td",{children:"1.8204203732251877"}),(0,qn.jsx)("td",{children:"0.21973057475879832"}),(0,qn.jsx)("td",{children:"-0.35123049822136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"1.33091873829083"}),(0,qn.jsx)("td",{children:"1.8204203732251877"}),(0,qn.jsx)("td",{children:"0.21973057475879832"}),(0,qn.jsx)("td",{children:"-0.35123049822136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]}),(0,qn.jsxs)("tr",{children:[(0,qn.jsx)("td",{children:"1.43091283743249"}),(0,qn.jsx)("td",{children:"1.8204203732251877"}),(0,qn.jsx)("td",{children:"0.21973057475879832"}),(0,qn.jsx)("td",{children:"-0.35123049822136"}),(0,qn.jsx)("td",{children:"1.5517561462"}),(0,qn.jsx)("td",{children:"-2.1240893"})]})]}),(0,qn.jsx)("h4",{children:" Column Explanations: "}),(0,qn.jsxs)("ul",{children:[(0,qn.jsx)("li",{children:'"time"'}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:"Tells the time stamp of each row."})}),(0,qn.jsx)("li",{children:'"ik_solutions-right_j0"'}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:'Since this column\'s name does not possess any of the special column names, this column selects the "right_j0" joint of an object named "ik_solutions" and animates its angle.'})}),(0,qn.jsx)("li",{children:"ik_solutions-right_j1"}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:'Selects and animates the angle of a joint named "right_j1" on an object named "ik_solutions".'})}),(0,qn.jsx)("li",{children:"ik_solutions-X_POS"}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:'Animates the x-position of an object named "ik_solutions"'})}),(0,qn.jsx)("li",{children:"ik_solutions-Y_POS"}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:'Animates the y-position of an object named "ik_solutions"'})}),(0,qn.jsx)("li",{children:"ik_solutions-Z_POS"}),(0,qn.jsx)("ul",{children:(0,qn.jsx)("li",{children:'Animates the z-position of an object named "ik_solutions"'})})]}),(0,qn.jsx)("p",{children:"Below is the same CSV as above but in a more readable format."})]})]}):e.page===Xn.AnimationRosbag?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{className:Zn,children:"Animation Rosbag"}),Jn(),(0,qn.jsx)("div",{className:Qn,children:(0,qn.jsxs)("p",{children:[(0,qn.jsxs)("li",{children:["1. load a rosbag file in the ",Kn(Xn.LoadAndSavePanel)]}),(0,qn.jsxs)("li",{children:["2. select a robot in the ",Kn(Xn.SelectionPanel)," "]}),(0,qn.jsxs)("li",{children:["3. in the ",Kn(Xn.RobotOptionPanel),', click "Edit Motion Data"']}),(0,qn.jsx)("li",{children:'4. select the robot joint motions and the transformations in the "Available Joint Motion" and "Available Transformations" dropdown menu respectively.'}),(0,qn.jsx)("li",{children:'5. click "confirm". The joint motions and transformations for the robot will be binded.'}),(0,qn.jsx)("li",{children:"Note: You do not need to select anything if there is no robot joint motions or transformations"}),(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/gifs/upload_rosbag.gif",alt:"A gif showing how to load motion from rosbag files"})]})})]}):e.page===Xn.LoadingStarted?(0,qn.jsx)("div",{className:"LoadingMessage",children:(0,qn.jsxs)("p",{children:["UMAP"===e.type?"Calculating":"Loading"," ",e.type?"".concat(e.type):null," ",". Please wait a few seconds..."]})}):e.page===Xn.LoadingSuccess?null:e.page===Xn.LoadingFailed?(0,qn.jsx)("div",{className:"LoadingFailed",children:(0,qn.jsxs)("p",{children:["Failed to load ",e.type?"".concat(e.type):null," ",e.location?"from ".concat(e.location):null,"."]})}):e.page===Xn.PageNotFound?(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{children:"Page Not Found"}),(0,qn.jsx)("p",{children:Kn(Xn.Home)}),(0,qn.jsxs)("p",{children:['The page named "',e.pageName?e.pageName:e.page,'" could not be found.']})]}):er({page:Xn.PageNotFound,pageName:e.page})}const tr=60;class nr{}nr.INIT="INIT",nr.VIEW_LOAD="VIEW_LOAD";class rr{}rr.BUILD_PAGE="BUILD_PAGE",rr.VIEW_PAGE="VIEW_PAGE";const ir=new class{constructor(){this._app=void 0}setApp(e){this._app=e}app(){return this._app}popupHelpPage(){return this._app?this._app.popupHelpPage():{page:Xn.None}}setPopupHelpPage(e){this._app?this._app.setPopupHelpPage(e):console.error('Could not set the current popup page to "'.concat(e,'" because `AppProxy._app` is undefined.'))}warn(e){this._app?this._app.warn(e):console.warn(e)}assert(e,t){if(!1===e)throw ir.error(t),new i.AssertionError({message:t})}error(e){this._app?this._app.error(e):console.error(e)}recalculateTimeWarping(){void 0!==this._app&&this._app.recalculateTimeWarping()}updateUI(){void 0!==this._app&&this._app.updateUI()}disallowUpdateUI(){void 0!==this._app&&this._app.disallowUpdateUI()}allowUpdateUI(){void 0!==this._app&&this._app.allowUpdateUI()}render(){void 0!==this._app&&this._app.renderScenes()}addAnimationTable(e){void 0!==this._app&&this._app.robotSceneManager().addAnimationTable(e)}removeAnimationTable(e){void 0!==this._app&&this._app.robotSceneManager().removeAnimationTable(e)}},or="135",ar={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lr=0,cr=1,ur=2,hr=3,dr=0,pr=1,fr=2,mr=3,gr=0,vr=1,br=2,yr=1,xr=2,wr=0,_r=1,Sr=2,Mr=3,Tr=4,Er=5,Cr=100,Ar=101,Rr=102,kr=103,Pr=104,Lr=200,Or=201,Nr=202,Ir=203,Dr=204,jr=205,Fr=206,zr=207,Br=208,Ur=209,Gr=210,Vr=0,Hr=1,Wr=2,$r=3,qr=4,Xr=5,Yr=6,Kr=7,Jr=0,Qr=1,Zr=2,ei=0,ti=1,ni=2,ri=3,ii=4,oi=5,ai=300,si=301,li=302,ci=303,ui=304,hi=306,di=307,pi=1e3,fi=1001,mi=1002,gi=1003,vi=1004,bi=1004,yi=1005,xi=1005,wi=1006,_i=1007,Si=1007,Mi=1008,Ti=1008,Ei=1009,Ci=1010,Ai=1011,Ri=1012,ki=1013,Pi=1014,Li=1015,Oi=1016,Ni=1017,Ii=1018,Di=1019,ji=1020,Fi=1021,zi=1022,Bi=1023,Ui=1024,Gi=1025,Vi=Bi,Hi=1026,Wi=1027,$i=1028,qi=1029,Xi=1030,Yi=1031,Ki=1032,Ji=1033,Qi=33776,Zi=33777,eo=33778,to=33779,no=35840,ro=35841,io=35842,oo=35843,ao=36196,so=37492,lo=37496,co=37808,uo=37809,ho=37810,po=37811,fo=37812,mo=37813,go=37814,vo=37815,bo=37816,yo=37817,xo=37818,wo=37819,_o=37820,So=37821,Mo=36492,To=37840,Eo=37841,Co=37842,Ao=37843,Ro=37844,ko=37845,Po=37846,Lo=37847,Oo=37848,No=37849,Io=37850,Do=37851,jo=37852,Fo=37853,zo=2200,Bo=2201,Uo=2202,Go=2300,Vo=2301,Ho=2302,Wo=2400,$o=2401,qo=2402,Xo=2500,Yo=2501,Ko=0,Jo=1,Qo=2,Zo=3e3,ea=3001,ta=3007,na=3002,ra=3004,ia=3005,oa=3006,aa=3200,sa=3201,la=0,ca=1,ua=0,ha=7680,da=7681,pa=7682,fa=7683,ma=34055,ga=34056,va=5386,ba=512,ya=513,xa=514,wa=515,_a=516,Sa=517,Ma=518,Ta=519,Ea=35044,Ca=35048,Aa=35040,Ra=35045,ka=35049,Pa=35041,La=35046,Oa=35050,Na=35042,Ia="100",Da="300 es";class ja{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Fa=[];for(let n=0;n<256;n++)Fa[n]=(n<16?"0":"")+n.toString(16);let za=1234567;const Ba=Math.PI/180,Ua=180/Math.PI;function Ga(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fa[255&e]+Fa[e>>8&255]+Fa[e>>16&255]+Fa[e>>24&255]+"-"+Fa[255&t]+Fa[t>>8&255]+"-"+Fa[t>>16&15|64]+Fa[t>>24&255]+"-"+Fa[63&n|128]+Fa[n>>8&255]+"-"+Fa[n>>16&255]+Fa[n>>24&255]+Fa[255&r]+Fa[r>>8&255]+Fa[r>>16&255]+Fa[r>>24&255]).toUpperCase()}function Va(e,t,n){return Math.max(t,Math.min(n,e))}function Ha(e,t){return(e%t+t)%t}function Wa(e,t,n){return(1-n)*e+n*t}function $a(e){return 0===(e&e-1)&&0!==e}function qa(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Xa(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Ya=Object.freeze({__proto__:null,DEG2RAD:Ba,RAD2DEG:Ua,generateUUID:Ga,clamp:Va,euclideanModulo:Ha,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Wa,damp:function(e,t,n,r){return Wa(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Ha(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(za=e%2147483647),za=16807*za%2147483647,(za-1)/2147483646},degToRad:function(e){return e*Ba},radToDeg:function(e){return e*Ua},isPowerOfTwo:$a,ceilPowerOfTwo:qa,floorPowerOfTwo:Xa,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),p=o((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Ka{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ka.prototype.isVector2=!0;class Ja{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],b=r[4],y=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*f+a*v+s*x,i[3]=o*m+a*b+s*w,i[6]=o*g+a*y+s*_,i[1]=l*f+c*v+u*x,i[4]=l*m+c*b+u*w,i[7]=l*g+c*y+u*_,i[2]=h*f+d*v+p*x,i[5]=h*m+d*b+p*w,i[8]=h*g+d*y+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(a*n-r*o)*f,e[3]=h*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(o*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Qa(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Ja.prototype.isMatrix3=!0;const Za={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function es(e,t){return new Za[e](t)}function ts(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^t,r=1103547991^t;for(let i,o=0;o<e.length;o++)i=e.charCodeAt(o),n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}let rs;class is{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===rs&&(rs=ts("canvas")),rs.width=e.width,rs.height=e.height;const n=rs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=rs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let os=0;class as extends ja{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:as.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:as.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fi,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wi,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Mi,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bi,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ei,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Zo;super(),Object.defineProperty(this,"id",{value:os++}),this.uuid=Ga(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Ka(0,0),this.repeat=new Ka(1,1),this.center=new Ka(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ja,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Ga()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ss(r[e].image)):t.push(ss(r[e]))}else t=ss(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ai)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pi:e.x=e.x-Math.floor(e.x);break;case fi:e.x=e.x<0?0:1;break;case mi:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case pi:e.y=e.y-Math.floor(e.y);break;case fi:e.y=e.y<0?0:1;break;case mi:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ss(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?is.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}as.DEFAULT_IMAGE=void 0,as.DEFAULT_MAPPING=ai,as.prototype.isTexture=!0;class ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,b=(c+h)/4,y=(u+f)/4,x=(p+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=b/n,i=y/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=b/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ls.prototype.isVector4=!0;class cs extends ja{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.width=e,this.height=t,this.depth=1,this.scissor=new ls(0,0,e,t),this.scissorTest=!1,this.viewport=new ls(0,0,e,t),this.texture=new as(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:wi,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}cs.prototype.isWebGLRenderTarget=!0;class us extends cs{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let i=0;i<n;i++)this.texture[i]=r.clone()}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}us.prototype.isWebGLMultipleRenderTargets=!0;class hs extends cs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e,t,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}hs.prototype.isWebGLMultisampleRenderTarget=!0;class ds{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==h||l!==d||c!==p){let e=1-a;const t=s*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Va(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ds.prototype.isQuaternion=!0;class ps{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ms.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ms.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return fs.copy(this).projectOnVector(e),this.sub(fs)}reflect(e){return this.sub(fs.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Va(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ps.prototype.isVector3=!0;const fs=new ps,ms=new ds;class gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps(-1/0,-1/0,-1/0);this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ys.copy(t.boundingBox),ys.applyMatrix4(e.matrixWorld),this.union(ys));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,bs),bs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Es),Cs.subVectors(this.max,Es),xs.subVectors(e.a,Es),ws.subVectors(e.b,Es),_s.subVectors(e.c,Es),Ss.subVectors(ws,xs),Ms.subVectors(_s,ws),Ts.subVectors(xs,_s);let t=[0,-Ss.z,Ss.y,0,-Ms.z,Ms.y,0,-Ts.z,Ts.y,Ss.z,0,-Ss.x,Ms.z,0,-Ms.x,Ts.z,0,-Ts.x,-Ss.y,Ss.x,0,-Ms.y,Ms.x,0,-Ts.y,Ts.x,0];return!!ks(t,xs,ws,_s,Cs)&&(t=[1,0,0,0,1,0,0,0,1],!!ks(t,xs,ws,_s,Cs)&&(As.crossVectors(Ss,Ms),t=[As.x,As.y,As.z],ks(t,xs,ws,_s,Cs)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return bs.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(bs).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(vs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}gs.prototype.isBox3=!0;const vs=[new ps,new ps,new ps,new ps,new ps,new ps,new ps,new ps],bs=new ps,ys=new gs,xs=new ps,ws=new ps,_s=new ps,Ss=new ps,Ms=new ps,Ts=new ps,Es=new ps,Cs=new ps,As=new ps,Rs=new ps;function ks(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Rs.fromArray(e,o);const a=i.x*Math.abs(Rs.x)+i.y*Math.abs(Rs.y)+i.z*Math.abs(Rs.z),s=t.dot(Rs),l=n.dot(Rs),c=r.dot(Rs);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const Ps=new gs,Ls=new ps,Os=new ps,Ns=new ps;class Is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Ps.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ns.subVectors(e,this.center);const t=Ns.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Ns.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return Os.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Ls.copy(e.center).add(Os)),this.expandByPoint(Ls.copy(e.center).sub(Os)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ds=new ps,js=new ps,Fs=new ps,zs=new ps,Bs=new ps,Us=new ps,Gs=new ps;class Vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ds)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ds.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ds.copy(this.direction).multiplyScalar(t).add(this.origin),Ds.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){js.copy(e).add(t).multiplyScalar(.5),Fs.copy(t).sub(e).normalize(),zs.copy(this.origin).sub(js);const i=.5*e.distanceTo(t),o=-this.direction.dot(Fs),a=zs.dot(this.direction),s=-zs.dot(Fs),l=zs.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Fs).multiplyScalar(h).add(js),d}intersectSphere(e,t){Ds.subVectors(e.center,this.origin);const n=Ds.dot(this.direction),r=Ds.dot(Ds)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ds)}intersectTriangle(e,t,n,r,i){Bs.subVectors(t,e),Us.subVectors(n,e),Gs.crossVectors(Bs,Us);let o,a=this.direction.dot(Gs);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}zs.subVectors(this.origin,e);const s=o*this.direction.dot(Us.crossVectors(zs,Us));if(s<0)return null;const l=o*this.direction.dot(Bs.cross(zs));if(l<0)return null;if(s+l>a)return null;const c=-o*zs.dot(Gs);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Hs{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Hs).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Ws.setFromMatrixColumn(e,0).length(),i=1/Ws.setFromMatrixColumn(e,1).length(),o=1/Ws.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qs,e,Xs)}lookAt(e,t,n){const r=this.elements;return Js.subVectors(e,t),0===Js.lengthSq()&&(Js.z=1),Js.normalize(),Ys.crossVectors(n,Js),0===Ys.lengthSq()&&(1===Math.abs(n.z)?Js.x+=1e-4:Js.z+=1e-4,Js.normalize(),Ys.crossVectors(n,Js)),Ys.normalize(),Ks.crossVectors(Js,Ys),r[0]=Ys.x,r[4]=Ks.x,r[8]=Js.x,r[1]=Ys.y,r[5]=Ks.y,r[9]=Js.y,r[2]=Ys.z,r[6]=Ks.z,r[10]=Js.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],b=n[7],y=n[11],x=n[15],w=r[0],_=r[4],S=r[8],M=r[12],T=r[1],E=r[5],C=r[9],A=r[13],R=r[2],k=r[6],P=r[10],L=r[14],O=r[3],N=r[7],I=r[11],D=r[15];return i[0]=o*w+a*T+s*R+l*O,i[4]=o*_+a*E+s*k+l*N,i[8]=o*S+a*C+s*P+l*I,i[12]=o*M+a*A+s*L+l*D,i[1]=c*w+u*T+h*R+d*O,i[5]=c*_+u*E+h*k+d*N,i[9]=c*S+u*C+h*P+d*I,i[13]=c*M+u*A+h*L+d*D,i[2]=p*w+f*T+m*R+g*O,i[6]=p*_+f*E+m*k+g*N,i[10]=p*S+f*C+m*P+g*I,i[14]=p*M+f*A+m*L+g*D,i[3]=v*w+b*T+y*R+x*O,i[7]=v*_+b*E+y*k+x*N,i[11]=v*S+b*C+y*P+x*I,i[15]=v*M+b*A+y*L+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g,b=p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g,y=c*f*l-p*u*l+p*a*d-o*f*d-c*a*g+o*u*g,x=p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m,w=t*v+n*b+r*y+i*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return e[0]=v*_,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*_,e[2]=(a*m*i-f*s*i+f*r*l-n*m*l-a*r*g+n*s*g)*_,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*_,e[4]=b*_,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*_,e[6]=(p*s*i-o*m*i-p*r*l+t*m*l+o*r*g-t*s*g)*_,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*_,e[8]=y*_,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*g-t*u*g)*_,e[10]=(o*f*i-p*a*i+p*n*l-t*f*l-o*n*g+t*a*g)*_,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*_,e[12]=x*_,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*_,e[14]=(p*a*r-o*f*r-p*n*s+t*f*s+o*n*m-t*a*m)*_,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,p=i*u,f=o*c,m=o*u,g=a*u,v=s*l,b=s*c,y=s*u,x=n.x,w=n.y,_=n.z;return r[0]=(1-(f+g))*x,r[1]=(d+y)*x,r[2]=(p-b)*x,r[3]=0,r[4]=(d-y)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+b)*_,r[9]=(m-v)*_,r[10]=(1-(h+f))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Ws.set(r[0],r[1],r[2]).length();const o=Ws.set(r[4],r[5],r[6]).length(),a=Ws.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],$s.copy(this);const s=1/i,l=1/o,c=1/a;return $s.elements[0]*=s,$s.elements[1]*=s,$s.elements[2]*=s,$s.elements[4]*=l,$s.elements[5]*=l,$s.elements[6]*=l,$s.elements[8]*=c,$s.elements[9]*=c,$s.elements[10]*=c,t.setFromRotationMatrix($s),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Hs.prototype.isMatrix4=!0;const Ws=new ps,$s=new Hs,qs=new ps(0,0,0),Xs=new ps(1,1,1),Ys=new ps,Ks=new ps,Js=new ps,Qs=new Hs,Zs=new ds;class el{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:el.DefaultOrder;this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Va(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Va(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Va(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Va(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Va(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Va(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Qs.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qs,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Zs.setFromEuler(this),this.setFromQuaternion(Zs,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ps(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}el.prototype.isEuler=!0,el.DefaultOrder="XYZ",el.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class tl{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let nl=0;const rl=new ps,il=new ds,ol=new Hs,al=new ps,sl=new ps,ll=new ps,cl=new ds,ul=new ps(1,0,0),hl=new ps(0,1,0),dl=new ps(0,0,1),pl={type:"added"},fl={type:"removed"};class ml extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:nl++}),this.uuid=Ga(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ml.DefaultUp.clone();const e=new ps,t=new el,n=new ds,r=new ps(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Hs},normalMatrix:{value:new Ja}}),this.matrix=new Hs,this.matrixWorld=new Hs,this.matrixAutoUpdate=ml.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new tl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return il.setFromAxisAngle(e,t),this.quaternion.multiply(il),this}rotateOnWorldAxis(e,t){return il.setFromAxisAngle(e,t),this.quaternion.premultiply(il),this}rotateX(e){return this.rotateOnAxis(ul,e)}rotateY(e){return this.rotateOnAxis(hl,e)}rotateZ(e){return this.rotateOnAxis(dl,e)}translateOnAxis(e,t){return rl.copy(e).applyQuaternion(this.quaternion),this.position.add(rl.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ul,e)}translateY(e){return this.translateOnAxis(hl,e)}translateZ(e){return this.translateOnAxis(dl,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ol.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?al.copy(e):al.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),sl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ol.lookAt(sl,al,this.up):ol.lookAt(al,sl,this.up),this.quaternion.setFromRotationMatrix(ol),r&&(ol.extractRotation(r.matrixWorld),il.setFromRotationMatrix(ol),this.quaternion.premultiply(il.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(fl)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(fl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ol.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ol.multiply(e.parent.matrixWorld)),e.applyMatrix4(ol),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sl,e,ll),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sl,cl,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}ml.DefaultUp=new ps(0,1,0),ml.DefaultMatrixAutoUpdate=!0,ml.prototype.isObject3D=!0;const gl=new ps,vl=new ps,bl=new ps,yl=new ps,xl=new ps,wl=new ps,_l=new ps,Sl=new ps,Ml=new ps,Tl=new ps;class El{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ps;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),gl.subVectors(e,t),r.cross(gl);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){gl.subVectors(r,t),vl.subVectors(n,t),bl.subVectors(e,t);const o=gl.dot(gl),a=gl.dot(vl),s=gl.dot(bl),l=vl.dot(vl),c=vl.dot(bl),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,yl),yl.x>=0&&yl.y>=0&&yl.x+yl.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,yl),s.set(0,0),s.addScaledVector(i,yl.x),s.addScaledVector(o,yl.y),s.addScaledVector(a,yl.z),s}static isFrontFacing(e,t,n,r){return gl.subVectors(n,t),vl.subVectors(e,t),gl.cross(vl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gl.subVectors(this.c,this.b),vl.subVectors(this.a,this.b),.5*gl.cross(vl).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return El.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return El.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return El.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return El.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return El.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;xl.subVectors(r,n),wl.subVectors(i,n),Sl.subVectors(e,n);const s=xl.dot(Sl),l=wl.dot(Sl);if(s<=0&&l<=0)return t.copy(n);Ml.subVectors(e,r);const c=xl.dot(Ml),u=wl.dot(Ml);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(xl,o);Tl.subVectors(e,i);const d=xl.dot(Tl),p=wl.dot(Tl);if(p>=0&&d<=p)return t.copy(i);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(wl,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return _l.subVectors(i,r),a=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(_l,a);const g=1/(m+f+h);return o=f*g,a=h*g,t.copy(n).addScaledVector(xl,o).addScaledVector(wl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Cl=0;class Al extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:Cl++}),this.uuid=Ga(),this.name="",this.type="Material",this.fog=!0,this.blending=_r,this.side=gr,this.vertexColors=!1,this.opacity=1,this.format=Bi,this.transparent=!1,this.blendSrc=Dr,this.blendDst=jr,this.blendEquation=Cr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$r,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ta,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ha,this.stencilZFail=ha,this.stencilZPass=ha,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===yr;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_r&&(n.blending=this.blending),this.side!==gr&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Bi&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Al.prototype.isMaterial=!0;const Rl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kl={h:0,s:0,l:0},Pl={h:0,s:0,l:0};function Ll(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Ol(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Nl(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Il{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Ha(e,1),t=Va(t,0,1),n=Va(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Ll(i,r,e+1/3),this.g=Ll(i,r,e),this.b=Ll(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Rl[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Ol(e.r),this.g=Ol(e.g),this.b=Ol(e.b),this}copyLinearToSRGB(e){return this.r=Nl(e.r),this.g=Nl(e.g),this.b=Nl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const l=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=l<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(kl),kl.h+=e,kl.s+=t,kl.l+=n,this.setHSL(kl.h,kl.s,kl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(kl),e.getHSL(Pl);const n=Wa(kl.h,Pl.h,t),r=Wa(kl.s,Pl.s,t),i=Wa(kl.l,Pl.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Il.NAMES=Rl,Il.prototype.isColor=!0,Il.prototype.r=1,Il.prototype.g=1,Il.prototype.b=1;class Dl extends Al{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Il(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Dl.prototype.isMeshBasicMaterial=!0;const jl=new ps,Fl=new Ka;class zl{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Ea,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Il),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Ka),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ps),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new ls),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Fl.fromBufferAttribute(this,t),Fl.applyMatrix3(e),this.setXY(t,Fl.x,Fl.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)jl.fromBufferAttribute(this,t),jl.applyMatrix3(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.applyMatrix4(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.applyNormalMatrix(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)jl.x=this.getX(t),jl.y=this.getY(t),jl.z=this.getZ(t),jl.transformDirection(e),this.setXYZ(t,jl.x,jl.y,jl.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Ea&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}zl.prototype.isBufferAttribute=!0;class Bl extends zl{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ul extends zl{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Gl extends zl{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Vl extends zl{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Hl extends zl{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Wl extends zl{constructor(e,t,n){super(new Int32Array(e),t,n)}}class $l extends zl{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ql extends zl{constructor(e,t,n){super(new Uint16Array(e),t,n)}}ql.prototype.isFloat16BufferAttribute=!0;class Xl extends zl{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Yl extends zl{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Kl=0;const Jl=new Hs,Ql=new ml,Zl=new ps,ec=new gs,tc=new gs,nc=new ps;class rc extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:Kl++}),this.uuid=Ga(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Qa(e)>65535?$l:Hl)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Ja).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Jl.makeRotationFromQuaternion(e),this.applyMatrix4(Jl),this}rotateX(e){return Jl.makeRotationX(e),this.applyMatrix4(Jl),this}rotateY(e){return Jl.makeRotationY(e),this.applyMatrix4(Jl),this}rotateZ(e){return Jl.makeRotationZ(e),this.applyMatrix4(Jl),this}translate(e,t,n){return Jl.makeTranslation(e,t,n),this.applyMatrix4(Jl),this}scale(e,t,n){return Jl.makeScale(e,t,n),this.applyMatrix4(Jl),this}lookAt(e){return Ql.lookAt(e),Ql.updateMatrix(),this.applyMatrix4(Ql.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zl).negate(),this.translate(Zl.x,Zl.y,Zl.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Xl(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new gs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ps(-1/0,-1/0,-1/0),new ps(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];ec.setFromBufferAttribute(e),this.morphTargetsRelative?(nc.addVectors(this.boundingBox.min,ec.min),this.boundingBox.expandByPoint(nc),nc.addVectors(this.boundingBox.max,ec.max),this.boundingBox.expandByPoint(nc)):(this.boundingBox.expandByPoint(ec.min),this.boundingBox.expandByPoint(ec.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ps,1/0);if(e){const n=this.boundingSphere.center;if(ec.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];tc.setFromBufferAttribute(n),this.morphTargetsRelative?(nc.addVectors(ec.min,tc.min),ec.expandByPoint(nc),nc.addVectors(ec.max,tc.max),ec.expandByPoint(nc)):(ec.expandByPoint(tc.min),ec.expandByPoint(tc.max))}ec.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)nc.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(nc));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)nc.fromBufferAttribute(o,t),a&&(Zl.fromBufferAttribute(e,t),nc.add(Zl)),r=Math.max(r,n.distanceToSquared(nc))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new zl(new Float32Array(4*a),4));const s=t.tangent.array,l=[],c=[];for(let T=0;T<a;T++)l[T]=new ps,c[T]=new ps;const u=new ps,h=new ps,d=new ps,p=new Ka,f=new Ka,m=new Ka,g=new ps,v=new ps;function b(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),f.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let T=0,E=y.length;T<E;++T){const e=y[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)b(n[r+0],n[r+1],n[r+2])}const x=new ps,w=new ps,_=new ps,S=new ps;function M(e){_.fromArray(i,3*e),S.copy(_);const t=l[e];x.copy(t),x.sub(_.multiplyScalar(_.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}for(let T=0,E=y.length;T<E;++T){const e=y[T],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)M(n[r+0]),M(n[r+1]),M(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new zl(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ps,i=new ps,o=new ps,a=new ps,s=new ps,l=new ps,c=new ps,u=new ps;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)nc.fromBufferAttribute(e,t),nc.normalize(),e.setXYZ(t,nc.x,nc.y,nc.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new zl(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rc,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}rc.prototype.isBufferGeometry=!0;const ic=new Hs,oc=new Vs,ac=new Is,sc=new ps,lc=new ps,cc=new ps,uc=new ps,hc=new ps,dc=new ps,pc=new ps,fc=new ps,mc=new ps,gc=new Ka,vc=new Ka,bc=new Ka,yc=new ps,xc=new ps;class wc extends ml{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Dl;super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),ac.copy(n.boundingSphere),ac.applyMatrix4(i),!1===e.ray.intersectsSphere(ac))return;if(ic.copy(i).invert(),oc.copy(e.ray).applyMatrix4(ic),null!==n.boundingBox&&!1===oc.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(i.count,Math.min(p.start+p.count,d.start+d.count));n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=_c(this,f,e,oc,a,s,l,c,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);o=_c(this,r,e,oc,a,s,l,c,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){o=_c(this,p,e,oc,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){o=_c(this,r,e,oc,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function _c(e,t,n,r,i,o,a,s,l,c,u,h){sc.fromBufferAttribute(i,c),lc.fromBufferAttribute(i,u),cc.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(o&&d){pc.set(0,0,0),fc.set(0,0,0),mc.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(uc.fromBufferAttribute(n,c),hc.fromBufferAttribute(n,u),dc.fromBufferAttribute(n,h),a?(pc.addScaledVector(uc,t),fc.addScaledVector(hc,t),mc.addScaledVector(dc,t)):(pc.addScaledVector(uc.sub(sc),t),fc.addScaledVector(hc.sub(lc),t),mc.addScaledVector(dc.sub(cc),t)))}sc.add(pc),lc.add(fc),cc.add(mc)}e.isSkinnedMesh&&(e.boneTransform(c,sc),e.boneTransform(u,lc),e.boneTransform(h,cc));const p=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===vr?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==br,s),null===l)return null;xc.copy(s),xc.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(xc);return c<n.near||c>n.far?null:{distance:c,point:xc.clone(),object:e}}(e,t,n,r,sc,lc,cc,yc);if(p){s&&(gc.fromBufferAttribute(s,c),vc.fromBufferAttribute(s,u),bc.fromBufferAttribute(s,h),p.uv=El.getUV(yc,sc,lc,cc,gc,vc,bc,new Ka)),l&&(gc.fromBufferAttribute(l,c),vc.fromBufferAttribute(l,u),bc.fromBufferAttribute(l,h),p.uv2=El.getUV(yc,sc,lc,cc,gc,vc,bc,new Ka));const e={a:c,b:u,c:h,normal:new ps,materialIndex:0};El.getNormal(sc,lc,cc,e.normal),p.face=e}return p}wc.prototype.isMesh=!0;class Sc extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,o,p,f,m,g,v){const b=o/m,y=p/g,x=o/2,w=p/2,_=f/2,S=m+1,M=g+1;let T=0,E=0;const C=new ps;for(let a=0;a<M;a++){const o=a*y-w;for(let s=0;s<S;s++){const h=s*b-x;C[e]=h*r,C[t]=o*i,C[n]=_,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=f>0?1:-1,c.push(C.x,C.y,C.z),u.push(s/m),u.push(1-a/g),T+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+S*a,n=h+e+S*(a+1),r=h+(e+1)+S*(a+1),i=h+(e+1)+S*a;s.push(t,n,i),s.push(n,r,i),E+=6}a.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Xl(l,3)),this.setAttribute("normal",new Xl(c,3)),this.setAttribute("uv",new Xl(u,2))}static fromJSON(e){return new Sc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mc(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Tc(e){const t={};for(let n=0;n<e.length;n++){const r=Mc(e[n]);for(const e in r)t[e]=r[e]}return t}const Ec={clone:Mc,merge:Tc};class Cc extends Al{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Cc.prototype.isShaderMaterial=!0;class Ac extends ml{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Hs,this.projectionMatrix=new Hs,this.projectionMatrixInverse=new Hs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Ac.prototype.isCamera=!0;class Rc extends Ac{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ua*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ba*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ua*Math.atan(Math.tan(.5*Ba*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ba*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Rc.prototype.isPerspectiveCamera=!0;const kc=90;class Pc extends ml{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Rc(kc,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ps(1,0,0)),this.add(r);const i=new Rc(kc,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ps(-1,0,0)),this.add(i);const o=new Rc(kc,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ps(0,1,0)),this.add(o);const a=new Rc(kc,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ps(0,-1,0)),this.add(a);const s=new Rc(kc,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ps(0,0,1)),this.add(s);const l=new Rc(kc,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ps(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class Lc extends as{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:si,n,r,i,o,a,s,l,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Lc.prototype.isCubeTexture=!0;class Oc extends cs{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Lc(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:wi,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Bi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Sc(5,5,5),a=new Cc({name:"CubemapFromEquirect",uniforms:Mc(n),vertexShader:r,fragmentShader:i,side:vr,blending:wr});a.uniforms.tEquirect.value=t;const s=new wc(o,a),l=t.minFilter;t.minFilter===Mi&&(t.minFilter=wi);return new Pc(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}Oc.prototype.isWebGLCubeRenderTarget=!0;const Nc=new ps,Ic=new ps,Dc=new Ja;class jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Nc.subVectors(n,t).cross(Ic.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Nc),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Dc.getNormalMatrix(e),r=this.coplanarPoint(Nc).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}jc.prototype.isPlane=!0;const Fc=new Is,zc=new ps;class Bc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jc,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new jc,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new jc;this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],b=n[15];return t[0].setComponents(a-r,u-s,f-h,b-m).normalize(),t[1].setComponents(a+r,u+s,f+h,b+m).normalize(),t[2].setComponents(a+i,u+l,f+d,b+g).normalize(),t[3].setComponents(a-i,u-l,f-d,b-g).normalize(),t[4].setComponents(a-o,u-c,f-p,b-v).normalize(),t[5].setComponents(a+o,u+c,f+p,b+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Fc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Fc)}intersectsSprite(e){return Fc.center.set(0,0,0),Fc.radius=.7071067811865476,Fc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(zc.x=r.normal.x>0?e.max.x:e.min.x,zc.y=r.normal.y>0?e.max.y:e.min.y,zc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Uc(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Gc(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class Vc extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new Xl(p,3)),this.setAttribute("normal",new Xl(f,3)),this.setAttribute("uv",new Xl(m,2))}static fromJSON(e){return new Vc(e.width,e.height,e.widthSegments,e.heightSegments)}}const Hc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Wc={common:{diffuse:{value:new Il(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ja},uv2Transform:{value:new Ja},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ka(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Il(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Il(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ja}},sprite:{diffuse:{value:new Il(16777215)},opacity:{value:1},center:{value:new Ka(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ja}}},$c={basic:{uniforms:Tc([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.fog]),vertexShader:Hc.meshbasic_vert,fragmentShader:Hc.meshbasic_frag},lambert:{uniforms:Tc([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.fog,Wc.lights,{emissive:{value:new Il(0)}}]),vertexShader:Hc.meshlambert_vert,fragmentShader:Hc.meshlambert_frag},phong:{uniforms:Tc([Wc.common,Wc.specularmap,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.fog,Wc.lights,{emissive:{value:new Il(0)},specular:{value:new Il(1118481)},shininess:{value:30}}]),vertexShader:Hc.meshphong_vert,fragmentShader:Hc.meshphong_frag},standard:{uniforms:Tc([Wc.common,Wc.envmap,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.roughnessmap,Wc.metalnessmap,Wc.fog,Wc.lights,{emissive:{value:new Il(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hc.meshphysical_vert,fragmentShader:Hc.meshphysical_frag},toon:{uniforms:Tc([Wc.common,Wc.aomap,Wc.lightmap,Wc.emissivemap,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.gradientmap,Wc.fog,Wc.lights,{emissive:{value:new Il(0)}}]),vertexShader:Hc.meshtoon_vert,fragmentShader:Hc.meshtoon_frag},matcap:{uniforms:Tc([Wc.common,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,Wc.fog,{matcap:{value:null}}]),vertexShader:Hc.meshmatcap_vert,fragmentShader:Hc.meshmatcap_frag},points:{uniforms:Tc([Wc.points,Wc.fog]),vertexShader:Hc.points_vert,fragmentShader:Hc.points_frag},dashed:{uniforms:Tc([Wc.common,Wc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hc.linedashed_vert,fragmentShader:Hc.linedashed_frag},depth:{uniforms:Tc([Wc.common,Wc.displacementmap]),vertexShader:Hc.depth_vert,fragmentShader:Hc.depth_frag},normal:{uniforms:Tc([Wc.common,Wc.bumpmap,Wc.normalmap,Wc.displacementmap,{opacity:{value:1}}]),vertexShader:Hc.meshnormal_vert,fragmentShader:Hc.meshnormal_frag},sprite:{uniforms:Tc([Wc.sprite,Wc.fog]),vertexShader:Hc.sprite_vert,fragmentShader:Hc.sprite_frag},background:{uniforms:{uvTransform:{value:new Ja},t2D:{value:null}},vertexShader:Hc.background_vert,fragmentShader:Hc.background_frag},cube:{uniforms:Tc([Wc.envmap,{opacity:{value:1}}]),vertexShader:Hc.cube_vert,fragmentShader:Hc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hc.equirect_vert,fragmentShader:Hc.equirect_frag},distanceRGBA:{uniforms:Tc([Wc.common,Wc.displacementmap,{referencePosition:{value:new ps},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hc.distanceRGBA_vert,fragmentShader:Hc.distanceRGBA_frag},shadow:{uniforms:Tc([Wc.lights,Wc.fog,{color:{value:new Il(0)},opacity:{value:1}}]),vertexShader:Hc.shadow_vert,fragmentShader:Hc.shadow_frag}};function qc(e,t,n,r,i){const o=new Il(0);let a,s,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),l=t,d(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(o,l)},render:function(n,i){let p=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=t.get(f));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?d(o,l):f&&f.isColor&&(d(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===hi)?(void 0===s&&(s=new wc(new Sc(1,1,1),new Cc({name:"BackgroundCubeMaterial",uniforms:Mc($c.cube.uniforms),vertexShader:$c.cube.vertexShader,fragmentShader:$c.cube.fragmentShader,side:vr,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c===f&&u===f.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===a&&(a=new wc(new Vc(2,2),new Cc({name:"BackgroundMaterial",uniforms:Mc($c.background.uniforms),vertexShader:$c.background.vertexShader,fragmentShader:$c.background.fragmentShader,side:gr,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),a.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&u===f.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=f,u=f.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Xc(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=d(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function b(){y(),c!==l&&(c=l,u(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,b,y){let x=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u);return u}(b,h,l);c!==t&&(c=t,u(c.object)),x=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const o in r){const e=n[o],t=r[o];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(b,y),x&&function(e,t){const n={},r=e.attributes;let i=0;for(const o in r){const e=r[o],t={};t.attribute=e,e.data&&(t.data=e.data),n[o]=t,i++}c.attributes=n,c.attributesNum=i,c.index=t}(b,y)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,x=!0)}!0===i.isInstancedMesh&&(x=!0),null!==y&&n.update(y,34963),x&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,l*h,(d+a/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,h,b),null!==y&&e.bindBuffer(34963,n.get(y).buffer))},reset:b,resetDefaultState:y,dispose:function(){b();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Yc(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function Kc(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),b=h>0,y=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:y,floatVertexTextures:b&&y,maxSamples:o?e.getParameter(36183):0}}function Jc(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new jc,s=new Ja,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||o&&!p)o?u(null):c();else{const e=o?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Qc(e){let t=new WeakMap;function n(e,t){return t===ci?e.mapping=si:t===ui&&(e.mapping=li),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===ci||o===ui){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new Oc(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}$c.physical={uniforms:Tc([$c.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ka(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Il(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ka},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Il(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Il(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Hc.meshphysical_vert,fragmentShader:Hc.meshphysical_frag};class Zc extends Ac{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Zc.prototype.isOrthographicCamera=!0;class eu extends Cc{constructor(e){super(e),this.type="RawShaderMaterial"}}eu.prototype.isRawShaderMaterial=!0;const tu=Math.pow(2,8),nu=[.125,.215,.35,.446,.526,.582],ru=5+nu.length,iu=20,ou={[Zo]:0,[ea]:1,[na]:2,[ra]:3,[ia]:4,[oa]:5,[ta]:6},au=new Zc,{_lodPlanes:su,_sizeLods:lu,_sigmas:cu}=vu(),uu=new Il;let hu=null;const du=(1+Math.sqrt(5))/2,pu=1/du,fu=[new ps(1,1,1),new ps(-1,1,1),new ps(1,1,-1),new ps(-1,1,-1),new ps(0,du,pu),new ps(0,du,-pu),new ps(pu,0,du),new ps(-pu,0,du),new ps(du,pu,0),new ps(-du,pu,0)];class mu{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new ps(0,1,0);return new eu({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:ou[Zo]},outputEncoding:{value:ou[Zo]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:wr,depthTest:!1,depthWrite:!1})}(iu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;hu=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=wu(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=xu(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<su.length;e++)su[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(hu),e.scissorTest=!1,yu(e,0,0,e.width,e.height)}_fromTexture(e){hu=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:gi,minFilter:gi,generateMipmaps:!1,type:Ei,format:Vi,encoding:gu(e)?e.encoding:na,depthBuffer:!1},n=bu(t);return n.depthBuffer=!e,this._pingPongRenderTarget=bu(t),n}_compileMaterial(e){const t=new wc(su[0],e);this._renderer.compile(t,au)}_sceneToCubeUV(e,t,n,r){const i=new Rc(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.outputEncoding,u=s.toneMapping;s.getClearColor(uu),s.toneMapping=ei,s.outputEncoding=Zo,s.autoClear=!1;const h=new Dl({name:"PMREM.Background",side:vr,depthWrite:!1,depthTest:!1}),d=new wc(new Sc,h);let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(uu),p=!0);for(let m=0;m<6;m++){const t=m%3;0==t?(i.up.set(0,o[m],0),i.lookAt(a[m],0,0)):1==t?(i.up.set(0,0,o[m]),i.lookAt(0,a[m],0)):(i.up.set(0,o[m],0),i.lookAt(0,0,a[m])),yu(r,t*tu,m>2?tu:0,tu,tu),s.setRenderTarget(r),p&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.outputEncoding=c,s.autoClear=l,e.background=f}_setEncoding(e,t){e.value=ou[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===si||e.mapping===li;r?null==this._cubemapShader&&(this._cubemapShader=wu()):null==this._equirectShader&&(this._equirectShader=xu());const i=r?this._cubemapShader:this._equirectShader,o=new wc(su[0],i),a=i.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),yu(t,0,0,3*tu,2*tu),n.setRenderTarget(t),n.render(o,au)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<ru;r++){const t=Math.sqrt(cu[r]*cu[r]-cu[r-1]*cu[r-1]),n=fu[(r-1)%fu.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new wc(su[r],l),u=l.uniforms,h=lu[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):iu;f>iu&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(iu));const m=[];let g=0;for(let b=0;b<iu;++b){const e=b/p,t=Math.exp(-e*e/2);m.push(t),0==b?g+=t:b<f&&(g+=2*t)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,this._setEncoding(u.inputEncoding,e.texture),this._setEncoding(u.outputEncoding,e.texture);const v=lu[r];yu(t,3*Math.max(0,tu-2*v),(0===r?0:2*tu)+2*v*(r>4?r-8+4:0),3*v,2*v),s.setRenderTarget(t),s.render(c,au)}}function gu(e){return void 0!==e&&e.type===Ei&&(e.encoding===Zo||e.encoding===ea||e.encoding===ta)}function vu(){const e=[],t=[],n=[];let r=8;for(let i=0;i<ru;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>4?a=nu[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),b=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,p*d*e),v.set(u,f*d*e);const i=[e,e,e,e,e,e];b.set(i,m*d*e)}const y=new rc;y.setAttribute("position",new zl(g,p)),y.setAttribute("uv",new zl(v,f)),y.setAttribute("faceIndex",new zl(b,m)),e.push(y),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function bu(e){const t=new cs(3*tu,3*tu,e);return t.texture.mapping=hi,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function yu(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function xu(){const e=new Ka(1,1);return new eu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:ou[Zo]},outputEncoding:{value:ou[Zo]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:wr,depthTest:!1,depthWrite:!1})}function wu(){return new eu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ou[Zo]},outputEncoding:{value:ou[Zo]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:wr,depthTest:!1,depthWrite:!1})}function _u(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping,a=o===ci||o===ui,s=o===si||o===li;if(a||s){if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){const o=e.getRenderTarget();null===n&&(n=new mu(e));const s=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),e.setRenderTarget(o),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Su(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Mu(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Qa(n)>65535?$l:Hl)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Tu(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function Eu(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class Cu extends as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Au(e,t){return e[0]-t[0]}function Ru(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ku(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Pu(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new ps,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=c.morphAttributes.position.length;let i=o.get(c);if(void 0===i||i.count!==r){void 0!==i&&i.texture.dispose();const e=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,s=c.morphAttributes.normal||[],l=!0===e?2:1;let u=c.attributes.position.count*l,h=1;u>t.maxTextureSize&&(h=Math.ceil(u/t.maxTextureSize),u=t.maxTextureSize);const d=new Float32Array(u*h*4*r),p=new Cu(d,u,h,r);p.format=Bi,p.type=Li;const f=4*l;for(let t=0;t<r;t++){const r=n[t],i=s[t],o=u*h*4*t;for(let t=0;t<r.count;t++){a.fromBufferAttribute(r,t),!0===r.normalized&&ku(a,r);const n=t*f;d[o+n+0]=a.x,d[o+n+1]=a.y,d[o+n+2]=a.z,d[o+n+3]=0,!0===e&&(a.fromBufferAttribute(i,t),!0===i.normalized&&ku(a,i),d[o+n+4]=a.x,d[o+n+5]=a.y,d[o+n+6]=a.z,d[o+n+7]=0)}}i={count:r,texture:p,size:new Ka(u,h)},o.set(c,i)}let s=0;for(let e=0;e<d.length;e++)s+=d[e];const l=c.morphTargetsRelative?1:1-s;h.getUniforms().setValue(e,"morphTargetBaseInfluence",l),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",i.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",i.size)}else{const t=void 0===d?0:d.length;let n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=d[e]}n.sort(Ru);for(let e=0;e<8;e++)e<t&&n[e][1]?(s[e][0]=n[e][0],s[e][1]=n[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(Au);const o=c.morphAttributes.position,a=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=s[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&c.getAttribute("morphTarget"+e)!==o[n]&&c.setAttribute("morphTarget"+e,o[n]),a&&c.getAttribute("morphNormal"+e)!==a[n]&&c.setAttribute("morphNormal"+e,a[n]),i[e]=r,l+=r):(o&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),a&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}const u=c.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",u),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Lu(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}Cu.prototype.isDataTexture2DArray=!0;class Ou extends as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=gi,this.minFilter=gi,this.wrapR=fi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Ou.prototype.isDataTexture3D=!0;const Nu=new as,Iu=new Cu,Du=new Ou,ju=new Lc,Fu=[],zu=[],Bu=new Float32Array(16),Uu=new Float32Array(9),Gu=new Float32Array(4);function Vu(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Fu[i];if(void 0===o&&(o=new Float32Array(i),Fu[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Hu(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Wu(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function $u(e,t){let n=zu[t];void 0===n&&(n=new Int32Array(t),zu[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function qu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Xu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hu(n,t))return;e.uniform2fv(this.addr,t),Wu(n,t)}}function Yu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Hu(n,t))return;e.uniform3fv(this.addr,t),Wu(n,t)}}function Ku(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hu(n,t))return;e.uniform4fv(this.addr,t),Wu(n,t)}}function Ju(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Hu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Wu(n,t)}else{if(Hu(n,r))return;Gu.set(r),e.uniformMatrix2fv(this.addr,!1,Gu),Wu(n,r)}}function Qu(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Hu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Wu(n,t)}else{if(Hu(n,r))return;Uu.set(r),e.uniformMatrix3fv(this.addr,!1,Uu),Wu(n,r)}}function Zu(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Hu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Wu(n,t)}else{if(Hu(n,r))return;Bu.set(r),e.uniformMatrix4fv(this.addr,!1,Bu),Wu(n,r)}}function eh(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function th(e,t){const n=this.cache;Hu(n,t)||(e.uniform2iv(this.addr,t),Wu(n,t))}function nh(e,t){const n=this.cache;Hu(n,t)||(e.uniform3iv(this.addr,t),Wu(n,t))}function rh(e,t){const n=this.cache;Hu(n,t)||(e.uniform4iv(this.addr,t),Wu(n,t))}function ih(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function oh(e,t){const n=this.cache;Hu(n,t)||(e.uniform2uiv(this.addr,t),Wu(n,t))}function ah(e,t){const n=this.cache;Hu(n,t)||(e.uniform3uiv(this.addr,t),Wu(n,t))}function sh(e,t){const n=this.cache;Hu(n,t)||(e.uniform4uiv(this.addr,t),Wu(n,t))}function lh(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Nu,i)}function ch(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Du,i)}function uh(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||ju,i)}function hh(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Iu,i)}function dh(e,t){e.uniform1fv(this.addr,t)}function ph(e,t){const n=Vu(t,this.size,2);e.uniform2fv(this.addr,n)}function fh(e,t){const n=Vu(t,this.size,3);e.uniform3fv(this.addr,n)}function mh(e,t){const n=Vu(t,this.size,4);e.uniform4fv(this.addr,n)}function gh(e,t){const n=Vu(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function vh(e,t){const n=Vu(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function bh(e,t){const n=Vu(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function yh(e,t){e.uniform1iv(this.addr,t)}function xh(e,t){e.uniform2iv(this.addr,t)}function wh(e,t){e.uniform3iv(this.addr,t)}function _h(e,t){e.uniform4iv(this.addr,t)}function Sh(e,t){e.uniform1uiv(this.addr,t)}function Mh(e,t){e.uniform2uiv(this.addr,t)}function Th(e,t){e.uniform3uiv(this.addr,t)}function Eh(e,t){e.uniform4uiv(this.addr,t)}function Ch(e,t,n){const r=t.length,i=$u(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Nu,i[o])}function Ah(e,t,n){const r=t.length,i=$u(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(t[o]||Du,i[o])}function Rh(e,t,n){const r=t.length,i=$u(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||ju,i[o])}function kh(e,t,n){const r=t.length,i=$u(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||Iu,i[o])}function Ph(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return qu;case 35664:return Xu;case 35665:return Yu;case 35666:return Ku;case 35674:return Ju;case 35675:return Qu;case 35676:return Zu;case 5124:case 35670:return eh;case 35667:case 35671:return th;case 35668:case 35672:return nh;case 35669:case 35673:return rh;case 5125:return ih;case 36294:return oh;case 36295:return ah;case 36296:return sh;case 35678:case 36198:case 36298:case 36306:case 35682:return lh;case 35679:case 36299:case 36307:return ch;case 35680:case 36300:case 36308:case 36293:return uh;case 36289:case 36303:case 36311:case 36292:return hh}}(t.type)}function Lh(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return dh;case 35664:return ph;case 35665:return fh;case 35666:return mh;case 35674:return gh;case 35675:return vh;case 35676:return bh;case 5124:case 35670:return yh;case 35667:case 35671:return xh;case 35668:case 35672:return wh;case 35669:case 35673:return _h;case 5125:return Sh;case 36294:return Mh;case 36295:return Th;case 36296:return Eh;case 35678:case 36198:case 36298:case 36306:case 35682:return Ch;case 35679:case 36299:case 36307:return Ah;case 35680:case 36300:case 36308:case 36293:return Rh;case 36289:case 36303:case 36311:case 36292:return kh}}(t.type)}function Oh(e){this.id=e,this.seq=[],this.map={}}Lh.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Wu(t,e)},Oh.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const Nh=/(\w+)(\])?(\[|\.)?/g;function Ih(e,t){e.seq.push(t),e.map[t.id]=t}function Dh(e,t,n){const r=e.name,i=r.length;for(Nh.lastIndex=0;;){const o=Nh.exec(r),a=Nh.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){Ih(n,void 0===c?new Ph(s,e,t):new Lh(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Oh(s),Ih(n,e)),n=e}}}function jh(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Dh(n,e.getUniformLocation(t,n.name),this)}}function Fh(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}jh.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},jh.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},jh.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},jh.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let zh=0;function Bh(e){switch(e){case Zo:return["Linear","( value )"];case ea:return["sRGB","( value )"];case na:return["RGBE","( value )"];case ra:return["RGBM","( value, 7.0 )"];case ia:return["RGBM","( value, 16.0 )"];case oa:return["RGBD","( value, 256.0 )"];case ta:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Uh(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Gh(e,t){const n=Bh(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Vh(e,t){const n=Bh(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Hh(e,t){let n;switch(t){case ti:n="Linear";break;case ni:n="Reinhard";break;case ri:n="OptimizedCineon";break;case ii:n="ACESFilmic";break;case oi:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Wh(e){return""!==e}function $h(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function qh(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Xh=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yh(e){return e.replace(Xh,Kh)}function Kh(e,t){const n=Hc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Yh(n)}const Jh=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Qh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zh(e){return e.replace(Qh,td).replace(Jh,ed)}function ed(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),td(e,t,n,r)}function td(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function nd(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function rd(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===pr?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===fr?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===mr&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case si:case li:t="ENVMAP_TYPE_CUBE";break;case hi:case di:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case li:case di:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Jr:t="ENVMAP_BLENDING_MULTIPLY";break;case Qr:t="ENVMAP_BLENDING_MIX";break;case Zr:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wh).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[f].filter(Wh).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Wh).join("\n"),v.length>0&&(v+="\n")):(g=[nd(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wh).join("\n"),v=[p,nd(n),"#define SHADER_NAME "+n.shaderName,f,"#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ei?"#define TONE_MAPPING":"",n.toneMapping!==ei?Hc.tonemapping_pars_fragment:"",n.toneMapping!==ei?Hh("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===zi?"#define OPAQUE":"",Hc.encodings_pars_fragment,n.map?Gh("mapTexelToLinear",n.mapEncoding):"",n.matcap?Gh("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Gh("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Gh("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?Gh("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?Gh("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?Gh("lightMapTexelToLinear",n.lightMapEncoding):"",Vh("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Wh).join("\n")),a=Yh(a),a=$h(a,n),a=qh(a,n),s=Yh(s),s=$h(s,n),s=qh(s,n),a=Zh(a),s=Zh(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Da?"":"out highp vec4 pc_fragColor;",n.glslVersion===Da?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=b+v+s,x=Fh(i,35633,b+g+a),w=Fh(i,35632,y);if(i.attachShader(m,x),i.attachShader(m,w),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(x).trim(),n=i.getShaderInfoLog(w).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=Uh(i,x,"vertex"),n=Uh(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let _,S;return i.deleteShader(x),i.deleteShader(w),this.getUniforms=function(){return void 0===_&&(_=new jh(i,m)),_},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=zh++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}function id(e,t,n,r,i,o,a){const s=[],l=i.isWebGL2,c=i.logarithmicDepthBuffer,u=i.floatVertexTextures,h=i.maxVertexUniforms,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function g(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Zo,t}return{getParameters:function(o,s,m,v,b){const y=v.fog,x=o.isMeshStandardMaterial?v.environment:null,w=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),_=f[o.type],S=b.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(u)return 1024;{const e=h,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(b):0;let M,T;if(null!==o.precision&&(p=i.getMaxPrecision(o.precision),p!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",p,"instead.")),_){const e=$c[_];M=e.vertexShader,T=e.fragmentShader}else M=o.vertexShader,T=o.fragmentShader;const E=e.getRenderTarget(),C=o.alphaTest>0,A=o.clearcoat>0;return{isWebGL2:l,shaderID:_,shaderName:o.type,vertexShader:M,fragmentShader:T,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:p,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:d,outputEncoding:null!==E?g(E.texture):e.outputEncoding,map:!!o.map,mapEncoding:g(o.map),matcap:!!o.matcap,matcapEncoding:g(o.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:g(w),envMapCubeUV:!!w&&(w.mapping===hi||w.mapping===di),lightMap:!!o.lightMap,lightMapEncoding:g(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:g(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===ca,tangentSpaceNormalMap:o.normalMapType===la,clearcoat:A,clearcoatMap:A&&!!o.clearcoatMap,clearcoatRoughnessMap:A&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:A&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:g(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:C,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:g(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!b.geometry&&!!b.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.geometry&&!!b.geometry.attributes.color&&4===b.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!y,useFog:o.fog,fogExp2:y&&y.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===b.isSkinnedMesh&&S>0,maxBones:S,useVertexTexture:u,morphTargets:!!b.geometry&&!!b.geometry.morphAttributes.position,morphNormals:!!b.geometry&&!!b.geometry.morphAttributes.normal,morphTargetsCount:b.geometry&&b.geometry.morphAttributes.position?b.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:ei,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===br,flipSided:o.side===vr,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(ns(t.fragmentShader)),n.push(ns(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<m.length;e++)n.push(t[m[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=$c[t];n=Ec.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=s.length;e<i;e++){const t=s[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new rd(e,n,t,o),s.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function od(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function ad(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function sd(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ld(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,l,c){let u=t[n];const h=e.get(o);return void 0===u?(u={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:l,group:c},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=o,u.program=h.program||a,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,l,c){const u=s(e,t,n,a,l,c);n.transmission>0?i.push(u):!0===n.transparent?o.push(u):r.push(u)},unshift:function(e,t,n,a,l,c){const u=s(e,t,n,a,l,c);n.transmission>0?i.unshift(u):!0===n.transparent?o.unshift(u):r.unshift(u)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||ad),i.length>1&&i.sort(t||sd),o.length>1&&o.sort(t||sd)}}}function cd(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new ld(e),t.set(n,[i])):r>=t.get(n).length?(i=new ld(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function ud(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ps,color:new Il};break;case"SpotLight":n={position:new ps,direction:new ps,color:new Il,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ps,color:new Il,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ps,skyColor:new Il,groundColor:new Il};break;case"RectAreaLight":n={color:new Il,position:new ps,halfWidth:new ps,halfHeight:new ps}}return e[t.id]=n,n}}}let hd=0;function dd(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function pd(e,t){const n=new ud,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ka};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ka,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new ps);const o=new ps,a=new Hs,s=new Hs;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;o.sort(dd);const b=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,y=t.intensity,x=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*y*b,l+=a.g*y*b,c+=a.b*y*b;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=w,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(y*b),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=w,i.spotShadowMatrix[d]=t.shadow.matrix,v++}i.spot[d]=e,d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=w,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y*b),e.groundColor.copy(t.groundColor).multiplyScalar(y*b),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Wc.LTC_FLOAT_1,i.rectAreaLTC2=Wc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Wc.LTC_HALF_1,i.rectAreaLTC2=Wc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const y=i.hash;y.directionalLength===u&&y.pointLength===h&&y.spotLength===d&&y.rectAreaLength===p&&y.hemiLength===f&&y.numDirectionalShadows===m&&y.numPointShadows===g&&y.numSpotShadows===v||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,y.directionalLength=u,y.pointLength=h,y.spotLength=d,y.rectAreaLength=p,y.hemiLength=f,y.numDirectionalShadows=m,y.numPointShadows=g,y.numSpotShadows=v,i.version=hd++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(t.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function fd(e,t){const n=new pd(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function md(e,t){let n=new WeakMap;return{get:function(r){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new fd(e,t),n.set(r,[i])):o>=n.get(r).length?(i=new fd(e,t),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}class gd extends Al{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=aa,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}gd.prototype.isMeshDepthMaterial=!0;class vd extends Al{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ps,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}vd.prototype.isMeshDistanceMaterial=!0;const bd="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",yd="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function xd(e,t,n){let r=new Bc;const i=new Ka,o=new Ka,a=new ls,s=new gd({depthPacking:sa}),l=new vd,c={},u=n.maxTextureSize,h={0:vr,1:gr,2:br},d=new Cc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ka},radius:{value:4}},vertexShader:bd,fragmentShader:yd}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new rc;f.setAttribute("position",new zl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new wc(f,d),g=this;function v(n,r){const i=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,m,null)}function b(t,n,r,i,o,a,u){let d=null;const p=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(d=void 0!==p?p:!0===i.isPointLight?l:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){const e=d.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=d.clone(),n[t]=i),d=i}return d.visible=r.visible,d.wireframe=r.wireframe,d.side=u===mr?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],d.alphaMap=r.alphaMap,d.alphaTest=r.alphaTest,d.clipShadows=r.clipShadows,d.clippingPlanes=r.clippingPlanes,d.clipIntersection=r.clipIntersection,d.displacementMap=r.displacementMap,d.displacementScale=r.displacementScale,d.displacementBias=r.displacementBias,d.wireframeLinewidth=r.wireframeLinewidth,d.linewidth=r.linewidth,!0===i.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(i.matrixWorld),d.nearDistance=o,d.farDistance=a),d}function y(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===mr)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=b(n,0,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=b(n,0,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pr,this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(wr),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const l=t[p],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map&&!c.isPointLightShadow&&this.type===mr){const e={minFilter:wi,magFilter:wi,format:Bi};c.map=new cs(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.mapPass=new cs(i.x,i.y,e),c.camera.updateProjectionMatrix()}if(null===c.map){const e={minFilter:gi,magFilter:gi,format:Bi};c.map=new cs(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const f=c.getViewportCount();for(let e=0;e<f;e++){const t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),y(n,s,c.camera,l,this.type)}c.isPointLightShadow||this.type!==mr||v(c,s),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function wd(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new ls;let r=null;const i=new ls(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?D(2929):j(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case Vr:e.depthFunc(512);break;case Hr:e.depthFunc(519);break;case Wr:e.depthFunc(513);break;case $r:e.depthFunc(515);break;case qr:e.depthFunc(514);break;case Xr:e.depthFunc(518);break;case Yr:e.depthFunc(516);break;case Kr:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?D(2960):j(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}};let s={},l={},c=null,u=!1,h=null,d=null,p=null,f=null,m=null,g=null,v=null,b=!1,y=null,x=null,w=null,_=null,S=null;const M=e.getParameter(35661);let T=!1,E=0;const C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(E=parseFloat(/^WebGL (\d)/.exec(C)[1]),T=E>=1):-1!==C.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),T=E>=2);let A=null,R={};const k=e.getParameter(3088),P=e.getParameter(2978),L=(new ls).fromArray(k),O=(new ls).fromArray(P);function N(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}const I={};function D(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function j(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}I[3553]=N(3553,3553,1),I[34067]=N(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),D(2929),o.setFunc($r),U(!1),G(cr),D(2884),B(wr);const F={[Cr]:32774,[Ar]:32778,[Rr]:32779};if(r)F[kr]=32775,F[Pr]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(F[kr]=e.MIN_EXT,F[Pr]=e.MAX_EXT)}const z={[Lr]:0,[Or]:1,[Nr]:768,[Dr]:770,[Gr]:776,[Br]:774,[Fr]:772,[Ir]:769,[jr]:771,[Ur]:775,[zr]:773};function B(t,n,r,i,o,a,s,l){if(t!==wr){if(!1===u&&(D(3042),u=!0),t===Er)o=o||n,a=a||r,s=s||i,n===d&&o===m||(e.blendEquationSeparate(F[n],F[o]),d=n,m=o),r===p&&i===f&&a===g&&s===v||(e.blendFuncSeparate(z[r],z[i],z[a],z[s]),p=r,f=i,g=a,v=s),h=t,b=null;else if(t!==h||l!==b){if(d===Cr&&m===Cr||(e.blendEquation(32774),d=Cr,m=Cr),l)switch(t){case _r:e.blendFuncSeparate(1,771,1,771);break;case Sr:e.blendFunc(1,1);break;case Mr:e.blendFuncSeparate(0,0,769,771);break;case Tr:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case _r:e.blendFuncSeparate(770,771,1,771);break;case Sr:e.blendFunc(770,1);break;case Mr:e.blendFunc(0,769);break;case Tr:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,f=null,g=null,v=null,h=t,b=l}}else!0===u&&(j(3042),u=!1)}function U(t){y!==t&&(t?e.frontFace(2304):e.frontFace(2305),y=t)}function G(t){t!==lr?(D(2884),t!==x&&(t===cr?e.cullFace(1029):t===ur?e.cullFace(1028):e.cullFace(1032))):j(2884),x=t}function V(t,n,r){t?(D(32823),_===n&&S===r||(e.polygonOffset(n,r),_=n,S=r)):j(32823)}function H(t){void 0===t&&(t=33984+M-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:i,depth:o,stencil:a},enable:D,disable:j,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,r&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:B,setMaterial:function(e,t){e.side===br?j(2884):D(2884);let n=e.side===vr;t&&(n=!n),U(n),e.blending===_r&&!1===e.transparent?B(wr):B(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),V(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?D(32926):j(32926)},setFlipSided:U,setCullFace:G,setLineWidth:function(t){t!==w&&(T&&e.lineWidth(t),w=t)},setPolygonOffset:V,setScissorTest:function(e){e?D(3089):j(3089)},activeTexture:H,bindTexture:function(t,n){null===A&&H();let r=R[A];void 0===r&&(r={type:void 0,texture:void 0},R[A]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||I[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=R[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},A=null,R={},l={},c=null,u=!1,h=null,d=null,p=null,f=null,m=null,g=null,v=null,b=!1,y=null,x=null,w=null,_=null,S=null,L.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function _d(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,p=new WeakMap;let f,m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function g(e,t){return m?new OffscreenCanvas(e,t):ts("canvas")}function v(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Xa:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===f&&(f=g(o,a));const s=n?g(o,a):f;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return $a(e.width)&&$a(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==gi&&e.minFilter!==wi}function x(t){e.generateMipmap(t)}function w(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function _(e){return e===gi||e===vi||e===yi?9728:9729}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&p.delete(n),a.memory.textures--}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}let T=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function C(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;P(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=a||l?l?r.image[e].image:r.image[e]:v(r.image[e],!1,!0,c);const h=b(u[0])||s,d=o.convert(r.format),p=o.convert(r.type),f=w(r.internalFormat,d,p,r.encoding);let m;if(k(34067,r,h),a)for(let e=0;e<6;e++){m=u[e].mipmaps;for(let t=0;t<m.length;t++){const i=m[t];r.format!==Bi&&r.format!==zi?null!==d?n.compressedTexImage2D(34069+e,t,f,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,f,i.width,i.height,0,d,p,i.data)}}else{m=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,f,u[e].width,u[e].height,0,d,p,u[e].data);for(let t=0;t<m.length;t++){const r=m[t].image[e].image;n.texImage2D(34069+e,t+1,f,r.width,r.height,0,d,p,r.data)}}else{n.texImage2D(34069+e,0,f,d,p,u[e]);for(let t=0;t<m.length;t++){const r=m[t];n.texImage2D(34069+e,t+1,f,d,p,r.image[e])}}}y(r,h)&&x(34067);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const A={[pi]:10497,[fi]:33071,[mi]:33648},R={[gi]:9728,[vi]:9984,[yi]:9986,[wi]:9729,[_i]:9985,[Mi]:9987};function k(n,o,a){if(a?(e.texParameteri(n,10242,A[o.wrapS]),e.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[o.wrapR]),e.texParameteri(n,10240,R[o.magFilter]),e.texParameteri(n,10241,R[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===fi&&o.wrapT===fi||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,_(o.magFilter)),e.texParameteri(n,10241,_(o.minFilter)),o.minFilter!==gi&&o.minFilter!==wi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===Li&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===Oi&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function P(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),a.memory.textures++)}function L(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),P(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!s&&(e.wrapS!==fi||e.wrapT!==fi||e.minFilter!==gi&&e.minFilter!==wi)}(r)&&!1===b(r.image),c=v(r.image,l,!1,u),h=b(c)||s,d=o.convert(r.format);let p,f=o.convert(r.type),m=w(r.internalFormat,d,f,r.encoding);k(a,r,h);const g=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===Li?36012:r.type===Pi?33190:r.type===ji?35056:33189:r.type===Li&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Hi&&6402===m&&r.type!==Ri&&r.type!==Pi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ri,f=o.convert(r.type)),r.format===Wi&&6402===m&&(m=34041,r.type!==ji&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ji,f=o.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(r.isDataTexture)if(g.length>0&&h){for(let e=0,t=g.length;e<t;e++)p=g[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data);else if(r.isCompressedTexture)for(let e=0,o=g.length;e<o;e++)p=g[e],r.format!==Bi&&r.format!==zi?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data);else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data);else{const e=function(e,t,n){return!0===y(e,n)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(r,c,h),i=s&&!0!==r.isVideoTexture,o=void 0===t.__version;if(g.length>0&&h){i&&o&&n.texStorage2D(3553,e,m,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)p=g[e],i?n.texSubImage2D(3553,e,0,0,d,f,p):n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1}else i?(o&&n.texStorage2D(3553,e,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,d,f,c)):n.texImage2D(3553,0,m,d,f,c)}y(r,h)&&x(a),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function O(t,i,a,s,l){const c=o.convert(a.format),u=o.convert(a.type),h=w(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),i.useRenderToTexture?d.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,D(i)):e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function N(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||n.useRenderToTexture){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Li?i=36012:t.type===Pi&&(i=33190));const r=D(n);n.useRenderToTexture?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=D(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):n.useRenderToTexture?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=w(t.internalFormat,i,a,t.encoding),l=D(n);r&&n.useRenderbuffer?e.renderbufferStorageMultisample(36161,l,s,n.width,n.height):n.useRenderToTexture?d.renderbufferStorageMultisampleEXT(36161,l,s,n.width,n.height):e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function I(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=D(i);if(i.depthTexture.format===Hi)i.useRenderToTexture?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==Wi)throw new Error("Unknown depthTexture format");i.useRenderToTexture?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function D(e){return s&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(h,e.samples):0}let j=!1,F=!1;this.allocateTextureUnit=function(){const e=T;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=C,this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&O(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&I(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=l.isDataTexture3D||l.isDataTexture2DArray,f=b(t)||s;if(!s||l.format!==zi||l.type!==Li&&l.type!==Oi||(l.format=Bi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(s){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=o.convert(l.format),i=o.convert(l.type),a=w(l.internalFormat,r,i,l.encoding),s=D(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),N(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,u.__webglTexture),k(34067,l,f);for(let e=0;e<6;e++)O(c.__webglFramebuffer[e],t,l,36064,34069+e);y(l,f)&&x(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),k(3553,o,f),O(c.__webglFramebuffer,t,o,36064+i,3553),y(o,f)&&x(3553)}n.unbindTexture()}else{let e=3553;if(p)if(s){e=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,u.__webglTexture),k(e,l,f),O(c.__webglFramebuffer,t,l,36064,e),y(l,f)&&x(e),n.unbindTexture()}t.depthBuffer&&I(t)},this.updateRenderTargetMipmap=function(e){const t=b(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),x(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(s){const i=t.width,o=t.height;let a=16384;const s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024));const c=r.get(t);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),e.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=I,this.setupFrameBufferTexture=O,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===j&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),j=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),C(e,t)}}function Sd(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===Ei)return 5121;if(e===Ni)return 32819;if(e===Ii)return 32820;if(e===Di)return 33635;if(e===Ci)return 5120;if(e===Ai)return 5122;if(e===Ri)return 5123;if(e===ki)return 5124;if(e===Pi)return 5125;if(e===Li)return 5126;if(e===Oi)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Fi)return 6406;if(e===zi)return 6407;if(e===Bi)return 6408;if(e===Ui)return 6409;if(e===Gi)return 6410;if(e===Hi)return 6402;if(e===Wi)return 34041;if(e===$i)return 6403;if(e===qi)return 36244;if(e===Xi)return 33319;if(e===Yi)return 33320;if(e===Ki)return 36248;if(e===Ji)return 36249;if(e===Qi||e===Zi||e===eo||e===to){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Qi)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Zi)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===eo)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===to)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===no||e===ro||e===io||e===oo){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===no)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ro)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===io)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===oo)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===ao)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===so||e===lo)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===so)return n.COMPRESSED_RGB8_ETC2;if(e===lo)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===co||e===uo||e===ho||e===po||e===fo||e===mo||e===go||e===vo||e===bo||e===yo||e===xo||e===wo||e===_o||e===So||e===To||e===Eo||e===Co||e===Ao||e===Ro||e===ko||e===Po||e===Lo||e===Oo||e===No||e===Io||e===Do||e===jo||e===Fo?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===Mo?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===ji?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class Md extends Rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.cameras=e}}Md.prototype.isArrayCamera=!0;class Td extends ml{constructor(){super(),this.type="Group"}}Td.prototype.isGroup=!0;const Ed={type:"move"};class Cd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Td,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Td,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ps,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ps),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Td,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ps,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ps),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ed))),l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const e=new Td;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[o.jointName]=e,l.add(e)}const r=l.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}}class Ad extends as{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:Hi)!==Hi&&c!==Wi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Hi&&(n=Ri),void 0===n&&c===Wi&&(n=ji),super(null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:gi,this.minFilter=void 0!==s?s:gi,this.flipY=!1,this.generateMipmaps=!1}}Ad.prototype.isDepthTexture=!0;class Rd extends ja{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor";const s=e.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,c=null,u=null,h=null,d=!1,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],b=new Map,y=new Rc;y.layers.enable(1),y.viewport=new ls;const x=new Rc;x.layers.enable(2),x.viewport=new ls;const w=[y,x],_=new Md;_.layers.enable(1),_.layers.enable(2);let S=null,M=null;function T(e){const t=b.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function E(){b.forEach((function(e,t){e.disconnect(t)})),b.clear(),S=null,M=null,e.setRenderTarget(m),h=null,u=null,c=null,r=null,g=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(e){const t=r.inputSources;for(let n=0;n<v.length;n++)b.set(t[n],v[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=b.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),b.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=b.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Cd,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Cd,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Cd,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",E),r.addEventListener("inputsourceschange",C),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const e={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,e),r.updateRenderState({baseLayer:h}),g=new cs(h.framebufferWidth,h.framebufferHeight)}else{d=f.antialias;let e=null,n=null,o=null;f.depth&&(o=f.stencil?35056:33189,e=f.stencil?Wi:Hi,n=f.stencil?ji:Ri);const a={colorFormat:f.alpha||d?32856:32849,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(a),r.updateRenderState({layers:[u]}),g=d?new hs(u.textureWidth,u.textureHeight,{format:Bi,type:Ei,depthTexture:new Ad(u.textureWidth,u.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,e),stencilBuffer:f.stencil,ignoreDepth:u.ignoreDepthValues,useRenderToTexture:s}):new cs(u.textureWidth,u.textureHeight,{format:f.alpha?Bi:zi,type:Ei,depthTexture:new Ad(u.textureWidth,u.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,e),stencilBuffer:f.stencil,ignoreDepth:u.ignoreDepthValues})}this.setFoveation(0),o=await r.requestReferenceSpace(a),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const A=new ps,R=new ps;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=x.near=y.near=e.near,_.far=x.far=y.far=e.far,S===_.near&&M===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),S=_.near,M=_.far);const t=e.parent,n=_.cameras;k(_,t);for(let r=0;r<n.length;r++)k(n[r],t);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),e.position.copy(_.position),e.quaternion.copy(_.quaternion),e.scale.copy(_.scale),e.matrix.copy(_.matrix),e.matrixWorld.copy(_.matrixWorld);const i=e.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){A.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=A.distanceTo(R),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,v=s+f,b=d-m,y=p+(r-m),x=l*s/v*g,w=c*s/v*g;e.projectionMatrix.makePerspective(b,y,x,w,g,v)}(_,y,x):_.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let P=null;const L=new Uc;L.setAnimationLoop((function(t,n){if(l=n.getViewerPose(o),p=n,null!==l){const t=l.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==h)o=h.getViewport(i);else{const t=c.getViewSubImage(u,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}const a=w[r];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&_.matrix.copy(a.matrix),!0===n&&_.cameras.push(a)}}const i=r.inputSources;for(let e=0;e<v.length;e++){const t=v[e],r=i[e];t.update(r,n,o)}P&&P(t,n),p=null})),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}}function kd(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;let i,o;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===vr&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===vr&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===vr&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===vr&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===vr&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===vr&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===vr&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===vr&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===vr&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===vr&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===vr&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=void 0!==e.canvas?e.canvas:function(){const e=ts("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Zo,this.physicallyCorrectLights=!1,this.toneMapping=ei,this.toneMappingExposure=1;const m=this;let g=!1,v=0,b=0,y=null,x=-1,w=null;const _=new ls,S=new ls;let M=null,T=t.width,E=t.height,C=1,A=null,R=null;const k=new ls(0,0,T,E),P=new ls(0,0,T,E);let L=!1;const O=[],N=new Bc;let I=!1,D=!1,j=null;const F=new Hs,z=new ps,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===y?C:1}let G,V,H,W,$,q,X,Y,K,J,Q,Z,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he=n;function de(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(or)),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=de(t,e),null===he)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}function pe(){G=new Su(he),V=new Kc(he,G,e),G.init(V),ce=new Sd(he,G,V),H=new wd(he,G,V),O[0]=1029,W=new Eu(he),$=new od,q=new _d(he,G,H,$,V,ce,W),X=new Qc(m),Y=new _u(m),K=new Gc(he,V),ue=new Xc(he,G,K,V),J=new Mu(he,K,W,ue),Q=new Lu(he,J,K,W),ae=new Pu(he,V,q),re=new Jc($),Z=new id(m,X,Y,G,V,ue,re),ee=new kd($),te=new cd($),ne=new md(G,V),oe=new qc(m,X,H,Q,s),ie=new xd(m,Q,V),se=new Yc(he,G,W,V),le=new Tu(he,G,W,V),W.programs=Z.programs,m.capabilities=V,m.extensions=G,m.properties=$,m.renderLists=te,m.shadowMap=ie,m.state=H,m.info=W}pe();const fe=new Rd(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;pe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){(function(e){const t=$.get(e).programs;void 0!==t&&t.forEach((function(e){Z.releaseProgram(e)}))})(e),$.remove(e)}(t)}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(T,E,!1))},this.getSize=function(e){return e.set(T,E)},this.setSize=function(e,n,r){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,E=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*C,E*C).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,E=n,C=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),H.viewport(_.copy(k).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),H.scissor(S.copy(P).multiplyScalar(C).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){H.setScissorTest(L=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),te.dispose(),ne.dispose(),$.dispose(),X.dispose(),Y.dispose(),Q.dispose(),ue.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",ye),fe.removeEventListener("sessionend",xe),j&&(j.dispose(),j=null),we.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=B);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=B);q.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===y?m.outputEncoding:y.texture.encoding,l=(r.isMeshStandardMaterial?Y:X).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,g=$.get(r),v=d.state.lights;if(!0===I&&(!0===D||e!==w)){const t=e===w&&r.id===x;re.setState(r,e,t)}let b=!1;r.version===g.__version?g.needsLights&&g.lightsStateVersion!==v.state.version||g.outputEncoding!==s||i.isInstancedMesh&&!1===g.instancing?b=!0:i.isInstancedMesh||!0!==g.instancing?i.isSkinnedMesh&&!1===g.skinning?b=!0:i.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||r.fog&&g.fog!==o?b=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===re.numPlanes&&g.numIntersection===re.numIntersection?(g.vertexAlphas!==c||g.vertexTangents!==u||g.morphTargets!==h||g.morphNormals!==p||!0===V.isWebGL2&&g.morphTargetsCount!==f)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,g.__version=r.version);let _=g.currentProgram;!0===b&&(_=Ee(r,t,i));let S=!1,M=!1,T=!1;const A=_.getUniforms(),R=g.uniforms;H.useProgram(_.program)&&(S=!0,M=!0,T=!0);r.id!==x&&(x=r.id,M=!0);if(S||w!==e){if(A.setValue(he,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&A.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,M=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=A.map.cameraPosition;void 0!==t&&t.setValue(he,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&A.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&A.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){A.setOptional(he,i,"bindMatrix"),A.setOptional(he,i,"bindMatrixInverse");const e=i.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),A.setValue(he,"boneTexture",e.boneTexture,q),A.setValue(he,"boneTextureSize",e.boneTextureSize)):A.setOptional(he,e,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ae.update(i,n,r,_);(M||g.receiveShadow!==i.receiveShadow)&&(g.receiveShadow=i.receiveShadow,A.setValue(he,"receiveShadow",i.receiveShadow));M&&(A.setValue(he,"toneMappingExposure",m.toneMappingExposure),g.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(R,T),o&&r.fog&&ee.refreshFogUniforms(R,o),ee.refreshMaterialUniforms(R,r,C,E,j),jh.upload(he,g.uniformsList,R,q));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(jh.upload(he,g.uniformsList,R,q),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&A.setValue(he,"center",i.center);return A.setValue(he,"modelViewMatrix",i.modelViewMatrix),A.setValue(he,"normalMatrix",i.normalMatrix),A.setValue(he,"modelMatrix",i.matrixWorld),_}(e,t,n,r,i);H.setMaterial(r,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=J.getWireframeAttribute(n),h=2),ue.setup(i,r,s,n,l);let p=se;null!==l&&(u=K.get(l),p=le,p.setIndex(u));const f=null!==l?l.count:c.count,g=n.drawRange.start*h,v=n.drawRange.count*h,b=null!==o?o.start*h:0,_=null!==o?o.count*h:1/0,S=Math.max(g,b),M=Math.min(f,g+v,b+_)-1,T=Math.max(0,M-S+1);if(0!==T){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*U()),p.setMode(1)):p.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*U()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(S,T,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(S,T,e)}else p.render(S,T)}},this.compile=function(e,t){d=ne.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Ee(n[r],e,t)}else Ee(n,e,t)})),f.pop(),d=null};let be=null;function ye(){we.stop()}function xe(){we.start()}const we=new Uc;function _e(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=Q.update(e),i=e.material;i.visible&&h.push(e,t,i,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=Q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,z.z,a)}}else i.visible&&h.push(e,t,i,n,z.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)_e(i[o],t,n,r)}function Se(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;d.setupLightsView(n),o.length>0&&function(e,t,n){if(null===j){const e=!0===a&&!0===V.isWebGL2;j=new(e?hs:cs)(1024,1024,{generateMipmaps:!0,type:null!==ce.convert(Oi)?Oi:Ei,minFilter:Mi,magFilter:gi,wrapS:fi,wrapT:fi,useRenderToTexture:G.has("WEBGL_multisampled_render_to_texture")})}const r=m.getRenderTarget();m.setRenderTarget(j),m.clear();const i=m.toneMapping;m.toneMapping=ei,Me(e,t,n),m.toneMapping=i,q.updateMultisampleRenderTarget(j),q.updateRenderTargetMipmap(j),m.setRenderTarget(r)}(i,t,n),r&&H.viewport(_.copy(r)),i.length>0&&Me(i,t,n),o.length>0&&Me(o,t,n),s.length>0&&Me(s,t,n)}function Me(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Te(a,t,n,s,l,c)}}function Te(e,t,n,r,i,o){e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,o),!0===i.transparent&&i.side===br?(i.side=vr,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=gr,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=br):m.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(m,t,n,r,i,o)}function Ee(e,t,n){!0!==t.isScene&&(t=B);const r=$.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=Z.getParameters(e,i.state,o,t,n),l=Z.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",ve),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Ce(e,s),u}else s.uniforms=Z.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=Z.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=re.uniform),Ce(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=u.getUniforms(),f=jh.seqWithValue(p.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function Ce(e,t){const n=$.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}we.setAnimationLoop((function(e){be&&be(e)})),"undefined"!==typeof window&&we.setContext(window),this.setAnimationLoop=function(e){be=e,fe.setAnimationLoop(e),null===e?we.stop():we.start()},fe.addEventListener("sessionstart",ye),fe.addEventListener("sessionend",xe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,y),d=ne.get(e,f.length),d.init(),f.push(d),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(F),D=this.localClippingEnabled,I=re.init(this.clippingPlanes,D,t),h=te.get(e,p.length),h.init(),p.push(h),_e(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,R),!0===I&&re.beginShadows();const n=d.state.shadowsArray;if(ie.render(n,e,t),!0===I&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Se(h,e,r,r.viewport)}}else Se(h,e,t);null!==y&&(q.updateMultisampleRenderTarget(y),q.updateRenderTargetMipmap(y)),!0===e.isScene&&e.onAfterRender(m,e,t),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),ue.resetDefaultState(),x=-1,w=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(e,t,n){$.get(e.texture).__webglTexture=t,$.get(e.depthTexture).__webglTexture=n;const r=$.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){const n=$.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y=e,v=t,b=n;let r=!0;if(e){const t=$.get(e);void 0!==t.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?q.setupRenderTarget(e):t.__hasExternalTextures&&q.rebindTextures(e,$.get(e.texture).__webglTexture,$.get(e.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const r=$.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],o=!0):i=e.useRenderbuffer?$.get(e).__webglMultisampledFramebuffer:r,_.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else _.copy(k).multiplyScalar(C).floor(),S.copy(P).multiplyScalar(C).floor(),M=L;if(H.bindFramebuffer(36160,i)&&V.drawBuffers&&r){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(O.length!==n.length||36064!==O[0]){for(let e=0,t=n.length;e<t;e++)O[e]=36064+e;O.length=n.length,t=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,t=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,t=!0);t&&(V.isWebGL2?he.drawBuffers(O):G.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(H.viewport(_),H.scissor(S),H.setScissorTest(M),o){const r=$.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){const r=$.get(e.texture),i=t||0;he.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==Bi&&ce.convert(s)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Oi&&(G.has("EXT_color_buffer_half_float")||V.isWebGL2&&G.has("EXT_color_buffer_float"));if(l!==Ei&&ce.convert(l)!==he.getParameter(35738)&&(l!==Li||!(V.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===he.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==y?$.get(y).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=ce.convert(t.format);V.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),q.setTexture2D(t,0),he.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.image.width,o=t.image.height,a=ce.convert(n.format),s=ce.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);let u;if(r.isDataTexture3D)q.setTexture3D(r,0),u=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),u=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),p=he.getParameter(3316),f=he.getParameter(3315),g=he.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,v.width),he.pixelStorei(32878,v.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?he.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,v.data)):he.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,p),he.pixelStorei(3315,f),he.pixelStorei(32877,g),0===i&&r.generateMipmaps&&he.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,b=0,y=null,H.reset(),ue.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Pd.prototype.isWebGLRenderer=!0;class Ld extends Pd{}Ld.prototype.isWebGL1Renderer=!0;class Od{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.name="",this.color=new Il(e),this.density=t}clone(){return new Od(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Od.prototype.isFogExp2=!0;class Nd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.name="",this.color=new Il(e),this.near=t,this.far=n}clone(){return new Nd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Nd.prototype.isFog=!0;class Id extends ml{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Id.prototype.isScene=!0;class Dd{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Ea,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ga()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ga()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ga()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Dd.prototype.isInterleavedBuffer=!0;const jd=new ps;class Fd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)jd.x=this.getX(t),jd.y=this.getY(t),jd.z=this.getZ(t),jd.applyMatrix4(e),this.setXYZ(t,jd.x,jd.y,jd.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)jd.x=this.getX(t),jd.y=this.getY(t),jd.z=this.getZ(t),jd.applyNormalMatrix(e),this.setXYZ(t,jd.x,jd.y,jd.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)jd.x=this.getX(t),jd.y=this.getY(t),jd.z=this.getZ(t),jd.transformDirection(e),this.setXYZ(t,jd.x,jd.y,jd.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new zl(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Fd.prototype.isInterleavedBufferAttribute=!0;class zd extends Al{constructor(e){super(),this.type="SpriteMaterial",this.color=new Il(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Bd;zd.prototype.isSpriteMaterial=!0;const Ud=new ps,Gd=new ps,Vd=new ps,Hd=new Ka,Wd=new Ka,$d=new Hs,qd=new ps,Xd=new ps,Yd=new ps,Kd=new Ka,Jd=new Ka,Qd=new Ka;class Zd extends ml{constructor(e){if(super(),this.type="Sprite",void 0===Bd){Bd=new rc;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Dd(e,5);Bd.setIndex([0,1,2,0,2,3]),Bd.setAttribute("position",new Fd(t,3,0,!1)),Bd.setAttribute("uv",new Fd(t,2,3,!1))}this.geometry=Bd,this.material=void 0!==e?e:new zd,this.center=new Ka(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gd.setFromMatrixScale(this.matrixWorld),$d.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Gd.multiplyScalar(-Vd.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;ep(qd.set(-.5,-.5,0),Vd,o,Gd,r,i),ep(Xd.set(.5,-.5,0),Vd,o,Gd,r,i),ep(Yd.set(.5,.5,0),Vd,o,Gd,r,i),Kd.set(0,0),Jd.set(1,0),Qd.set(1,1);let a=e.ray.intersectTriangle(qd,Xd,Yd,!1,Ud);if(null===a&&(ep(Xd.set(-.5,.5,0),Vd,o,Gd,r,i),Jd.set(0,1),a=e.ray.intersectTriangle(qd,Yd,Xd,!1,Ud),null===a))return;const s=e.ray.origin.distanceTo(Ud);s<e.near||s>e.far||t.push({distance:s,point:Ud.clone(),uv:El.getUV(Ud,qd,Xd,Yd,Kd,Jd,Qd,new Ka),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ep(e,t,n,r,i,o){Hd.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Wd.x=o*Hd.x-i*Hd.y,Wd.y=i*Hd.x+o*Hd.y):Wd.copy(Hd),e.copy(t),e.x+=Wd.x,e.y+=Wd.y,e.applyMatrix4($d)}Zd.prototype.isSprite=!0;const tp=new ps,np=new ps;class rp extends ml{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){tp.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(tp);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){tp.setFromMatrixPosition(e.matrixWorld),np.setFromMatrixPosition(this.matrixWorld);const n=tp.distanceTo(np)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance})}return t}}const ip=new ps,op=new ls,ap=new ls,sp=new ps,lp=new Hs;class cp extends wc{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Hs,this.bindMatrixInverse=new Hs}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ls,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;op.fromBufferAttribute(r.attributes.skinIndex,e),ap.fromBufferAttribute(r.attributes.skinWeight,e),ip.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=ap.getComponent(i);if(0!==e){const r=op.getComponent(i);lp.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(sp.copy(ip).applyMatrix4(lp),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}cp.prototype.isSkinnedMesh=!0;class up extends ml{constructor(){super(),this.type="Bone"}}up.prototype.isBone=!0;class hp extends as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:gi,i=arguments.length>9&&void 0!==arguments[9]?arguments[9]:gi;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,r,i,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.image={data:e,width:t,height:n},this.magFilter=r,this.minFilter=i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}hp.prototype.isDataTexture=!0;const dp=new Hs,pp=new Hs;class fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Ga(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Hs)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Hs;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const r=e[i]?e[i].matrixWorld:pp;dp.multiplyMatrices(r,t[i]),dp.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new fp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=qa(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new hp(t,e,e,Bi,Li);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new up),this.bones.push(i),this.boneInverses.push((new Hs).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class mp extends zl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}mp.prototype.isInstancedBufferAttribute=!0;const gp=new Hs,vp=new Hs,bp=[],yp=new wc;class xp extends wc{constructor(e,t,n){super(e,t),this.instanceMatrix=new mp(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(yp.geometry=this.geometry,yp.material=this.material,void 0!==yp.material)for(let i=0;i<r;i++){this.getMatrixAt(i,gp),vp.multiplyMatrices(n,gp),yp.matrixWorld=vp,yp.raycast(e,bp);for(let e=0,n=bp.length;e<n;e++){const n=bp[e];n.instanceId=i,n.object=this,t.push(n)}bp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new mp(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}xp.prototype.isInstancedMesh=!0;class wp extends Al{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Il(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}wp.prototype.isLineBasicMaterial=!0;const _p=new ps,Sp=new ps,Mp=new Hs,Tp=new Vs,Ep=new Is;class Cp extends ml{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wp;super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)_p.fromBufferAttribute(t,e-1),Sp.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=_p.distanceTo(Sp);e.setAttribute("lineDistance",new Xl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ep.copy(n.boundingSphere),Ep.applyMatrix4(r),Ep.radius+=i,!1===e.ray.intersectsSphere(Ep))return;Mp.copy(r).invert(),Tp.copy(e.ray).applyMatrix4(Mp);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new ps,c=new ps,u=new ps,h=new ps,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=d){const o=r.getX(n),a=r.getX(n+1);l.fromBufferAttribute(i,o),c.fromBufferAttribute(i,a);if(Tp.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=d){l.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(Tp.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Cp.prototype.isLine=!0;const Ap=new ps,Rp=new ps;class kp extends Cp{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Ap.fromBufferAttribute(t,e),Rp.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Ap.distanceTo(Rp);e.setAttribute("lineDistance",new Xl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}kp.prototype.isLineSegments=!0;class Pp extends Cp{constructor(e,t){super(e,t),this.type="LineLoop"}}Pp.prototype.isLineLoop=!0;class Lp extends Al{constructor(e){super(),this.type="PointsMaterial",this.color=new Il(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Lp.prototype.isPointsMaterial=!0;const Op=new Hs,Np=new Vs,Ip=new Is,Dp=new ps;class jp extends ml{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Lp;super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ip.copy(n.boundingSphere),Ip.applyMatrix4(r),Ip.radius+=i,!1===e.ray.intersectsSphere(Ip))return;Op.copy(r).invert(),Np.copy(e.ray).applyMatrix4(Op);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),l=Math.min(i.count,o.start+o.count);n<l;n++){const o=i.getX(n);Dp.fromBufferAttribute(a,o),Fp(Dp,o,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)Dp.fromBufferAttribute(a,n),Fp(Dp,n,s,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Fp(e,t,n,r,i,o,a){const s=Np.distanceSqToPoint(e);if(s<n){const n=new ps;Np.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}jp.prototype.isPoints=!0;class zp extends as{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.format=void 0!==a?a:zi,this.minFilter=void 0!==o?o:wi,this.magFilter=void 0!==i?i:wi,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}zp.prototype.isVideoTexture=!0;class Bp extends as{constructor(e,t,n,r,i,o,a,s,l,c,u,h){super(null,o,a,s,l,c,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Bp.prototype.isCompressedTexture=!0;class Up extends as{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}}Up.prototype.isCanvasTexture=!0;class Gp extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new ps,c=new Ka;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new Xl(o,3)),this.setAttribute("normal",new Xl(a,3)),this.setAttribute("uv",new Xl(s,2))}static fromJSON(e){return new Gp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vp extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,o=new Ka,f=new ps;let v=0;const b=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);f.x=b*i,f.y=m*y,f.z=b*n,u.push(f.x,f.y,f.z),h.push(0,y,0),o.x=.5*n+.5,o.y=.5*i*y+.5,d.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new ps,v=new ps;let b=0;const y=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,b=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),f=Math.cos(i);v.x=b*l,v.y=-g*n+m,v.z=b*f,u.push(v.x,v.y,v.z),o.set(l,y,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],o=f[t][e+1];c.push(n,r,o),c.push(r,i,o),b+=6}l.addGroup(g,b,0),g+=b}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Xl(u,3)),this.setAttribute("normal",new Xl(h,3)),this.setAttribute("uv",new Xl(d,2))}static fromJSON(e){return new Vp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hp extends Vp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Hp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wp extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){const t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new ps,r=new ps,i=new ps;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new ps;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new ps;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new ps,t=new ps,n=new ps,r=new ps,a=new Ka,s=new Ka,l=new Ka;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(a,d+0,e,p),c(s,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Xl(i,3)),this.setAttribute("normal",new Xl(i.slice(),3)),this.setAttribute("uv",new Xl(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Wp(e.vertices,e.indices,e.radius,e.details)}}class $p extends Wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $p(e.radius,e.detail)}}const qp=new ps,Xp=new ps,Yp=new ps,Kp=new El;class Jp extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Ba*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=Kp;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),Kp.getNormal(Yp),u[0]="".concat(Math.round(t.x*r),",").concat(Math.round(t.y*r),",").concat(Math.round(t.z*r)),u[1]="".concat(Math.round(n.x*r),",").concat(Math.round(n.y*r),",").concat(Math.round(n.z*r)),u[2]="".concat(Math.round(s.x*r),",").concat(Math.round(s.y*r),",").concat(Math.round(s.z*r)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=Kp[c[e]],a=Kp[c[t]],s="".concat(n,"_").concat(r),p="".concat(r,"_").concat(n);p in h&&h[p]?(Yp.dot(h[p].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[p]=null):s in h||(h[s]={index0:l[e],index1:l[t],normal:Yp.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];qp.fromBufferAttribute(a,t),Xp.fromBufferAttribute(a,n),d.push(qp.x,qp.y,qp.z),d.push(Xp.x,Xp.y,Xp.z)}this.setAttribute("position",new Xl(d,3))}}}class Qp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new Ka:new ps);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ps,r=[],i=[],o=[],a=new ps,s=new Hs;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new ps)}i[0]=new ps,o[0]=new ps;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Va(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,e))}o[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(Va(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Zp extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new Ka,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Zp.prototype.isEllipseCurve=!0;class ef extends Zp{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function tf(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}ef.prototype.isArcCurve=!0;const nf=new ps,rf=new tf,of=new tf,af=new tf;class sf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let o,a,s=Math.floor(i),l=i-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===l&&s===r-1&&(s=r-2,l=1),this.closed||s>0?o=n[(s-1)%r]:(nf.subVectors(n[0],n[1]).add(n[0]),o=nf);const c=n[s%r],u=n[(s+1)%r];if(this.closed||s+2<r?a=n[(s+2)%r]:(nf.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=nf),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),rf.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,t,n,r),of.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,t,n,r),af.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(rf.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),of.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),af.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return t.set(rf.calc(l),of.calc(l),af.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ps).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function lf(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function cf(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function uf(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}sf.prototype.isCatmullRomCurve3=!0;class hf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ka,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ka,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ka;super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(uf(e,n.x,r.x,i.x,o.x),uf(e,n.y,r.y,i.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}hf.prototype.isCubicBezierCurve=!0;class df extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ps,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ps;super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(uf(e,n.x,r.x,i.x,o.x),uf(e,n.y,r.y,i.y,o.y),uf(e,n.z,r.z,i.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}df.prototype.isCubicBezierCurve3=!0;class pf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ka,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka;super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Ka;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}pf.prototype.isLineCurve=!0;class ff extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps;super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ka,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ka;super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka,n=this.v0,r=this.v1,i=this.v2;return t.set(cf(e,n.x,r.x,i.x),cf(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}mf.prototype.isQuadraticBezierCurve=!0;class gf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ps;super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps,n=this.v0,r=this.v1,i=this.v2;return t.set(cf(e,n.x,r.x,i.x),cf(e,n.y,r.y,i.y),cf(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}gf.prototype.isQuadraticBezierCurve3=!0;class vf extends Qp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka,n=this.points,r=(n.length-1)*e,i=Math.floor(r),o=r-i,a=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(lf(o,a.x,s.x,l.x,c.x),lf(o,a.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ka).fromArray(n))}return this}}vf.prototype.isSplineCurve=!0;var bf=Object.freeze({__proto__:null,ArcCurve:ef,CatmullRomCurve3:sf,CubicBezierCurve:hf,CubicBezierCurve3:df,EllipseCurve:Zp,LineCurve:pf,LineCurve3:ff,QuadraticBezierCurve:mf,QuadraticBezierCurve3:gf,SplineCurve:vf});class yf extends Qp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new pf(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new bf[n.type]).fromJSON(n))}return this}}class xf extends yf{constructor(e){super(),this.type="Path",this.currentPoint=new Ka,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new pf(this.currentPoint.clone(),new Ka(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new mf(this.currentPoint.clone(),new Ka(e,t),new Ka(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new hf(this.currentPoint.clone(),new Ka(e,t),new Ka(n,r),new Ka(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new vf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const l=new Zp(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wf extends xf{constructor(e){super(e),this.uuid=Ga(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new xf).fromJSON(n))}return this}}const _f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,i=r?t[0]*n:e.length;let o=Sf(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,p;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=Sf(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Nf(c));for(i.sort(kf),o=0;o<i.length;o++)Pf(i[o],n),n=Mf(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-s,u-l),p=0!==p?1/p:0}return Tf(o,a,n,s,l,p),a};function Sf(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Hf(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Hf(o,e[o],e[o+1],a);return a&&Ff(a,a.next)&&(Wf(a),a=a.next),a}function Mf(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Ff(r,r.next)&&0!==jf(r.prev,r,r.next))r=r.next;else{if(Wf(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Tf(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Of(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Cf(e,r,i,o):Ef(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Wf(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Tf(e=Af(Mf(e),t,n),t,n,r,i,o,2):2===a&&Rf(e,t,n,r,i,o):Tf(Mf(e),t,n,r,i,o,1);break}}function Ef(e){const t=e.prev,n=e,r=e.next;if(jf(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(If(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&jf(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Cf(e,t,n,r){const i=e.prev,o=e,a=e.next;if(jf(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Of(s,l,t,n,r),d=Of(c,u,t,n,r);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&If(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&jf(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&If(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&jf(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&If(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&jf(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&If(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&jf(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Af(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Ff(i,o)&&zf(i,r,r.next,o)&&Gf(i,o)&&Gf(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Wf(r),Wf(r.next),r=e=o),r=r.next}while(r!==e);return Mf(r)}function Rf(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Df(a,e)){let s=Vf(a,e);return a=Mf(a,a.next),s=Mf(s,s.next),Tf(a,t,n,r,i,o),void Tf(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function kf(e,t){return e.x-t.x}function Pf(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=l&&r!==n.x&&If(i<c?r:a,i,l,c,i<c?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),Gf(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&Lf(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t),t){const n=Vf(t,e);Mf(t,t.next),Mf(n,n.next)}}function Lf(e,t){return jf(e.prev,e,t.prev)<0&&jf(t.next,e,e.next)<0}function Of(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Nf(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function If(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Df(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zf(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Gf(e,t)&&Gf(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(jf(e.prev,e,t.prev)||jf(e,t.prev,t))||Ff(e,t)&&jf(e.prev,e,e.next)>0&&jf(t.prev,t,t.next)>0)}function jf(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ff(e,t){return e.x===t.x&&e.y===t.y}function zf(e,t,n,r){const i=Uf(jf(e,t,n)),o=Uf(jf(e,t,r)),a=Uf(jf(n,r,e)),s=Uf(jf(n,r,t));return i!==o&&a!==s||(!(0!==i||!Bf(e,n,t))||(!(0!==o||!Bf(e,r,t))||(!(0!==a||!Bf(n,e,r))||!(0!==s||!Bf(n,t,r)))))}function Bf(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uf(e){return e>0?1:e<0?-1:0}function Gf(e,t){return jf(e.prev,e,e.next)<0?jf(e,t,e.next)>=0&&jf(e,e.prev,t)>=0:jf(e,t,e.prev)<0||jf(e,e.next,t)<0}function Vf(e,t){const n=new $f(e.i,e.x,e.y),r=new $f(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Hf(e,t,n,r){const i=new $f(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $f(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class qf{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return qf.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Xf(e),Yf(n,e);let o=e.length;t.forEach(Xf);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,Yf(n,t[s]);const a=_f(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function Xf(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yf(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Kf extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wf([new Ka(.5,.5),new Ka(-.5,.5),new Ka(-.5,-.5),new Ka(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Jf;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,b,y,x,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,c=!1,v=f.computeFrenetFrames(s,!1),b=new ps,y=new ps,x=new ps),c||(p=0,u=0,h=0,d=0);const _=e.extractPoints(a);let S=_.shape;const M=_.holes;if(!qf.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];qf.isClockWise(t)&&(M[e]=t.reverse())}}const T=qf.triangulateShape(S,M),E=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const A=S.length,R=T.length;function k(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-s/h,f=t.y+a/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(a*c-s*l);r=p+a*m-e.x,i=f+s*m-e.y;const g=r*r+i*i;if(g<=2)return new Ka(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new Ka(r/o,i/o)}const P=[];for(let t=0,n=E.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[t]=k(E[t],E[r],E[i]);const L=[];let O,N=P.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=k(e[t],e[r],e[i]);L.push(O),N=N.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=E.length;t<i;t++){const e=C(E[t],P[t],r);j(e.x,e.y,-n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];O=L[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);j(i.x,i.y,-n)}}}const I=h+d;for(let t=0;t<A;t++){const e=c?C(S[t],N[t],I):S[t];w?(y.copy(v.normals[0]).multiplyScalar(e.x),b.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(y).add(b),j(x.x,x.y,x.z)):j(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<A;e++){const n=c?C(S[e],N[e],I):S[e];w?(y.copy(v.normals[t]).multiplyScalar(n.x),b.copy(v.binormals[t]).multiplyScalar(n.y),x.copy(g[t]).add(y).add(b),j(x.x,x.y,x.z)):j(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=E.length;t<i;t++){const e=C(E[t],P[t],r);j(e.x,e.y,l+n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];O=L[t];for(let t=0,i=e.length;t<i;t++){const i=C(e[t],O[t],r);w?j(i.x,i.y+g[s-1].y,g[s-1].x+n):j(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=A*e,o=A*(e+1);z(t+r+n,t+i+n,t+i+o,t+r+o)}}}function j(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,i){B(e),B(t),B(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function z(e,t,i,o){B(e),B(t),B(o),B(t),B(i),B(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function B(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function U(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=A*e;for(let n=0;n<R;n++){const e=T[n];F(e[2]+t,e[1]+t,e[0]+t)}e=s+2*p,t=A*e;for(let n=0;n<R;n++){const e=T[n];F(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<R;e++){const t=T[e];F(t[2],t[1],t[0])}for(let e=0;e<R;e++){const t=T[e];F(t[0]+A*s,t[1]+A*s,t[2]+A*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(E,t),t+=E.length;for(let n=0,r=M.length;n<r;n++){const e=M[n];D(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Xl(r,3)),this.setAttribute("uv",new Xl(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new bf[r.type]).fromJSON(r)),new Kf(n,e.options)}}const Jf={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Ka(o,a),new Ka(s,l),new Ka(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new Ka(a,1-l),new Ka(c,1-h),new Ka(d,1-f),new Ka(m,1-v)]:[new Ka(s,1-l),new Ka(u,1-h),new Ka(p,1-f),new Ka(g,1-v)]}};class Qf extends Wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qf(e.radius,e.detail)}}class Zf extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Ka(0,.5),new Ka(.5,0),new Ka(0,-.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Va(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/t,l=new ps,c=new Ka;for(let u=0;u<=t;u++){const i=n+u*s*r,h=Math.sin(i),d=Math.cos(i);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*d,o.push(l.x,l.y,l.z),c.x=u/t,c.y=n/(e.length-1),a.push(c.x,c.y)}for(let u=0;u<t;u++)for(let t=0;t<e.length-1;t++){const n=t+u*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(o,a,s)}if(this.setIndex(i),this.setAttribute("position",new Xl(o,3)),this.setAttribute("uv",new Xl(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new ps,i=new ps,o=new ps,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}static fromJSON(e){return new Zf(e.points,e.segments,e.phiStart,e.phiLength)}}class em extends Wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new em(e.radius,e.detail)}}class tm extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/r,d=new ps,p=new Ka;for(let f=0;f<=r;f++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<r;f++){const e=f*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Xl(s,3)),this.setAttribute("normal",new Xl(l,3)),this.setAttribute("uv",new Xl(c,2))}static fromJSON(e){return new tm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class nm extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wf([new Ka(0,.5),new Ka(-.5,-.5),new Ka(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===qf.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===qf.isClockWise(e)&&(u[t]=e.reverse())}const h=qf.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Xl(r,3)),this.setAttribute("normal",new Xl(i,3)),this.setAttribute("uv",new Xl(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new nm(n,e.curveSegments)}}class rm extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new ps,h=new ps,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let b=0;0==g&&0==o?b=.5/t:g==n&&s==Math.PI&&(b=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+b,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&d.push(t,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new Xl(p,3)),this.setAttribute("normal",new Xl(f,3)),this.setAttribute("uv",new Xl(m,2))}static fromJSON(e){return new rm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class im extends Wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new im(e.radius,e.detail)}}class om extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],c=new ps,u=new ps,h=new ps;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const p=o/r*i,f=d/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,a=(r+1)*d+e;o.push(t,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new Xl(a,3)),this.setAttribute("normal",new Xl(s,3)),this.setAttribute("uv",new Xl(l,2))}static fromJSON(e){return new om(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class am extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],c=[],u=new ps,h=new ps,d=new ps,p=new ps,f=new ps,m=new ps,g=new ps;for(let b=0;b<=n;++b){const a=b/n*i*Math.PI*2;v(a,i,o,e,d),v(a+.01,i,o,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);u.x=d.x+(o*g.x+a*f.x),u.y=d.y+(o*g.y+a*f.y),u.z=d.z+(o*g.z+a*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(b/n),c.push(e/r)}}for(let b=1;b<=n;b++)for(let e=1;e<=r;e++){const t=(r+1)*(b-1)+(e-1),n=(r+1)*b+(e-1),i=(r+1)*b+e,o=(r+1)*(b-1)+e;a.push(t,n,o),a.push(n,i,o)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Xl(s,3)),this.setAttribute("normal",new Xl(l,3)),this.setAttribute("uv",new Xl(c,2))}static fromJSON(e){return new am(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class sm extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gf(new ps(-1,-1,0),new ps(-1,1,0),new ps(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ps,s=new ps,l=new Ka;let c=new ps;const u=[],h=[],d=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*d.x,s.y=o*l.y+i*d.y,s.z=o*l.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new Xl(u,3)),this.setAttribute("normal",new Xl(h,3)),this.setAttribute("uv",new Xl(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new sm((new bf[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class lm extends rc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new ps,i=new ps;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=a.getX(e+l),c=a.getX(e+(l+1)%3);r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,c),!0===cm(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,l),!0===cm(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Xl(t,3))}}}function cm(e,t,n){const r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var um=Object.freeze({__proto__:null,BoxGeometry:Sc,BoxBufferGeometry:Sc,CircleGeometry:Gp,CircleBufferGeometry:Gp,ConeGeometry:Hp,ConeBufferGeometry:Hp,CylinderGeometry:Vp,CylinderBufferGeometry:Vp,DodecahedronGeometry:$p,DodecahedronBufferGeometry:$p,EdgesGeometry:Jp,ExtrudeGeometry:Kf,ExtrudeBufferGeometry:Kf,IcosahedronGeometry:Qf,IcosahedronBufferGeometry:Qf,LatheGeometry:Zf,LatheBufferGeometry:Zf,OctahedronGeometry:em,OctahedronBufferGeometry:em,PlaneGeometry:Vc,PlaneBufferGeometry:Vc,PolyhedronGeometry:Wp,PolyhedronBufferGeometry:Wp,RingGeometry:tm,RingBufferGeometry:tm,ShapeGeometry:nm,ShapeBufferGeometry:nm,SphereGeometry:rm,SphereBufferGeometry:rm,TetrahedronGeometry:im,TetrahedronBufferGeometry:im,TorusGeometry:om,TorusBufferGeometry:om,TorusKnotGeometry:am,TorusKnotBufferGeometry:am,TubeGeometry:sm,TubeBufferGeometry:sm,WireframeGeometry:lm});class hm extends Al{constructor(e){super(),this.type="ShadowMaterial",this.color=new Il(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}hm.prototype.isShadowMaterial=!0;class dm extends Al{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Il(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Il(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new Ka(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}dm.prototype.isMeshStandardMaterial=!0;class pm extends dm{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ka(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Va(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Il(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Il(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Il(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}pm.prototype.isMeshPhysicalMaterial=!0;class fm extends Al{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Il(16777215),this.specular=new Il(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Il(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new Ka(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}fm.prototype.isMeshPhongMaterial=!0;class mm extends Al{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Il(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Il(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new Ka(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}mm.prototype.isMeshToonMaterial=!0;class gm extends Al{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new Ka(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}gm.prototype.isMeshNormalMaterial=!0;class vm extends Al{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Il(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Il(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}vm.prototype.isMeshLambertMaterial=!0;class bm extends Al{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Il(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new Ka(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}bm.prototype.isMeshMatcapMaterial=!0;class ym extends wp{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}ym.prototype.isLineDashedMaterial=!0;var xm=Object.freeze({__proto__:null,ShadowMaterial:hm,SpriteMaterial:zd,RawShaderMaterial:eu,ShaderMaterial:Cc,PointsMaterial:Lp,MeshPhysicalMaterial:pm,MeshStandardMaterial:dm,MeshPhongMaterial:fm,MeshToonMaterial:mm,MeshNormalMaterial:gm,MeshLambertMaterial:vm,MeshDepthMaterial:gd,MeshDistanceMaterial:vd,MeshBasicMaterial:Dl,MeshMatcapMaterial:bm,LineDashedMaterial:ym,LineBasicMaterial:wp,Material:Al});const wm={arraySlice:function(e,t,n){return wm.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),s=[],c=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==s.length&&(e.times=wm.convertArray(s,e.times.constructor),e.values=wm.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=s,n=l-s;d=wm.arraySlice(t.values,e,n)}else if(o>=t.times[h]){const e=h*l+s,n=e+l-s;d=wm.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=l-s;e.evaluate(o),d=wm.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){(new ds).fromArray(d).normalize().conjugate().toArray(d)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===r)ds.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=Yo,e}};class _m{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}_m.prototype.beforeStart_=_m.prototype.copySampleValue_,_m.prototype.afterEnd_=_m.prototype.copySampleValue_;class Sm extends _m{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Wo,endingEnd:Wo}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case $o:i=e,a=2*t-n;break;case qo:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case $o:o=e,s=2*n-t;break;case qo:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,b=(-1-d)*m+(1.5+d)*f+.5*p,y=d*m-d*f;for(let x=0;x!==a;++x)i[x]=g*o[c+x]+v*o[l+x]+b*o[s+x]+y*o[u+x];return i}}class Mm extends _m{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==a;++h)i[h]=o[l+h]*u+o[s+h]*c;return i}}class Tm extends _m{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Em{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wm.convertArray(t,this.TimeBufferType),this.values=wm.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:wm.convertArray(e.times,Array),values:wm.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Tm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Mm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Sm(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Go:t=this.InterpolantFactoryMethodDiscrete;break;case Vo:t=this.InterpolantFactoryMethodLinear;break;case Ho:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Go;case this.InterpolantFactoryMethodLinear:return Vo;case this.InterpolantFactoryMethodSmooth:return Ho}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=wm.arraySlice(n,i,o),this.values=wm.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&wm.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=wm.arraySlice(this.times),t=wm.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Ho,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=wm.arraySlice(e,0,o),this.values=wm.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=wm.arraySlice(this.times,0),t=wm.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Em.prototype.TimeBufferType=Float32Array,Em.prototype.ValueBufferType=Float32Array,Em.prototype.DefaultInterpolation=Vo;class Cm extends Em{}Cm.prototype.ValueTypeName="bool",Cm.prototype.ValueBufferType=Array,Cm.prototype.DefaultInterpolation=Go,Cm.prototype.InterpolantFactoryMethodLinear=void 0,Cm.prototype.InterpolantFactoryMethodSmooth=void 0;class Am extends Em{}Am.prototype.ValueTypeName="color";class Rm extends Em{}Rm.prototype.ValueTypeName="number";class km extends _m{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)ds.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Pm extends Em{InterpolantFactoryMethodLinear(e){return new km(this.times,this.values,this.getValueSize(),e)}}Pm.prototype.ValueTypeName="quaternion",Pm.prototype.DefaultInterpolation=Vo,Pm.prototype.InterpolantFactoryMethodSmooth=void 0;class Lm extends Em{}Lm.prototype.ValueTypeName="string",Lm.prototype.ValueBufferType=Array,Lm.prototype.DefaultInterpolation=Go,Lm.prototype.InterpolantFactoryMethodLinear=void 0,Lm.prototype.InterpolantFactoryMethodSmooth=void 0;class Om extends Em{}Om.prototype.ValueTypeName="vector";class Nm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xo;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ga(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Im(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(Em.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const l=wm.getKeyframeOrder(e);e=wm.sortedArray(e,1,l),s=wm.sortedArray(s,1,l),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new Rm(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];wm.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new Rm(".morphTargetInfluence["+i+"]",t,o))}s=t.length*(o||1)}else{const i=".bones["+t[c].name+"]";n(Om,i+".position",e,"pos",r),n(Pm,i+".quaternion",e,"rot",r),n(Om,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Im(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rm;case"vector":case"vector2":case"vector3":case"vector4":return Om;case"color":return Am;case"quaternion":return Pm;case"bool":case"boolean":return Cm;case"string":return Lm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];wm.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Dm={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class jm{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Fm=new jm;class zm{constructor(e){this.manager=void 0!==e?e:Fm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Bm={};class Um extends zm{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Dm.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Bm[e])return void Bm[e].push({onLoad:t,onProgress:n,onError:r});Bm[e]=[],Bm[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then((t=>{if(200===t.status||0===t.status){0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const n=Bm[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;return new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{s+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}))}()}})}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((e=>{const t=new Response(e);switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((e=>(new DOMParser).parseFromString(e,this.mimeType)));case"json":return t.json();default:return t.text()}})).then((t=>{Dm.add(e,t);const n=Bm[e];delete Bm[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}this.manager.itemEnd(e)})).catch((t=>{const n=Bm[e];delete Bm[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e),this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Gm extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Um(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Nm.parse(e[n]);t.push(r)}return t}}class Vm extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new Bp,s=new Um(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=wi),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=wi),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class Hm extends zm{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Dm.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=ts("img");function s(){c(),Dm.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Wm extends zm{constructor(e){super(e)}load(e,t,n,r){const i=new Lc,o=new Hm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}}class $m extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new hp,a=new Um(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:fi,o.wrapT=void 0!==n.wrapT?n.wrapT:fi,o.magFilter=void 0!==n.magFilter?n.magFilter:wi,o.minFilter=void 0!==n.minFilter?n.minFilter:wi,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Mi),1===n.mipmapCount&&(o.minFilter=wi),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class qm extends zm{constructor(e){super(e)}load(e,t,n,r){const i=new as,o=new Hm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Xm extends ml{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.type="Light",this.color=new Il(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Xm.prototype.isLight=!0;class Ym extends Xm{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(ml.DefaultUp),this.updateMatrix(),this.groundColor=new Il(t)}copy(e){return Xm.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Ym.prototype.isHemisphereLight=!0;const Km=new Hs,Jm=new ps,Qm=new ps;class Zm{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ka(512,512),this.map=null,this.mapPass=null,this.matrix=new Hs,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bc,this._frameExtents=new Ka(1,1),this._viewportCount=1,this._viewports=[new ls(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Jm.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jm),Qm.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Qm),t.updateMatrixWorld(),Km.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Km),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class eg extends Zm{constructor(){super(new Rc(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Ua*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}eg.prototype.isSpotLightShadow=!0;class tg extends Xm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(e,t),this.type="SpotLight",this.position.copy(ml.DefaultUp),this.updateMatrix(),this.target=new ml,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new eg}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}tg.prototype.isSpotLight=!0;const ng=new Hs,rg=new ps,ig=new ps;class og extends Zm{constructor(){super(new Rc(90,1,.5,500)),this._frameExtents=new Ka(4,2),this._viewportCount=6,this._viewports=[new ls(2,1,1,1),new ls(0,1,1,1),new ls(3,1,1,1),new ls(1,1,1,1),new ls(3,0,1,1),new ls(1,0,1,1)],this._cubeDirections=[new ps(1,0,0),new ps(-1,0,0),new ps(0,0,1),new ps(0,0,-1),new ps(0,1,0),new ps(0,-1,0)],this._cubeUps=[new ps(0,1,0),new ps(0,1,0),new ps(0,1,0),new ps(0,1,0),new ps(0,0,1),new ps(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),rg.setFromMatrixPosition(e.matrixWorld),n.position.copy(rg),ig.copy(n.position),ig.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ig),n.updateMatrixWorld(),r.makeTranslation(-rg.x,-rg.y,-rg.z),ng.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ng)}}og.prototype.isPointLightShadow=!0;class ag extends Xm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new og}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}ag.prototype.isPointLight=!0;class sg extends Zm{constructor(){super(new Zc(-5,5,5,-5,.5,500))}}sg.prototype.isDirectionalLightShadow=!0;class lg extends Xm{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(ml.DefaultUp),this.updateMatrix(),this.target=new ml,this.shadow=new sg}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}lg.prototype.isDirectionalLight=!0;class cg extends Xm{constructor(e,t){super(e,t),this.type="AmbientLight"}}cg.prototype.isAmbientLight=!0;class ug extends Xm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}ug.prototype.isRectAreaLight=!0;class hg{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ps)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}hg.prototype.isSphericalHarmonics3=!0;class dg extends Xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hg;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}dg.prototype.isLightProbe=!0;class pg extends zm{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new Um(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new xm[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Il).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new Il).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Ka).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new ps).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new ls).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Ja).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new Hs).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Ka).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Ka).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}}class fg{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(tq){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mg extends rc{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}mg.prototype.isInstancedBufferGeometry=!0;class gg extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Um(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],o=new Uint32Array(i).buffer;return n[t]=o,o}(e,i.buffer),a=es(i.type,o),s=new Dd(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new mg:new rc,o=e.data.index;if(void 0!==o){const e=es(o.type,o.array);i.setIndex(new zl(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new Fd(i,t.itemSize,t.offset,t.normalized)}else{const e=es(t.type,t.array);n=new(t.isInstancedBufferAttribute?mp:zl)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),i.setAttribute(u,n)}const s=e.data.morphAttributes;if(s)for(const u in s){const t=s[u],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;if(o.isInterleavedBufferAttribute){const t=r(e.data,o.data);a=new Fd(t,o.itemSize,o.offset,o.normalized)}else{const e=es(o.type,o.array);a=new zl(e,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new ps;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Is(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class vg extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?fg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Um(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?fg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Um(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a,o,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new wf).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,o=e.length;i<o;i++){const t=(new fp).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new gg;for(let i=0,o=e.length;i<o;i++){let o;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(a);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:a.type in um?o=um[a.type].fromJSON(a,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new pg;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Nm.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:es(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new jm(t);i=new Hm(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new hp(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:es(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Hm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){n[r.uuid]=[];for(let e=0,t=o.length;e<t;e++){const t=o[e],a=await i(t);null!==a&&(a instanceof HTMLImageElement?n[r.uuid].push(a):n[r.uuid].push(new hp(a.data,a.width,a.height)))}}else{const e=await i(r.url);null!==e&&(n[r.uuid]=e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image];Array.isArray(s)?(a=new Lc(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new hp(s.data,s.width,s.height):new as(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,bg)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],yg),a.wrapT=n(o.wrap[1],yg)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,xg)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,xg)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(a.userData=o.userData),r[o.uuid]=a}return r}parseObject(e,t,n,r,i){let o,a,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new Id,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Il(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Nd(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Od(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Rc(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Zc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cg(e.color,e.intensity);break;case"DirectionalLight":o=new lg(e.color,e.intensity);break;case"PointLight":o=new ag(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ug(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new tg(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ym(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new dg).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=c(e.material),o=new cp(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=c(e.material),o=new wc(a,s);break;case"InstancedMesh":a=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new xp(a,s,t),o.instanceMatrix=new mp(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new mp(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new rp;break;case"Line":o=new Cp(l(e.geometry),c(e.material));break;case"LineLoop":o=new Pp(l(e.geometry),c(e.material));break;case"LineSegments":o=new kp(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new jp(l(e.geometry),c(e.material));break;case"Sprite":o=new Zd(c(e.material));break;case"Group":o=new Td;break;case"Bone":o=new up;break;default:o=new ml}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const bg={UVMapping:ai,CubeReflectionMapping:si,CubeRefractionMapping:li,EquirectangularReflectionMapping:ci,EquirectangularRefractionMapping:ui,CubeUVReflectionMapping:hi,CubeUVRefractionMapping:di},yg={RepeatWrapping:pi,ClampToEdgeWrapping:fi,MirroredRepeatWrapping:mi},xg={NearestFilter:gi,NearestMipmapNearestFilter:vi,NearestMipmapLinearFilter:yi,LinearFilter:wi,LinearMipmapNearestFilter:_i,LinearMipmapLinearFilter:Mi};class wg extends zm{constructor(e){super(e),"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Dm.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Dm.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let _g;wg.prototype.isImageBitmapLoader=!0;const Sg={getContext:function(){return void 0===_g&&(_g=new(window.AudioContext||window.webkitAudioContext)),_g},setContext:function(e){_g=e}};class Mg extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Um(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);Sg.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}}class Tg extends dg{constructor(e,t){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);const n=(new Il).set(e),r=(new Il).set(t),i=new ps(n.r,n.g,n.b),o=new ps(r.r,r.g,r.b),a=Math.sqrt(Math.PI),s=a*Math.sqrt(.75);this.sh.coefficients[0].copy(i).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(i).sub(o).multiplyScalar(s)}}Tg.prototype.isHemisphereLightProbe=!0;class Eg extends dg{constructor(e){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1);const t=(new Il).set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Eg.prototype.isAmbientLightProbe=!0;const Cg=new Hs,Ag=new Hs,Rg=new Hs;class kg{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rc,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rc,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Rg.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Ba*t.fov*.5)/t.zoom;let o,a;Ag.elements[12]=-n,Cg.elements[12]=n,o=-i*t.aspect+r,a=i*t.aspect+r,Rg.elements[0]=2*t.near/(a-o),Rg.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(Rg),o=-i*t.aspect-r,a=i*t.aspect-r,Rg.elements[0]=2*t.near/(a-o),Rg.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(Rg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ag),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Cg)}}class Pg{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Lg(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Lg();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Lg(){return("undefined"===typeof performance?Date:performance).now()}const Og=new ps,Ng=new ds,Ig=new ps,Dg=new ps;class jg extends ml{constructor(){super(),this.type="AudioListener",this.context=Sg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Pg}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Og,Ng,Ig),Dg.set(0,0,-1).applyQuaternion(Ng),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Og.x,e),t.positionY.linearRampToValueAtTime(Og.y,e),t.positionZ.linearRampToValueAtTime(Og.z,e),t.forwardX.linearRampToValueAtTime(Dg.x,e),t.forwardY.linearRampToValueAtTime(Dg.y,e),t.forwardZ.linearRampToValueAtTime(Dg.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Og.x,Og.y,Og.z),t.setOrientation(Dg.x,Dg.y,Dg.z,n.x,n.y,n.z)}}class Fg extends ml{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const zg=new ps,Bg=new ds,Ug=new ps,Gg=new ps;class Vg extends Fg{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(zg,Bg,Ug),Gg.set(0,0,1).applyQuaternion(Bg);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zg.x,e),t.positionY.linearRampToValueAtTime(zg.y,e),t.positionZ.linearRampToValueAtTime(zg.z,e),t.orientationX.linearRampToValueAtTime(Gg.x,e),t.orientationY.linearRampToValueAtTime(Gg.y,e),t.orientationZ.linearRampToValueAtTime(Gg.z,e)}else t.setPosition(zg.x,zg.y,zg.z),t.setOrientation(Gg.x,Gg.y,Gg.z)}}class Hg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Wg{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ds.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;ds.multiplyQuaternionsFlat(e,o,e,t,e,n),ds.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const $g="\\[\\]\\.:\\/",qg=new RegExp("["+$g+"]","g"),Xg="[^"+$g+"]",Yg="[^"+$g.replace("\\.","")+"]",Kg=/((?:WC+[\/:])*)/.source.replace("WC",Xg),Jg=/(WCOD+)?/.source.replace("WCOD",Yg),Qg=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xg),Zg=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xg),ev=new RegExp("^"+Kg+Jg+Qg+Zg+"$"),tv=["material","materials","bones"];class nv{constructor(e,t,n){this.path=t,this.parsedPath=n||nv.parseTrackName(t),this.node=nv.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new nv.Composite(e,t,n):new nv(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qg,"")}static parseTrackName(e){const t=ev.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==tv.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=nv.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nv.Composite=class{constructor(e,t,n){const r=n||nv.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},nv.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},nv.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},nv.prototype.GetterByBindingType=[nv.prototype._getValue_direct,nv.prototype._getValue_array,nv.prototype._getValue_arrayElement,nv.prototype._getValue_toArray],nv.prototype.SetterByBindingTypeAndVersioning=[[nv.prototype._setValue_direct,nv.prototype._setValue_direct_setNeedsUpdate,nv.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nv.prototype._setValue_array,nv.prototype._setValue_array_setNeedsUpdate,nv.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nv.prototype._setValue_arrayElement,nv.prototype._setValue_arrayElement_setNeedsUpdate,nv.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nv.prototype._setValue_fromArray,nv.prototype._setValue_fromArray_setNeedsUpdate,nv.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rv{constructor(){this.uuid=Ga(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new nv(u,n[e],r[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new nv(u,n[e],r[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new nv(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}rv.prototype.isAnimationObjectGroup=!0;class iv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Wo,endingEnd:Wo};for(let l=0;l!==o;++l){const e=i[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bo,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Yo)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===Uo;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===zo){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=$o,r.endingEnd=$o):(r.endingStart=e?this.zeroSlopeAtStart?$o:Wo:qo,r.endingEnd=t?this.zeroSlopeAtEnd?$o:Wo:qo)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}class ov extends ja{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new Wg(nv.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Mm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"===typeof e?Nm.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Xo),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new iv(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?Nm.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}ov.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class av{constructor(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new av(void 0===this.value.clone?this.value:this.value.clone())}}class sv extends Dd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}sv.prototype.isInstancedInterleavedBuffer=!0;class lv{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}lv.prototype.isGLBufferAttribute=!0;class cv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Vs(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new tl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return hv(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(uv),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)hv(e[r],this,n,t);return n.sort(uv),n}}function uv(e,t){return e.distance-t.distance}function hv(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)hv(r[e],t,n,!0)}}class dv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Va(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class pv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const fv=new Ka;class mv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ka(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka(-1/0,-1/0);this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=fv.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fv.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}mv.prototype.isBox2=!0;const gv=new ps,vv=new ps;class bv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){gv.subVectors(e,this.start),vv.subVectors(this.end,this.start);const n=vv.dot(vv);let r=vv.dot(gv)/n;return t&&(r=Va(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const yv=new ps;class xv extends ml{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new rc,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Xl(r,3));const i=new wp({fog:!1,toneMapped:!1});this.cone=new kp(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),yv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(yv),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const wv=new ps,_v=new Hs,Sv=new Hs;class Mv extends kp{constructor(e){const t=Tv(e),n=new rc,r=[],i=[],o=new Il(0,0,1),a=new Il(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Xl(r,3)),n.setAttribute("color",new Xl(i,3));super(n,new wp({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Sv.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(_v.multiplyMatrices(Sv,e.matrixWorld),wv.setFromMatrixPosition(_v),r.setXYZ(o,wv.x,wv.y,wv.z),_v.multiplyMatrices(Sv,e.parent.matrixWorld),wv.setFromMatrixPosition(_v),r.setXYZ(o+1,wv.x,wv.y,wv.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Tv(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Tv(e.children[n]));return t}class Ev extends wc{constructor(e,t,n){super(new rm(t,4,2),new Dl({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Cv=new ps,Av=new Il,Rv=new Il;class kv extends ml{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new em(t);r.rotateY(.5*Math.PI),this.material=new Dl({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new zl(o,3)),this.add(new wc(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Av.copy(this.light.color),Rv.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Av:Rv;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Cv.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Pv extends kp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Il(n),r=new Il(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let u=0,h=0,d=-a;u<=t;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const e=u===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new rc;c.setAttribute("position",new Xl(s,3)),c.setAttribute("color",new Xl(l,3));super(c,new wp({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Lv extends kp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new Il(i),o=new Il(o);const a=[],s=[];for(let c=0;c<=t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const u=1&c?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<=n;c++){const t=1&c?i:o,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;a.push(i,0,o),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,a.push(i,0,o),s.push(t.r,t.g,t.b)}}const l=new rc;l.setAttribute("position",new Xl(a,3)),l.setAttribute("color",new Xl(s,3));super(l,new wp({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Ov=new ps,Nv=new ps,Iv=new ps;class Dv extends ml{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new rc;r.setAttribute("position",new Xl([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new wp({fog:!1,toneMapped:!1});this.lightPlane=new Cp(r,i),this.add(this.lightPlane),r=new rc,r.setAttribute("position",new Xl([0,0,0,0,0,1],3)),this.targetLine=new Cp(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Ov.setFromMatrixPosition(this.light.matrixWorld),Nv.setFromMatrixPosition(this.light.target.matrixWorld),Iv.subVectors(Nv,Ov),this.lightPlane.lookAt(Nv),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Nv),this.targetLine.scale.z=Iv.length()}}const jv=new ps,Fv=new Ac;class zv extends kp{constructor(e){const t=new rc,n=new wp({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new Il(16755200),s=new Il(16711680),l=new Il(43775),c=new Il(16777215),u=new Il(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new Xl(r,3)),t.setAttribute("color",new Xl(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;Fv.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Bv("c",t,e,Fv,0,0,-1),Bv("t",t,e,Fv,0,0,1),Bv("n1",t,e,Fv,-1,-1,-1),Bv("n2",t,e,Fv,1,-1,-1),Bv("n3",t,e,Fv,-1,1,-1),Bv("n4",t,e,Fv,1,1,-1),Bv("f1",t,e,Fv,-1,-1,1),Bv("f2",t,e,Fv,1,-1,1),Bv("f3",t,e,Fv,-1,1,1),Bv("f4",t,e,Fv,1,1,1),Bv("u1",t,e,Fv,.7,1.1,-1),Bv("u2",t,e,Fv,-.7,1.1,-1),Bv("u3",t,e,Fv,0,2,-1),Bv("cf1",t,e,Fv,-1,0,1),Bv("cf2",t,e,Fv,1,0,1),Bv("cf3",t,e,Fv,0,-1,1),Bv("cf4",t,e,Fv,0,1,1),Bv("cn1",t,e,Fv,-1,0,-1),Bv("cn2",t,e,Fv,1,0,-1),Bv("cn3",t,e,Fv,0,-1,-1),Bv("cn4",t,e,Fv,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Bv(e,t,n,r,i,o,a){jv.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],jv.x,jv.y,jv.z)}}const Uv=new gs;class Gv extends kp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new rc;i.setIndex(new zl(n,1)),i.setAttribute("position",new zl(r,3)),super(i,new wp({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Uv.setFromObject(this.object),Uv.isEmpty())return;const t=Uv.min,n=Uv.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return kp.prototype.copy.call(this,e),this.object=e.object,this}}class Vv extends kp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new rc;r.setIndex(new zl(n,1)),r.setAttribute("position",new Xl([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new wp({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Hv extends Cp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new rc;r.setAttribute("position",new Xl([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new wp({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new rc;i.setAttribute("position",new Xl([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),i.computeBoundingSphere(),this.add(new wc(i,new Dl({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?vr:gr,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Wv=new ps;let $v,qv;class Xv extends ml{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ps(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ps(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===$v&&($v=new rc,$v.setAttribute("position",new Xl([0,0,0,0,1,0],3)),qv=new Vp(0,.5,1,5,1),qv.translate(0,-.5,0)),this.position.copy(t),this.line=new Cp($v,new wp({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wc(qv,new Dl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Wv.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Wv,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Yv extends kp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new rc;n.setAttribute("position",new Xl(t,3)),n.setAttribute("color",new Xl([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new wp({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Il,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kv{constructor(){this.type="ShapePath",this.color=new Il,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new wf;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=qf.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],l=new wf,l.curves=s.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let v=0,b=o.length;v<b;v++)s=o[v],p=s.getPoints(),a=i(p),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new wf,p:p},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let n=0,r=d.length;n<r;n++)h[n]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let v=0,b=d.length;v<b;v++){l=d[v].s,c.push(l),f=m[v];for(let e=0,t=f.length;e<t;e++)l.holes.push(f[e].h)}return c}}const Jv=new Float32Array(1),Qv=new Int32Array(Jv.buffer);class Zv{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),Jv[0]=e;const t=Qv[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}const eb=0,tb=1,nb=0,rb=1,ib=2;function ob(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function ab(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function sb(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new jp(e,t)}function lb(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Zd(e)}function cb(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new jp(e,t)}function ub(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Lp(e)}function hb(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Lp(e)}function db(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Lp(e)}function pb(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ps(e,t,n)}function fb(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new zl(e,t).setUsage(Ca)}function mb(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Bl(e,t)}function gb(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ul(e,t)}function vb(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Gl(e,t)}function bb(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Vl(e,t)}function yb(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Hl(e,t)}function xb(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Wl(e,t)}function wb(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new $l(e,t)}function _b(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Xl(e,t)}function Sb(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Yl(e,t)}function Mb(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Yv(e)}function Tb(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Gv(e,t)}function Eb(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new kp(new Jp(e.geometry),new wp({color:void 0!==t?t:16777215}))}function Cb(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new kp(new lm(e.geometry),new wp({color:void 0!==t?t:16777215}))}function Ab(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Um(e)}function Rb(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new $m(e)}function kb(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Oc(e,n)}function Pb(){console.error("THREE.CanvasRenderer has been removed")}function Lb(){console.error("THREE.JSONLoader has been removed.")}Qp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Qp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},xf.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Pv.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Mv.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},zm.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),fg.extractUrlBase(e)},zm.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},mv.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},mv.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},mv.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},mv.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},gs.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},gs.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gs.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},gs.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},gs.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Is.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Bc.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},bv.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ja.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Ja.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ja.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ja.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ja.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ja.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Hs.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Hs.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Hs.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ps).setFromMatrixColumn(this,3)},Hs.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Hs.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Hs.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hs.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hs.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Hs.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Hs.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hs.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Hs.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Hs.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Hs.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Hs.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Hs.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Hs.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Hs.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},Hs.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},jc.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},ds.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},ds.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Vs.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Vs.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Vs.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},El.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},El.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},El.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},El.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},El.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},El.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),El.getBarycoord(e,t,n,r,i)},El.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),El.getNormal(e,t,n,r)},wf.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},wf.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Kf(this,e)},wf.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new nm(this,e)},Ka.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Ka.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Ka.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ps.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ps.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ps.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},ps.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},ps.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},ps.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},ps.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ps.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},ps.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ls.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},ls.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ml.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},ml.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ml.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},ml.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ml.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(ml.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),wc.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(wc.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ko},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),cp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Rc.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Xm.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(zl.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ca},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ca)}}}),zl.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ca:Ea),this},zl.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},zl.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},rc.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},rc.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new zl(arguments[1],arguments[2])))},rc.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},rc.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},rc.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},rc.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},rc.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(rc.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Dd.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ca:Ea),this},Dd.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Kf.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Kf.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Kf.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Id.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},av.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Al.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Il}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===yr}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Cc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Pd.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Pd.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Pd.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Pd.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Pd.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Pd.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Pd.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Pd.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Pd.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Pd.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Pd.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Pd.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Pd.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Pd.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Pd.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Pd.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Pd.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Pd.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Pd.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Pd.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Pd.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Pd.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Pd.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Pd.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Pd.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Pd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?ea:Zo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(xd.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(cs.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Fg.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Mg).load(e,(function(e){t.setBuffer(e)})),this},Hg.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Pc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Pc.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},is.crossOrigin=void 0,is.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new qm;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},is.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Wm;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},is.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},is.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Ob={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Nb(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function Ib(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new rc}function Db(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new rc}function jb(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Fb(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function zb(){console.error("THREE.ImmediateRenderObject has been removed.")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:or}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=or);const Bb=e;function Ub(e,t){let n=0,r=e.length-1,i=-1;for(;n<=r;){const o=Math.floor((n+r)/2);e[o]<t?(i=o,n=o+1):r=o-1}return i}function Gb(e){let[,t,n]=e.split("&"),[,r]=n.split(" ");return n.startsWith("joint")?"&angle&"+r:"&"+t+"&"+r}function Vb(e,t,n){let r;e.normalize();const i=new Bb.Vector3(0,0,0);if(void 0!=t){let o=new Bb.Vector3(e.x,e.y,e.z),a=new Bb.Vector3(-e.x,-e.y,-e.z),s=o.distanceTo(t),l=a.distanceTo(t);r=s<l||s==l&&n?i.clone().add(o):i.clone().add(a)}else{let t=new Bb.Vector3(-e.x,-e.y,-e.z);n&&(t=new Bb.Vector3(e.x,e.y,e.z)),r=i.clone().add(t)}return r}function Hb(e,t){let n,r=0,i=e.length-1;for(;r<=i;){const o=Math.floor((r+i)/2);e[o]<=t?(n=o,r=o+1):i=o-1}return n}function Wb(e,t){let n,r=0,i=e.length-1;for(;r<=i;){const o=Math.floor((r+i)/2);e[o]>=t?(n=o,i=o-1):r=o+1}return n}function $b(e,t){if(void 0===e);else if(Array.isArray(e))for(const n of e)$b(n,t);else t(e)}let qb=function(e){return e.NUMBER="number",e.STRING="string",e.STRING_AND_NUMBER="string_and_number",e}({});function Xb(e){return e*(Math.PI/180)}function Yb(e){return e*(180/Math.PI)}function Kb(e,t,n){return e+(t-e)*n}const Jb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Qb=new Set;function Zb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1?arguments[1]:void 0;t&&t<e&&(t=e);let n="",r=100;for(;;){let i=n+Jb[ty(0,63)];if(void 0!==t&&Zb.length>t)n="";else if(i.length<e||r<=0)n=i,r=100;else{if(!Qb.has(i))return Qb.add(i),i;r--}}}function ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(t-e)+e}function ty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(ey(e,t))}function ny(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,n="#"+Math.floor(ey(e,t)).toString(16);for(;n.length<6;)n+="0";return n}function ry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function iy(e){let t="",n=0;for(let r=0;r<e.length;r++){const i=e[r];"0123456789".includes(i)?t+=i:0===n&&"."===i?(t+=i,n++):0===t.length&&"-"===i&&(t+=i)}return t}function*oy(e){let t=0;for(const n of e)yield[t++,n]}function*ay(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t.map((e=>e[Symbol.iterator]()));for(;;){const e=[];for(const t of r){let{value:n,done:r}=t.next();if(r)break;e.push(n)}if(e.length!==r.length)return;yield e}}function sy(e,t){let n=-1,r=e.length;for(;1+n<r;){const i=n+(r-n>>1);t(e[i])?r=i:n=i}return r}function ly(e,t,n){return sy(e,void 0===n?e=>e>=t:e=>n(e)>=n(t))}function cy(e,t){let n=new Map;for(const i of e){let e=t(i);void 0!==n.get(e)?n.set(e,[i,!1]):n.set(e,[i,!0])}let r=[];for(const[,[i,o]]of n.entries())o&&r.push(i);return r}function uy(e,t,n){return e.filter((e=>n(e)===n(t))).length}function hy(e){return function(){e>0&&(console.log(...arguments),e--)}}hy(1e3);function dy(e){return e="Could not deserialize Animation: ".concat(e),ir.error(e),e}class py{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._object=void 0,this._animationTable=void 0,this._offset=void 0,this._lengthen=void 0,this._object=e,this._animationTable=t,this._offset=n,this._lengthen=r}copy(e,t){let n=t.get(e._object);if(void 0===n)throw Error("Object ".concat(this._object.name(),"  could not be mapped to a copy!"));return this._object=n,this._animationTable=e._animationTable.clone(),this._offset=e._offset,this._lengthen=e._lengthen,this}clone(e){let t=e.get(this._object);if(void 0===t)throw Error("Object ".concat(this._object.name()," could not be mapped to a clone!"));return new py(t,this._animationTable.clone(),this._offset,this._lengthen)}objectAnimating(){return this._object}animationTable(){return this._animationTable}startTime(){return this._animationTable.startTime()+this._offset}endTime(){return this._animationTable.endTime()+this._offset+this._lengthen}update(e){e+=this._offset;let[t,n]=[this.startTime(),this.endTime()],r=n+t,i=e+t;(e-=Kb(0,this._lengthen,i/r))<t&&(e=t),e>n&&(e=n);let o=this._animationTable.frame(e,this._object.name());this._object.applyFrame(o)}setOffset(e){this._offset=e,ir.render(),ir.updateUI()}robot(){return this._object}offset(){return this._offset}setLengthen(e){this._lengthen=e,ir.render(),ir.updateUI()}lengthen(){return this._lengthen}serialize(){return{objectId:this._object.idValue(),animationTableId:this._animationTable.idValue(),offset:this._offset,lengthen:this._lengthen}}static async deserialize(e,t,n,r){let i=t.get(e.objectId);if(i){let t=i,o=e.animationTableId;if(o){let i=n.get(o);if(i)return r?(r._object=t,r._animationTable=i,e.offset&&(r._offset=e.offset),e.lengthen&&(r._offset=e.lengthen),r):new py(t,i,e.offset,e.lengthen);throw dy("An animation table with ID ".concat(o," could not be found."))}throw dy("AnimationTable seral was not present while deserializing Animation.")}throw dy('Uknown object ID "'.concat(e.objectId,'"'))}}class fy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Animation Group",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._name=void 0,this._animations=void 0,this._name=e,this._animations=[...t]}setName(e){this._name=e,ir.updateUI()}name(){return this._name}startTime(){let e=1/0;for(const t of this._animations)e=Math.min(e,t.startTime());return e===1/0&&(e=0),e}endTime(){let e=-1/0;for(const t of this._animations)e=Math.max(e,t.endTime());return e===-1/0&&(e=1),e}update(e){for(const t of this._animations)t.update(e)}animations(){return this._animations}addAnimation(e){-1===this._animations.indexOf(e)&&(this._animations.push(e),ir.updateUI())}removeAnimation(e){let t=this._animations.indexOf(e);t>=0&&(this._animations.splice(t,1),ir.updateUI())}copy(e,t){this._name=e.name();for(const n of e._animations)this.addAnimation(n.clone(t));return this}clone(e){return(new fy).copy(this,e)}serialize(){let e=[];for(const t of this._animations)e.push(t.serialize());return{name:this._name,animations:e}}static async deserialize(e,t,n,r){let i=null!==r&&void 0!==r?r:new fy,o=e.animations;if(o){e.name&&(i._name=e.name);let r=[];for(const e of o)r.push(py.deserialize(e,t,n));let a=await Promise.all(r);for(const e of a)i.addAnimation(e)}return i}}var my=n(3536),gy=n.n(my);class vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1?arguments[1]:void 0;this._renderFunc=void 0,this._lastTimeRendered=void 0,this._maxFPS=void 0,this._renderFuncs=void 0,this.addBoundFunc=e=>{this._renderFuncs.push(e)},this.removeBoundFunc=e=>{let t=this._renderFuncs.indexOf(e);t>-1&&this._renderFuncs.splice(t,1)},this.call=()=>{void 0===this._renderFunc&&(this._renderFunc=this.renderFunc,requestAnimationFrame((()=>{this.renderFunc()})))},this.forceCall=()=>{this.renderFunc(!0)},this.renderFunc=e=>{let t=Date.now(),n=t-this._lastTimeRendered;if(e||n>=1e3/this._maxFPS){for(const e of this._renderFuncs)e();return this._lastTimeRendered=t,void(this._renderFunc=void 0)}requestAnimationFrame((()=>{this.renderFunc()}))},this._lastTimeRendered=0,this._maxFPS=e,this._renderFuncs=null!==t&&void 0!==t?t:[]}maxFPS(){return this._maxFPS}setMaxFPS(e){this._maxFPS=e}}class by{constructor(e,t,n,r){this._currTime=void 0,this._lastTimeRendered=void 0,this._endTime=void 0,this._startTime=void 0,this._maxFPS=void 0,this._wasPlaying=void 0,this._playFunc=void 0,this._renderFunc=void 0,this._render=void 0,this.time=()=>this._currTime,this.setTime=e=>{(e=(0,my.clamp)(e,this._startTime,this._endTime))!==this._currTime&&(void 0===this._playFunc?(this._currTime=e,this._render.call(),ir.updateUI()):this._currTime=e)},this.start=()=>{void 0===this._playFunc&&(this._playFunc=()=>{let e=Date.now(),t=Math.abs(e-this._lastTimeRendered);if(!1===this._wasPlaying)return this._wasPlaying=!0,this._lastTimeRendered=e,void(void 0!==this._playFunc?requestAnimationFrame(this._playFunc):this.stop());void 0!==this._playFunc&&(this._currTime+=t/1e3,e-this._lastTimeRendered>=1e3/(2*this._maxFPS)&&(this._render.forceCall(),this._lastTimeRendered=e),void 0!==this._playFunc&&requestAnimationFrame(this._playFunc))},requestAnimationFrame(this._playFunc))},this.stop=()=>{this._wasPlaying=!1,this._playFunc=void 0},this.restart=()=>{this.setTime(this._startTime)},this.render=()=>{let e=this._currTime;e>this._endTime?(e=this._endTime,this._currTime=this._endTime,this.stop()):e<this._startTime&&(this._currTime=0,e=this._startTime),this._renderFunc(e)},this._currTime=t,this._lastTimeRendered=0,this._startTime=t,this._endTime=n,this._maxFPS=e,this._wasPlaying=!1,this._renderFunc=r,this._render=new vy(e,[this.render])}startTime(){return this._startTime}setStartTime(e){(e=Math.min(e,this._endTime))!==this._startTime&&(this._startTime=e,this._currTime<e&&(this._currTime=e),ir.updateUI())}endTime(){return this._endTime}setEndTime(e){(e=Math.max(this._startTime,e))!==this._endTime&&(this._endTime=e,this._currTime>e&&(this._currTime=e),ir.updateUI())}maxFPS(){return this._maxFPS}setMaxFPS(e){this._maxFPS=Math.max(e,1),this._render.setMaxFPS(e),ir.updateUI()}}class yy{constructor(e){this._id=void 0,this._id=null!==e&&void 0!==e?e:Zb(64,64)}set(e){this._id=e}value(){return this._id}regen(){this._id=Zb(64,64)}}class xy extends zm{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Ty(e)})),this.register((function(e){return new Py(e)})),this.register((function(e){return new Ly(e)})),this.register((function(e){return new Ey(e)})),this.register((function(e){return new Cy(e)})),this.register((function(e){return new Ay(e)})),this.register((function(e){return new Ry(e)})),this.register((function(e){return new ky(e)})),this.register((function(e){return new Sy(e)})),this.register((function(e){return new Oy(e)}))}load(e,t,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:fg.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new Um(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(tq){a(tq)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={};if("string"===typeof e)i=e;else{if(fg.decodeText(new Uint8Array(e,0,4))===Ny){try{o[_y.KHR_BINARY_GLTF]=new jy(e)}catch(c){return void(r&&r(c))}i=o[_y.KHR_BINARY_GLTF].content}else i=fg.decodeText(new Uint8Array(e))}const s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new mx(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](l);a[e.name]=e,o[e.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const e=s.extensionsUsed[u],t=s.extensionsRequired||[];switch(e){case _y.KHR_MATERIALS_UNLIT:o[e]=new My;break;case _y.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[e]=new Uy;break;case _y.KHR_DRACO_MESH_COMPRESSION:o[e]=new Fy(s,this.dracoLoader);break;case _y.KHR_TEXTURE_TRANSFORM:o[e]=new zy;break;case _y.KHR_MESH_QUANTIZATION:o[e]=new Gy;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function wy(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const _y={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Sy{constructor(e){this.parser=e,this.name=_y.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const s=new Il(16777215);void 0!==o.color&&s.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new lg(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new ag(s),a.distance=l;break;case"spot":a=new tg(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class My{constructor(){this.name=_y.KHR_MATERIALS_UNLIT}getMaterialType(){return Dl}extendParams(e,t,n){const r=[];e.color=new Il(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}class Ty{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ka(e,e)}return Promise.all(i)}}class Ey{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new Il(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class Cy{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class Ay{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Il(a[0],a[1],a[2]),Promise.all(i)}}class Ry{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class ky{constructor(e){this.parser=e,this.name=_y.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?pm:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Il(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture).then((function(e){e.encoding=ea}))),Promise.all(i)}}class Py{constructor(e){this.parser=e,this.name=_y.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class Ly{constructor(e){this.parser=e,this.name=_y.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Oy{constructor(e){this.name=_y.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new ArrayBuffer(o*a),l=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(s),o,a,l,e.mode,e.filter),s}))}return null}}const Ny="glTF",Iy=1313821514,Dy=5130562;class jy{constructor(e){this.name=_y.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:fg.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ny)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===Iy){const n=new Uint8Array(e,12+i,t);this.content=fg.decodeText(n)}else if(n===Dy){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Fy{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_y.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const c in o){const e=rx[c]||c.toLowerCase();a[e]=o[c]}for(const c in e.attributes){const t=rx[c]||c.toLowerCase();if(void 0!==o[c]){const r=n.accessors[e.attributes[c]],i=Zy[r.componentType];l[t]=i,s[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class zy{constructor(){this.name=_y.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class By extends dm{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new Il).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Uy{constructor(){this.name=_y.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return By}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new Il(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new Il(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Il(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t))}return Promise.all(i)}createMaterial(e){const t=new By(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=la,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class Gy{constructor(){this.name=_y.KHR_MESH_QUANTIZATION}}class Vy extends _m{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[i+o];return t}}Vy.prototype.beforeStart_=Vy.prototype.copySampleValue_,Vy.prototype.afterEnd_=Vy.prototype.copySampleValue_,Vy.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=r-t,u=(n-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,g=d-h,v=1-m,b=g-h+u;for(let y=0;y!==a;y++){const e=o[f+y+a],t=o[f+y+s]*c,n=o[p+y+a],r=o[p+y]*c;i[y]=v*e+b*t+m*n+g*r}return i};const Hy=new ds;class Wy extends Vy{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return Hy.fromArray(i).normalize().toArray(i),i}}const $y=0,qy=1,Xy=2,Yy=3,Ky=4,Jy=5,Qy=6,Zy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ex={9728:gi,9729:wi,9984:vi,9985:_i,9986:yi,9987:Mi},tx={33071:fi,33648:mi,10497:pi},nx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ix={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ox={CUBICSPLINE:void 0,LINEAR:Vo,STEP:Go},ax="OPAQUE",sx="MASK",lx="BLEND";function cx(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ux(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function hx(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dx(e){const t=e.extensions&&e.extensions[_y.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+px(t.attributes):e.indices+":"+px(e.attributes)+":"+e.mode,n}function px(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function fx(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class mx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new wy,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new wg(this.options.manager):this.textureLoader=new qm(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Um(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};cx(i,o,r),ux(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,o]of e.children.entries())i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[_y.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(fg.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=nx[r.type],a=Zy[r.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(d=new a(i,e*u,r.count*u/s),l=new Dd(d,u/s),t.cache.add(n,l)),p=new Fd(l,o,c%u/s,h)}else d=null===i?new a(r.count*o):new a(i,c,r.count*o),p=new zl(d,o,h);if(void 0!==r.sparse){const t=nx.SCALAR,n=Zy[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),u=new a(e[2],l,r.sparse.count*o);null!==i&&(p=new zl(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,u[e*o]),o>=2&&p.setY(t,u[e*o+1]),o>=3&&p.setZ(t,u[e*o+2]),o>=4&&p.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=this.options,a=i.textures[e],s=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];const l=self.URL||self.webkitURL;let c=t.uri||"",u=!1;if(void 0!==t.bufferView)c=r.getDependency("bufferView",t.bufferView).then((function(e){u=!0;const n=new Blob([e],{type:t.mimeType});return c=l.createObjectURL(n),c}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(c).then((function(e){return new Promise((function(t,r){let i=t;!0===n.isImageBitmapLoader&&(i=function(e){const n=new as(e);n.needsUpdate=!0,t(n)}),n.load(fg.resolveURL(e,o.path),i,void 0,r)}))})).then((function(t){!0===u&&l.revokeObjectURL(c),t.flipY=!1,a.name&&(t.name=a.name);const n=(i.samplers||{})[a.sampler]||{};return t.magFilter=ex[n.magFilter]||wi,t.minFilter=ex[n.minFilter]||Mi,t.wrapS=tx[n.wrapS]||pi,t.wrapT=tx[n.wrapT]||pi,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[s]=h,h}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[_y.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[_y.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[_y.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Lp,Al.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new wp,Al.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return dm}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const a={},s=i.extensions||{},l=[];if(s[_y.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[_y.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),l.push(e.extendParams(a,i,t))}else if(s[_y.KHR_MATERIALS_UNLIT]){const e=r[_y.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),l.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new Il(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(a,"map",n.baseColorTexture)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=br);const c=i.alphaMode||ax;if(c===lx?(a.transparent=!0,a.depthWrite=!1):(a.format=zi,a.transparent=!1,c===sx&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==Dl&&(l.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Ka(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&o!==Dl&&(l.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==Dl&&(a.emissive=(new Il).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==Dl&&l.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture)),Promise.all(l).then((function(){let n;return n=o===By?r[_y.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),i.name&&(n.name=i.name),n.map&&(n.map.encoding=ea),n.emissiveMap&&(n.emissiveMap.encoding=ea),ux(n,i),t.associations.set(n,{materials:e}),i.extensions&&cx(r,n,i),n}))}createUniqueName(e){const t=nv.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[_y.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return vx(n,e,t)}))}const o=[];for(let a=0,s=e.length;a<s;a++){const n=e[a],s=dx(n),l=r[s];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[_y.KHR_DRACO_MESH_COMPRESSION]?i(n):vx(new rc,n,t),r[s]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const e=void 0===o[l].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new dm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:gr})),s.DefaultMaterial):this.getDependency("material",o[l].material);a.push(e)}var s;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let u=0,h=s.length;u<h;u++){const n=s[u],c=o[u];let h;const d=a[u];if(c.mode===Ky||c.mode===Jy||c.mode===Qy||void 0===c.mode)h=!0===i.isSkinnedMesh?new cp(n,d):new wc(n,d),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),c.mode===Jy?h.geometry=bx(h.geometry,Jo):c.mode===Qy&&(h.geometry=bx(h.geometry,Qo));else if(c.mode===qy)h=new kp(n,d);else if(c.mode===Yy)h=new Cp(n,d);else if(c.mode===Xy)h=new Pp(n,d);else{if(c.mode!==$y)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new jp(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&hx(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),ux(h,i),c.extensions&&cx(r,h,c),t.assignFinalMaterial(h),l.push(h)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return l[0];const c=new Td;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Rc(Ya.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Zc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ux(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],o=[],a=[];for(let s=0,l=t.channels.length;s<l;s++){const e=t.channels[s],l=t.samplers[e.sampler],c=e.target,u=void 0!==c.node?c.node:c.id,h=void 0!==t.parameters?t.parameters[l.input]:l.input,d=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",d)),o.push(l),a.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=o[e],u=a[e],h=s[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,ix[h.path]){case ix.weights:d=Rm;break;case ix.rotation:d=Pm;break;default:d=Om}const p=t.name?t.name:t.uuid,f=void 0!==u.interpolation?ox[u.interpolation]:Vo,m=[];ix[h.path]===ix.weights?t.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);let g=c.array;if(c.normalized){const e=fx(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,r=m.length;e<r;e++){const t=new d(m[e]+"."+ix[h.path],n.array,g,f);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof Pm?Wy:Vy)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new Nm(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===i.isBone?new up:t.length>1?new Td:1===t.length?t[0]:new ml,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),ux(a,i),i.extensions&&cx(n,a,i),void 0!==i.matrix){const e=new Hs;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,o=new Td;r.name&&(o.name=i.createUniqueName(r.name)),ux(o,r),r.extensions&&cx(n,o,r);const a=r.nodes||[],s=[];for(let l=0,c=a.length;l<c;l++)s.push(gx(a[l],o,t,i));return Promise.all(s).then((function(){return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Al||n instanceof as)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(o),o}))}}function gx(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let i=0,o=t.joints.length;i<o;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let o=0,a=n.length;o<a;o++){const e=n[o];if(e){r.push(e);const n=new Hs;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*o),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new fp(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++){const a=t[i];o.push(gx(a,e,n,r))}}return Promise.all(o)}))}function vx(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=rx[a]||a.toLowerCase();t in e.attributes||i.push(o(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return ux(e,t),function(e,t,n){const r=t.attributes,i=new gs;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new ps(t[0],t[1],t[2]),new ps(o[0],o[1],o[2])),e.normalized){const t=fx(Zy[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new ps,t=new ps;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=fx(Zy[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new Is;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1;for(let s=0,l=t.length;s<l;s++){const e=t[s];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);const o=[],a=[];for(let s=0,l=t.length;s<l;s++){const l=t[s];if(r){const t=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(o),Promise.all(a)]).then((function(t){const n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function bx(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===Qo)for(let a=1;a<=r;a++)i.push(n.getX(0)),i.push(n.getX(a)),i.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(i.push(n.getX(a)),i.push(n.getX(a+1)),i.push(n.getX(a+2))):(i.push(n.getX(a+2)),i.push(n.getX(a+1)),i.push(n.getX(a)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o}class yx extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Um(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(n))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}parse(e){function t(e,t,n){for(let r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}const n=function(e){if("string"===typeof e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){const n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;const r=[115,111,108,105,100];for(let i=0;i<5;i++)if(t(r,n,i))return!1;return!0}(n)?function(e){const t=new DataView(e),n=t.getUint32(80,!0);let r,i,o,a,s,l,c,u,h=!1;for(let m=0;m<70;m++)1129270351==t.getUint32(m,!1)&&82==t.getUint8(m+4)&&61==t.getUint8(m+5)&&(h=!0,a=new Float32Array(3*n*3),s=t.getUint8(m+6)/255,l=t.getUint8(m+7)/255,c=t.getUint8(m+8)/255,u=t.getUint8(m+9)/255);const d=new rc,p=new Float32Array(3*n*3),f=new Float32Array(3*n*3);for(let m=0;m<n;m++){const e=84+50*m,n=t.getFloat32(e,!0),u=t.getFloat32(e+4,!0),d=t.getFloat32(e+8,!0);if(h){const n=t.getUint16(e+48,!0);0===(32768&n)?(r=(31&n)/31,i=(n>>5&31)/31,o=(n>>10&31)/31):(r=s,i=l,o=c)}for(let s=1;s<=3;s++){const l=e+12*s,c=3*m*3+3*(s-1);p[c]=t.getFloat32(l,!0),p[c+1]=t.getFloat32(l+4,!0),p[c+2]=t.getFloat32(l+8,!0),f[c]=n,f[c+1]=u,f[c+2]=d,h&&(a[c]=r,a[c+1]=i,a[c+2]=o)}}return d.setAttribute("position",new zl(p,3)),d.setAttribute("normal",new zl(f,3)),h&&(d.setAttribute("color",new zl(a,3)),d.hasColors=!0,d.alpha=u),d}(n):function(e){const t=new rc,n=/solid([\s\S]*?)endsolid/g,r=/facet([\s\S]*?)endfacet/g;let i=0;const o=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,a=new RegExp("vertex"+o+o+o,"g"),s=new RegExp("normal"+o+o+o,"g"),l=[],c=[],u=new ps;let h,d=0,p=0,f=0;for(;null!==(h=n.exec(e));){p=f;const e=h[0];for(;null!==(h=r.exec(e));){let e=0,t=0;const n=h[0];for(;null!==(h=s.exec(n));)u.x=parseFloat(h[1]),u.y=parseFloat(h[2]),u.z=parseFloat(h[3]),t++;for(;null!==(h=a.exec(n));)l.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),c.push(u.x,u.y,u.z),e++,f++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+i),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+i),i++}const n=p,o=f-p;t.addGroup(n,o,d),d++}return t.setAttribute("position",new Xl(l,3)),t.setAttribute("normal",new Xl(c,3)),t}("string"!==typeof(r=e)?fg.decodeText(new Uint8Array(r)):r);var r}}class xx extends $m{constructor(e){super(e)}parse(e){const t=0,n=1,r=2,i=3,o=9,a=10,s=11,l=48,c=4,u=0,h=1,d=2,p=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let f=0;const m=new Uint8Array(e),g={id_length:m[f++],colormap_type:m[f++],image_type:m[f++],colormap_index:m[f++]|m[f++]<<8,colormap_length:m[f++]|m[f++]<<8,colormap_size:m[f++],origin:[m[f++]|m[f++]<<8,m[f++]|m[f++]<<8],width:m[f++]|m[f++]<<8,height:m[f++]|m[f++]<<8,pixel_size:m[f++],flags:m[f++]};!function(e){switch(e.image_type){case n:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case i:case a:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(g),g.id_length+f>e.length&&console.error("THREE.TGALoader: No data."),f+=g.id_length;let v=!1,b=!1,y=!1;switch(g.image_type){case o:v=!0,b=!0;break;case n:b=!0;break;case a:v=!0;break;case r:break;case s:v=!0,y=!0;break;case i:y=!0}const x=new Uint8Array(g.width*g.height*4),w=function(e,t,n,r,i){let o,a;const s=n.pixel_size>>3,l=n.width*n.height*s;if(t&&(a=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;o=new Uint8Array(l);let a=0;const c=new Uint8Array(s);for(;a<l;)if(e=i[r++],t=1+(127&e),128&e){for(n=0;n<s;++n)c[n]=i[r++];for(n=0;n<t;++n)o.set(c,a+n*s);a+=s*t}else{for(t*=s,n=0;n<t;++n)o[a+n]=i[r++];a+=t}}else o=i.subarray(r,r+=t?n.width*n.height:l);return{pixel_data:o,palettes:a}}(v,b,g,f,m);return function(e,t,n,r,i){let o,a,s,f,m,v;switch((g.flags&l)>>c){default:case d:o=0,s=1,m=t,a=0,f=1,v=n;break;case u:o=0,s=1,m=t,a=n-1,f=-1,v=-1;break;case p:o=t-1,s=-1,m=-1,a=0,f=1,v=n;break;case h:o=t-1,s=-1,m=-1,a=n-1,f=-1,v=-1}if(y)switch(g.pixel_size){case 8:!function(e,t,n,r,i,o,a,s){let l,c,u,h=0;const d=g.width;for(u=t;u!==r;u+=n)for(c=i;c!==a;c+=o,h++)l=s[h],e[4*(c+d*u)+0]=l,e[4*(c+d*u)+1]=l,e[4*(c+d*u)+2]=l,e[4*(c+d*u)+3]=255}(e,a,f,v,o,s,m,r);break;case 16:!function(e,t,n,r,i,o,a,s){let l,c,u=0;const h=g.width;for(c=t;c!==r;c+=n)for(l=i;l!==a;l+=o,u+=2)e[4*(l+h*c)+0]=s[u+0],e[4*(l+h*c)+1]=s[u+0],e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+3]=s[u+1]}(e,a,f,v,o,s,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(g.pixel_size){case 8:!function(e,t,n,r,i,o,a,s,l){const c=l;let u,h,d,p=0;const f=g.width;for(d=t;d!==r;d+=n)for(h=i;h!==a;h+=o,p++)u=s[p],e[4*(h+f*d)+3]=255,e[4*(h+f*d)+2]=c[3*u+0],e[4*(h+f*d)+1]=c[3*u+1],e[4*(h+f*d)+0]=c[3*u+2]}(e,a,f,v,o,s,m,r,i);break;case 16:!function(e,t,n,r,i,o,a,s){let l,c,u,h=0;const d=g.width;for(u=t;u!==r;u+=n)for(c=i;c!==a;c+=o,h+=2)l=s[h+0]+(s[h+1]<<8),e[4*(c+d*u)+0]=(31744&l)>>7,e[4*(c+d*u)+1]=(992&l)>>2,e[4*(c+d*u)+2]=(31&l)<<3,e[4*(c+d*u)+3]=32768&l?0:255}(e,a,f,v,o,s,m,r);break;case 24:!function(e,t,n,r,i,o,a,s){let l,c,u=0;const h=g.width;for(c=t;c!==r;c+=n)for(l=i;l!==a;l+=o,u+=3)e[4*(l+h*c)+3]=255,e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+1]=s[u+1],e[4*(l+h*c)+0]=s[u+2]}(e,a,f,v,o,s,m,r);break;case 32:!function(e,t,n,r,i,o,a,s){let l,c,u=0;const h=g.width;for(c=t;c!==r;c+=n)for(l=i;l!==a;l+=o,u+=4)e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+1]=s[u+1],e[4*(l+h*c)+0]=s[u+2],e[4*(l+h*c)+3]=s[u+3]}(e,a,f,v,o,s,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(x,g.width,g.height,w.pixel_data,w.palettes),{data:x,width:g.width,height:g.height,flipY:!0,generateMipmaps:!0,minFilter:Mi}}}class wx extends zm{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===i.path?fg.extractUrlBase(e):i.path,a=new Um(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(n,o))}catch(tq){r?r(tq):console.error(tq),i.manager.itemError(e)}}),n,r)}parse(e,t){function n(e,t){const n=[],r=e.childNodes;for(let i=0,o=r.length;i<o;i++){const e=r[i];e.nodeName===t&&n.push(e)}return n}function r(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r];return n}function i(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=parseFloat(t[r]);return n}function o(e){if(0===e.length)return[];const t=e.trim().split(/\s+/),n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=parseInt(t[r]);return n}function a(e){return e.substring(1)}function s(e){return 0===Object.keys(e).length}function l(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function c(e){return void 0!==e?e.textContent:"Y_UP"}function u(e,t,r,i){const o=n(e,t)[0];if(void 0!==o){const e=n(o,r);for(let t=0;t<e.length;t++)i(e[t])}}function h(e,t){for(const n in e){e[n].build=t(e[n])}}function d(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function p(e){const t={inputs:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"input"===r.nodeName){const e=a(r.getAttribute("source")),n=r.getAttribute("semantic");t.inputs[n]=e}}return t}function f(e){const t={};let n=e.getAttribute("target").split("/");const r=n.shift();let i=n.shift();const o=-1!==i.indexOf("("),s=-1!==i.indexOf(".");if(s)n=i.split("."),i=n.shift(),t.member=n.shift();else if(o){const e=i.split("(");i=e.shift();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t].replace(/\)/,""));t.indices=e}return t.id=r,t.sid=i,t.arraySyntax=o,t.memberSyntax=s,t.sampler=a(e.getAttribute("source")),t}function m(e){const t=[],n=e.channels,r=e.samplers,i=e.sources;for(const o in n)if(n.hasOwnProperty(o)){const e=n[o],a=r[e.sampler],s=a.inputs.INPUT,l=a.inputs.OUTPUT;w(v(e,i[s],i[l]),t)}return t}function g(e){return d(Je.animations[e],m)}function v(e,t,n){const r=Je.nodes[e.id],i=je(r.id),o=r.transforms[e.sid],a=r.matrix.clone().transpose();let s,l,c,u,h,d;const p={};switch(o){case"matrix":for(c=0,u=t.array.length;c<u;c++)if(s=t.array[c],l=c*n.stride,void 0===p[s]&&(p[s]={}),!0===e.arraySyntax){const t=n.array[l],r=e.indices[0]+4*e.indices[1];p[s][r]=t}else for(h=0,d=n.stride;h<d;h++)p[s][h]=n.array[l+h];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',o)}const f=function(e,t){const n=[];for(const i in e)n.push({time:parseFloat(i),value:e[i]});n.sort(r);for(let i=0;i<16;i++)_(n,i,t.elements[i]);return n;function r(e,t){return e.time-t.time}}(p,a);return{name:i.uuid,keyframes:f}}const b=new ps,y=new ps,x=new ds;function w(e,t){const n=e.keyframes,r=e.name,i=[],o=[],a=[],s=[];for(let l=0,c=n.length;l<c;l++){const e=n[l],t=e.time,r=e.value;Ee.fromArray(r).transpose(),Ee.decompose(b,x,y),i.push(t),o.push(b.x,b.y,b.z),a.push(x.x,x.y,x.z,x.w),s.push(y.x,y.y,y.z)}return o.length>0&&t.push(new Om(r+".position",i,o)),a.length>0&&t.push(new Pm(r+".quaternion",i,a)),s.length>0&&t.push(new Om(r+".scale",i,s)),t}function _(e,t,n){let r,i,o,a=!0;for(i=0,o=e.length;i<o;i++)r=e[i],void 0===r.value[t]?r.value[t]=null:a=!1;if(!0===a)for(i=0,o=e.length;i<o;i++)r=e[i],r.value[t]=n;else!function(e,t){let n,r;for(let i=0,o=e.length;i<o;i++){const o=e[i];if(null===o.value[t]){if(n=S(e,i,t),r=M(e,i,t),null===n){o.value[t]=r.value[t];continue}if(null===r){o.value[t]=n.value[t];continue}T(o,n,r,t)}}}(e,t)}function S(e,t,n){for(;t>=0;){const r=e[t];if(null!==r.value[n])return r;t--}return null}function M(e,t,n){for(;t<e.length;){const r=e[t];if(null!==r.value[n])return r;t++}return null}function T(e,t,n,r){n.time-t.time!==0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function E(e){const t=[],n=e.name,r=e.end-e.start||-1,i=e.animations;for(let o=0,a=i.length;o<a;o++){const e=g(i[o]);for(let n=0,r=e.length;n<r;n++)t.push(e[n])}return new Nm(n,r,t)}function C(e){return d(Je.clips[e],E)}function A(e){const t={sources:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(r.textContent);break;case"source":const e=r.getAttribute("id");t.sources[e]=ae(r);break;case"joints":t.joints=R(r);break;case"vertex_weights":t.vertexWeights=k(r)}}return t}function R(e){const t={inputs:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"input"===r.nodeName){const e=r.getAttribute("semantic"),n=a(r.getAttribute("source"));t.inputs[e]=n}}return t}function k(e){const t={inputs:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":const e=r.getAttribute("semantic"),n=a(r.getAttribute("source")),i=parseInt(r.getAttribute("offset"));t.inputs[e]={id:n,offset:i};break;case"vcount":t.vcount=o(r.textContent);break;case"v":t.v=o(r.textContent)}}return t}function P(e){const t={id:e.id},n=Je.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){const t=4,n={joints:[],indices:{array:[],stride:t},weights:{array:[],stride:t}},r=e.sources,i=e.vertexWeights,o=i.vcount,a=i.v,s=i.inputs.JOINT.offset,l=i.inputs.WEIGHT.offset,c=e.sources[e.joints.inputs.JOINT],u=e.sources[e.joints.inputs.INV_BIND_MATRIX],h=r[i.inputs.WEIGHT.id].array;let d,p,f,m=0;for(d=0,f=o.length;d<f;d++){const e=o[d],r=[];for(p=0;p<e;p++){const e=a[m+s],t=h[a[m+l]];r.push({index:e,weight:t}),m+=2}for(r.sort(g),p=0;p<t;p++){const e=r[p];void 0!==e?(n.indices.array.push(e.index),n.weights.array.push(e.weight)):(n.indices.array.push(0),n.weights.array.push(0))}}e.bindShapeMatrix?n.bindMatrix=(new Hs).fromArray(e.bindShapeMatrix).transpose():n.bindMatrix=(new Hs).identity();for(d=0,f=c.array.length;d<f;d++){const e=c.array[d],t=(new Hs).fromArray(u.array,d*u.stride).transpose();n.joints.push({name:e,boneInverse:t})}return n;function g(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function L(e){return d(Je.controllers[e],P)}function O(e){return void 0!==e.build?e.build:e.init_from}function N(e){const t=Je.images[e];return void 0!==t?d(t,O):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function I(e){const t={surfaces:{},samplers:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"newparam":D(r,t);break;case"technique":t.technique=z(r);break;case"extra":t.extra=W(r)}}return t}function D(e,t){const n=e.getAttribute("sid");for(let r=0,i=e.childNodes.length;r<i;r++){const i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[n]=j(i);break;case"sampler2D":t.samplers[n]=F(i)}}}function j(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"init_from"===r.nodeName)t.init_from=r.textContent}return t}function F(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"source"===r.nodeName)t.source=r.textContent}return t}function z(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=r.nodeName,t.parameters=B(r);break;case"extra":t.extra=W(r)}}return t}function B(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[r.nodeName]=U(r);break;case"transparent":t[r.nodeName]={opaque:r.getAttribute("opaque"),data:U(r)}}}return t}function U(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"color":t[r.nodeName]=i(r.textContent);break;case"float":t[r.nodeName]=parseFloat(r.textContent);break;case"texture":t[r.nodeName]={id:r.getAttribute("texture"),extra:G(r)}}}return t}function G(e){const t={technique:{}};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"extra"===r.nodeName)V(r,t)}return t}function V(e,t){for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"technique"===r.nodeName)H(r,t)}}function H(e,t){for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?t.technique[r.nodeName]=1:"FALSE"===r.textContent.toUpperCase()?t.technique[r.nodeName]=0:t.technique[r.nodeName]=parseInt(r.textContent);break;case"bump":t[r.nodeName]=q(r)}}}function W(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"technique"===r.nodeName)t.technique=$(r)}return t}function $(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"double_sided":t[r.nodeName]=parseInt(r.textContent);break;case"bump":t[r.nodeName]=q(r)}}return t}function q(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType&&"texture"===i.nodeName)t[i.nodeName]={id:i.getAttribute("texture"),texcoord:i.getAttribute("texcoord"),extra:G(i)}}return t}function X(e){return e}function Y(e){const t=function(e){return d(Je.effects[e],X)}(e.url),n=t.profile.technique;let r;switch(n.type){case"phong":case"blinn":r=new fm;break;case"lambert":r=new vm;break;default:r=new Dl}function i(e){const n=t.profile.samplers[e.id];let r=null;if(void 0!==n){r=N(t.profile.surfaces[n.source].init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=N(e.id);if(null!==r){const t=function(e){let t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));n=n.toLowerCase(),t="tga"===n?qe:$e;return t}(r);if(void 0!==t){const n=t.load(r),i=e.extra;if(void 0!==i&&void 0!==i.technique&&!1===s(i.technique)){const e=i.technique;n.wrapS=e.wrapU?pi:fi,n.wrapT=e.wrapV?pi:fi,n.offset.set(e.offsetU||0,e.offsetV||0),n.repeat.set(e.repeatU||1,e.repeatV||1)}else n.wrapS=pi,n.wrapT=pi;return n}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",r),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}r.name=e.name||"";const o=n.parameters;for(const s in o){const e=o[s];switch(s){case"diffuse":e.color&&r.color.fromArray(e.color),e.texture&&(r.map=i(e.texture));break;case"specular":e.color&&r.specular&&r.specular.fromArray(e.color),e.texture&&(r.specularMap=i(e.texture));break;case"bump":e.texture&&(r.normalMap=i(e.texture));break;case"ambient":e.texture&&(r.lightMap=i(e.texture));break;case"shininess":e.float&&r.shininess&&(r.shininess=e.float);break;case"emission":e.color&&r.emissive&&r.emissive.fromArray(e.color),e.texture&&(r.emissiveMap=i(e.texture))}}let a=o.transparent,l=o.transparency;if(void 0===l&&a&&(l={float:1}),void 0===a&&l&&(a={opaque:"A_ONE",data:{color:[1,1,1,1]}}),a&&l)if(a.data.texture)r.transparent=!0;else{const e=a.data.color;switch(a.opaque){case"A_ONE":r.opacity=e[3]*l.float;break;case"RGB_ZERO":r.opacity=1-e[0]*l.float;break;case"A_ZERO":r.opacity=1-e[3]*l.float;break;case"RGB_ONE":r.opacity=e[0]*l.float;break;default:r.opacity=1-l.float,console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',a.opaque)}r.opacity<1&&(r.transparent=!0)}if(void 0!==n.extra&&void 0!==n.extra.technique){const e=n.extra.technique;for(const t in e){const n=e[t];switch(t){case"double_sided":r.side=1===n?br:gr;break;case"bump":r.normalMap=i(n.texture),r.normalScale=new Ka(1,1)}}}return r}function K(e){return d(Je.materials[e],Y)}function J(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if("technique_common"===n.nodeName)return Q(n)}return{}}function Q(e){const t={};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=Z(r)}}return t}function Z(e){const t={};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function ee(e){let t;switch(e.optics.technique){case"perspective":t=new Rc(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":let n=e.optics.parameters.ymag,r=e.optics.parameters.xmag;const i=e.optics.parameters.aspect_ratio;r=void 0===r?n*i:r,n=void 0===n?r/i:n,r*=.5,n*=.5,t=new Zc(-r,r,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new Rc}return t.name=e.name||"",t}function te(e){const t=Je.cameras[e];return void 0!==t?d(t,ee):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ne(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=r.nodeName,t.parameters=re(r)}}return t}function re(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"color":const e=i(r.textContent);t.color=(new Il).fromArray(e);break;case"falloff_angle":t.falloffAngle=parseFloat(r.textContent);break;case"quadratic_attenuation":const n=parseFloat(r.textContent);t.distance=n?Math.sqrt(1/n):0}}return t}function ie(e){let t;switch(e.technique){case"directional":t=new lg;break;case"point":t=new ag;break;case"spot":t=new tg;break;case"ambient":t=new cg}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function oe(e){const t=Je.lights[e];return void 0!==t?d(t,ie):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function ae(e){const t={array:[],stride:3};for(let o=0;o<e.childNodes.length;o++){const a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=i(a.textContent);break;case"Name_array":t.array=r(a.textContent);break;case"technique_common":const e=n(a,"accessor")[0];void 0!==e&&(t.stride=parseInt(e.getAttribute("stride")))}}return t}function se(e){const t={};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=a(r.getAttribute("source")))}return t}function le(e){const t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":const e=a(r.getAttribute("source")),n=r.getAttribute("semantic"),i=parseInt(r.getAttribute("offset")),s=parseInt(r.getAttribute("set")),l=s>0?n+s:n;t.inputs[l]={id:e,offset:i},t.stride=Math.max(t.stride,i+1),"TEXCOORD"===n&&(t.hasUV=!0);break;case"vcount":t.vcount=o(r.textContent);break;case"p":t.p=o(r.textContent)}}return t}function ce(e){let t=0;for(let n=0,r=e.length;n<r;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ue(e){const t={},n=e.sources,r=e.vertices,i=e.primitives;if(0===i.length)return{};const o=function(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(i);for(const a in o){const e=o[a];ce(e),t[a]=he(e,n,r)}return t}function he(e,t,n){const r={},i={array:[],stride:0},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},c=[],u=4,h=[],d=4,p=new rc,f=[];let m=0;for(let g=0;g<e.length;g++){const r=e[g],u=r.inputs;let d=0;switch(r.type){case"lines":case"linestrips":d=2*r.count;break;case"triangles":d=3*r.count;break;case"polylist":for(let e=0;e<r.count;e++){const t=r.vcount[e];switch(t){case 3:d+=3;break;case 4:d+=6;break;default:d+=3*(t-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",r.type)}p.addGroup(m,d,g),m+=d,r.material&&f.push(r.material);for(const p in u){const d=u[p];switch(p){case"VERTEX":for(const u in n){const p=n[u];switch(u){case"POSITION":const n=i.array.length;if(de(r,t[p],d.offset,i.array),i.stride=t[p].stride,t.skinWeights&&t.skinIndices&&(de(r,t.skinIndices,d.offset,c),de(r,t.skinWeights,d.offset,h)),!1===r.hasUV&&!0===e.uvsNeedsFix){const e=(i.array.length-n)/i.stride;for(let t=0;t<e;t++)a.array.push(0,0)}break;case"NORMAL":de(r,t[p],d.offset,o.array),o.stride=t[p].stride;break;case"COLOR":de(r,t[p],d.offset,l.array),l.stride=t[p].stride;break;case"TEXCOORD":de(r,t[p],d.offset,a.array),a.stride=t[p].stride;break;case"TEXCOORD1":de(r,t[p],d.offset,s.array),a.stride=t[p].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',u)}}break;case"NORMAL":de(r,t[d.id],d.offset,o.array),o.stride=t[d.id].stride;break;case"COLOR":de(r,t[d.id],d.offset,l.array),l.stride=t[d.id].stride;break;case"TEXCOORD":de(r,t[d.id],d.offset,a.array),a.stride=t[d.id].stride;break;case"TEXCOORD1":de(r,t[d.id],d.offset,s.array),s.stride=t[d.id].stride}}}return i.array.length>0&&p.setAttribute("position",new Xl(i.array,i.stride)),o.array.length>0&&p.setAttribute("normal",new Xl(o.array,o.stride)),l.array.length>0&&p.setAttribute("color",new Xl(l.array,l.stride)),a.array.length>0&&p.setAttribute("uv",new Xl(a.array,a.stride)),s.array.length>0&&p.setAttribute("uv2",new Xl(s.array,s.stride)),c.length>0&&p.setAttribute("skinIndex",new Xl(c,u)),h.length>0&&p.setAttribute("skinWeight",new Xl(h,d)),r.data=p,r.type=e[0].type,r.materialKeys=f,r}function de(e,t,n,r){const i=e.p,o=e.stride,a=e.vcount;function s(e){let t=i[e+n]*c;const o=t+c;for(;t<o;t++)r.push(l[t])}const l=t.array,c=t.stride;if(void 0!==e.vcount){let e=0;for(let t=0,n=a.length;t<n;t++){const n=a[t];if(4===n){const t=e+1*o,n=e+2*o,r=e+3*o;s(e+0*o),s(t),s(r),s(t),s(n),s(r)}else if(3===n){const t=e+1*o,n=e+2*o;s(e+0*o),s(t),s(n)}else if(n>4)for(let t=1,r=n-2;t<=r;t++){const n=e+o*t,r=e+o*(t+1);s(e+0*o),s(n),s(r)}e+=o*n}}else for(let u=0,h=i.length;u<h;u+=o)s(u)}function pe(e){return d(Je.geometries[e],ue)}function fe(e){return void 0!==e.build?e.build:e}function me(e,t){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=ge(r);break;case"link":t.links.push(be(r))}}}function ge(e){let t;for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=ve(r)}}return t}function ve(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new ps,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":const e=i(r.textContent);t.axis.fromArray(e);break;case"limits":const n=r.getElementsByTagName("max")[0],o=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(n.textContent),t.limits.min=parseFloat(o.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function be(e){const t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(ye(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(xe(r))}}return t}function ye(e){const t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(be(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(xe(r))}}return t}function xe(e){const t={type:e.nodeName},n=i(e.textContent);switch(t.type){case"matrix":t.obj=new Hs,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new ps,t.obj.fromArray(n);break;case"rotate":t.obj=new ps,t.obj.fromArray(n),t.angle=Ya.degToRad(n[3])}return t}function we(e,t){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType&&"technique_common"===r.nodeName)_e(r,t)}}function _e(e,t){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=i(r.textContent);break;case"mass":t.mass=i(r.textContent)[0]}}}function Se(e){const t={target:e.getAttribute("target").split("/").pop()};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType&&"axis"===r.nodeName){const e=r.getElementsByTagName("param")[0];t.axis=e.textContent;const n=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=n.substr(0,n.length-1)}}return t}function Me(e){return void 0!==e.build?e.build:e}function Te(e){const t=[],n=Ge.querySelector('[id="'+e.id+'"]');for(let r=0;r<n.childNodes.length;r++){const e=n.childNodes[r];if(1!==e.nodeType)continue;let o,a;switch(e.nodeName){case"matrix":o=i(e.textContent);const n=(new Hs).fromArray(o).transpose();t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:n});break;case"translate":case"scale":o=i(e.textContent),a=(new ps).fromArray(o),t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:a});break;case"rotate":o=i(e.textContent),a=(new ps).fromArray(o);const r=Ya.degToRad(o[3]);t.push({sid:e.getAttribute("sid"),type:e.nodeName,obj:a,angle:r})}}return t}const Ee=new Hs,Ce=new ps;function Ae(e){const t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new Hs,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1!==r.nodeType)continue;let o;switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),Ae(r);break;case"instance_camera":t.instanceCameras.push(a(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Re(r));break;case"instance_light":t.instanceLights.push(a(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Re(r));break;case"instance_node":t.instanceNodes.push(a(r.getAttribute("url")));break;case"matrix":o=i(r.textContent),t.matrix.multiply(Ee.fromArray(o).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":o=i(r.textContent),Ce.fromArray(o),t.matrix.multiply(Ee.makeTranslation(Ce.x,Ce.y,Ce.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":o=i(r.textContent);const e=Ya.degToRad(o[3]);t.matrix.multiply(Ee.makeRotationAxis(Ce.fromArray(o),e)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":o=i(r.textContent),t.matrix.scale(Ce.fromArray(o)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}return De(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Je.nodes[t.id]=t,t}function Re(e){const t={id:a(e.getAttribute("url")),materials:{},skeletons:[]};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];switch(r.nodeName){case"bind_material":const e=r.getElementsByTagName("instance_material");for(let n=0;n<e.length;n++){const r=e[n],i=r.getAttribute("symbol"),o=r.getAttribute("target");t.materials[i]=a(o)}break;case"skeleton":t.skeletons.push(a(r.textContent))}}return t}function ke(e,t){const n=[],r=[];let i,o,a;for(i=0;i<e.length;i++){const r=e[i];let o;if(De(r))o=je(r),Pe(o,t,n);else if(ze(r)){const e=Je.visualScenes[r].children;for(let r=0;r<e.length;r++){const i=e[r];if("JOINT"===i.type){Pe(je(i.id),t,n)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",r)}for(i=0;i<t.length;i++)for(o=0;o<n.length;o++)if(a=n[o],a.bone.name===t[i].name){r[i]=a,a.processed=!0;break}for(i=0;i<n.length;i++)a=n[i],!1===a.processed&&(r.push(a),a.processed=!0);const s=[],l=[];for(i=0;i<r.length;i++)a=r[i],s.push(a.bone),l.push(a.boneInverse);return new fp(s,l)}function Pe(e,t,n){e.traverse((function(e){if(!0===e.isBone){let r;for(let n=0;n<t.length;n++){const i=t[n];if(i.name===e.name){r=i.boneInverse;break}}void 0===r&&(r=new Hs),n.push({bone:e,boneInverse:r,processed:!1})}}))}function Le(e){const t=[],n=e.matrix,r=e.nodes,i=e.type,o=e.instanceCameras,a=e.instanceControllers,s=e.instanceLights,l=e.instanceGeometries,c=e.instanceNodes;for(let h=0,d=r.length;h<d;h++)t.push(je(r[h]));for(let h=0,d=o.length;h<d;h++){const e=te(o[h]);null!==e&&t.push(e.clone())}for(let h=0,d=a.length;h<d;h++){const e=a[h],n=L(e.id),r=Ie(pe(n.id),e.materials),i=ke(e.skeletons,n.skin.joints);for(let o=0,a=r.length;o<a;o++){const e=r[o];e.isSkinnedMesh&&(e.bind(i,n.skin.bindMatrix),e.normalizeSkinWeights()),t.push(e)}}for(let h=0,d=s.length;h<d;h++){const e=oe(s[h]);null!==e&&t.push(e.clone())}for(let h=0,d=l.length;h<d;h++){const e=l[h],n=Ie(pe(e.id),e.materials);for(let r=0,i=n.length;r<i;r++)t.push(n[r])}for(let h=0,d=c.length;h<d;h++)t.push(je(c[h]).clone());let u;if(0===r.length&&1===t.length)u=t[0];else{u="JOINT"===i?new up:new Td;for(let e=0;e<t.length;e++)u.add(t[e])}return u.name="JOINT"===i?e.sid:e.name,u.matrix.copy(n),u.matrix.decompose(u.position,u.quaternion,u.scale),u}const Oe=new Dl({color:16711935});function Ne(e,t){const n=[];for(let r=0,i=e.length;r<i;r++){const i=t[e[r]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(Oe)):n.push(K(i))}return n}function Ie(e,t){const n=[];for(const r in e){const i=e[r],o=Ne(i.materialKeys,t);0===o.length&&("lines"===r||"linestrips"===r?o.push(new wp):o.push(new fm));const a=void 0!==i.data.attributes.skinIndex,s=1===o.length?o[0]:o;let l;switch(r){case"lines":l=new kp(i.data,s);break;case"linestrips":l=new Cp(i.data,s);break;case"triangles":case"polylist":l=a?new cp(i.data,s):new wc(i.data,s)}n.push(l)}return n}function De(e){return void 0!==Je.nodes[e]}function je(e){return d(Je.nodes[e],Le)}function Fe(e){const t=new Td;t.name=e.name;const n=e.children;for(let r=0;r<n.length;r++){const e=n[r];t.add(je(e.id))}return t}function ze(e){return void 0!==Je.visualScenes[e]}function Be(e){return d(Je.visualScenes[e],Fe)}if(0===e.length)return{scene:new Id};const Ue=(new DOMParser).parseFromString(e,"application/xml"),Ge=n(Ue,"COLLADA")[0],Ve=Ue.getElementsByTagName("parsererror")[0];if(void 0!==Ve){const e=n(Ve,"div")[0];let t;return t=e?e.textContent:function(e){let t="";const n=[e];for(;n.length;){const e=n.shift();e.nodeType===Node.TEXT_NODE?t+=e.textContent:(t+="\n",n.push.apply(n,e.childNodes))}return t.trim()}(Ve),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",t),null}const He=Ge.getAttribute("version");console.log("THREE.ColladaLoader: File version",He);const We=function(e){return{unit:l(n(e,"unit")[0]),upAxis:c(n(e,"up_axis")[0])}}(n(Ge,"asset")[0]),$e=new qm(this.manager);let qe;$e.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),xx&&(qe=new xx(this.manager),qe.setPath(this.resourcePath||t));const Xe=[];let Ye={},Ke=0;const Je={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};u(Ge,"library_animations","animation",(function e(t){const n={sources:{},samplers:{},channels:{}};let r=!1;for(let i=0,o=t.childNodes.length;i<o;i++){const o=t.childNodes[i];if(1!==o.nodeType)continue;let a;switch(o.nodeName){case"source":a=o.getAttribute("id"),n.sources[a]=ae(o);break;case"sampler":a=o.getAttribute("id"),n.samplers[a]=p(o);break;case"channel":a=o.getAttribute("target"),n.channels[a]=f(o);break;case"animation":e(o),r=!0;break;default:console.log(o)}}!1===r&&(Je.animations[t.getAttribute("id")||Ya.generateUUID()]=n)})),u(Ge,"library_animation_clips","animation_clip",(function(e){const t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"instance_animation"===r.nodeName)t.animations.push(a(r.getAttribute("url")))}Je.clips[e.getAttribute("id")]=t})),u(Ge,"library_controllers","controller",(function(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"skin":t.id=a(r.getAttribute("source")),t.skin=A(r);break;case"morph":t.id=a(r.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Je.controllers[e.getAttribute("id")]=t})),u(Ge,"library_images","image",(function(e){const t={init_from:n(e,"init_from")[0].textContent};Je.images[e.getAttribute("id")]=t})),u(Ge,"library_effects","effect",(function(e){const t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"profile_COMMON"===r.nodeName)t.profile=I(r)}Je.effects[e.getAttribute("id")]=t})),u(Ge,"library_materials","material",(function(e){const t={name:e.getAttribute("name")};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"instance_effect"===r.nodeName)t.url=a(r.getAttribute("url"))}Je.materials[e.getAttribute("id")]=t})),u(Ge,"library_cameras","camera",(function(e){const t={name:e.getAttribute("name")};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"optics"===r.nodeName)t.optics=J(r)}Je.cameras[e.getAttribute("id")]=t})),u(Ge,"library_lights","light",(function(e){let t={};for(let n=0,r=e.childNodes.length;n<r;n++){const r=e.childNodes[n];if(1===r.nodeType&&"technique_common"===r.nodeName)t=ne(r)}Je.lights[e.getAttribute("id")]=t})),u(Ge,"library_geometries","geometry",(function(e){const t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(let e=0;e<r.childNodes.length;e++){const n=r.childNodes[e];if(1!==n.nodeType)continue;const i=n.getAttribute("id");switch(n.nodeName){case"source":t.sources[i]=ae(n);break;case"vertices":t.vertices=se(n);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",n.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(le(n));break;default:console.log(n)}}Je.geometries[e.getAttribute("id")]=t}})),u(Ge,"library_nodes","node",Ae),u(Ge,"library_visual_scenes","visual_scene",(function(e){const t={name:e.getAttribute("name"),children:[]};!function(e){const t=e.getElementsByTagName("node");for(let n=0;n<t.length;n++){const e=t[n];!1===e.hasAttribute("id")&&e.setAttribute("id","three_default_"+Ke++)}}(e);const r=n(e,"node");for(let n=0;n<r.length;n++)t.children.push(Ae(r[n]));Je.visualScenes[e.getAttribute("id")]=t})),u(Ge,"library_kinematics_models","kinematics_model",(function(e){const t={name:e.getAttribute("name")||"",joints:{},links:[]};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType&&"technique_common"===r.nodeName)me(r,t)}Je.kinematicsModels[e.getAttribute("id")]=t})),u(Ge,"library_physics_models","physics_model",(function(e){const t={name:e.getAttribute("name")||"",rigidBodies:{}};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType&&"rigid_body"===r.nodeName)t.rigidBodies[r.getAttribute("name")]={},we(r,t.rigidBodies[r.getAttribute("name")])}Je.physicsModels[e.getAttribute("id")]=t})),u(Ge,"scene","instance_kinematics_scene",(function(e){const t={bindJointAxis:[]};for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(1===r.nodeType&&"bind_joint_axis"===r.nodeName)t.bindJointAxis.push(Se(r))}Je.kinematicsScenes[a(e.getAttribute("url"))]=t})),h(Je.animations,m),h(Je.clips,E),h(Je.controllers,P),h(Je.images,O),h(Je.effects,X),h(Je.materials,Y),h(Je.cameras,ee),h(Je.lights,ie),h(Je.geometries,ue),h(Je.visualScenes,Fe),function(){const e=Je.clips;if(!0===s(e)){if(!1===s(Je.animations)){const e=[];for(const t in Je.animations){const n=g(t);for(let t=0,r=n.length;t<r;t++)e.push(n[t])}Xe.push(new Nm("default",-1,e))}}else for(const t in e)Xe.push(C(t))}(),function(){const e=Object.keys(Je.kinematicsModels)[0],t=Object.keys(Je.kinematicsScenes)[0],n=Object.keys(Je.visualScenes)[0];if(void 0===e||void 0===t)return;const r=function(e){return d(Je.kinematicsModels[e],fe)}(e),i=function(e){return d(Je.kinematicsScenes[e],Me)}(t),o=Be(n),a=i.bindJointAxis,s={};for(let u=0,h=a.length;u<h;u++){const e=a[u],t=Ge.querySelector('[sid="'+e.target+'"]');if(t){const n=t.parentElement;l(e.jointIndex,n)}}function l(e,t){const n=t.getAttribute("name"),i=r.joints[e];o.traverse((function(r){r.name===n&&(s[e]={object:r,transforms:Te(t),joint:i,position:i.zeroPosition})}))}const c=new Hs;Ye={joints:r&&r.joints,getJointValue:function(e){const t=s[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){const n=s[e];if(n){const r=n.joint;if(t>r.limits.max||t<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{const i=n.object,o=r.axis,a=n.transforms;Ee.identity();for(let n=0;n<a.length;n++){const i=a[n];if(i.sid&&-1!==i.sid.indexOf(e))switch(r.type){case"revolute":Ee.multiply(c.makeRotationAxis(o,Ya.degToRad(t)));break;case"prismatic":Ee.multiply(c.makeTranslation(o.x*t,o.y*t,o.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type)}else switch(i.type){case"matrix":Ee.multiply(i.obj);break;case"translate":Ee.multiply(c.makeTranslation(i.obj.x,i.obj.y,i.obj.z));break;case"scale":Ee.scale(i.obj);break;case"rotate":Ee.multiply(c.makeRotationAxis(i.obj,i.angle))}}i.matrix.copy(Ee),i.matrix.decompose(i.position,i.quaternion,i.scale),s[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}();const Qe=function(e){return Be(a(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(Ge,"scene")[0]);return Qe.animations=Xe,"Z_UP"===We.upAxis&&Qe.quaternion.setFromEuler(new el(-Math.PI/2,0,0)),Qe.scale.multiplyScalar(We.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Xe},kinematics:Ye,library:Je,scene:Qe}}}class _x extends ml{constructor(){super(...arguments),this.urdfNode=null,this.urdfName=""}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class Sx extends _x{constructor(){super(...arguments),this.isURDFCollider=!0,this.type="URDFCollider"}}class Mx extends _x{constructor(){super(...arguments),this.isURDFVisual=!0,this.type="URDFVisual"}}class Tx extends _x{constructor(){super(...arguments),this.isURDFLink=!0,this.type="URDFLink"}}class Ex extends _x{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(2).fill(0);break;case"floating":this.jointValue=new Array(6).fill(0)}}get angle(){return this.jointValue[0]}constructor(){super(...arguments),this.isURDFJoint=!0,this.type="URDFJoint",this.jointValue=null,this.jointType="fixed",this.axis=new ps(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.map((e=>parseFloat(e))),this.origPosition&&this.origQuaternion||(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let r=!1;switch(this.mimicJoints.forEach((e=>{r=e.updateFromMimickedJoint(...t)||r})),this.jointType){case"fixed":return r;case"continuous":case"revolute":{let e=t[0];return null==e||e===this.jointValue[0]?r:(this.ignoreLimits||"revolute"!==this.jointType||(e=Math.min(this.limit.upper,e),e=Math.max(this.limit.lower,e)),this.quaternion.setFromAxisAngle(this.axis,e).premultiply(this.origQuaternion),this.jointValue[0]!==e?(this.jointValue[0]=e,this.matrixWorldNeedsUpdate=!0,!0):r)}case"prismatic":{let e=t[0];return null==e||e===this.jointValue[0]?r:(this.ignoreLimits||(e=Math.min(this.limit.upper,e),e=Math.max(this.limit.lower,e)),this.position.copy(this.origPosition),this.position.addScaledVector(this.axis,e),this.jointValue[0]!==e?(this.jointValue[0]=e,this.matrixWorldNeedsUpdate=!0,!0):r)}case"floating":case"planar":console.warn("'".concat(this.jointType,"' joint not yet supported"))}return r}}class Cx extends Ex{constructor(){super(...arguments),this.type="URDFMimicJoint",this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map((e=>e*this.multiplier+this.offset));return super.setJointValue(...r)}setJointValue(){return console.warn('URDFMimicJoint: Setting the joint value of mimic joint "'.concat(this.urdfName,'" will cause it to be out of sync.')),super.setJointValue(...arguments)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class Ax extends Tx{constructor(){super(...arguments),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){return super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse((t=>{t.isURDFJoint&&t.urdfName in e.joints&&(this.joints[t.urdfName]=t),t.isURDFLink&&t.urdfName in e.links&&(this.links[t.urdfName]=t),t.isURDFCollider&&t.urdfName in e.colliders&&(this.colliders[t.urdfName]=t),t.isURDFVisual&&t.urdfName in e.visual&&(this.visual[t.urdfName]=t)})),this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e){const t=this.joints[e];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.setJointValue(...r)}return!1}setJointValues(e){let t=!1;for(const n in e){const r=e[n];t=Array.isArray(r)?this.setJointValue(n,...r)||t:this.setJointValue(n,r)||t}return t}}const Rx=new ds,kx=new el;function Px(e){return e?e.trim().split(/\s+/g).map((e=>parseFloat(e))):[0,0,0]}function Lx(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||e.rotation.set(0,0,0),kx.set(t[0],t[1],t[2],"ZYX"),Rx.setFromEuler(kx),Rx.multiply(e.quaternion),e.quaternion.copy(Rx)}class Ox{constructor(e){this.manager=e||Fm,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={}}loadAsync(e){return new Promise(((t,n)=>{this.load(e,t,null,n)}))}load(e,t,n,r){const i=this.manager,o=fg.extractUrlBase(e),a=this.manager.resolveURL(e);i.itemStart(a),fetch(a,this.fetchOptions).then((e=>{if(e.ok)return n&&n(null),e.text();throw new Error("URDFLoader: Failed to load url '".concat(a,"' with error code ").concat(e.status," : ").concat(e.statusText,"."))})).then((e=>{""===this.workingPath&&(this.workingPath=o);const n=this.parse(e);t(n),i.itemEnd(a)})).catch((e=>{r?r(e):console.error("URDFLoader: Error loading file.",e),i.itemError(a),i.itemEnd(a)}))}parse(e){const t=this.packages,n=this.loadMeshCb,r=this.parseVisual,i=this.parseCollision,o=this.workingPath,a=this.manager,s={},l={},c={};function u(e){if(!/^package:\/\//.test(e))return o?o+e:e;const[n,r]=e.replace(/^package:\/\//,"").split(/\/(.+)/);return"string"===typeof t?t.endsWith(n)?t+"/"+r:t+"/"+n+"/"+r:t instanceof Function?t(n)+"/"+r:"object"===typeof t?n in t?t[n]+"/"+r:(console.error("URDFLoader : ".concat(n," not found in provided package list.")),null):void 0}function h(e){const t=[...e.children],n=new fm;return n.name=e.getAttribute("name")||"",t.forEach((e=>{const t=e.nodeName.toLowerCase();if("color"===t){const t=e.getAttribute("rgba").split(/\s/g).map((e=>parseFloat(e)));n.color.setRGB(t[0],t[1],t[2]),n.opacity=t[3],n.transparent=t[3]<1,n.depthWrite=!n.transparent}else if("texture"===t){const t=e.getAttribute("filename");if(t){const e=new qm(a),r=u(t);n.map=e.load(r)}}})),n}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="collision"===e.nodeName.toLowerCase(),i=[...e.children];let o=null;const s=i.filter((e=>"material"===e.nodeName.toLowerCase()))[0];if(s){const e=s.getAttribute("name");o=e&&e in t?t[e]:h(s)}else o=new fm;const l=r?new Sx:new Mx;return l.urdfNode=e,i.forEach((e=>{const t=e.nodeName.toLowerCase();if("geometry"===t){const t=e.children[0].nodeName.toLowerCase();if("mesh"===t){const t=u(e.children[0].getAttribute("filename"));if(null!==t){const r=e.children[0].getAttribute("scale");if(r){const e=Px(r);l.scale.set(e[0],e[1],e[2])}n(t,a,((e,t)=>{t?console.error("URDFLoader: Error loading mesh.",t):e&&(e instanceof wc&&(e.material=o),e.position.set(0,0,0),e.quaternion.identity(),l.add(e))}))}}else if("box"===t){const t=new wc;t.geometry=new Sc(1,1,1),t.material=o;const n=Px(e.children[0].getAttribute("size"));t.scale.set(n[0],n[1],n[2]),l.add(t)}else if("sphere"===t){const t=new wc;t.geometry=new rm(1,30,30),t.material=o;const n=parseFloat(e.children[0].getAttribute("radius"))||0;t.scale.set(n,n,n),l.add(t)}else if("cylinder"===t){const t=new wc;t.geometry=new Vp(1,1,1,30),t.material=o;const n=parseFloat(e.children[0].getAttribute("radius"))||0,r=parseFloat(e.children[0].getAttribute("length"))||0;t.scale.set(n,r,n),t.rotation.set(Math.PI/2,0,0),l.add(t)}}else if("origin"===t){const t=Px(e.getAttribute("xyz")),n=Px(e.getAttribute("rpy"));l.position.set(t[0],t[1],t[2]),l.rotation.set(0,0,0),Lx(l,n)}})),l}return function(e){let t;if(e instanceof Document)t=[...e.children];else if(e instanceof Element)t=[e];else{t=[...(new DOMParser).parseFromString(e,"text/xml").children]}const n=t.filter((e=>"robot"===e.nodeName)).pop();return function(e){const t=[...e.children],n=t.filter((e=>"link"===e.nodeName.toLowerCase())),o=t.filter((e=>"joint"===e.nodeName.toLowerCase())),a=t.filter((e=>"material"===e.nodeName.toLowerCase())),u=new Ax;u.robotName=e.getAttribute("name"),u.urdfRobotNode=e,a.forEach((e=>{const t=e.getAttribute("name");c[t]=h(e)}));const p={},f={};n.forEach((t=>{const n=t.getAttribute("name"),o=null===e.querySelector('child[link="'.concat(n,'"]'));s[n]=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===o&&(o=new Tx);const a=[...e.children];if(o.name=e.getAttribute("name"),o.urdfName=o.name,o.urdfNode=e,r){a.filter((e=>"visual"===e.nodeName.toLowerCase())).forEach((e=>{const n=d(e,c);if(o.add(n),e.hasAttribute("name")){const r=e.getAttribute("name");n.name=r,n.urdfName=r,t[r]=n}}))}if(i){a.filter((e=>"collision"===e.nodeName.toLowerCase())).forEach((e=>{const t=d(e);if(o.add(t),e.hasAttribute("name")){const r=e.getAttribute("name");t.name=r,t.urdfName=r,n[r]=t}}))}return o}(t,p,f,o?u:null)})),o.forEach((e=>{const t=e.getAttribute("name");l[t]=function(e){const t=[...e.children],n=e.getAttribute("type");let r;const i=t.find((e=>"mimic"===e.nodeName.toLowerCase()));i?(r=new Cx,r.mimicJoint=i.getAttribute("joint"),r.multiplier=parseFloat(i.getAttribute("multiplier")||1),r.offset=parseFloat(i.getAttribute("offset")||0)):r=new Ex;r.urdfNode=e,r.name=e.getAttribute("name"),r.urdfName=r.name,r.jointType=n;let o=null,a=null,l=[0,0,0],c=[0,0,0];t.forEach((e=>{const t=e.nodeName.toLowerCase();"origin"===t?(l=Px(e.getAttribute("xyz")),c=Px(e.getAttribute("rpy"))):"child"===t?a=s[e.getAttribute("link")]:"parent"===t?o=s[e.getAttribute("link")]:"limit"===t&&(r.limit.lower=parseFloat(e.getAttribute("lower")||r.limit.lower),r.limit.upper=parseFloat(e.getAttribute("upper")||r.limit.upper))})),o.add(r),r.add(a),Lx(r,c),r.position.set(l[0],l[1],l[2]);const u=t.filter((e=>"axis"===e.nodeName.toLowerCase()))[0];if(u){const e=u.getAttribute("xyz").split(/\s+/g).map((e=>parseFloat(e)));r.axis=new ps(e[0],e[1],e[2]),r.axis.normalize()}return r}(e)})),u.joints=l,u.links=s,u.colliders=f,u.visual=p;const m=Object.values(l);return m.forEach((e=>{e instanceof Cx&&l[e.mimicJoint].mimicJoints.push(e)})),m.forEach((e=>{const t=new Set,n=e=>{if(t.has(e))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");t.add(e),e.mimicJoints.forEach((e=>{n(e)}))};n(e)})),u.frames={...f,...p,...s,...l},u}(n)}(e)}defaultMeshLoader(e,t,n){if(/\.stl$/i.test(e)){new yx(t).load(e,(e=>{const t=new wc(e,new fm);n(t)}))}else if(/\.dae$/i.test(e)){new wx(t).load(e,(e=>n(e.scene)))}else if(/\.stlX$/i.test(e)){new yx(t).load(e.replace(".stlX",""),(e=>{const t=new wc(e,new fm);n(t)}))}else if(/\.daeX$/i.test(e)){new wx(t).load(e.replace(".daeX",""),(e=>n(e.scene)))}else console.warn("URDFLoader: Could not load model at ".concat(e,".\nNo loader available"))}}let Nx={NODE_ENV:"production",PUBLIC_URL:"/MotionComparator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_API_KEY;"string"===typeof Nx&&(Nx=Nx.trim());const Ix=Nx,Dx="https://docs.google.com/",jx="https://docs.google.com/spreadsheets/d/";function Fx(e,t,n){return("boolean"===typeof n||n&&n.length>0)&&(e="".concat(e).concat(t).concat(n)),e}void 0===Ix&&console.warn("Google API key not found: Google-related functionalities will not be supported.");var zx=function(e){return e.DIMENSION_UNSPECIFIED="DIMENSION_UNSPECIFIED",e.ROWS="ROWS",e.COLUMNS="COLUMNS",e}(zx||{}),Bx=function(e){return e.FORMATTED_VALUE="FORMATTED_VALUE",e.UNFORMATTED_VALUE="UNFORMATTED_VALUE",e.FORMULA="FORMULA",e}(Bx||{}),Ux=function(e){return e.SERIAL_NUMBER="SERIAL_NUMBER",e.FORMATTED_STRING="FORMATTED_STRING",e}(Ux||{});async function Gx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="https://sheets.googleapis.com/v4/spreadsheets/".concat(e);if(r+="?key=".concat(Ix),r=Fx(r,"&includeGridData=",n),t)for(const o of t)r=Fx(r,"&ranges=",o.toA1());let i=await fetch(r);if(!i.ok){let e=await Kx(await i.blob());throw console.error("There was an error in the Google Sheets batchGet response. Response error as Text: ".concat(e)),new Error("Error fetching GSheet")}return await i.json()}function Vx(e){if(!function(e){return(e=e.trim().replace("\\","/")).startsWith(jx)}(e=e.trim().replace("\\","/")))throw new i.AssertionError({message:"URL ".concat(e," is not a url to a google spreadsheet.")});return e.slice(jx.length,e.length).split("/")[0]}const Hx=26;function Wx(e,t){e&&e<0&&(e=0),t&&t<0&&(t=0);let n="";return void 0!==t&&null!==t&&(n+=function(e){e<0&&(e=0);const t=[];let n=e;for(;n>=0;)t.unshift(String.fromCharCode(n%Hx+"A".charCodeAt(0))),n=Math.floor(n/Hx)-1;return t.join("")}(t)),void 0!==e&&null!==e&&(n+=e+1),n}function $x(e){const t=e.trim().toUpperCase().match(/([A-Z]+)([0-9]+)/);let n,r,i,o;return null===t?(n="",r=e):[,n,r]=t,o=0===n.length?null:function(e){let t=0;for(const n of e.split(""))t*=Hx,t+=n.charCodeAt(0)-"A".charCodeAt(0)+1;return t-=1,t}(n),0===r.length?i=null:(i=parseFloat(r),isNaN(i)&&(i=null)),null!==i&&i--,[i,o]}class qx{constructor(e,t,n,r,i){this._rowStart=void 0,this._rowEnd=void 0,this._colStart=void 0,this._colEnd=void 0,this._sheetName=void 0,this.setSheetName(e),this.setRowStart(t),this.setRowEnd(n),this.setColStart(r),this.setColEnd(i)}equalTo(e){return this._sheetName===e._sheetName&&this._rowStart===e._rowStart&&this._rowEnd===e._rowEnd&&this._colStart===e._colStart&&this._colEnd===e._colEnd}valid(e){if(void 0!==e)return e<0&&(e=0),e}sheetName(){return this._sheetName}setSheetName(e){this._sheetName=e}rowStart(){return this._rowStart}setRowStart(e){this._rowStart=this.valid(e)}colStart(){return this._colStart}setColStart(e){this._colStart=this.valid(e)}rowEnd(){return this._rowEnd}setRowEnd(e){this._rowEnd=this.valid(e)}colEnd(){return this._colEnd}setColEnd(e){this._colEnd=this.valid(e)}clone(){return new qx(this.sheetName(),this.rowStart(),this.rowEnd(),this.colStart(),this.colEnd())}toA1(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],[t,n,r,i]=[this._rowStart,this._rowEnd,this._colStart,this._colEnd];if(void 0!==t&&void 0!==n){let[e,r]=[t,n];t=Math.min(e,r),n=Math.max(e,r)}if(void 0!==r&&void 0!==i){let[e,t]=[r,i];r=Math.min(e,t),i=Math.max(e,t)}let o=Wx(t,r),a=Wx(n,i),s="".concat(o,":").concat(a);return":"===s&&(s=""),e&&void 0!==this._sheetName&&(s=s.length>0?"".concat(this._sheetName,"!").concat(s):"".concat(this._sheetName)),s}static fromA1(e){var t,n,r,i,o;e=e.trim();let a,s,l,c,u,h=new qx;if(u=h.sheetName(),[a,s]=[h.rowStart(),h.rowEnd()],[l,c]=[h.colStart(),h.colEnd()],-1!==e.indexOf("!")){let t;if([u,t]=e.split("!"),u=u.trim(),-1!==t.indexOf(":")){let[e,n]=t.split(":");[a,l]=$x(e),[s,c]=$x(n)}else[a,l]=$x(t)}else if(-1!==e.indexOf(":")){let[t,n]=e.split(":");[a,l]=$x(t),[s,c]=$x(n)}else u=e.trim();return h.setSheetName(null!==(t=u)&&void 0!==t?t:void 0),h.setRowStart(null!==(n=a)&&void 0!==n?n:void 0),h.setColStart(null!==(r=l)&&void 0!==r?r:void 0),h.setRowEnd(null!==(i=s)&&void 0!==i?i:void 0),h.setColEnd(null!==(o=c)&&void 0!==o?o:void 0),h}}async function Xx(e){let{spreadsheetId:t,ranges:n}=e,r=await Gx(t),o=[];for(const i of r.sheets)o.push(i.properties.title);let a=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zx.ROWS,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bx.FORMATTED_VALUE,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ux.FORMATTED_STRING,o=arguments.length>5?arguments[5]:void 0,a="https://sheets.googleapis.com/v4/spreadsheets/".concat(e,"/values:batchGet");if(a+="?key=".concat(Ix),a=Fx(a,"&majorDimension=",n),a=Fx(a,"&valueRenderOption=",r),a=Fx(a,"&dateTimeRenderOption=",i),void 0===o){o=[];let t=await Gx(e);for(const e of t.sheets){let t=e.properties.title;o.push(t)}}if(void 0===t){t=[];for(const e of o)t.push(new qx(e))}else{let e=[];for(const n of t){let t=n.sheetName();void 0!==t&&-1===o.indexOf(t)||e.push(n)}t=e}if(t)for(const l of t)a=Fx(a,"&ranges=",l.toA1());let s=await fetch(a);if(!s.ok){let e=await Kx(await s.blob());throw console.error("There was an error in the Google Sheets batchGet response. Response error as Text: ".concat(e)),new Error("Error fetching GSheet")}return await s.json()}(t,n,zx.ROWS,Bx.FORMATTED_VALUE,Ux.FORMATTED_STRING,o);if(a.spreadsheetId!==t)throw new i.AssertionError({message:'Spreadsheet data returned from gSheetsBatchGet method (with spreadsheet id:"'.concat(a.spreadsheetId,'") was not from the same spreadsheet as the one requested by loadGoogleSheetsData (spreadsheet id "').concat(t,'")')});let s=a.valueRanges,l=new Map;for(const i of s){let e=qx.fromA1(i.range),t=e.sheetName(),n=l.get(t);void 0===n&&(n={title:t,data:[]},l.set(t,n)),i.values&&n.data.push({range:e,data:i.values})}let c=[];for(const i of l.values())c.push(i);return{id:t,title:r.properties.title,sheets:c}}async function Yx(e,t){let n=await fetch(e,t);return await n.blob()}async function Kx(e){return new Promise(((t,n)=>{let r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(e)}))}async function Jx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!function(e){return(e=e.trim().replace("\\","/")).startsWith(Dx)}(e=e.trim().replace("\\","/")))throw new i.AssertionError({message:'URL "'.concat(e,'" does not appear to be from google sheets so it cannot be used to get a CSV.')});let n=Vx(e),r=await Xx({spreadsheetId:n});if(t){let e=[];for(const t of r.sheets)for(const[n,r]of oy(t.data))if(r.data){let i="GoogleSheets_".concat(t.title);t.data.length>1&&(i+="_".concat(n+1)),e.push({name:i,csv:r.data})}return e}{let e=[];for(const t of r.sheets)for(const n of t.data)n.data&&e.push(n.data);return e}}async function Qx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((e=e.trim()).startsWith("https://docs.google.com/spreadsheets/d/"))return Jx(e,t);{let n=await Yx(e),r=await Kx(n),i=Array.from(function*(e){e=e.trim();for(var t=!1,n=[],r=0,i=0;i<e.length;i++){var o=e[i],a=e[i+1];n[r]=n[r]||"",'"'===o&&t&&'"'===a?(n[r]+=o,++i):'"'===o?t=!t:","!==o||t?"\r"!==o||"\n"!==a||t?"\n"!==o&&"\r"!==o||t?n[r]+=o:(yield n,r=0,n=[]):(yield n,r=0,n=[],++i):++r}n.length&&(yield n)}(r));if(t){let t=e.replace("\\","/").trim().split("/");return[{name:t[t.length-1],csv:i}]}return[i]}}async function Zx(e,t,n){let r=await Kx(e),i=(new DOMParser).parseFromString(r,"text/xml"),o=Array.from(i.getElementsByTagName("image")),a=[];for(const s of o){let e=s.childNodes[1].innerHTML,i=n.substring(0,n.lastIndexOf("/")+1)+e;t.get(i)?t.get(i).newLink?r=r.replace(t.get(i).imageFile,t.get(i).newLink):a.push(i):(t.set(i,{imageFile:e}),a.push(i))}if(0===a.length){return tw(r)}{let e=[];for(const t of a)e.push([t,await Yx(t)]);for(const[n,i]of e){let e=URL.createObjectURL(i),o=e.substring(e.lastIndexOf("/")+1).trim();r=r.replace(t.get(n).imageFile,o),t.get(n).newLink=o}return tw(r)}}async function ew(e){let t=await Kx(e);return JSON.parse(t)}function tw(e){return new Blob([e],{type:"text/plain"})}var nw=n(8899);const rw=new TextDecoder;function iw(e){if(e.length>=50)return rw.decode(e);for(let t=0;t<e.length;t++)if(128&e[t])return rw.decode(e);return String.fromCharCode.apply(null,e)}function ow(e,t){return void 0==e&&console.warn("bigint arrays are not supported in this environment"),(n,r,i)=>{if(void 0==e)throw new Error("bigint arrays are not supported in this environment");let o=r;const a=n.byteOffset+o,s=e.BYTES_PER_ELEMENT*i,l=n.byteLength-r;if(s<0||s>l)throw new RangeError("Array(".concat(t,") deserialization error: size ").concat(s,", maxSize ").concat(l));if(a%e.BYTES_PER_ELEMENT===0)return new e(n.buffer,a,i);if(i<10){const r=new e(i);for(let a=0;a<i;++a)r[a]=n[t](o,!0),o+=e.BYTES_PER_ELEMENT;return r}const c=new Uint8Array(s);return c.set(new Uint8Array(n.buffer,a,s)),new e(c.buffer,c.byteOffset,i)}}new Map([["bool",1],["int8",1],["uint8",1],["int16",2],["uint16",2],["int32",4],["uint32",4],["int64",8],["uint64",8],["float32",4],["float64",8],["time",8],["duration",8]]);const aw={bool:(e,t)=>0!==e.getUint8(t),int8:(e,t)=>e.getInt8(t),uint8:(e,t)=>e.getUint8(t),int16:(e,t)=>e.getInt16(t,!0),uint16:(e,t)=>e.getUint16(t,!0),int32:(e,t)=>e.getInt32(t,!0),uint32:(e,t)=>e.getUint32(t,!0),int64:(e,t)=>e.getBigInt64(t,!0),uint64:(e,t)=>e.getBigUint64(t,!0),float32:(e,t)=>e.getFloat32(t,!0),float64:(e,t)=>e.getFloat64(t,!0),time:(e,t)=>({sec:e.getUint32(t,!0),nsec:e.getUint32(t+4,!0)}),duration:(e,t)=>({sec:e.getInt32(t,!0),nsec:e.getInt32(t+4,!0)}),string:(e,t)=>{const n=e.getUint32(t,!0),r=e.byteOffset+t+4,i=e.byteLength-t;if(n<0||n>i)throw new RangeError("String deserialization error: length ".concat(n,", maxLength ").concat(i));return iw(new Uint8Array(e.buffer,r,n))},boolArray:(e,t,n)=>{let r=t;const i=new Array(n);for(let o=0;o<n;++o)i[o]=aw.bool(e,r),r+=1;return i},int8Array:ow(Int8Array,"getInt8"),uint8Array:ow(Uint8Array,"getUint8"),int16Array:ow(Int16Array,"getInt16"),uint16Array:ow(Uint16Array,"getUint16"),int32Array:ow(Int32Array,"getInt32"),uint32Array:ow(Uint32Array,"getUint32"),int64Array:ow("function"===typeof BigInt64Array?BigInt64Array:void 0,"getBigInt64"),uint64Array:ow("function"===typeof BigUint64Array?BigUint64Array:void 0,"getBigUint64"),float32Array:ow(Float32Array,"getFloat32"),float64Array:ow(Float64Array,"getFloat64"),timeArray:(e,t,n)=>{let r=t;const i=new Array(n),o=e.byteOffset+r;if(o%Int32Array.BYTES_PER_ELEMENT===0){const t=new Int32Array(e.buffer,o,2*n);for(let e=0,r=0;e<n;++e,r+=2)i[e]={sec:t[r],nsec:t[r+1]}}else for(let a=0;a<n;++a)i[a]={sec:e.getInt32(r,!0),nsec:e.getInt32(r+4,!0)},r+=8;return i},durationArray:(e,t,n)=>aw.timeArray(e,t,n),fixedArray:(e,t,n,r,i)=>{let o=t;const a=new Array(n);for(let s=0;s<n;++s)a[s]=r(e,o),o+=i(e,o);return a},dynamicArray:(e,t,n,r)=>{const i=e.getUint32(t,!0);return aw.fixedArray(e,t+4,i,n,r)}};const sw=!function(){const e=new Uint8Array(4);return new Uint32Array(e.buffer)[0]=1,1===e[3]}();if(!sw)throw new Error("Only Little Endian architectures are supported");class lw{constructor(e){this.buffer=e,this.offset=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}json(){const e=this.string();try{return JSON.parse(e)}catch{return"Could not parse ".concat(e)}}string(){const e=this.uint32(),t=this.view.byteOffset+this.offset,n=this.view.byteLength-this.offset;if(e<0||e>n)throw new RangeError("String deserialization error: length ".concat(e,", maxLength ").concat(n));const r=new Uint8Array(this.view.buffer,t,e);return this.offset+=e,iw(r)}bool(){return 0!==this.uint8()}int8(){return this.view.getInt8(this.offset++)}uint8(){return this.view.getUint8(this.offset++)}typedArray(e,t){const n=void 0==e?this.uint32():e,r=this.view,i=this.offset+r.byteOffset;if(this.offset+=n*t.BYTES_PER_ELEMENT,i%t.BYTES_PER_ELEMENT===0)return new t(r.buffer,i,n);const o=t.BYTES_PER_ELEMENT*n,a=new Uint8Array(o);return a.set(new Uint8Array(r.buffer,i,o)),new t(a.buffer,a.byteOffset,n)}int16(){const e=this.view.getInt16(this.offset,!0);return this.offset+=2,e}uint16(){const e=this.view.getUint16(this.offset,!0);return this.offset+=2,e}int32(){const e=this.view.getInt32(this.offset,!0);return this.offset+=4,e}uint32(){const e=this.view.getUint32(this.offset,!0);return this.offset+=4,e}float32(){const e=this.view.getFloat32(this.offset,!0);return this.offset+=4,e}float64(){const e=this.view.getFloat64(this.offset,!0);return this.offset+=8,e}int64(){const e=this.offset;return this.offset+=8,this.view.getBigInt64(e,!0)}uint64(){const e=this.offset;return this.offset+=8,this.view.getBigUint64(e,!0)}time(){const e=this.offset;this.offset+=8;return{sec:this.view.getUint32(e,!0),nsec:this.view.getUint32(e+4,!0)}}duration(){const e=this.offset;this.offset+=8;return{sec:this.view.getInt32(e,!0),nsec:this.view.getInt32(e+4,!0)}}}const cw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";const r=e.filter((e=>{var r;const i=null!==(r=e.name)&&void 0!==r?r:"";if(!t)return!i;const o=t.includes("/")?t:"/".concat(t);return!!i.endsWith(o)&&(n=i,!0)}));if(1!==r.length)throw new Error("Expected 1 top level type definition for '".concat(t,"' but found ").concat(r.length,"."));return{...r[0],name:n}},uw=e=>e.replace(/\//g,"_");class hw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.reader=(e=>{let{definitions:t,options:n={},topLevelReaderKey:r}=e;if(0===t.length)throw new Error("no types given");const i=t.filter((e=>!e.name));if(i.length>1)throw new Error("multiple unnamed types");const o=i.length>0?i[0]:t[0],a=t.filter((e=>!!e.name)),s=e=>{const r=[];return e.definitions.forEach((e=>{if(!0!==e.isConstant)if(!0===e.isArray){const n=function(e){switch(e){case"int8":return"Int8Array";case"uint8":return"Uint8Array";case"int16":return"Int16Array";case"uint16":return"Uint16Array";case"int32":return"Int32Array";case"uint32":return"Uint32Array";case"int64":return"BigInt64Array";case"uint64":return"BigUint64Array";case"float32":return"Float32Array";case"float64":return"Float64Array";default:return}}(e.type);if(void 0!=n)return void r.push("this.".concat(e.name," = reader.typedArray(").concat(String(e.arrayLength),", ").concat(n,");"));const i="length_".concat(e.name);r.push("var ".concat(i," = ").concat(void 0!=e.arrayLength?e.arrayLength:"reader.uint32();"));const o="this.".concat(e.name);if(r.push("".concat(o," = new Array(").concat(i,")")),r.push("for (var i = 0; i < ".concat(i,"; i++) {")),!0===e.isComplex){const n=cw(t,e.type);r.push("  ".concat(o,"[i] = new Record.").concat(uw(n.name),"(reader);"))}else r.push("  ".concat(o,"[i] = reader.").concat(e.type,"();"));r.push("}")}else if(!0===e.isComplex){const n=cw(t,e.type);r.push("this.".concat(e.name," = new Record.").concat(uw(n.name),"(reader);"))}else r.push("this.".concat(e.name," = reader.").concat(e.type,"();"))})),!0===n.freeze&&r.push("Object.freeze(this);"),r.join("\n    ")};let l="\n  const builtReaders = new Map();\n  var Record = function (reader) {\n    ".concat(s(o),"\n  };\n  builtReaders.set(topLevelReaderKey, Record);\n  ");for(const c of a)l+="\n  Record.".concat(uw(c.name)," = function(reader) {\n    ").concat(s(c),"\n  };\n  builtReaders.set(").concat(JSON.stringify(c.name),", Record.").concat(uw(c.name),");\n  ");return l+="return builtReaders;",new Function("topLevelReaderKey",l)(r)})({definitions:e,options:t,topLevelReaderKey:"<toplevel>"}).get("<toplevel>")}readMessage(e){const t=new lw(e);return new this.reader(t)}}var dw=n(3277);const pw="=".charCodeAt(0);function fw(e){if(e.length<4)throw new Error("fields are truncated.");const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const r={};for(;n<e.length;){const i=t.getInt32(n,!0);if(n+=4,n+i>e.length)throw new Error("Header fields are corrupt.");const o=e.subarray(n,n+i),a=o.indexOf(pw);if(-1===a)throw new Error("Header field is missing equals sign.");r[(new TextDecoder).decode(o.subarray(0,a))]=o.subarray(a+1),n+=i}return r}function mw(e,t){const n=new DataView(e.buffer,e.byteOffset,e.byteLength);return{sec:n.getUint32(t,!0),nsec:n.getUint32(t+4,!0)}}var gw=n(8378),vw=n.n(gw);const bw=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=new(vw())(((t,n)=>e(t.value,n.value)));for(let o=0;o<n.length;o++){const e=n[o].next();!0!==e.done&&i.push({i:o,value:e.value})}return{next:()=>{if(i.empty())return{done:!0,value:void 0};const{i:e}=i.front(),t=n[e].next();return!0===t.done?{value:i.pop().value,done:!1}:{value:i.replace({i:e,value:t.value}).value,done:!1}}}};function yw(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)}function xw(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).getInt32(0,!0)}function ww(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=BigInt(t.getUint32(0,!0))|BigInt(t.getUint32(4,!0))<<32n;if(n>Number.MAX_SAFE_INTEGER)throw new Error("Read a bigint larger than 2**53: ".concat(n));return Number(n)}class _w{parseData(e){}}class Sw extends _w{constructor(e){super(),this.indexPosition=ww(e.index_pos),this.connectionCount=xw(e.conn_count),this.chunkCount=xw(e.chunk_count)}}Sw.opcode=3;class Mw extends _w{constructor(e){super(),this.compression=(new TextDecoder).decode(e.compression),this.size=yw(e.size)}parseData(e){this.data=e}}Mw.opcode=5;const Tw=(e,t)=>{if(void 0==e[t])throw new Error("Connection header is missing ".concat(t,"."));return(new TextDecoder).decode(e[t])};class Ew extends _w{constructor(e){super(),this.conn=yw(e.conn),this.topic=(new TextDecoder).decode(e.topic),this.type=void 0,this.md5sum=void 0,this.messageDefinition=""}parseData(e){const t=fw(e);this.type=Tw(t,"type"),this.md5sum=Tw(t,"md5sum"),this.messageDefinition=Tw(t,"message_definition"),void 0!=t.callerid&&(this.callerid=(new TextDecoder).decode(t.callerid)),void 0!=t.latching&&(this.latching="1"===(new TextDecoder).decode(t.latching))}}Ew.opcode=7;class Cw extends _w{constructor(e){super(),this.conn=yw(e.conn),this.time=mw(e.time,0)}parseData(e){this.data=e}}Cw.opcode=2;class Aw extends _w{constructor(e){super(),this.ver=yw(e.ver),this.conn=yw(e.conn),this.count=yw(e.count)}parseData(e){this.indices=[];const t=new DataView(e.buffer,e.byteOffset,e.byteLength);for(let n=0;n<this.count;n++)this.indices.push({time:mw(e,12*n),offset:t.getUint32(12*n+8,!0)})}}Aw.opcode=4;class Rw extends _w{constructor(e){super(),this.connections=[],this.ver=yw(e.ver),this.chunkPosition=ww(e.chunk_pos),this.startTime=mw(e.start_time,0),this.endTime=mw(e.end_time,0),this.count=yw(e.count)}parseData(e){this.connections=[];const t=new DataView(e.buffer,e.byteOffset,e.byteLength);for(let n=0;n<this.count;n++)this.connections.push({conn:t.getUint32(8*n,!0),count:t.getUint32(8*n+4,!0)})}}Rw.opcode=6;const kw=!0;class Pw{constructor(e){this._file=e}async verifyBagHeader(){const e=await this._file.read(0,13);if("#ROSBAG V2.0\n"!==(new TextDecoder).decode(e))throw new Error("Cannot identify bag format.")}async readHeader(){await this.verifyBagHeader();const e=await this._file.read(13,4096),t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=e.length;if(n<8)throw new Error("Record at position ".concat(13," is truncated."));const r=t.getInt32(0,kw);if(n<r+8)throw new Error("Record at position ".concat(13," header too large: ").concat(r,"."));return this.readRecordFromBuffer(e,13,Sw)}async readConnectionsAndChunkInfo(e,t,n){const r=await this._file.read(e,this._file.size()-e);if(0===t)return{connections:[],chunkInfos:[]};const i=this.readRecordsFromBuffer(r,t,e,Ew),o=i[t-1].end-i[0].offset,a=this.readRecordsFromBuffer(r.subarray(o),n,e+o,Rw);if(n>0){for(let e=0;e<n-1;e++)a[e].nextChunk=a[e+1];a[n-1].nextChunk=void 0}return{connections:i,chunkInfos:a}}async readChunkMessages(e,t,n,r,i){const o=null!==n&&void 0!==n?n:{sec:0,nsec:0},a=null!==r&&void 0!==r?r:{sec:Number.MAX_VALUE,nsec:Number.MAX_VALUE},s=null!==t&&void 0!==t?t:e.connections.map((e=>e.conn)),l=await this.readChunk(e,i),c=l.chunk,u={};l.indices.forEach((e=>{u[e.conn]=e}));const h=s.filter((e=>void 0!=u[e])).map((e=>u[e].indices[Symbol.iterator]())),d=bw(((e,t)=>(0,dw.compare)(e.time,t.time)),...h),p=[];let f=d.next();for(;!0!==f.done;){const{value:e}=f;if(f=d.next(),null!=e&&!(0,dw.isGreaterThan)(o,e.time)){if((0,dw.isGreaterThan)(e.time,a))break;p.push(e)}}return p.map((e=>this.readRecordFromBuffer(c.data.subarray(e.offset),c.dataOffset,Cw)))}async readChunk(e,t){if(e===this._lastChunkInfo&&null!=this._lastReadResult)return this._lastReadResult;const{nextChunk:n}=e,r=null!=n?n.chunkPosition-e.chunkPosition:this._file.size()-e.chunkPosition,i=await this._file.read(e.chunkPosition,r),o=this.readRecordFromBuffer(i,e.chunkPosition,Mw),{compression:a}=o;if("none"!==a){const e=t[a];if(null==e)throw new Error("Unsupported compression type ".concat(o.compression));const n=e(o.data,o.size);o.data=n}const s=this.readRecordsFromBuffer(i.subarray(o.length),e.count,e.chunkPosition+o.length,Aw);return this._lastChunkInfo=e,this._lastReadResult={chunk:o,indices:s},this._lastReadResult}readRecordsFromBuffer(e,t,n,r){const i=[];let o=0;for(let a=0;a<t;a++){const t=this.readRecordFromBuffer(e.subarray(o),n+o,r);o+=t.end-t.offset,i.push(t)}return i}readRecordFromBuffer(e,t,n){const r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=r.getInt32(0,kw),o=fw(e.subarray(4,4+i));if(void 0==o.op)throw new Error("Record is missing 'op' field.");const a=new DataView(o.op.buffer,o.op.byteOffset,o.op.byteLength).getUint8(0);if(a!==n.opcode)throw new Error("Expected ".concat(n.name," (").concat(n.opcode,") but found ").concat(a));const s=new n(o),l=4+i+4,c=r.getInt32(4+i,kw),u=new Uint8Array(e.buffer.slice(e.byteOffset+l,e.byteOffset+l+c));return s.parseData(u),s.offset=t,s.dataOffset=s.offset+4+i+4,s.end=s.dataOffset+c,s.length=s.end-s.offset,s}}class Lw{constructor(e,t){if(this.cachedChunkReadResults=new Map,this.connections=e.connections,this.reader=e.reader,this.position=e.position,this.decompress=e.decompress,this.reader=e.reader,this.chunkInfos=e.chunkInfos,this.heap=new(vw())(t),this.parse=e.parse,e.topics){const t=e.topics,n=this.connectionIds=new Set;for(const[r,i]of e.connections)t.includes(i.topic)&&this.connectionIds.add(r);this.chunkInfos=e.chunkInfos.filter((e=>e.connections.find((e=>n.has(e.conn)))))}}async*[Symbol.asyncIterator](){for(;;){for(var e;!this.heap.front();){if(!await this.loadNext())return}const t=this.heap.pop();if(!t)return;const n=t.chunkReadResult.chunk,r=this.reader.readRecordFromBuffer(n.data.subarray(t.offset),n.dataOffset,Cw),i=this.connections.get(r.conn);if(!i)throw new Error("Unable to find connection with id ".concat(r.conn));const{topic:o}=i,{data:a,time:s}=r;if(!a)throw new Error("No data in message for topic: ".concat(o));const l={topic:o,connectionId:r.conn,timestamp:s,data:a,message:null===(e=this.parse)||void 0===e?void 0:e.call(this,a,i)};yield l}}}class Ow extends Lw{constructor(e){super(e,((e,t)=>(0,dw.compare)(e.time,t.time))),this.chunkInfos=this.chunkInfos.filter((e=>(0,dw.compare)(e.endTime,this.position)>=0));const t=new(vw())(((e,t)=>(0,dw.compare)(e.startTime,t.startTime)));for(const n of this.chunkInfos)t.insert(n);for(this.remainingChunkInfos=[];t.size()>0;)this.remainingChunkInfos.push(t.pop())}async loadNext(){const e=this.position,t=this.remainingChunkInfos[0];if(!t)return!1;this.remainingChunkInfos[0]=void 0;let n=t.endTime;const r=[t];for(let s=1;s<this.remainingChunkInfos.length;++s){const e=this.remainingChunkInfos[s];if(!e)continue;if((0,dw.compare)(e.startTime,n)>0)break;r.push(e);(0,dw.compare)(e.endTime,n)<=0&&(this.remainingChunkInfos[s]=void 0)}if(this.remainingChunkInfos=this.remainingChunkInfos.filter(Boolean),0===r.length)return!1;this.position=n=(0,dw.add)(n,{sec:0,nsec:1});const i=this.heap,o=new Map;for(const s of r){let t=this.cachedChunkReadResults.get(s.chunkPosition);t||(t=await this.reader.readChunk(s,this.decompress)),(0,dw.compare)(s.startTime,n)<=0&&(0,dw.compare)(s.endTime,n)>=0&&o.set(s.chunkPosition,t);for(const r of t.indices)if(!this.connectionIds||this.connectionIds.has(r.conn))for(const o of null!==(a=r.indices)&&void 0!==a?a:[]){var a;(0,dw.compare)(o.time,e)<0||(0,dw.compare)(o.time,n)>=0||i.push({time:o.time,offset:o.offset,chunkReadResult:t})}}return this.cachedChunkReadResults=o,!0}}class Nw{constructor(e,t,n,r,i,o,a){this.topic=e,this.message=t,this.timestamp=n,this.data=r,this.chunkOffset=i,this.totalChunks=o,!0===a&&(Object.freeze(n),Object.freeze(this))}}class Iw extends Lw{constructor(e){super(e,((e,t)=>(0,dw.compare)(t.time,e.time))),this.chunkInfos=this.chunkInfos.filter((e=>(0,dw.compare)(e.startTime,this.position)<=0));const t=new(vw())(((e,t)=>(0,dw.compare)(t.endTime,e.endTime)));for(const n of this.chunkInfos)t.insert(n);for(this.remainingChunkInfos=[];t.size()>0;)this.remainingChunkInfos.push(t.pop())}async loadNext(){const e=this.position,t=this.remainingChunkInfos[0];if(!t)return!1;this.remainingChunkInfos[0]=void 0;let n=t.startTime;const r=[t];for(let s=1;s<this.remainingChunkInfos.length;++s){const e=this.remainingChunkInfos[s];if(!e)continue;if((0,dw.compare)(e.endTime,n)<0)break;r.push(e);(0,dw.compare)(e.startTime,n)>=0&&(this.remainingChunkInfos[s]=void 0)}if(this.remainingChunkInfos=this.remainingChunkInfos.filter(Boolean),0===r.length)return!1;this.position=n=(0,dw.subtract)(n,{sec:0,nsec:1});const i=this.heap,o=new Map;for(const s of r){let t=this.cachedChunkReadResults.get(s.chunkPosition);t||(t=await this.reader.readChunk(s,this.decompress)),(0,dw.compare)(s.startTime,n)<=0&&(0,dw.compare)(s.endTime,n)>=0&&o.set(s.chunkPosition,t);for(const r of t.indices)if(!this.connectionIds||this.connectionIds.has(r.conn))for(const o of null!==(a=r.indices)&&void 0!==a?a:[]){var a;(0,dw.compare)(o.time,n)<=0||(0,dw.compare)(o.time,e)>0||i.push({time:o.time,offset:o.offset,chunkReadResult:t})}}return this.cachedChunkReadResults=o,!0}}class Dw{constructor(e,t){this.chunkInfos=[],this.reader=new Pw(e),this.connections=new Map,this.bagOpt=null!==t&&void 0!==t?t:{}}async open(){this.header=await this.reader.readHeader();const{connectionCount:e,chunkCount:t,indexPosition:n}=this.header,r=await this.reader.readConnectionsAndChunkInfo(n,e,t);this.connections=new Map,r.connections.forEach((e=>{this.connections.set(e.conn,e)})),this.chunkInfos=r.chunkInfos,t>0&&(this.startTime=this.chunkInfos[0].startTime,this.endTime=this.chunkInfos[t-1].endTime)}messageIterator(e){const t=null===e||void 0===e?void 0:e.topics;let n;if(!1!==this.bagOpt.parse&&(n=(e,t)=>{var n;return null!==(n=t.reader)&&void 0!==n||(t.reader=new hw((0,nw.parse)(t.messageDefinition))),t.reader.readMessage(e)}),!0===(null===e||void 0===e?void 0:e.reverse)){var r,i;const o=null!==(r=null===e||void 0===e?void 0:e.start)&&void 0!==r?r:this.endTime;if(!o)throw new Error("no timestamp");return new Iw({position:o,topics:t,reader:this.reader,connections:this.connections,chunkInfos:this.chunkInfos,decompress:null!==(i=this.bagOpt.decompress)&&void 0!==i?i:{},parse:n})}{var o,a;const r=null!==(o=null===e||void 0===e?void 0:e.start)&&void 0!==o?o:this.startTime;if(!r)throw new Error("no timestamp");return new Ow({position:r,topics:t,reader:this.reader,chunkInfos:this.chunkInfos,connections:this.connections,decompress:null!==(a=this.bagOpt.decompress)&&void 0!==a?a:{},parse:n})}}async readMessages(e,t){var n,r,i;const o=this.connections,a=null!==(n=e.startTime)&&void 0!==n?n:{sec:0,nsec:0},s=null!==(r=e.endTime)&&void 0!==r?r:{sec:Number.MAX_VALUE,nsec:Number.MAX_VALUE},l=null!==(i=e.topics)&&void 0!==i?i:[...o.values()].map((e=>e.topic)),c=[...o.values()].filter((e=>l.includes(e.topic))).map((e=>e.conn)),{decompress:u={}}=e,h=this.chunkInfos.filter((e=>(0,dw.compare)(e.startTime,s)<=0&&(0,dw.compare)(a,e.endTime)<=0));function d(t,n){const r=o.get(t.conn);if(null==r)throw new Error("Unable to find connection with id ".concat(t.conn));const{topic:i}=r,{data:a,time:s}=t;if(null==a)throw new Error("No data in message for topic: ".concat(i));let l=null;var c;!0!==e.noParse&&(r.reader=null!==(c=r.reader)&&void 0!==c?c:new hw((0,nw.parse)(r.messageDefinition),{freeze:e.freeze}),l=r.reader.readMessage(a));return new Nw(i,l,s,a,n,h.length,e.freeze)}for(let p=0;p<h.length;p++){const e=h[p];(await this.reader.readChunkMessages(e,c,a,s,u)).forEach((e=>t(d(e,p))))}}}var jw=n(4923);function Fw(e){var t,n,r,i,o;let a,s=null!==(t=e.position)&&void 0!==t?t:{x:0,y:0,z:0},l=new Bb.Vector3(null!==(n=s.x)&&void 0!==n?n:0,null!==(r=s.y)&&void 0!==r?r:0,null!==(i=s.z)&&void 0!==i?i:0),c=null!==(o=e.rotation)&&void 0!==o?o:{x:0,y:0,z:0,w:0};a=void 0===c.w?(new Bb.Quaternion).setFromEuler(new Bb.Euler(c.x,c.y,c.z)):new Bb.Quaternion(c.x,c.y,c.z,c.w);let[u,h]=function(e,t){var n,r,i,o;let a=new Bb.Quaternion(null!==(n=e.x)&&void 0!==n?n:0,null!==(r=e.y)&&void 0!==r?r:0,null!==(i=e.z)&&void 0!==i?i:0,null!==(o=e.w)&&void 0!==o?o:0),s=new Bb.Vector3,l=0;{let e=a.w*a.w;l=2*Math.acos(a.w),s.x=a.x/Math.max(Math.sqrt(1-e),1e-8),s.y=a.y/Math.max(Math.sqrt(1-e),1e-8),s.z=a.z/Math.max(Math.sqrt(1-e),1e-8);let t=new Bb.Vector3;t.z=s.x,t.x=s.y,t.y=s.z;let n=new Bb.Quaternion;n.setFromAxisAngle(t,l),a.copy(n)}let c=t.clone();{var u,h,d;let e=c.x,t=c.y,n=c.z;c.y=n,c.z=t,c.x=e?-e:e;let r=new Bb.Vector3(null!==(u=c.x)&&void 0!==u?u:0,null!==(h=c.y)&&void 0!==h?h:0,null!==(d=c.z)&&void 0!==d?d:0);r.applyEuler(new Bb.Euler(0,Math.PI/2,0)),c.x=r.x,c.y=r.y,c.z=r.z}return[a,c]}(a,l);return e.rotation={x:u.x,y:u.y,z:u.z,w:u.w},e.position={x:h.x,y:h.y,z:h.z},e}const[zw,Bw,Uw]=["X_POS","Y_POS","Z_POS"],[Gw,Vw,Hw,Ww]=["X_ROT","Y_ROT","Z_ROT","W_ROT"],[$w,qw,Xw]=["X_SCL","Y_SCL","Z_SCL"],Yw=new Map;let Kw={X_POS:["RPOSX","POS_X","X_POS"],Y_POS:["RPOSY","POS_Y","Y_POS"],Z_POS:["RPOSZ","POS_Z","Z_POS"],X_ROT:["RROTX","ROT_X","RX","QX","X_ROT"],Y_ROT:["RROTY","ROT_Y","RY","QY","Y_ROT"],Z_ROT:["RROTZ","ROT_Z","RZ","QZ","Z_ROT"],W_ROT:["RROTW","ROT_W","RW","QW","W_ROT"],X_SCL:["RSCLX","SCALE_X","X_SCALE","X_SCL"],Y_SCL:["RSCLY","SCALE_Y","Y_SCALE","Y_SCL"],Z_SCL:["RSCLZ","SCALE_Z","Z_SCALE","Z_SCL"]};for(const n in Kw)for(const e of Kw[n])Yw.set(e,n);function Jw(e,t,n){return e&&0!==e.length?t<=0?e[0]:t>=e.length-1?e[e.length-1]:e[t]:n}function Qw(e){return ir.error("Failed to turn a CSV into an animation table: ".concat(e)),new i.AssertionError({message:"Failed to turn a CSV into an animation table: ".concat(e)})}class Zw{constructor(e,t,n){this._url=void 0,this._name=void 0,this._id=void 0,this._angleMap=void 0,this._descMap=void 0,this._timeTable=void 0,this._robotNames=void 0,this.fromGazebo=void 0,this._name=null!==e&&void 0!==e?e:"Unnamed Animation",this._name=this._name.trim(),this._id=new yy(t),this._url=n,this._angleMap=new Map,this._descMap=new Map,this._timeTable=[],this._robotNames=new Set,this.fromGazebo=!1}descMap(){return this._descMap}setDescMap(e){this._descMap=e}angleMap(){return this._angleMap}setAngleMap(e){this._angleMap=e}robotNames(){return this._robotNames}setName(e){this._name=e,ir.updateUI()}name(){return this._name}id(){return this._id}idValue(){return this._id.value()}url(){return this._url}static async loadFromLocalFile(e,t){let n=await this.loadFromURL(URL.createObjectURL(e),t);for(const r of n)r.setName(e.name);return n}static async loadFromURL(e,t){try{ir.setPopupHelpPage({page:Xn.LoadingStarted,type:"csv"});let n=await Qx(e,!0),r=[];for(const{name:e,csv:t}of n){let n=Zw.fromCSV(t);if(n instanceof i.AssertionError)throw n;n.setName(e),r.push(n)}if(ir.setPopupHelpPage({page:Xn.LoadingSuccess,type:"csv"}),void 0!==t){const e="CSV Loaded Successfully!",n=document.createElement("p");n.innerText=e,n.classList.add("LoadCSVMessage");const r=document.querySelector("."+t);null===r||void 0===r||r.appendChild(n)}return r}catch(n){if(ir.setPopupHelpPage({page:Xn.LoadingFailed,type:"csv"}),void 0!==t){const e="Error loading csv: "+n,r=document.createElement("p");r.innerText=e,r.style.color="red",r.classList.add("LoadCSVMessage");const i=document.querySelector("."+t);null===i||void 0===i||i.appendChild(r)}throw n}}static async parseRosbag(e,t,n){try{ir.setPopupHelpPage({page:Xn.LoadingStarted,type:"rosbag"});const s=new jw.BlobReader(t),l=new Dw(s);await l.open(),console.log("bag opened");const c="/tf",u="/tf_static";let h=[],d=new Map,p=[];for await(const b of l.messageIterator({}))if(b.topic===c)h.push(b.message);else if(b.topic===u)p.push(b.message);else if(null!==b.message&&("object"===typeof(o=b.message)&&null!==o&&"header"in o&&"object"===typeof o.header&&"seq"in o.header&&"number"===typeof o.header.seq&&"stamp"in o.header&&"object"===typeof o.header.stamp&&"sec"in o.header.stamp&&"number"===typeof o.header.stamp.sec&&"nsec"in o.header.stamp&&"number"===typeof o.header.stamp.nsec&&"frame_id"in o.header&&"string"===typeof o.header.frame_id&&"name"in o&&Array.isArray(o.name)&&"string"===typeof o.name[0]&&"position"in o&&o.position instanceof Float64Array&&"velocity"in o&&o.velocity instanceof Float64Array&&"effort"in o&&o.effort instanceof Float64Array)){var r;d.has(b.topic)||d.set(b.topic,[]),void 0!==b.message&&(null===(r=d.get(b.topic))||void 0===r||r.push(b.message))}console.log(h),console.log(d),console.log(p);let f=new Set,m=new Set,g=h.concat(p);for(const y of g){let x=y;for(const w of x.transforms){let _=w.header.frame_id,S=w.child_frame_id;f.delete(S),m.add(S),m.has(_)||f.add(_)}}let v=[];if(h.length>0){let M=h[0].transforms[0].header.stamp;for(const C of h){let A=C.transforms[0],R=A.header.stamp.sec-M.sec+1e-9*(A.header.stamp.nsec-M.nsec);v.push(R)}function T(e,t,n,r){let i=new Array(n).fill(t);e.set(r,i)}for(const k of p){let P=k;for(const L of P.transforms)if(f.has(L.header.frame_id)){console.log(L);let O=L.child_frame_id,N=L.transform.translation,I=L.transform.rotation,D=new Map;T(D,N.x,h.length,"X_POS"),T(D,N.y,h.length,"Y_POS"),T(D,N.z,h.length,"Z_POS"),T(D,I.x,h.length,"X_ROT"),T(D,I.y,h.length,"Y_ROT"),T(D,I.z,h.length,"Z_ROT"),T(D,I.w,h.length,"W_ROT");let j={id:(new yy).value(),tfs:D,name:t.name+" "+O,first_link:L.header.frame_id,time:v};e.addTF(j)}}let E=[];for(let F=0;F<h[0].transforms.length;F++){const z=h[0].transforms[F];f.has(z.header.frame_id)&&E.push(F)}for(const B of E){let U=[],G=[],V=[],H=[],W=[],$=[],q=[];for(const Q of h){const Z=Q.transforms[B];let ee=Z.transform.translation,te=Z.transform.rotation;U.push(ee.x),G.push(ee.y),V.push(ee.z),H.push(te.x),W.push(te.y),$.push(te.z),q.push(te.w)}let X=h[0].transforms[B].child_frame_id,Y=h[0].transforms[B].header.frame_id,K=new Map;K.set("X_POS",U),K.set("Y_POS",G),K.set("Z_POS",V),K.set("X_ROT",H),K.set("Y_ROT",W),K.set("Z_ROT",$),K.set("W_ROT",q);let J={id:(new yy).value(),tfs:K,name:t.name+" "+X,first_link:Y,time:v};e.addTF(J),console.log(J)}}for(const[ne,re]of d){let ie=[],oe=new Map,ae=re[0],se=ae.header.stamp;for(const ce of ae.name)oe.set(ce,[]);for(const ue of re){let he=ue,de=he.header.stamp.sec-se.sec+1e-9*(he.header.stamp.nsec-se.nsec);ie.push(de);for(let pe=0;pe<he.name.length;pe++){var i;null===(i=oe.get(he.name[pe]))||void 0===i||i.push(he.position[pe])}}let le={id:(new yy).value(),motion:oe,name:t.name+" "+ne,time:ie};e.addJointMotion(le)}if(void 0!==n){const fe="Rosbag Loaded Successfully!",me=document.createElement("p");me.innerText=fe,me.classList.add("LoadRosbagMessage");const ge=document.querySelector("."+n);null===ge||void 0===ge||ge.appendChild(me)}return ir.setPopupHelpPage({page:Xn.LoadingSuccess,type:"rosbag"}),new Promise((e=>setTimeout(e,0)))}catch(a){if(ir.setPopupHelpPage({page:Xn.LoadingFailed,type:"rosbag"}),void 0!==n){const ve="Error loading Rosbag: "+a,be=document.createElement("p");be.innerText=ve,be.style.color="red",be.classList.add("LoadRosbagMessage");const ye=document.querySelector("."+n);null===ye||void 0===ye||ye.appendChild(be)}throw a}var o}static createTableWithJointMotion(e,t,n){let r=new Zw,i=new Map;for(const[a,s]of n)i.set(e+a,s);let o=new Set;return o.add(e),r._angleMap=i,r._robotNames=o,r._timeTable=t,r}static createTableWithTF(e,t,n){let r=new Zw,i=new Map;for(const[a,s]of n)i.set(e+a,s);let o=new Set;return o.add(e),r._descMap=i,r._robotNames=o,r._timeTable=t,r}frame(e,t){let n=(e,n,r,i)=>{let o=this._descMap.get("".concat(t).concat(e));if(void 0===o&&(o=this._descMap.get(e)),void 0!==o)return Kb(Jw(o,n,0),Jw(o,r,0),i)},r=e=>{const n=[Gw,Vw,Hw,Ww];let r=[];for(const i of n){let n;if(void 0!==t&&(n=this._descMap.get("".concat(t).concat(i))),void 0===n&&(n=this._descMap.get(i)),void 0===n)return;r.push(Jw(n,e,0))}return new ds(r[0],r[1],r[2],r[3])},i=(i,o,a)=>{let s=new Map;for(const[e,t]of this._angleMap.entries())s.set(e,Kb(Jw(t,i,0),Jw(t,o,0),a));if(void 0!==t)for(const[e,n]of s.entries())e.startsWith(t)&&s.set(e.slice(t.length,e.length),n);let l=((e,t,n)=>{let i=new ds,o=r(e),a=r(t);return void 0!==o&&void 0!==a&&i.slerpQuaternions(o,a,n),i})(i,o,a),c={position:{x:n(zw,i,o,a),y:n(Bw,i,o,a),z:n(Uw,i,o,a)},scale:{x:n($w,i,o,a),y:n(qw,i,o,a),z:n(Xw,i,o,a)},rotation:{x:l.x,y:l.y,z:l.z,w:l.w},angleMap:s,time:e};return this.fromGazebo&&(c=Fw(c)),c};if(e<=Jw(this._timeTable,0,0))return i(0,0,0);if(e>=Jw(this._timeTable,this._timeTable.length-1,0)){let e=0;for(const t of Array.from(this._angleMap.values()))e=Math.max(e,t.length);for(const t of Array.from(this._descMap.values()))e=Math.max(e,t.length);return i(e,e,0)}{let t=ly(this._timeTable,e),n=Jw(this._timeTable,t-1,0),r=Jw(this._timeTable,t,0);return i(t-1,t,(e-n)/(r-n))}}startTime(){return Jw(this._timeTable,0,0)}endTime(){return Jw(this._timeTable,this._timeTable.length-1,0)}toCSV(){let e=[],t=(t,n)=>{e.push([t,n])};t("time",this._timeTable);for(const[r,i]of Array.from(this._descMap.entries()))t(r,i);for(const[r,i]of Array.from(this._angleMap.entries()))t(r,i);let n=(e=>{let t=[],n=0;for(const[,r]of e)n=Math.max(n,r.length+1);for(const r of function*(e,t,n){let r,i,o;o=null!==n&&void 0!==n?n:1,void 0===t?(r=0,i=e):(r=e,i=t);for(let a=r;a<i;a+=o)yield a}(n)){const n=[];if(0===r)for(const[t]of e)n.push(t);else for(const[,t]of e){let e=t[r-1];void 0===e&&(e=t[t.length-1],void 0===e&&(e=0)),n.push(e)}t.push(n)}return t})(e);return n}static fromCSV(e,t){try{e=function(e){let{csv:t,valTypes:n=qb.NUMBER,nonEmpty:r=!0,extendCols:o=!0,inPlace:a=!1,removeDuplicateRows:s=!0,fillBadCellsWith:l}=e,c=[],u=e=>"number"===typeof e?e.toString():void 0===e?"":e;if(a){for(const p of t)for(let f=0;f<p.length;f++)p[f]=u(p[f]);c=t}else for(const m of t){const g=[];c.push(g);for(const v of m)g.push(u(v))}for(let b=0;b<c.length;b++){const y=c[b];for(;y.length>0&&""===y[y.length-1];)y.pop()}{let x=e=>0===e.length||1===e.length&&""===e[0],w=0;for(;w<c.length;)x(c[w])?c.splice(w,1):w++}if(r){if(0===c.length)throw new i.AssertionError({message:"The CSV was empty. CSV: ".concat(c)});if(1===c.length)throw new i.AssertionError({message:"The CSV only had 1 row (the header row). CSV: ".concat(c)})}if(c.length<=1)return c;const h=c[0];for(let _=0;_<c.length;_++)for(;c[_].length>h.length;)c[_].pop();if(o){const S=[];for(let M=0;M<h.length;M++){let T=c[1][M];void 0===T&&(T=""),S.push(T)}for(const E of c)for(let C=0;C<h.length;C++)E.length-1<C?E.push(S[C]):S[C]=E[C]}let d;if(n===qb.STRING_AND_NUMBER)d=e=>{if("string"===typeof e){let t=parseFloat(e);if(!isNaN(t))return t}return e};else if(n===qb.NUMBER)d=e=>{if("string"===typeof e){let t=parseFloat(e);if(isNaN(t))if("number"===typeof l)t=l;else{if("string"!==typeof l||isNaN(parseFloat(e)))throw new i.AssertionError({message:'Failed to clean CSV: "'.concat(t,'" could not be turned into a number.')});t=parseFloat(e)}e=t}return e};else{if(n!==qb.STRING)throw new i.AssertionError({message:'Failed to clean CSV: Unexpected valTypes value "'.concat(n,'".')});d=u}for(let A=1;A<c.length;A++)for(let R=0;R<c[A].length;R++)c[A][R]=d(c[A][R]);if(s){function k(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}{let P=1;for(;P<c.length;)k(c[P-1],c[P])?c.splice(P,1):P++}}return c}({csv:e,nonEmpty:!0,extendCols:!0,inPlace:!0,removeDuplicateRows:!0,valTypes:qb.NUMBER,fillBadCellsWith:0});let n,r=new Zw,o=new Map,a=new Set,s=e[0];for(const[t,i]of oy(s)){if("string"!==typeof i)return Qw("One of the headers was a(n) ".concat(typeof i,' (value: "').concat(i,'") rather than a string! Check to make sure that all the values of the first row of the CSV are strings naming their column of the CSV.'));let n=[];for(let i=1;i<e.length;i++){let r=Jw(e[i],t,0);if(""!==r){if("number"!==typeof r)return Qw("On row ".concat(i,' of the CSV, a value was "').concat(r,'" rather than a number!'));n.push(r)}}let r=i.trim().replace(" ","_");const[s,l]=r.split("-");a.add(s),o.set(r.replace("-",""),n)}if(o.has("time")&&o.has("timestamp"))return Qw('The CSV cannot have both a "time" column and a "timestamp" column. Please remove one of them.');if(o.has("time"))n=o.get("time");else{if(!o.has("timestamp"))return Qw('There is no "time" or "timestamp" column in the CSV.');n=o.get("timestamp")}if(void 0===n)return Qw('There is no "time" column in the CSV.');let l=0;for(let e=1;e<n.length;e++){let t=n[e-1],r=n[e],i=!1;if(t>r?(ir.warn('The "time" column of every CSV must contain only ascending values, but descending values were found. Removing descending value.'),l+=1,l>5&&Qw("".concat(l,' values of the "time" column of a CSV were found to be in descending order so the rest are assumed to be as well.')),i=!0):t===r?i=!0:l=0,i){for(const t of o.values())t.splice(e,1);e-=1}}let c=n[n.length-1],u=n[0],h=c-u;if("second"===t)for(let e=0;e<n.length;e++)n[e]-=u;else if("millisecond"===t)for(let e=0;e<n.length;e++)n[e]=(n[e]-u)/1e3;else if("microsecond"===t)for(let e=0;e<n.length;e++)n[e]=(n[e]-u)/1e6;else if("nanosecond"===t)for(let e=0;e<n.length;e++)n[e]=(n[e]-u)/1e9;else{let e=h>1e3,t=h>1e6,r=h>1e9;for(let i=0;i<n.length;i++)n[i]-=u,e&&(n[i]/=1e3),t&&(n[i]/=1e3),r&&(n[i]/=1e3)}r._timeTable=n,o.delete("time");for(const[e,t]of o.entries()){let n=e.toUpperCase();for(const[i,a]of Yw.entries())n.endsWith(i)&&(r._descMap.set(e.slice(0,e.length-i.length)+a,t),o.delete(e))}return r._angleMap=o,a.delete("time"),r._robotNames=a,r}catch(tq){if(tq instanceof i.AssertionError)return tq;throw tq}}serialize(){const e={id:this.idValue(),name:this.name(),csv:this.toCSV()};return this._url&&(e.url=this._url),e}static async deserialize(e,t){var n;let r=this.fromCSV(e.csv);if(r instanceof i.AssertionError)throw r;if(t=null!==(n=t)&&void 0!==n?n:r)return t._timeTable=r._timeTable,t._angleMap=r._angleMap,t._descMap=r._descMap,e.name&&(t._name=e.name),e.id&&t._id.set(e.id),e.url&&(t._url=e.url),t;throw new i.AssertionError({message:"Could not deserialize AnimationTable."})}copyNumberArray(e){let t=[];for(let n=0;n<e.length;n++)t[n]=e[n];return t}clone(){let e=new Zw;e._name=this._name,e._id=new yy,void 0!==this._url&&(e._url=this._url),e._angleMap=new Map;for(const[t,n]of this._angleMap)e._angleMap.set(t,this.copyNumberArray(n));e._descMap=new Map;for(const[t,n]of this._descMap)e._descMap.set(t,this.copyNumberArray(n));for(const t of this._robotNames)e._robotNames.add(t);if(e._timeTable=[],e._timeTable=this.copyNumberArray(this._timeTable),e.fromGazebo=this.fromGazebo,e instanceof i.AssertionError)throw e;return e}}function e_(e){return{x:e.x,y:e.y,z:e.z}}function t_(e,t){return t?(t.x&&(e.x=t.x),t.y&&(e.y=t.y),t.z&&(e.z=t.z),e):e}function n_(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}function r_(e,t){return t?(t.x&&(e.x=t.x),t.y&&(e.y=t.y),t.z&&(e.z=t.z),t.w&&(e.w=t.w),e):e}class i_{constructor(){this._activeAnimations=void 0,this._storedAnimations=void 0,this._lastTime=void 0,this._activeAnimations=[],this._storedAnimations=[],this._lastTime=0}addToAnimationManager(e){for(const t of this._activeAnimations)e.addActiveAnimation(t);for(const t of this._storedAnimations)e.addStoredAnimation(t)}removeFromAnimationManager(e){for(const t of this._activeAnimations)e.removeActiveAnimation(t);for(const t of this._storedAnimations)e.removeStoredAnimation(t)}storeAllGroups(){this._storedAnimations=[...this._storedAnimations,...this._activeAnimations],this._activeAnimations=[],ir.updateUI()}activateAllgroups(){this._activeAnimations=[...this._storedAnimations,...this._activeAnimations],this._storedAnimations=[],ir.updateUI()}clear(){this._activeAnimations=[],this._storedAnimations=[]}animationGroups(){let e=[];for(const t of this._activeAnimations)e.push(t);for(const t of this._storedAnimations)e.push(t);return e}removeAnimationGroup(e){this.removeActiveAnimation(e),this.removeStoredAnimation(e)}time(){return this._lastTime}setTime(e){this._lastTime=e,this.updateAnimations()}activeAnimations(){return this._activeAnimations}addActiveAnimation(e){this.removeActiveAnimation(e),this.removeStoredAnimation(e),this._activeAnimations.push(e),ir.updateUI()}removeActiveAnimation(e){let t=this._activeAnimations.indexOf(e);t>-1&&(this._activeAnimations.splice(t,1),ir.updateUI())}storedAnimations(){return this._storedAnimations}addStoredAnimation(e){this.removeStoredAnimation(e),this.removeActiveAnimation(e),this._storedAnimations.push(e),ir.updateUI()}removeStoredAnimation(e){let t=this._storedAnimations.indexOf(e);t>-1&&(this._storedAnimations.splice(t,1),ir.updateUI())}startTime(){let e=1/0;for(const t of this._activeAnimations)e=Math.min(e,t.startTime());return e===1/0&&(e=0),e}endTime(){let e=-1/0;for(const t of this._activeAnimations)e=Math.max(e,t.endTime());return e===-1/0&&(e=1),e}updateAnimations(){let e=this.endTime();this._lastTime>e&&(this._lastTime=e);let t=this.startTime();this._lastTime<t&&(this._lastTime=t);for(const n of this._activeAnimations)n.update(this._lastTime);ir.updateUI(),ir.render()}copy(e,t){let n=new Map;for(const r of e._activeAnimations){let e=n.get(r);e||(e=r.clone(t),n.set(r,e)),this.addActiveAnimation(e)}for(const r of e._storedAnimations){let e=n.get(r);e||(e=r.clone(t),n.set(r,e)),this.addStoredAnimation(e)}return this}clone(e){return(new i_).copy(this,e)}serialize(){let e=[];for(const n of this._activeAnimations)e.push(n.serialize());let t=[];for(const n of this._storedAnimations)t.push(n.serialize());return{activeAnimations:e,storedAnimations:t,lastTime:this._lastTime}}static async deserialize(e,t,n,r){let i=r||new i_,o=[];if(e.activeAnimations)for(const c of e.activeAnimations)o.push(fy.deserialize(c,t,n));let a=[];if(e.storedAnimations)for(const c of e.storedAnimations)a.push(fy.deserialize(c,t,n));let s=await Promise.all(o),l=await Promise.all(a);for(const c of s)i.addActiveAnimation(c);for(const c of l)i.addStoredAnimation(c);return e.lastTime&&(i._lastTime=e.lastTime),i}}class o_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this._refs=void 0,this._refs=[],e)for(const t of e)this.push(t)}clean(){let e=0;for(;e<this._refs.length;){void 0!==this._refs[e].deref()?e+=1:this._refs.splice(e,1)}}push(e){this._refs.push(new WeakRef(e))}remove(e){let t=0;for(;t<this._refs.length;){let n=this._refs[t].deref();if(void 0!==n){if(n===e){this._refs.splice(t,1);break}t+=1}else this._refs.splice(t,1)}}get length(){return Array.from(this).length}*reverse(){let e=Array.from(this);for(const t of e.reverse())yield t}[Symbol.iterator](){let e=this;return function*(){let t=0;for(;t<e._refs.length;){let n=e._refs[t].deref();void 0!==n?(yield n,t+=1):e._refs.splice(t,1)}}()}}const a_=new Bb.WebGLRenderer({alpha:!1,antialias:!0,preserveDrawingBuffer:!0});a_.outputEncoding=Bb.sRGBEncoding,a_.shadowMap.enabled=!0,a_.shadowMap.type=Bb.PCFSoftShadowMap;const s_=new Set;var l_=0;class c_{constructor(e){if(this._name=void 0,this._render=void 0,this._funcRollsRun=void 0,this._renderer=void 0,this._scene=void 0,this._views=void 0,this._animationManager=void 0,this._copyCloneObjects=void 0,void 0!==e);else{let t="Scene";for(e=t+ ++l_;s_.has(e);)e=t+ ++l_}s_.add(e),this._name=e,this._render=new vy(tr,[()=>{for(const e of this._views)this.drawTo(e)}]),this._funcRollsRun=new Set,this._renderer=a_,this._scene=new Bb.Scene,this._views=new o_,this._animationManager=new i_,this._copyCloneObjects=[]}addCopyCloneObject(e){this._copyCloneObjects.push(e),this._scene.add(e)}setAnimationManager(e){this._animationManager=e,ir.updateUI(),this.render()}name(){return this._name}setName(e){this._name=e,ir.updateUI()}animationManager(){return this._animationManager}runOnce(e,t){this._funcRollsRun.has(e)||(this._funcRollsRun.add(e),t(),this.render(),ir.updateUI())}scene(){return this._scene}renderer(){return this._renderer}setRenderer(e){this._renderer=e,this.render()}views(){let e=[];for(const t of this._views)e.push(t);return e}removeView(e){this._views.remove(e)}addView(e){this._views.push(e)}render(){this._render.call()}drawTo(e){const t=e.canvas(),n=e.camera();let r=t.getContext("2d");r?(e.preprocess(),this._renderer.setSize(t.width,t.height),n instanceof Bb.PerspectiveCamera&&(n.aspect=t.width/t.height,n.updateProjectionMatrix()),this._renderer.render(this._scene,n),this._renderer.domElement.width>0&&this._renderer.domElement.height>0&&r.drawImage(this._renderer.domElement,0,0),e.postprocess()):console.error("A canvas could not be rendered to because its 2d context was null!")}copy(e){let t=arguments.length>4?arguments[4]:void 0;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(this._name=e._name);for(const n of e._copyCloneObjects)this.addCopyCloneObject(n.clone(!0));return this._animationManager.copy(e._animationManager,t),e}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return(new c_).copy(this,e,t,n,r)}}function u_(e){return e instanceof Bb.Mesh||e&&"isMesh"in e}const h_=[];for(let n=0;n<256;n++)h_[n]=(n<16?"0":"")+n.toString(16);Math.PI,Math.PI;class d_{constructor(e,t,n){this._id=void 0,this._robot=void 0,this._joint=void 0,this._axisHelper=void 0,this._render=void 0,this._includeAngleInTimeWarpConsideration=void 0,this._includePosInTimeWarpConsideration=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._id=new yy,this._robot=e,this._joint=t,this._axisHelper=new Bb.AxesHelper(.1),this._axisHelper.visible=!1,this._joint.add(this._axisHelper),this._render=n,this._includeAngleInTimeWarpConsideration=!1,this._includePosInTimeWarpConsideration=!1,this._sceneCounter=0,this._graphCounter=0}setAxisVisibility(e){this._axisHelper.visible=e,ir.updateUI(),ir.render()}updateAxisSize(e){let t=this._axisHelper.visible;this._joint.remove(this._axisHelper),this._axisHelper=new Bb.AxesHelper(e),this._joint.add(this._axisHelper),this._axisHelper.visible=t,ir.updateUI(),ir.render()}isInScene(){return 0!==this._sceneCounter}isInGraph(){return 0!==this._graphCounter}addToScene(){this._sceneCounter++}removeFromScene(){this._sceneCounter>0&&this._sceneCounter--}addToGraph(){this._graphCounter++}removeFromGraph(){this._graphCounter>0&&this._graphCounter--}includeAngleInTimeWarpConsideration(){return this._includeAngleInTimeWarpConsideration}setAngleIncludeInTimeWarpConsideration(e){this._includeAngleInTimeWarpConsideration=e,ir.updateUI(),ir.render()}includePosInTimeWarpConsideration(){return this._includePosInTimeWarpConsideration}setPosIncludeInTimeWarpConsideration(e){this._includePosInTimeWarpConsideration=e,ir.updateUI(),ir.render()}id(){return this._id}idValue(){return this._id.value()}name(){return this._joint.name}type(){return this._joint.type}jointType(){return this._joint.jointType}minAngle(){return"continuous"===this.jointType()?-10*Math.PI:this._joint.limit.lower.valueOf()}maxAngle(){return"continuous"===this.jointType()?10*Math.PI:this._joint.limit.upper.valueOf()}setAngle(e){e=function(e,t,n){return Math.max(t,Math.min(n,e))}(e,this.minAngle(),this.maxAngle()),this._joint.setJointValue(e),this._render()}angle(){return this._joint.angle.valueOf()}getWorldQuaternion(){return this._joint.getWorldQuaternion(new ds)}getWorldPosition(){return this._joint.getWorldPosition(new ps)}getJointName(){return this._joint.name}}class p_{constructor(e,t,n){this._id=void 0,this._robot=void 0,this._link=void 0,this._axisHelper=void 0,this._render=void 0,this._includePosInTimeWarpConsideration=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._id=new yy,this._robot=e,this._link=t,this._axisHelper=new Bb.AxesHelper(.1),this._axisHelper.visible=!1,this._link.add(this._axisHelper),this._render=n,this._includePosInTimeWarpConsideration=!1,this._sceneCounter=0,this._graphCounter=0}setAxisVisibility(e){this._axisHelper.visible=e,ir.updateUI(),ir.render()}updateAxisSize(e){let t=this._axisHelper.visible;this._link.remove(this._axisHelper),this._axisHelper=new Bb.AxesHelper(e),this._link.add(this._axisHelper),this._axisHelper.visible=t,ir.updateUI(),ir.render()}isInScene(){return 0!==this._sceneCounter}isInGraph(){return 0!==this._graphCounter}addToScene(){this._sceneCounter++}removeFromScene(){this._sceneCounter>0&&this._sceneCounter--}addToGraph(){this._graphCounter++}removeFromGraph(){this._graphCounter>0&&this._graphCounter--}includePosInTimeWarpConsideration(){return this._includePosInTimeWarpConsideration}setPosIncludeInTimeWarpConsideration(e){this._includePosInTimeWarpConsideration=e,ir.updateUI(),ir.render()}id(){return this._id}idValue(){return this._id.value()}name(){return this._link.name}getWorldQuaternion(){return this._link.getWorldQuaternion(new ds)}getWorldPosition(){return this._link.getWorldPosition(new ps)}getLinkName(){return this._link.name}}class f_{constructor(){this._subscribers=void 0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._subscribers=t}subscribe(e){return this._subscribers.push(e.bind(void 0)),()=>{let t=this._subscribers.indexOf(e);t>0&&this._subscribers.splice(t,1)}}call(e){for(let t=0;t<this._subscribers.length;t++){!1===(0,this._subscribers[t])(e)&&(this._subscribers.splice(t,1),t--)}}}class m_{constructor(e){this._beforeSet=void 0,this._value=void 0,this._afterSet=void 0,this._beforeSet=new f_,this._value=e,this._afterSet=new f_}value(){return this._value}setValue(e,t,n){this._beforeSet.call([this._value,t]),e&&e(this._value,t),this._value=t,n&&n(this._value,t),this._afterSet.call([this._value,t])}beforeSet(){return this._beforeSet}afterSet(){return this._afterSet}}class g_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"urdf",o=arguments.length>5?arguments[5]:void 0;this._id=void 0,this._robot=void 0,this._robotName=void 0,this._url=void 0,this._objectType=void 0,this._highlighted=void 0,this._highlightColor=void 0,this._desaturated=void 0,this._endEffectorPosition=void 0,this._endEffectorRotation=void 0,this._endEffectorMesh=void 0,this._rootGroup=void 0,this._opacity=void 0,this._visible=void 0,this._shadows=void 0,this._eulerRotation=void 0,this._parentScene=void 0,this._meshes=void 0,this._joints=void 0,this._articulatedJoints=void 0,this._jointMap=void 0,this._articulatedJointMap=void 0,this._links=void 0,this._linkMap=void 0,this._axisSize=void 0,this._master=void 0,this._controlledClones=void 0,this._includePositionOffsetInTimeWarpConsideration=void 0,this._includePosInTimeWarpConsideration=void 0,this._positionOffset=void 0,this._sceneCounter=void 0,this._graphCounter=void 0,this._axisSize=.1,this._robot=e,this._objectType=i,this._id=new yy(r),this._master=o,this._parentScene=new m_(void 0),this._controlledClones=[],this._eulerRotation=(new Bb.Euler).setFromQuaternion(this.getWorldQuaternion()),this._robotName=(null!==n&&void 0!==n?n:"unknown_robot").trim(),this._url=t,void 0!==this._robot.quaternion&&this._robot.quaternion.set(0,0,0,1),void 0!==this._robot.position&&this._robot.position.set(0,0,0),void 0!==this._robot.scale&&this._robot.scale.set(1,1,1),this._sceneCounter=0,this._graphCounter=0,this.render=this.render.bind(this),this._rootGroup=new Bb.Group,this._rootGroup.add(this._robot),this._positionOffset=new m_(this._rootGroup.position.clone()),this._endEffectorPosition=new Bb.Vector3,this._endEffectorRotation=new Bb.Quaternion;let a=new Bb.ConeGeometry(.01,.03,20),s=new Bb.MeshStandardMaterial({color:"orange"});if(this._endEffectorMesh=new Bb.Mesh(a,s),this._endEffectorMesh.visible=!0,this._visible=!1,this.setVisible(!0),this._shadows=!1,this.setShadows(!0),this._opacity=0,this.setOpacity(1),this._desaturated=!1,this._highlighted=!1,this._highlightColor=new Bb.Color(.2,.2,.4),this.traverseMaterials((e=>{"color"in e&&(e.baseColor=e.color.clone(),e.highlightColor=e.color.clone().add(this._highlightColor),e.desaturatedColor=function(e,t){let n=e.r,r=e.g,i=e.b,o=(n+r+i)/3;return n=Kb(Kb(n,o,.4),t.r,.4),r=Kb(Kb(r,o,.4),t.g,.4),i=Kb(Kb(i,o,.4),t.b,.4),new Bb.Color(n,r,i)}(e.color,new Bb.Color(.2,.2,.2))),e.side=Bb.DoubleSide,e.transparent=!0,e.opacity=this._opacity})),this.updateColors(),this._robot.traverse((e=>{if("PointLight"===e.type){let t=e;t.intensity=0,t.castShadow=!1,t.distance=0,t.visible=!1}})),this.setPositionOffset(new Bb.Vector3(0,0,0)),this._meshes=[],this.traverseMeshes((e=>{this._meshes.push(e)})),this._jointMap=new Map,this._joints=[],this._articulatedJointMap=new Map,this._articulatedJoints=[],this._robot.joints)for(const l of Object.entries(this._robot.joints)){let e=new d_(this,l[1],this.render);this._jointMap.set(l[0],e),this._joints.push(e),"fixed"!==e.jointType()&&"URDFMimicJoint"!==e.type()&&(this._articulatedJointMap.set(l[0],e),this._articulatedJoints.push(e))}if(this._linkMap=new Map,this._links=[],this._robot.links)for(const l of Object.entries(this._robot.links)){let e=new p_(this,l[1],this.render);this._links.push(e),this._linkMap.set(l[0],e)}this._includePositionOffsetInTimeWarpConsideration=!1,this._includePosInTimeWarpConsideration=!1}setAxisSize(e){this._axisSize=e;for(const[,t]of this._jointMap)t.updateAxisSize(e);for(const[,t]of this._linkMap)t.updateAxisSize(e)}axisSize(){return this._axisSize}eulerRotation(){return this._eulerRotation}includePositionOffsetInTimeWarpConsideration(){return this._includePositionOffsetInTimeWarpConsideration}setPositionOffsetIncludeInTimeWarpConsideration(e){this._includePositionOffsetInTimeWarpConsideration=e,ir.updateUI(),ir.render()}includePosInTimeWarpConsideration(){return this._includePosInTimeWarpConsideration}setPositionIncludeInTimeWarpConsideration(e){this._includePosInTimeWarpConsideration=e,ir.updateUI(),ir.render()}setParentRobotScene(e){e!==this._parentScene.value()&&(this._parentScene.setValue(((e,t)=>{if(e){e.scene().remove(this.rootGroup());for(const[]of this._controlledClones){var n;null===(n=e.robotSceneManager())||void 0===n||n.removeControlledRobotScene(e)}}if(void 0!==t){t.scene().add(this.rootGroup());for(const[]of this._controlledClones){var r;null===(r=t.robotSceneManager())||void 0===r||r.addControlledRobotScene(t)}}}),e,null),ir.updateUI(),ir.render())}controlledCloneInScene(e){for(const[t]of this._controlledClones)if(e===t)return!0;return!1}addControlledClone(e){for(const[i,o]of this._controlledClones)if(e===i)return o;let t=this.clone();t.setParentRobotScene(e),this._controlledClones.push([e,t]);let n=this._parentScene.value();var r;n&&(null===(r=n.robotSceneManager())||void 0===r||r.addControlledRobotScene(n));return e.render(),e.addGhostRobot(this),ir.updateUI(),t}removeControlledClone(e){for(const[n,r]of oy(this._controlledClones)){if(e===r[0]){r[1].setParentRobotScene(void 0),this._controlledClones.splice(n,1);let i=this._parentScene.value();var t;if(i)null===i||void 0===i||null===(t=i.robotSceneManager())||void 0===t||t.removeControlledRobotScene(i);e.render(),ir.updateUI();break}}}master(){return this._master}setMaster(e){this._master=e}objectType(){return this._objectType}id(){return this._id}idValue(){return this.id().value()}url(){return this._url}rootGroup(){return this._rootGroup}setName(e){this._robotName=e,ir.updateUI()}name(){return this._robotName}isInScene(){return 0!==this._sceneCounter}isInGraph(){return 0!==this._graphCounter}addToScene(){this._sceneCounter++}removeFromScene(){this._sceneCounter>0&&this._sceneCounter--}addToGraph(){this._graphCounter++}removeFromGraph(){this._graphCounter>0&&this._graphCounter--}getRootGroup(){return this._rootGroup}setJointAngle(e,t){let n=this._articulatedJointMap.get(e);if(n){for(const[,n]of this._controlledClones)n.setJointAngle(e,t);n.setAngle(t),this.render()}}jointAngle(e){let t=this._articulatedJointMap.get(e);if(t)return t.angle()}getScaleOffset(){return this._rootGroup.scale.clone()}setScaleOffset(e){if(!e.equals(this.getScaleOffset())){for(const[,t]of this._controlledClones)t.setScaleOffset(e);this._rootGroup.scale.set(e.x,e.y,e.z),this.render()}}getPositionOffset(){return this._positionOffset.value().clone()}setPositionOffset(e){e.equals(this.getPositionOffset())||(this._positionOffset.setValue(null,e.clone(),((e,t)=>{this._rootGroup.position.set(t.x,t.y,t.z);for(const[,n]of this._controlledClones)n.setPositionOffset(t)})),this.render())}beforepositionOffsetSet(){return this._positionOffset.beforeSet()}afterpositionOffsetSet(){return this._positionOffset.afterSet()}getQuaternionOffset(){return this._rootGroup.quaternion.clone()}setQuaternionOffset(e){if(!e.equals(this.getQuaternionOffset())){for(const[,t]of this._controlledClones)t.setQuaternionOffset(e);this._rootGroup.quaternion.copy(e),this.render()}}getScale(){return this._robot.scale.clone()}setScale(e){if(!e.equals(this.getScale())){for(const[,t]of this._controlledClones)t.setScale(e);this._robot.scale.set(e.x,e.y,e.z),this.render()}}getPosition(){return this._robot.position.clone()}setPosition(e){if(!e.equals(this.getPosition())){for(const[,t]of this._controlledClones)t.setPosition(e);this._robot.position.set(e.x,e.y,e.z),this.render()}}getWorldPosition(){return this._robot.getWorldPosition(new Bb.Vector3)}setWorldPosition(e){this.setPosition(this._robot.worldToLocal(e))}getWorldQuaternion(){return this._robot.getWorldQuaternion(new Bb.Quaternion)}getQuaternion(){return this._robot.quaternion.clone()}setQuaternion(e){if(!e.equals(this.getQuaternion())){for(const[,t]of this._controlledClones)t.setQuaternion(e);this._robot.quaternion.copy(e),this.render()}}joints(){return this._joints}articuatedJoints(){return this._articulatedJoints}jointMap(){return this._jointMap}getArticuatedJointMap(){return this._articulatedJointMap}getFixedJointMap(){let e=new Map;for(const[t,n]of this._jointMap)this._articulatedJointMap.has(t)||e.set(t,n);return e}links(){return this._links}linkMap(){return this._linkMap}setOpacity(e){this._opacity=ry(e,0,1),this.traverseMaterials((e=>{e.opacity=this._opacity})),this.render()}opacity(){return this._opacity}setHighlightColor(e){this.traverseMaterials((t=>{"color"in t&&(t.highlightColor=t.baseColor.clone().add(e))})),this.updateColors()}highlightColor(){return this._highlightColor}traverseMeshes(e){this.rootGroup().traverse((t=>{u_(t)&&e(t)}))}traverseMaterials(e){this.rootGroup().traverse((t=>{t instanceof Bb.AxesHelper||$b(t.material,e)}))}meshes(){return this._meshes}visible(){return this._visible}setVisible(e){this.traverseMeshes((t=>{t.visible=e})),this._visible=e,this.render()}shadows(){return this._shadows}setShadows(e){this.traverseMeshes((t=>{t.castShadow=e,t.receiveShadow=e})),this._shadows=e,this.render()}highlighted(){return this._highlighted}setHighlighted(e){this._highlighted=e,this.updateColors()}desaturated(){return this._desaturated}setDesaturated(e){this._desaturated=e,this.updateColors()}applyFrame(e){let t=e.scale;if(t){let e=this.getScale();void 0!==t.x&&(e.x=t.x),void 0!==t.y&&(e.y=t.y),void 0!==t.z&&(e.z=t.z),this.setScale(e)}let n=e.position;if(n){let e=this.getPosition();void 0!==n.x&&(e.x=n.x),void 0!==n.y&&(e.y=n.y),void 0!==n.z&&(e.z=n.z),this.setPosition(e)}let r=e.rotation;if(r){let e=this.getQuaternion();if(void 0!==r.w)void 0!==r.x&&(e.x=r.x),void 0!==r.y&&(e.y=r.y),void 0!==r.z&&(e.z=r.z),void 0!==r.w&&(e.w=r.w);else{let t=new Bb.Euler;void 0!==r.x&&(t.x=r.x),void 0!==r.y&&(t.y=r.y),void 0!==r.z&&(t.z=r.z),e.setFromEuler(t)}this.setQuaternion(e)}let i=e.angleMap;for(const[o,a]of i.entries())this.setJointAngle(o,a)}beforeParentSceneSet(){return this._parentScene.beforeSet()}afterParentSceneSet(){return this._parentScene.afterSet()}parentScene(){return this._parentScene.value()}render(){var e;null===(e=this._parentScene.value())||void 0===e||e.render()}updateColors(){this.traverseMaterials((e=>{"color"in e&&(this._highlighted?e.color=e.highlightColor:this._desaturated?e.color=e.desaturatedColor:e.color=e.baseColor)})),this.render()}clone(){let e=this.desaturated(),t=this.highlighted();this.setDesaturated(!1),this.setHighlighted(!1);let n=this._robot.clone(!0);n.traverse((e=>{let t=e.material;if(t)if(Array.isArray(t)){let n=[];for(const e of t)n.push(e.clone());e.material=n}else e.material=t.clone()}));let r=new g_(n,this.url(),this.name(),void 0,this._objectType,void 0===this._master?this:this._master);return r.setDesaturated(e),r.setHighlighted(t),r.setOpacity(this.opacity()),r.setVisible(this.visible()),r.setHighlightColor(this.highlightColor()),r.setPosition(this.getPosition()),r.setQuaternion(this.getQuaternion()),r.setScale(this.getScale()),r.setPositionOffset(this.getPositionOffset()),r.setQuaternionOffset(this.getQuaternionOffset()),r.setScaleOffset(this.getScaleOffset()),this.setDesaturated(e),this.setHighlighted(t),r}serialize(){let e;if(!this._url)throw new Error("Robot named ".concat(this._robotName," could not be properly serialized because it does not come from a URL."));e=this._url;let t=this.getPositionOffset(),n=this.getScaleOffset(),r=this.getQuaternionOffset(),i=this.getPosition(),o=this.getScale(),a=this.getQuaternion();return{name:this._robotName,id:this._id.value(),url:e,positionOffset:e_(t),scaleOffset:e_(n),rotationOffset:n_(r),position:e_(i),scale:e_(o),rotation:n_(a),objectType:this._objectType}}static async deserialize(e){if("string"===typeof e&&(e=JSON.parse(e)),e.url){let t=e.url,n=await g_.loadRobot(t);return e.name&&(n._robotName=e.name),e.id&&n._id.set(e.id),n.setScaleOffset(t_(n.getScaleOffset(),e.scaleOffset)),n.setPositionOffset(t_(n.getPositionOffset(),e.positionOffset)),n.setQuaternionOffset(r_(n.getQuaternionOffset(),e.rotationOffset)),n.setScale(t_(n.getScale(),e.scale)),n.setPosition(t_(n.getPosition(),e.position)),n.setQuaternion(r_(n.getQuaternion(),e.rotation)),n}throw ir.error("Failed to deserialize a Robot: its serial did not contain a url to the Robot."),new i.AssertionError({message:"Failed to deserialize a Robot: its serial did not contain a url to the Robot."})}static async loadRobot(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return void 0===t&&(t=e.trim().toLowerCase().endsWith(".glb")?"glb":"urdf"),"urdf"===t?(n=await async function(e){let t,n=new Map,r=await Yx(e),i=await Kx(r),o=(new DOMParser).parseFromString(i,"text/xml"),a=Array.from(o.getElementsByTagName("mesh"));if(0===a.length)t=tw(i);else{let r=[],o=[];for(const t of a){let n=t.attributes.filename.nodeValue,i=e.substring(0,e.lastIndexOf("/")),a=n.replace("package://",i+"/../../").replaceAll("#","%23");r.push([n,a]),o.push(Yx(a))}let s=await Promise.all(o);for(const[e,t]of oy(s)){let[o,a]=r[e],s="";if(/\.stl$/i.test(o)){s=".stlX";let e=URL.createObjectURL(t),n=e.substring(e.lastIndexOf("/")+1).trim()+s,r=o;i=i.replace(r,n)}else if(/\.dae$/i.test(o)){s=".daeX";let e=await Zx(t,n,a),r=URL.createObjectURL(e),l=r.substring(r.lastIndexOf("/")+1).trim()+s,c=o;i=i.replace(c,l)}}t=tw(i)}const s=URL.createObjectURL(t);return await new Promise(((e,t)=>{let n,r=new Bb.LoadingManager,i=new Ox(r);i.parseVisual=!0,i.parseCollision=!1,i.load(s,(e=>{n=e})),r.onLoad=()=>{e(n)},r.onError=e=>{let n='Failed to load URDF from URL "'.concat(e,'".');ir.error(n),t(n)}}))}(e),""===r&&(r=n.robotName)):"glb"===t?(n=await async function(e){if((await fetch(e)).ok){let t=new xy;return await new Promise(((n,r)=>{t.load(e,(e=>{n(e.scene)}),(()=>{}),(()=>{r('Could not load GLB from url "'.concat(e,'"'))}))}))}throw new Error('Bad response from url "'.concat(e,'" when trying to load GLB object'))}(e),""===r&&(r="Object")):(n=new Bb.AxesHelper(.1),""===r&&(r="EE Target")),new g_(n,e,r,void 0,"urdf"===t?void 0:"object3D")}static createAxesHelper(e,t){let n=new Bb.AxesHelper(e);return new g_(n,"AxesHelper",t,void 0,"object3D")}}class v_{constructor(){this.pluginCallbacks=[],this.register((function(e){return new W_(e)})),this.register((function(e){return new $_(e)})),this.register((function(e){return new q_(e)})),this.register((function(e){return new Y_(e)})),this.register((function(e){return new K_(e)})),this.register((function(e){return new X_(e)}))}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){"object"===typeof n&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),r=n);const i=new H_,o=[];for(let a=0,s=this.pluginCallbacks.length;a<s;a++)o.push(this.pluginCallbacks[a](i));i.setPlugins(o),i.write(e,t,r).catch(n)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}const b_=0,y_=1,x_=2,w_=3,__=4,S_=5121,M_=5123,T_=5126,E_=5125,C_=34962,A_=34963,R_=9728,k_=9729,P_=9984,L_=9985,O_=9986,N_=9987,I_=33071,D_=33648,j_=10497,F_={};F_[gi]=R_,F_[vi]=P_,F_[yi]=O_,F_[wi]=k_,F_[_i]=L_,F_[Mi]=N_,F_[fi]=I_,F_[pi]=j_,F_[mi]=D_;const z_={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function B_(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function U_(e){return 4*Math.ceil(e/4)}function G_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=U_(e.byteLength);if(n!==e.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}let V_=null;class H_{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const r=this,i=r.buffers,o=r.json;n=r.options;const a=r.extensionsUsed,s=new Blob(i,{type:"application/octet-stream"}),l=Object.keys(a);if(l.length>0&&(o.extensionsUsed=l),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=s.size),!0===n.binary){const e=new window.FileReader;e.readAsArrayBuffer(s),e.onloadend=function(){const n=G_(e.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,5130562,!0);const i=G_(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);t[n]=r>255?32:r}return t.buffer}(JSON.stringify(o)),32),a=new DataView(new ArrayBuffer(8));a.setUint32(0,i.byteLength,!0),a.setUint32(4,1313821514,!0);const s=new ArrayBuffer(12),l=new DataView(s);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);const c=12+a.byteLength+i.byteLength+r.byteLength+n.byteLength;l.setUint32(8,c,!0);const u=new Blob([s,a,i,r,n],{type:"application/octet-stream"}),h=new window.FileReader;h.readAsArrayBuffer(u),h.onloadend=function(){t(h.result)}}}else if(o.buffers&&o.buffers.length>0){const e=new window.FileReader;e.readAsDataURL(s),e.onloadend=function(){const n=e.result;o.buffers[0].uri=n,t(o)}}else t(o)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const n=this.options,r=this.extensionsUsed;try{const i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in i.gltfExtensions)t.extensions[e]=i.gltfExtensions[e],r[e]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(i){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+i.message)}}getUID(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new ps;for(let n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),r=new ps;for(let i=0,o=n.count;i<o;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,r,i){const o=this.json;let a;o.bufferViews||(o.bufferViews=[]),a=t===S_?1:t===M_?2:4;const s=U_(r*e.itemSize*a),l=new DataView(new ArrayBuffer(s));let c=0;for(let h=n;h<n+r;h++)for(let n=0;n<e.itemSize;n++){let r;e.itemSize>4?r=e.array[h*e.itemSize+n]:0===n?r=e.getX(h):1===n?r=e.getY(h):2===n?r=e.getZ(h):3===n&&(r=e.getW(h)),t===T_?l.setFloat32(c,r,!0):t===E_?l.setUint32(c,r,!0):t===M_?l.setUint16(c,r,!0):t===S_&&l.setUint8(c,r),c+=a}const u={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:s};void 0!==i&&(u.target=i),i===C_&&(u.byteStride=e.itemSize*a),this.byteOffset+=s,o.bufferViews.push(u);return{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){const i=new window.FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){const e=G_(i.result),o={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(o)-1)}}))}processAccessor(e,t,n,r){const i=this.options,o=this.json;let a;if(e.array.constructor===Float32Array)a=T_;else if(e.array.constructor===Uint32Array)a=E_;else if(e.array.constructor===Uint16Array)a=M_;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");a=S_}if(void 0===n&&(n=0),void 0===r&&(r=e.count),i.truncateDrawRange&&void 0!==t&&null===t.index){const i=n+r,o=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(i,o)-n)<0&&(r=0)}if(0===r)return null;const s=function(e,t,n){const r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=t;i<t+n;i++)for(let t=0;t<e.itemSize;t++){let n;e.itemSize>4?n=e.array[i*e.itemSize+t]:0===t?n=e.getX(i):1===t?n=e.getY(i):2===t?n=e.getZ(i):3===t&&(n=e.getW(i)),r.min[t]=Math.min(r.min[t],n),r.max[t]=Math.max(r.max[t],n)}return r}(e,n,r);let l;void 0!==t&&(l=e===t.index?A_:C_);const c=this.processBufferView(e,a,n,r,l),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:r,max:s.max,min:s.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(u.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(u)-1}processImage(e,t,n){const r=this,i=r.cache,o=r.json,a=r.options,s=r.pending;i.images.has(e)||i.images.set(e,{});const l=i.images.get(e),c=t===Bi?"image/png":"image/jpeg",u=c+":flipY/"+n.toString();if(void 0!==l[u])return l[u];o.images||(o.images=[]);const h={mimeType:c};if(a.embedImages){const i=V_=V_||document.createElement("canvas");i.width=Math.min(e.width,a.maxTextureSize),i.height=Math.min(e.height,a.maxTextureSize);const o=i.getContext("2d");if(!0===n&&(o.translate(0,i.height),o.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)o.drawImage(e,0,0,i.width,i.height);else{t!==Bi&&t!==zi&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>a.maxTextureSize||e.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const n=new Uint8ClampedArray(e.height*e.width*4);if(t===Bi)for(let t=0;t<n.length;t+=4)n[t+0]=e.data[t+0],n[t+1]=e.data[t+1],n[t+2]=e.data[t+2],n[t+3]=e.data[t+3];else for(let t=0,r=0;t<n.length;t+=4,r+=3)n[t+0]=e.data[r+0],n[t+1]=e.data[r+1],n[t+2]=e.data[r+2],n[t+3]=255;o.putImageData(new ImageData(n,e.width,e.height),0,0)}!0===a.binary?s.push(new Promise((function(e){i.toBlob((function(t){r.processBufferViewImage(t).then((function(t){h.bufferView=t,e()}))}),c)}))):h.uri=i.toDataURL(c)}else h.uri=e.src;const d=o.images.push(h)-1;return l[u]=d,d}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:F_[e.magFilter],minFilter:F_[e.minFilter],wrapS:F_[e.wrapS],wrapT:F_[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);const r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(r.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,r)}));const i=n.textures.push(r)-1;return t.textures.set(e,i),i}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const i=e.color.toArray().concat([e.opacity]);if(B_(i,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=i),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){const t={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(t,e.metalnessMap),r.pbrMetallicRoughness.metallicRoughnessTexture=t}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){const t={index:this.processTexture(e.map)};this.applyTextureTransform(t,e.map),r.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive.clone().multiplyScalar(e.emissiveIntensity),n=Math.max(t.r,t.g,t.b);if(n>1&&(t.multiplyScalar(1/n),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),n>0&&(r.emissiveFactor=t.toArray()),e.emissiveMap){const t={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(t,e.emissiveMap),r.emissiveTexture=t}}if(e.normalMap){const t={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),r.normalTexture=t}if(e.aoMap){const t={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),r.occlusionTexture=t}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===br&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));const o=n.materials.push(r)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let b=0,y=e.material.length;b<y;b++)r.push(e.material[b].uuid);else r.push(e.material.uuid);const i=r.join(":");if(t.meshes.has(i))return t.meshes.get(i);const o=e.geometry;let a;if(a=e.isLineSegments?y_:e.isLineLoop?x_:e.isLine?w_:e.isPoints?b_:e.material.wireframe?y_:__,!0!==o.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const s={},l={},c=[],u=[],h={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");void 0===d||this.isNormalizedNormalAttribute(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let p=null;for(let b in o.attributes){if("morph"===b.substr(0,5))continue;const e=o.attributes[b];b=h[b]||b.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(b)||(b="_"+b),t.attributes.has(this.getUID(e))){l[b]=t.attributes.get(this.getUID(e));continue}p=null;const n=e.array;"JOINTS_0"!==b||n instanceof Uint16Array||n instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new zl(new Uint16Array(n),e.itemSize,e.normalized));const r=this.processAccessor(p||e,o);null!==r&&(l[b]=r,t.attributes.set(this.getUID(e),r))}if(void 0!==d&&o.setAttribute("normal",d),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const n=[],r=[],i={};if(void 0!==e.morphTargetDictionary)for(const t in e.morphTargetDictionary)i[e.morphTargetDictionary[t]]=t;for(let a=0;a<e.morphTargetInfluences.length;++a){const s={};let l=!1;for(const e in o.morphAttributes){if("position"!==e&&"normal"!==e){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}const n=o.morphAttributes[e][a],r=e.toUpperCase(),i=o.attributes[e];if(t.attributes.has(this.getUID(n))){s[r]=t.attributes.get(this.getUID(n));continue}const c=n.clone();if(!o.morphTargetsRelative)for(let e=0,t=n.count;e<t;e++)c.setXYZ(e,n.getX(e)-i.getX(e),n.getY(e)-i.getY(e),n.getZ(e)-i.getZ(e));s[r]=this.processAccessor(c,o),t.attributes.set(this.getUID(i),s[r])}u.push(s),n.push(e.morphTargetInfluences[a]),void 0!==e.morphTargetDictionary&&r.push(i[a])}s.weights=n,r.length>0&&(s.extras={},s.extras.targetNames=r)}const f=Array.isArray(e.material);if(f&&0===o.groups.length)return null;const m=f?e.material:[e.material],g=f?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let b=0,y=g.length;b<y;b++){const e={mode:a,attributes:l};if(this.serializeUserData(o,e),u.length>0&&(e.targets=u),null!==o.index){let n=this.getUID(o.index);void 0===g[b].start&&void 0===g[b].count||(n+=":"+g[b].start+":"+g[b].count),t.attributes.has(n)?e.indices=t.attributes.get(n):(e.indices=this.processAccessor(o.index,o,g[b].start,g[b].count),t.attributes.set(n,e.indices)),null===e.indices&&delete e.indices}const n=this.processMaterial(m[g[b].materialIndex]);null!==n&&(e.material=n),c.push(e)}s.primitives=c,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,s)}));const v=n.meshes.push(s)-1;return t.meshes.set(i,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:Ya.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){const n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);const i=(e=v_.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,o=[],a=[];for(let s=0;s<i.length;++s){const e=i[s],n=nv.parseTrackName(e.name);let l=nv.findNode(t,n.nodeName);const c=z_[n.propertyName];if("bones"===n.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(n.objectIndex):void 0),!l||!c)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',e.name),null;const u=1;let h,d=e.values.length/e.times.length;c===z_.morphTargetInfluences&&(d/=l.morphTargetInfluences.length),!0===e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",d/=3):h=e.getInterpolation()===Go?"STEP":"LINEAR",a.push({input:this.processAccessor(new zl(e.times,u)),output:this.processAccessor(new zl(e.values,d)),interpolation:h}),o.push({sampler:a.length-1,target:{node:r.get(l),path:c}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:o}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],i=e.skeleton;if(void 0===i)return null;const o=e.skeleton.bones[0];if(void 0===o)return null;const a=[],s=new Float32Array(16*i.bones.length),l=new Hs;for(let c=0;c<i.bones.length;++c)a.push(n.get(i.bones[c])),l.copy(i.boneInverses[c]),l.multiply(e.bindMatrix).toArray(s,16*c);void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new zl(s,16)),joints:a,skeleton:n.get(o)});return r.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);const i={};if(n.trs){const t=e.quaternion.toArray(),n=e.position.toArray(),r=e.scale.toArray();B_(t,[0,0,0,1])||(i.rotation=t),B_(n,[0,0,0])||(i.translation=n),B_(r,[1,1,1])||(i.scale=r)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===B_(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){const t=this.processMesh(e);null!==t&&(i.mesh=t)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const t=[];for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r];if(i.visible||!1===n.onlyVisible){const e=this.processNode(i);null!==e&&t.push(e)}}t.length>0&&(i.children=t)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));const o=t.nodes.push(i)-1;return r.set(e,o),o}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);const i=[];for(let o=0,a=e.children.length;o<a;o++){const t=e.children[o];if(t.visible||!1===n.onlyVisible){const e=this.processNode(t);null!==e&&i.push(e)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}processObjects(e){const t=new Id;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));const n=[];for(let r=0;r<e.length;r++)e[r]instanceof Id?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<t.animations.length;++r)this.processAnimation(t.animations[r],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class W_{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const n=this.writer,r=n.json,i=n.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);const a=r.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class $_{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class q_{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const n=this.writer,r=n.extensionsUsed,i={};t.pbrMetallicRoughness.baseColorFactor&&(i.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),i.specularFactor=o,i.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(i.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const t={index:n.processTexture(e.specularMap)};n.applyTextureTransform(t,e.specularMap),i.specularGlossinessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class X_{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){const t={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(t,e.clearcoatMap),i.clearcoatTexture=t}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const t={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(t,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){const t={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(t,e.clearcoatNormalMap),i.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Y_{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){const t={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(t,e.transmissionMap),i.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class K_{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){const t={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(t,e.thicknessMap),i.thicknessTexture=t}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}function J_(e,t,n){console.log(e),t.endsWith(".json")||(t+=".json"),e instanceof Object&&(e=JSON.stringify(e,void 0,n));let r="data:application/json;charset=utf-8,"+encodeURIComponent(e),i=document.createElement("A");i.setAttribute("href",r),i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}v_.Utils={insertKeyframe:function(e,t){const n=.001,r=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+r),a=e.createInterpolant(new e.ValueBufferType(r));let s;if(0===e.times.length){i[0]=t;for(let e=0;e<r;e++)o[e]=0;s=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<n)return 0;i[0]=t,i.set(e.times,1),o.set(a.evaluate(t),0),o.set(e.values,r),s=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<n)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),o.set(e.values,0),o.set(a.evaluate(t),e.values.length),s=i.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<n)return l;if(e.times[l]<t&&e.times[l+1]>t){i.set(e.times.slice(0,l+1),0),i[l+1]=t,i.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*r),0),o.set(a.evaluate(t),(l+1)*r),o.set(e.values.slice((l+1)*r),(l+2)*r),s=l+1;break}}return e.times=i,e.values=o,s},mergeMorphTargetTracks:function(e,t){const n=[],r={},i=e.tracks;for(let o=0;o<i.length;++o){let e=i[o];const a=nv.parseTrackName(e.name),s=nv.findNode(t,a.nodeName);if("morphTargetInfluences"!==a.propertyName||void 0===a.propertyIndex){n.push(e);continue}if(e.createInterpolant!==e.InterpolantFactoryMethodDiscrete&&e.createInterpolant!==e.InterpolantFactoryMethodLinear){if(e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),e=e.clone(),e.setInterpolation(Vo)}const l=s.morphTargetInfluences.length,c=s.morphTargetDictionary[a.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(void 0===r[s.uuid]){u=e.clone();const t=new u.ValueBufferType(l*u.times.length);for(let e=0;e<u.times.length;e++)t[e*l+c]=u.values[e];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=t,r[s.uuid]=u,n.push(u);continue}const h=e.createInterpolant(new e.ValueBufferType(1));u=r[s.uuid];for(let t=0;t<u.times.length;t++)u.values[t*l+c]=h.evaluate(u.times[t]);for(let t=0;t<e.times.length;t++){const n=this.insertKeyframe(u,e.times[t]);u.values[n*l+c]=e.values[t]}}return e.tracks=n,e}};const Q_="line",Z_="tube",eS="cone",tS=eS;class nS{constructor(e,t,n,r,i,o,a,s,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:tS;this._id=void 0,this._parentScene=void 0,this._points=void 0,this._currPosGeom=void 0,this._currPosGeomArray=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._trace_type=void 0,this._parentRobot=void 0,this._robotPart=void 0,this._times=void 0,this._currRotGeom=void 0,this._currRotGeomArray=void 0,this._rotations=void 0,this._density=void 0,this._axisSize=void 0,this._traceSize=void 0,this._timespan=void 0,this._timespanIndex=void 0,this._color=void 0===l?ny():l,this._trace_type=tS,this._id=(new yy).value(),this._timespan=s,this._timespanIndex=[],this._currPosGeomArray=[],this._currRotGeomArray=[],this._rootGroup=new Bb.Group,this._currPosGeom=this.newPosGeom(),this._rootGroup.add(this._currPosGeom),this._currRotGeom=this.newRotGeom(),this._rootGroup.add(this._currRotGeom),this._is_visible=!0,this._points=[],this._parentRobot=t,this._robotPart=n,this._times=r,this._opacity=1,this._rotations=[],this._density=i,this._axisSize=o,this._traceSize=a,console.log(a),this._parentScene=new m_(void 0),this.update(e,t,n,r,u,c);let h=new WeakRef(this);t.afterParentSceneSet().subscribe((e=>{let[,t]=e,n=h.deref();return void 0!==n&&(void 0===t?(n.setParentScene(void 0),!1):(n.updatePoints(),!0))})),t.afterpositionOffsetSet().subscribe((()=>{let e=h.deref();return void 0!==e&&(e.updatePoints(),!0)}))}id(){return this._id}density(){return this._density}setDensity(e){this._density=e,this.updateRot(this._rotations)}axisSize(){return this._axisSize}setAxisSize(e){this._axisSize=e,this.updateRot(this._rotations)}rotations(){return this._rotations}timespanIndex(){return this._timespanIndex}updateTimespan(e){var t,n;if(2!==e.length||void 0===this._times)return;this._timespan=e;let r=0,i=this._times.length-1;if(null!==(t=this._parentRobot.parentScene())&&void 0!==t&&t.isTimeWarping()){var o,a,s,l;let t=null===(o=this._parentRobot.parentScene())||void 0===o||null===(a=o.timeWarping())||void 0===a?void 0:a.timeWarpMap(),n=null===(s=this._parentRobot.parentScene())||void 0===s||null===(l=s.timeWarping())||void 0===l?void 0:l.indexMap();if(void 0===t||void 0===n)return;for(let i=0;i<t[1].length;i++)if(t[0][i]>=e[0]){r=n[1][i];break}for(let r=t[1].length-1;r>=0;r--)if(t[0][r]<=e[1]){i=n[1][r];break}}else{for(let t=0;t<this._times.length;t++)if(this._times[t]>=e[0]){r=t;break}for(let t=this._times.length-1;t>=0;t--)if(this._times[t]<=e[1]){i=t;break}}this._timespanIndex=[r,i];for(let u=0;u<this._currPosGeomArray.length;u++)void 0!==this._currPosGeomArray[u]&&(this._currPosGeomArray[u].visible=!(u<r||u>i));let c=Math.round(1/this._density);for(let u=0;u<this._currRotGeomArray.length;u+=c)void 0!==this._currRotGeomArray[u]&&(this._currRotGeomArray[u].visible=!(u<r||u>i));null===(n=this.parentScene())||void 0===n||n.render()}setTraceSize(e){var t;for(let n=0;n<this._currPosGeomArray.length;n++)void 0!==this._currPosGeomArray[n]&&this._currPosGeomArray[n].scale.set(e,e,e);this._traceSize=e,null===(t=this.parentScene())||void 0===t||t.render()}updatePoints(){let e=this.robot(),t=e.parentScene();if(!t)return!1;{let n,r=this.robotPart();if(r instanceof d_)n=t.frameDataFor(e,this.times(),r,!0).jointPositions;else{if(!(r instanceof p_))throw new Error("Invalid robotPart type");n=t.frameDataFor(e,this.times(),r,!0).linkPositions}this.setPoints(n)}return!0}beforeParentSceneSet(){return this._parentScene.beforeSet()}afterParentSceneSet(){return this._parentScene.afterSet()}robot(){return this._parentRobot}robotPart(){return this._robotPart}times(){return this._times}color(){return this._color}traverseMeshes(e){this._rootGroup.traverse((t=>{u_(t)&&e(t)}))}traverseMaterials(e){this._rootGroup.traverse((t=>{$b(t.material,e)}))}visible(){return this._is_visible}setVisible(e){e!==this._is_visible&&(this.traverseMeshes((t=>{t.visible=e})),this._is_visible=e,ir.updateUI(),ir.render())}opacity(){return this._opacity}setOpacity(e){this._opacity=ry(e,0,1),this.traverseMaterials((e=>{e.opacity=this._opacity})),ir.updateUI(),ir.render()}parentScene(){return this._parentScene.value()}setTraceType(e){this.update(this._points,this._parentRobot,this._robotPart,this.times(),e)}traceType(){return this._trace_type}newPosGeom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tS;void 0===e&&(e=[]),0===e.length?e.push(new Bb.Vector3,new Bb.Vector3):1===e.length&&e.push(e[0].clone());const n=new Bb.CatmullRomCurve3(e,!1);if(t===Q_){const t=(new Bb.BufferGeometry).setFromPoints(n.getPoints(e.length)),r=new Bb.LineBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});return new Bb.Line(t,r)}if(t===Z_){const t=new Bb.TubeGeometry(n,2*e.length,.005,8,!0),r=new Bb.MeshBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});return new Bb.Mesh(t,r)}if(t===eS){let t=new Bb.Group;const n=new Bb.Matrix4,r=new Bb.MeshBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});this._currPosGeomArray=[];for(let i=0;i<e.length-1;i++){const o=e[i],a=e[i+1],s=o.distanceTo(a);if(0===s)continue;const l=.005,c=s,u=new Bb.Mesh(new Bb.ConeGeometry(l,c),r);u.rotateX(Math.PI/2);const h=new Bb.Group;h.add(u),h.position.copy(o),n.lookAt(a,o,h.up),h.quaternion.setFromRotationMatrix(n);let d=new Bb.Vector3;d.subVectors(a,o).normalize(),h.position.addScaledVector(d,s/2),t.add(h),this._currPosGeomArray[i]=h,this._currPosGeomArray[i].scale.set(this._traceSize,this._traceSize,this._traceSize)}return this.updateTimespan(this._timespan),t}throw new Error('Unknown LineTraceType "'.concat(t,'"'))}newRotGeom(e){void 0===e&&(e=this._rotations);let t=this._points;void 0===t&&(t=[]),0===t.length?t.push(new Bb.Vector3,new Bb.Vector3):1===t.length&&t.push(t[0].clone());let n=new Bb.Group,r=Math.round(1/this._density);this._currRotGeomArray=[];for(let i=0;i<t.length-1;i+=r){const r=t[i],o=new Bb.AxesHelper(this._axisSize);void 0!==e&&o.setRotationFromQuaternion(e[i]),o.position.copy(r),n.add(o),this._currRotGeomArray[i]=o}return this.updateTimespan(this._timespan),n}setParentScene(e){e!==this._parentScene.value()&&(this._parentScene.setValue(((e,t)=>{e&&(e.scene().remove(this._rootGroup),e.render())}),e,((e,t)=>{void 0!==t&&(t.scene().add(this._rootGroup),t.render())})),ir.updateUI())}points(){return this._points}clonedPoints(){return this._points.map((e=>e.clone()))}setPoints(e){this.update(e,this._parentRobot,this._robotPart,this.times(),this._trace_type)}update(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tS,o=arguments.length>5?arguments[5]:void 0;this._points=e,this._parentRobot=t,this._robotPart=n,this._times=r,void 0!==o&&(this._rotations=o),this.updateRot(o);let a=this.newPosGeom(e,i);this._rootGroup.remove(this._currPosGeom),this._currPosGeom=a,this._rootGroup.add(this._currPosGeom),this._trace_type=i}updateRot(e){let t=this.newRotGeom(e);this._rootGroup.remove(this._currRotGeom),this._currRotGeom=t,this._rootGroup.add(this._currRotGeom)}clone(){let e=[];for(const n of this._points)e.push(n.clone());let t=new nS(e,this._parentRobot,this._robotPart,this.times(),this._density,this._axisSize,this._traceSize,this._timespan,this._color,this._rotations,this._trace_type);return t.setVisible(this._is_visible),t._color=this._color,t}}class rS{constructor(e){this._beforeDestroyed=void 0,this._value=void 0,this._afterDestroyed=void 0,this._value=e,this._beforeDestroyed=new f_,this._afterDestroyed=new f_}beforeDestroyed(){return this._beforeDestroyed}afterDestroyed(){return this._afterDestroyed}isAlive(){return!this.isDestroyed()}isDestroyed(){return void 0===this._value}deref(){return this._value}ifElseAlive(e,t){let n=this._value;return void 0!==n?e(n):t()}ifAlive(e){let t=this._value;t&&e(t)}destroy(){let e=this._value;void 0!==e&&(this._beforeDestroyed.call(e),this._value=void 0,this._afterDestroyed.call(e))}}class iS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this._objs=void 0,this._objs=[],e)for(const t of e)this.push(t)}destroyContents(){for(const[,e]of this._objs)e.destroy();this.clean()}clean(){let e=0;for(;e<this._objs.length;){void 0!==this._objs[e][1].deref()?e+=1:this._objs.splice(e,1)}}contains(e){for(const t of this)if(t===e)return!0;return!1}push(e){let t=new WeakRef(e),n=e.beforeDestroyed().subscribe((()=>{var e;let n=null===(e=t.deref())||void 0===e?void 0:e.deref();return void 0!==n&&(this.remove(n),!0)}));this._objs.push([n,e])}remove(e){for(let t=0;t<this._objs.length;t++){let[n,r]=this._objs[t],i=r.deref();if(void 0!==i){if(i===e)return this._objs.splice(t,1),n(),!0}else this._objs.splice(t,1),t--}return!1}get length(){let e=0;for(const t of this)e+=1;return e}aliveContents(){let e=this;return function*(){for(let t=0;t<e._objs.length;t++){let[n,r]=e._objs[t],i=r.deref();void 0!==i?yield[i,r]:(e._objs.splice(t,1),n(),t--)}}()}[Symbol.iterator](){let e=this;return function*(){for(let t=0;t<e._objs.length;t++){let[n,r]=e._objs[t],i=r.deref();void 0!==i?(yield i,t+=1):(e._objs.splice(t,1),n(),t--)}}()}}class oS{constructor(e,t,n){this._ts1=void 0,this._ts2=void 0,this._distFunction=void 0,this._indexMap=void 0,this._valueMap=void 0,this.ts1=()=>this._ts1,this.ts2=()=>this._ts2,this.distFunction=()=>this._distFunction,this.indexMap=()=>this._indexMap,this.valueMap=()=>this._valueMap,this.doTimeWarp=(e,t,n,r)=>{var i;return e<t[0]?e=t[0]:e>=t[t.length-1]&&(e=t[t.length-1]),null!==(i=n[Math.min(ly(t,e),t.length-1)])&&void 0!==i?i:e},this.timeWarpMap=()=>this._valueMap,this.timeWarp=(e,t)=>{let[n,r]=this.timeWarpMap();return this.doTimeWarp(e,n,r,t)},this.untimeWarp=(e,t)=>{let[n,r]=this.timeWarpMap();return this.doTimeWarp(e,r,n,t)},this._ts1=e,this._ts2=t,this._distFunction=n,this._indexMap=function(e,t,n){let r=[];for(let i=0;i<e.length;i++){r[i]=[];for(let o=0;o<t.length;o++){let a=1/0;i>0?(a=Math.min(a,r[i-1][o]),o>0&&(a=Math.min(a,r[i-1][o-1]),a=Math.min(a,r[i][o-1]))):a=o>0?Math.min(a,r[i][o-1]):0,r[i][o]=a+n(e[i],t[o],i,o)}}return function(e){let t=e.length-1,n=void 0!==e[0]?e[0].length-1:0,r=[],i=[];for(;t>0||n>0;)t>0?n>0?e[t-1][n]<e[t-1][n-1]?e[t-1][n]<e[t][n-1]?(r.push(t-1),i.push(n),t--):(r.push(t),i.push(n-1),n--):e[t-1][n-1]<e[t][n-1]?(r.push(t-1),i.push(n-1),t--,n--):(r.push(t),i.push(n-1),n--):(r.push(t-1),i.push(n),t--):(r.push(t),i.push(n-1),n--);return r.reverse(),i.reverse(),[r,i]}(r)}(e,t,n);let r=[],i=[],[a,s]=this._indexMap;for(const[o,u]of ay(a,s))r.push(e[o]),i.push(t[u]);this._valueMap=[r,i];let[l,c]=this._valueMap;o()(l[0]<=l[l.length-1]),o()(c[0]<=c[c.length-1])}}function aS(e,t){let n,r;if(void 0===t)for(const i of e)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function sS(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function lS(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function cS(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function uS(e){return e}var hS=1,dS=2,pS=3,fS=4,mS=1e-6;function gS(e){return"translate("+e+",0)"}function vS(e){return"translate(0,"+e+")"}function bS(e){return t=>+e(t)}function yS(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function xS(){return!this.__axis}function wS(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,c=e===hS||e===fS?-1:1,u=e===fS||e===dS?"x":"y",h=e===hS||e===pS?gS:vS;function d(d){var p=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,f=null==i?t.tickFormat?t.tickFormat.apply(t,n):uS:i,m=Math.max(o,0)+s,g=t.range(),v=+g[0]+l,b=+g[g.length-1]+l,y=(t.bandwidth?yS:bS)(t.copy(),l),x=d.selection?d.selection():d,w=x.selectAll(".domain").data([null]),_=x.selectAll(".tick").data(p,t).order(),S=_.exit(),M=_.enter().append("g").attr("class","tick"),T=_.select("line"),E=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),T=T.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),E=E.merge(M.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",e===hS?"0em":e===pS?"0.71em":"0.32em")),d!==x&&(w=w.transition(d),_=_.transition(d),T=T.transition(d),E=E.transition(d),S=S.transition(d).attr("opacity",mS).attr("transform",(function(e){return isFinite(e=y(e))?h(e+l):this.getAttribute("transform")})),M.attr("opacity",mS).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:y(e))+l)}))),S.remove(),w.attr("d",e===fS||e===dS?a?"M"+c*a+","+v+"H"+l+"V"+b+"H"+c*a:"M"+l+","+v+"V"+b:a?"M"+v+","+c*a+"V"+l+"H"+b+"V"+c*a:"M"+v+","+l+"H"+b),_.attr("opacity",1).attr("transform",(function(e){return h(y(e)+l)})),T.attr(u+"2",c*o),E.attr(u,c*m).text(f),x.filter(xS).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===dS?"start":e===fS?"end":"middle"),x.each((function(){this.__axis=y}))}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),d):r&&r.slice()},d.tickFormat=function(e){return arguments.length?(i=e,d):i},d.tickSize=function(e){return arguments.length?(o=a=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(a=+e,d):a},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d.offset=function(e){return arguments.length?(l=+e,d):l},d}function _S(e){return wS(pS,e)}function SS(e){return wS(fS,e)}function MS(){}function TS(e){return null==e?MS:function(){return this.querySelector(e)}}function ES(){return[]}function CS(e){return null==e?ES:function(){return this.querySelectorAll(e)}}function AS(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function RS(e){return function(){return this.matches(e)}}function kS(e){return function(t){return t.matches(e)}}var PS=Array.prototype.find;function LS(){return this.firstElementChild}var OS=Array.prototype.filter;function NS(){return Array.from(this.children)}function IS(e){return new Array(e.length)}function DS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function jS(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new DS(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function FS(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new DS(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function zS(e){return e.__data__}function BS(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function US(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}DS.prototype={constructor:DS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var GS="http://www.w3.org/1999/xhtml";const VS={svg:"http://www.w3.org/2000/svg",xhtml:GS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function HS(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),VS.hasOwnProperty(t)?{space:VS[t],local:e}:e}function WS(e){return function(){this.removeAttribute(e)}}function $S(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qS(e,t){return function(){this.setAttribute(e,t)}}function XS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function YS(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function KS(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function JS(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function QS(e){return function(){this.style.removeProperty(e)}}function ZS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function eM(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function tM(e,t){return e.style.getPropertyValue(t)||JS(e).getComputedStyle(e,null).getPropertyValue(t)}function nM(e){return function(){delete this[e]}}function rM(e,t){return function(){this[e]=t}}function iM(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function oM(e){return e.trim().split(/^|\s+/)}function aM(e){return e.classList||new sM(e)}function sM(e){this._node=e,this._names=oM(e.getAttribute("class")||"")}function lM(e,t){for(var n=aM(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function cM(e,t){for(var n=aM(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uM(e){return function(){lM(this,e)}}function hM(e){return function(){cM(this,e)}}function dM(e,t){return function(){(t.apply(this,arguments)?lM:cM)(this,e)}}function pM(){this.textContent=""}function fM(e){return function(){this.textContent=e}}function mM(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function gM(){this.innerHTML=""}function vM(e){return function(){this.innerHTML=e}}function bM(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function yM(){this.nextSibling&&this.parentNode.appendChild(this)}function xM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wM(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===GS&&t.documentElement.namespaceURI===GS?t.createElement(e):t.createElementNS(n,e)}}function _M(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function SM(e){var t=HS(e);return(t.local?_M:wM)(t)}function MM(){return null}function TM(){var e=this.parentNode;e&&e.removeChild(this)}function EM(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function CM(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function AM(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function RM(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function kM(e,t,n){var r=JS(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function PM(e,t){return function(){return kM(this,e,t)}}function LM(e,t){return function(){return kM(this,e,t.apply(this,arguments))}}sM.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var OM=[null];function NM(e,t){this._groups=e,this._parents=t}function IM(){return new NM([[document.documentElement]],OM)}NM.prototype=IM.prototype={constructor:NM,select:function(e){"function"!==typeof e&&(e=TS(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new NM(r,this._parents)},selectAll:function(e){e="function"===typeof e?AS(e):CS(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new NM(r,i)},selectChild:function(e){return this.select(null==e?LS:function(e){return function(){return PS.call(this.children,e)}}("function"===typeof e?e:kS(e)))},selectChildren:function(e){return this.selectAll(null==e?NS:function(e){return function(){return OS.call(this.children,e)}}("function"===typeof e?e:kS(e)))},filter:function(e){"function"!==typeof e&&(e=RS(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new NM(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,zS);var n=t?FS:jS,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,p=BS(e.call(u,u&&u.__data__,c,r)),f=p.length,m=s[c]=new Array(f),g=a[c]=new Array(f);n(u,h,m,g,l[c]=new Array(d),p,t);for(var v,b,y=0,x=0;y<f;++y)if(v=m[y]){for(y>=x&&(x=y+1);!(b=g[x])&&++x<f;);v._next=b||null}}return(a=new NM(a,r))._enter=s,a._exit=l,a},enter:function(){return new NM(this._enter||this._groups.map(IS),this._parents)},exit:function(){return new NM(this._exit||this._groups.map(IS),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<i;++l)s[l]=n[l];return new NM(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=US);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new NM(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=HS(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?$S:WS:"function"===typeof t?n.local?KS:YS:n.local?XS:qS)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?QS:"function"===typeof t?eM:ZS)(e,t,null==n?"":n)):tM(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?nM:"function"===typeof t?iM:rM)(e,t)):this.node()[e]},classed:function(e,t){var n=oM(e+"");if(arguments.length<2){for(var r=aM(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?dM:t?uM:hM)(n,t))},text:function(e){return arguments.length?this.each(null==e?pM:("function"===typeof e?mM:fM)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?gM:("function"===typeof e?bM:vM)(e)):this.node().innerHTML},raise:function(){return this.each(yM)},lower:function(){return this.each(xM)},append:function(e){var t="function"===typeof e?e:SM(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:SM(e),r=null==t?MM:"function"===typeof t?t:TS(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(TM)},clone:function(e){return this.select(e?CM:EM)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?RM:AM,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?LM:PM)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const DM=IM;var jM={value:()=>{}};function FM(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new zM(r)}function zM(e){this._=e}function BM(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function UM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=jM,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}zM.prototype=FM.prototype={constructor:zM,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=UM(i[n],e.name,t);else if(null==t)for(n in i)i[n]=UM(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=BM(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zM(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const GM=FM;var VM,HM,WM=0,$M=0,qM=0,XM=1e3,YM=0,KM=0,JM=0,QM="object"===typeof performance&&performance.now?performance:Date,ZM="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eT(){return KM||(ZM(tT),KM=QM.now()+JM)}function tT(){KM=0}function nT(){this._call=this._time=this._next=null}function rT(e,t,n){var r=new nT;return r.restart(e,t,n),r}function iT(){KM=(YM=QM.now())+JM,WM=$M=0;try{!function(){eT(),++WM;for(var e,t=VM;t;)(e=KM-t._time)>=0&&t._call.call(void 0,e),t=t._next;--WM}()}finally{WM=0,function(){var e,t,n=VM,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:VM=t);HM=e,aT(r)}(),KM=0}}function oT(){var e=QM.now(),t=e-YM;t>XM&&(JM-=t,YM=e)}function aT(e){WM||($M&&($M=clearTimeout($M)),e-KM>24?(e<1/0&&($M=setTimeout(iT,e-QM.now()-JM)),qM&&(qM=clearInterval(qM))):(qM||(YM=QM.now(),qM=setInterval(oT,XM)),WM=1,ZM(iT)))}function sT(e,t,n){var r=new nT;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}nT.prototype=rT.prototype={constructor:nT,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?eT():+n)+(null==t?0:+t),this._next||HM===this||(HM?HM._next=this:VM=this,HM=this),this._call=e,this._time=n,aT()},stop:function(){this._call&&(this._call=null,this._time=1/0,aT())}};var lT=GM("start","end","cancel","interrupt"),cT=[],uT=0,hT=1,dT=2,pT=3,fT=4,mT=5,gT=6;function vT(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=hT,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,d;if(n.state!==hT)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===pT)return sT(a);d.state===fT?(d.state=gT,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=gT,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(sT((function(){n.state===pT&&(n.state=fT,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=dT,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dT){for(n.state=pT,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=mT,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===mT&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=gT,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=rT(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:lT,tween:cT,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:uT})}function bT(e,t){var n=xT(e,t);if(n.state>uT)throw new Error("too late; already scheduled");return n}function yT(e,t){var n=xT(e,t);if(n.state>pT)throw new Error("too late; already running");return n}function xT(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wT(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _T,ST,MT,TT,ET=180/Math.PI,CT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AT(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ET,skewX:Math.atan(l)*ET,scaleX:a,scaleY:s}}function RT(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:wT(e,i)},{i:l-2,x:wT(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:wT(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:wT(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:wT(e,n)},{i:s-2,x:wT(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var kT=RT((function(e){return"none"===e?CT:(_T||(_T=document.createElement("DIV"),ST=document.documentElement,MT=document.defaultView),_T.style.transform=e,e=MT.getComputedStyle(ST.appendChild(_T),null).getPropertyValue("transform"),ST.removeChild(_T),AT(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),PT=RT((function(e){return null==e?CT:(TT||(TT=document.createElementNS("http://www.w3.org/2000/svg","g")),TT.setAttribute("transform",e),(e=TT.transform.baseVal.consolidate())?AT((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):CT)}),", ",")",")");function LT(e,t){var n,r;return function(){var i=yT(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function OT(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=yT(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function NT(e,t,n){var r=e._id;return e.each((function(){var e=yT(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return xT(e,r).value[t]}}function IT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function jT(){}var FT=.7,zT=1/FT,BT="\\s*([+-]?\\d+)\\s*",UT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",GT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VT=/^#([0-9a-f]{3,8})$/,HT=new RegExp("^rgb\\(".concat(BT,",").concat(BT,",").concat(BT,"\\)$")),WT=new RegExp("^rgb\\(".concat(GT,",").concat(GT,",").concat(GT,"\\)$")),$T=new RegExp("^rgba\\(".concat(BT,",").concat(BT,",").concat(BT,",").concat(UT,"\\)$")),qT=new RegExp("^rgba\\(".concat(GT,",").concat(GT,",").concat(GT,",").concat(UT,"\\)$")),XT=new RegExp("^hsl\\(".concat(UT,",").concat(GT,",").concat(GT,"\\)$")),YT=new RegExp("^hsla\\(".concat(UT,",").concat(GT,",").concat(GT,",").concat(UT,"\\)$")),KT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function JT(){return this.rgb().formatHex()}function QT(){return this.rgb().formatRgb()}function ZT(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?eE(t):3===n?new rE(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tE(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=HT.exec(e))?new rE(t[1],t[2],t[3],1):(t=WT.exec(e))?new rE(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=$T.exec(e))?tE(t[1],t[2],t[3],t[4]):(t=qT.exec(e))?tE(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=XT.exec(e))?cE(t[1],t[2]/100,t[3]/100,1):(t=YT.exec(e))?cE(t[1],t[2]/100,t[3]/100,t[4]):KT.hasOwnProperty(e)?eE(KT[e]):"transparent"===e?new rE(NaN,NaN,NaN,0):null}function eE(e){return new rE(e>>16&255,e>>8&255,255&e,1)}function tE(e,t,n,r){return r<=0&&(e=t=n=NaN),new rE(e,t,n,r)}function nE(e,t,n,r){return 1===arguments.length?function(e){return e instanceof jT||(e=ZT(e)),e?new rE((e=e.rgb()).r,e.g,e.b,e.opacity):new rE}(e):new rE(e,t,n,null==r?1:r)}function rE(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function iE(){return"#".concat(lE(this.r)).concat(lE(this.g)).concat(lE(this.b))}function oE(){const e=aE(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(sE(this.r),", ").concat(sE(this.g),", ").concat(sE(this.b)).concat(1===e?")":", ".concat(e,")"))}function aE(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sE(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lE(e){return((e=sE(e))<16?"0":"")+e.toString(16)}function cE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hE(e,t,n,r)}function uE(e){if(e instanceof hE)return new hE(e.h,e.s,e.l,e.opacity);if(e instanceof jT||(e=ZT(e)),!e)return new hE;if(e instanceof hE)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new hE(a,s,l,e.opacity)}function hE(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function dE(e){return(e=(e||0)%360)<0?e+360:e}function pE(e){return Math.max(0,Math.min(1,e||0))}function fE(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function mE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gE(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vE(){}IT(jT,ZT,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JT,formatHex:JT,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return uE(this).formatHsl()},formatRgb:QT,toString:QT}),IT(rE,nE,DT(jT,{brighter(e){return e=null==e?zT:Math.pow(zT,e),new rE(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?FT:Math.pow(FT,e),new rE(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rE(sE(this.r),sE(this.g),sE(this.b),aE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iE,formatHex:iE,formatHex8:function(){return"#".concat(lE(this.r)).concat(lE(this.g)).concat(lE(this.b)).concat(lE(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:oE,toString:oE})),IT(hE,(function(e,t,n,r){return 1===arguments.length?uE(e):new hE(e,t,n,null==r?1:r)}),DT(jT,{brighter(e){return e=null==e?zT:Math.pow(zT,e),new hE(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?FT:Math.pow(FT,e),new hE(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new rE(fE(e>=240?e-240:e+120,i,r),fE(e,i,r),fE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new hE(dE(this.h),pE(this.s),pE(this.l),aE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=aE(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(dE(this.h),", ").concat(100*pE(this.s),"%, ").concat(100*pE(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var bE=.7,yE=1/bE,xE="\\s*([+-]?\\d+)\\s*",wE="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SE=/^#([0-9a-f]{3,8})$/,ME=new RegExp("^rgb\\("+[xE,xE,xE]+"\\)$"),TE=new RegExp("^rgb\\("+[_E,_E,_E]+"\\)$"),EE=new RegExp("^rgba\\("+[xE,xE,xE,wE]+"\\)$"),CE=new RegExp("^rgba\\("+[_E,_E,_E,wE]+"\\)$"),AE=new RegExp("^hsl\\("+[wE,_E,_E]+"\\)$"),RE=new RegExp("^hsla\\("+[wE,_E,_E,wE]+"\\)$"),kE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function PE(){return this.rgb().formatHex()}function LE(){return this.rgb().formatRgb()}function OE(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=SE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?NE(t):3===n?new jE(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?IE(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?IE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ME.exec(e))?new jE(t[1],t[2],t[3],1):(t=TE.exec(e))?new jE(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=EE.exec(e))?IE(t[1],t[2],t[3],t[4]):(t=CE.exec(e))?IE(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=AE.exec(e))?UE(t[1],t[2]/100,t[3]/100,1):(t=RE.exec(e))?UE(t[1],t[2]/100,t[3]/100,t[4]):kE.hasOwnProperty(e)?NE(kE[e]):"transparent"===e?new jE(NaN,NaN,NaN,0):null}function NE(e){return new jE(e>>16&255,e>>8&255,255&e,1)}function IE(e,t,n,r){return r<=0&&(e=t=n=NaN),new jE(e,t,n,r)}function DE(e,t,n,r){return 1===arguments.length?function(e){return e instanceof vE||(e=OE(e)),e?new jE((e=e.rgb()).r,e.g,e.b,e.opacity):new jE}(e):new jE(e,t,n,null==r?1:r)}function jE(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function FE(){return"#"+BE(this.r)+BE(this.g)+BE(this.b)}function zE(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function BE(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function UE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new VE(e,t,n,r)}function GE(e){if(e instanceof VE)return new VE(e.h,e.s,e.l,e.opacity);if(e instanceof vE||(e=OE(e)),!e)return new VE;if(e instanceof VE)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new VE(a,s,l,e.opacity)}function VE(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function HE(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function WE(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function $E(e){return function(){return e}}function qE(e,t){return function(n){return e+n*t}}function XE(e){return 1===(e=+e)?YE:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):$E(isNaN(t)?n:t)}}function YE(e,t){var n=t-e;return n?qE(e,n):$E(isNaN(e)?t:e)}mE(vE,OE,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:PE,formatHex:PE,formatHsl:function(){return GE(this).formatHsl()},formatRgb:LE,toString:LE}),mE(jE,DE,gE(vE,{brighter:function(e){return e=null==e?yE:Math.pow(yE,e),new jE(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?bE:Math.pow(bE,e),new jE(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FE,formatHex:FE,formatRgb:zE,toString:zE})),mE(VE,(function(e,t,n,r){return 1===arguments.length?GE(e):new VE(e,t,n,null==r?1:r)}),gE(vE,{brighter:function(e){return e=null==e?yE:Math.pow(yE,e),new VE(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?bE:Math.pow(bE,e),new VE(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jE(HE(e>=240?e-240:e+120,i,r),HE(e,i,r),HE(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const KE=function e(t){var n=XE(t);function r(e,t){var r=n((e=DE(e)).r,(t=DE(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=YE(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function JE(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=DE(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}JE((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return WE((n-r/t)*t,a,i,o,s)}})),JE((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return WE((n-r/t)*t,i,o,a,s)}}));var QE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZE=new RegExp(QE.source,"g");function eC(e,t){var n,r,i,o=QE.lastIndex=ZE.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=QE.exec(e))&&(r=ZE.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:wT(n,r)})),o=ZE.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function tC(e,t){var n;return("number"===typeof t?wT:t instanceof ZT?KE:(n=ZT(t))?(t=n,KE):eC)(e,t)}function nC(e){return function(){this.removeAttribute(e)}}function rC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iC(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function oC(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function aC(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function sC(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function lC(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function cC(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function uC(e,t){return function(){bT(this,e).delay=+t.apply(this,arguments)}}function hC(e,t){return t=+t,function(){bT(this,e).delay=t}}function dC(e,t){return function(){yT(this,e).duration=+t.apply(this,arguments)}}function pC(e,t){return t=+t,function(){yT(this,e).duration=t}}var fC=DM.prototype.constructor;function mC(e){return function(){this.style.removeProperty(e)}}var gC=0;function vC(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function bC(){return++gC}var yC=DM.prototype;vC.prototype=function(e){return DM().transition(e)}.prototype={constructor:vC,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=TS(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=e.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,vT(h[d],t,n,d,h,xT(s,n)));return new vC(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=CS(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=e.call(l,l.__data__,h,c),f=xT(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&vT(d,t,n,m,p,f);o.push(p),a.push(l)}return new vC(o,a,t,n)},selectChild:yC.selectChild,selectChildren:yC.selectChildren,filter:function(e){"function"!==typeof e&&(e=RS(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new vC(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<r;++s)a[s]=t[s];return new vC(a,this._parents,this._name,this._id)},selection:function(){return new fC(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=bC(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=xT(a,t);vT(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vC(r,this._parents,e,n)},call:yC.call,nodes:yC.nodes,node:yC.node,size:yC.size,empty:yC.empty,each:yC.each,on:function(e,t){var n=this._id;return arguments.length<2?xT(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?bT:yT;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=HS(e),r="transform"===n?PT:tC;return this.attrTween(e,"function"===typeof t?(n.local?sC:aC)(n,r,NT(this,"attr."+e,t)):null==t?(n.local?rC:nC)(n):(n.local?oC:iC)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=HS(e);return this.tween(n,(r.local?lC:cC)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?kT:tC;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=tM(this,e),a=(this.style.removeProperty(e),tM(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,mC(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=tM(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=tM(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,NT(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=yT(this,e),c=l.on,u=null==l.value[a]?o||(o=mC(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=tM(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(NT(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=xT(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?LT:OT)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?uC:hC)(t,e)):xT(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?dC:pC)(t,e)):xT(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){yT(this,e).ease=t}}(t,e)):xT(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;yT(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=yT(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:yC[Symbol.iterator]};var xC={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function wC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}DM.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>dT&&n.state<mT,n.state=gT,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},DM.prototype.transition=function(e){var t,n;e instanceof vC?(t=e._id,e=e._name):(t=bC(),(n=xC).time=eT(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&vT(a,e,t,c,s,n||wC(a,t));return new vC(r,this._parents,e,t)};const{abs:_C,max:SC,min:MC}=Math;function TC(e){return[+e[0],+e[1]]}function EC(e){return[TC(e[0]),TC(e[1])]}["w","e"].map(CC),["n","s"].map(CC),["n","w","e","s","nw","ne","sw","se"].map(CC);function CC(e){return{type:e}}function AC(e){return"string"===typeof e?new NM([[document.querySelector(e)]],[document.documentElement]):new NM([[e]],OM)}function RC(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const kC={passive:!1},PC={capture:!0,passive:!1};function LC(e){e.stopImmediatePropagation()}function OC(e){e.preventDefault(),e.stopImmediatePropagation()}const NC=e=>()=>e;function IC(e,t){let{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:c,dy:u,dispatch:h}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function DC(e){return!e.ctrlKey&&!e.button}function jC(){return this.parentNode}function FC(e,t){return null==t?{x:e.x,y:e.y}:t}function zC(){return navigator.maxTouchPoints||"ontouchstart"in this}function BC(){var e,t,n,r,i=DC,o=jC,a=FC,s=zC,l={},c=GM("start","drag","end"),u=0,h=0;function d(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,kC).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var l=y(this,o.call(this,a,s),a,s,"mouse");l&&(AC(a.view).on("mousemove.drag",f,PC).on("mouseup.drag",m,PC),function(e){var t=e.document.documentElement,n=AC(e).on("dragstart.drag",OC,PC);"onselectstart"in t?n.on("selectstart.drag",OC,PC):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(a.view),LC(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function f(r){if(OC(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function m(e){AC(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,r=AC(e).on("dragstart.drag",null);t&&(r.on("click.drag",OC,PC),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),OC(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=y(this,s,e,t,a[n].identifier,a[n]))&&(LC(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(OC(e),n("drag",e,r[t]))}function b(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=l[i[t].identifier])&&(LC(e),n("end",e,i[t]))}function y(e,t,n,r,i,o){var s,h,p,f=c.copy(),m=RC(o||n,t);if(null!=(p=a.call(e,new IC("beforestart",{sourceEvent:n,target:d,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-m[0]||0,h=p.y-m[1]||0,function n(o,a,c){var g,v=m;switch(o){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=RC(c||a,t),g=u}f.call(o,e,new IC(o,{sourceEvent:a,subject:p,target:d,identifier:i,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:f}),r)}}return d.filter=function(e){return arguments.length?(i="function"===typeof e?e:NC(!!e),d):i},d.container=function(e){return arguments.length?(o="function"===typeof e?e:NC(e),d):o},d.subject=function(e){return arguments.length?(a="function"===typeof e?e:NC(e),d):a},d.touchable=function(e){return arguments.length?(s="function"===typeof e?e:NC(!!e),d):s},d.on=function(){var e=c.on.apply(c,arguments);return e===c?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}IC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const UC=Math.sqrt(50),GC=Math.sqrt(10),VC=Math.sqrt(2);function HC(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=UC?10:o>=GC?5:o>=VC?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?HC(e,t,2*n):[s,l,c]}function WC(e,t,n){return HC(e=+e,t=+t,n=+n)[2]}function $C(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qC(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XC(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=$C,n=(t,n)=>$C(e(t),n),r=(t,n)=>e(t)-n):(t=e===$C||e===qC?e:YC,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function YC(){return 0}const KC=XC($C),JC=KC.right,QC=(KC.left,XC((function(e){return null===e?NaN:+e})).center,JC);function ZC(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}const eA=e=>()=>e;function tA(e,t){return function(n){return e+n*t}}function nA(e){return 1===(e=+e)?rA:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eA(isNaN(t)?n:t)}}function rA(e,t){var n=t-e;return n?tA(e,n):eA(isNaN(e)?t:e)}const iA=function e(t){var n=nA(t);function r(e,t){var r=n((e=nE(e)).r,(t=nE(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=rA(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function oA(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=nE(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}oA((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return ZC((n-r/t)*t,a,i,o,s)}})),oA((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return ZC((n-r/t)*t,i,o,a,s)}}));function aA(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=fA(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function sA(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function lA(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cA(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=fA(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var uA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hA=new RegExp(uA.source,"g");function dA(e,t){var n,r,i,o=uA.lastIndex=hA.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=uA.exec(e))&&(r=hA.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:lA(n,r)})),o=hA.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function pA(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function fA(e,t){var n,r=typeof t;return null==t||"boolean"===r?eA(t):("number"===r?lA:"string"===r?(n=ZT(t))?(t=n,iA):dA:t instanceof ZT?iA:t instanceof Date?sA:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?pA:Array.isArray(t)?aA:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?cA:lA)(e,t)}function mA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function gA(e){return+e}var vA=[0,1];function bA(e){return e}function yA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function xA(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=yA(i,r),o=n(a,o)):(r=yA(r,i),o=n(o,a)),function(e){return o(r(e))}}function wA(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=yA(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=QC(e,t,1,r)-1;return o[n](i[n](t))}}function _A(){var e,t,n,r,i,o,a=vA,s=vA,l=fA,c=bA;function u(){var e=Math.min(a.length,s.length);return c!==bA&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?wA:xA,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),lA)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,gA),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=mA,u()},h.clamp=function(e){return arguments.length?(c=!!e||bA,u()):c!==bA},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function SA(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var MA,TA=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function EA(e){if(!(t=TA.exec(e)))throw new Error("invalid format: "+e);var t;return new CA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function CA(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function AA(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function RA(e){return(e=AA(Math.abs(e)))?e[1]:NaN}function kA(e,t){var n=AA(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}EA.prototype=CA.prototype,CA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const PA={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kA(100*e,t),r:kA,s:function(e,t){var n=AA(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(MA=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+AA(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LA(e){return e}var OA,NA,IA,DA=Array.prototype.map,jA=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function FA(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?LA:(t=DA.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?LA:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(DA.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=EA(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,b=e.type;"n"===b?(m=!0,b="g"):PA[b]||(void 0===g&&(g=12),v=!0,b="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===d?i:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===d?o:/[%p]/.test(b)?l:"",w=PA[b],_=/[defgprs%]/.test(b);function S(e){var i,o,l,d=y,S=x;if("c"===b)S=w(e)+S,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0===+e&&"+"!==h&&(M=!1),d=(M?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===b?jA[8+MA/3]:"")+S+(M&&"("===h?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var T=d.length+e.length+S.length,E=T<f?new Array(f-T+1).join(t):"";switch(m&&p&&(e=r(E+e,E.length?f-S.length:1/0),E=""),n){case"<":e=d+e+S+E;break;case"=":e=d+E+e+S;break;case"^":e=E.slice(0,T=E.length>>1)+d+e+S+E.slice(T);break;default:e=E+d+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=EA(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(RA(t)/3))),i=Math.pow(10,-r),o=jA[8+r/3];return function(e){return n(i*e)+o}}}}function zA(e,t,n,r){var i,o=function(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?WC(t,e,n):WC(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=EA(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(RA(t)/3)))-RA(Math.abs(e)))}(o,a))||(r.precision=i),IA(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,RA(t)-RA(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-RA(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return NA(r)}function BA(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?HC(t,e,n):HC(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return zA(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=WC(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function UA(){var e=_A()(bA,bA);return e.copy=function(){return t=e,UA().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},SA.apply(e,arguments),BA(e)}function GA(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}OA=FA({thousands:",",grouping:[3],currency:["$",""]}),NA=OA.format,IA=OA.formatPrefix;const VA=GA("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");function HA(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const WA=HA(GA("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var $A,qA,XA,YA,KA,JA,QA,ZA,eR,tR,nR,rR,iR,oR;HA(GA("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),HA(GA("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),HA(GA("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Array.prototype.slice;function aR(e){return function(){return e}}function sR(e){this._context=e}function lR(e){return new sR(e)}function cR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}sR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};const uR=Math.PI,hR=2*uR,dR=1e-6,pR=hR-dR;function fR(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class mR{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?fR:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return fR;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append($A||($A=cR(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(qA||(qA=cR(["Z"]))))}lineTo(e,t){this._append(XA||(XA=cR(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(YA||(YA=cR(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,i,o){this._append(KA||(KA=cR(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+i,this._y1=+o)}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(null===this._x1)this._append(JA||(JA=cR(["M",",",""])),this._x1=e,this._y1=t);else if(h>dR)if(Math.abs(u*s-l*c)>dR&&i){let d=n-o,p=r-a,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),v=Math.sqrt(h),b=i*Math.tan((uR-Math.acos((f+h-m)/(2*g*v)))/2),y=b/v,x=b/g;Math.abs(y-1)>dR&&this._append(ZA||(ZA=cR(["L",",",""])),e+y*c,t+y*u),this._append(eR||(eR=cR(["A",",",",0,0,",",",",",""])),i,i,+(u*d>c*p),this._x1=e+x*s,this._y1=t+x*l)}else this._append(QA||(QA=cR(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;null===this._x1?this._append(tR||(tR=cR(["M",",",""])),l,c):(Math.abs(this._x1-l)>dR||Math.abs(this._y1-c)>dR)&&this._append(nR||(nR=cR(["L",",",""])),l,c),n&&(h<0&&(h=h%hR+hR),h>pR?this._append(rR||(rR=cR(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-a,t-s,n,n,u,this._x1=l,this._y1=c):h>dR&&this._append(iR||(iR=cR(["A",",",",0,",",",",",",",""])),n,n,+(h>=uR),u,this._x1=e+n*Math.cos(i),this._y1=t+n*Math.sin(i)))}rect(e,t,n,r){this._append(oR||(oR=cR(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function gR(e){return e[0]}function vR(e){return e[1]}function bR(e,t){var n=aR(!0),r=null,i=lR,o=null,a=function(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new mR(t)}(s);function s(s){var l,c,u,h=(s=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(s)).length,d=!1;for(null==r&&(o=i(u=a())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,l,s),+t(c,l,s));if(u)return o=null,u+""||null}return e="function"===typeof e?e:void 0===e?gR:aR(e),t="function"===typeof t?t:void 0===t?vR:aR(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:aR(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:aR(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:aR(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function yR(e,t,n){this.k=e,this.x=t,this.y=n}mR.prototype,yR.prototype={constructor:yR,scale:function(e){return 1===e?this:new yR(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new yR(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new yR(1,0,0);yR.prototype;class xR{constructor(e,t,n,r){this._parentScene=void 0,this._currGeom=void 0,this._currGeomArray=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._id=void 0,this._traceFrom=void 0,this._traceTo=void 0,this._baseSceneTimeIndex=void 0,this._id=new yy,this._color=ny(),void 0!==r&&(this._color=r),this._rootGroup=new Bb.Group,this._currGeom=this.newGeom(),this._currGeomArray=[],this._baseSceneTimeIndex=[],this._rootGroup.add(this._currGeom),this._is_visible=!0,this._traceFrom=e,this._traceTo=t,this._opacity=.5,this._parentScene=void 0,this.update(e,t);new WeakRef(this);this.setParentScene(n)}traceFrom(){return this._traceFrom}traceTo(){return this._traceTo}color(){return this._color}id(){return this._id.value()}updateTimespan(){var e,t,n;let r=this._traceFrom,i=this._traceTo,o=[];if(o=(null===(e=r.robot().parentScene())||void 0===e?void 0:e.baseSceneId())===(null===(t=i.robot().parentScene())||void 0===t?void 0:t.id().value())?i.timespanIndex():r.timespanIndex(),2!==o.length)return;let a=[];for(let s=0;s<this._baseSceneTimeIndex.length;s++)if(this._baseSceneTimeIndex[s]>=o[0]){a[0]=s;break}for(let s=this._baseSceneTimeIndex.length-1;s>=0;s--)if(this._baseSceneTimeIndex[s]<=o[1]){a[1]=s;break}for(let s=0;s<this._currGeomArray.length;s++)void 0!==this._currGeomArray[s]&&(s<a[0]||s>a[1]?this._currGeomArray[s].visible=!1:this._currGeomArray[s].visible=!0);null===(n=this.parentScene())||void 0===n||n.render()}newGeom(e,t){if(this._currGeomArray=[],void 0===e||void 0===t)return new Bb.Group;let n=e.points(),r=t.points();if(console.log("points length "+n.length),n.length===r.length){var i,o,a,s;let d=[],p=new Bb.Group,f=[[],[]];if((null===(i=e.robot().parentScene())||void 0===i?void 0:i.baseSceneId())===(null===(o=t.robot().parentScene())||void 0===o?void 0:o.id().value())){var l,c;let t=null===(l=e.robot().parentScene())||void 0===l||null===(c=l.timeWarping())||void 0===c?void 0:c.indexMap();if(void 0===t)return p;f[0]=[...t[1]],f[1]=[...t[0]],this._baseSceneTimeIndex=f[1]}else if((null===(a=t.robot().parentScene())||void 0===a?void 0:a.baseSceneId())===(null===(s=e.robot().parentScene())||void 0===s?void 0:s.id().value())){var u,h;let e=null===(u=t.robot().parentScene())||void 0===u||null===(h=u.timeWarping())||void 0===h?void 0:h.indexMap();if(void 0===e)return p;f[0]=[...e[0]],f[1]=[...e[1]],this._baseSceneTimeIndex=f[0]}else{for(let e=0;e<n.length;e++)f[0][e]=e,f[1][e]=e;this._baseSceneTimeIndex=f[0]}console.log(f);for(let e=0;e<f[0].length;e++)d.push(n[f[0][e]].distanceTo(r[f[1][e]]));let m=Math.max(...d),g=Math.min(...d);console.log("max "+m+" min "+g);for(let e=0;e<f[0].length-1;e++){const t=new Float32Array([n[f[0][e]].x,n[f[0][e]].y,n[f[0][e]].z,r[f[1][e]].x,r[f[1][e]].y,r[f[1][e]].z,r[f[1][e+1]].x,r[f[1][e+1]].y,r[f[1][e+1]].z,n[f[0][e]].x,n[f[0][e]].y,n[f[0][e]].z,r[f[1][e+1]].x,r[f[1][e+1]].y,r[f[1][e+1]].z,n[f[0][e+1]].x,n[f[0][e+1]].y,n[f[0][e+1]].z]),i=new Bb.BufferGeometry;i.setAttribute("position",new Bb.BufferAttribute(t,3)),i.computeVertexNormals();let o=n[f[0][e]].distanceTo(r[f[1][e]]),a=(n[f[0][e+1]].distanceTo(r[f[1][e+1]])-g)/(m-g),s=nE(WA((o-g)/(m-g))),l=nE(WA(a));const c=s.r/255,u=s.g/255,h=s.b/255,d=l.r/255,v=l.g/255,b=l.b/255,y=new Float32Array([c,u,h,c,u,h,d,v,b,c,u,h,d,v,b,d,v,b]);i.setAttribute("color",new Bb.BufferAttribute(y,3));const x=new Bb.MeshPhongMaterial({vertexColors:!0,side:Bb.DoubleSide}),w=new Bb.Mesh(i,x);p.add(w),this._currGeomArray[e]=w}return this.updateTimespan(),p}return console.log("the number of points do not match!!!"),new Bb.Group}robotFrom(){return this._traceFrom.robot()}robotPartFrom(){return this._traceFrom.robotPart()}timesFrom(){return this._traceFrom.times()}robotTo(){return this._traceTo.robot()}robotPartTo(){return this._traceTo.robotPart()}timesTo(){return this._traceTo.times()}traverseMeshes(e){this._rootGroup.traverse((t=>{u_(t)&&e(t)}))}traverseMaterials(e){this._rootGroup.traverse((t=>{$b(t.material,e)}))}visible(){return this._is_visible}setVisible(e){e!==this._is_visible&&(this.traverseMeshes((t=>{t.visible=e})),this._is_visible=e,ir.updateUI(),ir.render())}opacity(){return this._opacity}setOpacity(e){this._opacity=ry(e,0,1),this.traverseMaterials((e=>{e.opacity=this._opacity})),ir.updateUI(),ir.render()}parentScene(){return this._parentScene}setParentScene(e){console.log("set parent scene!!!"),e!==this._parentScene&&(void 0!==this._parentScene&&(this._parentScene.scene().remove(this._rootGroup),this._parentScene.render()),this._parentScene=e,void 0!==e&&(e.scene().add(this._rootGroup),e.render()),ir.updateUI())}pointsFrom(){return this._traceFrom.points()}pointsTo(){return this._traceTo.points()}update(e,t){let n=this.newGeom(e,t);this._rootGroup.remove(this._currGeom),this._currGeom=n,this._rootGroup.add(this._currGeom)}}const wR=["rgb(255, 255, 0)","brown","red","#204BD8","purple","green"];class _R extends c_{constructor(e,t){super(),this._id=void 0,this._robots=void 0,this._ghostRobots=void 0,this._selectedRobot=void 0,this._hoveredRobot=void 0,this._traces=void 0,this._sentGhostTraces=void 0,this._receivedGhostTraces=void 0,this._traceMap=void 0,this._robotSceneManager=void 0,this._color=void 0,this._colorPalettes=void 0,this._arrows=void 0,this._traceFrom=void 0,this._density=void 0,this._axisSize=void 0,this._traceSize=void 0,this._update=void 0,this._timeWarpObj=void 0,this._baseSceneId=void 0,this._keyObjects=void 0,this._currTimeWarpBase=void 0,this._num_ee_targets=void 0,this._backgroundColor=void 0,this._directionalLightIntensity=void 0,this._directionalLight=void 0,this._ambientLightIntensity=void 0,this._ambientLight=void 0,this._groundPlane=void 0,this._groundGrid=void 0,this._cameraType=void 0,this._toggleCamera=void 0,this._worldFrame=void 0,this._toggleWorldFrame=void 0,this._groundPlaneColor=void 0,this._groundPlaneOpacity=void 0,this._worldFrameObject=void 0,this.currTimeWarpBase=()=>this._currTimeWarpBase,this._id=new yy(t),this._color=ny(),this._robotSceneManager=new m_(e),this._colorPalettes=[...wR],this._arrows=new Map,this._density=.5,this._axisSize=0,this._traceSize=1,this._update=!1,this._traceMap=new Map,this._robots=[],this._ghostRobots=new Map,this._traces=[],this._sentGhostTraces=new iS,this._receivedGhostTraces=new iS,this._baseSceneId="",this._keyObjects=[],this._worldFrameObject=new Bb.Object3D,this.addWorldFrame(),this._num_ee_targets=0,this._backgroundColor="#171718",this._directionalLightIntensity=1,this._ambientLightIntensity=.2,this._directionalLight=new Bb.DirectionalLight,this._ambientLight=new Bb.AmbientLight,this._groundPlane=new Bb.Object3D,this._groundGrid=new Bb.GridHelper(100,100,0,0),this._cameraType="Perspective",this._toggleCamera=!1,this._worldFrame="ROS",this._toggleWorldFrame=!1,this._groundPlaneColor="#343536",this._groundPlaneOpacity=.2}ghostRobots(){let e=[];for(const[,t]of this._ghostRobots)e.push(t);return e}getGhostRobot(e){return this._ghostRobots.get(e)}hasGhostRobt(e){return this._ghostRobots.has(e)}addGhostRobot(e){this._ghostRobots.set(e.idValue(),e)}removeGhostRobot(e){let t=this._ghostRobots.get(e);null===t||void 0===t||t.removeControlledClone(this),this._ghostRobots.delete(e),ir.updateUI()}backgroundColor(){return this._backgroundColor}setBackgroundColor(e){this._backgroundColor=e,this.scene().background=new Bb.Color(e),this.render()}setCameraType(e){this._cameraType=e,this._toggleCamera=!0}toggleCameraType(){"Perspective"===this._cameraType?this._cameraType="Orthographic":this._cameraType="Perspective",this._toggleCamera=!0}cameraType(){return this._cameraType}finishToggleCamera(){this._toggleCamera=!1}isToggleCamera(){return this._toggleCamera}setWorldFrame(e){this._worldFrame=e,this._toggleWorldFrame=!0}toggleWorldFrame(){"ROS"===this._worldFrame?this._worldFrame="THREE.js":this._worldFrame="ROS",this._toggleWorldFrame=!0}worldFrame(){return this._worldFrame}finishToggleWorldFrame(){this._toggleWorldFrame=!1}isToggleWorldFrame(){return this._toggleWorldFrame}groundPlaneColor(){return this._groundPlaneColor}setGroundPlaneColor(e){if(this._groundPlaneColor=e,this._groundPlane instanceof Bb.Mesh){this._groundPlane.material.color=new Bb.Color(e),this.render()}}groundPlaneOpacity(){return this._groundPlaneOpacity}setGroundPlaneOpacity(e){if(this._groundPlaneOpacity=e,this._groundPlane instanceof Bb.Mesh){this._groundPlane.material.opacity=e,this.render()}}isGroundPlaneVisible(){return this._groundPlane.visible}setGroundPlaneVisibility(e){this._groundPlane.visible=e,this._groundGrid.visible=e,this.render()}setGroundPlane(e,t){this._groundPlane=e,this._groundGrid=t}isWorldFrameObjectVisible(){return this._worldFrameObject.visible}setWorldFrameObjectVisibility(e){this._worldFrameObject.visible=e,this.render()}directionalLightIntensity(){return this._directionalLightIntensity}setDirectionalLightIntensity(e){this._directionalLight.intensity=e,this._directionalLightIntensity=e,this.render()}directionalLight(){return this._directionalLight}setDirectionalLight(e){this._directionalLight=e}ambientLightIntensity(){return this._ambientLightIntensity}setAmbientLightIntensity(e){this._ambientLight.intensity=e,this._ambientLightIntensity=e,this.render()}ambientLight(){return this._ambientLight}setAmbientLight(e){this._ambientLight=e}setTraceFrom(e){this._traceFrom=e}setTraceTo(e){if(void 0!==this._traceFrom){let t=new xR(this._traceFrom,e,this,this.getNextColor());this._arrows.set(t.id(),t),this._traceFrom=void 0,this._update=!0}}addArrow(e,t){let n=this._traceMap.get(e),r=this._traceMap.get(t);if(void 0===n||void 0===r)return;let i=new xR(n,r,this,this.getNextColor());this._arrows.set(i.id(),i)}removeArrow(e){let t=this._arrows.get(e);void 0!==t&&(this._arrows.delete(e),t.setParentScene(void 0),this._update=!0,this.addColorBack(t.color()))}getAllArrows(){let e=[];for(const[,t]of this._arrows)e.push(t);return e}density(){return this._density}setDensity(e){this._density=e;let t=this.getAllTraces();for(const n of t)n.setDensity(e);this.render()}axisSize(){return this._axisSize}setAxisSize(e){this._axisSize=e;let t=this.getAllTraces();for(const n of t)n.setAxisSize(e);this.render()}traceSize(){return this._traceSize}setTraceSize(e){this._traceSize=e;let t=this.getAllTraces();for(const n of t)n.setTraceSize(e);this.render()}setParentRobotSceneManager(e){e!==this._robotSceneManager.value()&&(this._robotSceneManager.setValue(null,e,(()=>{if(void 0===e){for(const e of this._robots)this.removeChildRobot(e);this._sentGhostTraces.destroyContents()}})),ir.updateUI())}robotSceneManager(){return this._robotSceneManager.value()}beforeParentRobotSceneManagerSet(){return this._robotSceneManager.beforeSet()}afterParentRobotSceneManagerSet(){return this._robotSceneManager.afterSet()}getRobotByName(e){let t=this.robots().filter((t=>t.name()===e));if(1===t.length)return t[0]}getJointByName(e,t){let n=this.getRobotByName(e);if(void 0!==n){let e=n.joints().filter((e=>e.name()===t));if(1===e.length)return e[0]}}getLinkByName(e,t){let n=this.getRobotByName(e);if(void 0!==n){let e=n.links().filter((e=>e.name()===t));if(1===e.length)return e[0]}}getAllTraces(){let e=[...this._traces],t=Array.from(this._receivedGhostTraces.aliveContents());for(let n=0;n<t.length;n++)e.push(t[n][0]);return e}hasReceivedGhostTrace(e,t){for(const n of this._receivedGhostTraces)if(n.robot()===e&&n.robotPart()===t)return!0;return!1}getReceivedGhostTraces(e,t){return void 0===t?Array.from(this._receivedGhostTraces.aliveContents()).filter((t=>{let[n]=t;return n.robot()===e})):Array.from(this._receivedGhostTraces.aliveContents()).filter((n=>{let[r]=n;return r.robot()===e&&r.robotPart()===t}))}sendGhostTracesTo(e,t,n,r){this.removeGhostTracesFrom(e,n,r);let i=[];for(const o of _R.newTraces(e,t,n,r.getNextColor(),r._axisSize,r._density,r._traceSize)){o.setOpacity(.1);let e=new rS(o);e.afterDestroyed().subscribe((()=>(o.setParentScene(void 0),!1))),this._sentGhostTraces.push(e),r.receiveGhostTrace(e),i.push(o.id())}return void 0!==n?n.addToScene():e.addToScene(),ir.render(),ir.updateUI(),i}receiveGhostTrace(e){let t=e.deref();t&&(this._update=!0,this._receivedGhostTraces.push(e),t.setParentScene(this),this._traceMap.set(t.id(),t))}removeGhostTracesFrom(e,t,n){let r=!1;for(const[,i]of n.getReceivedGhostTraces(e,t)){let e=i.deref();e&&(n._traceMap.delete(e.id()),n.addColorBack(e.color()),n._update=!0),i.destroy(),r=!0}return console.log("remove ghost trace"),void 0!==t?t.removeFromScene():e.removeFromScene(),ir.render(),ir.updateUI(),r}robotById(e){for(const t of this._robots)if(t.idValue()===e)return t}timeWarping(){return this._timeWarpObj}isTimeWarping(){return void 0!==this._timeWarpObj}setTimeWarping(e){this._timeWarpObj=e}setTimeWarpBase(e){if(this._currTimeWarpBase===e)return;let t=()=>{this.setTimeWarping(void 0),this._currTimeWarpBase=void 0},n=()=>{t(),ir.updateUI(),ir.render()};if(void 0===e)return void n();const r=this._robotSceneManager.value();if(void 0===r)return void n();o()(r.hasManagedRobotScene(e),"You can not set the RobotSceneManager to use a scene that it does not own "+"as its timewarp base. Scene: ".concat(e));const a=r.startTime(),s=r.endTime(),l=30*Math.abs(s-a);let c,u=_R.frameRange(a,s,30,l),h=new Map;{let t=new Set(cy(e.robots(),(e=>e.name()))),r=e.frameData(u,(e=>t.has(e)),((e,t)=>1===uy(e.links(),t,(e=>e.name()))),((e,t)=>1===uy(e.joints(),t,(e=>e.name()))),((e,t)=>1===uy(e.articuatedJoints(),t,(e=>e.name()))));if(!0===r.keys().next().done)return void n();for(const[e,n]of r.entries()){let t=new Map,r=new Map;for(const[e,o]of n.positions)if(void 0===e)t.set(e,[e,o]);else if(e instanceof d_)t.set(e.name(),[e,o]);else{if(!(e instanceof p_))throw new i.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});t.set(e.name(),[e,o])}for(const[e,i]of n.jointAngles)r.set(e.name(),[e,i]);h.set(e.name(),[e,{times:n.times,positions:t,jointAngles:r}])}}if(t(),this===e)return;{let e=new Set(cy(this.robots(),(e=>e.name())));if(c=this.frameData(u,(t=>t.includePosInTimeWarpConsideration()&&h.has(t.name())&&e.has(t)),((t,n)=>n.includePosInTimeWarpConsideration()&&h.has(t.name())&&e.has(t)&&1===uy(t.links(),n,(e=>e.name()))),((t,n)=>n.includePosInTimeWarpConsideration()&&h.has(t.name())&&e.has(t)&&1===uy(t.joints(),n,(e=>e.name()))),((t,n)=>n.includeAngleInTimeWarpConsideration()&&h.has(t.name())&&e.has(t)&&1===uy(t.articuatedJoints(),n,(e=>e.name())))),!0===c.keys().next().done)return}let d=[];for(const[i,o]of c){let e=h.get(i.name());if(void 0!==e){for(const[t,n]of o.positions){let r=e[1].positions.get(void 0===t?void 0:t.name());if(void 0!==r){let e=r[1];d.push([e,n])}}for(const[t,n]of o.jointAngles){let r=e[1].jointAngles.get(t.name());if(void 0!==r){let e=r[1];d.push([e,n])}}}}let p=new oS(u,u,((e,t,n,r)=>{let i=0;for(const[o,a]of d){let e=o[n],t=a[r];i+="number"===typeof e&&"number"===typeof t?Math.abs(e-t):e.distanceTo(t)}return i}));this.setTimeWarping(p),this._currTimeWarpBase=e,ir.updateUI(),ir.render()}baseSceneId(){var e;return void 0===this._currTimeWarpBase?" ":null===(e=this._currTimeWarpBase)||void 0===e?void 0:e.id().value()}setKeyObjects(e){this._keyObjects=[...e]}keyObjects(){return this._keyObjects}static frameRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=arguments.length>4?arguments[4]:void 0;void 0===i&&(i=e=>e),n=Math.abs(n),r=Math.abs(r);let o,a=Math.abs(t-e),s=Math.min(Math.floor(n*a),r),l=Math.abs(a/s);o=isNaN(l)||a/l<2?function*(){for(let t of[e-.001,e,e+.001])yield t}:function*(){for(let n=e;n<=t;n+=l)yield n};let c=[];const u=i;for(const h of o())c.push(u(h));return c}frameData(e,t,n,r,i,o,a,s){let l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=this._animationManager.time(),u=null!==t&&void 0!==t?t:()=>!0,h=null!==n&&void 0!==n?n:()=>!0,d=null!==i&&void 0!==i?i:()=>!0,p=null!==r&&void 0!==r?r:()=>!0,f=null!==o&&void 0!==o?o:()=>!1,m=null!==a&&void 0!==a?a:()=>!1,g=null!==s&&void 0!==s?s:()=>!1,v=[],b=[],y=[],x=[],w=[],_=[],S=[];for(const E of this.robots()){u(E)&&v.push([[],E]);for(const e of E.joints())p(E,e)&&y.push([[],E,e]);for(const e of E.articuatedJoints())d(E,e)&&x.push([[],E,e]);for(const e of E.links())h(E,e)&&b.push([[],E,e]);f(E)&&w.push([[],E]);for(const e of E.links())m(E,e)&&_.push([[],E,e]);for(const e of E.joints())g(E,e)&&S.push([[],E,e])}if(0===v.length&&0===b.length&&0===y.length&&0===x.length&&0===w.length&&0===_.length&&0===S.length)return new Map;if(!l)throw new Error("Not implemented yet");for(const E of e){this._animationManager.setTime(E);for(const[e,t]of v)e.push(t.getWorldPosition());for(const[e,,t]of b)e.push(t.getWorldPosition());for(const[e,,t]of y)e.push(t.getWorldPosition());for(const[e,,t]of x)e.push(t.angle());for(const[e,t]of w)e.push(t.getWorldQuaternion());for(const[e,,t]of _)e.push(t.getWorldQuaternion());for(const[e,,t]of S)e.push(t.getWorldQuaternion())}this._animationManager.setTime(c);let M=new Map,T=t=>{let n=M.get(t);if(void 0===n){let n={times:e,positions:new Map,jointAngles:new Map,rotations:new Map};return M.set(t,n),n}return n};for(const[E,C]of v)T(C).positions.set(void 0,E);for(const[E,C,A]of b)T(C).positions.set(A,E);for(const[E,C,A]of y)T(C).positions.set(A,E);for(const[E,C,A]of x)T(C).jointAngles.set(A,E);for(const[E,C]of w)T(C).rotations.set(void 0,E);for(const[E,C,A]of _)T(C).rotations.set(A,E);for(const[E,C,A]of S)T(C).rotations.set(A,E);return M}frameDataFor(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.frameData(t,(t=>void 0===n&&t===e),((t,r)=>void 0!==n&&t===e&&r===n),((t,r)=>void 0!==n&&t===e&&r===n),((t,r)=>void 0!==n&&t===e&&r===n),(t=>void 0===n&&t===e),((t,r)=>void 0!==n&&t===e&&r===n),((t,r)=>void 0!==n&&t===e&&r===n),r),a=o.get(e);if(void 0===a)throw new i.AssertionError({message:"robotdata was undefined!"});if(void 0===n){let e=a.positions.get(void 0);if(void 0===e)throw new i.AssertionError({message:"pos was undefined!"});let t=a.rotations.get(void 0);if(void 0===t)throw new i.AssertionError({message:"pos was undefined!"});return{times:a.times,robotPositions:e,robotRotations:t}}if(n instanceof p_){let e=a.positions.get(n);if(void 0===e)throw new i.AssertionError({message:"linkPos was undefined!"});let t=a.rotations.get(n);if(void 0===t)throw new i.AssertionError({message:"linkPos was undefined!"});return{times:a.times,linkPositions:e,linkRotations:t}}let s=a.positions.get(n);if(void 0===s)throw new i.AssertionError({message:"jointPos was undefined!"});let l=a.rotations.get(n);if(void 0===l)throw new i.AssertionError({message:"jointPos was undefined!"});let c=a.jointAngles.get(n);return void 0===c&&(c=[]),{times:a.times,jointPositions:s,jointAngles:c,jointRotations:l}}static possibleTraces(e){let t=[];t.push(void 0);for(const n of e.joints())t.push(n);for(const n of e.links())t.push(n);return t}copy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.setParentRobotSceneManager(e.robotSceneManager());let o=new Map;for(const i of e.robots()){if("World Frame"===i.name())continue;let e=i.clone();this.addChildRobot(e),o.set(i,e)}if(super.copy.call(this,e,t,n,r,o),r)for(const a of e._traces){let[e,t,n]=[a.robot(),a.robotPart(),a.times()],r=o.get(e);if(void 0!==r)if(void 0===t)this.addChildTrace(r,n,t);else if(t instanceof p_){let e=r.linkMap().get(t.name());if(void 0===e)continue;this.addChildTrace(r,n,e)}else{if(!(t instanceof d_))throw new i.AssertionError({message:"robotPart was not undefined, RobotLink, or RobotJoint"});{let e=r.jointMap().get(t.name());if(void 0===e)continue;this.addChildTrace(r,n,e)}}}return this}clone(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(new _R).copy(this,e,t,n)}hasChildTrace(e,t){return void 0!==this.getChildTrace(e,t)}static newTraces(e,t,n,r,o,a,s){let l=e.parentScene();if(void 0===l)throw ir.assert(void 0!==l,'In "newTraces", the given Robot was not currently in a RobotScene and therefore could not be traced.'),new i.AssertionError;return l.innerNewTraces(e,t,n,r,o,a,s)}innerNewTraces(e,t,n,r,o,a,s){let l;ir.assert(this.hasChildRobot(e),"A RobotScene can only generate Traces for Robots that it contains.");let c=new Map;if(void 0===n)l=new Map,l.set(void 0,this.frameDataFor(e,t,void 0,!0).robotPositions),c.set(n,this.frameDataFor(e,t,n,!0).robotRotations);else if(n instanceof d_)l=new Map,l.set(n,this.frameDataFor(e,t,n,!0).jointPositions),c.set(n,this.frameDataFor(e,t,n,!0).jointRotations);else{if(!(n instanceof p_))throw new i.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});l=new Map,l.set(n,this.frameDataFor(e,t,n,!0).linkPositions),c.set(n,this.frameDataFor(e,t,n,!0).linkRotations)}let u=[];for(const[i,h]of l){let n=c.get(i),l=this.robotSceneManager();if(void 0!==l){let c=[l.currStartTime(),l.currEndTime()];u.push(new nS(h,e,i,t,void 0===a?this._density:a,void 0===o?this._axisSize:o,void 0===s?this._traceSize:s,c,void 0===r?this.getNextColor():r,n))}}return u}getChildTrace(e,t){for(const n of this._traces)if(n.robot()===e&&n.robotPart()===t)return n}getTrace(e,t){for(const n of this.getAllTraces())if(n.robot()===e&&n.robotPart()===t)return n}addChildTrace(e,t,n){let r=[];for(const i of _R.newTraces(e,t,n)){let n=this.getChildTrace(e,i.robotPart());void 0===n?(i.setParentScene(this),this._traces.push(i),r.push(i.id()),this._traceMap.set(i.id(),i)):n.update(i.points().map((e=>e.clone())),e,i.robotPart(),t,i.traceType(),i.rotations().map((e=>e.clone())))}return void 0!==n?n.addToScene():e.addToScene(),this._update=!0,r}updateTraces(){let e=this.robotSceneManager();if(void 0!==e){let t=[e.currStartTime(),e.currEndTime()];for(const e of this.getAllTraces())e.updateTimespan(t);for(const[,e]of this._arrows)e.updateTimespan()}}getNextColor(){return this._colorPalettes.pop()}addColorBack(e){-1!==wR.indexOf(e)&&this._colorPalettes.push(e)}removeChildTrace(e,t){let n=!1;if(void 0===t){for(const t of this._traces)if(t.robot()===e){let e=this._traces.indexOf(t);e>-1&&(this._traces.splice(e,1),t.setParentScene(void 0),this._traceMap.delete(t.id())),n=!0,this.addColorBack(t.color())}e.removeFromScene()}else{for(const r of this._traces)if(r.robot()===e&&r.robotPart()===t){let e=this._traces.indexOf(r);e>-1&&(this._traces.splice(e,1),r.setParentScene(void 0),this._traceMap.delete(r.id())),n=!0,this.addColorBack(r.color())}t.removeFromScene()}return!!n&&(this._update=!0,ir.updateUI(),this.render(),!0)}id(){return this._id}update(){return this._update}setUpdate(e){this._update=e}color(){return this._color}setColor(e){this._color=e,this.render()}robots(){return this._robots}scene(){return this._scene}setHoveredRobot(e){var t;e!==this._hoveredRobot&&(null===(t=this._hoveredRobot)||void 0===t||t.setDesaturated(!1),null===e||void 0===e||e.setDesaturated(!0),this._hoveredRobot=e,ir.updateUI())}hoveredRobot(){return this._hoveredRobot}setSelectedRobot(e){var t;e!==this._selectedRobot&&(null===(t=this._selectedRobot)||void 0===t||t.setHighlighted(!1),null===e||void 0===e||e.setHighlighted(!0),this._selectedRobot=e,ir.updateUI())}selectedRobot(){return this._selectedRobot}addChildRobot(e){e.setParentRobotScene(this),this._robots.push(e),ir.updateUI()}removeChildRobot(e){let t=this._robots.indexOf(e);t>-1&&(this.removeChildTrace(e),this._robots.splice(t,1),e.setParentRobotScene(void 0),ir.updateUI())}hasChildRobot(e){return this._robots.indexOf(e)>-1}async loadJsonFromLocalFile(e){let t=await ew(e);this.loadJson(t)}async loadJsonFromURL(e){let t=await async function(e){let t=await Yx(e),n=await Kx(t);return JSON.parse(n)}(e);this.loadJson(t)}async loadJson(e){await _R.deserialize(this._robotSceneManager.value(),e,this),this.render(),ir.updateUI()}saveAsJsonTo(e){J_(this.serialize(),e,4)}async loadRobotFromURL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{ir.setPopupHelpPage({page:Xn.LoadingStarted,type:"example robot"});let n=await g_.loadRobot(e,void 0,t);this.addChildRobot(n),this.render();const r="Robot ".concat(n.name()," Uploaded Successfully!"),i=document.createElement("p");i.innerText=r,i.classList.add("LoadRobotMessage");const o=document.querySelector(".LoadAndSavePanel"),a=null===o||void 0===o?void 0:o.querySelector(".LoadRobot");return null===a||void 0===a||a.appendChild(i),ir.setPopupHelpPage({page:Xn.LoadingSuccess,type:"example robot"}),n}catch(n){const e="Error loading robot: "+n,t=document.createElement("p");t.innerText=e,t.style.color="red",t.classList.add("LoadRobotMessage");const r=document.querySelector(".LoadAndSavePanel"),i=null===r||void 0===r?void 0:r.querySelector(".LoadRobot");throw null===i||void 0===i||i.appendChild(t),ir.setPopupHelpPage({page:Xn.LoadingFailed,type:"example robot"}),n}}async addEETarget(){let e=g_.createAxesHelper(.1,"EE Target "+this._num_ee_targets);return this._num_ee_targets+=1,this.addChildRobot(e),this.render(),e}addWorldFrame(){let e=new Bb.AxesHelper(1);return this._worldFrameObject=e,this.scene().add(e),this.render(),e}serialize(){let e=[];for(const t of this._robots)e.push(t.serialize());return{id:this.id().value(),robots:e,animationManager:this._animationManager.serialize(),animationTables:[]}}static async deserialize(e,t,n){let r=null!==n&&void 0!==n?n:new _R(e);if(void 0!==t.robotFiles)return await this.oldDeserialize(e,t,r);let i=t,o=[];for(const h of i.robots)o.push(g_.deserialize(h));let a=await Promise.all(o),s=[];for(const h of i.animationTables)s.push(Zw.deserialize(h));let l=await Promise.all(s),c=new Map;for(const h of l)c.set(h.idValue(),h);let u=new Map;for(const h of a)u.set(h.id().value(),h);i.animationManager&&await i_.deserialize(i.animationManager,u,c,r.animationManager());for(const h of l)h.id().regen();for(const h of a)h.id().regen(),r.addChildRobot(h);r.animationManager().setTime(0);for(const h of l)ir.addAnimationTable(h);return r}static async oldDeserialize(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=null!==n&&void 0!==n?n:new _R(e),o=[];for(const f of t.robotFiles)o.push(i.loadRobotFromURL(f));let a=await Promise.all(o),s=0,l=new Map;for(const[f,m]of oy(a)){l.set(m.id().value(),m);let e=m.getScaleOffset(),n=m.getPositionOffset(),i=(new Bb.Euler).setFromQuaternion(m.getQuaternionOffset()),o=m.getScale(),a=m.getPosition(),c=(new Bb.Euler).setFromQuaternion(m.getQuaternion()),u=t.configsMap[f];for(let r=0;r<u;r++){let o=s+r,l=t.configs[o];switch(r){case 0:e.set(l,l,l);break;case 1:n.x=l;break;case 2:n.y=l;break;case 3:n.z=l;break;case 4:i.x=l;break;case 5:i.y=l;break;case 6:i.z=l;break;case 7:a.x=l;break;case 8:a.y=l;break;case 9:a.z=l;break;case 10:c.x=l;break;case 11:c.y=l;break;case 12:c.z=l;break;default:let t=m.joints()[r-12];t&&t.setAngle(l)}}s+=u,r&&(m._robot.rotation.x=-Math.PI/2),m.setScaleOffset(e),m.setPositionOffset(n),m.setQuaternionOffset((new Bb.Quaternion).setFromEuler(i)),m.setScale(o),m.setPosition(a),m.setQuaternion((new Bb.Quaternion).setFromEuler(c))}let c=[];for(const f of t.animationURLs)c.push((async()=>{let e=await Zw.loadFromURL(f);for(const t of e)t.fromGazebo=r;return e})());let u=await Promise.all(c),h=0,d=t.animationMap,p=new fy;for(const[f,m]of oy(a))for(let e=0;e<d[f];e++){let e=u[h++];e&&e.length>0&&p.addAnimation(new py(m,e[0]))}return p.animations().length>0&&(i.animationManager().addActiveAnimation(p),i.animationManager().setTime(0)),i}}var SR=n(4437),MR=n.n(SR);const TR="line",ER="tube",CR="cone",AR=CR;class RR{constructor(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:AR;this._parentScene=void 0,this._quaternions=void 0,this._currGeom=void 0,this._currGeomArray=void 0,this._currQuaternionGeom=void 0,this._vectors=void 0,this._currGeom2=void 0,this._currGeomArray2=void 0,this._currQuaternionGeom2=void 0,this._vectors2=void 0,this._positive=void 0,this._color=void 0,this._is_visible=void 0,this._opacity=void 0,this._rootGroup=void 0,this._trace_type=void 0,this._parentRobot=void 0,this._robotPart=void 0,this._times=void 0,this._timespan=void 0,this._timespanIndex=void 0,this._currTime=void 0,this._color=void 0===a?ny():a,this._trace_type=AR,this._timespan=i,this._timespanIndex=[],this._currTime=o,this._positive=!0,this._currGeomArray=[],this._rootGroup=new Bb.Group,this._currGeom=this.newGeom(void 0,!0),this._rootGroup.add(this._currGeom),this._currQuaternionGeom=this.newSymbolGeom(),this._rootGroup.add(this._currQuaternionGeom),this._currGeomArray2=[],this._currGeom2=this.newGeom(void 0,!1),this._rootGroup.add(this._currGeom2),this._currQuaternionGeom2=this.newSymbolGeom(),this._rootGroup.add(this._currQuaternionGeom2),this._is_visible=!0,this._quaternions=[],this._parentRobot=t,this._robotPart=n,this._times=r,this._opacity=1,this._vectors=[],this._vectors2=[],this._parentScene=new m_(void 0),this.update(e,t,n,r,s,o);let l=new WeakRef(this);t.afterParentSceneSet().subscribe((e=>{let[,t]=e,n=l.deref();return void 0!==n&&(void 0===t?(n.setParentScene(void 0),!1):(n.updateQuaternions(),!0))})),t.afterpositionOffsetSet().subscribe((()=>{let e=l.deref();return void 0!==e&&(e.updateQuaternions(),!0)}))}timespanIndex(){return this._timespanIndex}updateTimespan(e){var t,n;if(2!==e.length||void 0===this._times)return;this._timespan=e;let r=0,i=this._times.length-1;if(null!==(t=this._parentRobot.parentScene())&&void 0!==t&&t.isTimeWarping()){var o,a,s,l;let t=null===(o=this._parentRobot.parentScene())||void 0===o||null===(a=o.timeWarping())||void 0===a?void 0:a.timeWarpMap(),n=null===(s=this._parentRobot.parentScene())||void 0===s||null===(l=s.timeWarping())||void 0===l?void 0:l.indexMap();if(void 0===t||void 0===n)return;for(let i=0;i<t[1].length;i++)if(t[0][i]>=e[0]){r=n[1][i];break}for(let r=t[1].length-1;r>=0;r--)if(t[0][r]<=e[1]){i=n[1][r];break}}else{for(let t=0;t<this._times.length;t++)if(this._times[t]>=e[0]){r=t;break}for(let t=this._times.length-1;t>=0;t--)if(this._times[t]<=e[1]){i=t;break}}this._timespanIndex=[r,i];for(let c=0;c<this._currGeomArray.length;c++)void 0!==this._currGeomArray[c]&&(this._currGeomArray[c].visible=!(c<r||c>i));for(let c=0;c<this._currGeomArray2.length;c++)void 0!==this._currGeomArray2[c]&&(this._currGeomArray2[c].visible=!(c<r||c>i));null===(n=this.parentScene())||void 0===n||n.render()}updateQuaternions(){let e=this.robot(),t=e.parentScene();if(!t)return!1;{let n,r=this.robotPart();if(r instanceof d_)n=t.frameDataFor(e,this.times(),r,!0).jointRotations;else{if(!(r instanceof p_))throw new Error("Invalid robotPart type");n=t.frameDataFor(e,this.times(),r,!0).linkRotations}this.setQuaternions(n),this.updateSymbolGeom(this._currTime)}return!0}beforeParentSceneSet(){return this._parentScene.beforeSet()}afterParentSceneSet(){return this._parentScene.afterSet()}robot(){return this._parentRobot}robotPart(){return this._robotPart}times(){return this._times}color(){return this._color}traverseMeshes(e){this._rootGroup.traverse((t=>{u_(t)&&e(t)}))}traverseMaterials(e){this._rootGroup.traverse((t=>{$b(t.material,e)}))}visible(){return this._is_visible}setVisible(e){e!==this._is_visible&&(this.traverseMeshes((t=>{t.visible=e})),this._is_visible=e,ir.updateUI(),ir.render())}opacity(){return this._opacity}setOpacity(e){this._opacity=ry(e,0,1),this.traverseMaterials((e=>{e.opacity=this._opacity})),ir.updateUI(),ir.render()}parentScene(){return this._parentScene.value()}setTraceType(e){this.update(this._quaternions,this._parentRobot,this._robotPart,this.times(),e)}traceType(){return this._trace_type}calCurrQuaternion(e){let t=this.robot(),n=t.parentScene();if(n){let r=this.robotPart(),i=LR.extraceDataFromframeData(n,t,[e],r).get(r);if(void 0===i)return;return i[0]}}newSymbolGeom(){let e=new Bb.SphereGeometry(.01),t=new Bb.MeshBasicMaterial({color:"red"});return new Bb.Mesh(e,t)}updateSymbolGeom(e){var t;let n,r,i=Ub(this._times,e),o=this._quaternions[0];if(-1===i)n=Vb(o,void 0,!0),r=Vb(o,void 0,!1);else{let t=this._quaternions[i],a=this._quaternions[i],s=this._times[i],l=this._times[i];i+1<this._quaternions.length&&(a=this._quaternions[i+1],l=this._times[i+1]),o=t.slerp(a,(e-s)/(l-s)),n=Vb(o,this._vectors[i],!0),r=Vb(o,this._vectors2[i],!1)}this._currQuaternionGeom.position.copy(n),this._currQuaternionGeom2.position.copy(r),null===(t=this.parentScene())||void 0===t||t.render(),this._currTime=e}newGeom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AR;void 0===e&&(e=[]),0===e.length?e.push(new Bb.Quaternion,new Bb.Quaternion):1===e.length&&e.push(e[0].clone());let r,i=[];for(const a of e){let e=Vb(a,r,t);i.push(e),r=e}t?this._vectors=i:this._vectors2=i;const o=new Bb.CatmullRomCurve3(i,!1);if(n===TR){const e=(new Bb.BufferGeometry).setFromPoints(o.getPoints(i.length)),t=new Bb.LineBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});return new Bb.Line(e,t)}if(n===ER){const e=new Bb.TubeGeometry(o,2*i.length,.005,8,!0),t=new Bb.MeshBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});return new Bb.Mesh(e,t)}if(n===CR){let e=new Bb.Group;const n=new Bb.Matrix4,r=new Bb.MeshBasicMaterial({color:new Bb.Color(this._color).convertSRGBToLinear()});let o=[];for(let t=0;t<i.length-1;t++){const a=i[t],s=i[t+1],l=a.distanceTo(s);if(0===l||l>=1)continue;const c=.005,u=l,h=new Bb.Mesh(new Bb.ConeGeometry(c,u),r);h.rotateX(Math.PI/2);const d=new Bb.Group;d.add(h),d.position.copy(a),n.lookAt(s,a,d.up),d.quaternion.setFromRotationMatrix(n);let p=new Bb.Vector3;p.subVectors(s,a).normalize(),d.position.addScaledVector(p,l/2),e.add(d),o[t]=d}return t?this._currGeomArray=o:this._currGeomArray2=o,this.updateTimespan(this._timespan),e}throw new Error('Unknown LineTraceType "'.concat(n,'"'))}setParentScene(e){e!==this._parentScene.value()&&(this._parentScene.setValue(((e,t)=>{e&&(e.scene().remove(this._rootGroup),e.render())}),e,((e,t)=>{void 0!==t&&(t.scene().add(this._rootGroup),t.render())})),ir.updateUI())}quaternions(){return this._quaternions}clonedQuaternions(){return this._quaternions.map((e=>e.clone()))}setQuaternions(e){this.update(e,this._parentRobot,this._robotPart,this.times(),this._trace_type)}flipTrace(){var e;this._positive?(this._currGeom.visible=!1,this._currQuaternionGeom.visible=!1,this._currGeom2.visible=!0,this._currQuaternionGeom2.visible=!0):(this._currGeom.visible=!0,this._currQuaternionGeom.visible=!0,this._currGeom2.visible=!1,this._currQuaternionGeom2.visible=!1),this._positive=!this._positive,null===(e=this.parentScene())||void 0===e||e.render()}update(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:AR,o=arguments.length>5?arguments[5]:void 0;this._quaternions=e,this._parentRobot=t,this._robotPart=n,this._times=r;let a=this.newGeom(e,!0,i),s=this.newGeom(e,!1,i);void 0!==o&&this.updateSymbolGeom(o),this._rootGroup.remove(this._currGeom),this._rootGroup.remove(this._currGeom2),this._currGeom=a,this._currGeom2=s,this._positive?(this._currGeom.visible=!0,this._currQuaternionGeom.visible=!0,this._currGeom2.visible=!1,this._currQuaternionGeom2.visible=!1):(this._currGeom.visible=!1,this._currQuaternionGeom.visible=!1,this._currGeom2.visible=!0,this._currQuaternionGeom2.visible=!0),this._rootGroup.add(this._currGeom),this._rootGroup.add(this._currGeom2),this._trace_type=i}clone(){let e=[];for(const n of this._quaternions)e.push(n.clone());let t=new RR(e,this._parentRobot,this._robotPart,this.times(),this._timespan,this._currTime,this._color,this._trace_type);return t.setVisible(this._is_visible),t._color=this._color,t}}const kR=["rgb(255, 255, 0)","brown","red","#204BD8","purple","green"];var PR=0;class LR extends c_{constructor(e,t){super(),this._id=void 0,this._name=void 0,this._traces=void 0,this._color=void 0,this._colorPalettes=void 0,this._robotSceneManager=void 0,this._update=void 0,this._lineGroup=void 0,this._lineGroupOpacity=void 0,this._lineGroupColor=void 0,this._backgroundColor=void 0,this._worldFrameObject=void 0,this._id=new yy(t),this._color=ny(),this._name="Quat Space "+ ++PR,this._colorPalettes=[...kR],this._update=!1,this._traces=[],this._worldFrameObject=new Bb.Object3D,this._lineGroup=new Bb.Group,this._lineGroupOpacity=.1,this._lineGroupColor="#00ff00",this.createInitialSphere(),this.addWorldFrame(),this._backgroundColor="#263238",this._robotSceneManager=e,void 0!==e&&e.addQuaternionSpaceScene(this)}isWorldFrameObjectVisible(){return this._worldFrameObject.visible}setWorldFrameObjectVisibility(e){this._worldFrameObject.visible=e,this.render()}backgroundColor(){return this._backgroundColor}setBackgroundColor(e){this._backgroundColor=e,this.scene().background=new Bb.Color(e),this.render()}addWorldFrame(){let e=new Bb.AxesHelper(1);return this._worldFrameObject=e,this.scene().add(e),this.render(),e}getAllTraces(){return[...this._traces]}removeAllTraces(){let e=[...this._traces];for(const t of e)this.removeChildTrace(t.robot(),t.robotPart())}robotSceneManager(){return this._robotSceneManager}static possibleTraces(e){let t=[];t.push(void 0);for(const n of e.joints())t.push(n);for(const n of e.links())t.push(n);return t}hasChildTrace(e,t){return void 0!==this.getChildTrace(e,t)}static extraceDataFromframeData(e,t,n,r){let o=new Map;if(void 0===r)o.set(r,e.frameDataFor(t,n,r,!0).robotRotations);else if(r instanceof d_)o.set(r,e.frameDataFor(t,n,r,!0).jointRotations);else{if(!(r instanceof p_))throw new i.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});o.set(r,e.frameDataFor(t,n,r,!0).linkRotations)}return o}innerNewTraces(e,t,n,r,i){let o=this.robotSceneManager();if(void 0===o)return[];let a=LR.extraceDataFromframeData(e,t,n,r),s=[];for(const[l,c]of a){let e=a.get(l);if(void 0!==e){let r=[o.currStartTime(),o.currEndTime()];s.push(new RR(e,t,l,n,r,o.currTime(),void 0===i?this.getNextColor():i))}}return s}getChildTrace(e,t){for(const n of this._traces)if(n.robot()===e&&n.robotPart()===t)return n}addChildTrace(e,t,n,r){for(const i of this.innerNewTraces(e,t,n,r)){let e=this.getChildTrace(t,i.robotPart());void 0===e?(i.setParentScene(this),this._traces.push(i)):e.update(i.quaternions().map((e=>e.clone())),t,i.robotPart(),n,i.traceType())}void 0!==r?r.addToScene():t.addToScene(),this._update=!0}updateTraces(){let e=this.robotSceneManager();if(void 0!==e){let t=[e.currStartTime(),e.currEndTime()];for(const e of this.getAllTraces())e.updateTimespan(t)}}updateTraceSymbols(){let e=this.robotSceneManager();if(void 0!==e)for(const t of this.getAllTraces())t.updateSymbolGeom(e.currTime())}createInitialSphere(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;let n=new Bb.SphereGeometry(e,20,16),r=new Bb.MeshStandardMaterial({transparent:!0,opacity:t}),i=new Bb.Mesh(n,r);i.rotation.x=Math.PI/2,this.scene().add(i);const o=new Bb.LineBasicMaterial({color:65280,transparent:!0,opacity:this._lineGroupOpacity,side:Bb.DoubleSide});let a=new Bb.Group;for(let s=1;s<16;s++){const t=Math.PI/16*s-Math.PI/2,n=[];for(let o=0;o<=20;o++){const r=2*Math.PI/20*o-Math.PI,i=new Bb.Vector3(Math.cos(t)*Math.cos(r),Math.cos(t)*Math.sin(r),Math.sin(t)).multiplyScalar(e);n.push(i)}const r=(new Bb.BufferGeometry).setFromPoints(n),i=new Bb.Line(r,o);a.add(i)}for(let s=0;s<=20;s++){const t=2*Math.PI/20*s-Math.PI,n=[];for(let o=0;o<=16;o++){const r=Math.PI/16*o-Math.PI/2,i=new Bb.Vector3(Math.cos(r)*Math.cos(t),Math.cos(r)*Math.sin(t),Math.sin(r)).multiplyScalar(e);n.push(i)}const r=(new Bb.BufferGeometry).setFromPoints(n),i=new Bb.Line(r,o);a.add(i)}this._lineGroup=a,this.scene().add(a)}setLineGroupOpacity(e){this._lineGroupOpacity=e,this._lineGroup.traverse((function(t){t instanceof Bb.Line&&t.material&&(t.material.opacity=e,t.material.transparent=!0)})),this.render()}lineGroupOpacity(){return this._lineGroupOpacity}setLineGroupColor(e){this._lineGroupColor=e,this._lineGroup.traverse((function(t){t instanceof Bb.Line&&t.material&&(t.material.color=new Bb.Color(e))})),this.render()}lineGroupColor(){return this._lineGroupColor}getNextColor(){return this._colorPalettes.pop()}addColorBack(e){-1!==kR.indexOf(e)&&this._colorPalettes.push(e)}removeChildTrace(e,t){let n=!1;if(void 0===t){for(const t of this._traces)if(t.robot()===e){let e=this._traces.indexOf(t);e>-1&&(this._traces.splice(e,1),t.setParentScene(void 0)),n=!0,this.addColorBack(t.color())}e.removeFromScene()}else{for(const r of this._traces)if(r.robot()===e&&r.robotPart()===t){let e=this._traces.indexOf(r);e>-1&&(this._traces.splice(e,1),r.setParentScene(void 0)),n=!0,this.addColorBack(r.color())}t.removeFromScene()}return!!n&&(this._update=!0,ir.updateUI(),this.render(),!0)}id(){return this._id}update(){return this._update}setUpdate(e){this._update=e}color(){return this._color}setColor(e){this._color=e,this.render()}scene(){return this._scene}}const OR=["white","yellow","red","#204BD8","green","brown","purple"];class NR{constructor(e,t,n,r,i,o,a,s,l,c,u){this._id=void 0,this._name=void 0,this._line_names=void 0,this._line_ids=void 0,this._line_colors=void 0,this._delete_line=void 0,this._isDiff=void 0,this._isTimeWarp=void 0,this._currProperty=void 0,this._colorPalettes=void 0,this._lineWidth=void 0,this._backgroundColor=void 0,this._axisColor=void 0,this._filter=void 0,this._id=e,this._line_colors=[],this._line_names=[],this._line_ids=[],this._currProperty="&placeholder&joint position",this._lineWidth=1,this._backgroundColor="#171819",this._axisColor="#B7B7BD",this._filter=0,void 0!==l&&(this._lineWidth=l),void 0!==o&&(this._line_colors=o),void 0!=r&&(this._line_names=r),void 0!=i&&(this._line_ids=i),void 0!==s&&(this._currProperty=s),void 0!==c&&(this._backgroundColor=c),void 0!==u&&(this._axisColor=u),this._delete_line=a,this._isDiff=t,this._isTimeWarp=n,this._name="Graph"+NR.counter,t?this._name="Difference "+this._name:n&&(this._name="Time Warped "+this._name),this._colorPalettes=[...OR],NR.counter++}filter(){return this._filter}setFilter(e){this._filter=e}backgroundColor(){return this._backgroundColor}setBackgroundColor(e){this._backgroundColor=e}axisColor(){return this._axisColor}setAxisColor(e){this._axisColor=e}static genRandColor(){return"hsl("+(310*Math.random()+30)+", "+(40*Math.random()+60)+"%, "+(50*Math.random()+50)+"%)"}getColor(){let e=this._colorPalettes.pop();return void 0===e?NR.genRandColor():e}addColorBack(e){-1!==OR.indexOf(e)&&this._colorPalettes.push(e)}resetColor(){this._colorPalettes=[...OR]}name(){return this._name}setName(e){this._name=e}id(){return this._id}setLineNames(e){this._line_names=e}lineNames(){return this._line_names}setLineIds(e){this._line_ids=e}lineIds(){return this._line_ids}setLineColors(e){this._line_colors=e}lineColors(){return this._line_colors}setDeleteLine(e,t){this._delete_line=e,void 0!==t&&this.addColorBack(t)}deleteLine(){return this._delete_line}isDiff(){return this._isDiff}isTimeWarp(){return this._isTimeWarp}currProperty(){return this._currProperty}setCurrProperty(e){this._currProperty=e}setLineWidth(e){this._lineWidth=e}lineWidth(){return this._lineWidth}}NR.counter=0;const IR=["white","yellow","red","#204BD8","green","brown","purple"];class DR{constructor(e,t,n,r,i,o,a,s){this._id=void 0,this._name=void 0,this._line_names=void 0,this._line_ids=void 0,this._line_colors=void 0,this._colorPalettes=void 0,this._delete_line=void 0,this._lineWidth=void 0,this._backgroundColor=void 0,this._axisColor=void 0,this._nNeighbors=void 0,this._minDis=void 0,this._spread=void 0,this._id=e,this._line_colors=[],this._line_names=[],this._line_ids=[],void 0!==r&&(this._line_colors=r),void 0!=t&&(this._line_names=t),void 0!=n&&(this._line_ids=n),this._name="Umap Graph"+DR.counter,this._delete_line=i,this._lineWidth=1,this._backgroundColor="#171819",this._axisColor="#B7B7BD",void 0!==a&&(this._backgroundColor=a),void 0!==s&&(this._axisColor=s),void 0!==o&&(this._lineWidth=o),this._colorPalettes=[...IR],DR.counter++,this._nNeighbors=30,this._minDis=.1,this._spread=.1}nNeighbors(){return this._nNeighbors}setNNeighbors(e){this._nNeighbors=e}minDis(){return this._minDis}setMinDis(e){this._minDis=e}spread(){return this._spread}setSpread(e){this._spread=e}backgroundColor(){return this._backgroundColor}setBackgroundColor(e){this._backgroundColor=e}axisColor(){return this._axisColor}setAxisColor(e){this._axisColor=e}setLineWidth(e){this._lineWidth=e}lineWidth(){return this._lineWidth}setDeleteLine(e,t){this._delete_line=e,void 0!==t&&this.addColorBack(t)}deleteLine(){return this._delete_line}getColor(){let e=this._colorPalettes.pop();return void 0===e?NR.genRandColor():e}addColorBack(e){-1!==IR.indexOf(e)&&this._colorPalettes.push(e)}resetColor(){this._colorPalettes=[...IR]}name(){return this._name}setName(e){this._name=e}id(){return this._id}setLineNames(e){this._line_names=e}lineNames(){return this._line_names}setLineIds(e){this._line_ids=e}lineIds(){return this._line_ids}setLineColors(e){this._line_colors=e}lineColors(){return this._line_colors}}function jR(e,t){for(const[n,r]of ay(e,t))if(n!==r)return!1;return!0}DR.counter=0;const FR=MR().scale([MR()(255,0,255),MR()(255,0,0),MR()(255,255,0),MR()(0,255,0),MR()(0,255,255),MR()(0,0,255)]).mode("rgb");class zR{constructor(){this._masterRobots=void 0,this._activeScenes=void 0,this._currScene=void 0,this._availableScenes=void 0,this._isSorted=void 0,this._animationTables=void 0,this._allowSelections=void 0,this._animationLoop=void 0,this._controlledScenes=void 0,this._syncViews=void 0,this._syncViewCallbacks=void 0,this._currSyncView=void 0,this._currTimeWarpBase=void 0,this._quaternionSpaceScenes=void 0,this._currQuaternionSpaceScene=void 0,this._umapGraphs=void 0,this._currUmapGraph=void 0,this._graphs=void 0,this._currSelectedGraph=void 0,this._restoreCallBack=void 0,this._jointMotions=void 0,this._tfs=void 0,this.currTimeWarpBase=()=>this._currTimeWarpBase,this._masterRobots=[],this._animationTables=[],this._availableScenes=[],this._activeScenes=[],this._isSorted=!1,this._allowSelections=!0,this._quaternionSpaceScenes=new Map,this._umapGraphs=new Map,this._graphs=new Map,this._jointMotions=new Map,this._tfs=new Map,this._controlledScenes=[],this._animationLoop=new by(tr,0,1,(e=>{let t=new Set;for(const n of this._activeScenes)t.add(n);for(const n of this._controlledScenes)t.add(n);for(const n of t){let t=n.timeWarping();void 0!==t&&(e=t.timeWarp(e)),n.animationManager().setTime(e)}this.updateAllTraceSymbols(),ir.updateUI(),ir.render()})),this._syncViews=!1;let e=new Bb.Camera;e.position.set(3,3,3),e.lookAt(0,0,0),this._currSyncView=[e.position.clone(),(new Bb.Quaternion).setFromEuler(e.rotation)],this._syncViewCallbacks=[]}setRestoreCallBack(e){this._restoreCallBack=e}addJointMotion(e){this._jointMotions.set(e.id,e)}removeJointMotion(e){this._jointMotions.delete(e)}getJointMotionById(e){return this._jointMotions.get(e)}getAllJointMotions(){return this._jointMotions}addTF(e){this._tfs.set(e.id,e)}removeTF(e){this._tfs.delete(e)}getTFById(e){return this._tfs.get(e)}getAllTFs(){return this._tfs}hasGraph(e){return this._graphs.has(e)}addGraph(e){this._graphs.set(e.id(),e)}removeGraph(e){this._graphs.delete(e)}getGraphById(e){return this._graphs.get(e)}getAllGraphs(){let e=[];for(const[,t]of this._graphs)e.push(t);return e}getCurrGraph(){return this._currSelectedGraph}setCurrGraph(e){void 0!==e?this.hasGraph(e)&&(this._currSelectedGraph=this._graphs.get(e)):this._currSelectedGraph=void 0}hasUmapGraph(e){return this._umapGraphs.has(e)}addUmapGraph(e){this._umapGraphs.set(e.id(),e)}removeUmapGraph(e){this._umapGraphs.delete(e)}getUmapGraphById(e){return this._umapGraphs.get(e)}getAllUmapGraphs(){let e=[];for(const[,t]of this._umapGraphs)e.push(t);return e}getCurrUmapGraph(){return this._currUmapGraph}setCurrUmapGraph(e){void 0!==e?this.hasUmapGraph(e)&&(this._currUmapGraph=this._umapGraphs.get(e)):this._currUmapGraph=void 0}hasQuaternionSpaceScene(e){return this._quaternionSpaceScenes.has(e)}addQuaternionSpaceScene(e){this._quaternionSpaceScenes.set(e.id().value(),e)}removeQuaternionSpaceScene(e){let t=this.getQuaternionSpaceSceneById(e);void 0!==t&&(this._quaternionSpaceScenes.delete(t.id().value()),t.removeAllTraces())}allQuaternionSpaceScenes(){let e=[];for(const[,t]of this._quaternionSpaceScenes)e.push(t);return e}setCurrQuaternionSpaceScene(e){void 0!==e?this.hasQuaternionSpaceScene(e)&&(this._currQuaternionSpaceScene=this._quaternionSpaceScenes.get(e)):this._currQuaternionSpaceScene=void 0}getCurrQuaternionSpaceScene(){return this._currQuaternionSpaceScene}getQuaternionSpaceSceneById(e){return this._quaternionSpaceScenes.get(e)}setShouldSyncViews(e){this._syncViews=e,e&&this.updateCamViewpoint(this._currSyncView),ir.updateUI()}shouldSyncViews(){return this._syncViews}addSyncViewCallback(e){this._syncViewCallbacks.push(e)}removeSyncViewCallback(e){let t=this._syncViewCallbacks.indexOf(e);return t>-1&&(this._syncViewCallbacks.splice(t,1),!0)}currSyncViewpoint(){return this._currSyncView}setCurrSyncViewpoint(e){let[t,n]=e,[r,i]=this._currSyncView;!0===t.equals(r)&&!0===n.equals(i)||(!0===this._syncViews&&this.updateCamViewpoint(e),this._currSyncView=e)}updateCamViewpoint(e){for(const t of this._syncViewCallbacks)t(e)}setTimeWarpBase(e){if(this._currTimeWarpBase===e)return;let t=()=>{for(const e of this.allManagedRobotScenes())e.setTimeWarping(void 0);this._currTimeWarpBase=void 0},n=()=>{t(),ir.updateUI(),ir.render()};if(void 0===e)return void n();o()(this.hasManagedRobotScene(e),"You can not set the RobotSceneManager to use a scene that it does not own "+"as its timewarp base. Scene: ".concat(e));const r=this.startTime(),a=this.endTime(),s=30*Math.abs(a-r);let l=_R.frameRange(r,a,30,s),c=new Map;{let t=new Set(cy(e.robots(),(e=>e.name()))),r=e.frameData(l,(e=>t.has(e)),((e,t)=>1===uy(e.links(),t,(e=>e.name()))),((e,t)=>1===uy(e.joints(),t,(e=>e.name()))),((e,t)=>1===uy(e.articuatedJoints(),t,(e=>e.name()))));if(!0===r.keys().next().done)return void n();for(const[e,n]of r.entries()){let t=new Map,r=new Map;for(const[e,o]of n.positions)if(void 0===e)t.set(e,[e,o]);else if(e instanceof d_)t.set(e.name(),[e,o]);else{if(!(e instanceof p_))throw new i.AssertionError({message:"robotPart was not a boolean, RobotJoint, or RobotLink!"});t.set(e.name(),[e,o])}for(const[e,i]of n.jointAngles)r.set(e.name(),[e,i]);c.set(e.name(),[e,{times:n.times,positions:t,jointAngles:r}])}}t();for(const i of this.allManagedRobotScenes()){if(i===e)continue;let t;{let e=new Set(cy(i.robots(),(e=>e.name())));if(t=i.frameData(l,(t=>t.includePosInTimeWarpConsideration()&&c.has(t.name())&&e.has(t)),((t,n)=>n.includePosInTimeWarpConsideration()&&c.has(t.name())&&e.has(t)&&1===uy(t.links(),n,(e=>e.name()))),((t,n)=>n.includePosInTimeWarpConsideration()&&c.has(t.name())&&e.has(t)&&1===uy(t.joints(),n,(e=>e.name()))),((t,n)=>n.includeAngleInTimeWarpConsideration()&&c.has(t.name())&&e.has(t)&&1===uy(t.articuatedJoints(),n,(e=>e.name())))),!0===t.keys().next().done)continue}let n=[];for(const[e,i]of t){let t=c.get(e.name());if(void 0!==t){for(const[e,r]of i.positions){let i=t[1].positions.get(void 0===e?void 0:e.name());if(void 0!==i){let e=i[1];n.push([e,r])}}for(const[e,r]of i.jointAngles){let i=t[1].jointAngles.get(e.name());if(void 0!==i){let e=i[1];n.push([e,r])}}}}let r=new oS(l,l,((e,t,r,i)=>{let o=0;for(const[a,s]of n){let e=a[r],t=s[i];o+="number"===typeof e&&"number"===typeof t?Math.abs(e-t):e.distanceTo(t)}return o}));i.setTimeWarping(r)}this._currTimeWarpBase=e,ir.updateUI(),ir.render()}addControlledRobotScene(e){this._controlledScenes.push(e),e.animationManager().setTime(this.currTime()),ir.updateUI()}removeControlledRobotScene(e){let t=this._controlledScenes.indexOf(e);t>-1&&this._controlledScenes.splice(t,1)}setAllowRobotSelection(e){this._allowSelections=e}allowRobotSelection(){return this._allowSelections}startAnimations(){this.currTime()>=this.currEndTime()&&this.setCurrTime(this.currStartTime()),this._animationLoop.start()}pauseAnimations(){this._animationLoop.stop()}restartAnimations(){this._animationLoop.restart()}currTimeRange(){return[this.currStartTime(),this.currTime(),this.currEndTime()]}absoluteTimeRange(){return[this.startTime(),this.currTime(),this.endTime()]}timeRange(){return[this.startTime(),this.currStartTime(),this.currTime(),this.currEndTime(),this.endTime()]}startTime(){let e=1/0,t=t=>{for(const n of t){let t=n.animationManager();e=Math.min(t.startTime(),e)}};return t(this._activeScenes),t(this._controlledScenes),e===1/0?0:e}currStartTime(){return this._animationLoop.startTime()}setCurrStartTime(e){e=ry(e,this.startTime(),this.endTime()),this._animationLoop.setStartTime(e),this.updateAllTraces()}setCurrTime(e){e=ry(e,this.startTime(),this.endTime()),this._animationLoop.setTime(e)}currTime(){return this._animationLoop.time()}currEndTime(){return this._animationLoop.endTime()}setCurrEndTime(e){e=ry(e,this.startTime(),this.endTime()),this._animationLoop.setEndTime(e),this.updateAllTraces()}endTime(){let e=-1/0,t=t=>{for(const n of t){let t=n.animationManager();e=Math.max(t.endTime(),e)}};return t(this._activeScenes),t(this._controlledScenes),e===-1/0?1:e}updateAllTraces(){for(const e of this.allManagedRobotScenes())e.updateTraces();for(const e of this.allQuaternionSpaceScenes())e.updateTraces()}updateAllTraceSymbols(){for(const e of this.allQuaternionSpaceScenes())e.updateTraceSymbols()}robotSceneById(e){for(const[,t]of this._availableScenes)if(t.id().value()===e)return t}currRobotScene(e){if(!0===e||void 0===e)return this._currScene;if(this._currScene)return this._currScene;{let e=this.addDefaultManagedRobotScene();return this.setCurrRobotScene(e),e}}setCurrRobotScene(e){this._currScene=e,ir.updateUI()}masterRobots(){return this._masterRobots}addMasterRobot(e){-1===this._masterRobots.indexOf(e)&&(this._masterRobots.push(e),ir.updateUI())}removeMasterRobot(e){let t=this._masterRobots.indexOf(e);t>-1&&(this._masterRobots.splice(t,1),ir.updateUI())}sortScenes(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!this._isSorted){this._availableScenes.sort(((e,t)=>e[0].join("").localeCompare(t[0].join(""))));let e=FR.colors(this._availableScenes.length);for(const[t,[,n]]of oy(this._availableScenes))n.setColor(e[t]);this._isSorted=!0}}animationTables(){return this._animationTables}addAnimationTable(e){-1===this._animationTables.indexOf(e)&&(this._animationTables.push(e),ir.updateUI())}removeAnimationTable(e){let t=this._animationTables.indexOf(e);t>-1&&(this._animationTables.splice(t,1),ir.updateUI())}removeRobotScene(e){let t=-1,n=0;for(;n<this._availableScenes.length;){const[,r]=this._availableScenes[n];if(r===e){t=n;break}n+=1}if(t<=-1)return;let[,r]=this._availableScenes.splice(t,1)[0];if(r&&this.isActiveRobotScene(r)){let e=!0;for(;e;)e=void 0!==this.deactivateRobotScene(r);return r.setParentRobotSceneManager(void 0),r}this._availableScenes.length>0&&(t-1>=0?this.setCurrRobotScene(this._availableScenes[t-1][1]):this.setCurrRobotScene(this._availableScenes[t][1])),e===this._currTimeWarpBase&&this.setTimeWarpBase(void 0),ir.updateUI()}addManagedRobotScenes(e){for(const n of e){var t;this._availableScenes.push([n.path,n.robotScene,null!==(t=n.metrics)&&void 0!==t?t:new Map]),this._isSorted=!1,n.robotScene.animationManager().setTime(this.currTime()),ir.updateUI()}ir.recalculateTimeWarping()}getManagedRobotSceneData(e){let t=this._availableScenes.filter((t=>{let[,n]=t;return n===e}))[0];if(t){let[e,n,r]=t;return{path:e,robotScene:n,metrics:r}}}addDefaultManagedRobotScene(){let e=new _R(this);return this.addManagedRobotScenes([{path:[],robotScene:e}]),e}allManagedRobotScenes(){return this._availableScenes.map((e=>{let[,t]=e;return t}))}hasManagedRobotScene(e){let t=-1;for(const[n,[,r]]of oy(this._availableScenes))if(r===e){t=n;break}return t>-1}isActiveRobotScene(e){return this._activeScenes.indexOf(e)>-1}activeRobotScenes(){return this._activeScenes}activateRobotScene(e){if(Array.isArray(e)){for(const[t,n]of this._availableScenes)if(jR(t,e))return this._activeScenes.push(n),this.setCurrEndTime(this.endTime()),void ir.updateUI();throw Error("RobotScene under path ".concat(e," could not be found and switched to by the RobotSceneManager."))}for(const[,t]of this._availableScenes)if(t===e)return this._activeScenes.push(t),this.setCurrEndTime(this.endTime()),void ir.updateUI();throw Error("RobotScene could not be found and switched to by the RobotSceneManager.")}deactivateRobotScene(e){if(Array.isArray(e)){for(const[t,[n,,]]of oy(this._availableScenes))if(jR(n,e)){let e=this._availableScenes.splice(t,1)[0][1];return ir.updateUI(),e}}else{let t=this._activeScenes.indexOf(e);if(t>-1){let e=this._activeScenes.splice(t,1)[0];return ir.updateUI(),e}}}async loadSessionFromURL(e,t){ir.setPopupHelpPage({page:Xn.LoadingStarted,location:e,type:"workspace"});try{let n=await fetch(e,{method:"GET"});await this.loadSession(await n.json(),t),ir.setPopupHelpPage({page:Xn.LoadingSuccess,location:e,type:"workspace"})}catch(tq){throw ir.setPopupHelpPage({page:Xn.LoadingFailed,location:e,type:"workspace"}),tq}}*content(){this.sortScenes();for(const e of this._availableScenes)yield[...e]}saveSession(){const e=new Map,t=new Map,n=[],r=new Map,i=new Map,o=[],a=[],s=new Map;for(const[m,g,v]of this.content()){let u=g.robots(),h=[],d=[],p=[];for(const r of u){let i=r.idValue(),o=r.url(),a=r.name();if("World Frame"===a)continue;let l=[];if(s.set(i,l),void 0===o){ir.error('Cannot save robot with name "'.concat(r.name(),'" because it does not come from a URL'));continue}let c=e.get(o);if(void 0===c&&(c=t.get(i)),void 0===c){let s;void 0!==o&&e.set(o,r),t.set(i,r),s="urdf"===r.objectType()?"urdf":"AxesHelper"!==r.url()?"gltf":"AxesHelper",n.push({type:s,id:i,url:o,name:a})}else{i=c.idValue();let e=c.url();void 0!==e&&(o=e)}let u=[];for(const[e,t]of r.getArticuatedJointMap().entries())u.push({name:e,angle:t.angle()});h.push({objectID:i,robotID:r.id().value(),isviewpoint:!1,animationID:l,name:r.name(),position:e_(r.getPosition()),rotation:n_(r.getQuaternion()),scale:e_(r.getScale()),joints:u,positionOffset:e_(r.getPositionOffset()),rotationOffset:n_(r.getQuaternionOffset()),scaleOffset:e_(r.getScaleOffset())})}for(const e of g.animationManager().animationGroups())for(const t of e.animations()){let e=t.animationTable(),n=e.idValue(),a=e.url(),l=i.get(n);if(void 0===l&&void 0!==a&&(l=r.get(a)),void 0===l){i.set(e.idValue(),e);let t=e.url();void 0!==t&&(r.set(t,e),a=t),o.push({name:e.name(),id:n,timeUnit:"second",url:a,content:e.toCSV()})}else n=l.idValue();let c=s.get(t.objectAnimating().idValue());void 0!==c?c.push(n):ir.error("Could not save an AnimationTable because the object it animates could not be saved previously.")}for(const e of g.getAllTraces()){var l,c;let t=null===(l=e.robotPart())||void 0===l?void 0:l.name(),n=null===(c=e.robot().parentScene())||void 0===c?void 0:c.id().value(),r=g.id().value();void 0!==n&&void 0!==r&&(void 0===t&&(t=""),null===d||void 0===d||d.push({robotId:e.robot().idValue(),robotPartName:t,parentSceneId:n,currSceneId:r,originalId:e.id()}))}for(const e of g.getAllArrows())null===p||void 0===p||p.push({traceFromId:e.traceFrom().id(),traceToId:e.traceTo().id(),parentSceneId:g.id().value()});let f={};for(const[e,t]of v.entries())f[e]=t;a.push({name:g.name(),originalId:g.id().value(),path:m,metrics:f,threeObjects:h,traces:d,backgroundColor:g.backgroundColor(),directionalLightIntensity:g.directionalLightIntensity(),ambientLightIntensity:g.ambientLightIntensity(),showGroundPlane:g.isGroundPlaneVisible(),cameraType:g.cameraType(),worldFrame:g.worldFrame(),showWorldFrameObject:g.isWorldFrameObjectVisible(),axisDensity:g.density(),axisSize:g.axisSize(),traceSize:g.traceSize(),isTimeWarped:g.isTimeWarping(),timeWarpBaseSceneId:g.baseSceneId(),keyObjects:g.keyObjects(),arrows:p})}const u=[];for(const m of this.allQuaternionSpaceScenes()){let e=[];for(const t of m.getAllTraces()){var h,d;let n=null===(h=t.robotPart())||void 0===h?void 0:h.name(),r=null===(d=t.robot().parentScene())||void 0===d?void 0:d.id().value();void 0!==r&&(void 0===n&&(n=""),null===e||void 0===e||e.push({robotId:t.robot().idValue(),robotPartName:n,parentSceneId:r}))}u.push({name:m.name(),originalId:m.id().value(),backgroundColor:m.backgroundColor(),lineGroupOpacity:m.lineGroupOpacity(),lineGroupColor:m.lineGroupColor(),traces:e,showWorldFrameObject:m.isWorldFrameObjectVisible()})}const p=[];for(const m of this.getAllGraphs()){let e=[];for(const t of m.lineIds())e.push(t);p.push({name:m.name(),originalId:m.id(),isDiff:m.isDiff(),isTimeWarp:m.isTimeWarp(),line_ids:e,currProperty:m.currProperty(),lineWidth:m.lineWidth(),axisColor:m.axisColor(),backgroundColor:m.backgroundColor(),filter:m.filter()})}const f=[];for(const m of this.getAllUmapGraphs()){let e=[];for(const t of m.lineIds())e.push(t);f.push({name:m.name(),originalId:m.id(),line_ids:e,lineWidth:m.lineWidth(),axisColor:m.axisColor(),backgroundColor:m.backgroundColor()})}return{saveFormatVersion:"1.0",times:{currentTime:this.currTime(),currentEndTime:this.currEndTime(),currentStartTime:this.currStartTime()},quaternionScenes:u,objects:n,animations:o,scenes:a,graphs:p,umapGraphs:f}}async loadSessionFromLocalFile(e,t){ir.setPopupHelpPage({page:Xn.LoadingStarted,location:e.name,type:"workspace"});try{let n=await ew(e);await this.loadSession(n,t),ir.setPopupHelpPage({page:Xn.LoadingSuccess,location:e.name})}catch(tq){throw ir.setPopupHelpPage({page:Xn.LoadingFailed,location:e.name,type:"workspace"}),tq}}async loadSession(e,t){let n=e.saveFormatVersion;if(void 0!==n&&"1.0"!==n)return void ir.error('Could not load in workspace with unknown version number "'.concat(n,'"'));await this.loadV1Session(e,t);let r=0;for(;r<this._availableScenes.length;){let[e,t]=this._availableScenes[r];0!==e.length||0!==t.robots().length?r+=1:this.removeRobotScene(this._availableScenes[r][1])}}async loadV1Session(e,t){let n=[];for(const i of e.objects)"URDF"===i.type.toUpperCase()?n.push([i.id,g_.loadRobot(i.url,"urdf",i.name)]):"GLTF"===i.type.toUpperCase()?n.push([i.id,g_.loadRobot(i.url,"glb",i.name)]):n.push([i.id,g_.loadRobot(i.url,"axesHelper",i.name)]);let r=[],o=[];for(const x of e.animations){var a;let e,t=x.content,n=x.id,r=x.url,s=null!==(a=x.name)&&void 0!==a?a:"Unnamed Animation",l=x.timeUnit;if(t){let r=t;e=new Promise(((e,t)=>{let o=Zw.fromCSV(r,l);o instanceof i.AssertionError?t(o):(o.id().set(n),o.setName(s),e(o))}))}else{if(!r)throw Error("Expected url and/or some content for an animation, but got neither.");{let t=r;e=async function(){let e=await Qx(t);if(0===e.length){let r=Zw.fromCSV(e[0],l);if(!(r instanceof i.AssertionError))return r.id().set(n),r.setName(s),r;throw new Error("CSV from url ".concat(t," was il-formatted and could not be used."))}throw Error("Expected exactly 1 CSV from url ".concat(t,", got ").concat(e.length,"."))}()}}o.push([n,e])}async function s(e){let t=[];for(const[n,r]of e)t.push([n,await r]);return t}let l=new Map,c=new Map;for(const[i,x]of await s(n))l.set(i,x),x.id().regen();for(const[i,x]of await s(o))c.set(i,x),x.id().regen(),r.push(x);let u=[],h=new Map,d=new Map;for(const i of e.scenes){let e=new _R(this),t=new Map;void 0!==i.originalId&&(h.set(i.originalId,e.id().value()),d.set(e.id().value(),t)),void 0!==i.name&&e.setName(i.name),void 0!==i.backgroundColor&&e.setBackgroundColor(i.backgroundColor),void 0!==i.directionalLightIntensity&&e.setDirectionalLightIntensity(i.directionalLightIntensity),void 0!==i.ambientLightIntensity&&e.setAmbientLightIntensity(i.ambientLightIntensity),void 0!==i.showGroundPlane&&e.setGroundPlaneVisibility(i.showGroundPlane),void 0!==i.cameraType&&e.setCameraType(i.cameraType),void 0!==i.worldFrame&&e.setWorldFrame(i.worldFrame),void 0!==i.showWorldFrameObject&&e.setWorldFrameObjectVisibility(i.showWorldFrameObject),void 0!==i.axisDensity&&e.setDensity(i.axisDensity),void 0!==i.axisSize&&e.setAxisSize(i.axisSize),void 0!==i.traceSize&&e.setTraceSize(i.traceSize);let n=new fy("Animation Group"),r=i.path,o=new Map;for(const[a,s]of Object.entries(i.metrics))o.set(a,s);for(const a of i.threeObjects){let r=a.objectID,i=l.get(r);if(void 0===i)throw new Error('Unable to load in sessions: There was no object with ID "'.concat(r,'"'));let o=i.clone();o.setName(a.name),o.id().regen(),void 0!==a.robotID&&t.set(a.robotID,o.idValue()),o.setScale(t_(o.getScaleOffset().clone(),a.scale)),o.setPosition(t_(o.getPositionOffset().clone(),a.position));let s=a.rotation;if(void 0!==s&&(void 0!==s.w?o.setQuaternion(r_(o.getQuaternionOffset().clone(),a.rotation)):o.setQuaternion(t_(o.getQuaternionOffset().clone(),a.rotation))),o.setScaleOffset(t_(o.getScaleOffset().clone(),a.scaleOffset)),o.setPositionOffset(t_(o.getPositionOffset().clone(),a.positionOffset)),s=a.rotationOffset,void 0!==s&&(void 0!==s.w?o.setQuaternionOffset(r_(o.getQuaternionOffset().clone(),a.rotationOffset)):o.setQuaternionOffset(t_(o.getQuaternionOffset().clone(),a.rotationOffset))),a.joints)for(const e of a.joints)o.setJointAngle(e.name,e.angle);e.addChildRobot(o);for(const e of a.animationID){let t=c.get(e);t&&n.addAnimation(new py(o,t))}}e.animationManager().addActiveAnimation(n),u.push({path:r,robotScene:e,metrics:o})}let p,f=u.at(u.length-1);void 0!==f&&(p=f.robotScene),this.addManagedRobotScenes(u);for(const i of r)this.addAnimationTable(i);for(const i of l.values())this._masterRobots.push(i);p&&this.setCurrRobotScene(p);for(const i of this.allManagedRobotScenes())this.isActiveRobotScene(i)||this.activateRobotScene(i);void 0!==e.times&&(this.setCurrStartTime(e.times.currentStartTime),this.setCurrEndTime(e.times.currentEndTime),this.setCurrTime(e.times.currentTime));for(const i of e.scenes)if(void 0!==i.isTimeWarped&&void 0!==i.timeWarpBaseSceneId&&void 0!==i.keyObjects&&!0===i.isTimeWarped&&void 0!==i.originalId){let e=this.findNewSceneId(i.timeWarpBaseSceneId,h),t=this.findNewSceneId(i.originalId,h);if(void 0===e||void 0===t)continue;let n=this.robotSceneById(e),r=this.robotSceneById(t);if(void 0===n||void 0===r)continue;for(const o of i.keyObjects){const[e,t]=o.split("\n"),[i,a]=t.split(" ");if(0===i.length){let t=r.getRobotByName(e);null===t||void 0===t||t.setPositionIncludeInTimeWarpConsideration(!0)}else{let t=r.getJointByName(e,i);var m;if(void 0===t)t=r.getLinkByName(e,i),null===(m=t)||void 0===m||m.setPosIncludeInTimeWarpConsideration(!0);else"angle"==a?t.setAngleIncludeInTimeWarpConsideration(!0):t.setPosIncludeInTimeWarpConsideration(!0)}r.setTimeWarpBase(void 0),r.setTimeWarpBase(n)}r.setKeyObjects(i.keyObjects)}let g=new Map;for(const i of e.scenes)if(void 0!==i.traces)for(const e of i.traces){let t=e.robotPartName,n=this.findNewSceneId(e.parentSceneId,h);if(void 0===n)continue;let r=this.findNewSceneId(e.currSceneId,h);if(void 0===r)continue;let i=this.findNewRobotId(e.robotId,d,n);void 0!==i&&this.addTracesToRobotScene(r,n,i,t,g,e.originalId)}for(const i of e.scenes)if(void 0!==i.arrows)for(const e of i.arrows){console.log(e);let t=this.findNewSceneId(e.parentSceneId,h);if(void 0===t)continue;let n=this.robotSceneById(t);if(void 0===n)continue;let r=this.findNewTraceId(e.traceFromId,g),i=this.findNewTraceId(e.traceToId,g);void 0!==r&&void 0!==i&&n.addArrow(r,i)}let v=new Map;if(void 0!==e.quaternionScenes)for(const i of e.quaternionScenes){let e=new LR(this);e.setName(i.name),e.setBackgroundColor(i.backgroundColor),e.setLineGroupOpacity(i.lineGroupOpacity),e.setLineGroupColor(i.lineGroupColor),e.setWorldFrameObjectVisibility(i.showWorldFrameObject),v.set(i.originalId,e.id().value());for(const t of i.traces){let n=t.robotPartName,r=this.findNewSceneId(t.parentSceneId,h);if(void 0===r)continue;let i=this.findNewRobotId(t.robotId,d,r);void 0!==i&&this.addTracesToQuaternionScene(e,r,i,n)}}let b=new Map;if(void 0!==e.graphs)for(const i of e.graphs){let e=new NR((new yy).value(),i.isDiff,i.isTimeWarp);this.addGraph(e),e.setName(i.name),b.set(i.originalId,e.id());for(let t=0;t<i.line_ids.length;t++){const[e,n]=this.decomposeLineId(i.line_ids[t]);let r=this.findNewSceneId(e,h);i.line_ids[t]=r+"#"+n}e.setCurrProperty(i.currProperty),e.setLineIds(i.line_ids),e.setAxisColor(i.axisColor),e.setBackgroundColor(i.backgroundColor),e.setLineWidth(i.lineWidth),void 0!==i.filter&&e.setFilter(i.filter)}let y=new Map;if(void 0!==e.umapGraphs)for(const i of e.umapGraphs){let e=new DR((new yy).value());this.addUmapGraph(e),e.setName(i.name),y.set(i.originalId,e.id());for(let t=0;t<i.line_ids.length;t++){const[e,n]=this.decomposeLineId(i.line_ids[t]);let r=this.findNewSceneId(e,h);i.line_ids[t]=r+"#"+n}e.setLineIds(i.line_ids),e.setAxisColor(i.axisColor),e.setBackgroundColor(i.backgroundColor),e.setLineWidth(i.lineWidth)}this.restoreWindows(e.layout,h,v,b,y),void 0!==t&&t(e.layout)}decomposeLineId(e){const[t,n]=e.split("#");return[t,n]}findNewSceneId(e,t){return t.get(e)}findNewRobotId(e,t,n){var r;return null===(r=t.get(n))||void 0===r?void 0:r.get(e)}findNewTraceId(e,t){return t.get(e)}restoreWindows(e,t,n,r,i){var o,a,s;if(void 0===e)return;let l=e=>{let t,n,r=e.indexOf("&"),i=e.slice(0,r),o=e.slice(r+1,e.length);if(r=o.indexOf("&"),-1!==r?(n=o.slice(0,r),t=o.slice(r+1,o.length)):t=o,void 0===n)throw new Error("RobotScene with undefined ID in DockLayout");return[i,n,t]},c=e=>{for(let d=0;d<e.length;d++){let p=e[d],f=p.activeId,m=new Map;if(void 0!==f)if(f.startsWith("RobotScene")){let[,e,n]=l(f),r=t.get(n);void 0!==r&&(p.activeId="RobotScene&".concat(Zb(4),"&").concat(r),m.set(f,p.activeId))}else if(f.startsWith("QuaternionSpaceScene")){let[,e,t]=f.split("&"),r=n.get(e);void 0!==r&&(p.activeId="QuaternionSpaceScene&".concat(r,"&").concat(Zb(4)),m.set(f,p.activeId))}else if(f.startsWith("Graph")||f.startsWith("DifferenceGraph")){let[e,t,n]=f.split("&"),i=r.get(t);void 0!==i&&(p.activeId="".concat(e,"&").concat(i,"&").concat(Zb(4)),m.set(f,p.activeId))}else if(f.startsWith("UmapGraph")){let[e,t,n]=f.split("&"),r=i.get(t);void 0!==r&&(p.activeId="".concat(e,"&").concat(r,"&").concat(Zb(4)),m.set(f,p.activeId))}else if(f.startsWith("SceneLegend")||f.startsWith("LineGraphLegend")||f.startsWith("QuaternionSpaceLegend")||f.startsWith("UmapLegend")){let e,[o,a,s]=f.split("&");e=f.startsWith("SceneLegend")?t:f.startsWith("LineGraphLegend")?r:f.startsWith("QuaternionSpaceLegend")?n:i;let l=e.get(s);void 0!==l&&(p.activeId="".concat(o,"&").concat(Zb(4),"&").concat(l),m.set(f,p.activeId))}else if(f.startsWith("TimeWarpTimeBar")){const e=f.substring(15);let n=t.get(e);void 0!==n&&(p.activeId="TimeWarpTimeBar"+n,m.set(f,p.activeId))}else if(f.startsWith("TimeWarpedGraph")){let[e,n,i,o]=f.split("&"),a=t.get(i),s=r.get(n);void 0!==a&&void 0!==s&&(p.activeId="".concat(e,"&").concat(s,"&").concat(a,"&").concat(Zb(4)),m.set(f,p.activeId))}if(void 0!==p.tabs){let e=p.tabs;for(let c=0;c<e.length;c++){var o,a,s,u,h;let d=e[c];if(void 0!==d.id)if(m.has(d.id))d.id=m.get(d.id);else if(null!==(o=d.id)&&void 0!==o&&o.startsWith("RobotScene")){let[,e,n]=l(d.id),r=t.get(n);void 0!==r&&(d.id="RobotScene&".concat(Zb(4),"&").concat(r))}else if(null!==(a=d.id)&&void 0!==a&&a.startsWith("QuaternionSpaceScene")){let[,e,t]=d.id.split("&"),r=n.get(e);void 0!==r&&(d.id="QuaternionSpaceScene&".concat(r,"&").concat(Zb(4)))}else if(null!==(s=d.id)&&void 0!==s&&s.startsWith("Graph")||null!==(u=d.id)&&void 0!==u&&u.startsWith("DifferenceGraph")){let[e,t,n]=d.id.split("&"),i=r.get(t);void 0!==i&&(d.id="".concat(e,"&").concat(i,"&").concat(Zb(4)))}else if(null!==(h=d.id)&&void 0!==h&&h.startsWith("UmapGraph")){let[e,t,n]=d.id.split("&"),r=i.get(t);void 0!==r&&(d.id="".concat(e,"&").concat(r,"&").concat(Zb(4)))}else if(d.id.startsWith("SceneLegend")||d.id.startsWith("LineGraphLegend")||d.id.startsWith("QuaternionSpaceLegend")||d.id.startsWith("UmapLegend")){let e,[o,a,s]=d.id.split("&");e=d.id.startsWith("SceneLegend")?t:d.id.startsWith("LineGraphLegend")?r:d.id.startsWith("QuaternionSpaceLegend")?n:i;let l=e.get(s);void 0!==l&&(p.activeId="".concat(o,"&").concat(Zb(4),"&").concat(l),m.set(d.id,p.activeId))}else if(d.id.startsWith("TimeWarpTimeBar")){const e=d.id.substring(15);let n=t.get(e);void 0!==n&&(d.id="TimeWarpTimeBar"+n)}else if(d.id.startsWith("TimeWarpedGraph")){let[e,n,i,o]=d.id.split("&"),a=t.get(i),s=r.get(n);void 0!==a&&void 0!==s&&(d.id="".concat(e,"&").concat(s,"&").concat(a,"&").concat(Zb(4)))}}}let g=e[d];void 0!==g.children&&g.children.length>0&&c(g.children)}};c(e.dockbox.children),void 0!==(null===(o=e.floatbox)||void 0===o?void 0:o.children)&&c(e.floatbox.children),void 0!==(null===(a=e.maxbox)||void 0===a?void 0:a.children)&&c(e.maxbox.children),void 0!==(null===(s=e.windowbox)||void 0===s?void 0:s.children)&&c(e.windowbox.children)}addTracesToQuaternionScene(e,t,n,r){let i=this.robotSceneById(t);if(void 0===i)return;let o=i.robotById(n);if(void 0===o)return;let a=o.jointMap().get(r);void 0===a&&(a=o.linkMap().get(r)),e.addChildTrace(i,o,_R.frameRange(this.startTime(),this.endTime()),a)}addTracesToRobotScene(e,t,n,r,i,o){let a=this.robotSceneById(t);if(void 0===a)return;let s=this.robotSceneById(e);if(void 0===s)return;let l=a.robotById(n);if(void 0===l)return;let c=l.jointMap().get(r);if(void 0===c&&(c=l.linkMap().get(r)),s===a)if(s.hasChildTrace(l,c));else{let e=s.addChildTrace(l,_R.frameRange(this.startTime(),this.endTime()),c);i.set(o,e[0])}else if(s.hasReceivedGhostTrace(l,c));else{let e=a.sendGhostTracesTo(l,_R.frameRange(this.startTime(),this.endTime()),c,s);i.set(o,e[0])}}}const BR={floatable:!0,maximizable:!0},UR="place-holder",GR="-maximized-placeholder-",VR={floatable:!1},HR=t.createContext(null),WR=HR.Provider;HR.Consumer;var $R=n(8168);function qR(e){return qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qR(e)}function XR(e){var t=function(e,t){if("object"!=qR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qR(t)?t:t+""}function YR(e,t,n){return(t=XR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function JR(e,t){if(e){if("string"==typeof e)return KR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KR(e,t):void 0}}function QR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||JR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ZR=n(8587);function ek(e,t){if(null==e)return{};var n,r,i=(0,ZR.A)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(n),!0).forEach((function(t){YR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rk=n(8139),ik=n.n(rk),ok=n(2086);function ak(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return t.Children.forEach(e,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?r=r.concat(ak(e)):(0,ok.isFragment)(e)&&e.props?r=r.concat(ak(e.props.children,n)):r.push(e))})),r}const sk=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))};function lk(e){var n=t.useRef();n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return r}function ck(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var uk=ck()?t.useLayoutEffect:t.useEffect,hk=function(e,n){var r=t.useRef(!0);uk((function(){return e(r.current)}),n),uk((function(){return r.current=!1,function(){r.current=!0}}),[])},dk=function(e,t){hk((function(t){if(!t)return e()}),t)};const pk=hk;function fk(e){var n=t.useRef(!1),r=QR(t.useState(e),2),i=r[0],o=r[1];return t.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[i,function(e,t){t&&n.current||o(e)}]}function mk(e){return void 0!==e}function gk(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=QR(fk((function(){return mk(i)?i:mk(r)?"function"===typeof r?r():r:"function"===typeof e?e():e})),2),l=s[0],c=s[1],u=void 0!==i?i:l,h=a?a(u):u,d=lk(o),p=QR(fk([u]),2),f=p[0],m=p[1];return dk((function(){var e=f[0];l!==e&&d(l,e)}),[f]),dk((function(){mk(i)||c(i)}),[i]),[h,lk((function(e,t){c(e,t),m([u],t)}))]}function vk(e){return function(e){if(Array.isArray(e))return KR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bk=function(e){return+setTimeout(e,16)},yk=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(bk=function(e){return window.requestAnimationFrame(e)},yk=function(e){return window.cancelAnimationFrame(e)});var xk=0,wk=new Map;function _k(e){wk.delete(e)}var Sk=function(e){var t=xk+=1;return function n(r){if(0===r)_k(t),e();else{var i=bk((function(){n(r-1)}));wk.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};Sk.cancel=function(e){var t=wk.get(e);return _k(e),yk(t)};const Mk=Sk;var Tk={},Ek=[];function Ck(e,t){}function Ak(e,t){}function Rk(e,t,n){t||Tk[n]||(e(!1,n),Tk[n]=!0)}function kk(e,t){Rk(Ck,e,t)}kk.preMessage=function(e){Ek.push(e)},kk.resetWarned=function(){Tk={}},kk.noteOnce=function(e,t){Rk(Ak,e,t)};const Pk=kk;var Lk=n(7950);function Ok(e){return e instanceof HTMLElement||e instanceof SVGElement}function Nk(e){var n,r=function(e){return e&&"object"===qR(e)&&Ok(e.nativeElement)?e.nativeElement:Ok(e)?e:null}(e);return r||(e instanceof t.Component?null===(n=Lk.findDOMNode)||void 0===n?void 0:n.call(Lk,e):null)}function Ik(e,n,r){var i=t.useRef({});return"value"in i.current&&!r(i.current.condition,n)||(i.current.value=e(),i.current.condition=n),i.current.value}var Dk=function(e,t){"function"===typeof e?e(t):"object"===qR(e)&&e&&"current"in e&&(e.current=t)},jk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){Dk(t,e)}))}},Fk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ik((function(){return jk.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},zk=function(e){var t,n,r=(0,ok.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===ok.ForwardRef)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===ok.ForwardRef)};function Bk(e){return(0,t.isValidElement)(e)&&!(0,ok.isFragment)(e)}Number(t.version.split(".")[0]);var Uk=t.createContext(null);var Gk=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Vk="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Hk="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Wk="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Hk):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var $k=["top","right","bottom","left","width","height","size","weight"],qk="undefined"!==typeof MutationObserver,Xk=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){Wk(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Vk&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),qk?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Vk&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;$k.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Yk=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Kk=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Hk},Jk=rP(0,0,0,0);function Qk(e){return parseFloat(e)||0}function Zk(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Qk(e["border-"+n+"-width"])}),0)}function eP(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Jk;var r=Kk(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=Qk(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=Qk(r.width),l=Qk(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=Zk(r,"left","right")+o),Math.round(l+a)!==n&&(l-=Zk(r,"top","bottom")+a)),!function(e){return e===Kk(e).document.documentElement}(e)){var c=Math.round(s+o)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return rP(i.left,i.top,s,l)}var tP="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Kk(e).SVGGraphicsElement}:function(e){return e instanceof Kk(e).SVGElement&&"function"===typeof e.getBBox};function nP(e){return Vk?tP(e)?function(e){var t=e.getBBox();return rP(0,0,t.width,t.height)}(e):eP(e):Jk}function rP(e,t,n,r){return{x:e,y:t,width:n,height:r}}var iP=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=rP(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=nP(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),oP=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return Yk(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);Yk(this,{target:e,contentRect:n})},aP=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Gk,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Kk(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new iP(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Kk(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new oP(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),sP="undefined"!==typeof WeakMap?new WeakMap:new Gk,lP=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Xk.getInstance(),r=new aP(t,n,this);sP.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){lP.prototype[e]=function(){var t;return(t=sP.get(this))[e].apply(t,arguments)}}));const cP="undefined"!==typeof Hk.ResizeObserver?Hk.ResizeObserver:lP;var uP=new Map;var hP=new cP((function(e){e.forEach((function(e){var t,n=e.target;null===(t=uP.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));function dP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XR(r.key),r)}}function fP(e,t,n){return t&&pP(e.prototype,t),n&&pP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mP(e,t){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mP(e,t)}function gP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mP(e,t)}function vP(e){return vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vP(e)}function bP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bP=function(){return!!e})()}function yP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xP(e){var t=bP();return function(){var n,r=vP(e);if(t){var i=vP(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==qR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yP(e)}(this,n)}}var wP=function(e){gP(n,e);var t=xP(n);function n(){return dP(this,n),t.apply(this,arguments)}return fP(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component);function _P(e,n){var r=e.children,i=e.disabled,o=t.useRef(null),a=t.useRef(null),s=t.useContext(Uk),l="function"===typeof r,c=l?r(o):r,u=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!l&&t.isValidElement(c)&&zk(c),d=h?c.ref:null,p=Fk(d,o),f=function(){var e;return Nk(o.current)||(o.current&&"object"===qR(o.current)?Nk(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||Nk(a.current)};t.useImperativeHandle(n,(function(){return f()}));var m=t.useRef(e);m.current=e;var g=t.useCallback((function(e){var t=m.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,a=i.height,l=e.offsetWidth,c=e.offsetHeight,h=Math.floor(o),d=Math.floor(a);if(u.current.width!==h||u.current.height!==d||u.current.offsetWidth!==l||u.current.offsetHeight!==c){var p={width:h,height:d,offsetWidth:l,offsetHeight:c};u.current=p;var f=l===Math.round(o)?o:l,g=c===Math.round(a)?a:c,v=nk(nk({},p),{},{offsetWidth:f,offsetHeight:g});null===s||void 0===s||s(v,e,r),n&&Promise.resolve().then((function(){n(v,e)}))}}),[]);return t.useEffect((function(){var e,t,n=f();return n&&!i&&(e=n,t=g,uP.has(e)||(uP.set(e,new Set),hP.observe(e)),uP.get(e).add(t)),function(){return function(e,t){uP.has(e)&&(uP.get(e).delete(t),uP.get(e).size||(hP.unobserve(e),uP.delete(e)))}(n,g)}}),[o.current,i]),t.createElement(wP,{ref:a},h?t.cloneElement(c,{ref:p}):c)}const SP=t.forwardRef(_P);function MP(e,n){var r=e.children;return("function"===typeof r?[r]:ak(r)).map((function(r,i){var o=(null===r||void 0===r?void 0:r.key)||"".concat("rc-observer-key","-").concat(i);return t.createElement(SP,(0,$R.A)({},e,{key:o,ref:0===i?n:void 0}),r)}))}var TP=t.forwardRef(MP);TP.Collection=function(e){var n=e.children,r=e.onBatchResize,i=t.useRef(0),o=t.useRef([]),a=t.useContext(Uk),s=t.useCallback((function(e,t,n){i.current+=1;var s=i.current;o.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){s===i.current&&(null===r||void 0===r||r(o.current),o.current=[])})),null===a||void 0===a||a(e,t,n)}),[r,a]);return t.createElement(Uk.Provider,{value:s},n)};const EP=TP;function CP(e){var n=(0,t.useRef)(),r=(0,t.useRef)(!1);return(0,t.useEffect)((function(){return r.current=!1,function(){r.current=!0,Mk.cancel(n.current)}}),[]),function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];r.current||(Mk.cancel(n.current),n.current=Mk((function(){e.apply(void 0,i)})))}}var AP={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=AP.F1&&t<=AP.F12)return!1;switch(t){case AP.ALT:case AP.CAPS_LOCK:case AP.CONTEXT_MENU:case AP.CTRL:case AP.DOWN:case AP.END:case AP.ESC:case AP.HOME:case AP.INSERT:case AP.LEFT:case AP.MAC_FF_META:case AP.META:case AP.NUMLOCK:case AP.NUM_CENTER:case AP.PAGE_DOWN:case AP.PAGE_UP:case AP.PAUSE:case AP.PRINT_SCREEN:case AP.RIGHT:case AP.SHIFT:case AP.UP:case AP.WIN_KEY:case AP.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=AP.ZERO&&e<=AP.NINE)return!0;if(e>=AP.NUM_ZERO&&e<=AP.NUM_MULTIPLY)return!0;if(e>=AP.A&&e<=AP.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case AP.SPACE:case AP.QUESTION_MARK:case AP.NUM_PLUS:case AP.NUM_MINUS:case AP.NUM_PERIOD:case AP.NUM_DIVISION:case AP.SEMICOLON:case AP.DASH:case AP.EQUALS:case AP.COMMA:case AP.PERIOD:case AP.SLASH:case AP.APOSTROPHE:case AP.SINGLE_QUOTE:case AP.OPEN_SQUARE_BRACKET:case AP.BACKSLASH:case AP.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const RP=AP;function kP(e,n){var r,i=e.prefixCls,o=e.id,a=e.active,s=e.tab,l=s.key,c=s.tab,u=s.disabled,h=s.closeIcon,d=e.closable,p=e.renderWrapper,f=e.removeAriaLabel,m=e.editable,g=e.onClick,v=e.onRemove,b=e.onFocus,y=e.style,x="".concat(i,"-tab");t.useEffect((function(){return v}),[]);var w=m&&!1!==d&&!u;function _(e){u||g(e)}var S=t.createElement("div",{key:l,ref:n,className:ik()(x,(r={},YR(r,"".concat(x,"-with-remove"),w),YR(r,"".concat(x,"-active"),a),YR(r,"".concat(x,"-disabled"),u),r)),style:y,onClick:_},t.createElement("div",{role:"tab","aria-selected":a,id:o&&"".concat(o,"-tab-").concat(l),className:"".concat(x,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(l),"aria-disabled":u,tabIndex:u?null:0,onClick:function(e){e.stopPropagation(),_(e)},onKeyDown:function(e){[RP.SPACE,RP.ENTER].includes(e.which)&&(e.preventDefault(),_(e))},onFocus:b},c),w&&t.createElement("button",{type:"button","aria-label":f||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:l,event:t})}},h||m.removeIcon||"\xd7"));return p?p(S):S}const PP=t.forwardRef(kP);var LP={width:0,height:0,left:0,top:0};var OP={width:0,height:0,left:0,top:0,right:0};var NP=n(7324),IP=n.n(NP),DP=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],jP=void 0;function FP(e,n){var r=e.prefixCls,i=e.invalidate,o=e.item,a=e.renderItem,s=e.responsive,l=e.responsiveDisabled,c=e.registerSize,u=e.itemKey,h=e.className,d=e.style,p=e.children,f=e.display,m=e.order,g=e.component,v=void 0===g?"div":g,b=ek(e,DP),y=s&&!f;function x(e){c(u,e)}t.useEffect((function(){return function(){x(null)}}),[]);var w,_=a&&o!==jP?a(o):p;i||(w={opacity:y?0:1,height:y?0:jP,overflowY:y?"hidden":jP,order:s?m:jP,pointerEvents:y?"none":jP,position:y?"absolute":jP});var S={};y&&(S["aria-hidden"]=!0);var M=t.createElement(v,(0,$R.A)({className:ik()(!i&&r,h),style:nk(nk({},w),d)},S,b,{ref:n}),_);return s&&(M=t.createElement(EP,{onResize:function(e){x(e.offsetWidth)},disabled:l},M)),M}var zP=t.forwardRef(FP);zP.displayName="Item";const BP=zP;function UP(){var e=t.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"===typeof MessageChannel)Mk(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,Lk.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function GP(e,n){var r=QR(t.useState(n),2),i=r[0],o=r[1];return[i,lk((function(t){e((function(){o(t)}))}))]}var VP=t.createContext(null),HP=["component"],WP=["className"],$P=["className"],qP=function(e,n){var r=t.useContext(VP);if(!r){var i=e.component,o=void 0===i?"div":i,a=ek(e,HP);return t.createElement(o,(0,$R.A)({},a,{ref:n}))}var s=r.className,l=ek(r,WP),c=e.className,u=ek(e,$P);return t.createElement(VP.Provider,{value:null},t.createElement(BP,(0,$R.A)({ref:n,className:ik()(s,c)},l,u)))},XP=t.forwardRef(qP);XP.displayName="RawItem";const YP=XP;var KP=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],JP="responsive",QP="invalidate";function ZP(e){return"+ ".concat(e.length," ...")}function eL(e,n){var r=e.prefixCls,i=void 0===r?"rc-overflow":r,o=e.data,a=void 0===o?[]:o,s=e.renderItem,l=e.renderRawItem,c=e.itemKey,u=e.itemWidth,h=void 0===u?10:u,d=e.ssr,p=e.style,f=e.className,m=e.maxCount,g=e.renderRest,v=e.renderRawRest,b=e.suffix,y=e.component,x=void 0===y?"div":y,w=e.itemComponent,_=e.onVisibleChange,S=ek(e,KP),M="full"===d,T=UP(),E=QR(GP(T,null),2),C=E[0],A=E[1],R=C||0,k=QR(GP(T,new Map),2),P=k[0],L=k[1],O=QR(GP(T,0),2),N=O[0],I=O[1],D=QR(GP(T,0),2),j=D[0],F=D[1],z=QR(GP(T,0),2),B=z[0],U=z[1],G=QR((0,t.useState)(null),2),V=G[0],H=G[1],W=QR((0,t.useState)(null),2),$=W[0],q=W[1],X=t.useMemo((function(){return null===$&&M?Number.MAX_SAFE_INTEGER:$||0}),[$,C]),Y=QR((0,t.useState)(!1),2),K=Y[0],J=Y[1],Q="".concat(i,"-item"),Z=Math.max(N,j),ee=m===JP,te=a.length&&ee,ne=m===QP,re=te||"number"===typeof m&&a.length>m,ie=(0,t.useMemo)((function(){var e=a;return te?e=null===C&&M?a:a.slice(0,Math.min(a.length,R/h)):"number"===typeof m&&(e=a.slice(0,m)),e}),[a,h,C,m,te]),oe=(0,t.useMemo)((function(){return te?a.slice(X+1):a.slice(ie.length)}),[a,ie,te,X]),ae=(0,t.useCallback)((function(e,t){var n;return"function"===typeof c?c(e):null!==(n=c&&(null===e||void 0===e?void 0:e[c]))&&void 0!==n?n:t}),[c]),se=(0,t.useCallback)(s||function(e){return e},[s]);function le(e,t,n){($!==e||void 0!==t&&t!==V)&&(q(e),n||(J(e<a.length-1),null===_||void 0===_||_(e)),void 0!==t&&H(t))}function ce(e,t){L((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function ue(e){return P.get(ae(ie[e],e))}pk((function(){if(R&&"number"===typeof Z&&ie){var e=B,t=ie.length,n=t-1;if(!t)return void le(0,null);for(var r=0;r<t;r+=1){var i=ue(r);if(M&&(i=i||0),void 0===i){le(r-1,void 0,!0);break}if(e+=i,0===n&&e<=R||r===n-1&&e+ue(n)<=R){le(n,null);break}if(e+Z>R){le(r-1,e-i-B+j);break}}b&&ue(0)+B>R&&H(null)}}),[R,P,j,B,ae,ie]);var he=K&&!!oe.length,de={};null!==V&&te&&(de={position:"absolute",left:V,top:0});var pe,fe={prefixCls:Q,responsive:te,component:w,invalidate:ne},me=l?function(e,n){var r=ae(e,n);return t.createElement(VP.Provider,{key:r,value:nk(nk({},fe),{},{order:n,item:e,itemKey:r,registerSize:ce,display:n<=X})},l(e,n))}:function(e,n){var r=ae(e,n);return t.createElement(BP,(0,$R.A)({},fe,{order:n,key:r,item:e,renderItem:se,itemKey:r,registerSize:ce,display:n<=X}))},ge={order:he?X:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){F(t),I(j)},display:he};if(v)v&&(pe=t.createElement(VP.Provider,{value:nk(nk({},fe),ge)},v(oe)));else{var ve=g||ZP;pe=t.createElement(BP,(0,$R.A)({},fe,ge),"function"===typeof ve?ve(oe):ve)}var be=t.createElement(x,(0,$R.A)({className:ik()(!ne&&i,f),style:p,ref:n},S),ie.map(me),re?pe:null,b&&t.createElement(BP,(0,$R.A)({},fe,{responsive:ee,responsiveDisabled:!te,order:X,className:"".concat(Q,"-suffix"),registerSize:function(e,t){U(t)},display:!0,style:de}),b));return ee&&(be=t.createElement(EP,{onResize:function(e,t){A(t.clientWidth)},disabled:!te},be)),be}var tL=t.forwardRef(eL);tL.displayName="Overflow",tL.Item=YP,tL.RESPONSIVE=JP,tL.INVALIDATE=QP;const nL=tL;function rL(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var iL=["children","locked"],oL=t.createContext(null);function aL(e){var n=e.children,r=e.locked,i=ek(e,iL),o=t.useContext(oL),a=Ik((function(){return function(e,t){var n=nk({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(o,i)}),[o,i],(function(e,t){return!r&&(e[0]!==t[0]||!IP()(e[1],t[1]))}));return t.createElement(oL.Provider,{value:a},n)}function sL(e,n,r,i){var o=t.useContext(oL),a=o.activeKey,s=o.onActive,l=o.onInactive,c={active:a===e};return n||(c.onMouseEnter=function(t){null===r||void 0===r||r({key:e,domEvent:t}),s(e)},c.onMouseLeave=function(t){null===i||void 0===i||i({key:e,domEvent:t}),l(e)}),c}var lL=["item"];function cL(e){var t=e.item,n=ek(e,lL);return Object.defineProperty(n,"item",{get:function(){return Pk(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function uL(e){var n=e.icon,r=e.props,i=e.children;return("function"===typeof n?t.createElement(n,nk({},r)):n)||i||null}function hL(e){var n=t.useContext(oL),r=n.mode,i=n.rtl,o=n.inlineIndent;if("inline"!==r)return null;return i?{paddingRight:e*o}:{paddingLeft:e*o}}var dL=[],pL=t.createContext(null);function fL(){return t.useContext(pL)}var mL=t.createContext(dL);function gL(e){var n=t.useContext(mL);return t.useMemo((function(){return void 0!==e?[].concat(vk(n),[e]):n}),[n,e])}var vL=t.createContext(null),bL=t.createContext(null);function yL(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function xL(e){return yL(t.useContext(bL),e)}const wL=t.createContext({});var _L=["title","attribute","elementRef"],SL=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],ML=["active"],TL=function(e){gP(r,e);var n=xP(r);function r(){return dP(this,r),n.apply(this,arguments)}return fP(r,[{key:"render",value:function(){var e=this.props,n=e.title,r=e.attribute,i=e.elementRef,o=rL(ek(e,_L),["eventKey"]);return Pk(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),t.createElement(nL.Item,(0,$R.A)({},r,{title:"string"===typeof n?n:void 0},o,{ref:i}))}}]),r}(t.Component),EL=function(e){var n,r=e.style,i=e.className,o=e.eventKey,a=(e.warnKey,e.disabled),s=e.itemIcon,l=e.children,c=e.role,u=e.onMouseEnter,h=e.onMouseLeave,d=e.onClick,p=e.onKeyDown,f=e.onFocus,m=ek(e,SL),g=xL(o),v=t.useContext(oL),b=v.prefixCls,y=v.onItemClick,x=v.disabled,w=v.overflowDisabled,_=v.itemIcon,S=v.selectedKeys,M=v.onActive,T=t.useContext(wL)._internalRenderMenuItem,E="".concat(b,"-item"),C=t.useRef(),A=t.useRef(),R=x||a,k=gL(o);var P=function(e){return{key:o,keyPath:vk(k).reverse(),item:C.current,domEvent:e}},L=s||_,O=sL(o,R,u,h),N=O.active,I=ek(O,ML),D=S.includes(o),j=hL(k.length),F={};"option"===e.role&&(F["aria-selected"]=D);var z=t.createElement(TL,(0,$R.A)({ref:C,elementRef:A,role:null===c?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":w&&g?null:g},m,I,F,{component:"li","aria-disabled":a,style:nk(nk({},j),r),className:ik()(E,(n={},YR(n,"".concat(E,"-active"),N),YR(n,"".concat(E,"-selected"),D),YR(n,"".concat(E,"-disabled"),R),n),i),onClick:function(e){if(!R){var t=P(e);null===d||void 0===d||d(cL(t)),y(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===RP.ENTER){var t=P(e);null===d||void 0===d||d(cL(t)),y(t)}},onFocus:function(e){M(o),null===f||void 0===f||f(e)}}),l,t.createElement(uL,{props:nk(nk({},e),{},{isSelected:D}),icon:L}));return T&&(z=T(z,e,{selected:D})),z};const CL=function(e){var n=e.eventKey,r=fL(),i=gL(n);return t.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:t.createElement(EL,e)};var AL=["label","children","key","type"];function RL(e,n){return ak(e).map((function(e,r){if(t.isValidElement(e)){var i,o,a=e.key,s=null!==(i=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(vk(n),[r]).join("-")));var l={key:s,eventKey:s};return t.cloneElement(e,l)}return e}))}function kL(e){return(e||[]).map((function(e,n){if(e&&"object"===qR(e)){var r=e.label,i=e.children,o=e.key,a=e.type,s=ek(e,AL),l=null!==o&&void 0!==o?o:"tmp-".concat(n);return i||"group"===a?"group"===a?t.createElement(XI,(0,$R.A)({key:l},s,{title:r}),kL(i)):t.createElement(wI,(0,$R.A)({key:l},s,{title:r}),kL(i)):"divider"===a?t.createElement(YI,(0,$R.A)({key:l},s)):t.createElement(CL,(0,$R.A)({key:l},s),r)}return null})).filter((function(e){return e}))}function PL(e,t,n){var r=e;return t&&(r=kL(t)),RL(r,n)}function LL(e){var n=t.useRef(e);n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return e?r:void 0}var OL=["className","children"],NL=function(e,n){var r=e.className,i=e.children,o=ek(e,OL),a=t.useContext(oL),s=a.prefixCls,l=a.mode,c=a.rtl;return t.createElement("ul",(0,$R.A)({className:ik()(s,c&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),r)},o,{"data-menu-list":!0,ref:n}),i)},IL=t.forwardRef(NL);IL.displayName="SubMenuList";const DL=IL;function jL(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function FL(e,t,n,r){var i=Lk.unstable_batchedUpdates?function(e){Lk.unstable_batchedUpdates(n,e)}:n;return null!==e&&void 0!==e&&e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){null!==e&&void 0!==e&&e.removeEventListener&&e.removeEventListener(t,i,r)}}}var zL=(0,t.forwardRef)((function(e,n){var r=e.didUpdate,i=e.getContainer,o=e.children,a=(0,t.useRef)(),s=(0,t.useRef)();(0,t.useImperativeHandle)(n,(function(){return{}}));var l=(0,t.useRef)(!1);return!l.current&&ck()&&(s.current=i(),a.current=s.current.parentNode,l.current=!0),(0,t.useEffect)((function(){null===r||void 0===r||r(e)})),(0,t.useEffect)((function(){return null===s.current.parentNode&&null!==a.current&&a.current.appendChild(s.current),function(){var e;null===(e=s.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(s.current)}}),[]),s.current?Lk.createPortal(o,s.current):null}));const BL=zL;function UL(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var GL=t.createContext({});var VL=function(e){gP(n,e);var t=xP(n);function n(){return dP(this,n),t.apply(this,arguments)}return fP(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component);const HL=VL;"undefined"===typeof Reflect?Object.keys:Reflect.ownKeys;var WL="none",$L="appear",qL="enter",XL="leave",YL="none",KL="prepare",JL="start",QL="active",ZL="end",eO="prepared";function tO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var nO=function(e,t){var n={animationend:tO("Animation","AnimationEnd"),transitionend:tO("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(ck(),"undefined"!==typeof window?window:{}),rO={};if(ck()){var iO=document.createElement("div");rO=iO.style}var oO={};function aO(e){if(oO[e])return oO[e];var t=nO[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in rO)return oO[e]=t[o],oO[e]}return""}var sO=aO("animationend"),lO=aO("transitionend"),cO=!(!sO||!lO),uO=sO||"animationend",hO=lO||"transitionend";function dO(e,t){return e?"object"===qR(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const pO=function(e){var n=(0,t.useRef)();function r(t){t&&(t.removeEventListener(hO,e),t.removeEventListener(uO,e))}return t.useEffect((function(){return function(){r(n.current)}}),[]),[function(t){n.current&&n.current!==t&&r(n.current),t&&t!==n.current&&(t.addEventListener(hO,e),t.addEventListener(uO,e),n.current=t)},r]};const fO=ck()?t.useLayoutEffect:t.useEffect;var mO=[KL,JL,QL,ZL],gO=[KL,eO],vO=!1,bO=!0;function yO(e){return e===QL||e===ZL}const xO=function(e,n,r){var i=QR(fk(YL),2),o=i[0],a=i[1],s=function(){var e=t.useRef(null);function n(){Mk.cancel(e.current)}return t.useEffect((function(){return function(){n()}}),[]),[function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=Mk((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):t(r,i-1)}));e.current=o},n]}(),l=QR(s,2),c=l[0],u=l[1];var h=n?gO:mO;return fO((function(){if(o!==YL&&o!==ZL){var e=h.indexOf(o),t=h[e+1],n=r(o);n===vO?a(t,!0):t&&c((function(e){function r(){e.isCanceled()||a(t,!0)}!0===n?r():Promise.resolve(n).then(r)}))}}),[e,o]),t.useEffect((function(){return function(){u()}}),[]),[function(){a(KL,!0)},o]};function wO(e,n,r,i){var o=i.motionEnter,a=void 0===o||o,s=i.motionAppear,l=void 0===s||s,c=i.motionLeave,u=void 0===c||c,h=i.motionDeadline,d=i.motionLeaveImmediately,p=i.onAppearPrepare,f=i.onEnterPrepare,m=i.onLeavePrepare,g=i.onAppearStart,v=i.onEnterStart,b=i.onLeaveStart,y=i.onAppearActive,x=i.onEnterActive,w=i.onLeaveActive,_=i.onAppearEnd,S=i.onEnterEnd,M=i.onLeaveEnd,T=i.onVisibleChanged,E=QR(fk(),2),C=E[0],A=E[1],R=function(e){var n=t.useReducer((function(e){return e+1}),0),r=QR(n,2)[1],i=t.useRef(e);return[lk((function(){return i.current})),lk((function(e){i.current="function"===typeof e?e(i.current):e,r()}))]}(WL),k=QR(R,2),P=k[0],L=k[1],O=QR(fk(null),2),N=O[0],I=O[1],D=P(),j=(0,t.useRef)(!1),F=(0,t.useRef)(null);function z(){return r()}var B=(0,t.useRef)(!1);function U(){L(WL),I(null,!0)}var G=lk((function(e){var t=P();if(t!==WL){var n=z();if(!e||e.deadline||e.target===n){var r,i=B.current;t===$L&&i?r=null===_||void 0===_?void 0:_(n,e):t===qL&&i?r=null===S||void 0===S?void 0:S(n,e):t===XL&&i&&(r=null===M||void 0===M?void 0:M(n,e)),i&&!1!==r&&U()}}})),V=QR(pO(G),1)[0],H=function(e){switch(e){case $L:return YR(YR(YR({},KL,p),JL,g),QL,y);case qL:return YR(YR(YR({},KL,f),JL,v),QL,x);case XL:return YR(YR(YR({},KL,m),JL,b),QL,w);default:return{}}},W=t.useMemo((function(){return H(D)}),[D]),$=QR(xO(D,!e,(function(e){if(e===KL){var t=W[KL];return t?t(z()):vO}var n;X in W&&I((null===(n=W[X])||void 0===n?void 0:n.call(W,z(),null))||null);return X===QL&&D!==WL&&(V(z()),h>0&&(clearTimeout(F.current),F.current=setTimeout((function(){G({deadline:!0})}),h))),X===eO&&U(),bO})),2),q=$[0],X=$[1],Y=yO(X);B.current=Y,fO((function(){A(n);var t,r=j.current;j.current=!0,!r&&n&&l&&(t=$L),r&&n&&a&&(t=qL),(r&&!n&&u||!r&&d&&!n&&u)&&(t=XL);var i=H(t);t&&(e||i[KL])?(L(t),q()):L(WL)}),[n]),(0,t.useEffect)((function(){(D===$L&&!l||D===qL&&!a||D===XL&&!u)&&L(WL)}),[l,a,u]),(0,t.useEffect)((function(){return function(){j.current=!1,clearTimeout(F.current)}}),[]);var K=t.useRef(!1);(0,t.useEffect)((function(){C&&(K.current=!0),void 0!==C&&D===WL&&((K.current||C)&&(null===T||void 0===T||T(C)),K.current=!0)}),[C,D]);var J=N;return W[KL]&&X===JL&&(J=nk({transition:"none"},J)),[D,X,J,null!==C&&void 0!==C?C:n]}const _O=function(e){var n=e;"object"===qR(e)&&(n=e.transitionSupport);var r=t.forwardRef((function(e,r){var i=e.visible,o=void 0===i||i,a=e.removeOnLeave,s=void 0===a||a,l=e.forceRender,c=e.children,u=e.motionName,h=e.leavedClassName,d=e.eventProps,p=function(e,t){return!(!e.motionName||!n||!1===t)}(e,t.useContext(GL).motion),f=(0,t.useRef)(),m=(0,t.useRef)();var g=QR(wO(p,o,(function(){try{return f.current instanceof HTMLElement?f.current:Nk(m.current)}catch(tq){return null}}),e),4),v=g[0],b=g[1],y=g[2],x=g[3],w=t.useRef(x);x&&(w.current=!0);var _,S=t.useCallback((function(e){f.current=e,Dk(r,e)}),[r]),M=nk(nk({},d),{},{visible:o});if(c)if(v===WL)_=x?c(nk({},M),S):!s&&w.current&&h?c(nk(nk({},M),{},{className:h}),S):l||!s&&!h?c(nk(nk({},M),{},{style:{display:"none"}}),S):null;else{var T;b===KL?T="prepare":yO(b)?T="active":b===JL&&(T="start");var E=dO(u,"".concat(v,"-").concat(T));_=c(nk(nk({},M),{},{className:ik()(dO(u,v),YR(YR({},E,E&&T),u,"string"===typeof u)),style:y}),S)}else _=null;t.isValidElement(_)&&zk(_)&&(_.ref||(_=t.cloneElement(_,{ref:S})));return t.createElement(HL,{ref:m},_)}));return r.displayName="CSSMotion",r}(cO);var SO="add",MO="keep",TO="remove",EO="removed";function CO(e){var t;return nk(nk({},t=e&&"object"===qR(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function AO(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(CO)}var RO=["component","children","onVisibleChanged","onAllRemoved"],kO=["status"],PO=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_O,n=function(n){gP(i,n);var r=xP(i);function i(){var e;dP(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return YR(yP(e=r.call.apply(r,[this].concat(n))),"state",{keyEntities:[]}),YR(yP(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:nk(nk({},e),{},{status:EO})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==EO})).length})),e}return fP(i,[{key:"render",value:function(){var n=this,r=this.state.keyEntities,i=this.props,o=i.component,a=i.children,s=i.onVisibleChanged,l=i.onAllRemoved,c=ek(i,RO),u=o||t.Fragment,h={};return PO.forEach((function(e){h[e]=c[e],delete c[e]})),delete c.keys,t.createElement(u,c,r.map((function(r,i){var o=r.status,c=ek(r,kO),u=o===SO||o===MO;return t.createElement(e,(0,$R.A)({},h,{key:c.key,visible:u,eventProps:c,onVisibleChanged:function(e){(null===s||void 0===s||s(e,{key:c.key}),e)||0===n.removeKey(c.key)&&l&&l()}}),(function(e,t){return a(nk(nk({},e),{},{index:i}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=AO(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=AO(e),a=AO(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var s=a[o];if(s.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return nk(nk({},e),{},{status:SO})}))),r=o),n.push(nk(nk({},s),{},{status:MO})),r+=1,t=!0;break}}t||n.push(nk(nk({},e),{},{status:TO}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return nk(nk({},e),{},{status:SO})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==TO})),n.forEach((function(t){t.key===e&&(t.status=MO)}))})),n}(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==EO||e.status!==TO}))}}}]),i}(t.Component);YR(n,"defaultProps",{component:"div"})}(cO);const LO=_O;function OO(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function NO(e){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.mask,a=e.maskMotion,s=e.maskAnimation,l=e.maskTransitionName;if(!o)return null;var c={};return(a||l||s)&&(c=nk({motionAppear:!0},OO({motion:a,prefixCls:n,transitionName:l,animation:s}))),t.createElement(LO,(0,$R.A)({},c,{visible:r,removeOnLeave:!0}),(function(e){var r=e.className;return t.createElement("div",{style:{zIndex:i},className:ik()("".concat(n,"-mask"),r)})}))}function IO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IO(Object(n),!0).forEach((function(t){FO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jO(e){return jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jO(e)}function FO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zO,BO={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function UO(){if(void 0!==zO)return zO;zO="";var e=document.createElement("p").style;for(var t in BO)t+"Transform"in e&&(zO=t);return zO}function GO(){return UO()?"".concat(UO(),"TransitionProperty"):"transitionProperty"}function VO(){return UO()?"".concat(UO(),"Transform"):"transform"}function HO(e,t){var n=GO();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function WO(e,t){var n=VO();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var $O,qO=/matrix\((.*)\)/,XO=/matrix3d\((.*)\)/;function YO(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function KO(e,t,n){var r=n;if("object"!==jO(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):$O(e,t);for(var i in t)t.hasOwnProperty(i)&&KO(e,i,t[i])}function JO(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function QO(e){return JO(e)}function ZO(e){return JO(e,!0)}function eN(e){var t=function(e){var t,n,r,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=QO(r),t.top+=ZO(r),t}function tN(e){return null!==e&&void 0!==e&&e==e.window}function nN(e){return tN(e)?e.document:9===e.nodeType?e:e.ownerDocument}var rN=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),iN=/^(top|right|bottom|left)$/,oN="currentStyle",aN="runtimeStyle",sN="left";function lN(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function cN(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function uN(e,t,n){"static"===KO(e,"position")&&(e.style.position="relative");var r=-999,i=-999,o=lN("left",n),a=lN("top",n),s=cN(o),l=cN(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c="",u=eN(e);("left"in t||"top"in t)&&(c=function(e){return e.style.transitionProperty||e.style[GO()]}(e)||"",HO(e,"none")),"left"in t&&(e.style[s]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[a]="".concat(i,"px")),YO(e);var h=eN(e),d={};for(var p in t)if(t.hasOwnProperty(p)){var f=lN(p,n),m="left"===p?r:i,g=u[p]-h[p];d[f]=f===p?m+g:m-g}KO(e,d),YO(e),("left"in t||"top"in t)&&HO(e,c);var v={};for(var b in t)if(t.hasOwnProperty(b)){var y=lN(b,n),x=t[b]-u[b];v[y]=b===y?d[y]+x:d[y]-x}KO(e,v)}function hN(e,t){var n=eN(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(VO());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(VO());if(r&&"none"!==r){var i,o=r.match(qO);o?((i=(o=o[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,WO(e,"matrix(".concat(i.join(","),")"))):((i=r.match(XO)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,WO(e,"matrix3d(".concat(i.join(","),")")))}else WO(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}function dN(e,t){for(var n=0;n<e.length;n++)t(e[n])}function pN(e){return"border-box"===$O(e,"boxSizing")}"undefined"!==typeof window&&($O=window.getComputedStyle?function(e,t,n){var r=n,i="",o=nN(e);return(r=r||o.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e[oN]&&e[oN][t];if(rN.test(n)&&!iN.test(t)){var r=e.style,i=r[sN],o=e[aN][sN];e[aN][sN]=e[oN][sN],r[sN]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[sN]=i,e[aN][sN]=o}return""===n?"auto":n});var fN=["margin","border","padding"],mN=-1,gN=2,vN=1;function bN(e,t,n){var r,i,o,a=0;for(i=0;i<t.length;i++)if(r=t[i])for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat($O(e,s))||0}return a}var yN={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function xN(e,t,n){var r=n;if(tN(e))return"width"===t?yN.viewportWidth(e):yN.viewportHeight(e);if(9===e.nodeType)return"width"===t?yN.docWidth(e):yN.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=pN(e),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,(null===(s=$O(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=a?vN:mN);var l=void 0!==o||a,c=o||s;return r===mN?l?c-bN(e,["border","padding"],i):s:l?r===vN?c:c+(r===gN?-bN(e,["border"],i):bN(e,["margin"],i)):s+bN(e,fN.slice(r),i)}dN(["Width","Height"],(function(e){yN["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],yN["viewport".concat(e)](n))},yN["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var wN={position:"absolute",visibility:"hidden",display:"block"};function _N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=xN.apply(void 0,t):function(e,t,n){var r,i={},o=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r],o[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(o[r]=i[r])}(i,wN,(function(){r=xN.apply(void 0,t)})),r}function SN(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}dN(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);yN["outer".concat(t)]=function(t,n){return t&&_N(t,e,n?0:vN)};var n="width"===e?["Left","Right"]:["Top","Bottom"];yN[e]=function(t,r){var i=r;return void 0!==i?t?(pN(t)&&(i+=bN(t,["padding","border"],n)),KO(t,e,i)):void 0:t&&_N(t,e,mN)}}));var MN={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:nN,offset:function(e,t,n){if("undefined"===typeof t)return eN(e);!function(e,t,n){if(n.ignoreShake){var r=eN(e),i=r.left.toFixed(0),o=r.top.toFixed(0),a=t.left.toFixed(0),s=t.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?uN(e,t,n):n.useCssTransform&&VO()in document.body.style?hN(e,t):uN(e,t,n)}(e,t,n||{})},isWindow:tN,each:dN,css:KO,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:SN,getWindowScrollLeft:function(e){return QO(e)},getWindowScrollTop:function(e){return ZO(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)MN.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};SN(MN,yN);var TN=MN.getParent;function EN(e){if(MN.isWindow(e)||9===e.nodeType)return null;var t,n=MN.getDocument(e).body,r=MN.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:TN(e);for(t=TN(e);t&&t!==n&&9!==t.nodeType;t=TN(t))if("static"!==(r=MN.css(t,"position")))return t;return null}var CN=MN.getParent;function AN(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=EN(e),i=MN.getDocument(e),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===MN.css(r,"overflow")){if(r===a||r===s)break}else{var l=MN.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=EN(r)}var c=null;MN.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===MN.css(e,"position")&&(e.style.position="fixed"));var u=MN.getWindowScrollLeft(o),h=MN.getWindowScrollTop(o),d=MN.viewportWidth(o),p=MN.viewportHeight(o),f=s.scrollWidth,m=s.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(f=o.innerWidth),"hidden"===g.overflowY&&(m=o.innerHeight),e.style&&(e.style.position=c),t||function(e){if(MN.isWindow(e)||9===e.nodeType)return!1;var t=MN.getDocument(e),n=t.body,r=null;for(r=CN(e);r&&r!==n&&r!==t;r=CN(r))if("fixed"===MN.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,u),n.top=Math.max(n.top,h),n.right=Math.min(n.right,u+d),n.bottom=Math.min(n.bottom,h+p);else{var v=Math.max(f,u+d);n.right=Math.min(n.right,v);var b=Math.max(m,h+p);n.bottom=Math.min(n.bottom,b)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function RN(e){var t,n,r;if(MN.isWindow(e)||9===e.nodeType){var i=MN.getWindow(e);t={left:MN.getWindowScrollLeft(i),top:MN.getWindowScrollTop(i)},n=MN.viewportWidth(i),r=MN.viewportHeight(i)}else t=MN.offset(e),n=MN.outerWidth(e),r=MN.outerHeight(e);return t.width=n,t.height=r,t}function kN(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,a=e.left,s=e.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function PN(e,t,n,r,i){var o=kN(t,n[1]),a=kN(e,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function LN(e,t,n){return e.left<n.left||e.left+t.width>n.right}function ON(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function NN(e,t,n){var r=[];return MN.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function IN(e,t){return e[t]=-e[t],e}function DN(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function jN(e,t){e[0]=DN(e[0],t.width),e[1]=DN(e[1],t.height)}function FN(e,t,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;o=[].concat(o),a=[].concat(a);var c={},u=0,h=AN(l,!(!(s=s||{})||!s.alwaysByViewport)),d=RN(l);jN(o,d),jN(a,t);var p=PN(d,t,i,o,a),f=MN.merge(d,p);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&LN(p,d,h)){var m=NN(i,/[lr]/gi,{l:"r",r:"l"}),g=IN(o,0),v=IN(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(PN(d,t,m,g,v),d,h)||(u=1,i=m,o=g,a=v)}if(s.adjustY&&ON(p,d,h)){var b=NN(i,/[tb]/gi,{t:"b",b:"t"}),y=IN(o,1),x=IN(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(PN(d,t,b,y,x),d,h)||(u=1,i=b,o=y,a=x)}u&&(p=PN(d,t,i,o,a),MN.mix(f,p));var w=LN(p,d,h),_=ON(p,d,h);if(w||_){var S=i;w&&(S=NN(i,/[lr]/gi,{l:"r",r:"l"})),_&&(S=NN(i,/[tb]/gi,{t:"b",b:"t"})),i=S,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&w,c.adjustY=s.adjustY&&_,(c.adjustX||c.adjustY)&&(f=function(e,t,n,r){var i=MN.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),MN.mix(i,o)}(p,d,h,c))}return f.width!==d.width&&MN.css(l,"width",MN.width(l)+f.width-d.width),f.height!==d.height&&MN.css(l,"height",MN.height(l)+f.height-d.height),MN.offset(l,{left:f.left,top:f.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function zN(e,t,n){var r=n.target||t,i=RN(r),o=!function(e,t){var n=AN(e,t),r=RN(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return FN(e,i,n,o)}zN.__getOffsetParent=EN,zN.__getVisibleRectForElement=AN;const BN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(Pk(!a,"Warning: There may be circular references"),a)return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var s=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l],s))return!1;return!0}if(t&&i&&"object"===qR(t)&&"object"===qR(i)){var c=Object.keys(t);return c.length===Object.keys(i).length&&c.every((function(n){return e(t[n],i[n],s)}))}return!1}(e,t)},UN=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};function GN(e,t){var n=null,r=null;var i=new cP((function(e){var i=QR(e,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,s=o.height,l=Math.floor(a),c=Math.floor(s);n===l&&r===c||Promise.resolve().then((function(){t({width:l,height:c})})),n=l,r=c}}));return e&&i.observe(e),function(){i.disconnect()}}function VN(e){return"function"!==typeof e?null:e()}function HN(e){return"object"===qR(e)&&e?e:null}var WN=function(e,n){var r=e.children,i=e.disabled,o=e.target,a=e.align,s=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,u=void 0===c?0:c,h=t.useRef({}),d=t.useRef(),p=t.Children.only(r),f=t.useRef({});f.current.disabled=i,f.current.target=o,f.current.align=a,f.current.onAlign=s;var m=function(e,n){var r=t.useRef(!1),i=t.useRef(null);function o(){window.clearTimeout(i.current)}return[function t(a){if(o(),r.current&&!0!==a)i.current=window.setTimeout((function(){r.current=!1,t()}),n);else{if(!1===e(a))return;r.current=!0,i.current=window.setTimeout((function(){r.current=!1}),n)}},function(){r.current=!1,o()}]}((function(){var e=f.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,o=d.current;if(!t&&n&&o){var a,s=VN(n),l=HN(n);h.current.element=s,h.current.point=l,h.current.align=r;var c=document.activeElement;return s&&UN(s)?a=zN(o,s,r):l&&(a=function(e,t,n){var r,i,o=MN.getDocument(e),a=o.defaultView||o.parentWindow,s=MN.getWindowScrollLeft(a),l=MN.getWindowScrollTop(a),c=MN.viewportWidth(a),u=MN.viewportHeight(a),h={left:r="pageX"in t?t.pageX:s+t.clientX,top:i="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},d=r>=0&&r<=s+c&&i>=0&&i<=l+u,p=[n.points[0],"cc"];return FN(e,h,DO(DO({},n),{},{points:p}),d)}(o,l,r)),function(e,t){e!==document.activeElement&&jL(t,e)&&"function"===typeof e.focus&&e.focus()}(c,o),i&&a&&i(o,a),!0}return!1}),u),g=QR(m,2),v=g[0],b=g[1],y=QR(t.useState(),2),x=y[0],w=y[1],_=QR(t.useState(),2),S=_[0],M=_[1];return pk((function(){w(VN(o)),M(HN(o))})),t.useEffect((function(){var e,t;h.current.element===x&&((e=h.current.point)===(t=S)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&BN(h.current.align,a)||v()})),t.useEffect((function(){return GN(d.current,v)}),[d.current]),t.useEffect((function(){return GN(x,v)}),[x]),t.useEffect((function(){i?b():v()}),[i]),t.useEffect((function(){if(l)return FL(window,"resize",v).remove}),[l]),t.useEffect((function(){return function(){b()}}),[]),t.useImperativeHandle(n,(function(){return{forceAlign:function(){return v(!0)}}})),t.isValidElement(p)&&(p=t.cloneElement(p,{ref:jk(p.ref,d)})),p},$N=t.forwardRef(WN);$N.displayName="Align";const qN=$N;function XN(){XN=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new k(r||[]);return i(a,"_invoke",{value:E(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function b(){}function y(){}var x={};c(x,a,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(P([])));_&&_!==n&&r.call(_,a)&&(x=_);var S=y.prototype=v.prototype=Object.create(x);function M(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==qR(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(qR(t)+" is not iterable")}return b.prototype=y,i(S,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},M(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new T(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function YN(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function KN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){YN(o,r,i,a,s,"next",e)}function s(e){YN(o,r,i,a,s,"throw",e)}a(void 0)}))}}var JN=["measure","alignPre","align",null,"motion"];var QN=t.forwardRef((function(e,n){var r=e.visible,i=e.prefixCls,o=e.className,a=e.style,s=e.children,l=e.zIndex,c=e.stretch,u=e.destroyPopupOnHide,h=e.forceRender,d=e.align,p=e.point,f=e.getRootDomNode,m=e.getClassNameFromAlign,g=e.onAlign,v=e.onMouseEnter,b=e.onMouseLeave,y=e.onMouseDown,x=e.onTouchStart,w=e.onClick,_=(0,t.useRef)(),S=(0,t.useRef)(),M=QR((0,t.useState)(),2),T=M[0],E=M[1],C=function(e){var n=QR(t.useState({width:0,height:0}),2),r=n[0],i=n[1];return[t.useMemo((function(){var t={};if(e){var n=r.width,i=r.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){var t=e.offsetWidth,n=e.offsetHeight,r=e.getBoundingClientRect(),o=r.width,a=r.height;Math.abs(t-o)<1&&Math.abs(n-a)<1&&(t=o,n=a),i({width:t,height:n})}]}(c),A=QR(C,2),R=A[0],k=A[1];var P=function(e,n){var r=QR(fk(null),2),i=r[0],o=r[1],a=(0,t.useRef)();function s(e){o(e,!0)}function l(){Mk.cancel(a.current)}return(0,t.useEffect)((function(){s("measure")}),[e]),(0,t.useEffect)((function(){"measure"===i&&n(),i&&(a.current=Mk(KN(XN().mark((function e(){var t,n;return XN().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=JN.indexOf(i),(n=JN[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[i]),(0,t.useEffect)((function(){return function(){l()}}),[]),[i,function(e){l(),a.current=Mk((function(){s((function(e){switch(i){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){c&&k(f())})),L=QR(P,2),O=L[0],N=L[1],I=QR((0,t.useState)(0),2),D=I[0],j=I[1],F=(0,t.useRef)();function z(){var e;null===(e=_.current)||void 0===e||e.forceAlign()}function B(e,t){var n=m(t);T!==n&&E(n),j((function(e){return e+1})),"align"===O&&(null===g||void 0===g||g(e,t))}pk((function(){"alignPre"===O&&j(0)}),[O]),pk((function(){"align"===O&&(D<3?z():N((function(){var e;null===(e=F.current)||void 0===e||e.call(F)})))}),[D]);var U=nk({},OO(e));function G(){return new Promise((function(e){F.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=U[e];U[e]=function(e,n){return N(),null===t||void 0===t?void 0:t(e,n)}})),t.useEffect((function(){U.motionName||"motion"!==O||N()}),[U.motionName,O]),t.useImperativeHandle(n,(function(){return{forceAlign:z,getElement:function(){return S.current}}}));var V=nk(nk({},R),{},{zIndex:l,opacity:"motion"!==O&&"stable"!==O&&r?0:void 0,pointerEvents:r||"stable"===O?void 0:"none"},a),H=!0;null===d||void 0===d||!d.points||"align"!==O&&"stable"!==O||(H=!1);var W=s;return t.Children.count(s)>1&&(W=t.createElement("div",{className:"".concat(i,"-content")},s)),t.createElement(LO,(0,$R.A)({visible:r,ref:S,leavedClassName:"".concat(i,"-hidden")},U,{onAppearPrepare:G,onEnterPrepare:G,removeOnLeave:u,forceRender:h}),(function(e,n){var r=e.className,a=e.style,s=ik()(i,o,T,r);return t.createElement(qN,{target:p||f,key:"popup",ref:_,monitorWindowResize:!0,disabled:H,align:d,onAlign:B},t.createElement("div",{ref:n,className:s,onMouseEnter:v,onMouseLeave:b,onMouseDownCapture:y,onTouchStartCapture:x,onClick:w,style:nk(nk({},a),V)},W))}))}));QN.displayName="PopupInner";const ZN=QN;var eI=t.forwardRef((function(e,n){var r=e.prefixCls,i=e.visible,o=e.zIndex,a=e.children,s=e.mobile,l=(s=void 0===s?{}:s).popupClassName,c=s.popupStyle,u=s.popupMotion,h=void 0===u?{}:u,d=s.popupRender,p=e.onClick,f=t.useRef();t.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return f.current}}}));var m=nk({zIndex:o},c),g=a;return t.Children.count(a)>1&&(g=t.createElement("div",{className:"".concat(r,"-content")},a)),d&&(g=d(g)),t.createElement(LO,(0,$R.A)({visible:i,ref:f,removeOnLeave:!0},h),(function(e,n){var i=e.className,o=e.style,a=ik()(r,l,i);return t.createElement("div",{ref:n,className:a,onClick:p,style:nk(nk({},o),m)},g)}))}));eI.displayName="MobilePopupInner";const tI=eI;var nI=["visible","mobile"],rI=t.forwardRef((function(e,n){var r=e.visible,i=e.mobile,o=ek(e,nI),a=QR((0,t.useState)(r),2),s=a[0],l=a[1],c=QR((0,t.useState)(!1),2),u=c[0],h=c[1],d=nk(nk({},o),{},{visible:s});(0,t.useEffect)((function(){l(r),r&&i&&h(sk())}),[r,i]);var p=u?t.createElement(tI,(0,$R.A)({},d,{mobile:i,ref:n})):t.createElement(ZN,(0,$R.A)({},d,{ref:n}));return t.createElement("div",null,t.createElement(NO,d),p)}));rI.displayName="Popup";const iI=rI;const oI=t.createContext(null);function aI(){}function sI(){return""}function lI(e){return e?e.ownerDocument:window.document}var cI=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const uI=function(e){var n=function(n){gP(i,n);var r=xP(i);function i(e){var n,o;return dP(this,i),YR(yP(n=r.call(this,e)),"popupRef",t.createRef()),YR(yP(n),"triggerRef",t.createRef()),YR(yP(n),"portalContainer",void 0),YR(yP(n),"attachId",void 0),YR(yP(n),"clickOutsideHandler",void 0),YR(yP(n),"touchOutsideHandler",void 0),YR(yP(n),"contextMenuOutsideHandler1",void 0),YR(yP(n),"contextMenuOutsideHandler2",void 0),YR(yP(n),"mouseDownTimeout",void 0),YR(yP(n),"focusTime",void 0),YR(yP(n),"preClickTime",void 0),YR(yP(n),"preTouchTime",void 0),YR(yP(n),"delayTimer",void 0),YR(yP(n),"hasPopupMouseDown",void 0),YR(yP(n),"onMouseEnter",(function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)})),YR(yP(n),"onMouseMove",(function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)})),YR(yP(n),"onMouseLeave",(function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),YR(yP(n),"onPopupMouseEnter",(function(){n.clearDelayTimer()})),YR(yP(n),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&jL(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),YR(yP(n),"onFocus",(function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))})),YR(yP(n),"onMouseDown",(function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()})),YR(yP(n),"onTouchStart",(function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()})),YR(yP(n),"onBlur",(function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)})),YR(yP(n),"onContextMenu",(function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)})),YR(yP(n),"onContextMenuClose",(function(){n.isContextMenuToShow()&&n.close()})),YR(yP(n),"onClick",(function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!n.state.popupVisible;(n.isClickToHide()&&!r||r&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)})),YR(yP(n),"onPopupMouseDown",(function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)})),YR(yP(n),"onDocumentClick",(function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,r=n.getRootDomNode(),i=n.getPopupDomNode();jL(r,t)&&!n.isContextMenuOnly()||jL(i,t)||n.hasPopupMouseDown||n.close()}})),YR(yP(n),"getRootDomNode",(function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=Nk(n.triggerRef.current);if(t)return t}catch(r){}return Lk.findDOMNode(yP(n))})),YR(yP(n),"getPopupClassNameFromAlign",(function(e){var t=[],r=n.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,l=r.getPopupClassNameFromAlign;return i&&o&&t.push(function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a];if(UL(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(o,a,e,s)),l&&t.push(l(e)),t.join(" ")})),YR(yP(n),"getComponent",(function(){var e=n.props,r=e.prefixCls,i=e.destroyPopupOnHide,o=e.popupClassName,a=e.onPopupAlign,s=e.popupMotion,l=e.popupAnimation,c=e.popupTransitionName,u=e.popupStyle,h=e.mask,d=e.maskAnimation,p=e.maskTransitionName,f=e.maskMotion,m=e.zIndex,g=e.popup,v=e.stretch,b=e.alignPoint,y=e.mobile,x=e.forceRender,w=e.onPopupClick,_=n.state,S=_.popupVisible,M=_.point,T=n.getPopupAlign(),E={};return n.isMouseEnterToShow()&&(E.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(E.onMouseLeave=n.onPopupMouseLeave),E.onMouseDown=n.onPopupMouseDown,E.onTouchStart=n.onPopupMouseDown,t.createElement(iI,(0,$R.A)({prefixCls:r,destroyPopupOnHide:i,visible:S,point:b&&M,className:o,align:T,onAlign:a,animation:l,getClassNameFromAlign:n.getPopupClassNameFromAlign},E,{stretch:v,getRootDomNode:n.getRootDomNode,style:u,mask:h,zIndex:m,transitionName:c,maskAnimation:d,maskTransitionName:p,maskMotion:f,ref:n.popupRef,motion:s,mobile:y,forceRender:x,onClick:w}),"function"===typeof g?g():g)})),YR(yP(n),"attachParent",(function(e){Mk.cancel(n.attachId);var t,r=n.props,i=r.getPopupContainer,o=r.getDocument,a=n.getRootDomNode();i?(a||0===i.length)&&(t=i(a)):t=o(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=Mk((function(){n.attachParent(e)}))})),YR(yP(n),"getContainer",(function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer})),YR(yP(n),"setPoint",(function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),YR(yP(n),"handlePortalUpdate",(function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)})),YR(yP(n),"triggerContextValue",{onPopupMouseDown:n.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,n.state={prevPopupVisible:o,popupVisible:o},cI.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return fP(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=FL(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=FL(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=FL(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=FL(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Mk.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return nk(nk({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,r=this.props,i=r.children,o=r.forceRender,a=r.alignPoint,s=r.className,l=r.autoDestroy,c=t.Children.only(i),u={key:"trigger"};this.isContextMenuToShow()?u.onContextMenu=this.onContextMenu:u.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(u.onClick=this.onClick,u.onMouseDown=this.onMouseDown,u.onTouchStart=this.onTouchStart):(u.onClick=this.createTwoChains("onClick"),u.onMouseDown=this.createTwoChains("onMouseDown"),u.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(u.onMouseEnter=this.onMouseEnter,a&&(u.onMouseMove=this.onMouseMove)):u.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?u.onMouseLeave=this.onMouseLeave:u.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(u.onFocus=this.onFocus,u.onBlur=this.onBlur):(u.onFocus=this.createTwoChains("onFocus"),u.onBlur=this.createTwoChains("onBlur"));var h=ik()(c&&c.props&&c.props.className,s);h&&(u.className=h);var d=nk({},u);zk(c)&&(d.ref=jk(this.triggerRef,c.ref));var p,f=t.cloneElement(c,d);return(n||this.popupRef.current||o)&&(p=t.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&l&&(p=null),t.createElement(oI.Provider,{value:this.triggerContextValue},f,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),i}(t.Component);return YR(n,"contextType",oI),YR(n,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:sI,getDocument:lI,onPopupVisibleChange:aI,afterPopupVisibleChange:aI,onPopupAlign:aI,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),n}(BL);var hI={adjustX:1,adjustY:1},dI={topLeft:{points:["bl","tl"],overflow:hI,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:hI,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:hI,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:hI,offset:[4,0]}},pI={topLeft:{points:["bl","tl"],overflow:hI,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:hI,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:hI,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:hI,offset:[4,0]}};function fI(e,t,n){return t||(n?n[e]||n.other:void 0)}var mI={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function gI(e){var n=e.prefixCls,r=e.visible,i=e.children,o=e.popup,a=e.popupClassName,s=e.popupOffset,l=e.disabled,c=e.mode,u=e.onVisibleChange,h=t.useContext(oL),d=h.getPopupContainer,p=h.rtl,f=h.subMenuOpenDelay,m=h.subMenuCloseDelay,g=h.builtinPlacements,v=h.triggerSubMenuAction,b=h.forceSubMenuRender,y=h.rootClassName,x=h.motion,w=h.defaultMotions,_=QR(t.useState(!1),2),S=_[0],M=_[1],T=nk(nk({},p?pI:dI),g),E=mI[c],C=nk(nk({},fI(c,x,w)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),A=t.useRef();return t.useEffect((function(){return A.current=Mk((function(){M(r)})),function(){Mk.cancel(A.current)}}),[r]),t.createElement(uI,{prefixCls:n,popupClassName:ik()("".concat(n,"-popup"),YR({},"".concat(n,"-rtl"),p),a,y),stretch:"horizontal"===c?"minWidth":null,getPopupContainer:d,builtinPlacements:T,popupPlacement:E,popupVisible:S,popup:o,popupAlign:s&&{offset:s},action:l?[]:[v],mouseEnterDelay:f,mouseLeaveDelay:m,onPopupVisibleChange:u,forceRender:b,popupMotion:C},i)}function vI(e){var n=e.id,r=e.open,i=e.keyPath,o=e.children,a="inline",s=t.useContext(oL),l=s.prefixCls,c=s.forceSubMenuRender,u=s.motion,h=s.defaultMotions,d=s.mode,p=t.useRef(!1);p.current=d===a;var f=QR(t.useState(!p.current),2),m=f[0],g=f[1],v=!!p.current&&r;t.useEffect((function(){p.current&&g(!1)}),[d]);var b=nk({},fI(a,u,h));i.length>1&&(b.motionAppear=!1);var y=b.onVisibleChanged;return b.onVisibleChanged=function(e){return p.current||e||g(!0),null===y||void 0===y?void 0:y(e)},m?null:t.createElement(aL,{mode:a,locked:!p.current},t.createElement(LO,(0,$R.A)({visible:v},b,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var r=e.className,i=e.style;return t.createElement(DL,{id:n,className:r,style:i},o)})))}var bI=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],yI=["active"],xI=function(e){var n,r=e.style,i=e.className,o=e.title,a=e.eventKey,s=(e.warnKey,e.disabled),l=e.internalPopupClose,c=e.children,u=e.itemIcon,h=e.expandIcon,d=e.popupClassName,p=e.popupOffset,f=e.onClick,m=e.onMouseEnter,g=e.onMouseLeave,v=e.onTitleClick,b=e.onTitleMouseEnter,y=e.onTitleMouseLeave,x=ek(e,bI),w=xL(a),_=t.useContext(oL),S=_.prefixCls,M=_.mode,T=_.openKeys,E=_.disabled,C=_.overflowDisabled,A=_.activeKey,R=_.selectedKeys,k=_.itemIcon,P=_.expandIcon,L=_.onItemClick,O=_.onOpenChange,N=_.onActive,I=t.useContext(wL)._internalRenderSubMenuItem,D=t.useContext(vL).isSubPathKey,j=gL(),F="".concat(S,"-submenu"),z=E||s,B=t.useRef(),U=t.useRef();var G=u||k,V=h||P,H=T.includes(a),W=!C&&H,$=D(R,a),q=sL(a,z,b,y),X=q.active,Y=ek(q,yI),K=QR(t.useState(!1),2),J=K[0],Q=K[1],Z=function(e){z||Q(e)},ee=t.useMemo((function(){return X||"inline"!==M&&(J||D([A],a))}),[M,X,A,J,a,D]),te=hL(j.length),ne=LL((function(e){null===f||void 0===f||f(cL(e)),L(e)})),re=w&&"".concat(w,"-popup"),ie=t.createElement("div",(0,$R.A)({role:"menuitem",style:te,className:"".concat(F,"-title"),tabIndex:z?null:-1,ref:B,title:"string"===typeof o?o:null,"data-menu-id":C&&w?null:w,"aria-expanded":W,"aria-haspopup":!0,"aria-controls":re,"aria-disabled":z,onClick:function(e){z||(null===v||void 0===v||v({key:a,domEvent:e}),"inline"===M&&O(a,!H))},onFocus:function(){N(a)}},Y),o,t.createElement(uL,{icon:"horizontal"!==M?V:null,props:nk(nk({},e),{},{isOpen:W,isSubMenu:!0})},t.createElement("i",{className:"".concat(F,"-arrow")}))),oe=t.useRef(M);if("inline"!==M&&(oe.current=j.length>1?"vertical":M),!C){var ae=oe.current;ie=t.createElement(gI,{mode:ae,prefixCls:F,visible:!l&&W&&"inline"!==M,popupClassName:d,popupOffset:p,popup:t.createElement(aL,{mode:"horizontal"===ae?"vertical":ae},t.createElement(DL,{id:re,ref:U},c)),disabled:z,onVisibleChange:function(e){"inline"!==M&&O(a,e)}},ie)}var se=t.createElement(nL.Item,(0,$R.A)({role:"none"},x,{component:"li",style:r,className:ik()(F,"".concat(F,"-").concat(M),i,(n={},YR(n,"".concat(F,"-open"),W),YR(n,"".concat(F,"-active"),ee),YR(n,"".concat(F,"-selected"),$),YR(n,"".concat(F,"-disabled"),z),n)),onMouseEnter:function(e){Z(!0),null===m||void 0===m||m({key:a,domEvent:e})},onMouseLeave:function(e){Z(!1),null===g||void 0===g||g({key:a,domEvent:e})}}),ie,!C&&t.createElement(vI,{id:re,open:W,keyPath:j},c));return I&&(se=I(se,e,{selected:$,active:ee,open:W,disabled:z})),t.createElement(aL,{onItemClick:ne,mode:"horizontal"===M?"vertical":M,itemIcon:G,expandIcon:V},se)};function wI(e){var n,r=e.eventKey,i=e.children,o=gL(r),a=RL(i,o),s=fL();return t.useEffect((function(){if(s)return s.registerPath(r,o),function(){s.unregisterPath(r,o)}}),[o]),n=s?a:t.createElement(xI,e,a),t.createElement(mL.Provider,{value:o},n)}function _I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(UN(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}function SI(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=vk(e.querySelectorAll("*")).filter((function(e){return _I(e,t)}));return _I(e,t)&&n.unshift(e),n}var MI=RP.LEFT,TI=RP.RIGHT,EI=RP.UP,CI=RP.DOWN,AI=RP.ENTER,RI=RP.ESC,kI=RP.HOME,PI=RP.END,LI=[EI,CI,MI,TI];function OI(e,t){return SI(e,!0).filter((function(e){return t.has(e)}))}function NI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=OI(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}function II(e,n,r,i,o,a,s,l,c,u){var h=t.useRef(),d=t.useRef();d.current=n;var p=function(){Mk.cancel(h.current)};return t.useEffect((function(){return function(){p()}}),[]),function(t){var f=t.which;if([].concat(LI,[AI,RI,kI,PI]).includes(f)){var m,g,v,b=function(){return m=new Set,g=new Map,v=new Map,a().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(yL(i,e),"']"));t&&(m.add(t),v.set(t,e),g.set(e,t))})),m};b();var y=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(g.get(n),m),x=v.get(y),w=function(e,t,n,r){var i,o,a,s,l="prev",c="next",u="children",h="parent";if("inline"===e&&r===AI)return{inlineTrigger:!0};var d=(YR(i={},EI,l),YR(i,CI,c),i),p=(YR(o={},MI,n?c:l),YR(o,TI,n?l:c),YR(o,CI,u),YR(o,AI,u),o),f=(YR(a={},EI,l),YR(a,CI,c),YR(a,AI,u),YR(a,RI,h),YR(a,MI,n?u:h),YR(a,TI,n?h:u),a);switch(null===(s={inline:d,horizontal:p,vertical:f,inlineSub:d,horizontalSub:f,verticalSub:f}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case u:return{offset:1,sibling:!1};default:return null}}(e,1===s(x,!0).length,r,f);if(!w&&f!==kI&&f!==PI)return;(LI.includes(f)||[kI,PI].includes(f))&&t.preventDefault();var _=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=v.get(e);l(r),p(),h.current=Mk((function(){d.current===r&&t.focus()}))}};if([kI,PI].includes(f)||w.sibling||!y){var S,M,T=OI(S=y&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(y):o.current,m);M=f===kI?T[0]:f===PI?T[T.length-1]:NI(S,m,y,w.offset),_(M)}else if(w.inlineTrigger)c(x);else if(w.offset>0)c(x,!0),p(),h.current=Mk((function(){b();var e=y.getAttribute("aria-controls"),t=NI(document.getElementById(e),m);_(t)}),5);else if(w.offset<0){var E=s(x,!0),C=E[E.length-2],A=g.get(C);c(C,!1),_(A)}}null===u||void 0===u||u(t)}}var DI=Math.random().toFixed(5).toString().slice(2),jI=0;var FI="__RC_UTIL_PATH_SPLIT__",zI=function(e){return e.join(FI)},BI="rc-menu-more";function UI(){var e=QR(t.useState({}),2)[1],n=(0,t.useRef)(new Map),r=(0,t.useRef)(new Map),i=QR(t.useState([]),2),o=i[0],a=i[1],s=(0,t.useRef)(0),l=(0,t.useRef)(!1),c=(0,t.useCallback)((function(t,i){var o=zI(i);r.current.set(o,t),n.current.set(t,o),s.current+=1;var a,c=s.current;a=function(){c===s.current&&(l.current||e({}))},Promise.resolve().then(a)}),[]),u=(0,t.useCallback)((function(e,t){var i=zI(t);r.current.delete(i),n.current.delete(e)}),[]),h=(0,t.useCallback)((function(e){a(e)}),[]),d=(0,t.useCallback)((function(e,t){var r=n.current.get(e)||"",i=r.split(FI);return t&&o.includes(i[0])&&i.unshift(BI),i}),[o]),p=(0,t.useCallback)((function(e,t){return e.some((function(e){return d(e,!0).includes(t)}))}),[d]),f=(0,t.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(FI),i=new Set;return vk(r.current.keys()).forEach((function(e){e.startsWith(t)&&i.add(r.current.get(e))})),i}),[]);return t.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:u,refreshOverflowKeys:h,isSubPathKey:p,getKeyPath:d,getKeys:function(){var e=vk(n.current.keys());return o.length&&e.push(BI),e},getSubPathKeys:f}}var GI=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],VI=[],HI=t.forwardRef((function(e,n){var r,i,o=e.prefixCls,a=void 0===o?"rc-menu":o,s=e.rootClassName,l=e.style,c=e.className,u=e.tabIndex,h=void 0===u?0:u,d=e.items,p=e.children,f=e.direction,m=e.id,g=e.mode,v=void 0===g?"vertical":g,b=e.inlineCollapsed,y=e.disabled,x=e.disabledOverflow,w=e.subMenuOpenDelay,_=void 0===w?.1:w,S=e.subMenuCloseDelay,M=void 0===S?.1:S,T=e.forceSubMenuRender,E=e.defaultOpenKeys,C=e.openKeys,A=e.activeKey,R=e.defaultActiveFirst,k=e.selectable,P=void 0===k||k,L=e.multiple,O=void 0!==L&&L,N=e.defaultSelectedKeys,I=e.selectedKeys,D=e.onSelect,j=e.onDeselect,F=e.inlineIndent,z=void 0===F?24:F,B=e.motion,U=e.defaultMotions,G=e.triggerSubMenuAction,V=void 0===G?"hover":G,H=e.builtinPlacements,W=e.itemIcon,$=e.expandIcon,q=e.overflowedIndicator,X=void 0===q?"...":q,Y=e.overflowedIndicatorPopupClassName,K=e.getPopupContainer,J=e.onClick,Q=e.onOpenChange,Z=e.onKeyDown,ee=(e.openAnimation,e.openTransitionName,e._internalRenderMenuItem),te=e._internalRenderSubMenuItem,ne=ek(e,GI),re=t.useMemo((function(){return PL(p,d,VI)}),[p,d]),ie=QR(t.useState(!1),2),oe=ie[0],ae=ie[1],se=t.useRef(),le=function(e){var n=QR(gk(e,{value:e}),2),r=n[0],i=n[1];return t.useEffect((function(){jI+=1;var e="".concat(DI,"-").concat(jI);i("rc-menu-uuid-".concat(e))}),[]),r}(m),ce="rtl"===f;var ue=QR(t.useMemo((function(){return"inline"!==v&&"vertical"!==v||!b?[v,!1]:["vertical",b]}),[v,b]),2),he=ue[0],de=ue[1],pe=QR(t.useState(0),2),fe=pe[0],me=pe[1],ge=fe>=re.length-1||"horizontal"!==he||x,ve=gk(E,{value:C,postState:function(e){return e||VI}}),be=QR(ve,2),ye=be[0],xe=be[1],we=function(e){xe(e),null===Q||void 0===Q||Q(e)},_e=QR(t.useState(ye),2),Se=_e[0],Me=_e[1],Te="inline"===he,Ee=t.useRef(!1);t.useEffect((function(){Te&&Me(ye)}),[ye]),t.useEffect((function(){Ee.current&&(Te?xe(Se):we(VI))}),[Te]),t.useEffect((function(){return Ee.current=!0,function(){Ee.current=!1}}),[]);var Ce=UI(),Ae=Ce.registerPath,Re=Ce.unregisterPath,ke=Ce.refreshOverflowKeys,Pe=Ce.isSubPathKey,Le=Ce.getKeyPath,Oe=Ce.getKeys,Ne=Ce.getSubPathKeys,Ie=t.useMemo((function(){return{registerPath:Ae,unregisterPath:Re}}),[Ae,Re]),De=t.useMemo((function(){return{isSubPathKey:Pe}}),[Pe]);t.useEffect((function(){ke(ge?VI:re.slice(fe+1).map((function(e){return e.key})))}),[fe,ge]);var je=QR(gk(A||R&&(null===(r=re[0])||void 0===r?void 0:r.key),{value:A}),2),Fe=je[0],ze=je[1],Be=LL((function(e){ze(e)})),Ue=LL((function(){ze(void 0)}));(0,t.useImperativeHandle)(n,(function(){return{list:se.current,focus:function(e){var t,n,r,i,o=null!==Fe&&void 0!==Fe?Fe:null===(t=re.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;o&&(null===(n=se.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(yL(le,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var Ge=gk(N||[],{value:I,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?VI:[e]}}),Ve=QR(Ge,2),He=Ve[0],We=Ve[1],$e=LL((function(e){null===J||void 0===J||J(cL(e)),function(e){if(P){var t,n=e.key,r=He.includes(n);t=O?r?He.filter((function(e){return e!==n})):[].concat(vk(He),[n]):[n],We(t);var i=nk(nk({},e),{},{selectedKeys:t});r?null===j||void 0===j||j(i):null===D||void 0===D||D(i)}!O&&ye.length&&"inline"!==he&&we(VI)}(e)})),qe=LL((function(e,t){var n=ye.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==he){var r=Ne(e);n=n.filter((function(e){return!r.has(e)}))}IP()(ye,n)||we(n)})),Xe=LL(K),Ye=II(he,Fe,ce,le,se,Oe,Le,ze,(function(e,t){var n=null!==t&&void 0!==t?t:!ye.includes(e);qe(e,n)}),Z);t.useEffect((function(){ae(!0)}),[]);var Ke=t.useMemo((function(){return{_internalRenderMenuItem:ee,_internalRenderSubMenuItem:te}}),[ee,te]),Je="horizontal"!==he||x?re:re.map((function(e,n){return t.createElement(aL,{key:e.key,overflowDisabled:n>fe},e)})),Qe=t.createElement(nL,(0,$R.A)({id:m,ref:se,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:CL,className:ik()(a,"".concat(a,"-root"),"".concat(a,"-").concat(he),c,(i={},YR(i,"".concat(a,"-inline-collapsed"),de),YR(i,"".concat(a,"-rtl"),ce),i),s),dir:f,style:l,role:"menu",tabIndex:h,data:Je,renderRawItem:function(e){return e},renderRawRest:function(e){var n=e.length,r=n?re.slice(-n):null;return t.createElement(wI,{eventKey:BI,title:X,disabled:ge,internalPopupClose:0===n,popupClassName:Y},r)},maxCount:"horizontal"!==he||x?nL.INVALIDATE:nL.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){me(e)},onKeyDown:Ye},ne));return t.createElement(wL.Provider,{value:Ke},t.createElement(bL.Provider,{value:le},t.createElement(aL,{prefixCls:a,rootClassName:s,mode:he,openKeys:ye,rtl:ce,disabled:y,motion:oe?B:null,defaultMotions:oe?U:null,activeKey:Fe,onActive:Be,onInactive:Ue,selectedKeys:He,inlineIndent:z,subMenuOpenDelay:_,subMenuCloseDelay:M,forceSubMenuRender:T,builtinPlacements:H,triggerSubMenuAction:V,getPopupContainer:Xe,itemIcon:W,expandIcon:$,onItemClick:$e,onOpenChange:qe},t.createElement(vL.Provider,{value:De},Qe),t.createElement("div",{style:{display:"none"},"aria-hidden":!0},t.createElement(pL.Provider,{value:Ie},re)))))}));var WI=["className","title","eventKey","children"],$I=["children"],qI=function(e){var n=e.className,r=e.title,i=(e.eventKey,e.children),o=ek(e,WI),a=t.useContext(oL).prefixCls,s="".concat(a,"-item-group");return t.createElement("li",(0,$R.A)({},o,{onClick:function(e){return e.stopPropagation()},className:ik()(s,n)}),t.createElement("div",{className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),t.createElement("ul",{className:"".concat(s,"-list")},i))};function XI(e){var n=e.children,r=ek(e,$I),i=RL(n,gL(r.eventKey));return fL()?i:t.createElement(qI,rL(r,["warnKey"]),i)}function YI(e){var n=e.className,r=e.style,i=t.useContext(oL).prefixCls;return fL()?null:t.createElement("li",{className:ik()("".concat(i,"-item-divider"),n),style:r})}var KI=HI;KI.Item=CL,KI.SubMenu=wI,KI.ItemGroup=XI,KI.Divider=YI;const JI=KI;var QI={adjustX:1,adjustY:1},ZI=[0,0];const eD={topLeft:{points:["bl","tl"],overflow:QI,offset:[0,-4],targetOffset:ZI},topCenter:{points:["bc","tc"],overflow:QI,offset:[0,-4],targetOffset:ZI},topRight:{points:["br","tr"],overflow:QI,offset:[0,-4],targetOffset:ZI},bottomLeft:{points:["tl","bl"],overflow:QI,offset:[0,4],targetOffset:ZI},bottomCenter:{points:["tc","bc"],overflow:QI,offset:[0,4],targetOffset:ZI},bottomRight:{points:["tr","br"],overflow:QI,offset:[0,4],targetOffset:ZI}};var tD=RP.ESC,nD=RP.TAB;var rD=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function iD(e,n){var r=e.arrow,i=void 0!==r&&r,o=e.prefixCls,a=void 0===o?"rc-dropdown":o,s=e.transitionName,l=e.animation,c=e.align,u=e.placement,h=void 0===u?"bottomLeft":u,d=e.placements,p=void 0===d?eD:d,f=e.getPopupContainer,m=e.showAction,g=e.hideAction,v=e.overlayClassName,b=e.overlayStyle,y=e.visible,x=e.trigger,w=void 0===x?["hover"]:x,_=e.autoFocus,S=ek(e,rD),M=QR(t.useState(),2),T=M[0],E=M[1],C="visible"in e?y:T,A=t.useRef(null);t.useImperativeHandle(n,(function(){return A.current})),function(e){var n=e.visible,r=e.setTriggerVisible,i=e.triggerRef,o=e.onVisibleChange,a=e.autoFocus,s=t.useRef(!1),l=function(){var e,t,a,s;n&&i.current&&(null===(e=i.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(a=t.current)||void 0===a||null===(s=a.focus)||void 0===s||s.call(a),r(!1),"function"===typeof o&&o(!1))},c=function(){var e,t,n,r,o=SI(null===(e=i.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return!!(null===o||void 0===o?void 0:o.focus)&&(o.focus(),s.current=!0,!0)},u=function(e){switch(e.keyCode){case tD:l();break;case nD:var t=!1;s.current||(t=c()),t?e.preventDefault():l()}};t.useEffect((function(){return n?(window.addEventListener("keydown",u),a&&Mk(c,3),function(){window.removeEventListener("keydown",u),s.current=!1}):function(){s.current=!1}}),[n])}({visible:C,setTriggerVisible:E,triggerRef:A,onVisibleChange:e.onVisibleChange,autoFocus:_});var R=function(){var n=function(){var t=e.overlay;return"function"===typeof t?t():t}();return t.createElement(t.Fragment,null,i&&t.createElement("div",{className:"".concat(a,"-arrow")}),n)},k=g;return k||-1===w.indexOf("contextMenu")||(k=["click"]),t.createElement(uI,nk(nk({builtinPlacements:p},S),{},{prefixCls:a,ref:A,popupClassName:ik()(v,YR({},"".concat(a,"-show-arrow"),i)),popupStyle:b,action:w,showAction:m,hideAction:k||[],popupPlacement:h,popupAlign:c,popupTransitionName:s,popupAnimation:l,popupVisible:C,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof e.overlay?R:R(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;E(t),"function"===typeof n&&n(t)},onPopupClick:function(t){var n=e.onOverlayClick;E(!1),n&&n(t)},getPopupContainer:f}),function(){var n=e.children,r=n.props?n.props:{},i=ik()(r.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(a,"-open")}());return C&&n?t.cloneElement(n,{className:i}):n}())}const oD=t.forwardRef(iD);function aD(e,n){var r=e.prefixCls,i=e.editable,o=e.locale,a=e.style;return i&&!1!==i.showAdd?t.createElement("button",{ref:n,type:"button",className:"".concat(r,"-nav-add"),style:a,"aria-label":(null===o||void 0===o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){i.onEdit("add",{event:e})}},i.addIcon||"+"):null}const sD=t.forwardRef(aD);function lD(e,n){var r=e.prefixCls,i=e.id,o=e.tabs,a=e.locale,s=e.mobile,l=e.moreIcon,c=void 0===l?"More":l,u=e.moreTransitionName,h=e.style,d=e.className,p=e.editable,f=e.tabBarGutter,m=e.rtl,g=e.removeAriaLabel,v=e.onTabClick,b=e.getPopupContainer,y=e.popupClassName,x=QR((0,t.useState)(!1),2),w=x[0],_=x[1],S=QR((0,t.useState)(null),2),M=S[0],T=S[1],E="".concat(i,"-more-popup"),C="".concat(r,"-dropdown"),A=null!==M?"".concat(E,"-").concat(M):null,R=null===a||void 0===a?void 0:a.dropdownAriaLabel;var k=t.createElement(JI,{onClick:function(e){var t=e.key,n=e.domEvent;v(t,n),_(!1)},prefixCls:"".concat(C,"-menu"),id:E,tabIndex:-1,role:"listbox","aria-activedescendant":A,selectedKeys:[M],"aria-label":void 0!==R?R:"expanded dropdown"},o.map((function(e){var n=p&&!1!==e.closable&&!e.disabled;return t.createElement(CL,{key:e.key,id:"".concat(E,"-").concat(e.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(e.key),disabled:e.disabled},t.createElement("span",null,e.tab),n&&t.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(C,"-menu-item-remove"),onClick:function(t){var n,r;t.stopPropagation(),n=t,r=e.key,n.preventDefault(),n.stopPropagation(),p.onEdit("remove",{key:r,event:n})}},e.closeIcon||p.removeIcon||"\xd7"))})));function P(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===M}))||0,r=t.length,i=0;i<r;i+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void T(a.key)}}(0,t.useEffect)((function(){var e=document.getElementById(A);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[M]),(0,t.useEffect)((function(){w||T(null)}),[w]);var L=YR({},m?"marginRight":"marginLeft",f);o.length||(L.visibility="hidden",L.order=1);var O=ik()(YR({},"".concat(C,"-rtl"),m)),N=s?null:t.createElement(oD,{prefixCls:C,overlay:k,trigger:["hover"],visible:!!o.length&&w,transitionName:u,onVisibleChange:_,overlayClassName:ik()(O,y),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:b},t.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:L,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":E,id:"".concat(i,"-more"),"aria-expanded":w,onKeyDown:function(e){var t=e.which;if(w)switch(t){case RP.UP:P(-1),e.preventDefault();break;case RP.DOWN:P(1),e.preventDefault();break;case RP.ESC:_(!1);break;case RP.SPACE:case RP.ENTER:null!==M&&v(M,e)}else[RP.DOWN,RP.SPACE,RP.ENTER].includes(t)&&(_(!0),e.preventDefault())}},c));return t.createElement("div",{className:ik()("".concat(r,"-nav-operations"),d),style:h,ref:n},N,t.createElement(sD,{prefixCls:r,locale:a,editable:p}))}const cD=t.memo(t.forwardRef(lD),(function(e,t){return t.tabMoving})),uD=(0,t.createContext)(null);var hD=.1,dD=.01,pD=20,fD=Math.pow(.995,pD);function mD(e,n){var r=t.useRef(e),i=QR(t.useState({}),2)[1];return[r.current,function(e){var t="function"===typeof e?e(r.current):e;t!==r.current&&n(t,r.current),r.current=t,i({})}]}var gD=function(e){var n,r=e.position,i=e.prefixCls,o=e.extra;if(!o)return null;var a={};return o&&"object"===qR(o)&&!t.isValidElement(o)?a=o:a.right=o,"right"===r&&(n=a.right),"left"===r&&(n=a.left),n?t.createElement("div",{className:"".concat(i,"-extra-content")},n):null};function vD(e,n){var r,i=t.useContext(uD),o=i.prefixCls,a=i.tabs,s=e.className,l=e.style,c=e.id,u=e.animated,h=e.activeKey,d=e.rtl,p=e.extra,f=e.editable,m=e.locale,g=e.tabPosition,v=e.tabBarGutter,b=e.children,y=e.onTabClick,x=e.onTabScroll,w=(0,t.useRef)(),_=(0,t.useRef)(),S=(0,t.useRef)(),M=(0,t.useRef)(),T=QR(function(){var e=(0,t.useRef)(new Map);return[function(n){return e.current.has(n)||e.current.set(n,t.createRef()),e.current.get(n)},function(t){e.current.delete(t)}]}(),2),E=T[0],C=T[1],A="top"===g||"bottom"===g,R=QR(mD(0,(function(e,t){A&&x&&x({direction:e>t?"left":"right"})})),2),k=R[0],P=R[1],L=QR(mD(0,(function(e,t){!A&&x&&x({direction:e>t?"top":"bottom"})})),2),O=L[0],N=L[1],I=QR((0,t.useState)(0),2),D=I[0],j=I[1],F=QR((0,t.useState)(0),2),z=F[0],B=F[1],U=QR((0,t.useState)(null),2),G=U[0],V=U[1],H=QR((0,t.useState)(null),2),W=H[0],$=H[1],q=QR((0,t.useState)(0),2),X=q[0],Y=q[1],K=QR((0,t.useState)(0),2),J=K[0],Q=K[1],Z=function(e){var n=(0,t.useRef)([]),r=QR((0,t.useState)({}),2)[1],i=(0,t.useRef)("function"===typeof e?e():e),o=CP((function(){var e=i.current;n.current.forEach((function(t){e=t(e)})),n.current=[],i.current=e,r({})}));return[i.current,function(e){n.current.push(e),o()}]}(new Map),ee=QR(Z,2),te=ee[0],ne=ee[1],re=function(e,n,r){return(0,t.useMemo)((function(){for(var t,r=new Map,i=n.get(null===(t=e[0])||void 0===t?void 0:t.key)||LP,o=i.left+i.width,a=0;a<e.length;a+=1){var s,l=e[a].key,c=n.get(l);c||(c=n.get(null===(s=e[a-1])||void 0===s?void 0:s.key)||LP);var u=r.get(l)||nk({},c);u.right=o-u.left-u.width,r.set(l,u)}return r}),[e.map((function(e){return e.key})).join("_"),n,r])}(a,te,D),ie="".concat(o,"-nav-operations-hidden"),oe=0,ae=0;function se(e){return e<oe?oe:e>ae?ae:e}A?d?(oe=0,ae=Math.max(0,D-G)):(oe=Math.min(0,G-D),ae=0):(oe=Math.min(0,W-z),ae=0);var le=(0,t.useRef)(),ce=QR((0,t.useState)(),2),ue=ce[0],he=ce[1];function de(){he(Date.now())}function pe(){window.clearTimeout(le.current)}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=re.get(e)||{width:0,height:0,left:0,right:0,top:0};if(A){var n=k;d?t.right<k?n=t.right:t.right+t.width>k+G&&(n=t.right+t.width-G):t.left<-k?n=-t.left:t.left+t.width>-k+G&&(n=-(t.left+t.width-G)),N(0),P(se(n))}else{var r=O;t.top<-O?r=-t.top:t.top+t.height>-O+W&&(r=-(t.top+t.height-W)),P(0),N(se(r))}}!function(e,n){var r=QR((0,t.useState)(),2),i=r[0],o=r[1],a=QR((0,t.useState)(0),2),s=a[0],l=a[1],c=QR((0,t.useState)(0),2),u=c[0],h=c[1],d=QR((0,t.useState)(),2),p=d[0],f=d[1],m=(0,t.useRef)(),g=(0,t.useRef)(),v=(0,t.useRef)(null);v.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;o({x:n,y:r}),window.clearInterval(m.current)},onTouchMove:function(e){if(i){e.preventDefault();var t=e.touches[0],r=t.screenX,a=t.screenY;o({x:r,y:a});var c=r-i.x,u=a-i.y;n(c,u);var d=Date.now();l(d),h(d-s),f({x:c,y:u})}},onTouchEnd:function(){if(i&&(o(null),f(null),p)){var e=p.x/u,t=p.y/u,r=Math.abs(e),a=Math.abs(t);if(Math.max(r,a)<hD)return;var s=e,l=t;m.current=window.setInterval((function(){Math.abs(s)<dD&&Math.abs(l)<dD?window.clearInterval(m.current):n((s*=fD)*pD,(l*=fD)*pD)}),pD)}},onWheel:function(e){var t=e.deltaX,r=e.deltaY,i=0,o=Math.abs(t),a=Math.abs(r);o===a?i="x"===g.current?t:r:o>a?(i=t,g.current="x"):(i=r,g.current="y"),n(-i,-i)&&e.preventDefault()}},t.useEffect((function(){function t(e){v.current.onTouchMove(e)}function n(e){v.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){v.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){v.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(w,(function(e,t){function n(e,t){e((function(e){return se(e+t)}))}if(A){if(G>=D)return!1;n(P,e)}else{if(W>=z)return!1;n(N,t)}return pe(),de(),!0})),(0,t.useEffect)((function(){return pe(),ue&&(le.current=window.setTimeout((function(){he(0)}),100)),pe}),[ue]);var me=function(e,n,r,i,o){var a,s,l,c=o.tabs,u=o.tabPosition,h=o.rtl;["top","bottom"].includes(u)?(a="width",s=h?"right":"left",l=Math.abs(n.left)):(a="height",s="top",l=-n.top);var d=n[a],p=r[a],f=i[a],m=d;return p+f>d&&p<d&&(m=d-f),(0,t.useMemo)((function(){if(!c.length)return[0,0];for(var t=c.length,n=t,r=0;r<t;r+=1){var i=e.get(c[r].key)||OP;if(i[s]+i[a]>l+m){n=r-1;break}}for(var o=0,u=t-1;u>=0;u-=1)if((e.get(c[u].key)||OP)[s]<l){o=u+1;break}return[o,n]}),[e,l,m,u,c.map((function(e){return e.key})).join("_"),h])}(re,{width:G,height:W,left:k,top:O},{width:D,height:z},{width:X,height:J},nk(nk({},e),{},{tabs:a})),ge=QR(me,2),ve=ge[0],be=ge[1],ye={};"top"===g||"bottom"===g?ye[d?"marginRight":"marginLeft"]=v:ye.marginTop=v;var xe=a.map((function(e,n){var r=e.key;return t.createElement(PP,{id:c,prefixCls:o,key:r,tab:e,style:0===n?void 0:ye,closable:e.closable,editable:f,active:r===h,renderWrapper:b,removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:E(r),onClick:function(e){y(r,e)},onRemove:function(){C(r)},onFocus:function(){fe(r),de(),w.current&&(d||(w.current.scrollLeft=0),w.current.scrollTop=0)}})})),we=CP((function(){var e,t,n,r,i,o,s=(null===(e=w.current)||void 0===e?void 0:e.offsetWidth)||0,l=(null===(t=w.current)||void 0===t?void 0:t.offsetHeight)||0,c=(null===(n=M.current)||void 0===n?void 0:n.offsetWidth)||0,u=(null===(r=M.current)||void 0===r?void 0:r.offsetHeight)||0;V(s),$(l),Y(c),Q(u);var h=((null===(i=_.current)||void 0===i?void 0:i.offsetWidth)||0)-c,d=((null===(o=_.current)||void 0===o?void 0:o.offsetHeight)||0)-u;j(h),B(d),ne((function(){var e=new Map;return a.forEach((function(t){var n=t.key,r=E(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),_e=a.slice(0,ve),Se=a.slice(be+1),Me=[].concat(vk(_e),vk(Se)),Te=QR((0,t.useState)(),2),Ee=Te[0],Ce=Te[1],Ae=re.get(h),Re=(0,t.useRef)();function ke(){Mk.cancel(Re.current)}(0,t.useEffect)((function(){var e={};return Ae&&(A?(d?e.right=Ae.right:e.left=Ae.left,e.width=Ae.width):(e.top=Ae.top,e.height=Ae.height)),ke(),Re.current=Mk((function(){Ce(e)})),ke}),[Ae,A,d]),(0,t.useEffect)((function(){fe()}),[h,Ae,re,A]),(0,t.useEffect)((function(){we()}),[d,v,h,a.map((function(e){return e.key})).join("_")]);var Pe,Le,Oe,Ne,Ie=!!Me.length,De="".concat(o,"-nav-wrap");return A?d?(Le=k>0,Pe=k+G<D):(Pe=k<0,Le=-k+G<D):(Oe=O<0,Ne=-O+W<z),t.createElement("div",{ref:n,role:"tablist",className:ik()("".concat(o,"-nav"),s),style:l,onKeyDown:function(){de()}},t.createElement(gD,{position:"left",extra:p,prefixCls:o}),t.createElement(EP,{onResize:we},t.createElement("div",{className:ik()(De,(r={},YR(r,"".concat(De,"-ping-left"),Pe),YR(r,"".concat(De,"-ping-right"),Le),YR(r,"".concat(De,"-ping-top"),Oe),YR(r,"".concat(De,"-ping-bottom"),Ne),r)),ref:w},t.createElement(EP,{onResize:we},t.createElement("div",{ref:_,className:"".concat(o,"-nav-list"),style:{transform:"translate(".concat(k,"px, ").concat(O,"px)"),transition:ue?"none":void 0}},xe,t.createElement(sD,{ref:M,prefixCls:o,locale:m,editable:f,style:nk(nk({},0===xe.length?void 0:ye),{},{visibility:Ie?"hidden":null})}),t.createElement("div",{className:ik()("".concat(o,"-ink-bar"),YR({},"".concat(o,"-ink-bar-animated"),u.inkBar)),style:Ee}))))),t.createElement(cD,(0,$R.A)({},e,{removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:S,prefixCls:o,tabs:Me,className:!Ie&&ie,tabMoving:!!ue})),t.createElement(gD,{position:"right",extra:p,prefixCls:o}))}const bD=t.forwardRef(vD);function yD(e){var n=e.id,r=e.activeKey,i=e.animated,o=e.tabPosition,a=e.rtl,s=e.destroyInactiveTabPane,l=t.useContext(uD),c=l.prefixCls,u=l.tabs,h=i.tabPane,d=u.findIndex((function(e){return e.key===r}));return t.createElement("div",{className:ik()("".concat(c,"-content-holder"))},t.createElement("div",{className:ik()("".concat(c,"-content"),"".concat(c,"-content-").concat(o),YR({},"".concat(c,"-content-animated"),h)),style:d&&h?YR({},a?"marginRight":"marginLeft","-".concat(d,"00%")):null},u.map((function(e){return t.cloneElement(e.node,{key:e.key,prefixCls:c,tabKey:e.key,id:n,animated:h,active:e.key===r,destroyInactiveTabPane:s})}))))}var xD=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],wD=0;function _D(e,n){var r,i,o=e.id,a=e.prefixCls,s=void 0===a?"rc-tabs":a,l=e.className,c=e.children,u=e.direction,h=e.activeKey,d=e.defaultActiveKey,p=e.editable,f=e.animated,m=void 0===f?{inkBar:!0,tabPane:!1}:f,g=e.tabPosition,v=void 0===g?"top":g,b=e.tabBarGutter,y=e.tabBarStyle,x=e.tabBarExtraContent,w=e.locale,_=e.moreIcon,S=e.moreTransitionName,M=e.destroyInactiveTabPane,T=e.renderTabBar,E=e.onChange,C=e.onTabClick,A=e.onTabScroll,R=e.getPopupContainer,k=e.popupClassName,P=ek(e,xD),L=function(e){return ak(e).map((function(e){return t.isValidElement(e)?nk(nk({key:void 0!==e.key?String(e.key):void 0},e.props),{},{node:e}):null})).filter((function(e){return e}))}(c),O="rtl"===u;i=!1===m?{inkBar:!1,tabPane:!1}:!0===m?{inkBar:!0,tabPane:!0}:nk({inkBar:!0,tabPane:!1},"object"===qR(m)?m:{});var N=QR((0,t.useState)(!1),2),I=N[0],D=N[1];(0,t.useEffect)((function(){D(sk())}),[]);var j=QR(gk((function(){var e;return null===(e=L[0])||void 0===e?void 0:e.key}),{value:h,defaultValue:d}),2),F=j[0],z=j[1],B=QR((0,t.useState)((function(){return L.findIndex((function(e){return e.key===F}))})),2),U=B[0],G=B[1];(0,t.useEffect)((function(){var e,t=L.findIndex((function(e){return e.key===F}));-1===t&&(t=Math.max(0,Math.min(U,L.length-1)),z(null===(e=L[t])||void 0===e?void 0:e.key));G(t)}),[L.map((function(e){return e.key})).join("_"),F,U]);var V=QR(gk(null,{value:o}),2),H=V[0],W=V[1],$=v;I&&!["left","right"].includes(v)&&($="top"),(0,t.useEffect)((function(){o||(W("rc-tabs-".concat(wD)),wD+=1)}),[]);var q,X={id:H,activeKey:F,animated:i,tabPosition:$,rtl:O,mobile:I},Y=nk(nk({},X),{},{editable:p,locale:w,moreIcon:_,moreTransitionName:S,tabBarGutter:b,onTabClick:function(e,t){null===C||void 0===C||C(e,t);var n=e!==F;z(e),n&&(null===E||void 0===E||E(e))},onTabScroll:A,extra:x,style:y,panes:c,getPopupContainer:R,popupClassName:k});return q=T?T(Y,bD):t.createElement(bD,Y),t.createElement(uD.Provider,{value:{tabs:L,prefixCls:s}},t.createElement("div",(0,$R.A)({ref:n,id:o,className:ik()(s,"".concat(s,"-").concat($),(r={},YR(r,"".concat(s,"-mobile"),I),YR(r,"".concat(s,"-editable"),p),YR(r,"".concat(s,"-rtl"),O),r),l)},P),q,t.createElement(yD,(0,$R.A)({destroyInactiveTabPane:M},X,{animated:i}))))}var SD=t.forwardRef(_D);SD.TabPane=function(e){var n=e.prefixCls,r=e.forceRender,i=e.className,o=e.style,a=e.id,s=e.active,l=e.animated,c=e.destroyInactiveTabPane,u=e.tabKey,h=e.children,d=QR(t.useState(r),2),p=d[0],f=d[1];t.useEffect((function(){s?f(!0):c&&f(!1)}),[s,c]);var m={};return s||(l?(m.visibility="hidden",m.height=0,m.overflowY="hidden"):m.display="none"),t.createElement("div",{id:a&&"".concat(a,"-panel-").concat(u),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(u),"aria-hidden":!s,style:nk(nk({},m),o),className:ik()("".concat(n,"-tabpane"),s&&"".concat(n,"-tabpane-active"),i)},(s||p||r)&&h)};const MD=SD;var TD=t.createContext(null);function ED(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function CD(e){return ED(t.useContext(TD),e)}var AD=["children","locked"],RD=t.createContext(null);function kD(e){var n=e.children,r=e.locked,i=ek(e,AD),o=t.useContext(RD),a=Ik((function(){return function(e,t){var n=nk({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(o,i)}),[o,i],(function(e,t){return!r&&(e[0]!==t[0]||!BN(e[1],t[1],!0))}));return t.createElement(RD.Provider,{value:a},n)}var PD=[],LD=t.createContext(null);function OD(){return t.useContext(LD)}var ND=t.createContext(PD);function ID(e){var n=t.useContext(ND);return t.useMemo((function(){return void 0!==e?[].concat(vk(n),[e]):n}),[n,e])}var DD=t.createContext(null);const jD=t.createContext({});var FD=RP.LEFT,zD=RP.RIGHT,BD=RP.UP,UD=RP.DOWN,GD=RP.ENTER,VD=RP.ESC,HD=RP.HOME,WD=RP.END,$D=[BD,UD,FD,zD];function qD(e,t){return SI(e,!0).filter((function(e){return t.has(e)}))}function XD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=qD(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}function YD(e,n,r,i,o,a,s,l,c,u){var h=t.useRef(),d=t.useRef();d.current=n;var p=function(){Mk.cancel(h.current)};return t.useEffect((function(){return function(){p()}}),[]),function(t){var f=t.which;if([].concat($D,[GD,VD,HD,WD]).includes(f)){var m,g,v,b=function(){return m=new Set,g=new Map,v=new Map,a().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(ED(i,e),"']"));t&&(m.add(t),v.set(t,e),g.set(e,t))})),m};b();var y=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(g.get(n),m),x=v.get(y),w=function(e,t,n,r){var i,o,a,s,l="prev",c="next",u="children",h="parent";if("inline"===e&&r===GD)return{inlineTrigger:!0};var d=(YR(i={},BD,l),YR(i,UD,c),i),p=(YR(o={},FD,n?c:l),YR(o,zD,n?l:c),YR(o,UD,u),YR(o,GD,u),o),f=(YR(a={},BD,l),YR(a,UD,c),YR(a,GD,u),YR(a,VD,h),YR(a,FD,n?u:h),YR(a,zD,n?h:u),a);switch(null===(s={inline:d,horizontal:p,vertical:f,inlineSub:d,horizontalSub:f,verticalSub:f}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case u:return{offset:1,sibling:!1};default:return null}}(e,1===s(x,!0).length,r,f);if(!w&&f!==HD&&f!==WD)return;($D.includes(f)||[HD,WD].includes(f))&&t.preventDefault();var _=function(e){if(e){var t=e,n=e.querySelector("a");null!==n&&void 0!==n&&n.getAttribute("href")&&(t=n);var r=v.get(e);l(r),p(),h.current=Mk((function(){d.current===r&&t.focus()}))}};if([HD,WD].includes(f)||w.sibling||!y){var S,M,T=qD(S=y&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(y):o.current,m);M=f===HD?T[0]:f===WD?T[T.length-1]:XD(S,m,y,w.offset),_(M)}else if(w.inlineTrigger)c(x);else if(w.offset>0)c(x,!0),p(),h.current=Mk((function(){b();var e=y.getAttribute("aria-controls"),t=XD(document.getElementById(e),m);_(t)}),5);else if(w.offset<0){var E=s(x,!0),C=E[E.length-2],A=g.get(C);c(C,!1),_(A)}}null===u||void 0===u||u(t)}}var KD="__RC_UTIL_PATH_SPLIT__",JD=function(e){return e.join(KD)},QD="rc-menu-more";function ZD(){var e=QR(t.useState({}),2)[1],n=(0,t.useRef)(new Map),r=(0,t.useRef)(new Map),i=QR(t.useState([]),2),o=i[0],a=i[1],s=(0,t.useRef)(0),l=(0,t.useRef)(!1),c=(0,t.useCallback)((function(t,i){var o=JD(i);r.current.set(o,t),n.current.set(t,o),s.current+=1;var a,c=s.current;a=function(){c===s.current&&(l.current||e({}))},Promise.resolve().then(a)}),[]),u=(0,t.useCallback)((function(e,t){var i=JD(t);r.current.delete(i),n.current.delete(e)}),[]),h=(0,t.useCallback)((function(e){a(e)}),[]),d=(0,t.useCallback)((function(e,t){var r=n.current.get(e)||"",i=r.split(KD);return t&&o.includes(i[0])&&i.unshift(QD),i}),[o]),p=(0,t.useCallback)((function(e,t){return e.some((function(e){return d(e,!0).includes(t)}))}),[d]),f=(0,t.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(KD),i=new Set;return vk(r.current.keys()).forEach((function(e){e.startsWith(t)&&i.add(r.current.get(e))})),i}),[]);return t.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:u,refreshOverflowKeys:h,isSubPathKey:p,getKeyPath:d,getKeys:function(){var e=vk(n.current.keys());return o.length&&e.push(QD),e},getSubPathKeys:f}}function ej(e){var n=t.useRef(e);n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return e?r:void 0}var tj=Math.random().toFixed(5).toString().slice(2),nj=0;function rj(e,n,r,i){var o=t.useContext(RD),a=o.activeKey,s=o.onActive,l=o.onInactive,c={active:a===e};return n||(c.onMouseEnter=function(t){null===r||void 0===r||r({key:e,domEvent:t}),s(e)},c.onMouseLeave=function(t){null===i||void 0===i||i({key:e,domEvent:t}),l(e)}),c}function ij(e){var n=t.useContext(RD),r=n.mode,i=n.rtl,o=n.inlineIndent;if("inline"!==r)return null;return i?{paddingRight:e*o}:{paddingLeft:e*o}}function oj(e){var n=e.icon,r=e.props,i=e.children;return("function"===typeof n?t.createElement(n,nk({},r)):n)||i||null}var aj=["item"];function sj(e){var t=e.item,n=ek(e,aj);return Object.defineProperty(n,"item",{get:function(){return Pk(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var lj=["title","attribute","elementRef"],cj=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],uj=["active"],hj=function(e){gP(r,e);var n=xP(r);function r(){return dP(this,r),n.apply(this,arguments)}return fP(r,[{key:"render",value:function(){var e=this.props,n=e.title,r=e.attribute,i=e.elementRef,o=rL(ek(e,lj),["eventKey","popupClassName","popupOffset","onTitleClick"]);return Pk(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),t.createElement(nL.Item,(0,$R.A)({},r,{title:"string"===typeof n?n:void 0},o,{ref:i}))}}]),r}(t.Component),dj=t.forwardRef((function(e,n){var r,i=e.style,o=e.className,a=e.eventKey,s=(e.warnKey,e.disabled),l=e.itemIcon,c=e.children,u=e.role,h=e.onMouseEnter,d=e.onMouseLeave,p=e.onClick,f=e.onKeyDown,m=e.onFocus,g=ek(e,cj),v=CD(a),b=t.useContext(RD),y=b.prefixCls,x=b.onItemClick,w=b.disabled,_=b.overflowDisabled,S=b.itemIcon,M=b.selectedKeys,T=b.onActive,E=t.useContext(jD)._internalRenderMenuItem,C="".concat(y,"-item"),A=t.useRef(),R=t.useRef(),k=w||s,P=Fk(n,R),L=ID(a);var O=function(e){return{key:a,keyPath:vk(L).reverse(),item:A.current,domEvent:e}},N=l||S,I=rj(a,k,h,d),D=I.active,j=ek(I,uj),F=M.includes(a),z=ij(L.length),B={};"option"===e.role&&(B["aria-selected"]=F);var U=t.createElement(hj,(0,$R.A)({ref:A,elementRef:P,role:null===u?"none":u||"menuitem",tabIndex:s?null:-1,"data-menu-id":_&&v?null:v},g,j,B,{component:"li","aria-disabled":s,style:nk(nk({},z),i),className:ik()(C,(r={},YR(r,"".concat(C,"-active"),D),YR(r,"".concat(C,"-selected"),F),YR(r,"".concat(C,"-disabled"),k),r),o),onClick:function(e){if(!k){var t=O(e);null===p||void 0===p||p(sj(t)),x(t)}},onKeyDown:function(e){if(null===f||void 0===f||f(e),e.which===RP.ENTER){var t=O(e);null===p||void 0===p||p(sj(t)),x(t)}},onFocus:function(e){T(a),null===m||void 0===m||m(e)}}),c,t.createElement(oj,{props:nk(nk({},e),{},{isSelected:F}),icon:N}));return E&&(U=E(U,e,{selected:F})),U}));function pj(e,n){var r=e.eventKey,i=OD(),o=ID(r);return t.useEffect((function(){if(i)return i.registerPath(r,o),function(){i.unregisterPath(r,o)}}),[o]),i?null:t.createElement(dj,(0,$R.A)({},e,{ref:n}))}const fj=t.forwardRef(pj);var mj=["className","children"],gj=function(e,n){var r=e.className,i=e.children,o=ek(e,mj),a=t.useContext(RD),s=a.prefixCls,l=a.mode,c=a.rtl;return t.createElement("ul",(0,$R.A)({className:ik()(s,c&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),r),role:"menu"},o,{"data-menu-list":!0,ref:n}),i)},vj=t.forwardRef(gj);vj.displayName="SubMenuList";const bj=vj;var yj=["label","children","key","type"];function xj(e,n){return ak(e).map((function(e,r){if(t.isValidElement(e)){var i,o,a=e.key,s=null!==(i=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(vk(n),[r]).join("-")));var l={key:s,eventKey:s};return t.cloneElement(e,l)}return e}))}function wj(e){return(e||[]).map((function(e,n){if(e&&"object"===qR(e)){var r=e,i=r.label,o=r.children,a=r.key,s=r.type,l=ek(r,yj),c=null!==a&&void 0!==a?a:"tmp-".concat(n);return o||"group"===s?"group"===s?t.createElement(Bj,(0,$R.A)({key:c},l,{title:i}),wj(o)):t.createElement(Oj,(0,$R.A)({key:c},l,{title:i}),wj(o)):"divider"===s?t.createElement(Uj,(0,$R.A)({key:c},l)):t.createElement(fj,(0,$R.A)({key:c},l),i)}return null})).filter((function(e){return e}))}function _j(e,t,n){var r=e;return t&&(r=wj(t)),xj(r,n)}var Sj={adjustX:1,adjustY:1},Mj={topLeft:{points:["bl","tl"],overflow:Sj,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Sj,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Sj,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Sj,offset:[4,0]}},Tj={topLeft:{points:["bl","tl"],overflow:Sj,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Sj,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Sj,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Sj,offset:[4,0]}};function Ej(e,t,n){return t||(n?n[e]||n.other:void 0)}var Cj={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Aj(e){var n=e.prefixCls,r=e.visible,i=e.children,o=e.popup,a=e.popupClassName,s=e.popupOffset,l=e.disabled,c=e.mode,u=e.onVisibleChange,h=t.useContext(RD),d=h.getPopupContainer,p=h.rtl,f=h.subMenuOpenDelay,m=h.subMenuCloseDelay,g=h.builtinPlacements,v=h.triggerSubMenuAction,b=h.forceSubMenuRender,y=h.rootClassName,x=h.motion,w=h.defaultMotions,_=QR(t.useState(!1),2),S=_[0],M=_[1],T=nk(nk({},p?Tj:Mj),g),E=Cj[c],C=Ej(c,x,w),A=t.useRef(C);"inline"!==c&&(A.current=C);var R=nk(nk({},A.current),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),k=t.useRef();return t.useEffect((function(){return k.current=Mk((function(){M(r)})),function(){Mk.cancel(k.current)}}),[r]),t.createElement(uI,{prefixCls:n,popupClassName:ik()("".concat(n,"-popup"),YR({},"".concat(n,"-rtl"),p),a,y),stretch:"horizontal"===c?"minWidth":null,getPopupContainer:d,builtinPlacements:T,popupPlacement:E,popupVisible:S,popup:o,popupAlign:s&&{offset:s},action:l?[]:[v],mouseEnterDelay:f,mouseLeaveDelay:m,onPopupVisibleChange:u,forceRender:b,popupMotion:R},i)}function Rj(e){var n=e.id,r=e.open,i=e.keyPath,o=e.children,a="inline",s=t.useContext(RD),l=s.prefixCls,c=s.forceSubMenuRender,u=s.motion,h=s.defaultMotions,d=s.mode,p=t.useRef(!1);p.current=d===a;var f=QR(t.useState(!p.current),2),m=f[0],g=f[1],v=!!p.current&&r;t.useEffect((function(){p.current&&g(!1)}),[d]);var b=nk({},Ej(a,u,h));i.length>1&&(b.motionAppear=!1);var y=b.onVisibleChanged;return b.onVisibleChanged=function(e){return p.current||e||g(!0),null===y||void 0===y?void 0:y(e)},m?null:t.createElement(kD,{mode:a,locked:!p.current},t.createElement(LO,(0,$R.A)({visible:v},b,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var r=e.className,i=e.style;return t.createElement(bj,{id:n,className:r,style:i},o)})))}var kj=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Pj=["active"],Lj=function(e){var n,r=e.style,i=e.className,o=e.title,a=e.eventKey,s=(e.warnKey,e.disabled),l=e.internalPopupClose,c=e.children,u=e.itemIcon,h=e.expandIcon,d=e.popupClassName,p=e.popupOffset,f=e.onClick,m=e.onMouseEnter,g=e.onMouseLeave,v=e.onTitleClick,b=e.onTitleMouseEnter,y=e.onTitleMouseLeave,x=ek(e,kj),w=CD(a),_=t.useContext(RD),S=_.prefixCls,M=_.mode,T=_.openKeys,E=_.disabled,C=_.overflowDisabled,A=_.activeKey,R=_.selectedKeys,k=_.itemIcon,P=_.expandIcon,L=_.onItemClick,O=_.onOpenChange,N=_.onActive,I=t.useContext(jD)._internalRenderSubMenuItem,D=t.useContext(DD).isSubPathKey,j=ID(),F="".concat(S,"-submenu"),z=E||s,B=t.useRef(),U=t.useRef();var G=u||k,V=h||P,H=T.includes(a),W=!C&&H,$=D(R,a),q=rj(a,z,b,y),X=q.active,Y=ek(q,Pj),K=QR(t.useState(!1),2),J=K[0],Q=K[1],Z=function(e){z||Q(e)},ee=t.useMemo((function(){return X||"inline"!==M&&(J||D([A],a))}),[M,X,A,J,a,D]),te=ij(j.length),ne=ej((function(e){null===f||void 0===f||f(sj(e)),L(e)})),re=w&&"".concat(w,"-popup"),ie=t.createElement("div",(0,$R.A)({role:"menuitem",style:te,className:"".concat(F,"-title"),tabIndex:z?null:-1,ref:B,title:"string"===typeof o?o:null,"data-menu-id":C&&w?null:w,"aria-expanded":W,"aria-haspopup":!0,"aria-controls":re,"aria-disabled":z,onClick:function(e){z||(null===v||void 0===v||v({key:a,domEvent:e}),"inline"===M&&O(a,!H))},onFocus:function(){N(a)}},Y),o,t.createElement(oj,{icon:"horizontal"!==M?V:null,props:nk(nk({},e),{},{isOpen:W,isSubMenu:!0})},t.createElement("i",{className:"".concat(F,"-arrow")}))),oe=t.useRef(M);if("inline"!==M&&j.length>1?oe.current="vertical":oe.current=M,!C){var ae=oe.current;ie=t.createElement(Aj,{mode:ae,prefixCls:F,visible:!l&&W&&"inline"!==M,popupClassName:d,popupOffset:p,popup:t.createElement(kD,{mode:"horizontal"===ae?"vertical":ae},t.createElement(bj,{id:re,ref:U},c)),disabled:z,onVisibleChange:function(e){"inline"!==M&&O(a,e)}},ie)}var se=t.createElement(nL.Item,(0,$R.A)({role:"none"},x,{component:"li",style:r,className:ik()(F,"".concat(F,"-").concat(M),i,(n={},YR(n,"".concat(F,"-open"),W),YR(n,"".concat(F,"-active"),ee),YR(n,"".concat(F,"-selected"),$),YR(n,"".concat(F,"-disabled"),z),n)),onMouseEnter:function(e){Z(!0),null===m||void 0===m||m({key:a,domEvent:e})},onMouseLeave:function(e){Z(!1),null===g||void 0===g||g({key:a,domEvent:e})}}),ie,!C&&t.createElement(Rj,{id:re,open:W,keyPath:j},c));return I&&(se=I(se,e,{selected:$,active:ee,open:W,disabled:z})),t.createElement(kD,{onItemClick:ne,mode:"horizontal"===M?"vertical":M,itemIcon:G,expandIcon:V},se)};function Oj(e){var n,r=e.eventKey,i=e.children,o=ID(r),a=xj(i,o),s=OD();return t.useEffect((function(){if(s)return s.registerPath(r,o),function(){s.unregisterPath(r,o)}}),[o]),n=s?a:t.createElement(Lj,e,a),t.createElement(ND.Provider,{value:o},n)}var Nj=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Ij=[],Dj=t.forwardRef((function(e,n){var r,i,o=e,a=o.prefixCls,s=void 0===a?"rc-menu":a,l=o.rootClassName,c=o.style,u=o.className,h=o.tabIndex,d=void 0===h?0:h,p=o.items,f=o.children,m=o.direction,g=o.id,v=o.mode,b=void 0===v?"vertical":v,y=o.inlineCollapsed,x=o.disabled,w=o.disabledOverflow,_=o.subMenuOpenDelay,S=void 0===_?.1:_,M=o.subMenuCloseDelay,T=void 0===M?.1:M,E=o.forceSubMenuRender,C=o.defaultOpenKeys,A=o.openKeys,R=o.activeKey,k=o.defaultActiveFirst,P=o.selectable,L=void 0===P||P,O=o.multiple,N=void 0!==O&&O,I=o.defaultSelectedKeys,D=o.selectedKeys,j=o.onSelect,F=o.onDeselect,z=o.inlineIndent,B=void 0===z?24:z,U=o.motion,G=o.defaultMotions,V=o.triggerSubMenuAction,H=void 0===V?"hover":V,W=o.builtinPlacements,$=o.itemIcon,q=o.expandIcon,X=o.overflowedIndicator,Y=void 0===X?"...":X,K=o.overflowedIndicatorPopupClassName,J=o.getPopupContainer,Q=o.onClick,Z=o.onOpenChange,ee=o.onKeyDown,te=(o.openAnimation,o.openTransitionName,o._internalRenderMenuItem),ne=o._internalRenderSubMenuItem,re=ek(o,Nj),ie=t.useMemo((function(){return _j(f,p,Ij)}),[f,p]),oe=QR(t.useState(!1),2),ae=oe[0],se=oe[1],le=t.useRef(),ce=function(e){var n=QR(gk(e,{value:e}),2),r=n[0],i=n[1];return t.useEffect((function(){nj+=1;var e="".concat(tj,"-").concat(nj);i("rc-menu-uuid-".concat(e))}),[]),r}(g),ue="rtl"===m;var he=gk(C,{value:A,postState:function(e){return e||Ij}}),de=QR(he,2),pe=de[0],fe=de[1],me=function(e){function t(){fe(e),null===Z||void 0===Z||Z(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,Lk.flushSync)(t):t()},ge=QR(t.useState(pe),2),ve=ge[0],be=ge[1],ye=t.useRef(!1),xe=QR(t.useMemo((function(){return"inline"!==b&&"vertical"!==b||!y?[b,!1]:["vertical",y]}),[b,y]),2),we=xe[0],_e=xe[1],Se="inline"===we,Me=QR(t.useState(we),2),Te=Me[0],Ee=Me[1],Ce=QR(t.useState(_e),2),Ae=Ce[0],Re=Ce[1];t.useEffect((function(){Ee(we),Re(_e),ye.current&&(Se?fe(ve):me(Ij))}),[we,_e]);var ke=QR(t.useState(0),2),Pe=ke[0],Le=ke[1],Oe=Pe>=ie.length-1||"horizontal"!==Te||w;t.useEffect((function(){Se&&be(pe)}),[pe]),t.useEffect((function(){return ye.current=!0,function(){ye.current=!1}}),[]);var Ne=ZD(),Ie=Ne.registerPath,De=Ne.unregisterPath,je=Ne.refreshOverflowKeys,Fe=Ne.isSubPathKey,ze=Ne.getKeyPath,Be=Ne.getKeys,Ue=Ne.getSubPathKeys,Ge=t.useMemo((function(){return{registerPath:Ie,unregisterPath:De}}),[Ie,De]),Ve=t.useMemo((function(){return{isSubPathKey:Fe}}),[Fe]);t.useEffect((function(){je(Oe?Ij:ie.slice(Pe+1).map((function(e){return e.key})))}),[Pe,Oe]);var He=QR(gk(R||k&&(null===(r=ie[0])||void 0===r?void 0:r.key),{value:R}),2),We=He[0],$e=He[1],qe=ej((function(e){$e(e)})),Xe=ej((function(){$e(void 0)}));(0,t.useImperativeHandle)(n,(function(){return{list:le.current,focus:function(e){var t,n,r,i,o=null!==We&&void 0!==We?We:null===(t=ie.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;o&&(null===(n=le.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(ED(ce,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var Ye=gk(I||[],{value:D,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?Ij:[e]}}),Ke=QR(Ye,2),Je=Ke[0],Qe=Ke[1],Ze=ej((function(e){null===Q||void 0===Q||Q(sj(e)),function(e){if(L){var t,n=e.key,r=Je.includes(n);t=N?r?Je.filter((function(e){return e!==n})):[].concat(vk(Je),[n]):[n],Qe(t);var i=nk(nk({},e),{},{selectedKeys:t});r?null===F||void 0===F||F(i):null===j||void 0===j||j(i)}!N&&pe.length&&"inline"!==Te&&me(Ij)}(e)})),et=ej((function(e,t){var n=pe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Te){var r=Ue(e);n=n.filter((function(e){return!r.has(e)}))}BN(pe,n,!0)||me(n,!0)})),tt=ej(J),nt=YD(Te,We,ue,ce,le,Be,ze,$e,(function(e,t){var n=null!==t&&void 0!==t?t:!pe.includes(e);et(e,n)}),ee);t.useEffect((function(){se(!0)}),[]);var rt=t.useMemo((function(){return{_internalRenderMenuItem:te,_internalRenderSubMenuItem:ne}}),[te,ne]),it="horizontal"!==Te||w?ie:ie.map((function(e,n){return t.createElement(kD,{key:e.key,overflowDisabled:n>Pe},e)})),ot=t.createElement(nL,(0,$R.A)({id:g,ref:le,prefixCls:"".concat(s,"-overflow"),component:"ul",itemComponent:fj,className:ik()(s,"".concat(s,"-root"),"".concat(s,"-").concat(Te),u,(i={},YR(i,"".concat(s,"-inline-collapsed"),Ae),YR(i,"".concat(s,"-rtl"),ue),i),l),dir:m,style:c,role:"menu",tabIndex:d,data:it,renderRawItem:function(e){return e},renderRawRest:function(e){var n=e.length,r=n?ie.slice(-n):null;return t.createElement(Oj,{eventKey:QD,title:Y,disabled:Oe,internalPopupClose:0===n,popupClassName:K},r)},maxCount:"horizontal"!==Te||w?nL.INVALIDATE:nL.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Le(e)},onKeyDown:nt},re));return t.createElement(jD.Provider,{value:rt},t.createElement(TD.Provider,{value:ce},t.createElement(kD,{prefixCls:s,rootClassName:l,mode:Te,openKeys:pe,rtl:ue,disabled:x,motion:ae?U:null,defaultMotions:ae?G:null,activeKey:We,onActive:qe,onInactive:Xe,selectedKeys:Je,inlineIndent:B,subMenuOpenDelay:S,subMenuCloseDelay:T,forceSubMenuRender:E,builtinPlacements:W,triggerSubMenuAction:H,getPopupContainer:tt,itemIcon:$,expandIcon:q,onItemClick:Ze,onOpenChange:et},t.createElement(DD.Provider,{value:Ve},ot),t.createElement("div",{style:{display:"none"},"aria-hidden":!0},t.createElement(LD.Provider,{value:Ge},ie)))))}));var jj=["className","title","eventKey","children"],Fj=["children"],zj=function(e){var n=e.className,r=e.title,i=(e.eventKey,e.children),o=ek(e,jj),a=t.useContext(RD).prefixCls,s="".concat(a,"-item-group");return t.createElement("li",(0,$R.A)({role:"presentation"},o,{onClick:function(e){return e.stopPropagation()},className:ik()(s,n)}),t.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),t.createElement("ul",{role:"group",className:"".concat(s,"-list")},i))};function Bj(e){var n=e.children,r=ek(e,Fj),i=xj(n,ID(r.eventKey));return OD()?i:t.createElement(zj,rL(r,["warnKey"]),i)}function Uj(e){var n=e.className,r=e.style,i=t.useContext(RD).prefixCls;return OD()?null:t.createElement("li",{className:ik()("".concat(i,"-item-divider"),n),style:r})}var Gj=Dj;Gj.Item=fj,Gj.SubMenu=Oj,Gj.ItemGroup=Bj,Gj.Divider=Uj;const Vj=Gj,Hj=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").filter((e=>""!==e)).map((e=>"dock-style-".concat(e)))};class Wj{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.pageX=0,this.pageY=0,this.clientX=0,this.clientY=0,this.dx=0,this.dy=0,this.dropped=!1,this.event=e,this.component=t,this._init=n,e){if(e.type.startsWith("touch")){let t;t="touchend"===e.type?e.changedTouches[0]:e.touches[0],this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY}else"pageX"in e&&(this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY);this.dx=(this.pageX-t.baseX)*t.scaleX,this.dy=(this.pageY-t.baseY)*t.scaleY}}moved(){return Math.abs(this.dx)>=1||Math.abs(this.dy)>=1}startDrag(e,t){if(!this._init)throw new Error("startDrag can only be used in onDragStart callback");void 0===e&&(e=this.component.element),function(e,t,n){Yj=e,t&&(t.classList.add("dragging"),Kj=t);(function(e){Zj=e.createElement("div"),eF=e.createElement("div");const t=Xj&&"tabGroup"in Xj?Xj.tabGroup:void 0;Zj.className=ik()(Hj(t),"dragging-layer"),Zj.appendChild(document.createElement("div")),Zj.appendChild(eF)})(e.component.ownerDocument),e.component.ownerDocument.body.appendChild(Zj);let r=0,i=0;void 0===n&&(n=e.component.element);n&&"outerHTML"in n&&(r=n.offsetWidth,i=n.offsetHeight,n=n.outerHTML);n&&(Zj.firstElementChild.outerHTML=n,"rgba(0, 0, 0, 0)"===window.getComputedStyle(Zj.firstElementChild).backgroundColor&&(Zj.firstElementChild.style.backgroundColor=window.getComputedStyle(Zj).getPropertyValue("--default-background-color")),r&&(r>400&&(r=400),Zj.firstElementChild.style.width="".concat(r,"px")),i&&(i>300&&(i=300),Zj.firstElementChild.style.height="".concat(i,"px")));for(let o of oF)o(qj||!0)}(this,e,t),this.component.ownerDocument.body.classList.add("dock-dragging")}setData(e,t){if(!this._init)throw new Error("setData can only be used in onDragStart callback");qj=t,Xj=e}static getData(e,t){return t===qj&&Xj?Xj[e]:null}get dragType(){return this.component.dragType}accept(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.acceptMessage=e,this.rejected=!1}reject(){this.rejected=!0}_onMove(){if(Xj){let e,t=this.component.ownerDocument,n=t.elementFromPoint(this.clientX,this.clientY);for(;n&&n!==t.body;){if(tF.has(n)){let t=tF.get(n);if(t.onDragOverT&&(t.onDragOverT(this),null!=this.acceptMessage)){e=t;break}}n=n.parentElement}Qj(e,this)}var e;e=this,Zj.style.left="".concat(e.pageX,"px"),Zj.style.top="".concat(e.pageY,"px"),e.rejected?eF.className="drag-accept-reject":e.acceptMessage?eF.className=e.acceptMessage:eF.className=""}_onDragEnd(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Jj&&Jj.onDropT&&!e&&(this.dropped=Jj.onDropT(this),"right"===this.component.dragType&&(this.component.ownerDocument.addEventListener("contextmenu",$j,!0),setTimeout((()=>{this.component.ownerDocument.removeEventListener("contextmenu",$j,!0)}),0))),function(e){Kj&&(Kj.classList.remove("dragging"),Kj=null);Zj&&(Zj.remove(),Zj=null);Yj=null,Qj(null,e),qj=null,Xj=null;for(let t of oF)t(null)}(this),this.component.ownerDocument.body.classList.remove("dock-dragging")}}function $j(e){e.preventDefault(),e.stopPropagation()}let qj,Xj,Yj,Kj,Jj;function Qj(e,t){Jj!==e&&(Jj&&Jj.onDragLeaveT&&Jj.onDragLeaveT(t),Jj=e)}let Zj,eF,tF=new WeakMap;function nF(){return null!=Yj}function rF(e,t){tF.set(e,t)}function iF(e){tF.get(e)===Jj&&(Jj=null),tF.delete(e)}let oF=new Set;"undefined"!==typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform)&&document.addEventListener("touchmove",(e=>{1===e.touches.length&&document.body.classList.contains("dock-dragging")&&e.preventDefault()}),{passive:!1});class aF{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.dx1=0,this.dy1=0,this.dx2=0,this.dy2=0,this.scale=1,this.rotate=0,this.dx=0,this.dy=0,this.event=e,this.component=t,this._init=n,!e||2!==e.touches.length)return;let r=e.touches[0],i=e.touches[1];this.dx1=(r.pageX-t.baseX)*t.scaleX,this.dy1=(r.pageY-t.baseY)*t.scaleY,this.dx2=(i.pageX-t.baseX2)*t.scaleX,this.dy2=(i.pageY-t.baseY2)*t.scaleY,this.dx1*this.dx2>=0&&(this.dx=(this.dx1+this.dx2)/2),this.dy1*this.dy2>=0&&(this.dy=(this.dy1+this.dy2)/2),this.scale=Math.sqrt(Math.pow(i.pageX-r.pageX,2)+Math.pow(i.pageY-r.pageY,2))/t.baseDis,this.rotate=Math.atan2(i.pageY-r.pageY,i.pageX-r.pageX)-t.baseAng,this.rotate>Math.PI?this.rotate-=2*Math.PI:this.rotate<-Math.PI&&(this.rotate+=2*Math.PI)}moved(){return Math.max(Math.abs(this.dx1),Math.abs(this.dx2),Math.abs(this.dy1),Math.abs(this.dy2))}pageCenter(){let e=this.event.touches[0],t=this.event.touches[1];return[(e.pageX+t.pageX)/2,(e.pageY+t.pageY)/2]}clientCenter(){let e=this.event.touches[0],t=this.event.touches[1];return[(e.clientX+t.clientX)/2,(e.clientY+t.clientY)/2]}}var sF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class lF extends t.PureComponent{constructor(){super(...arguments),this._getRef=e=>{if(e===this.element)return;let{getRef:t,onDragOverT:n}=this.props;this.element&&n&&iF(this.element),this.element=e,e&&(this.ownerDocument=e.ownerDocument),t&&t(e),e&&n&&rF(e,this.props)},this.dragType=null,this.waitingMove=!1,this.listening=!1,this.gesturing=!1,this.onPointerDown=e=>{let t=e.nativeEvent.target;if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t.classList.contains("drag-ignore"))return;let{onDragStartT:n,onGestureStartT:r,onGestureMoveT:i,useRightButtonDragT:o}=this.props,a=e.nativeEvent;if(this.cancel(),"touchstart"===a.type)1===a.touches.length?n&&this.onDragStart(a):2===a.touches.length&&r&&i&&this.onGestureStart(a);else if(n){if(2===a.button&&!o)return;this.onDragStart(a)}},this.onMouseMove=e=>{let{onDragMoveT:t}=this.props;if(this.waitingMove){if(nF())return void this.onDragEnd();if(!this.checkFirstMove(e))return}else{let n=new Wj(e,this);n._onMove(),t&&t(n)}e.preventDefault()},this.onTouchMove=e=>{let{onDragMoveT:t}=this.props;if(this.waitingMove){if(nF())return void this.onDragEnd();if(!this.checkFirstMove(e))return}else if(1!==e.touches.length)this.onDragEnd();else{let n=new Wj(e,this);n._onMove(),t&&t(n)}e.preventDefault()},this.onDragEnd=e=>{let{onDragEndT:t}=this.props,n=new Wj(e,this);this.removeListeners(),this.waitingMove||(n._onDragEnd(null==e),t&&t(n)),this.cleanupDrag(n)},this.onGestureMove=e=>{let{onGestureMoveT:t,gestureSensitivity:n}=this.props,r=new aF(e,this);if(this.waitingMove){if(n>0||(n=10),!(r.moved()>n))return;this.waitingMove=!1}t&&t(r)},this.onGestureEnd=e=>{let{onGestureEndT:t}=this.props;this.removeListeners(),t&&t()},this.onKeyDown=e=>{"Escape"===e.key&&this.cancel()}}onDragStart(e){if(nF())return;let t=new Wj(e,this,!0);this.baseX=t.pageX,this.baseY=t.pageY;let n=this.element.parentElement,r=n.getBoundingClientRect();this.scaleX=n.offsetWidth/Math.round(r.width),this.scaleY=n.offsetHeight/Math.round(r.height),this.addDragListeners(e),this.props.directDragT&&this.executeFirstMove(t)}addDragListeners(e){"touchstart"===e.type?(this.ownerDocument.addEventListener("touchmove",this.onTouchMove),this.ownerDocument.addEventListener("touchend",this.onDragEnd),this.dragType="touch"):(this.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.ownerDocument.addEventListener("mouseup",this.onDragEnd),2===e.button?this.dragType="right":this.dragType="left"),this.waitingMove=!0,this.listening=!0}checkFirstMove(e){let t=new Wj(e,this,!0);return!!t.moved()&&this.executeFirstMove(t)}executeFirstMove(e){let{onDragStartT:t}=this.props;return this.waitingMove=!1,t(e),nF()?(e._onMove(),this.ownerDocument.addEventListener("keydown",this.onKeyDown),!0):(this.onDragEnd(),!1)}addGestureListeners(e){this.ownerDocument.addEventListener("touchmove",this.onGestureMove),this.ownerDocument.addEventListener("touchend",this.onGestureEnd),this.ownerDocument.addEventListener("keydown",this.onKeyDown),this.gesturing=!0,this.waitingMove=!0}onGestureStart(e){if(!nF())return;let{onGestureStartT:t}=this.props;this.baseX=e.touches[0].pageX,this.baseY=e.touches[0].pageY,this.baseX2=e.touches[1].pageX,this.baseY2=e.touches[1].pageY;let n=this.element.parentElement,r=n.getBoundingClientRect();this.scaleX=n.offsetWidth/Math.round(r.width),this.scaleY=n.offsetHeight/Math.round(r.height),this.baseDis=Math.sqrt(Math.pow(this.baseX-this.baseX2,2)+Math.pow(this.baseY-this.baseY2,2)),this.baseAng=Math.atan2(this.baseY2-this.baseY,this.baseX2-this.baseX),t(new aF(e,this,!0))&&(this.addGestureListeners(e),e.preventDefault())}cancel(){this.listening&&this.onDragEnd(),this.gesturing&&this.onGestureEnd()}removeListeners(){this.gesturing?(this.ownerDocument.removeEventListener("touchmove",this.onGestureMove),this.ownerDocument.removeEventListener("touchend",this.onGestureEnd)):this.listening&&("touch"===this.dragType?(this.ownerDocument.removeEventListener("touchmove",this.onTouchMove),this.ownerDocument.removeEventListener("touchend",this.onDragEnd)):(this.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.ownerDocument.removeEventListener("mouseup",this.onDragEnd))),this.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.listening=!1,this.gesturing=!1}cleanupDrag(e){this.dragType=null,this.waitingMove=!1}render(){let e=this.props,{getRef:n,children:r,className:i,directDragT:o,onDragStartT:a,onDragMoveT:s,onDragEndT:l,onDragOverT:c,onDragLeaveT:u,onDropT:h,onGestureStartT:d,onGestureMoveT:p,onGestureEndT:f,useRightButtonDragT:m}=e,g=sF(e,["getRef","children","className","directDragT","onDragStartT","onDragMoveT","onDragEndT","onDragOverT","onDragLeaveT","onDropT","onGestureStartT","onGestureMoveT","onGestureEndT","useRightButtonDragT"]),v=this.onPointerDown,b=this.onPointerDown;return a||(b=null,d||(v=null)),(a||d)&&(i=i?"".concat(i," drag-initiator"):"drag-initiator"),t.createElement("div",Object.assign({ref:this._getRef,className:i},g,{onMouseDown:b,onTouchStart:v}),r)}componentDidUpdate(e){let{onDragOverT:t,onDragEndT:n,onDragLeaveT:r}=this.props;!this.element||e.onDragOverT===t&&e.onDragLeaveT===r&&e.onDragEndT===n||(t?rF(this.element,this.props):iF(this.element))}componentWillUnmount(){let{onDragOverT:e}=this.props;this.element&&e&&iF(this.element),this.cancel()}}var cF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function uF(e){const{onDragStart:n,onDragMove:r,onDragEnd:i,TabNavList:o,isMaximized:a}=e,s=cF(e,["onDragStart","onDragMove","onDragEnd","TabNavList","isMaximized"]),l=t.useContext(HR),c=t.useRef();return t.createElement(lF,{onDragStartT:n,onDragMoveT:r,onDragEndT:i,role:"tablist",className:"dock-bar",onKeyDown:e=>{e.key.startsWith("Arrow")&&(function(e,t){if("ArrowLeft"===e||"ArrowRight"===e){let n=Array.from(t.querySelectorAll(".dock-tab-btn")),r=t.querySelector(".dock-tab-active>.dock-tab-btn"),i=n.indexOf(r);if(i>=0)if("ArrowLeft"===e){if(i>0)return n[i-1].click(),n[i-1].focus(),!0}else if(i<n.length-1)return n[i+1].click(),n[i+1].focus(),!0}return!1}(e.key,c.current)||a||l.navigateToPanel(c.current,e.key),e.stopPropagation(),e.preventDefault())},getRef:e=>{c.current=e},tabIndex:-1},t.createElement(o,Object.assign({},s)))}class hF extends t.PureComponent{constructor(){super(...arguments),this.getRef=e=>{this._ref=e}}updateCache(){const{cached:e,children:t,cacheId:n}=this.props;this._cache&&(e&&n===this._cache.id||(this.context.removeTabCache(this._cache.id,this),this._cache=null)),e&&this._ref&&(this._cache=this.context.getTabCache(n,this),this._ref.contains(this._cache.div)||this._ref.appendChild(this._cache.div),this.context.updateTabCache(this._cache.id,t))}render(){const{cacheId:e,cached:n,prefixCls:r,forceRender:i,className:o,style:a,id:s,active:l,animated:c,destroyInactiveTabPane:u,tabKey:h,children:d}=this.props;l?this.visited=!0:u&&(this.visited=!1);const p={};l||(c?(p.visibility="hidden",p.height=0,p.overflowY="hidden"):p.display="none");const f=!1===n?l:this.visited;let m=null;n?m=null:(f||i)&&(m=d);let g=n?this.getRef:null;return t.createElement("div",{ref:g,id:e,role:"tabpanel","aria-labelledby":s&&"".concat(s,"-tab-").concat(h),"aria-hidden":!l,style:Object.assign(Object.assign({},p),a),className:ik()("".concat(r,"-tabpane"),l&&"".concat(r,"-tabpane-active"),o)},(l||this.visited||i)&&m)}componentDidMount(){this.updateCache()}componentDidUpdate(e,t,n){this.updateCache()}componentWillUnmount(){this._cache&&this.context.removeTabCache(this._cache.id,this)}}hF.contextType=HR;let dF=new WeakMap;function pF(e){let t=dF.get(e);return t?pF(t):e}function fF(e,t){let n=Object.assign(Object.assign({},e),t);return Array.isArray(n.tabs)&&(n.tabs=n.tabs.concat()),Array.isArray(n.children)&&(n.children=n.children.concat()),dF.set(e,n),n}function mF(e,t){return null==e?t:Math.max(e,t)}function gF(e,t){return null==e||e===t?t:e>=1?t<=1?1:Math.min(e,t):t>=1?1:Math.max(e,t)}let vF=0;let bF=0;function yF(e){return e===bF?e:++bF}function xF(e,t,n){if(e.id===t&&n&_F.Panel)return e;if(n&_F.Tab)for(let r of e.tabs)if(r.id===t)return r}function wF(e,t,n){let r;if(n|_F.Box&&(null===e||void 0===e?void 0:e.id)===t)return e;if(null===e||void 0===e?void 0:e.children){for(let i of e.children)if("children"in i){if(r=wF(i,t,n))break}else if("tabs"in i&&(r=xF(i,t,n)))break;return r}}var _F;function SF(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_F.AnyTabPanel;return r&_F.Docked&&(n=wF(e.dockbox,t,r)),n||(r&_F.Floated&&(n=wF(e.floatbox,t,r)),n||(r&_F.Windowed&&(n=wF(e.windowbox,t,r)),n||(r&_F.Max&&(n=wF(e.maxbox,t,r)),n)))}function MF(e,t,n){let r,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(-1===o&&(o=n.tabs.length),"tabs"in t?(r=t.tabs,i=t.activeId):r=[t],r.length){let t=fF(n);t.tabs.splice(o,0,...r),t.activeId=r.at(-1).id;for(let e of r)e.parent=t;i&&(t.activeId=i),e=OF(e,n,t)}return e}function TF(e){if("tabs"in e)return e;{let t={tabs:[e],group:e.group,activeId:e.id};return e.parent=t,t}}function EF(e,t,n,r){let i=n.parent,o="left"===r||"right"===r?"horizontal":"vertical",a="bottom"===r||"right"===r;if(i){let r=i.children.indexOf(n);if(r>=0){let s=fF(i);if(o===i.mode)a&&++r,t.size=.3*n.size,n.size*=.7,s.children.splice(r,0,t);else{let e={mode:o,children:[]};e.size=n.size,e.children=a?[n,t]:[t,n],n.parent=e,n.size=280,t.parent=e,t.size=120,s.children[r]=e}return NF(e,i,s)}}else{if(n===e.dockbox){let r=fF(n);if(o===n.mode){let i=0;return a&&(i=r.children.length),t.size=.3*n.size,n.size*=.7,r.children.splice(i,0,t),NF(e,n,r)}{let i={mode:o,children:[]};return i.size=n.size,i.children=a?[r,t]:[t,r],r.size=280,t.size=120,NF(e,n,i)}}if(n===e.maxbox){let r=fF(n);return r.children.push(t),NF(e,n,r)}}return e}function CF(e,t,n){let r=fF(e.floatbox);return n&&(t.x=n.left,t.y=n.top,t.w=n.width,t.h=n.height),r.children.push(t),NF(e,e.floatbox,r)}function AF(e,t){if(t){let n;if("tabs"in t?(n=t,e=RF(e,n)):(n=t.parent,e=function(e,t){let n=t.parent;if(n){let r=n.tabs.indexOf(t);if(r>=0){let i=fF(n);return i.tabs.splice(r,1),i.activeId===t.id&&(i.tabs.length>r?i.activeId=i.tabs[r].id:i.tabs.length&&(i.activeId=i.tabs[0].id)),OF(e,n,i)}}return e}(e,t)),n&&n.parent&&"maximize"===n.parent.mode){let t=e.maxbox.children[0];if(!t||0===t.tabs.length&&!t.panelLock){let t=SF(e,GR);if(t)return RF(e,t)}}}return e}function RF(e,t){let n=t.parent;if(n){let r=n.children.indexOf(t);if(r>=0){let t=fF(n);return t.children.splice(r,1),NF(e,n,t)}}return e}function kF(e,t){return t?"tabs"in t?"maximize"===t.parent.mode?function(e,t){e=RF(e,t);let n=SF(e,GR);if(n){let{x:r,y:i,z:o,w:a,h:s}=n;return OF(e,n,t=Object.assign(Object.assign({},t),{x:r,y:i,z:o,w:a,h:s}))}return EF(e,t,e.dockbox,"right")}(e,t):function(e,t){let n=e.maxbox;if(n.children.length)return e;let r=Object.assign(Object.assign({},t),{id:GR,tabs:[],panelLock:{}});return e=OF(e,t,r),e=EF(e,t,e.maxbox,"middle"),e}(e,t):function(e){return e}(e):e}function PF(e,t,n){let r=!1;if(e&&e.floatbox&&t>200&&n>200){let i=e.floatbox.children.concat();for(let e=0;e<i.length;++e){let o=i[e],a={};o.w>0?o.w>t&&(a.w=t):a.w=Math.round(t/3),o.h>0?o.h>n&&(a.h=n):a.h=Math.round(n/3),"number"!==typeof o.y?a.y=n-(a.h||o.h)>>1:o.y>n-16?a.y=Math.max(n-16-(o.h>>1),0):o.y>=0||(a.y=0),"number"!==typeof o.x?a.x=t-(a.w||o.w)>>1:o.x+o.w<16?a.x=16-(o.w>>1):o.x>t-16&&(a.x=t-16-(o.w>>1)),Object.keys(a).length&&(i[e]=fF(o,a),r=!0)}if(r){let t=fF(e.floatbox);return t.children=i,NF(e,e.floatbox,t)}}return e}function LF(e,t,n){function r(e){if(null==e.id)e.id=(++vF,"+".concat(vF));else if(e.id.startsWith("+")){let t=Number(e.id);t>vF&&(vF=t)}e.size>=0||(e.size=200),e.minWidth=0,e.minHeight=0,e.widthFlex=null,e.heightFlex=null}function i(e){r(e);let i=!1;if(n)for(let t=0;t<e.tabs.length;++t)e.tabs[t]=n(e.tabs[t]);null==e.group&&e.tabs.length&&(e.group=e.tabs[0].group);let o=null===t||void 0===t?void 0:t[e.group];o&&(null!=o.widthFlex&&(e.widthFlex=o.widthFlex),null!=o.heightFlex&&(e.heightFlex=o.heightFlex));for(let t of e.tabs)t.parent=e,t.id===e.activeId&&(i=!0),t.minWidth>e.minWidth&&(e.minWidth=t.minWidth),t.minHeight>e.minHeight&&(e.minHeight=t.minHeight);!i&&e.tabs.length&&(e.activeId=e.tabs[0].id),e.minWidth<=0&&(e.minWidth=1),e.minHeight<=0&&(e.minHeight=1);let{panelLock:a}=e;return a&&(e.minWidth<a.minWidth&&(e.minWidth=a.minWidth),e.minHeight<a.minHeight&&(e.minHeight=a.minHeight),null!=e.panelLock.widthFlex&&(e.widthFlex=a.widthFlex),null!=e.panelLock.heightFlex&&(e.heightFlex=a.heightFlex)),e.z>bF&&(bF=e.z),e}function o(e){r(e);for(let t=0;t<e.children.length;++t){let n=e.children[t];if(n.parent=e,"children"in n){if(o(n),0===n.children.length)e.children.splice(t,1),--t;else if(1===n.children.length){let r=n.children[0];if(r.mode===e.mode){let i=0;for(let e of r.children)i+=e.size;let o=n.size/i;for(let e of r.children)e.size*=o;e.children.splice(t,1,...r.children)}else r.size=n.size,e.children[t]=r;--t}}else"tabs"in n&&(i(n),0===n.tabs.length&&(n.panelLock?n.group===UR&&(e.children.length>1||e.parent)&&(e.children.splice(t,1),--t):(e.children.splice(t,1),--t)));switch(e.mode){case"horizontal":n.minWidth>0&&(e.minWidth+=n.minWidth),n.minHeight>e.minHeight&&(e.minHeight=n.minHeight),null!=n.widthFlex&&(e.widthFlex=mF(e.widthFlex,n.widthFlex)),null!=n.heightFlex&&(e.heightFlex=gF(e.heightFlex,n.heightFlex));break;case"vertical":n.minWidth>e.minWidth&&(e.minWidth=n.minWidth),n.minHeight>0&&(e.minHeight+=n.minHeight),null!=n.heightFlex&&(e.heightFlex=mF(e.heightFlex,n.heightFlex)),null!=n.widthFlex&&(e.widthFlex=gF(e.widthFlex,n.widthFlex))}}if(e.children.length>1)switch(e.mode){case"horizontal":e.minWidth+=4*(e.children.length-1);break;case"vertical":e.minHeight+=4*(e.children.length-1)}return e}if(e.floatbox?e.floatbox.mode="float":e.floatbox={mode:"float",children:[],size:1},e.windowbox?e.windowbox.mode="window":e.windowbox={mode:"window",children:[],size:1},e.maxbox?e.maxbox.mode="maximize":e.maxbox={mode:"maximize",children:[],size:1},o(e.dockbox),o(e.floatbox),o(e.windowbox),o(e.maxbox),0===e.dockbox.children.length){let t={id:"+0",group:UR,panelLock:{},size:200,tabs:[]};t.parent=e.dockbox,e.dockbox.children.push(t)}else for(;1===e.dockbox.children.length&&"children"in e.dockbox.children[0];){let t=fF(e.dockbox.children[0]);e.dockbox=t;for(let e of t.children)e.parent=t}return e.dockbox.parent=null,e.floatbox.parent=null,e.windowbox.parent=null,e.maxbox.parent=null,dF=new WeakMap,e}function OF(e,t,n){for(let i of n.tabs)i.parent=n;let r=t.parent;if(r){let i=r.children.indexOf(t);if(i>=0){let t=fF(r);return t.children[i]=n,NF(e,r,t)}}return e}function NF(e,t,n){for(let i of n.children)i.parent=n;let r=t.parent;if(r){let i=r.children.indexOf(t);if(i>=0){let t=fF(r);return t.children[i]=n,NF(e,r,t)}}else{if(t.id===e.dockbox.id||t===e.dockbox)return Object.assign(Object.assign({},e),{dockbox:n});if(t.id===e.floatbox.id||t===e.floatbox)return Object.assign(Object.assign({},e),{floatbox:n});if(t.id===e.windowbox.id||t===e.windowbox)return Object.assign(Object.assign({},e),{windowbox:n});if(t.id===e.maxbox.id||t===e.maxbox)return Object.assign(Object.assign({},e),{maxbox:n})}return e}function IF(e,t){if(!e)return[300,300];let n=e.offsetWidth,r=e.offsetHeight,[i,o]=t.preferredFloatWidth||[100,600],[a,s]=t.preferredFloatHeight||[50,500];return n>=i?n<=o||(n=o):n=i,r>=a?r<=s||(r=s):r=a,[n,r]}function DF(e,t,n){let r=-1,i=-1,o=0;switch(n){case"ArrowUp":r=e.top-t.bottom+e.height,i=Math.min(e.right,t.right)-Math.max(e.left,t.left);break;case"ArrowDown":r=t.top-e.bottom+e.height,i=Math.min(e.right,t.right)-Math.max(e.left,t.left);break;case"ArrowLeft":r=e.left-t.right+e.width,i=Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top),o=Math.abs(e.top-t.top);break;case"ArrowRight":r=t.left-e.right+e.width,i=Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top),o=Math.abs(e.top-t.top)}return r<0||i<=0?-1:r*(o+1)-.001*i}!function(e){e[e.Tab=1]="Tab",e[e.Panel=2]="Panel",e[e.Box=4]="Box",e[e.Docked=8]="Docked",e[e.Floated=16]="Floated",e[e.Windowed=32]="Windowed",e[e.Max=64]="Max",e[e.EveryWhere=120]="EveryWhere",e[e.AnyTab=121]="AnyTab",e[e.AnyPanel=122]="AnyPanel",e[e.AnyTabPanel=123]="AnyTabPanel",e[e.All=127]="All"}(_F||(_F={}));var jF=n(3950),FF=n.n(jF),zF=n(5);const BF="object"===typeof window?n.n(zF)().getParser(window.navigator.userAgent):null;const UF="safari"===(null===BF||void 0===BF?void 0:BF.getBrowserName(!0)),GF="desktop"===(null===BF||void 0===BF?void 0:BF.getPlatformType()),VF=function(){switch(null===BF||void 0===BF?void 0:BF.getOSName(!0)){case"windows":{let e;switch(BF.getBrowserName(!0)){case"firefox":e=[68,8,8];break;case"microsoft edge":e=[62,8,8];break;default:e=[60,8,8]}return window.devicePixelRatio>1&&(e[0]-=2,e[1]-=1,e[2]-=1),e}case"macos":switch(BF.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}(),HF=FF()((()=>{let e=document.createElement("div");document.body.append(e),e.remove()}),200);class WF extends t.PureComponent{constructor(e){super(e),this.released=!1,this.container=document.createElement("div"),this.state={mounted:!1},this.onMainWindowUnload=()=>{this.window&&this.window.close()},this.release=e=>{if(!this.released&&(this.released=!0,this.windowCheckerInterval&&(clearInterval(this.windowCheckerInterval),this.windowCheckerInterval=null),window.removeEventListener("beforeunload",this.onMainWindowUnload),this.window.removeEventListener("beforeunload",this.release),e)){const{onClose:e}=this.props;"function"===typeof e&&e()}}}render(){return this.state.mounted?Lk.createPortal(this.props.children,this.container):null}componentDidMount(){this.openChild(),this.setState({mounted:!0})}openChild(){const{url:e,title:t,name:n,width:r,height:i,initPopupInnerRect:o,initPopupOuterRect:a,onBlock:s,onOpen:l,onClose:c}=this.props;let u={width:r,height:i};if(a){u=a();const[e,t,n]=VF;UF||(u.width-=2*t,u.height-=e+n)}else if(o){u=o();const[e,t]=VF;u.left-=t,u.top-=e,UF&&(u.height+=e)}else u.left=window.top.outerWidth/2+window.top.screenX-r/2,u.top=window.top.outerHeight/2+window.top.screenY-i/2;var h;this.window=window.open(e,n,(h=u,Object.keys(h).reduce(((e,t)=>{const n=h[t];return"boolean"===typeof n?e.push("".concat(t,"=").concat(n?"yes":"no")):e.push("".concat(t,"=").concat(n)),e}),[]).join(","))),this.window?(window.addEventListener("beforeunload",this.onMainWindowUnload),this.window.addEventListener("resize",HF),this.window.document.title=t||document.title,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout((()=>{return e=document,t=this.window.document,void Array.from(e.styleSheets).forEach((n=>{let r;if(n.href){const r=e.createElement("link");r.rel="stylesheet",r.href=n.href,t.head.appendChild(r)}else{try{r=n.cssRules}catch(i){}if(r){const r=e.createElement("style");Array.from(n.cssRules).forEach((t=>{const{cssText:n,type:i}=t;let o=n;[3,5].includes(i)&&(o=n.split("url(").map((e=>"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e)).join("url(")),r.appendChild(e.createTextNode(o))})),t.head.appendChild(r)}}}));var e,t}),0),"function"===typeof l&&l(this.window),e&&c&&(this.windowCheckerInterval=setInterval((()=>{this.window&&!this.window.closed||this.release(!0)}),50)),this.window.addEventListener("beforeunload",this.release)):"function"===typeof s?s():console.warn("A new window could not be opened. Maybe it was blocked.")}componentWillUnmount(){this.window&&(this.release(),this.window.close())}}WF.supported=GF,WF.defaultProps={url:"",name:"",width:640,height:480,copyStyles:!0};const $F=WF;class qF extends t.PureComponent{constructor(){super(...arguments),this.state={dropping:!1},this.onDragOver=e=>{let{panelElement:t,direction:n,depth:r,panelData:i}=this.props;this.setState({dropping:!0});for(let o=0;o<r;++o)t=t.parentElement;if(i.group===UR&&"float"!==n)this.context.setDropRect(t,"middle",this,e);else{let r=this.context.getDockId(),i=Wj.getData("panelSize",r);this.context.setDropRect(t,n,this,e,i)}e.accept("")},this.onDragLeave=e=>{this.setState({dropping:!1}),this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let t=this.context.getDockId(),n=Wj.getData("tab",t);if(n||(n=Wj.getData("panel",t)),n){let{panelData:e,direction:t,depth:r}=this.props,i=e;for(let n=0;n<r;++n)i=i.parent;this.context.dockMove(n,i,t)}}}render(){let{direction:e,depth:n}=this.props,{dropping:r}=this.state,i=["dock-drop-square"];return i.push("dock-drop-".concat(e)),n&&i.push("dock-drop-deep"),r&&i.push("dock-drop-square-dropping"),t.createElement(lF,{className:i.join(" "),onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop},t.createElement("div",{className:"dock-drop-square-box"}))}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}qF.contextType=HR;class XF extends t.PureComponent{static addDepthSquare(e,n,r,i,o){"horizontal"===n?(e.push(t.createElement(qF,{key:"top".concat(o),direction:"top",depth:o,panelData:r,panelElement:i})),e.push(t.createElement(qF,{key:"bottom".concat(o),direction:"bottom",depth:o,panelData:r,panelElement:i}))):(e.push(t.createElement(qF,{key:"left".concat(o),direction:"left",depth:o,panelData:r,panelElement:i})),e.push(t.createElement(qF,{key:"right".concat(o),direction:"right",depth:o,panelData:r,panelElement:i})))}render(){var e;let{panelData:n,panelElement:r,dropFromPanel:i}=this.props,o=this.context.getDockId(),a=[],s=Wj.getData("panel",o),l=this.context.getGroup(i.group);if(!1===l.floatable||s&&(s.panelLock||"float"===(null===(e=s.parent)||void 0===e?void 0:e.mode)||"singleTab"===l.floatable&&s.tabs.length>1)||a.push(t.createElement(qF,{key:"float",direction:"float",panelData:n,panelElement:r})),s!==n&&!l.disableDock){XF.addDepthSquare(a,"horizontal",n,r,0),XF.addDepthSquare(a,"vertical",n,r,0),(null===s||void 0===s?void 0:s.panelLock)||n.group!==i.group||n===i||a.push(t.createElement(qF,{key:"middle",direction:"middle",panelData:n,panelElement:r}));let e=n.parent;e&&e.children.length>1&&(XF.addDepthSquare(a,e.mode,n,r,1),e.parent&&XF.addDepthSquare(a,e.parent.mode,n,r,2))}return t.createElement("div",{className:"dock-drop-layer"},a)}}XF.contextType=HR;class YF extends t.PureComponent{constructor(){super(...arguments),this.getRef=e=>{this._ref=e},this.onDragOver=e=>{var t,n,r;let{panelData:i,panelElement:o,dropFromPanel:a}=this.props,s=this.context.getDockId(),l=Wj.getData("panel",s),c=this.context.getGroup(a.group);if(l&&"float"===(null===(t=l.parent)||void 0===t?void 0:t.mode))return;let{direction:u,mode:h,depth:d}=this.getDirection(e,c,l===i,null!==(r=null===(n=null===l||void 0===l?void 0:l.tabs)||void 0===n?void 0:n.length)&&void 0!==r?r:1);if(d=this.getActualDepth(d,h,u),!u||"float"===u&&a.panelLock)return void this.context.setDropRect(null,"remove",this);let p=o;for(let m=0;m<d;++m)p=p.parentElement;let f=Wj.getData("panelSize",s);this.context.setDropRect(p,u,this,e,f),e.accept("")},this.onDragLeave=e=>{this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{var t,n;let{panelData:r,dropFromPanel:i}=this.props,o=this.context.getDockId(),a=this.context.getGroup(i.group),s=Wj.getData("tab",o),l=Wj.getData("panel",o);if(s||(s=l),s){let{direction:i,mode:o,depth:c}=this.getDirection(e,a,l===r,null!==(n=null===(t=null===l||void 0===l?void 0:l.tabs)||void 0===t?void 0:t.length)&&void 0!==n?n:1);if(c=this.getActualDepth(c,o,i),!i)return;let u=r;for(let e=0;e<c;++e)u=u.parent;this.context.dockMove(s,u,i)}}}getDirection(e,t,n,r){let i=this._ref.getBoundingClientRect(),o=Math.min(i.width,500),a=Math.min(i.height,500),s=(e.clientX-i.left)/o,l=(i.right-e.clientX)/o,c=(e.clientY-i.top)/a,u=(i.bottom-e.clientY)/a,h=Math.min(s,l,c,u),d=0;if((t.disableDock||n)&&(h=1),h<0)return{direction:null,depth:0};if(h<.075)d=3;else if(h<.15)d=1;else if(h<.3);else if(t.floatable){if("singleTab"!==t.floatable)return{direction:"float",mode:"float",depth:0};if(1===r)return{direction:"float",mode:"float",depth:0}}switch(h){case s:return{direction:"left",mode:"horizontal",depth:d};case l:return{direction:"right",mode:"horizontal",depth:d};case c:return{direction:"top",mode:"vertical",depth:d};case u:return{direction:"bottom",mode:"vertical",depth:d}}return{direction:null,depth:0}}getActualDepth(e,t,n){let r="bottom"===n||"right"===n;if(!e)return e;let{panelData:i}=this.props,o=i,a=i.parent,s=0;for(i.parent.mode===t&&++e;a&&s<e;){if(a.mode===t)if(r){if(a.children.at(-1)!==o)break}else if(a.children[0]!==o)break;o=a,a=a.parent,++s}for(;e>s;)e-=2;return e}render(){return t.createElement(lF,{getRef:this.getRef,className:"dock-drop-edge",onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop})}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}YF.contextType=HR;class KF extends t.PureComponent{constructor(){super(...arguments),this.getRef=e=>{if(this._ref=e,e){let{parent:t}=this.props.panelData;"float"===(null===t||void 0===t?void 0:t.mode)&&e.addEventListener("pointerdown",this.onFloatPointerDown,{capture:!0,passive:!0})}},this.state={dropFromPanel:null,draggingHeader:!1},this.onDragOver=e=>{if(KF._droppingPanel===this)return;let t=this.context.getDockId(),n=Wj.getData("tab",t),r=Wj.getData("panel",t);(n||r)&&(KF.droppingPanel=this),n?n.parent?this.setState({dropFromPanel:n.parent}):this.setState({dropFromPanel:{activeId:"",tabs:[],group:n.group}}):r&&this.setState({dropFromPanel:r})},this.onPanelHeaderDragStart=e=>{let{panelData:t}=this.props,{parent:n,x:r,y:i,z:o}=t,a=this.context.getDockId();if("float"===(null===n||void 0===n?void 0:n.mode))this._movingX=r,this._movingY=i,e.setData({panel:t,tabGroup:t.group},a),e.startDrag(null,null),this.onFloatPointerDown();else{let n=this.context.getGroup(t.group),[r,i]=IF(this._ref,n);e.setData({panel:t,panelSize:[r,i],tabGroup:t.group},a),e.startDrag(null)}this.setState({draggingHeader:!0})},this.onPanelHeaderDragMove=e=>{var t;let{panelData:n}=this.props;if("float"!==(null===(t=n.parent)||void 0===t?void 0:t.mode))return;let{width:r,height:i}=this.context.getLayoutSize();n.x=this._movingX+e.dx,n.y=this._movingY+e.dy,r>200&&i>200&&(n.y<0?n.y=0:n.y>i-16&&(n.y=i-16),n.x+n.w<16?n.x=16-n.w:n.x>r-16&&(n.x=r-16)),this.forceUpdate()},this.onPanelHeaderDragEnd=e=>{var t;if(this.setState({draggingHeader:!1}),!1===e.dropped){let{panelData:e}=this.props;"float"===(null===(t=e.parent)||void 0===t?void 0:t.mode)&&this.context.onSilentChange(this.props.panelData.activeId,"move")}},this.onPanelCornerDragT=e=>{this.onPanelCornerDrag(e,"t")},this.onPanelCornerDragB=e=>{this.onPanelCornerDrag(e,"b")},this.onPanelCornerDragL=e=>{this.onPanelCornerDrag(e,"l")},this.onPanelCornerDragR=e=>{this.onPanelCornerDrag(e,"r")},this.onPanelCornerDragTL=e=>{this.onPanelCornerDrag(e,"tl")},this.onPanelCornerDragTR=e=>{this.onPanelCornerDrag(e,"tr")},this.onPanelCornerDragBL=e=>{this.onPanelCornerDrag(e,"bl")},this.onPanelCornerDragBR=e=>{this.onPanelCornerDrag(e,"br")},this.onPanelCornerDragMove=e=>{let{panelData:t}=this.props,{dx:n,dy:r}=e;if(this._movingCorner.startsWith("t")){let{width:e,height:t}=this.context.getLayoutSize();this._movingY+r<0?r=-this._movingY:this._movingY+r>t-16&&(r=t-16-this._movingY)}switch(this._movingCorner){case"t":t.y=this._movingY+r,t.h=this._movingH-r;break;case"b":t.h=this._movingH+r;break;case"l":t.x=this._movingX+n,t.w=this._movingW-n;break;case"r":t.w=this._movingW+n;break;case"tl":t.x=this._movingX+n,t.w=this._movingW-n,t.y=this._movingY+r,t.h=this._movingH-r;break;case"tr":t.w=this._movingW+n,t.y=this._movingY+r,t.h=this._movingH-r;break;case"bl":t.x=this._movingX+n,t.w=this._movingW-n,t.h=this._movingH+r;break;case"br":t.w=this._movingW+n,t.h=this._movingH+r}t.w=Math.max(t.w||0,t.minWidth||0),t.h=Math.max(t.h||0,t.minHeight||0),this.forceUpdate()},this.onPanelCornerDragEnd=e=>{this.context.onSilentChange(this.props.panelData.activeId,"move")},this.onFloatPointerDown=()=>{let{panelData:e}=this.props,{z:t}=e,n=yF(t);n!==t&&(e.z=n,this.forceUpdate())},this.onPanelClicked=e=>{const t=e.nativeEvent.target;!this._ref.contains(this._ref.ownerDocument.activeElement)&&t instanceof Node&&this._ref.contains(t)&&this._ref.querySelector(".dock-bar").focus()},this._unmounted=!1}static set droppingPanel(e){KF._droppingPanel!==e&&(KF._droppingPanel&&KF._droppingPanel.onDragOverOtherPanel(),KF._droppingPanel=e)}onDragOverOtherPanel(){this.setState({dropFromPanel:null})}onPanelCornerDrag(e,t){let{parent:n,x:r,y:i,w:o,h:a}=this.props.panelData;"float"===(null===n||void 0===n?void 0:n.mode)&&(this._movingCorner=t,this._movingX=r,this._movingY=i,this._movingW=o,this._movingH=a,e.startDrag(null,null))}render(){let{dropFromPanel:e,draggingHeader:n}=this.state,{panelData:r,size:i}=this.props,{minWidth:o,minHeight:a,group:s,id:l,parent:c,panelLock:u}=r,h=s,d=this.context.getGroup(s),{widthFlex:p,heightFlex:f}=d;if(u){let{panelStyle:e,widthFlex:t,heightFlex:n}=u;e&&(h=e),"number"===typeof t&&(p=t),"number"===typeof n&&(f=n)}let m=ik()(Hj(h)),g="maximize"===(null===c||void 0===c?void 0:c.mode),v="float"===(null===c||void 0===c?void 0:c.mode),b="horizontal"===(null===c||void 0===c?void 0:c.mode),y="vertical"===(null===c||void 0===c?void 0:c.mode),x=this.onPanelHeaderDragStart;g&&(e=null,x=null);let w="dock-panel ".concat(m||"").concat(e?" dock-panel-dropping":"").concat(n?" dragging":""),_=1;b&&null!=p?_=p:y&&null!=f&&(_=f);let S=1e6*_;S<1&&(S=1);let M,T={minWidth:o,minHeight:a,flex:"".concat(_*i," ").concat(S," ").concat(i,"px")};if(v&&(T.left=r.x,T.top=r.y,T.width=r.w,T.height=r.h,T.zIndex=r.z),e){let n=this.context.getGroup(e.group),i=this.context.getDockId();if(!n.tabLocked||null==Wj.getData("tab",i)){let n=this.context.useEdgeDrop()?YF:XF;M=t.createElement(n,{panelData:r,panelElement:this._ref,dropFromPanel:e})}}return t.createElement(lF,{getRef:this.getRef,className:w,style:T,"data-dockid":l,onDragOverT:v?null:this.onDragOver,onClick:this.onPanelClicked},t.createElement(nz,{panelData:r,onPanelDragStart:x,onPanelDragMove:this.onPanelHeaderDragMove,onPanelDragEnd:this.onPanelHeaderDragEnd}),v?[t.createElement(lF,{key:"drag-size-t",className:"dock-panel-drag-size dock-panel-drag-size-t",onDragStartT:this.onPanelCornerDragT,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-b",className:"dock-panel-drag-size dock-panel-drag-size-b",onDragStartT:this.onPanelCornerDragB,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-l",className:"dock-panel-drag-size dock-panel-drag-size-l",onDragStartT:this.onPanelCornerDragL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-r",className:"dock-panel-drag-size dock-panel-drag-size-r",onDragStartT:this.onPanelCornerDragR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-t-l",className:"dock-panel-drag-size dock-panel-drag-size-t-l",onDragStartT:this.onPanelCornerDragTL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-t-r",className:"dock-panel-drag-size dock-panel-drag-size-t-r",onDragStartT:this.onPanelCornerDragTR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-b-l",className:"dock-panel-drag-size dock-panel-drag-size-b-l",onDragStartT:this.onPanelCornerDragBL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),t.createElement(lF,{key:"drag-size-b-r",className:"dock-panel-drag-size dock-panel-drag-size-b-r",onDragStartT:this.onPanelCornerDragBR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd})]:null,M)}componentWillUnmount(){KF._droppingPanel===this&&(KF.droppingPanel=null),this._ref&&this._ref.removeEventListener("pointerdown",this.onFloatPointerDown,{capture:!0}),this._unmounted=!0}}KF.contextType=HR;var JF=n(8420);class QF extends t.PureComponent{constructor(){super(...arguments),this.onOpen=e=>{!this._window&&e&&(this._window=e)},this.onUnload=()=>{let{panelData:e}=this.props,t=this.context.getRootElement();const n=(0,JF.y)(t,this._window);n.width>0&&n.height>0&&(e.x=n.left,e.y=n.top,e.w=n.width,e.h=n.height),this.context.dockMove(e,null,"float")},this.initPopupInnerRect=()=>{let{panelData:e}=this.props;return(0,JF.OS)(this.context.getRootElement(),{left:e.x,top:e.y,width:e.w,height:e.h})}}render(){let{panelData:e}=this.props,{x:n,y:r,w:i,h:o}=e;return t.createElement($F,{copyStyles:!0,onOpen:this.onOpen,onClose:this.onUnload,onBlock:this.onUnload,initPopupInnerRect:this.initPopupInnerRect,width:i,height:o},t.createElement("div",{className:"dock-wbox"},t.createElement(KF,{size:e.size,panelData:e,key:e.id})))}}QF.contextType=HR;class ZF extends t.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(t.createElement(QF,{key:r.id,panelData:r}));return t.createElement(t.Fragment,null,n)}}function ez(e){var t,n,r;return null==e||"LI"===(null===(t=e.parentElement)||void 0===t?void 0:t.tagName)||"LI"===(null===(r=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.tagName)}ZF.enabled="object"===typeof window&&("Win32"===(null===window||void 0===window?void 0:window.navigator.platform)||"MacIntel"===(null===window||void 0===window?void 0:window.navigator.platform));class tz{constructor(e){this.getRef=e=>{ez(e)||(this._ref=e)},this.getHitAreaRef=e=>{ez(e)||(this._hitAreaRef=e)},this.onCloseClick=e=>{this.context.dockMove(this.data,null,"remove"),e.stopPropagation()},this.onDragStart=e=>{let t=this.data.parent;if("float"===t.parent.mode&&1===t.tabs.length)return;let n=function(e){for(let t=0;t<10;++t){if(!e)return null;if(e.classList.contains("dock-panel"))return e;e=e.parentElement}return null}(this._ref),r=this.context.getGroup(this.data.group),[i,o]=IF(n,r);e.setData({tab:this.data,panelSize:[i,o],tabGroup:this.data.group},this.context.getDockId()),e.startDrag(this._ref.parentElement,this._ref.parentElement)},this.onDragOver=e=>{var t,n;let r,i=this.context.getDockId(),o=Wj.getData("tab",i),a=Wj.getData("panel",i);if(o)a=o.parent,r=o.group;else{if(!a)return;if(null===a||void 0===a?void 0:a.panelLock)return void e.reject();r=a.group}let s=this.context.getGroup(r);if(r!==this.data.group)e.reject();else if("singleTab"===(null===s||void 0===s?void 0:s.floatable)&&"float"===(null===(n=null===(t=this.data.parent)||void 0===t?void 0:t.parent)||void 0===n?void 0:n.mode))e.reject();else if(o&&o!==this.data){let t=this.getDropDirection(e);this.context.setDropRect(this._hitAreaRef,t,this),e.accept("")}else if(a&&a!==this.data.parent){let t=this.getDropDirection(e);this.context.setDropRect(this._hitAreaRef,t,this),e.accept("")}},this.onDragLeave=e=>{this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let t,n=this.context.getDockId(),r=Wj.getData("tab",n);if(t=r?r.parent:Wj.getData("panel",n),r&&r!==this.data){let t=this.getDropDirection(e);this.context.dockMove(r,this.data,t)}else if(t&&t!==this.data.parent){let n=this.getDropDirection(e);this.context.dockMove(t,this.data,n)}},this.context=e}setData(e){return e!==this.data&&(this.data=e,this.content=this.render(),!0)}getDropDirection(e){let t=this._hitAreaRef.getBoundingClientRect(),n=t.left+.5*t.width;return e.clientX>n?"after-tab":"before-tab"}render(){let{id:e,title:n,content:r,closable:i,cached:o,parent:a}=this.data,{onDragStart:s,onDragOver:l,onDrop:c,onDragLeave:u}=this;"window"===a.parent.mode&&(s=null,l=null,c=null,u=null),"function"===typeof r&&(r=r(this.data));let h=t.createElement(lF,{getRef:this.getRef,onDragStartT:s,role:"tab","aria-selected":a.activeId===e,onDragOverT:l,onDropT:c,onDragLeaveT:u},n,i?t.createElement("div",{className:"dock-tab-close-btn",onClick:this.onCloseClick}):null,t.createElement("div",{className:"dock-tab-hit-area",ref:this.getHitAreaRef}));return t.createElement(hF,{key:e,cacheId:e,cached:o,tab:h},r)}destroy(){}}class nz extends t.PureComponent{constructor(){super(...arguments),this._cache=new Map,this.onMaximizeClick=e=>{let{panelData:t}=this.props;this.context.dockMove(t,null,"maximize"),e.stopPropagation()},this.onNewWindowClick=()=>{let{panelData:e}=this.props;this.context.dockMove(e,null,"new-window")},this.onCloseAll=()=>{let{panelData:e}=this.props;for(let t of e.tabs)this.context.dockMove(t,null,"remove")},this.renderTabBar=(e,n)=>{let{panelData:r,onPanelDragStart:i,onPanelDragMove:o,onPanelDragEnd:a}=this.props,{group:s,panelLock:l}=r,c=this.context.getGroup(s),{panelExtra:u}=c,h=c.maximizable;"window"===r.parent.mode&&(i=null,h=!1),l&&l.panelExtra&&(u=l.panelExtra);let d,p=c.newWindow&&ZF.enabled&&"float"===r.parent.mode;if(u)d=u(r,this.context);else if(h||p){let e=t.createElement("div",{className:"maximize"===r.parent.mode?"dock-panel-min-btn":"dock-panel-max-btn",onClick:h?this.onMaximizeClick:null});p&&(e=this.addNewWindowMenu(e,!h)),d="float"!==r.parent.mode||r.tabs.find((e=>!e.closable))?e:t.createElement(t.Fragment,null,e,t.createElement("div",{className:"dock-tab-close-btn",onClick:this.onCloseAll}))}return t.createElement(uF,Object.assign({onDragStart:i,onDragMove:o,onDragEnd:a,TabNavList:n,isMaximized:"maximize"===r.parent.mode},e,{extra:d}))},this.onTabChange=e=>{this.props.panelData.activeId=e,this.context.onSilentChange(e,"active"),this.forceUpdate()}}updateTabs(e){if(e===this.cachedTabs)return;this.cachedTabs=e;let t=new Map,n=0;for(let r of e){let{id:e}=r;if(this._cache.has(e)){let i=this._cache.get(e);t.set(e,i),i.setData(r),++n}else{let n=new tz(this.context);t.set(e,n),n.setData(r)}}if(n!==this._cache.size)for(let[r,i]of this._cache)t.has(r)||i.destroy();this._cache=t}addNewWindowMenu(e,n){const r=t.createElement(Vj,{onClick:this.onNewWindowClick},t.createElement(fj,null,"New Window"));let i=n?["contextMenu","click"]:["contextMenu"];return t.createElement(oD,{prefixCls:"dock-dropdown",overlay:r,trigger:i,mouseEnterDelay:.1,mouseLeaveDelay:.1},e)}render(){let{group:e,tabs:n,activeId:r}=this.props.panelData,i=this.context.getGroup(e),{animated:o,moreIcon:a}=i;null==o&&(o=!0),a||(a="..."),this.updateTabs(n);let s=[];for(let[t,l]of this._cache)s.push(l.content);return t.createElement(MD,{prefixCls:"dock",moreIcon:a,animated:o,renderTabBar:this.renderTabBar,activeKey:r,onChange:this.onTabChange,popupClassName:ik()(Hj(e))},s)}}nz.contextType=HR,nz.propKeys=["group","tabs","activeId","onTabChange"];class rz{constructor(e){this.beforeSize=0,this.beforeMinSize=0,this.afterSize=0,this.afterMinSize=0,this.element=e.element,this.beforeDivider=e.beforeDivider,this.afterDivider=e.afterDivider;for(let t of this.beforeDivider)this.beforeSize+=t.size,t.minSize>0&&(this.beforeMinSize+=t.minSize);for(let t of this.afterDivider)this.afterSize+=t.size,t.minSize>0&&(this.afterMinSize+=t.minSize)}}function iz(e,t,n){let r=-1,i=[],o=0;for(;o!==r;){r=o,o=0;let a=(e-r)/(t-r);if(!(a>=0))break;for(let e=0;e<n.length;++e){let t=n[e].size*a;t<n[e].minSize&&(t=n[e].minSize,o+=t),i[e]=t}}return i}class oz extends t.PureComponent{constructor(){super(...arguments),this.startDrag=e=>{this.boxData=new rz(this.props.getDividerData(this.props.idx)),e.startDrag(this.boxData.element,null)},this.dragMove=e=>{e.event.shiftKey||e.event.ctrlKey||e.event.altKey?this.dragMoveAll(e,e.dx,e.dy):this.dragMove2(e,e.dx,e.dy)},this.dragEnd=e=>{let{onDragEnd:t}=this.props;this.boxData=null,t&&t()}}dragMove2(e,t,n){let{isVertical:r,changeSizes:i}=this.props,{beforeDivider:o,afterDivider:a}=this.boxData;if(!o.length||!a.length)return;let s=r?n:t,l=o.at(-1),c=a[0],u=l.size+s,h=c.size-s;s>0?h<c.minSize&&(h=c.minSize,u=l.size+c.size-h):u<l.minSize&&(u=l.minSize,h=l.size+c.size-u);let d=o.concat(a).map((e=>e.size));d[o.length-1]=u,d[o.length]=h,i(d)}dragMoveAll(e,t,n){let{isVertical:r,changeSizes:i}=this.props,{beforeSize:o,beforeMinSize:a,afterSize:s,afterMinSize:l,beforeDivider:c,afterDivider:u}=this.boxData,h=r?n:t,d=o+h,p=s-h;h>0?p<l&&(p=l,d=o+s-l):d<a&&(d=a,p=o+s-a),i(iz(d,o,c).concat(iz(p,s,u)))}render(){let{className:e}=this.props;return e||(e="dock-divider"),t.createElement(lF,{className:e,onDragStartT:this.startDrag,onDragMoveT:this.dragMove,onDragEndT:this.dragEnd})}}class az extends t.PureComponent{constructor(){super(...arguments),this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(!this._ref)return null;let{children:t,mode:n}=this.props.boxData,r=this._ref.childNodes;if(r.length!==2*t.length-1)return;let i=[];for(let o=0;o<t.length;++o)"vertical"===n?i.push({size:r[2*o].offsetHeight,minSize:t[o].minHeight}):i.push({size:r[2*o].offsetWidth,minSize:t[o].minWidth});return{element:this._ref,beforeDivider:i.slice(0,e),afterDivider:i.slice(e)}},this.changeSizes=e=>{let{children:t}=this.props.boxData;if(t.length===e.length){for(let n=0;n<t.length;++n)t[n].size=e[n];this.forceUpdate()}},this.onDragEnd=()=>{this.context.onSilentChange(null,"move")}}render(){let e,{boxData:n}=this.props,{minWidth:r,minHeight:i,size:o,children:a,mode:s,id:l,widthFlex:c,heightFlex:u}=n,h="vertical"===s,d=[];for(let g=0;g<a.length;++g){g>0&&d.push(t.createElement(oz,{idx:g,key:g,isVertical:h,onDragEnd:this.onDragEnd,getDividerData:this.getDividerData,changeSizes:this.changeSizes}));let e=a[g];"tabs"in e?d.push(t.createElement(KF,{size:e.size,panelData:e,key:e.id})):"children"in e&&d.push(t.createElement(az,{size:e.size,boxData:e,key:e.id}))}let p=1;"vertical"===s?(e="dock-box dock-vbox",null!=c&&(p=c)):(e="dock-box dock-hbox",null!=u&&(p=u));let f=p*o,m=1e6*p;return m<1&&(m=1),t.createElement("div",{ref:this.getRef,className:e,"data-dockid":l,style:{minWidth:r,minHeight:i,flex:"".concat(f," ").concat(m," ").concat(o,"px")}},d)}}az.contextType=HR;class sz extends t.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(t.createElement(KF,{size:r.size,panelData:r,key:r.id}));return t.createElement("div",{className:"dock-box dock-fbox"},n)}}function lz(e,t){t.panels.set(e.id,e);for(let n of e.tabs)t.tabs.set(n.id,n)}function cz(e,t){for(let n of e.children)"tabs"in n?lz(n,t):"children"in n&&cz(n,t)}function uz(e,t,n){function r(e){let r=[];for(let n of e.tabs){let e=(i=n,t?t(i):{id:i.id});e&&r.push(e)}var i;let o,{id:a,size:s,activeId:l,group:c}=e;if("float"===e.parent.mode||"window"===e.parent.mode){let{x:t,y:n,z:i,w:u,h:h}=e;o={id:a,size:s,tabs:r,group:c,activeId:l,x:t,y:n,z:i,w:u,h:h}}else o={id:a,size:s,tabs:r,group:c,activeId:l};return n&&n(o,e),o}function i(e){let t=[];for(let s of e.children)"tabs"in s?t.push(r(s)):"children"in s&&t.push(i(s));let{id:n,size:o,mode:a}=e;return{id:n,size:o,mode:a,children:t}}return{dockbox:i(e.dockbox),floatbox:i(e.floatbox),windowbox:i(e.windowbox),maxbox:i(e.maxbox)}}function hz(e,t,n,r){var i,o,a;let s=function(e){let t={panels:new Map,tabs:new Map};return e&&("children"in e?cz(e,t):("dockbox"in e&&cz(e.dockbox,t),"floatbox"in e&&cz(e.floatbox,t))),t}(t);function l(e){if(n)return n(e);let{id:t}=e;return s.tabs.has(t)?s.tabs.get(t):null}function c(e){let t,{id:n,size:i,activeId:o,x:a,y:c,z:u,w:h,h:d,group:p}=e,f=[];for(let r of e.tabs){let e=l(r);e&&f.push(e)}return t=h||d||a||c||u?{id:n,size:i,activeId:o,group:p,x:a,y:c,z:u,w:h,h:d,tabs:f}:{id:n,size:i,activeId:o,group:p,tabs:f},e.id===GR?t.panelLock={}:r?r(e,t):s.panels.has(n)&&(t=Object.assign(Object.assign({},s.panels.get(n)),t)),t}function u(e){if(!e)return null;let t=[];for(let o of e.children)"tabs"in o?t.push(c(o)):"children"in o&&t.push(u(o));let{id:n,size:r,mode:i}=e;return{id:n,size:r,mode:i,children:t}}return{dockbox:u(e.dockbox),floatbox:u(null!==(i=e.floatbox)&&void 0!==i?i:{mode:"float",children:[],size:0}),windowbox:u(null!==(o=e.windowbox)&&void 0!==o?o:{mode:"window",children:[],size:0}),maxbox:u(null!==(a=e.maxbox)&&void 0!==a?a:{mode:"maximize",children:[],size:1})}}class dz extends t.PureComponent{render(){let e=this.props.boxData.children[0];if(e)return this.hidePanelData=Object.assign(Object.assign({},e),{id:"",tabs:[]}),t.createElement("div",{className:"dock-box dock-mbox dock-mbox-show"},t.createElement(KF,{size:100,panelData:e}));if(this.hidePanelData){let e=this.hidePanelData;return this.hidePanelData=null,t.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"},t.createElement(KF,{size:100,panelData:e}))}return t.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"})}}var pz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class fz extends t.PureComponent{constructor(){super(...arguments),this._caches=new Map,this._isMounted=!1,this.destroyRemovedPane=()=>{this._pendingDestroy=null;let e=!1;for(let[t,n]of this._caches)null==n.owner&&(this._caches.delete(t),e=!0);e&&this._isMounted&&this.forceUpdate()}}getTabCache(e,t){let n=this._caches.get(e);if(n)n.owner=t;else{let r=document.createElement("div");r.className="dock-pane-cache",n={div:r,id:e,owner:t},this._caches.set(e,n)}return n}removeTabCache(e,t){let n=this._caches.get(e);n&&n.owner===t&&(n.owner=null,this._pendingDestroy||(this._pendingDestroy=setTimeout(this.destroyRemovedPane,1)))}updateTabCache(e,t){let n=this._caches.get(e);n&&(n.portal=Lk.createPortal(t,n.div,n.id),this.forceUpdate())}}class mz extends fz{constructor(e){var t;super(e),this.getRef=e=>{this._ref=e},this.onDragStateChange=e=>{null==e&&(KF.droppingPanel=null,this.state.dropRect&&this.setState({dropRect:null}))},this._onWindowResize=FF()((()=>{let e=this.getLayout();if(this._ref){let t=PF(e,this._ref.offsetWidth,this._ref.offsetHeight);e!==t&&(t=LF(t,this.props.groups),this.changeLayout(t,null,"move"))}}),200);let n,{layout:r,defaultLayout:i,loadTab:o}=e;if(i)n=this.prepareInitData(e.defaultLayout);else if(!o)throw new Error("DockLayout.loadTab and DockLayout.defaultLayout should not both be undefined.");var a;this.state=r?{layout:mz.loadLayoutData(r,e),dropRect:null}:{layout:n,dropRect:null},a=this.onDragStateChange,oF.add(a),null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"resize",this._onWindowResize)}getRootElement(){return this._ref}prepareInitData(e){let t=Object.assign({},e);return LF(t,this.props.groups,this.props.loadTab),t}getDockId(){return this.props.dockId||this}getGroup(e){if(e){let{groups:t}=this.props;if(t&&e in t)return t[e];if(e===UR)return VR}return BR}dockMove(e,t,n,r){let i=this.getLayout();if("maximize"===n?(i=kF(i,e),this.panelToFocus=e.id):i="front"===n?function(e,t){if(t){let n,r=!1,i={};if("tabs"in t?n=t:(n=t.parent,n.activeId!==t.id&&(i.activeId=t.id,r=!0)),n&&n.parent&&"float"===n.parent.mode){let e=yF(n.z);e!==n.z&&(i.z=e,r=!0)}r&&(e=OF(e,n,fF(n,i)))}return e}(i,e):AF(i,e),t="string"===typeof t?this.find(t,_F.All):pF(t),"float"===n){let t=TF(e);t.z=yF(null),this.state.dropRect||r?i=CF(i,t,this.state.dropRect||r):(i=CF(i,t),this._ref&&(i=PF(i,this._ref.offsetWidth,this._ref.offsetHeight)))}else if("new-window"===n){i=function(e,t){let n=fF(e.windowbox);return n.children.push(t),NF(e,e.windowbox,n)}(i,TF(e))}else if(t)if("tabs"in t)if("middle"===n)i=MF(i,e,t);else{i=function(e,t,n,r){let i=n.parent,o="left"===r||"right"===r?"horizontal":"vertical",a="bottom"===r||"right"===r,s=i.children.indexOf(n);if(s>=0){let r=fF(i);if(o===i.mode)a&&++s,t.size=n.size,r.children.splice(s,0,t);else{let e={mode:o,children:[]};e.size=n.size,e.children=a?[n,t]:[t,n],n.parent=e,n.size=200,t.parent=e,t.size=200,r.children[s]=e,e.parent=r}return NF(e,i,r)}return e}(i,TF(e),t,n)}else if("children"in t){i=EF(i,TF(e),t,n)}else i=function(e,t,n,r){let i=n.parent.tabs.indexOf(n);return i>=0?("after-tab"===r&&++i,MF(e,t,n.parent,i)):e}(i,e,t,n);if(i!==this.getLayout()){i=LF(i,this.props.groups);const t=e.hasOwnProperty("tabs")?e.activeId:e.id;this.changeLayout(i,t,n)}this.onDragStateChange(!1)}find(e,t){return SF(this.getLayout(),e,t)}getLayoutSize(){return this._ref?{width:this._ref.offsetWidth,height:this._ref.offsetHeight}:{width:0,height:0}}updateTab(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var r;let i=this.find(e,_F.AnyTab);if(!i)return!1;let o=i.parent,a=o.tabs.indexOf(i);if(a>=0){let{loadTab:s}=this.props,l=this.getLayout();if(t){let e=o.activeId;!s||"content"in t&&"title"in t||(t=s(t)),l=AF(l,i),o=pF(o),l=MF(l,t,o,a),o=pF(o),n||(o.activeId=e,this.panelToFocus=o.id)}else n&&o.activeId!==e&&(l=OF(l,o,Object.assign(Object.assign({},o),{activeId:e})));return l=LF(l,this.props.groups),this.changeLayout(l,null!==(r=null===t||void 0===t?void 0:t.id)&&void 0!==r?r:e,"update"),!0}}navigateToPanel(e,t){if(!t)return e||(e=this._ref.querySelector(".dock-tab-active>.dock-tab-btn")),void e.focus();let n,r="ArrowUp"===t||"ArrowDown"===t?".dock>.dock-bar":".dock-box>.dock-panel",i=Array.from(this._ref.querySelectorAll(r)),o=i.find((t=>t.contains(e))),a=o.getBoundingClientRect(),s=[];for(let l of i)if(l!==o){let e=l.getBoundingClientRect(),n=DF(a,e,t);n>=0&&s.push({panel:l,rect:e,distance:n})}s.sort(((e,t)=>e.distance-t.distance));for(let l of s)if(n=l.panel.querySelector(".dock-tab-active>.dock-tab-btn"),n)break;n&&n.focus()}useEdgeDrop(){return"edge"===this.props.dropMode}setDropRect(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[300,300],{dropRect:o}=this.state;if(o){if("remove"===t)return void(o.source===n&&this.setState({dropRect:null}));if(o.element===e&&o.direction===t&&"float"!==t)return}if(!e)return void this.setState({dropRect:null});let a=this._ref.getBoundingClientRect(),s=this._ref.offsetWidth/a.width,l=this._ref.offsetHeight/a.height,c=e.getBoundingClientRect(),u=(c.left-a.left)*s,h=(c.top-a.top)*l,d=c.width*s,p=c.height*l,f=.5;switch(e.classList.contains("dock-box")&&(f=.3),t){case"float":{let e=(r.clientX-a.left)*s;h=(r.clientY-a.top)*l-15,d=i[0],p=i[1],u=e-(d>>1);break}case"right":u+=d*(1-f);case"left":d*=f;break;case"bottom":h+=p*(1-f);case"top":p*=f;break;case"after-tab":u+=d-15,d=30;break;case"before-tab":u-=15,d=30}this.setState({dropRect:{left:u,top:h,width:d,height:p,element:e,source:n,direction:t}})}render(){this.tempLayout=null;let e,n,{style:r,maximizeTo:i}=this.props,{layout:o,dropRect:a}=this.state;if(a){let{element:t,direction:n}=a,r=pz(a,["element","direction"]);e=Object.assign(Object.assign({},r),{display:"block"}),"float"===n&&(e.transition="none")}i?("string"===typeof i&&(i=document.getElementById(i)),n=Lk.createPortal(t.createElement(dz,{boxData:o.maxbox}),i)):n=t.createElement(dz,{boxData:o.maxbox});let s=[];for(let[t,l]of this._caches)l.portal&&s.push(l.portal);return t.createElement("div",{ref:this.getRef,className:"dock-layout",style:r},t.createElement(WR,{value:this},t.createElement(az,{size:1,boxData:o.dockbox}),t.createElement(sz,{boxData:o.floatbox}),t.createElement(ZF,{boxData:o.windowbox}),n,s),t.createElement("div",{className:"dock-drop-indicator",style:e}))}componentDidMount(){this._isMounted=!0}componentDidUpdate(e,t,n){var r;if(this.panelToFocus){let e=this._ref.querySelector('.dock-panel[data-dockid="'.concat(this.panelToFocus,'"]'));e&&!e.contains(this._ref.ownerDocument.activeElement)&&(null===(r=e.querySelector(".dock-bar"))||void 0===r||r.focus()),this.panelToFocus=null}}componentWillUnmount(){var e,t;null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"resize",this._onWindowResize),t=this.onDragStateChange,oF.delete(t),this._onWindowResize.cancel(),this._isMounted=!1}setLayout(e){this.tempLayout=e,this.setState({layout:e})}getLayout(){return this.tempLayout||this.state.layout}changeLayout(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{layout:o,onLayoutChange:a}=this.props;a&&(r=uz(e,this.props.saveTab,this.props.afterPanelSaved),e.loadedFrom=r,a(r,t,n),o&&this.forceUpdate()),o||i||this.setLayout(e)}onSilentChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,{onLayoutChange:n}=this.props;if(n){let n=this.getLayout();this.changeLayout(n,e,t,!0)}}saveLayout(){return uz(this.getLayout(),this.props.saveTab,this.props.afterPanelSaved)}loadLayout(e){this.setLayout(mz.loadLayoutData(e,this.props,this._ref.offsetWidth,this._ref.offsetHeight))}static loadLayoutData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,{defaultLayout:i,loadTab:o,afterPanelLoaded:a,groups:s}=t,l=hz(e,i,o,a);return l=PF(l,n,r),l=LF(l,s),l.loadedFrom=e,l}static getDerivedStateFromProps(e,t){let{layout:n}=e,{layout:r}=t;return n&&n!==r.loadedFrom?{layout:mz.loadLayoutData(n,e)}:null}}var gz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class vz extends t.PureComponent{constructor(){super(...arguments),this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(!this._ref)return null;let{children:t,mode:n}=this.props,r=this._ref.childNodes,i=1;if(Array.isArray(t)&&(i=t.length),r.length!==2*i-1)return;let o=[];for(let a=0;a<i;++a)"vertical"===n?o.push({size:r[2*a].offsetHeight}):o.push({size:r[2*a].offsetWidth});return{element:this._ref,beforeDivider:o.slice(0,e),afterDivider:o.slice(e)}},this.changeSizes=e=>{let{mode:t}=this.props,n=this._ref.childNodes;if(n.length===2*e.length-1){for(let r=0;r<e.length;++r)"vertical"===t?n[2*r].style.height="".concat(e[r],"px"):n[2*r].style.width="".concat(e[r],"px");this.forceUpdate()}}}render(){let e,n=this.props,{children:r,mode:i,className:o}=n,a=gz(n,["children","mode","className"]),s="vertical"===i,l=[];if(Array.isArray(r))for(let c=0;c<r.length;++c)c>0&&l.push(t.createElement(oz,{idx:c,key:c,isVertical:s,getDividerData:this.getDividerData,changeSizes:this.changeSizes})),l.push(r[c]);else l=r;return e="vertical"===i?"divider-box dock-vbox":"divider-box dock-hbox",o&&(e="".concat(e," ").concat(o)),t.createElement("div",Object.assign({ref:this.getRef,className:e},a),l)}}vz.contextType=HR;const bz=mz;function yz(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":hover")===e}function xz(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":focus")===e}const wz="0123456789";class _z extends t.Component{constructor(e){super(e),this._textInput=void 0,this._textInputStart=void 0,this._textInputEnd=void 0,this._time_bar_resize_observer=void 0,this._timeBarDiv=void 0,this.state={timeBarWidth:400,textValue:this.value().toFixed(this.getStep()),textStartValue:this.min().toFixed(this.getStep()),textEndValue:this.max().toFixed(this.getStep()),currValue:this.value(),currStart:this.min(),currEnd:this.max(),prevPropValue:this.value().toString(),dragStart:!1,dragValue:!1,dragEnd:!1,mouseXCoord:0},this.drag=this.drag.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this._textInput=(0,t.createRef)(),this._textInputStart=(0,t.createRef)(),this._textInputEnd=(0,t.createRef)(),this._timeBarDiv=(0,t.createRef)(),this.onTextInputChange=this.onTextInputChange.bind(this),this.onTextInputKeyDown=this.onTextInputKeyDown.bind(this),this.onTextInputStartChange=this.onTextInputStartChange.bind(this),this.onTextInputStartKeyDown=this.onTextInputStartKeyDown.bind(this),this.onTextInputEndChange=this.onTextInputEndChange.bind(this),this.onTextInputEndKeyDown=this.onTextInputEndKeyDown.bind(this)}renderBackground(){return(0,qn.jsx)("rect",{stroke:_z.defaultProps.stroke,fill:_z.defaultProps.fill,x:_z.defaultProps.x+"px",y:_z.defaultProps.y+"px",width:this.width()+"px",height:_z.defaultProps.height+"px"})}onClickSelectedInterval(e){const{currStart:t,currEnd:n}=this.state,r=this.max()-this.min(),i=t/r*this.width(),o=t+(e.nativeEvent.offsetX-(_z.defaultProps.x+i))/ry((n-t)/r*this.width(),0,this.width())*(n-t);this.props.onChange(o),this.setState({currValue:o,textValue:o.toFixed(this.getStep())})}renderSelectedInterval(){const{currStart:e,currEnd:t}=this.state,n=this.max()-this.min(),r=ry((t-e)/n*this.width(),0,this.width()),i=e/n*this.width();return(0,qn.jsx)("rect",{stroke:_z.defaultProps.stroke,fill:_z.defaultProps.intFill,fillOpacity:"50%",x:_z.defaultProps.x+i+"px",y:_z.defaultProps.y+"px",width:r+"px",height:_z.defaultProps.height+"px",onClick:this.onClickSelectedInterval.bind(this)})}renderValueInterval(){const{currStart:e,currValue:t,currEnd:n}=this.state,r=this.max()-this.min(),i=ry(t-e,0,n-e)/r*this.width(),o=e/r*this.width();return(0,qn.jsx)("rect",{stroke:_z.defaultProps.stroke,fill:_z.defaultProps.valFill,fillOpacity:"50%",x:_z.defaultProps.x+o+"px",y:_z.defaultProps.y+"px",width:i+"px",height:_z.defaultProps.height+"px",onClick:this.onClickSelectedInterval.bind(this)})}onTextInputChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];wz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textValue:n})}onTextInputKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.state.currStart,this.state.currEnd),n=this.props.onChange;this.setState({textValue:e.toString(),currValue:e},(()=>{n&&n(Number(e))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.currValue.toFixed(this.getStep())})}onTextInputStartChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];wz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textStartValue:n})}onTextInputStartKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.min(),this.state.currEnd),n=ry(this.state.currValue,e,this.state.currValue),r=this.props.onChange,i=this.props.onStartChange;e!==this.state.currStart?n!==this.state.currValue?this.setState({textStartValue:e.toString(),currStart:e,textValue:n.toString(),currValue:n},(()=>{r&&r(Number(n)),i&&i(Number(e))})):this.setState({textStartValue:e.toString(),currStart:e},(()=>{i&&i(Number(e))})):this.setState({textStartValue:e.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textStartValue:this.state.currStart.toFixed(this.getStep())})}onTextInputEndChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];wz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textEndValue:n})}onTextInputEndKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.state.currStart,this.max()),n=ry(this.state.currValue,this.state.currValue,e),r=this.props.onChange,i=this.props.onEndChange;e!==this.state.currEnd?n!==this.state.currValue?this.setState({textEndValue:e.toString(),currEnd:e,textValue:n.toString(),currValue:n},(()=>{r&&r(Number(n)),i&&i(Number(e))})):this.setState({textEndValue:e.toString(),currEnd:e},(()=>{i&&i(Number(e))})):this.setState({textEndValue:e.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textEndValue:this.state.currEnd.toFixed(this.getStep())})}attachDragEndListener(){window.addEventListener("mouseup",this.handleDragEnd,!0)}detachDragEndListener(){window.removeEventListener("mouseup",this.handleDragEnd,!0)}handleDragEnd(){this.setState({dragStart:!1,dragEnd:!1,dragValue:!1}),this.detachDragEndListener()}drag(e){const{currStart:t,currValue:n,currEnd:r,mouseXCoord:i}=this.state,o=this.max()-this.min(),a=(e.pageX-i)/this.width()*o;if(this.state.dragStart){const i=ry(a+t,this.min(),r),o=ry(n,i,n);i!==t&&(o!==n?(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onStartChange(i)):(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onStartChange(i)))}else if(this.state.dragValue){const i=ry(a+n,t,r);i!==n&&(this.setState({currValue:i,textValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onChange(i))}else if(this.state.dragEnd){const i=ry(a+r,t,this.max()),o=ry(n,n,i);i!==r&&(o!==n?(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onEndChange(i)):(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onEndChange(i)))}}dragfromotherplace(e){const{currStart:t,currValue:n,currEnd:r,mouseXCoord:i}=this.state,o=this.max()-this.min(),a=(e-i)/this.width()*o;if(this.state.dragStart){const i=ry(a+t,this.min(),r),o=ry(n,i,n);i!==t&&(o!==n?(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onStartChange(i)):(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e}),this.props.onStartChange(i)))}else if(this.state.dragValue){const i=ry(a+n,t,r);i!==n&&(this.setState({currValue:i,textValue:i.toFixed(this.getStep()),mouseXCoord:e}),this.props.onChange(i))}else if(this.state.dragEnd){const i=ry(a+r,t,this.max()),o=ry(n,n,i);i!==r&&(o!==n?(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onEndChange(i)):(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e}),this.props.onEndChange(i)))}}componentDidMount(){this._time_bar_resize_observer=new ResizeObserver((e=>{this.setState({timeBarWidth:e[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}componentWillUnmount(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}componentDidUpdate(e,t){if(!yz(this._textInput.current)&&!xz(this._textInput.current)&&!yz(this._textInputStart.current)&&!xz(this._textInputStart.current)&&!yz(this._textInputEnd.current)&&!xz(this._textInputEnd.current)&&!yz(this._timeBarDiv.current)&&!xz(this._timeBarDiv.current))if(this.value().toString()!==this.state.prevPropValue){let e=this.value();this.setState({textValue:e.toFixed(this.getStep()),currValue:e,prevPropValue:e.toString()})}else this.props.currEndTime&&this.state.currEnd!==this.props.currEndTime?this.setState({textEndValue:this.props.currEndTime.toFixed(this.getStep()),currEnd:this.props.currEndTime}):this.props.currStartTime&&this.state.currStart!==this.props.currStartTime&&this.setState({textStartValue:this.props.currStartTime.toFixed(this.getStep()),currStart:this.props.currStartTime});const{event_x:n}=this.props;e.event_x!==n&&void 0!==n&&this.dragfromotherplace(n)}renderStartBar(){let e=this.getCurrLoc().start+4.5+"px",t=_z.defaultProps.drag_bar_y+"px",n=_z.defaultProps.drag_bar_height,r=3*n/8,i="".concat(r,",").concat(n," 0,").concat(n/2," ").concat(r,",0");return(0,qn.jsx)("svg",{x:e,y:t,width:n+"px",height:n+"px",viewBox:"0 0 ".concat(n," ").concat(n),xmlns:"http://www.w3.org/2000/svg",onMouseDown:e=>{this.setState({dragStart:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()},children:(0,qn.jsx)("polygon",{points:i,fill:"#999"})})}renderEndBar(){let e=this.getCurrLoc().end+_z.defaultProps.x+"px",t=_z.defaultProps.drag_bar_y+"px",n=_z.defaultProps.drag_bar_height,r=3*n/8,i="0,".concat(n," ").concat(r,",").concat(n/2," 0,0");return(0,qn.jsx)("svg",{x:e,y:t,width:n+"px",height:n+"px",viewBox:"0 0 ".concat(n," ").concat(n),xmlns:"http://www.w3.org/2000/svg",onMouseDown:e=>{this.setState({dragEnd:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()},children:(0,qn.jsx)("polygon",{points:i,fill:"#999"})})}renderCurrBar(){const e=this.getCurrLoc();let t=_z.defaultProps.drag_bar_height,n=t/2,r="0,0 ".concat(t/2,",").concat(n," ").concat(t,",0"),i=e.val+_z.defaultProps.x-t/2+"px",o=_z.defaultProps.drag_bar_y-n/2+"px";return(0,qn.jsx)("svg",{x:i,y:o,width:t+"px",height:t+"px",viewBox:"0 0 ".concat(t," ").concat(t),xmlns:"http://www.w3.org/2000/svg",onMouseDown:e=>{this.setState({dragValue:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()},children:(0,qn.jsx)("polygon",{points:r,fill:"#555"})})}render(){this.getCurrLoc();return(0,qn.jsxs)("div",{className:"TimeBar",children:[(0,qn.jsxs)("div",{className:"inputDiv",children:[(0,qn.jsx)("input",{type:"text",value:this.state.textStartValue,onKeyDown:this.onTextInputStartKeyDown,onChange:this.onTextInputStartChange,ref:this._textInputStart}),(0,qn.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput})]}),(0,qn.jsx)("div",{ref:this._timeBarDiv,className:"timeBarDiv",style:{height:"".concat(30,"px")},children:(0,qn.jsxs)("svg",{width:"".concat(this.state.timeBarWidth,"px"),height:"".concat(this.props.height,"px"),children:[this.renderBackground(),this.renderSelectedInterval(),this.renderValueInterval(),this.renderStartBar(),this.renderEndBar(),this.renderCurrBar()]})}),(0,qn.jsx)("div",{className:"inputDiv",children:(0,qn.jsx)("input",{type:"text",value:this.state.textEndValue,onKeyDown:this.onTextInputEndKeyDown,onChange:this.onTextInputEndChange,ref:this._textInputEnd})})]})}min(){var e;return null!==(e=this.props.absStartTime)&&void 0!==e?e:0}max(){var e;return Math.max(this.min(),null!==(e=this.props.absEndTime)&&void 0!==e?e:1)}width(){var e;return(null!==(e=this.state.timeBarWidth)&&void 0!==e?e:_z.defaultProps.width)-20}value(){let e=this.props.currTime;return this.state&&this.state.currStart&&this.state.currEnd?ry(void 0===e?this.state.currStart:e,this.state.currStart,this.state.currEnd):ry(void 0===e?this.min():e,this.min(),this.max())}step(){return this.props.step}getCurrLoc(){const{currStart:e,currEnd:t,currValue:n}=this.state,r=this.max()-this.min(),i=t/r*this.width();return{start:e/r*this.width(),end:i,val:n/r*this.width()}}getStep(){var e;const t=(null!==(e=this.props.step)&&void 0!==e?e:_z.defaultProps.step).toString();let n=0,r=!1;for(let i=0;i<t.length;i++){"."===t[i]?r=!0:r&&n++}return n}}_z.defaultProps={drag_bar_height:20,drag_bar_y:5,height:5,width:700,x:10,y:12,fill:"#fff",stroke:"#666",intFill:"#808080",valFill:"#f88",step:.001};const Sz="0123456789",Mz=VA;class Tz extends t.Component{constructor(e){super(e),this._textInput=void 0,this._textInputStart=void 0,this._textInputEnd=void 0,this._time_bar_resize_observer=void 0,this._timeBarDiv=void 0,this.state={timeBarWidth:400,textValue:this.value().toFixed(this.getStep()),textStartValue:this.min().toFixed(this.getStep()),textEndValue:this.max().toFixed(this.getStep()),currValue:this.value(),currStart:this.min(),currEnd:this.max(),prevPropValue:this.value().toString(),dragStart:!1,dragValue:!1,dragEnd:!1,mouseXCoord:0},this.drag=this.drag.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this._textInput=(0,t.createRef)(),this._textInputStart=(0,t.createRef)(),this._textInputEnd=(0,t.createRef)(),this._timeBarDiv=(0,t.createRef)(),this.onTextInputChange=this.onTextInputChange.bind(this),this.onTextInputKeyDown=this.onTextInputKeyDown.bind(this),this.onTextInputStartChange=this.onTextInputStartChange.bind(this),this.onTextInputStartKeyDown=this.onTextInputStartKeyDown.bind(this),this.onTextInputEndChange=this.onTextInputEndChange.bind(this),this.onTextInputEndKeyDown=this.onTextInputEndKeyDown.bind(this)}renderBackground(){const{color_level:e}=this.props;if(!e||e.length<=1)return(0,qn.jsx)("rect",{stroke:Tz.defaultProps.stroke,fill:Tz.defaultProps.fill,x:Tz.defaultProps.x+"px",y:Tz.defaultProps.y+"px",width:this.width()+"px",height:Tz.defaultProps.height+"px"});let t=this.width()/(this.max()-this.min()),n=e[1][0],r=e[1][0];for(const a of e[1])a>n&&(n=a),a<r&&(r=a);let i=[];if(e[0][0]>this.min()){let n=t*(e[0][0]-this.min()),r=Tz.defaultProps.x;i.push((0,qn.jsx)("rect",{stroke:"#fff",fill:"#fff",x:r+"px",y:Tz.defaultProps.y+"px",width:n+"px",height:Tz.defaultProps.height+"px"}))}let o="#fff";for(let a=0;a<e[0].length;a++){let s=e[1][a]>=0?this.interpolateColor(n,e[1][a],Tz.defaultProps.colorSpectrum[2]):this.interpolateColor(-r,-e[1][a],Tz.defaultProps.colorSpectrum[0]),l=a<e[0].length-1?t*(e[0][a+1]-e[0][a]):t*(this.max()-e[0][a]),c=t*(e[0][a]-this.min())+Tz.defaultProps.x;i.push((0,qn.jsxs)("svg",{children:[(0,qn.jsxs)("linearGradient",{id:"gradient".concat(a),x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,qn.jsx)("stop",{offset:"0%",stopColor:o}),(0,qn.jsx)("stop",{offset:"100%",stopColor:s})]}),(0,qn.jsx)("rect",{stroke:"url(#gradient".concat(a,")"),fill:"url(#gradient".concat(a,")"),x:c+"px",y:Tz.defaultProps.y+.5+"px",width:l+"px",height:Tz.defaultProps.height-1+"px"},"coloredTimeBar"+a)]})),o=s}return i}scaleColorEntry(e,t){if(0===t)return Tz.defaultProps.colorSpectrum[1];let n=(230-Math.round(t/e*230)).toString(16);n=1===n.length?"0"+n:n;let r=Tz.defaultProps.colorSpectrum[t<0?0:1];return t>0?r.substring(0,3)+n+n:r.substring(0,1)+n+n+r.substring(5)}interpolateColor(e,t,n){return UA().domain([0,e]).range(["white",n])(t)}renderSelectedInterval(){const{currStart:e,currEnd:t}=this.state,n=this.max()-this.min(),r=ry((t-e)/n*this.width(),0,this.width()),i=e/n*this.width();return(0,qn.jsx)("rect",{stroke:Tz.defaultProps.stroke,fill:Tz.defaultProps.intFill,fillOpacity:"30%",x:Tz.defaultProps.x+i+"px",y:Tz.defaultProps.y+"px",width:r+"px",height:Tz.defaultProps.height+"px"})}renderValueInterval(){const{currStart:e,currValue:t,currEnd:n}=this.state,r=this.max()-this.min(),i=ry(t-e,0,n-e)/r*this.width(),o=e/r*this.width();return(0,qn.jsx)("rect",{stroke:Tz.defaultProps.stroke,fill:Tz.defaultProps.valFill,fillOpacity:"20%",x:Tz.defaultProps.x+o+"px",y:Tz.defaultProps.y+"px",width:i+"px",height:Tz.defaultProps.height+"px"})}onTextInputChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];Sz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textValue:n})}onTextInputKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.state.currStart,this.state.currEnd),n=this.props.onChange;this.setState({textValue:e.toString(),currValue:e},(()=>{n&&n(Number(e))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.currValue.toFixed(this.getStep())})}onTextInputStartChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];Sz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textStartValue:n})}onTextInputStartKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.min(),this.state.currEnd),n=ry(this.state.currValue,e,this.state.currValue),r=this.props.onChange,i=this.props.onStartChange;e!==this.state.currStart?n!==this.state.currValue?this.setState({textStartValue:e.toString(),currStart:e,textValue:n.toString(),currValue:n},(()=>{r&&r(Number(n)),i&&i(Number(e))})):this.setState({textStartValue:e.toString(),currStart:e},(()=>{i&&i(Number(e))})):this.setState({textStartValue:e.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textStartValue:this.state.currStart.toFixed(this.getStep())})}onTextInputEndChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];Sz.includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textEndValue:n})}onTextInputEndKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.state.currStart,this.max()),n=ry(this.state.currValue,this.state.currValue,e),r=this.props.onChange,i=this.props.onEndChange;e!==this.state.currEnd?n!==this.state.currValue?this.setState({textEndValue:e.toString(),currEnd:e,textValue:n.toString(),currValue:n},(()=>{r&&r(Number(n)),i&&i(Number(e))})):this.setState({textEndValue:e.toString(),currEnd:e},(()=>{i&&i(Number(e))})):this.setState({textEndValue:e.toString()})}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textEndValue:this.state.currEnd.toFixed(this.getStep())})}attachDragEndListener(){window.addEventListener("mouseup",this.handleDragEnd,!0)}detachDragEndListener(){window.removeEventListener("mouseup",this.handleDragEnd,!0)}handleDragEnd(){this.setState({dragStart:!1,dragEnd:!1,dragValue:!1}),this.detachDragEndListener()}drag(e){const{currStart:t,currValue:n,currEnd:r,mouseXCoord:i}=this.state,o=this.max()-this.min(),a=(e.pageX-i)/this.width()*o;if(this.state.dragStart){const i=ry(a+t,this.min(),r),o=ry(n,i,n);i!==t&&(o!==n?(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onStartChange(i)):(this.setState({currStart:i,textStartValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onStartChange(i)))}else if(this.state.dragValue){const i=ry(a+n,t,r);i!==n&&(this.setState({currValue:i,textValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onChange(i))}else if(this.state.dragEnd){const i=ry(a+r,t,this.max()),o=ry(n,n,i);i!==r&&(o!==n?(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX,currValue:o,textValue:o.toFixed(this.getStep())}),this.props.onChange(o),this.props.onEndChange(i)):(this.setState({currEnd:i,textEndValue:i.toFixed(this.getStep()),mouseXCoord:e.pageX}),this.props.onEndChange(i)))}}componentDidMount(){this._time_bar_resize_observer=new ResizeObserver((e=>{this.setState({timeBarWidth:e[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}componentWillUnmount(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}componentDidUpdate(e,t){if(function(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":hover")===e}(this._textInput.current)||function(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":focus")===e}(this._textInput.current)||this.value().toString()===this.state.prevPropValue)this.props.end&&this.state.currEnd!==this.props.end?this.setState({textEndValue:this.props.end.toFixed(this.getStep()),currEnd:this.props.end}):this.props.start&&this.state.currStart!==this.props.start&&this.setState({textEndValue:this.props.start.toFixed(this.getStep()),currStart:this.props.start});else{let e=this.value();this.setState({textValue:e.toFixed(this.getStep()),currValue:e,prevPropValue:e.toString()})}}render(){const e=this.getCurrLoc();return(0,qn.jsxs)("div",{className:"ColoredTimeBar",children:[(0,qn.jsxs)("div",{className:"inputDiv",children:[(0,qn.jsx)("input",{type:"text",value:this.state.textStartValue,onKeyDown:this.onTextInputStartKeyDown,onChange:this.onTextInputStartChange,ref:this._textInputStart}),(0,qn.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput})]}),(0,qn.jsx)("div",{ref:this._timeBarDiv,className:"timeBarDiv",children:(0,qn.jsxs)("svg",{width:this.state.timeBarWidth,onMouseMove:this.drag,children:[this.renderBackground(),this.renderSelectedInterval(),this.renderValueInterval(),(0,qn.jsx)("rect",{fill:"#999",x:e.start+4.5+"px",y:Tz.defaultProps.drag_bar_y+"px",width:"6px",height:Tz.defaultProps.drag_bar_height+"px",onMouseDown:e=>{this.setState({dragStart:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()}}),(0,qn.jsx)("rect",{fill:"#999",x:e.end+Tz.defaultProps.x+"px",y:Tz.defaultProps.drag_bar_y+"px",width:"6px",height:Tz.defaultProps.drag_bar_height+"px",onMouseDown:e=>{this.setState({dragEnd:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()}}),(0,qn.jsx)("rect",{fill:"#555",x:e.val+Tz.defaultProps.x+"px",y:Tz.defaultProps.drag_bar_y+"px",width:"4px",height:Tz.defaultProps.drag_bar_height+"px",onMouseDown:e=>{this.setState({dragValue:!0,mouseXCoord:e.pageX}),this.attachDragEndListener()}})]})}),(0,qn.jsx)("div",{className:"inputDiv",children:(0,qn.jsx)("input",{type:"text",value:this.state.textEndValue,onKeyDown:this.onTextInputEndKeyDown,onChange:this.onTextInputEndChange,ref:this._textInputEnd})})]})}min(){var e;return null!==(e=this.props.absStart)&&void 0!==e?e:0}max(){var e;return Math.max(this.min(),null!==(e=this.props.absEnd)&&void 0!==e?e:1)}width(){var e;return null!==(e=.97*this.state.timeBarWidth)&&void 0!==e?e:Tz.defaultProps.width}value(){let e=this.props.value;return this.state&&this.state.currStart&&this.state.currEnd?ry(void 0===e?this.state.currStart:e,this.state.currStart,this.state.currEnd):ry(void 0===e?this.min():e,this.min(),this.max())}step(){return this.props.step}getCurrLoc(){const{currStart:e,currEnd:t,currValue:n}=this.state,r=this.max()-this.min(),i=t/r*this.width();return{start:e/r*this.width(),end:i,val:n/r*this.width()}}getStep(){var e;const t=(null!==(e=this.props.step)&&void 0!==e?e:Tz.defaultProps.step).toString();let n=0,r=!1;for(let i=0;i<t.length;i++){"."===t[i]?r=!0:r&&n++}return n}}Tz.defaultProps={drag_bar_height:20,drag_bar_y:5,height:5,width:700,x:10,y:12,gap:1,fill:"#ffffff",stroke:"#444444",intFill:"#808080",valFill:"#555555",leaveTimeOut:1e3,label:"",min:0,step:.001,max:1,value:0,colorSpectrum:[Mz[1],"#ffffff",Mz[0]]};class Ez extends t.Component{constructor(e){super(e),this._timeBarDiv=void 0,this._time_bar_resize_observer=void 0,this._timeBarDiv=t.createRef(),this.state={timeBarWidth:400}}componentDidMount(){this._time_bar_resize_observer=new ResizeObserver((e=>{this.setState({timeBarWidth:e[0].contentRect.width})})),this._timeBarDiv&&this._timeBarDiv.current&&this._time_bar_resize_observer.observe(this._timeBarDiv.current)}componentWillUnmount(){this._time_bar_resize_observer&&this._time_bar_resize_observer.disconnect()}render(){var e;const t=null!==(e=this.props.step)&&void 0!==e?e:.001,n=this.state.timeBarWidth,r=30;let i,a,s,l,c,u,h,d,p,f,m,g=this.props.timeWarp,v=this.props.timeWarpMap,b=this.props.untimeWarp;if("onBaseCurrStartTimeChange"in this.props.info){let e=this.props.info;i=e.absStartTime,a=e.currStartTime,s=e.currTime,l=e.currEndTime,c=e.absEndTime,u=e.onBaseCurrStartTimeChange,h=e.onBaseCurrTimeChange,d=e.onBaseCurrEndTimeChange,p=e.onTargetCurrStartTimeChange,f=e.onTargetCurrTimeChange,m=e.onTargetCurrEndTimeChange}else{let e=this.props.info;[i,a,s,l,c]=e.timeRange(),u=t=>{e.setCurrStartTime(t)},h=t=>{e.setCurrTime(t)},d=t=>{e.setCurrEndTime(t)},p=t=>{e.setCurrStartTime(b(t))},f=t=>{e.setCurrTime(b(t))},m=t=>{e.setCurrEndTime(b(t))}}const y=[],x=Math.abs(c-i),[w,_]=v;o()(w.length===_.length);const S=w.length,M=Math.max(Math.floor(S/(n/16)),1);let T=!1,E=e=>{let t=ry(w[e],0,x),r=ry(_[e],0,x);const i=Kb(0,n,t/x),o=Kb(0,n,r/x);y.push((0,qn.jsx)("line",{stroke:"#B18FCF",x1:"".concat(i,"px"),y1:"".concat(0,"px"),x2:"".concat(o,"px"),y2:"".concat(30,"px")},"".concat(i," ").concat(0," ").concat(o," ").concat(30)))};for(let o=0;o<S;o+=M)E(o),o===S-1&&(T=!0);!T&&S>0&&E(S-1);let C="",A=this.props.timeWarpTargetName.split(" ");for(const o of A){if("Time"===o)break;C+=o+" "}return(0,qn.jsxs)("div",{className:"DoubleTimeBar",children:[(0,qn.jsxs)("div",{className:"topTimeBar",children:[(0,qn.jsxs)("div",{children:["Base:"," ".concat(this.props.timeWarpBaseName)]}),(0,qn.jsx)(_z,{absStartTime:i,currStartTime:a,currTime:s,currEndTime:l,absEndTime:c,step:t,width:n,onStartChange:u,onChange:h,onEndChange:d,event_x:this.props.event_x})]}),(0,qn.jsxs)("div",{className:"middleSVG",style:{height:"".concat(r,"px")},children:[(0,qn.jsxs)("div",{className:"inputDiv",style:{height:"".concat(r,"px")},children:[(0,qn.jsx)("input",{type:"text",style:{visibility:"hidden"}}),(0,qn.jsx)("input",{type:"text",style:{visibility:"hidden"}})]}),(0,qn.jsx)("div",{className:"svgDiv",ref:this._timeBarDiv,style:{height:"".concat(r,"px"),paddingLeft:"10px",paddingRight:"10px"},children:(0,qn.jsxs)("svg",{width:n,height:"".concat(r,"px"),style:{height:"".concat(r,"px"),width:"".concat(this.state.timeBarWidth,"px")},children:[(0,qn.jsx)("rect",{fill:"rgb(23, 24, 25)",x:0,y:0,width:"".concat(n,"px"),height:"".concat(r,"px")}),y]})}),(0,qn.jsx)("div",{className:"inputDiv",style:{height:"".concat(r,"px")},children:(0,qn.jsx)("input",{type:"text",style:{visibility:"hidden"}})})]}),(0,qn.jsxs)("div",{className:"bottomTimeBar",children:[(0,qn.jsx)(_z,{absStartTime:i,currStartTime:g(a),currTime:g(s),currEndTime:g(l),absEndTime:c,step:t,width:n,onStartChange:p,onChange:f,onEndChange:m,event_x:this.props.event_x}),(0,qn.jsxs)("div",{children:["Target:"," ".concat(C)]})]})]})}}class Cz extends t.Component{constructor(e){super(e),this.onStart=()=>{this.props.robotSceneManager.startAnimations(),this.setState({start:!this.state.start})},this.onPause=()=>{this.props.robotSceneManager.pauseAnimations(),this.setState({start:!this.state.start})},this.onRestart=()=>{this.props.robotSceneManager.restartAnimations()},this.onCurrTimeChange=e=>{this.props.robotSceneManager.setCurrTime(e)},this.onStartTimeChange=e=>{this.props.robotSceneManager.setCurrStartTime(e)},this.onEndTimeChange=e=>{this.props.robotSceneManager.setCurrEndTime(e)},this.defaultTimeBar=(e,t)=>{let[n,r,i,o,a]=e.timeRange();return(0,qn.jsx)(_z,{absStartTime:n,currStartTime:r,currTime:i,currEndTime:o,absEndTime:a,step:.001,width:400,onChange:this.onCurrTimeChange,onStartChange:this.onStartTimeChange,onEndChange:this.onEndTimeChange,event_x:this.state.event_x},t)},this.coloredTimeBar=(e,t,n)=>{let[r,i,o,a,s]=e.timeRange();const l=this.getColorLevel(t);return(0,qn.jsx)(Tz,{value:o,absStart:r,absEnd:s,start:i,end:a,step:.001,width:400,color_level:l,onChange:this.onCurrTimeChange,onStartChange:this.onStartTimeChange,onEndChange:this.onEndTimeChange})},this.state={currTimeBar:void 0===this.props.currTimeBar_prop?"default":this.props.currTimeBar_prop,event_x:0,start:!1}}getColorLevel(e){if(!e)return[];let t,n=0,r=[];for(r[0]=[],r[1]=[];n<e[0].length;){t=n+1;let i=0;for(;t<e[0].length&&e[0][n]===e[0][t];)i=e[1][t]-e[1][n],t+=1;if(i/=t<e[1].length?e[1][t]-e[1][n]:1,i>0)for(;n<t;)r[0].push(e[0][n]),r[1].push(i),n++;else{for(;t<e[1].length&&e[1][n]===e[1][t];)i=e[0][t]-e[0][n],t+=1;if(i/=t<e[0].length?e[0][t]-e[0][n]:1,i>0)for(;n<t;)r[0].push(e[0][n]),r[1].push(-1*i),n++;else r[0].push(e[0][n]),r[1].push(0),n++}}let i=[];for(let o=0;o<r[1].length;o++){let e=r[1][o],t=1;o+1<i.length&&(e+=r[1][o+1],t++),o+2<i.length&&(e+=r[1][o+2],t++),o-1>=0&&(e+=r[1][o-1],t++),o-2>=0&&(e+=r[1][o-2],t++),i.push(e/t)}return r[1]=i,console.log(i),r}componentDidUpdate(e,t){const{event_x:n}=this.props;e.event_x!==n&&void 0!==n&&this.setState({event_x:n})}displayPlayButton(){const{robotSceneManager:e}=this.props,{start:t}=this.state;let n;return n=t?(0,qn.jsx)("button",{className:"Button",value:"Stop",onClick:this.onPause,children:(0,qn.jsx)(Fn,{className:"Icon",icon:Gn})}):(0,qn.jsx)("button",{className:"Button",value:"Start",onClick:this.onStart,children:(0,qn.jsx)(Fn,{className:"Icon",icon:Wn})}),n}render(){const{robotSceneManager:e,targetSceneId:t}=this.props;let n;e.currEndTime()==e.currTime()&&!0===this.state.start&&this.setState({start:!1});let r=void 0===t?void 0:e.robotSceneById(t);n=null===r||void 0===r?void 0:r.currTimeWarpBase();let i,o=[];if(void 0===n)o.push(this.defaultTimeBar(e,"DefaultTimeBar"));else{let r=[];r.push((0,qn.jsx)("option",{value:"default",children:"Default"},"default"));let a=this.props.robotSceneManager.allManagedRobotScenes().filter((e=>e.id().value()==t)).map((e=>[e,e.timeWarping()])).filter((e=>{let[t,r]=e;return t!==n&&void 0!==r})).map((e=>{let[t,n]=e;return[t,n,n.timeWarp.bind(n),n.untimeWarp.bind(n),n.timeWarpMap()]})).filter((e=>{let[,,,,t]=e;return void 0!==t}));if(a.length>0&&(r.push((0,qn.jsx)("option",{value:"colored",children:"Colored"},"colored")),r.push((0,qn.jsx)("option",{value:"double",children:"Double"},"double"))),r.length>1&&(i=(0,qn.jsx)("select",{name:"TimeBarSelector",value:this.state.currTimeBar,onChange:e=>{let t=e.target.selectedOptions[0],n="default";void 0!==t&&(n=t.value),this.setState({currTimeBar:n})},children:r})),"colored"===this.state.currTimeBar)for(const[t,,,,n]of a)o.push(this.coloredTimeBar(e,n,"ColoredTimeBar"+t.id().value()));else if("double"===this.state.currTimeBar&&a.length>0)for(const[t,,i,s,l]of a)o.push((0,qn.jsx)(Ez,{timeWarpBaseName:n.name(),timeWarpTargetName:t.name(),timeWarp:i,untimeWarp:s,timeWarpMap:l,info:e,event_x:this.props.event_x},t.id().value()));else o.push(this.defaultTimeBar(e,"DefaultTimeBar"))}return(0,qn.jsxs)("div",{className:"AnimationPanel",children:[!this.props.global&&i,this.displayPlayButton(),(0,qn.jsx)("button",{className:"Button",value:"Restart",onClick:this.onRestart,children:(0,qn.jsx)(Fn,{className:"Icon",icon:Hn})}),o]})}}class Az extends t.Component{render(){let e;return e="string"===typeof this.props.accept?this.props.accept:Array.isArray(this.props.accept)?this.props.accept.join(", "):"*",(0,qn.jsxs)("div",{className:"FileUploader",children:[this.props.label?(0,qn.jsx)("label",{children:this.props.label}):void 0,this.props.label&&this.props.vertical?(0,qn.jsx)("br",{}):void 0,(0,qn.jsxs)("label",{className:"fileInputHolder",children:[(0,qn.jsx)("input",{type:"file",accept:e,onChange:this.props.onChange,...this.props.includeDirs?{webkitdirectory:""}:{}}),"Browse Files"]})]})}}var Rz=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];var kz=n(3290);const Pz=Math.min,Lz=Math.max,Oz=Math.round,Nz=Math.floor,Iz=e=>({x:e,y:e});function Dz(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function jz(e){return Bz(e)?(e.nodeName||"").toLowerCase():"#document"}function Fz(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function zz(e){var t;return null==(t=(Bz(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Bz(e){return e instanceof Node||e instanceof Fz(e).Node}function Uz(e){return e instanceof Element||e instanceof Fz(e).Element}function Gz(e){return e instanceof HTMLElement||e instanceof Fz(e).HTMLElement}function Vz(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Fz(e).ShadowRoot)}function Hz(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=qz(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Wz(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function $z(e){return["html","body","#document"].includes(jz(e))}function qz(e){return Fz(e).getComputedStyle(e)}function Xz(e){if("html"===jz(e))return e;const t=e.assignedSlot||e.parentNode||Vz(e)&&e.host||zz(e);return Vz(t)?t.host:t}function Yz(e){const t=Xz(e);return $z(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gz(t)&&Hz(t)?t:Yz(t)}function Kz(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Yz(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=Fz(i);return o?t.concat(a,a.visualViewport||[],Hz(i)?i:[],a.frameElement&&n?Kz(a.frameElement):[]):t.concat(i,Kz(i,[],n))}function Jz(e){const t=qz(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Gz(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Oz(n)!==o||Oz(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function Qz(e){return Uz(e)?e:e.contextElement}function Zz(e){const t=Qz(e);if(!Gz(t))return Iz(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Jz(t);let a=(o?Oz(n.width):n.width)/r,s=(o?Oz(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const eB=Iz(0);function tB(e){const t=Fz(e);return Wz()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:eB}function nB(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=Qz(e);let a=Iz(1);t&&(r?Uz(r)&&(a=Zz(r)):a=Zz(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Fz(e))&&t}(o,n,r)?tB(o):Iz(0);let l=(i.left+s.x)/a.x,c=(i.top+s.y)/a.y,u=i.width/a.x,h=i.height/a.y;if(o){const e=Fz(o),t=r&&Uz(r)?Fz(r):r;let n=e,i=n.frameElement;for(;i&&r&&t!==n;){const e=Zz(i),t=i.getBoundingClientRect(),r=qz(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,h*=e.y,l+=o,c+=a,n=Fz(i),i=n.frameElement}}return Dz({width:u,height:h,x:l,y:c})}function rB(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=Qz(e),u=i||o?[...c?Kz(c):[],...Kz(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const h=c&&s?function(e,t){let n,r=null;const i=zz(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const{left:c,top:u,width:h,height:d}=e.getBoundingClientRect();if(s||t(),!h||!d)return;const p={rootMargin:-Nz(u)+"px "+-Nz(i.clientWidth-(c+h))+"px "+-Nz(i.clientHeight-(u+d))+"px "+-Nz(c)+"px",threshold:Lz(0,Pz(1,l))||1};let f=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return a();t?a(!1,t):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}f=!1}try{r=new IntersectionObserver(m,{...p,root:i.ownerDocument})}catch(tq){r=new IntersectionObserver(m,p)}r.observe(e)}(!0),o}(c,n):null;let d,p=-1,f=null;a&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let m=l?nB(e):null;return l&&function t(){const r=nB(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==h||h(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(d)}}const iB=t.useLayoutEffect;var oB=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],aB=function(){};function sB(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function lB(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&o.push("".concat(sB(e,a)));return o.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var cB=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===qR(e)&&null!==e?[e]:[];var t},uB=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,nk({},ek(e,oB))},hB=function(e,t,n){var r=e.cx,i=e.getStyles,o=e.getClassNames,a=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},o(t,e),a)}};function dB(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function pB(e){return dB(e)?window.pageYOffset:e.scrollTop}function fB(e,t){dB(e)?window.scrollTo(0,t):e.scrollTop=t}function mB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aB,i=pB(e),o=t-i,a=0;!function t(){var s=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(a+=10,i,o,n);fB(e,s),a<n?window.requestAnimationFrame(t):r(e)}()}function gB(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?fB(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&fB(e,Math.max(t.offsetTop-i,0))}function vB(){try{return document.createEvent("TouchEvent"),!0}catch(tq){return!1}}var bB=!1,yB={get passive(){return bB=!0}},xB="undefined"!==typeof window?window:{};xB.addEventListener&&xB.removeEventListener&&(xB.addEventListener("p",aB,yB),xB.removeEventListener("p",aB,!1));var wB=bB;function _B(e){return null!=e}function SB(e,t,n){return e?t:n}var MB=["children","innerProps"],TB=["children","innerProps"];function EB(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,a=e.isFixedPosition,s=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u,h=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),p=d.bottom,f=d.height,m=d.top,g=n.offsetParent.getBoundingClientRect().top,v=a?window.innerHeight:dB(u=l)?window.innerHeight:u.clientHeight,b=pB(l),y=parseInt(getComputedStyle(n).marginBottom,10),x=parseInt(getComputedStyle(n).marginTop,10),w=g-x,_=v-m,S=w+b,M=h-b-m,T=p-v+b+y,E=b+m-x,C=160;switch(i){case"auto":case"bottom":if(_>=f)return{placement:"bottom",maxHeight:t};if(M>=f&&!a)return o&&mB(l,T,C),{placement:"bottom",maxHeight:t};if(!a&&M>=r||a&&_>=r)return o&&mB(l,T,C),{placement:"bottom",maxHeight:a?_-y:M-y};if("auto"===i||a){var A=t,R=a?w:S;return R>=r&&(A=Math.min(R-y-s,t)),{placement:"top",maxHeight:A}}if("bottom"===i)return o&&fB(l,T),{placement:"bottom",maxHeight:t};break;case"top":if(w>=f)return{placement:"top",maxHeight:t};if(S>=f&&!a)return o&&mB(l,E,C),{placement:"top",maxHeight:t};if(!a&&S>=r||a&&w>=r){var k=t;return(!a&&S>=r||a&&w>=r)&&(k=a?w-x:S-x),o&&mB(l,E,C),{placement:"top",maxHeight:k}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var CB,AB=function(e){return"auto"===e?"bottom":e},RB=(0,t.createContext)(null),kB=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,a=e.menuPosition,s=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(RB)||{}).setPortalPlacement,u=(0,t.useRef)(null),h=QR((0,t.useState)(i),2),d=h[0],p=h[1],f=QR((0,t.useState)(null),2),m=f[0],g=f[1],v=l.spacing.controlHeight;return iB((function(){var e=u.current;if(e){var t="fixed"===a,n=EB({maxHeight:i,menuEl:e,minHeight:r,placement:o,shouldScroll:s&&!t,isFixedPosition:t,controlHeight:v});p(n.maxHeight),g(n.placement),null===c||void 0===c||c(n.placement)}}),[i,o,a,s,r,c,v]),n({ref:u,placerProps:nk(nk({},e),{},{placement:m||AB(o),maxHeight:d})})},PB=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"menu",{menu:!0}),{ref:n},r),t)},LB=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return nk({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},OB=LB,NB=LB,IB=["size"],DB=["innerProps","isRtl","size"];var jB={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},FB=function(e){var t=e.size,n=ek(e,IB);return(0,kz.Y)("svg",(0,$R.A)({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:jB},n))},zB=function(e){return(0,kz.Y)(FB,(0,$R.A)({size:20},e),(0,kz.Y)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},BB=function(e){return(0,kz.Y)(FB,(0,$R.A)({size:20},e),(0,kz.Y)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},UB=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return nk({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*i,":hover":{color:n?o.neutral80:o.neutral40}})},GB=UB,VB=UB,HB=(0,kz.i7)(CB||(CB=cR(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),WB=function(e){var t=e.delay,n=e.offset;return(0,kz.Y)("span",{css:(0,kz.AH)({animation:"".concat(HB," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},$B=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return(0,kz.Y)("div",(0,$R.A)({ref:i},hB(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":a}),o,{"aria-disabled":n||void 0}),t)},qB=["data"],XB=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,o=e.Heading,a=e.headingProps,s=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"group",{group:!0}),s),(0,kz.Y)(o,(0,$R.A)({},a,{selectProps:u,theme:c,getStyles:r,getClassNames:i,cx:n}),l),(0,kz.Y)("div",null,t))},YB=["innerRef","isDisabled","isHidden","inputClassName"],KB={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},JB={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":nk({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},KB)},QB=function(e){return nk({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},KB)},ZB=function(e){var t=e.cx,n=e.value,r=uB(e),i=r.innerRef,o=r.isDisabled,a=r.isHidden,s=r.inputClassName,l=ek(r,YB);return(0,kz.Y)("div",(0,$R.A)({},hB(e,"input",{"input-container":!0}),{"data-value":n||""}),(0,kz.Y)("input",(0,$R.A)({className:t({input:!0},s),ref:i,style:QB(a),disabled:o},l)))},eU=function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",n,t)};var tU=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,o=e.isDisabled,a=e.removeProps,s=e.selectProps,l=n.Container,c=n.Label,u=n.Remove;return(0,kz.Y)(l,{data:r,innerProps:nk(nk({},hB(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:s},(0,kz.Y)(c,{data:r,innerProps:nk({},hB(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},t),(0,kz.Y)(u,{data:r,innerProps:nk(nk({},hB(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:s}))},nU=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.innerRef,a=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":n},a),t)},rU=function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"placeholder",{placeholder:!0}),n),t)},iU=function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},oU={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||(0,kz.Y)(zB,null))},Control:$B,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||(0,kz.Y)(BB,null))},DownChevron:BB,CrossIcon:zB,Group:XB,GroupHeading:function(e){var t=uB(e);t.data;var n=ek(t,qB);return(0,kz.Y)("div",(0,$R.A)({},hB(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return(0,kz.Y)("span",(0,$R.A)({},t,hB(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:ZB,LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,o=ek(e,DB);return(0,kz.Y)("div",(0,$R.A)({},hB(nk(nk({},o),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),(0,kz.Y)(WB,{delay:0,offset:n}),(0,kz.Y)(WB,{delay:160,offset:!0}),(0,kz.Y)(WB,{delay:320,offset:!n}))},Menu:PB,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,a=e.menuPlacement,s=e.menuPosition,l=(0,t.useRef)(null),c=(0,t.useRef)(null),u=QR((0,t.useState)(AB(a)),2),h=u[0],d=u[1],p=(0,t.useMemo)((function(){return{setPortalPlacement:d}}),[]),f=QR((0,t.useState)(null),2),m=f[0],g=f[1],v=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===s?0:window.pageYOffset,n=e[h]+t;n===(null===m||void 0===m?void 0:m.offset)&&e.left===(null===m||void 0===m?void 0:m.rect.left)&&e.width===(null===m||void 0===m?void 0:m.rect.width)||g({offset:n,rect:e})}}),[i,s,h,null===m||void 0===m?void 0:m.offset,null===m||void 0===m?void 0:m.rect.left,null===m||void 0===m?void 0:m.rect.width]);iB((function(){v()}),[v]);var b=(0,t.useCallback)((function(){"function"===typeof c.current&&(c.current(),c.current=null),i&&l.current&&(c.current=rB(i,l.current,v,{elementResize:"ResizeObserver"in window}))}),[i,v]);iB((function(){b()}),[b]);var y=(0,t.useCallback)((function(e){l.current=e,b()}),[b]);if(!n&&"fixed"!==s||!m)return null;var x=(0,kz.Y)("div",(0,$R.A)({ref:y},hB(nk(nk({},e),{},{offset:m.offset,position:s,rect:m.rect}),"menuPortal",{"menu-portal":!0}),o),r);return(0,kz.Y)(RB.Provider,{value:p},n?(0,Lk.createPortal)(x,n):x)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=ek(e,TB);return(0,kz.Y)("div",(0,$R.A)({},hB(nk(nk({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=ek(e,MB);return(0,kz.Y)("div",(0,$R.A)({},hB(nk(nk({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:tU,MultiValueContainer:eU,MultiValueLabel:eU,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return(0,kz.Y)("div",(0,$R.A)({role:"button"},n),t||(0,kz.Y)(zB,{size:14}))},Option:nU,Placeholder:rU,SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:iU,ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return(0,kz.Y)("div",(0,$R.A)({},hB(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},aU=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function sU(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||aU(r)&&aU(i)))return!1;var r,i;return!0}for(var lU={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},cU=function(e){return(0,kz.Y)("span",(0,$R.A)({css:lU},e))},uU={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,o=void 0===i?"":i,a=e.selectValue,s=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&a)return"value ".concat(o," focused, ").concat(u(a,n),".");if("menu"===t&&c){var h=s?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(o).concat(d,", ").concat(u(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},hU=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,a=e.isFocused,s=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,p=l.inputValue,f=l.isMulti,m=l.isOptionDisabled,g=l.isSearchable,v=l.menuIsOpen,b=l.options,y=l.screenReaderStatus,x=l.tabSelectsValue,w=l.isLoading,_=l["aria-label"],S=l["aria-live"],M=(0,t.useMemo)((function(){return nk(nk({},uU),h||{})}),[h]),T=(0,t.useMemo)((function(){var e,t="";if(n&&M.onChange){var r=n.option,i=n.options,o=n.removedValue,a=n.removedValues,l=n.value,c=o||r||(e=l,Array.isArray(e)?null:e),u=c?d(c):"",h=i||a||void 0,p=h?h.map(d):[],f=nk({isDisabled:c&&m(c,s),label:u,labels:p},n);t=M.onChange(f)}return t}),[n,M,m,s,d]),E=(0,t.useMemo)((function(){var e="",t=r||i,n=!!(r&&s&&s.includes(r));if(t&&M.onFocus){var a={focused:t,label:d(t),isDisabled:m(t,s),isSelected:n,options:o,context:t===r?"menu":"value",selectValue:s,isAppleDevice:u};e=M.onFocus(a)}return e}),[r,i,d,m,M,o,s,u]),C=(0,t.useMemo)((function(){var e="";if(v&&b.length&&!w&&M.onFilter){var t=y({count:o.length});e=M.onFilter({inputValue:p,resultsMessage:t})}return e}),[o,p,v,M,b,y,w]),A="initial-input-focus"===(null===n||void 0===n?void 0:n.action),R=(0,t.useMemo)((function(){var e="";if(M.guidance){var t=i?"value":v?"menu":"input";e=M.guidance({"aria-label":_,context:t,isDisabled:r&&m(r,s),isMulti:f,isSearchable:g,tabSelectsValue:x,isInitialFocus:A})}return e}),[_,r,i,f,m,g,v,M,s,x,A]),k=(0,kz.Y)(t.Fragment,null,(0,kz.Y)("span",{id:"aria-selection"},T),(0,kz.Y)("span",{id:"aria-focused"},E),(0,kz.Y)("span",{id:"aria-results"},C),(0,kz.Y)("span",{id:"aria-guidance"},R));return(0,kz.Y)(t.Fragment,null,(0,kz.Y)(cU,{id:c},A&&k),(0,kz.Y)(cU,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!A&&k))},dU=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],pU=new RegExp("["+dU.map((function(e){return e.letters})).join("")+"]","g"),fU={},mU=0;mU<dU.length;mU++)for(var gU=dU[mU],vU=0;vU<gU.letters.length;vU++)fU[gU.letters[vU]]=gU.base;var bU=function(e){return e.replace(pU,(function(e){return fU[e]}))},yU=function(e,t){void 0===t&&(t=sU);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}(bU),xU=function(e){return e.replace(/^\s+|\s+$/g,"")},wU=function(e){return"".concat(e.label," ").concat(e.value)},_U=["innerRef"];function SU(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=QR(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=QR(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(ek(e,_U),"onExited","in","enter","exit","appear");return(0,kz.Y)("input",(0,$R.A)({ref:t},n,{css:(0,kz.AH)({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var MU=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};var TU=["boxSizing","height","overflow","paddingRight","position"],EU={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function CU(e){e.preventDefault()}function AU(e){e.stopPropagation()}function RU(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function kU(){return"ontouchstart"in window||navigator.maxTouchPoints}var PU=!("undefined"===typeof window||!window.document||!window.document.createElement),LU=0,OU={capture:!1,passive:!1};var NU=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},IU={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function DU(e){var n=e.children,r=e.lockEnabled,i=e.captureEnabled,o=function(e){var n=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,o=e.onTopArrive,a=e.onTopLeave,s=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),u=(0,t.useRef)(null),h=(0,t.useCallback)((function(e,t){if(null!==u.current){var n=u.current,c=n.scrollTop,h=n.scrollHeight,d=n.clientHeight,p=u.current,f=t>0,m=h-d-c,g=!1;m>t&&s.current&&(i&&i(e),s.current=!1),f&&l.current&&(a&&a(e),l.current=!1),f&&t>m?(r&&!s.current&&r(e),p.scrollTop=h,g=!0,s.current=!0):!f&&-t>c&&(o&&!l.current&&o(e),p.scrollTop=0,g=!0,l.current=!0),g&&MU(e)}}),[r,i,o,a]),d=(0,t.useCallback)((function(e){h(e,e.deltaY)}),[h]),p=(0,t.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),f=(0,t.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;h(e,t)}),[h]),m=(0,t.useCallback)((function(e){if(e){var t=!!wB&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",p,t),e.addEventListener("touchmove",f,t)}}),[f,p,d]),g=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",f,!1))}),[f,p,d]);return(0,t.useEffect)((function(){if(n){var e=u.current;return m(e),function(){g(e)}}}),[n,m,g]),function(e){u.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),a=function(e){var n=e.isEnabled,r=e.accountForScrollbars,i=void 0===r||r,o=(0,t.useRef)({}),a=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){if(PU){var t=document.body,n=t&&t.style;if(i&&TU.forEach((function(e){var t=n&&n[e];o.current[e]=t})),i&&LU<1){var r=parseInt(o.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+r||0;Object.keys(EU).forEach((function(e){var t=EU[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(s,"px"))}t&&kU()&&(t.addEventListener("touchmove",CU,OU),e&&(e.addEventListener("touchstart",RU,OU),e.addEventListener("touchmove",AU,OU))),LU+=1}}),[i]),l=(0,t.useCallback)((function(e){if(PU){var t=document.body,n=t&&t.style;LU=Math.max(LU-1,0),i&&LU<1&&TU.forEach((function(e){var t=o.current[e];n&&(n[e]=t)})),t&&kU()&&(t.removeEventListener("touchmove",CU,OU),e&&(e.removeEventListener("touchstart",RU,OU),e.removeEventListener("touchmove",AU,OU)))}}),[i]);return(0,t.useEffect)((function(){if(n){var e=a.current;return s(e),function(){l(e)}}}),[n,s,l]),function(e){a.current=e}}({isEnabled:r});return(0,kz.Y)(t.Fragment,null,r&&(0,kz.Y)("div",{onClick:NU,css:IU}),n((function(e){o(e),a(e)})))}var jU={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},FU=function(e){var t=e.name,n=e.onFocus;return(0,kz.Y)("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:jU,value:"",onChange:function(){}})};function zU(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function BU(){return zU(/^Mac/i)}function UU(){return zU(/^iPhone/i)||zU(/^iPad/i)||BU()&&navigator.maxTouchPoints>1}var GU={clearIndicator:VB,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,o=i.colors,a=i.borderRadius;return nk({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:GB,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return nk({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return nk({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,o=i.spacing,a=i.colors;return nk(nk({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},JB),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,o=i.colors,a=i.spacing.baseUnit;return nk({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*a})},loadingMessage:NB,menu:function(e,t){var n,r=e.placement,i=e.theme,o=i.borderRadius,a=i.spacing,s=i.colors;return nk((YR(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),YR(n,"position","absolute"),YR(n,"width","100%"),YR(n,"zIndex",1),n),t?{}:{backgroundColor:s.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return nk({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors;return nk({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,o=e.cropWithEllipsis;return nk({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors,a=e.isFocused;return nk({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:OB,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.theme,a=o.spacing,s=o.colors;return nk({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?s.primary:r?s.primary25:"transparent",color:n?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(2*a.baseUnit,"px ").concat(3*a.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?s.primary:s.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return nk({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,o=r.colors;return nk({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return nk({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var VU={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},HU={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:vB(),captureMenuScroll:!vB(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e){return function(t,n){if(t.data.__isNew__)return!0;var r=nk({ignoreCase:!0,ignoreAccents:!0,stringify:wU,trim:!0,matchFrom:"any"},e),i=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,s=r.trim,l=r.matchFrom,c=s?xU(n):n,u=s?xU(a(t)):a(t);return i&&(c=c.toLowerCase(),u=u.toLowerCase()),o&&(c=yU(c),u=bU(u)),"start"===l?u.substr(0,c.length)===c:u.indexOf(c)>-1}}(),formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(tq){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function WU(e,t,n,r){return{type:"option",data:t,isDisabled:ZU(e,t,n),isSelected:eG(e,t,n),label:JU(e,t),value:QU(e,t),index:r}}function $U(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return WU(e,n,t,r)})).filter((function(t){return YU(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=WU(e,n,t,r);return YU(e,o)?o:void 0})).filter(_B)}function qU(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,vk(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function XU(e,t){return e.reduce((function(e,n){return"group"===n.type?e.push.apply(e,vk(n.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}})))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e}),[])}function YU(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,o=t.isSelected,a=t.label,s=t.value;return(!nG(e)||!o)&&tG(e,{label:a,value:s,data:i},r)}var KU=function(e,t){var n;return(null===(n=e.find((function(e){return e.data===t})))||void 0===n?void 0:n.id)||null},JU=function(e,t){return e.getOptionLabel(t)},QU=function(e,t){return e.getOptionValue(t)};function ZU(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function eG(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=QU(e,t);return n.some((function(t){return QU(e,t)===r}))}function tG(e,t,n){return!e.filterOption||e.filterOption(t,n)}var nG=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},rG=1,iG=function(e){gP(r,e);var n=xP(r);function r(e){var t;if(dP(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=BU()||UU(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,o=r.name;n.name=o,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,o=i.closeMenuOnSelect,a=i.isMulti,s=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:s}),o&&(t.setState({inputIsHiddenAfterUpdate:!a}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,o=n.name,a=t.state.selectValue,s=i&&t.isOptionSelected(e,a),l=t.isOptionDisabled(e,a);if(s){var c=t.getOptionValue(e);t.setValue(a.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:o});i?t.setValue([].concat(vk(a),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),o=r.filter((function(e){return t.getOptionValue(e)!==i})),a=SB(n,o,o[0]||null);t.onChange(a,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(SB(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),o=SB(e,i,i[0]||null);t.onChange(o,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return KU(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return XU($U(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return lB.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return JU(t.props,e)},t.getOptionValue=function(e){return QU(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=GU[e](n,r);i.boxSizing="border-box";var o=t.props.styles[e];return o?o(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,nk(nk({},oU),e.components);var e},t.buildCategorizedOptions=function(){return $U(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return qU(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:nk({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&dB(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),o=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||o>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return nG(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,o=n.escapeClearsValue,a=n.inputValue,s=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,h=n.tabSelectsValue,d=n.openMenuOnFocus,p=t.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!l&&("function"!==typeof u||(u(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||a)return;t.focusValue("previous");break;case"ArrowRight":if(!r||a)return;t.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)t.removeValue(m);else{if(!i)return;r?t.popValue():s&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!h||!f||d&&t.isOptionSelected(f,g))return;t.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(t.isComposing)return;t.selectOption(f);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:a}),t.onMenuClose()):s&&o&&t.clearValue();break;case" ":if(a)return;if(!c){t.openMenu("first");break}if(!f)return;t.selectOption(f);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++rG),t.state.selectValue=cB(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.getFocusableOptionsWithIds(),o=t.buildFocusableOptions(),a=o.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=i,t.state.focusedOption=o[a],t.state.focusedOptionId=KU(i,o[a])}return t}return fP(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&gB(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(gB(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),a="first"===e?0:o.length-1;if(!this.props.isMulti){var s=o.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[a],focusedOptionId:this.getFocusedOptionId(o[a])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,a=-1;if(n.length){switch(e){case"previous":a=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===e?i=o>0?o-1:r.length-1:"down"===e?i=(o+1)%r.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(VU):nk(nk({},VU),this.props.theme):VU}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,o=this.selectOption,a=this.setValue,s=this.props,l=s.isMulti,c=s.isRtl,u=s.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:o,selectProps:s,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return ZU(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return eG(this.props,e,t)}},{key:"filterOption",value:function(e,t){return tG(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,i=e.inputId,o=e.inputValue,a=e.tabIndex,s=e.form,l=e.menuIsOpen,c=e.required,u=this.getComponents().Input,h=this.state,d=h.inputIsHidden,p=h.ariaSelection,f=this.commonProps,m=i||this.getElementId("input"),g=nk(nk(nk({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===p||void 0===p?void 0:p.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(u,(0,$R.A)({},f,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:n,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:s,type:"text",value:o},g)):t.createElement(SU,(0,$R.A)({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:aB,onFocus:this.onInputFocus,disabled:n,tabIndex:a,inputMode:"none",form:s,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,o=n.MultiValueLabel,a=n.MultiValueRemove,s=n.SingleValue,l=n.Placeholder,c=this.commonProps,u=this.props,h=u.controlShouldRenderValue,d=u.isDisabled,p=u.isMulti,f=u.inputValue,m=u.placeholder,g=this.state,v=g.selectValue,b=g.focusedValue,y=g.isFocused;if(!this.hasValue()||!h)return f?null:t.createElement(l,(0,$R.A)({},c,{key:"placeholder",isDisabled:d,isFocused:y,innerProps:{id:this.getElementId("placeholder")}}),m);if(p)return v.map((function(n,s){var l=n===b,u="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,(0,$R.A)({},c,{components:{Container:i,Label:o,Remove:a},isFocused:l,isDisabled:d,key:u,index:s,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(f)return null;var x=v[0];return t.createElement(s,(0,$R.A)({},c,{data:x,isDisabled:d}),this.formatOptionLabel(x,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,a=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||o)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,(0,$R.A)({},n,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,a=this.state.isFocused;if(!e||!o)return null;return t.createElement(e,(0,$R.A)({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:a}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,o=this.props.isDisabled,a=this.state.isFocused;return t.createElement(r,(0,$R.A)({},i,{isDisabled:o,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,(0,$R.A)({},n,{innerProps:o,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,o=n.Menu,a=n.MenuList,s=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,u=n.Option,h=this.commonProps,d=this.state.focusedOption,p=this.props,f=p.captureMenuScroll,m=p.inputValue,g=p.isLoading,v=p.loadingMessage,b=p.minMenuHeight,y=p.maxMenuHeight,x=p.menuIsOpen,w=p.menuPlacement,_=p.menuPosition,S=p.menuPortalTarget,M=p.menuShouldBlockScroll,T=p.menuShouldScrollIntoView,E=p.noOptionsMessage,C=p.onMenuScrollToTop,A=p.onMenuScrollToBottom;if(!x)return null;var R,k=function(n,r){var i=n.type,o=n.data,a=n.isDisabled,s=n.isSelected,l=n.label,c=n.value,p=d===o,f=a?void 0:function(){return e.onOptionHover(o)},m=a?void 0:function(){return e.selectOption(o)},g="".concat(e.getElementId("option"),"-").concat(r),v={id:g,onClick:m,onMouseMove:f,onMouseOver:f,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:s};return t.createElement(u,(0,$R.A)({},h,{innerProps:v,data:o,isDisabled:a,isSelected:s,key:g,label:l,type:i,value:c,isFocused:p,innerRef:p?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())R=this.getCategorizedOptions().map((function(n){if("group"===n.type){var o=n.data,a=n.options,s=n.index,l="".concat(e.getElementId("group"),"-").concat(s),c="".concat(l,"-heading");return t.createElement(r,(0,$R.A)({},h,{key:l,data:o,options:a,Heading:i,headingProps:{id:c,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return k(e,"".concat(s,"-").concat(e.index))})))}if("option"===n.type)return k(n,"".concat(n.index))}));else if(g){var P=v({inputValue:m});if(null===P)return null;R=t.createElement(l,h,P)}else{var L=E({inputValue:m});if(null===L)return null;R=t.createElement(c,h,L)}var O={minMenuHeight:b,maxMenuHeight:y,menuPlacement:w,menuPosition:_,menuShouldScrollIntoView:T},N=t.createElement(kB,(0,$R.A)({},h,O),(function(n){var r=n.ref,i=n.placerProps,s=i.placement,l=i.maxHeight;return t.createElement(o,(0,$R.A)({},h,O,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:g,placement:s}),t.createElement(DU,{captureEnabled:f,onTopArrive:C,onBottomArrive:A,lockEnabled:M},(function(n){return t.createElement(a,(0,$R.A)({},h,{innerRef:function(t){e.getMenuListRef(t),n(t)},innerProps:{role:"listbox","aria-multiselectable":h.isMulti,id:e.getElementId("listbox")},isLoading:g,maxHeight:l,focusedOption:d}),R)})))}));return S||"fixed"===_?t.createElement(s,(0,$R.A)({},h,{appendTo:S,controlElement:this.controlRef,menuPlacement:w,menuPosition:_}),N):N}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,i=n.isDisabled,o=n.isMulti,a=n.name,s=n.required,l=this.state.selectValue;if(s&&!this.hasValue()&&!i)return t.createElement(FU,{name:a,onFocus:this.onValueInputFocus});if(a&&!i){if(o){if(r){var c=l.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:a,type:"hidden",value:c})}var u=l.length>0?l.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:a,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:a,type:"hidden",value:""});return t.createElement("div",null,u)}var h=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:a,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,o=n.focusedValue,a=n.isFocused,s=n.selectValue,l=this.getFocusableOptions();return t.createElement(hU,(0,$R.A)({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:o,isFocused:a,selectValue:s,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,i=e.SelectContainer,o=e.ValueContainer,a=this.props,s=a.className,l=a.id,c=a.isDisabled,u=a.menuIsOpen,h=this.state.isFocused,d=this.commonProps=this.getCommonProps();return t.createElement(i,(0,$R.A)({},d,{className:s,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:h}),this.renderLiveRegion(),t.createElement(n,(0,$R.A)({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:h,menuIsOpen:u}),t.createElement(o,(0,$R.A)({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,(0,$R.A)({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=t.ariaSelection,a=t.isFocused,s=t.prevWasFocused,l=t.instancePrefix,c=e.options,u=e.value,h=e.menuIsOpen,d=e.inputValue,p=e.isMulti,f=cB(u),m={};if(n&&(u!==n.value||c!==n.options||h!==n.menuIsOpen||d!==n.inputValue)){var g=h?function(e,t){return qU($U(e,t))}(e,f):[],v=h?XU($U(e,f),"".concat(l,"-option")):[],b=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,f):null,y=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,g);m={selectValue:f,focusedOption:y,focusedOptionId:KU(v,y),focusableOptionsWithIds:v,focusedValue:b,clearFocusValueOnUpdate:!1}}var x=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},w=o,_=a&&s;return a&&!_&&(w={value:SB(p,f,f[0]||null),options:f,action:"initial-input-focus"},_=!s),"initial-input-focus"===(null===o||void 0===o?void 0:o.action)&&(w=null),nk(nk(nk({},m),x),{},{prevProps:e,ariaSelection:w,prevWasFocused:_})}}]),r}(t.Component);iG.defaultProps=HU;n(3803);var oG=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,i=e.defaultMenuIsOpen,o=void 0!==i&&i,a=e.defaultValue,s=void 0===a?null:a,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,h=e.onInputChange,d=e.onMenuClose,p=e.onMenuOpen,f=e.value,m=ek(e,Rz),g=QR((0,t.useState)(void 0!==l?l:r),2),v=g[0],b=g[1],y=QR((0,t.useState)(void 0!==c?c:o),2),x=y[0],w=y[1],_=QR((0,t.useState)(void 0!==f?f:s),2),S=_[0],M=_[1],T=(0,t.useCallback)((function(e,t){"function"===typeof u&&u(e,t),M(e)}),[u]),E=(0,t.useCallback)((function(e,t){var n;"function"===typeof h&&(n=h(e,t)),b(void 0!==n?n:e)}),[h]),C=(0,t.useCallback)((function(){"function"===typeof p&&p(),w(!0)}),[p]),A=(0,t.useCallback)((function(){"function"===typeof d&&d(),w(!1)}),[d]),R=void 0!==l?l:v,k=void 0!==c?c:x,P=void 0!==f?f:S;return nk(nk({},m),{},{inputValue:R,menuIsOpen:k,onChange:T,onInputChange:E,onMenuClose:A,onMenuOpen:C,value:P})}(e);return t.createElement(iG,(0,$R.A)({ref:n},r))})),aG=oG;class sG extends t.Component{constructor(e){super(e),this._button=void 0,this._button=t.createRef()}render(){return(0,qn.jsx)("button",{className:"ClickButton",ref:this._button,onClick:this.props.onClick,style:this.props.style,children:this.props.buttonValue})}}var lG=n(4168);function cG(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":hover")===e}class uG extends t.Component{constructor(e){super(e),this._textInput=void 0,this._sliderInput=void 0,this.onTextInputChange=this.onTextInputChange.bind(this),this.onTextInputKeyDown=this.onTextInputKeyDown.bind(this),this.onSliderChange=this.onSliderChange.bind(this),this._textInput=(0,t.createRef)(),this._sliderInput=(0,t.createRef)();let n=this.value().toString();this.state={textValue:n,sliderValue:n,prevPropValue:n}}onTextInputChange(e){let t=e.currentTarget.value,n="",r=0;for(let i=0;i<t.length;i++){const e=t[i];"0123456789".includes(e)?n+=e:0===r&&"."===e?(n+=e,r++):0===n.length&&"-"===e&&(n+=e)}this.setState({textValue:n})}onTextInputKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=ry(Number(t.value),this.min(),this.max()),n=this.props.onChange;this.setState({textValue:e.toString(),sliderValue:e.toString()},(()=>{n&&n(Number(e))}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({textValue:this.state.sliderValue})}onSliderChange(e){let t=e.currentTarget.value,n=this.props.onChange;this.setState({sliderValue:t,textValue:t},(()=>{n&&n(Number(this.state.sliderValue))}))}componentDidUpdate(e,t){if(!(cG(this._textInput.current)||function(e){if(!e)return!1;let t=e.parentElement;return!!t&&t.querySelector(":focus")===e}(this._textInput.current)||cG(this._sliderInput.current))&&this.value().toString()!==this.state.prevPropValue){let e=this.value().toString();this.setState({textValue:e,sliderValue:e,prevPropValue:e})}}render(){let e;e=this.props.label?(0,qn.jsx)("div",{className:"labelDiv",children:(0,qn.jsx)("label",{children:this.props.label})}):void 0;let t=this.props.onMouseUp;return(0,qn.jsxs)("div",{className:"LabeledSlider",children:[e,(0,qn.jsxs)("div",{className:"inputDiv",children:[(0,qn.jsx)("input",{type:"text",value:this.state.textValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange,ref:this._textInput}),(0,qn.jsx)("input",{type:"range",max:this.max(),min:this.min(),step:this.step(),value:this.state.sliderValue,onChange:this.onSliderChange,onMouseUp:()=>{t&&t(Number(this.state.sliderValue))},ref:this._sliderInput})]})]})}min(){var e;return null!==(e=this.props.min)&&void 0!==e?e:0}max(){var e;return Math.max(this.min(),null!==(e=this.props.max)&&void 0!==e?e:1)}value(){let e=this.props.value;return ry(void 0===e?this.min():e,this.min(),this.max())}step(){return this.props.step}}let hG;class dG extends t.Component{constructor(e){super(e),this._button=void 0,this._button=t.createRef()}render(){return(0,qn.jsx)(lF,{className:"DragButton_".concat(this.props.className?this.props.className:""),onDragStartT:e=>{let t=this.props.onDragStart;if(!t)return;let n=t(e);if(void 0===n)return;let[r,i]=n,o=this._button.current;if(o){let t=this.props.getParentDockLayout();t&&(hG=i,e.setData({tab:{id:r}},t),e.startDrag(o,o))}},onDragEndT:e=>{hG&&hG(e)},children:(0,qn.jsx)("button",{className:"DragButtonButton",ref:this._button,title:this.props.title,onClickCapture:this.props.onClick,style:this.props.style,children:this.props.buttonValue})})}}function pG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pG(Object(n),!0).forEach((function(t){bG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vG(e,t,n){return t&&gG(e.prototype,t),n&&gG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yG(){return yG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yG.apply(this,arguments)}function xG(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_G(e,t)}function wG(e){return wG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wG(e)}function _G(e,t){return _G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_G(e,t)}function SG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TG(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(tq){return!1}}();return function(){var n,r=wG(e);if(t){var i=wG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return MG(e)}(this,n)}}function EG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||AG(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CG(e){return function(e){if(Array.isArray(e))return RG(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||AG(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AG(e,t){if(e){if("string"===typeof e)return RG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RG(e,t):void 0}}function RG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kG=vG((function e(t){var n=this,r=t.expanded,i=void 0===r?[]:r,o=t.allowMultipleExpanded,a=void 0!==o&&o,s=t.allowZeroExpanded,l=void 0!==s&&s;mG(this,e),bG(this,"expanded",void 0),bG(this,"allowMultipleExpanded",void 0),bG(this,"allowZeroExpanded",void 0),bG(this,"toggleExpanded",(function(e){return n.isItemDisabled(e)?n:n.isItemExpanded(e)?n.augment({expanded:n.expanded.filter((function(t){return t!==e}))}):n.augment({expanded:n.allowMultipleExpanded?[].concat(CG(n.expanded),[e]):[e]})})),bG(this,"isItemDisabled",(function(e){var t=n.isItemExpanded(e),r=1===n.expanded.length;return Boolean(t&&!n.allowZeroExpanded&&r)})),bG(this,"isItemExpanded",(function(e){return-1!==n.expanded.indexOf(e)})),bG(this,"getPanelAttributes",(function(e,t){var r=null!==t&&void 0!==t?t:n.isItemExpanded(e);return{role:n.allowMultipleExpanded?void 0:"region","aria-hidden":n.allowMultipleExpanded?!r:void 0,"aria-labelledby":n.getButtonId(e),id:n.getPanelId(e),hidden:!r||void 0}})),bG(this,"getHeadingAttributes",(function(){return{role:"heading"}})),bG(this,"getButtonAttributes",(function(e,t){var r=null!==t&&void 0!==t?t:n.isItemExpanded(e),i=n.isItemDisabled(e);return{id:n.getButtonId(e),"aria-disabled":i,"aria-expanded":r,"aria-controls":n.getPanelId(e),role:"button",tabIndex:0}})),bG(this,"getPanelId",(function(e){return"accordion__panel-".concat(e)})),bG(this,"getButtonId",(function(e){return"accordion__heading-".concat(e)})),bG(this,"augment",(function(t){return new e(fG({expanded:n.expanded,allowMultipleExpanded:n.allowMultipleExpanded,allowZeroExpanded:n.allowZeroExpanded},t))})),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=l})),PG=(0,t.createContext)(null),LG=function(e){xG(r,e);var n=TG(r);function r(){var e;mG(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return bG(MG(e=n.call.apply(n,[this].concat(i))),"state",new kG({expanded:e.props.preExpanded,allowMultipleExpanded:e.props.allowMultipleExpanded,allowZeroExpanded:e.props.allowZeroExpanded})),bG(MG(e),"toggleExpanded",(function(t){e.setState((function(e){return e.toggleExpanded(t)}),(function(){e.props.onChange&&e.props.onChange(e.state.expanded)}))})),bG(MG(e),"isItemDisabled",(function(t){return e.state.isItemDisabled(t)})),bG(MG(e),"isItemExpanded",(function(t){return e.state.isItemExpanded(t)})),bG(MG(e),"getPanelAttributes",(function(t,n){return e.state.getPanelAttributes(t,n)})),bG(MG(e),"getHeadingAttributes",(function(){return e.state.getHeadingAttributes()})),bG(MG(e),"getButtonAttributes",(function(t,n){return e.state.getButtonAttributes(t,n)})),e}return vG(r,[{key:"render",value:function(){var e=this.state,n=e.allowZeroExpanded,r=e.allowMultipleExpanded;return(0,t.createElement)(PG.Provider,{value:{allowMultipleExpanded:r,allowZeroExpanded:n,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),r}(t.PureComponent);bG(LG,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var OG,NG=function(e){xG(r,e);var n=TG(r);function r(){var e;mG(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return bG(MG(e=n.call.apply(n,[this].concat(i))),"renderChildren",(function(t){return t?e.props.children(t):null})),e}return vG(r,[{key:"render",value:function(){return(0,t.createElement)(PG.Consumer,null,this.renderChildren)}}]),r}(t.PureComponent),IG=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],DG=function(e){var n=e.className,r=void 0===n?"accordion":n,i=e.allowMultipleExpanded,o=e.allowZeroExpanded,a=e.onChange,s=e.preExpanded,l=SG(e,IG);return(0,t.createElement)(LG,{preExpanded:s,allowMultipleExpanded:i,allowZeroExpanded:o,onChange:a},(0,t.createElement)("div",yG({"data-accordion-component":"Accordion",className:r},l)))};!function(e){e.Accordion="Accordion",e.AccordionItem="AccordionItem",e.AccordionItemButton="AccordionItemButton",e.AccordionItemHeading="AccordionItemHeading",e.AccordionItemPanel="AccordionItemPanel"}(OG||(OG={}));var jG=OG,FG=0;var zG=t.useId||function(){var e=FG;return FG+=1,"raa-".concat(e)},BG=/[\u0009\u000a\u000c\u000d\u0020]/g;function UG(e){return""!==e&&!BG.test(e)||(console.error('uuid must be a valid HTML5 id but was given "'.concat(e,'", ASCII whitespaces are forbidden')),!1)}var GG=(0,t.createContext)(null),VG=function(e){var n=e.children,r=e.uuid,i=e.accordionContext,o=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},s=function(e){var i=null!==o&&void 0!==o?o:e.isItemExpanded(r),s=e.isItemDisabled(r),l=e.getPanelAttributes(r,o),c=e.getHeadingAttributes(r),u=e.getButtonAttributes(r,o);return(0,t.createElement)(GG.Provider,{value:{uuid:r,expanded:i,disabled:s,toggleExpanded:a,panelAttributes:l,headingAttributes:c,buttonAttributes:u}},n)};return(0,t.createElement)(NG,null,s)},HG=function(e){return(0,t.createElement)(NG,null,(function(n){return(0,t.createElement)(VG,yG({},e,{accordionContext:n}))}))},WG=function(e){var n=e.children,r=function(e){return e?n(e):null};return(0,t.createElement)(GG.Consumer,null,r)},$G=["uuid","dangerouslySetExpanded","className","activeClassName"],qG=function(e){var n=e.uuid,r=e.dangerouslySetExpanded,i=e.className,o=void 0===i?"accordion__item":i,a=e.activeClassName,s=SG(e,$G),l=EG((0,t.useState)(zG()),1)[0],c=null!==n&&void 0!==n?n:l,u=function(e){var n=e.expanded&&a?a:o;return(0,t.createElement)("div",yG({"data-accordion-component":"AccordionItem",className:n},s))};return UG(c.toString()),s.id&&UG(s.id),(0,t.createElement)(HG,{uuid:c,dangerouslySetExpanded:r},(0,t.createElement)(WG,null,u))};function XG(e){return e&&(e.matches('[data-accordion-component="Accordion"]')?e:XG(e.parentElement))}function YG(e){var t=XG(e);return t&&Array.from(t.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}qG.displayName=jG.AccordionItem;var KG="End",JG="Enter",QG="Home",ZG=" ",eV="Spacebar",tV="ArrowUp",nV="ArrowDown",rV="ArrowLeft",iV="ArrowRight",oV=["toggleExpanded","className"],aV=function(e){var n=e.toggleExpanded,r=e.className,i=void 0===r?"accordion__button":r,o=SG(e,oV);return o.id&&UG(o.id),(0,t.createElement)("div",yG({className:i},o,{role:"button",tabIndex:0,onClick:n,onKeyDown:function(e){var t=e.key;if(t!==JG&&t!==ZG&&t!==eV||(e.preventDefault(),n()),e.target instanceof HTMLElement)switch(t){case QG:e.preventDefault(),function(e){var t=(YG(e)||[])[0];t&&t.focus()}(e.target);break;case KG:e.preventDefault(),function(e){var t=YG(e)||[],n=t[t.length-1];n&&n.focus()}(e.target);break;case rV:case tV:e.preventDefault(),function(e){var t=YG(e)||[],n=t.indexOf(e);if(-1!==n){var r=t[n-1];r&&r.focus()}}(e.target);break;case iV:case nV:e.preventDefault(),function(e){var t=YG(e)||[],n=t.indexOf(e);if(-1!==n){var r=t[n+1];r&&r.focus()}}(e.target)}},"data-accordion-component":"AccordionItemButton"}))},sV=function(e){return(0,t.createElement)(WG,null,(function(n){var r=n.toggleExpanded,i=n.buttonAttributes;return(0,t.createElement)(aV,yG({toggleExpanded:r},e,i))}))},lV=function(e){xG(r,e);var n=TG(r);function r(){var e;mG(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return bG(MG(e=n.call.apply(n,[this].concat(i))),"ref",void 0),bG(MG(e),"setRef",(function(t){e.ref=t})),e}return vG(r,[{key:"componentDidUpdate",value:function(){r.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){r.VALIDATE(this.ref)}},{key:"render",value:function(){return(0,t.createElement)("div",yG({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(e){if(void 0===e)throw new Error("ref is undefined");if(1!==e.childElementCount||!e.firstElementChild||"AccordionItemButton"!==e.firstElementChild.getAttribute("data-accordion-component"))throw new Error("AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.\n\nFrom the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):\n\n\u201cThe button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.\u201d\n\n")}}]),r}(t.PureComponent);bG(lV,"defaultProps",{className:"accordion__heading","aria-level":3});var cV=function(e){return(0,t.createElement)(WG,null,(function(n){var r=n.headingAttributes;return e.id&&UG(e.id),(0,t.createElement)(lV,yG({},e,r))}))};cV.displayName=jG.AccordionItemHeading;var uV=["className","region","id"],hV=function(e){var n=e.className,r=void 0===n?"accordion__panel":n,i=e.region,o=e.id,a=SG(e,uV),s=function(e){var n=e.panelAttributes;o&&UG(o);var s=fG(fG({},n),{},{"aria-labelledby":i?n["aria-labelledby"]:void 0});return(0,t.createElement)("div",yG({"data-accordion-component":"AccordionItemPanel",className:r},a,s,{role:i?"region":void 0}))};return(0,t.createElement)(WG,null,s)};function dV(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=dV(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const pV=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=dV(e))&&(r&&(r+=" "),r+=t);return r};function fV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}var mV=n(7266);const gV=n(7598).A;var vV=n(8052),bV=n(7868),yV=n(9172),xV=n(7758),wV=n(8812),_V=n(8280);const SV={black:"#000",white:"#fff"},MV={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},TV={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},EV={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},CV={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},AV={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},RV={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},kV={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},PV=["mode","contrastThreshold","tonalOffset"],LV={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:SV.white,default:SV.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},OV={text:{primary:SV.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:SV.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function NV(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,mV.a)(e.main,i):"dark"===t&&(e.dark=(0,mV.e$)(e.main,o)))}function IV(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,ZR.A)(e,PV),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:AV[200],light:AV[50],dark:AV[400]}:{main:AV[700],light:AV[400],dark:AV[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:TV[200],light:TV[50],dark:TV[400]}:{main:TV[500],light:TV[300],dark:TV[700]}}(t),s=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:EV[500],light:EV[300],dark:EV[700]}:{main:EV[700],light:EV[400],dark:EV[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:RV[400],light:RV[300],dark:RV[700]}:{main:RV[700],light:RV[500],dark:RV[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kV[400],light:kV[300],dark:kV[700]}:{main:kV[800],light:kV[500],dark:kV[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:CV[400],light:CV[300],dark:CV[700]}:{main:"#ed6c02",light:CV[500],dark:CV[900]}}(t);function h(e){return(0,mV.eM)(e,OV.text.primary)>=n?OV.text.primary:LV.text.primary}const d=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:a=700}=e;if(t=(0,$R.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,bV.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,bV.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return NV(t,"light",o,r),NV(t,"dark",a,r),t.contrastText||(t.contrastText=h(t.main)),t},p={dark:OV,light:LV};return(0,yV.A)((0,$R.A)({common:(0,$R.A)({},SV),mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:MV,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r},p[t]),i)}const DV=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function jV(e){return Math.round(1e5*e)/1e5}const FV={textTransform:"uppercase"},zV='"Roboto", "Helvetica", "Arial", sans-serif';function BV(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=zV,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,d=(0,ZR.A)(n,DV);const p=i/14,f=h||(e=>"".concat(e/c*p,"rem")),m=(e,t,n,i,o)=>(0,$R.A)({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===zV?{letterSpacing:"".concat(jV(i/t),"em")}:{},o,u),g={h1:m(o,96,1.167,-1.5),h2:m(o,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(s,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(s,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(s,14,1.75,.4,FV),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,FV),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,yV.A)((0,$R.A)({htmlFontSize:c,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},g),d,{clone:!1})}function UV(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const GV=["none",UV(0,2,1,-1,0,1,1,0,0,1,3,0),UV(0,3,1,-2,0,2,2,0,0,1,5,0),UV(0,3,3,-2,0,3,4,0,0,1,8,0),UV(0,2,4,-1,0,4,5,0,0,1,10,0),UV(0,3,5,-1,0,5,8,0,0,1,14,0),UV(0,3,5,-1,0,6,10,0,0,1,18,0),UV(0,4,5,-2,0,7,10,1,0,2,16,1),UV(0,5,5,-3,0,8,10,1,0,3,14,2),UV(0,5,6,-3,0,9,12,1,0,3,16,2),UV(0,6,6,-3,0,10,14,1,0,4,18,3),UV(0,6,7,-4,0,11,15,1,0,4,20,3),UV(0,7,8,-4,0,12,17,2,0,5,22,4),UV(0,7,8,-4,0,13,19,2,0,5,24,4),UV(0,7,9,-4,0,14,21,2,0,5,26,4),UV(0,8,9,-5,0,15,22,2,0,6,28,5),UV(0,8,10,-5,0,16,24,2,0,6,30,5),UV(0,8,11,-5,0,17,26,2,0,6,32,5),UV(0,9,11,-5,0,18,28,2,0,7,34,6),UV(0,9,12,-6,0,19,29,2,0,7,36,6),UV(0,10,13,-6,0,20,31,3,0,8,38,7),UV(0,10,13,-6,0,21,33,3,0,8,40,7),UV(0,10,14,-6,0,22,35,3,0,8,42,7),UV(0,11,14,-7,0,23,36,3,0,9,44,8),UV(0,11,15,-7,0,24,38,3,0,9,46,8)],VV=["duration","easing","delay"],HV={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},WV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function $V(e){return"".concat(Math.round(e),"ms")}function qV(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function XV(e){const t=(0,$R.A)({},HV,e.easing),n=(0,$R.A)({},WV,e.duration);return(0,$R.A)({getAutoHeightDuration:qV,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:a=0}=r;(0,ZR.A)(r,VV);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:$V(i)," ").concat(o," ").concat("string"===typeof a?a:$V(a)))).join(",")}},e,{easing:t,duration:n})}const YV={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},KV=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function JV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,o=(0,ZR.A)(e,KV);if(e.vars)throw new Error((0,bV.A)(18));const a=IV(n),s=(0,_V.A)(e);let l=(0,yV.A)(s,{mixins:(c=s.breakpoints,u=t,(0,$R.A)({toolbar:{minHeight:56,[c.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[c.up("sm")]:{minHeight:64}}},u)),palette:a,shadows:GV.slice(),typography:BV(a,i),transitions:XV(r),zIndex:(0,$R.A)({},YV)});var c,u;l=(0,yV.A)(l,o);for(var h=arguments.length,d=new Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return l=d.reduce(((e,t)=>(0,yV.A)(e,t)),l),l.unstable_sxConfig=(0,$R.A)({},xV.A,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return(0,wV.A)({sx:e,theme:this})},l}const QV=JV();const ZV=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},eH=e=>ZV(e)&&"classes"!==e,tH=(0,vV.Ay)({themeId:"$$material",defaultTheme:QV,rootShouldForwardProp:eH});const nH=function(e){let{controlled:n,default:r,name:i,state:o="value"}=e;const{current:a}=t.useRef(void 0!==n),[s,l]=t.useState(r);return[a?n:s,t.useCallback((e=>{a||l(e)}),[])]};const rH=t.createContext(void 0);function iH(e,t){const n=(0,$R.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,$R.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,$R.A)({},o),Object.keys(i).forEach((e=>{n[r][e]=iH(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}const oH=t.createContext(void 0);function aH(e){let{props:n,name:r}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?iH(i.defaultProps,r):i.styleOverrides||i.variants?r:iH(i,r)}({props:n,name:r,theme:{components:t.useContext(oH)}})}function sH(e){return aH(e)}const lH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((t=>{!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}),n)},cH="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;const uH=function(e){const n=t.useRef(e);return cH((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current},hH={};const dH=[];class pH{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new pH}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function fH(){const e=function(e,n){const r=t.useRef(hH);return r.current===hH&&(r.current=e(n)),r}(pH.create).current;var n;return n=e.disposeEffect,t.useEffect(n,dH),e}let mH=!0,gH=!1;const vH=new pH,bH={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function yH(e){e.metaKey||e.altKey||e.ctrlKey||(mH=!0)}function xH(){mH=!1}function wH(){"hidden"===this.visibilityState&&gH&&(mH=!0)}function _H(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return mH||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!bH[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const SH=function(){const e=t.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",yH,!0),t.addEventListener("mousedown",xH,!0),t.addEventListener("pointerdown",xH,!0),t.addEventListener("touchstart",xH,!0),t.addEventListener("visibilitychange",wH,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!_H(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(gH=!0,vH.start(100,(()=>{gH=!1})),n.current=!1,!0)},ref:e}};const MH=t.createContext(null);function TH(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function EH(e,t,n){return null!=n[t]?n[t]:e.props[t]}function CH(e,n,r){var i=TH(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,c=a in i,u=n[a],h=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,t.isValidElement)(u)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:EH(s,"exit",e),enter:EH(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:EH(s,"exit",e),enter:EH(s,"enter",e)})}})),o}var AH=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},RH=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(yP(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mP(e,t)}(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,TH(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:EH(e,"appear",r),enter:EH(e,"enter",r),exit:EH(e,"exit",r)})}))):CH(e,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=TH(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,$R.A)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,ZR.A)(e,["component","childFactory"]),o=this.state.contextValue,a=AH(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(MH.Provider,{value:o},a):t.createElement(MH.Provider,{value:o},t.createElement(n,i,a))},n}(t.Component);RH.propTypes={},RH.defaultProps={component:"div",childFactory:function(e){return e}};const kH=RH;const PH=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[h,d]=t.useState(!1),p=pV(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+o},m=pV(r.child,h&&r.childLeaving,i&&r.childPulsate);return l||h||d(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,qn.jsx)("span",{className:p,style:f,children:(0,qn.jsx)("span",{className:m})})},LH=e=>e,OH=(()=>{let e=LH;return{configure(t){e=t},generate:t=>e(t),reset(){e=LH}}})(),NH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function IH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=NH[t];return r?"".concat(n,"-").concat(r):"".concat(OH.generate(e),"-").concat(t)}function DH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=IH(e,t,n)})),r}const jH=DH("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var FH,zH,BH,UH;const GH=["center","classes","className"];let VH,HH,WH,$H;const qH=(0,kz.i7)(VH||(VH=FH||(FH=cR(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),XH=(0,kz.i7)(HH||(HH=zH||(zH=cR(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),YH=(0,kz.i7)(WH||(WH=BH||(BH=cR(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),KH=tH("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),JH=tH(PH,{name:"MuiTouchRipple",slot:"Ripple"})($H||($H=UH||(UH=cR(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),jH.rippleVisible,qH,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),jH.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),jH.child,jH.childLeaving,XH,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),jH.childPulsate,YH,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),QH=t.forwardRef((function(e,n){const r=sH({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=(0,ZR.A)(r,GH),[l,c]=t.useState([]),u=t.useRef(0),h=t.useRef(null);t.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[l]);const d=t.useRef(!1),p=fH(),f=t.useRef(null),m=t.useRef(null),g=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;c((e=>[...e,(0,qn.jsx)(JH,{classes:{ripple:pV(o.ripple,jH.ripple),rippleVisible:pV(o.rippleVisible,jH.rippleVisible),ripplePulsate:pV(o.ripplePulsate,jH.ripplePulsate),child:pV(o.child,jH.child),childLeaving:pV(o.childLeaving,jH.childLeaving),childPulsate:pV(o.childPulsate,jH.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,h.current=a}),[o]),v=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&d.current)return void(d.current=!1);"touchstart"===(null==e?void 0:e.type)&&(d.current=!0);const s=a?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[i,g,p]),b=t.useCallback((()=>{v({},{pulsate:!0})}),[v]),y=t.useCallback(((e,t)=>{if(p.clear(),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{y(e,t)}));f.current=null,c((e=>e.length>0?e.slice(1):e)),h.current=t}),[p]);return t.useImperativeHandle(n,(()=>({pulsate:b,start:v,stop:y})),[b,v,y]),(0,qn.jsx)(KH,(0,$R.A)({className:pV(jH.root,o.root,a),ref:m},s,{children:(0,qn.jsx)(kH,{component:null,exit:!0,children:l})}))})),ZH=QH;function eW(e){return IH("MuiButtonBase",e)}const tW=DH("MuiButtonBase",["root","disabled","focusVisible"]),nW=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],rW=tH("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(tW.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),iW=t.forwardRef((function(e,n){const r=sH({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:b,onFocusVisible:y,onKeyDown:x,onKeyUp:w,onMouseDown:_,onMouseLeave:S,onMouseUp:M,onTouchEnd:T,onTouchMove:E,onTouchStart:C,tabIndex:A=0,TouchRippleProps:R,touchRippleRef:k,type:P}=r,L=(0,ZR.A)(r,nW),O=t.useRef(null),N=t.useRef(null),I=lH(N,k),{isFocusVisibleRef:D,onFocus:j,onBlur:F,ref:z}=SH(),[B,U]=t.useState(!1);c&&B&&U(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{U(!0),O.current.focus()}})),[]);const[G,V]=t.useState(!1);t.useEffect((()=>{V(!0)}),[]);const H=G&&!u&&!c;function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return uH((r=>{t&&t(r);return!n&&N.current&&N.current[e](r),!0}))}t.useEffect((()=>{B&&d&&!u&&G&&N.current.pulsate()}),[u,d,B,G]);const $=W("start",_),q=W("stop",g),X=W("stop",v),Y=W("stop",M),K=W("stop",(e=>{B&&e.preventDefault(),S&&S(e)})),J=W("start",C),Q=W("stop",T),Z=W("stop",E),ee=W("stop",(e=>{F(e),!1===D.current&&U(!1),f&&f(e)}),!1),te=uH((e=>{O.current||(O.current=e.currentTarget),j(e),!0===D.current&&(U(!0),y&&y(e)),b&&b(e)})),ne=()=>{const e=O.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=t.useRef(!1),ie=uH((e=>{d&&!re.current&&B&&N.current&&" "===e.key&&(re.current=!0,N.current.stop(e,(()=>{N.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=uH((e=>{d&&" "===e.key&&N.current&&B&&!e.defaultPrevented&&(re.current=!1,N.current.stop(e,(()=>{N.current.pulsate(e)}))),w&&w(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let ae=l;"button"===ae&&(L.href||L.to)&&(ae=p);const se={};"button"===ae?(se.type=void 0===P?"button":P,se.disabled=c):(L.href||L.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=lH(n,z,O);const ce=(0,$R.A)({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:A,focusVisible:B}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=fV({root:["root",t&&"disabled",n&&"focusVisible"]},eW,i);return n&&r&&(o.root+=" ".concat(r)),o})(ce);return(0,qn.jsxs)(rW,(0,$R.A)({as:ae,className:pV(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:q,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:$,onMouseLeave:K,onMouseUp:Y,onDragLeave:X,onTouchEnd:Q,onTouchMove:Z,onTouchStart:J,ref:le,tabIndex:c?-1:A,type:P},se,L,{children:[a,H?(0,qn.jsx)(ZH,(0,$R.A)({ref:I,center:o},R)):null]}))})),oW=iW;function aW(e){return IH("PrivateSwitchBase",e)}DH("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const sW=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],lW=tH(oW)((e=>{let{ownerState:t}=e;return(0,$R.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),cW=tH("input",{shouldForwardProp:eH})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),uW=t.forwardRef((function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,className:a,defaultChecked:s,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:d,inputProps:p,inputRef:f,name:m,onBlur:g,onChange:v,onFocus:b,readOnly:y,required:x=!1,tabIndex:w,type:_,value:S}=e,M=(0,ZR.A)(e,sW),[T,E]=nH({controlled:i,default:Boolean(s),name:"SwitchBase",state:"checked"}),C=t.useContext(rH);let A=l;C&&"undefined"===typeof A&&(A=C.disabled);const R="checkbox"===_||"radio"===_,k=(0,$R.A)({},e,{checked:T,disabled:A,disableFocusRipple:c,edge:u}),P=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e;return fV({root:["root",n&&"checked",r&&"disabled",i&&"edge".concat(gV(i))],input:["input"]},aW,t)})(k);return(0,qn.jsxs)(lW,(0,$R.A)({component:"span",className:pV(P.root,a),centerRipple:!0,focusRipple:!c,disabled:A,tabIndex:null,role:void 0,onFocus:e=>{b&&b(e),C&&C.onFocus&&C.onFocus(e)},onBlur:e=>{g&&g(e),C&&C.onBlur&&C.onBlur(e)},ownerState:k,ref:n},M,{children:[(0,qn.jsx)(cW,(0,$R.A)({autoFocus:r,checked:i,defaultChecked:s,className:P.input,disabled:A,id:R?d:void 0,name:m,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;E(t),v&&v(e,t)},readOnly:y,ref:f,required:x,ownerState:k,tabIndex:w,type:_},"checkbox"===_&&void 0===S?{}:{value:S},p)),T?o:h]}))})),hW=uW;function dW(e){return IH("MuiSwitch",e)}const pW=DH("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),fW=["className","color","edge","size","sx"],mW=tH("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat(gV(n.edge))],t["size".concat(gV(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(pW.thumb)]:{width:16,height:16},["& .".concat(pW.switchBase)]:{padding:4,["&.".concat(pW.checked)]:{transform:"translateX(16px)"}}}}]}),gW=tH(hW,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(pW.input)]:t.input},"default"!==n.color&&t["color".concat(gV(n.color))]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(pW.checked)]:{transform:"translateX(20px)"},["&.".concat(pW.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(pW.checked," + .").concat(pW.track)]:{opacity:.5},["&.".concat(pW.disabled," + .").concat(pW.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(pW.input)]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,mV.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(pW.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,mV.X4)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(pW.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,mV.a)(t.palette[n].main,.62):(0,mV.e$)(t.palette[n].main,.55))}},["&.".concat(pW.checked," + .").concat(pW.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),vW=tH("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),bW=tH("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),yW=t.forwardRef((function(e,t){const n=sH({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:a="medium",sx:s}=n,l=(0,ZR.A)(n,fW),c=(0,$R.A)({},n,{color:i,edge:o,size:a}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:a}=e,s=fV({root:["root",n&&"edge".concat(gV(n)),"size".concat(gV(r))],switchBase:["switchBase","color".concat(gV(i)),o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},dW,t);return(0,$R.A)({},t,s)})(c),h=(0,qn.jsx)(bW,{className:u.thumb,ownerState:c});return(0,qn.jsxs)(mW,{className:pV(u.root,r),sx:s,ownerState:c,children:[(0,qn.jsx)(gW,(0,$R.A)({type:"checkbox",icon:h,checkedIcon:h,ref:t,ownerState:c},l,{classes:(0,$R.A)({},u,{root:u.switchBase})})),(0,qn.jsx)(vW,{className:u.track,ownerState:c})]})})),xW=yW;class wW extends t.Component{constructor(e){super(e),this.state={}}render(){return(0,qn.jsx)("div",{className:"CamerasPanel",children:(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Synchronize Cameras"}),(0,qn.jsx)(xW,{checked:this.props.robotSceneManager.shouldSyncViews(),onChange:e=>{this.props.robotSceneManager.setShouldSyncViews(e.target.checked)}})]})})}}class _W extends t.Component{constructor(e){var t,n;super(e),this.onTextInputChange=this.onTextInputChange.bind(this),this.onTextInputKeyDown=this.onTextInputKeyDown.bind(this),this.state={oldValue:null!==(t=this.props.value)&&void 0!==t?t:"",currValue:null!==(n=this.props.value)&&void 0!==n?n:""}}onTextInputChange(e){let t=e.currentTarget.value;this.props.filter&&(t=this.props.filter(t));let n=this.props.onChange;this.setState({currValue:t},(()=>{n&&n(t)}))}onTextInputKeyDown(e){if("enter"===e.key.toLowerCase()||"enter"===e.code.toLowerCase()){let t=e.target;if(t){let e=this.props.filter?this.props.filter(t.value):t.value,n=this.props.onChange,r=this.props.onReturnPressed;this.setState({oldValue:e,currValue:e},(()=>{n&&n(e),r&&r(e)}))}}else"escape"!==e.key.toLowerCase()&&"escape"!==e.code.toLowerCase()||this.setState({currValue:this.state.oldValue})}componentDidUpdate(e,t){e.value!==this.props.value&&void 0!==this.props.value&&this.setState({currValue:this.props.value})}render(){return(0,qn.jsxs)("div",{className:"LabeledTextInput",children:[this.props.labelValue?(0,qn.jsx)("label",{children:this.props.labelValue}):null,(0,qn.jsx)("input",{type:"text",value:this.state.currValue,onKeyDown:this.onTextInputKeyDown,onChange:this.onTextInputChange})]})}}function SW(){return(SW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function MW(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function TW(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,r.current}var EW=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},CW=function(e){return"touches"in e},AW=function(e){return e&&e.ownerDocument.defaultView||self},RW=function(e,t,n){var r=e.getBoundingClientRect(),i=CW(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:EW((i.pageX-(r.left+AW(e).pageXOffset))/r.width),top:EW((i.pageY-(r.top+AW(e).pageYOffset))/r.height)}},kW=function(e){!CW(e)&&e.preventDefault()},PW=t.memo((function(e){var n=e.onMove,r=e.onKey,i=MW(e,["onMove","onKey"]),o=(0,t.useRef)(null),a=TW(n),s=TW(r),l=(0,t.useRef)(null),c=(0,t.useRef)(!1),u=(0,t.useMemo)((function(){var e=function(e){kW(e),(CW(e)?e.touches.length>0:e.buttons>0)&&o.current?a(RW(o.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=c.current,i=AW(o.current),a=n?i.addEventListener:i.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=o.current;if(r&&(kW(t),!function(e,t){return t&&!CW(e)}(t,c.current)&&r)){if(CW(t)){c.current=!0;var i=t.changedTouches||[];i.length&&(l.current=i[0].identifier)}r.focus(),a(RW(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,a]),h=u[0],d=u[1],p=u[2];return(0,t.useEffect)((function(){return p}),[p]),t.createElement("div",SW({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:o,onKeyDown:d,tabIndex:0,role:"slider"}))})),LW=function(e){return e.filter(Boolean).join(" ")},OW=function(e){var n=e.color,r=e.left,i=e.top,o=void 0===i?.5:i,a=LW(["react-colorful__pointer",e.className]);return t.createElement("div",{className:a,style:{top:100*o+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},NW=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},IW=(Math.PI,function(e){return VW(DW(e))}),DW=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?NW(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?NW(parseInt(e.substring(6,8),16)/255,2):1}},jW=function(e){return GW(BW(e))},FW=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:NW(e.h),s:NW(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:NW(i/2),a:NW(r,2)}},zW=function(e){var t=FW(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},BW=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:NW(255*[r,s,a,a,l,r][c]),g:NW(255*[l,r,r,s,a,a][c]),b:NW(255*[a,a,l,r,r,s][c]),a:NW(i,2)}},UW=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},GW=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i<1?UW(NW(255*i)):"";return"#"+UW(t)+UW(n)+UW(r)+o},VW=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:NW(60*(s<0?s+6:s)),s:NW(o?a/o*100:0),v:NW(o/255*100),a:i}},HW=t.memo((function(e){var n=e.hue,r=e.onChange,i=LW(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(PW,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:EW(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":NW(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(OW,{className:"react-colorful__hue-pointer",left:n/360,color:zW({h:n,s:100,v:100,a:1})})))})),WW=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:zW({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(PW,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:EW(n.s+100*e.left,0,100),v:EW(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+NW(n.s)+"%, Brightness "+NW(n.v)+"%"},t.createElement(OW,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:zW(n)})))})),$W=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},qW=function(e,t){return e.toLowerCase()===t.toLowerCase()||$W(DW(e),DW(t))};function XW(e,n,r){var i=TW(r),o=(0,t.useState)((function(){return e.toHsva(n)})),a=o[0],s=o[1],l=(0,t.useRef)({color:n,hsva:a});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},s(t)}}),[n,e]),(0,t.useEffect)((function(){var t;$W(a,l.current.hsva)||e.equal(t=e.fromHsva(a),l.current.color)||(l.current={hsva:a,color:t},i(t))}),[a,e,i]);var c=(0,t.useCallback)((function(e){s((function(t){return Object.assign({},t,e)}))}),[]);return[a,c]}var YW,KW="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,JW=new Map,QW=function(e){KW((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!JW.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',JW.set(t,r);var i=YW||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}}),[])},ZW=function(e){var n=e.className,r=e.colorModel,i=e.color,o=void 0===i?r.defaultColor:i,a=e.onChange,s=MW(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);QW(l);var c=XW(r,o,a),u=c[0],h=c[1],d=LW(["react-colorful",n]);return t.createElement("div",SW({},s,{ref:l,className:d}),t.createElement(WW,{hsva:u,onChange:h}),t.createElement(HW,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},e$={defaultColor:"000",toHsva:IW,fromHsva:function(e){return jW({h:e.h,s:e.s,v:e.v,a:1})},equal:qW},t$=function(e){return t.createElement(ZW,SW({},e,{colorModel:e$}))},n$=/^#?([0-9A-F]{3,8})$/i,r$=function(e){var n=e.color,r=void 0===n?"":n,i=e.onChange,o=e.onBlur,a=e.escape,s=e.validate,l=e.format,c=e.process,u=MW(e,["color","onChange","onBlur","escape","validate","format","process"]),h=(0,t.useState)((function(){return a(r)})),d=h[0],p=h[1],f=TW(i),m=TW(o),g=(0,t.useCallback)((function(e){var t=a(e.target.value);p(t),s(t)&&f(c?c(t):t)}),[a,c,s,f]),v=(0,t.useCallback)((function(e){s(e.target.value)||p(a(r)),m(e)}),[r,a,s,m]);return(0,t.useEffect)((function(){p(a(r))}),[r,a]),t.createElement("input",SW({},u,{value:l?l(d):d,spellCheck:"false",onChange:g,onBlur:v}))},i$=function(e){return"#"+e},o$=function(e){var n=e.prefixed,r=e.alpha,i=MW(e,["prefixed","alpha"]),o=(0,t.useCallback)((function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)}),[r]),a=(0,t.useCallback)((function(e){return function(e,t){var n=n$.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,r)}),[r]);return t.createElement(r$,SW({},i,{escape:o,format:n?i$:void 0,process:i$,validate:a}))};class a$ extends t.Component{render(){return(0,qn.jsxs)("div",{className:"ColorPicker",children:[(0,qn.jsx)(t$,{color:this.props.color,onChange:e=>this.props.onColorMapChange(e)}),(0,qn.jsxs)("div",{className:"ColorInput",children:[(0,qn.jsx)("label",{children:"Enter color in hex format (e.g., C5050C):"}),(0,qn.jsx)(o$,{color:this.props.color,onChange:e=>{this.props.onColorMapChange(e),this.props.forceUpdateTabNames()}})]})]})}}const s$={option:(e,t)=>({...e,fontSize:"15px",color:t.isFocused?"rgb(23, 24, 25)":"rgb(238, 238, 238)",backgroundColor:t.isFocused?"#7BB2D9":"rgb(50, 50, 50)"}),control:e=>({...e,height:"100%",width:"100%",backgroundColor:"rgb(50, 50, 50)",borderColor:"rgb(50, 50, 50)"}),container:(e,t)=>({...e,height:"100%",width:"100%",display:"inline-flex"}),menuList:(e,t)=>({...e,width:"100%",backgroundColor:"rgb(50, 50, 50)"}),noOptionsMessage:e=>({...e,fontSize:"15px",height:"100%",width:"100%",backgroundColor:"rgb(50, 50, 50)",borderColor:"rgb(50, 50, 50)"}),placeholder:e=>({...e,fontSize:"15px",color:"rgb(183, 183, 189)"}),singleValue:e=>({...e,color:"rgb(183, 183, 189)"})};class l$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.dropdownRef=[],this._animationCsvUrlInput=void 0,this.selectedOptions=[],this.recalcTimeWarp=()=>{ir.recalculateTimeWarping()},this.state={counter:0,panelHeight:620,panelWidth:1200,dropdowns:[!1,!1],baseScene:void 0,currRobot:new Map,currJoint:new Map,currRobotPart:new Set,need_update:!0,currWarpedScene:void 0,applyToAllScenes:!1,keyObjects:[]},this._graphDiv=(0,t.createRef)();for(let n=0;n<2;n++)this.dropdownRef[n]=(0,t.createRef)();this._animationCsvUrlInput=(0,t.createRef)(),this.onUploadAnimationCSV=this.onUploadAnimationCSV.bind(this),this.onLoadAnimationCSV=this.onLoadAnimationCSV.bind(this)}genSceneOptions(){let e=[];const{robotSceneManager:t,robotScene:n}=this.props;for(const r of t.allManagedRobotScenes())r===n||r.isTimeWarping()||e.push({value:r.id().value(),label:r.name()});return e}genKeyObjectOptions(){let e=[];const{robotScene:t}=this.props,n=this.state.baseScene;if(void 0===n)return e;for(const r of t.robots())if(void 0!==n.getRobotByName(r.name())){e.push({value:r.id().value(),name:r.name()+"\n position"});for(const t of r.articuatedJoints())e.push({value:t.id().value(),name:r.name()+"\n"+t.name()+" position"}),e.push({value:t.id().value(),name:r.name()+"\n"+t.name()+" angle"});for(const t of r.links())e.push({value:t.id().value(),name:r.name()+"\n"+t.name()+" position"})}return e}onChangeScene(e){this.deselectDropdowns(0);const t=e.value;if(!t)return;const n=this.props.robotSceneManager,r=n.robotSceneById(t);r&&(n.activeRobotScenes().includes(r)||n.activateRobotScene(r),this.setState({baseScene:r}),this.selectDropdowns(0))}componentDidUpdate(e){const{robotScene:t}=this.props;t!==e.robotScene&&!t.isTimeWarping()&&(this.dropdownRef[0].current.setValue(this.dropdownRef[0].current.state.prevProps.placeholder),this.deselectDropdowns(0))}deselectDropdowns(e){this.state.dropdowns[e]=!1,1==e+1?this.selectedOptions=[]:void 0!=this.dropdownRef[e+1]&&this.dropdownRef[e+1].current.setValue(this.dropdownRef[e+1].current.state.prevProps.placeholder)}selectDropdowns(e){this.state.dropdowns[e]=!0}createNewGraphTab(e){}onConfirm(e){for(let s=0;s<1;s++)if(!this.state.dropdowns[s])throw new Error("".concat(s," Not every dropdown is selected. Need to select all dropdowns to show the graph"));if(0==this.selectedOptions.length)throw new Error("Not every dropdown is selected. Need to select all dropdowns to show the graph");const{robotScene:t,robotSceneManager:n}=this.props,{baseScene:r,keyObjects:i}=this.state,o=t?n.getManagedRobotSceneData(t):void 0;if(void 0!==o){let e=o.robotScene.clone(!0,!1,!1);this.setState({currWarpedScene:e}),e.setName(t.name()+" Time Warped Based On "+(null===r||void 0===r?void 0:r.name())),n.addManagedRobotScenes([{path:[...o.path],robotScene:e,metrics:new Map(o.metrics)}]),e.setTimeWarpBase(r);let i=[];for(const t of this.selectedOptions){i.push(t.name);const[n,o]=t.name.split("\n"),[s,l]=o.split(" ");if(0===s.length){let t=e.getRobotByName(n);null===t||void 0===t||t.setPositionIncludeInTimeWarpConsideration(!0)}else{let t=e.getJointByName(n,s);var a;if(void 0===t)t=e.getLinkByName(n,s),null===(a=t)||void 0===a||a.setPosIncludeInTimeWarpConsideration(!0);else"angle"==l?t.setAngleIncludeInTimeWarpConsideration(!0):t.setPosIncludeInTimeWarpConsideration(!0)}e.setTimeWarpBase(void 0),e.setTimeWarpBase(r)}e.setKeyObjects(i)}}onTimeWarpBar(e){const{robotScene:t,robotSceneManager:n}=this.props;t.isTimeWarping()?this.props.addNewTimeWarpTimeBar(t.id().value()):void 0!==this.state.currWarpedScene&&this.props.addNewTimeWarpTimeBar(this.state.currWarpedScene.id().value())}onAddGroup(){this.props.animationManager.addStoredAnimation(new fy)}deleteAnimationAssociatedwithRobot(e,t){let n=[...e.animations()];for(let r=0;r<n.length;r++)t===n[r].robot()&&(console.log("remove animations!!!!"),e.removeAnimation(n[r]))}autoBindNewAnimationtoRobot(e){console.log("auto bind new animation with robot!!!");let t=e.robotNames();const{robotScene:n}=this.props;for(const r of n.robots())if(t.has(r.name())){0===this.props.animationManager.animationGroups.length&&this.onAddGroup();for(const[t,n]of oy(this.props.animationManager.animationGroups()))this.deleteAnimationAssociatedwithRobot(n,r),n.addAnimation(new py(r,e)),-1===this.props.animationManager.activeAnimations().indexOf(n)&&this.props.animationManager.addActiveAnimation(n)}}async onLoadAnimationCSV(){document.querySelectorAll(".LoadCSVMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let e=this._animationCsvUrlInput.current;if(e){let t=e.value;if(t.length>0)for(const e of await Zw.loadFromURL(t,"ReloadCSV"))this.props.robotSceneManager.addAnimationTable(e),this.autoBindNewAnimationtoRobot(e);else ir.error("Failed to load the animation CSV file: The URL for the animation CSV file was empty!")}}async onUploadAnimationCSV(e){document.querySelectorAll(".LoadCSVMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let t=e.currentTarget.files;if(t)for(const n of t)for(const e of await Zw.loadFromLocalFile(n,"ReloadCSV"))this.props.robotSceneManager.addAnimationTable(e),this.autoBindNewAnimationtoRobot(e)}displayKeyObjects(e){let t;if(e){const{robotScene:e}=this.props;let n=e.keyObjects();t=(0,qn.jsx)("div",{children:n.map((e=>(0,qn.jsx)("p",{children:e},e)))})}else t=(0,qn.jsx)(lG.default,{placeholder:"Select a key object ...",showCheckbox:!0,displayValue:"name",style:{optionContainer:{border:"none"},option:{color:"rgb(238, 238, 238)",backgroundColor:"rgb(50, 50, 50)",fontSize:"15px"},searchBox:{fontSize:"15px",border:"none",backgroundColor:"rgb(23, 24, 25)",width:"100%",marginLeft:"-1rem"},inputField:{fontSize:"15px",width:"100%",padding:"1rem 1rem"},chips:{backgroundColor:"rgb(50, 50, 50)",color:"rgb(238, 238, 238)",fontSize:"15px"},notFound:{color:"rgb(238, 238, 238)",backgroundColor:"rgb(50, 50, 50)",fontSize:"15px"},placeholder:{backgroundColor:"rgb(238, 238, 238)"}},onSelect:(e,t)=>{this.selectedOptions.push(t),console.log("select "+t.name)},onRemove:(e,t)=>{this.selectedOptions=this.selectedOptions.filter((e=>e.value!==t.value))},options:this.genKeyObjectOptions(),selectedValues:this.selectedOptions});return t}displayBaseScene(e){let t;if(e){var n;const{robotScene:e,robotSceneManager:r}=this.props;let i=null===(n=r.robotSceneById(e.baseSceneId()))||void 0===n?void 0:n.name();t=(0,qn.jsx)("p",{children:i})}else t=(0,qn.jsx)(aG,{placeholder:"Select a base scene ...",ref:this.dropdownRef[0],options:this.genSceneOptions(),onChange:this.onChangeScene.bind(this),isSearchable:!0,styles:s$});return t}onTraceSizeChange(){return e=>{this.props.robotScene.setTraceSize(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onAxisSizeChange(){return e=>{this.props.robotScene.setAxisSize(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onDensityChange(){return e=>{this.props.robotScene.setDensity(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onDirectionalLightChange(){return e=>{this.props.robotScene.setDirectionalLightIntensity(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onAmbientLightChange(){return e=>{this.props.robotScene.setAmbientLightIntensity(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onGroundPlaneOpacityChange(){return e=>{this.props.robotScene.setGroundPlaneOpacity(e),this.state.applyToAllScenes&&this.applyChangesToAll()}}onColorMapChange(e){this.props.robotScene.setBackgroundColor(e),this.state.applyToAllScenes&&this.applyChangesToAll()}onGroundPlaneColorChange(e){this.props.robotScene.setGroundPlaneColor(e),this.state.applyToAllScenes&&this.applyChangesToAll()}onCheckGroundPlane(e){this.props.robotScene.setGroundPlaneVisibility(e.currentTarget.checked),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll()}onCheckWorldFrame(e){this.props.robotScene.setWorldFrameObjectVisibility(e.currentTarget.checked),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll()}toggleWorldFrame(){this.props.robotScene.toggleWorldFrame(),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll(),this.props.forceUpdateTabNames()}toggleCameraType(){this.props.robotScene.toggleCameraType(),this.setState({need_update:!this.state.need_update}),this.state.applyToAllScenes&&this.applyChangesToAll(),this.props.forceUpdateTabNames()}onCheckApplytoAll(e){this.setState({applyToAllScenes:e.currentTarget.checked}),this.applyChangesToAll()}applyChangesToAll(){const{robotScene:e}=this.props,t=e.backgroundColor(),n=e.ambientLightIntensity(),r=e.directionalLightIntensity(),i=e.isGroundPlaneVisible(),o=e.worldFrame(),a=e.cameraType(),s=e.axisSize(),l=e.density(),c=e.isWorldFrameObjectVisible(),u=e.traceSize(),h=e.groundPlaneColor(),d=e.groundPlaneOpacity();for(const p of this.props.robotSceneManager.allManagedRobotScenes())p.setBackgroundColor(t),p.setAmbientLightIntensity(n),p.setDirectionalLightIntensity(r),p.setGroundPlaneVisibility(i),p.setWorldFrame(o),p.setCameraType(a),p.setAxisSize(s),p.setDensity(l),p.setWorldFrameObjectVisibility(c),p.setTraceSize(u),p.setGroundPlaneColor(h),p.setGroundPlaneOpacity(d)}render(){const{robotScene:e,robotSceneManager:t}=this.props,{currWarpedScene:n}=this.state,r=e.isTimeWarping();let i=e.axisSize(),o=e.density();return(0,qn.jsxs)("div",{className:"SceneOptionPanel",ref:this._graphDiv,children:[(0,qn.jsxs)("div",{className:"PopUpGroup",children:[(0,qn.jsx)(_W,{labelValue:"Scene Name:",value:e.name(),onReturnPressed:t=>{e.setName(t),this.props.forceUpdateTabNames()}}),(0,qn.jsx)(dG,{buttonValue:"Legend",title:"Click and drag to add a legend to the scene",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>["SceneLegend&".concat(Zb(4),"&").concat(this.props.robotScene.id().value()),e=>{}]}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.SceneOptionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Appearance"})}),(0,qn.jsx)(hV,{children:(0,qn.jsxs)("div",{className:"SceneViews",children:[(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Ground Plane:"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,qn.jsx)(xW,{checked:e.isGroundPlaneVisible(),onChange:this.onCheckGroundPlane.bind(this)}),(0,qn.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" World Frame:"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,qn.jsx)(xW,{checked:e.isWorldFrameObjectVisible(),onChange:this.onCheckWorldFrame.bind(this)}),(0,qn.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"World Frame Convention:"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" ROS"}),(0,qn.jsx)(xW,{checked:"THREE.js"===e.worldFrame(),onChange:this.toggleWorldFrame.bind(this)}),(0,qn.jsx)("label",{className:"switch-right-label",children:"THREE.js "})]})]}),(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsx)(uG,{label:"Directional Light Intensity",value:e.directionalLightIntensity(),min:0,max:10,step:.1,onChange:this.onDirectionalLightChange()}),(0,qn.jsx)(uG,{label:"Ambient Light Intensity",value:e.ambientLightIntensity(),min:0,max:10,step:.1,onChange:this.onAmbientLightChange()}),(0,qn.jsx)(uG,{label:"Ground Plane Opacity",value:e.groundPlaneOpacity(),min:0,max:1,step:.01,onChange:this.onGroundPlaneOpacityChange()})]}),(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsx)(uG,{label:"Trace Size",value:e.traceSize(),min:1e-4,max:5,step:.001,onChange:this.onTraceSizeChange()},"trace size"),(0,qn.jsx)(uG,{label:"Axis Size",value:i,min:0,max:.2,step:.001,onChange:this.onAxisSizeChange()},"axis size"),(0,qn.jsx)(uG,{label:"Axis Density",value:o,min:1e-4,max:1,step:.001,onChange:this.onDensityChange()},"density")]}),(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{children:"Background Color"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:e.backgroundColor(),onColorMapChange:this.onColorMapChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{children:"Ground Plane Color"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:e.groundPlaneColor(),onColorMapChange:this.onGroundPlaneColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]}),(0,qn.jsx)("div",{className:"top-line",children:(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Apply Changes to All Scenes"}),(0,qn.jsx)(xW,{checked:this.state.applyToAllScenes,onChange:this.onCheckApplytoAll.bind(this)})]})})]})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Camera"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)("div",{className:"SceneViews",children:(0,qn.jsxs)("div",{children:[(0,qn.jsx)("div",{children:(0,qn.jsx)(wW,{robotSceneManager:t})}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Camera Type:"}),(0,qn.jsx)("label",{className:"switch-right-label",children:"Orthographic"}),(0,qn.jsx)(xW,{checked:"Orthographic"===e.cameraType(),onChange:this.toggleCameraType.bind(this)}),(0,qn.jsx)("label",{className:"switch-left-label",children:"Perspective"})]})]})})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Time Warping Options"})}),(0,qn.jsx)(hV,{children:(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Base Scene : "}),(0,qn.jsx)("div",{className:"Select-container",children:this.displayBaseScene(r)})]}),(0,qn.jsx)("div",{className:"row-container",children:(0,qn.jsx)("label",{children:"Key Object : "})}),(0,qn.jsx)("div",{className:"Multiselect-container",children:this.displayKeyObjects(r)}),(0,qn.jsxs)("div",{className:"ButtonsContainer",style:{display:"flex",gap:"1rem"},children:[!r&&(0,qn.jsx)(sG,{buttonValue:"Confirm",onClick:this.onConfirm.bind(this)}),(0,qn.jsx)(sG,{buttonValue:"Warped Time Bar",onClick:this.onTimeWarpBar.bind(this)}),(0,qn.jsx)(dG,{className:"TimeWarp",title:"Click and drag to create a time warp graph",buttonValue:"Warping Graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let t=Zb(4),r=e.isTimeWarping()?e.id().value():null===n||void 0===n?void 0:n.id().value();return["TimeWarpedGraph&".concat(t,"&").concat(r,"&motion"),e=>{this.createNewGraphTab(t)}]}})]})]})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Edit Motion"})}),(0,qn.jsx)(hV,{children:(0,qn.jsxs)("div",{className:"ReloadCSV",children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Replace with a local animation: "}),(0,qn.jsx)(Az,{accept:[".csv"],vertical:!1,onChange:this.onUploadAnimationCSV})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Replace with an online animation: "}),(0,qn.jsx)("input",{ref:this._animationCsvUrlInput,type:"text",placeholder:" URL "}),(0,qn.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadAnimationCSV})]})]})})]})})]})}}let c$=[{robot_name:"sawyer",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/sawyer/urdf/sawyer_gripper.urdf"},{robot_name:"fetch",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/fetch/urdf/fetch.urdf"},{robot_name:"mico",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/kinova/urdf/mico.urdf"},{robot_name:"ur5",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/ur5/urdf/ur5_gripper.urdf"},{robot_name:"spot arm",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/spot_arm/urdf/spot_arm.urdf"},{robot_name:"panda",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/panda/urdf/panda.urdf"},{robot_name:"iiwa",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/robots/iiwa/urdf/iiwa.urdf"},{robot_name:"bottle",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/objects/glass_bottle.glb"},{robot_name:"table",url:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/objects/side_table.glb"},{robot_name:"end-effector targets",url:"EETarget"}];class u$ extends t.Component{constructor(e){super(e),this._urdfURLInput=void 0,this._jsonURLInput=void 0,this._importSceneURLInput=void 0,this._animationCsvUrlInput=void 0,this._exampleRobotInput=void 0,this._exampleRobotOptions=[],this.dropdownRef=void 0,this.state={savedLayout:void 0},this.dropdownRef=(0,t.createRef)(),this.onLoadURDFURL=this.onLoadURDFURL.bind(this),this.onUploadJsonScene=this.onUploadJsonScene.bind(this),this.onLoadAnimationCSV=this.onLoadAnimationCSV.bind(this),this.onLoadSession=this.onLoadSession.bind(this),this.onSaveSession=this.onSaveSession.bind(this),this.onUploadSession=this.onUploadSession.bind(this),this.onUploadAnimationCSV=this.onUploadAnimationCSV.bind(this),this.onUploadAnimationRosbag=this.onUploadAnimationRosbag.bind(this),this.onSelectExampleRobot=this.onSelectExampleRobot.bind(this),this.currScene=this.currScene.bind(this),this._animationCsvUrlInput=(0,t.createRef)(),this._urdfURLInput=(0,t.createRef)(),this._jsonURLInput=(0,t.createRef)(),this._importSceneURLInput=(0,t.createRef)(),this._exampleRobotInput=(0,t.createRef)();for(const t of c$)this._exampleRobotOptions.push({value:t.url,label:t.robot_name})}currScene(){return this.props.robotSceneManager.currRobotScene(!1)}assureRobotScene(){return this.props.robotSceneManager.currRobotScene(!1)}async onLoadURDFURL(){document.querySelectorAll(".LoadRobotMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let e=this._urdfURLInput.current;if(e){let t=e.value;if(t.length>0){let e=await this.currScene().loadRobotFromURL(t);this.autoBindNewRobotwithAnimation(e)}else ir.error("Failed to load the URDF file: The URL for the URDF file was empty.")}}onUploadJsonScene(e){let t=e.currentTarget.files;t&&this.currScene().loadJsonFromLocalFile(t[0])}static deleteAnimationAssociatedwithRobot(e,t){let n,r=[...e.animations()];for(let i=0;i<r.length;i++)t===r[i].robot()&&(console.log("remove animations!!!!"),e.removeAnimation(r[i]),n=r[i]);return n}autoBindNewRobotwithAnimation(e){0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new fy);for(const[t,n]of oy(this.props.animationManager.animationGroups()))for(const r of this.props.robotSceneManager.animationTables())r.robotNames().has(e.name())&&(n.addAnimation(new py(e,r)),-1===this.props.animationManager.activeAnimations().indexOf(n)&&this.props.animationManager.addActiveAnimation(n))}autoBindNewAnimationtoRobot(e){let t=e.robotNames(),n=new Set,r="";for(const a of t)n.add(a);for(const a of this.currScene().robots())if(t.has(a.name())){n.delete(a.name()),r=r+a.name()+", ",0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new fy);for(const[t,n]of oy(this.props.animationManager.animationGroups()))u$.deleteAnimationAssociatedwithRobot(n,a),n.addAnimation(new py(a,e)),-1===this.props.animationManager.activeAnimations().indexOf(n)&&this.props.animationManager.addActiveAnimation(n)}const i=document.querySelector(".LoadAndSavePanel"),o=null===i||void 0===i?void 0:i.querySelector(".LoadCSV");if(r.length>0){const e="Successfully bind "+r,t=document.createElement("p");t.innerText=e,t.classList.add("LoadCSVMessage"),null===o||void 0===o||o.appendChild(t)}if(n.size>0){let e="";for(const i of n)e=e+i+", ";const t="Cannot find robot "+e,r=document.createElement("p");r.innerText=t,r.style.color="red",r.classList.add("LoadCSVMessage"),null===o||void 0===o||o.appendChild(r)}}async onLoadAnimationCSV(){document.querySelectorAll(".LoadCSVMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let e=this._animationCsvUrlInput.current;if(e){let t=e.value;if(t.length>0)for(const e of await Zw.loadFromURL(t,"LoadCSV"))this.props.robotSceneManager.addAnimationTable(e),this.autoBindNewAnimationtoRobot(e);else ir.error("Failed to load the animation CSV file: The URL for the animation CSV file was empty!")}this.props.robotSceneManager.activateRobotScene(this.currScene())}async onUploadAnimationCSV(e){document.querySelectorAll(".LoadCSVMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let t=e.currentTarget.files;if(t)for(const n of t)for(const e of await Zw.loadFromLocalFile(n,"LoadCSV"))console.log(e),this.props.robotSceneManager.addAnimationTable(e),this.autoBindNewAnimationtoRobot(e);this.props.robotSceneManager.activateRobotScene(this.currScene())}async onUploadAnimationRosbag(e){document.querySelectorAll(".LoadRosbagMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let t=e.currentTarget.files;if(t)for(const n of t)await Zw.parseRosbag(this.props.robotSceneManager,n,"LoadRosbag");this.props.robotSceneManager.activateRobotScene(this.currScene())}async onUploadSession(e){let t=e.currentTarget.files;if(t)for(const n of t)this.props.robotSceneManager.loadSessionFromLocalFile(n,this.props.onRestoreLayout)}async onSaveSession(){let e=this.props.robotSceneManager.saveSession();e.layout=this.props.onSaveLayout(),J_(e,"session.json")}async onLoadSession(){let e=this._importSceneURLInput.current;if(e){let t=e.value;t.length>0?this.props.robotSceneManager.loadSessionFromURL(t,this.props.onRestoreLayout):ir.error("Failed to load the sessions: The URL for the sessions was empty.")}}async onSelectExampleRobot(){document.querySelectorAll(".LoadRobotMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));let e=this.dropdownRef.current;if(e&&e.props&&e.props.value){let t=e.props.value.label,n=e.props.value.value;"EETarget"===n?this.currScene().addEETarget():n.length>0?this.currScene().loadRobotFromURL(n,t):ir.error("Failed to load the URDF file: The URL for the URDF file was empty.")}}onSaveLayout(){let e=this.props.onSaveLayout();const t=JSON.stringify(e),n=JSON.parse(t);console.log(n),void 0!==n&&this.setState({savedLayout:n})}render(){return(0,qn.jsxs)("div",{className:"LoadAndSavePanel",children:[(0,qn.jsx)("div",{className:"PopUpGroup",children:(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.LoadAndSavePanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})}),(0,qn.jsx)("br",{}),(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsxs)("label",{children:[" ",(0,qn.jsx)("b",{children:" Workspace "}),"  "]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Upload a workspace: "}),(0,qn.jsx)(Az,{accept:[".json"],vertical:!1,onChange:this.onUploadSession})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Load from a url: "}),(0,qn.jsx)("input",{ref:this._importSceneURLInput,type:"text",placeholder:"URL"}),(0,qn.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadSession})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Download current workspace: "}),(0,qn.jsx)("input",{type:"button",value:"Download",onClick:this.onSaveSession})]})]}),(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsxs)("label",{children:[" ",(0,qn.jsx)("b",{children:"  Mesh "}),"  "]}),(0,qn.jsxs)("div",{className:"LoadRobot",children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Example robots "}),(0,qn.jsx)("div",{className:"select-container",children:(0,qn.jsx)(aG,{placeholder:"Select a robot ...",options:this._exampleRobotOptions,ref:this.dropdownRef,isSearchable:!0,styles:s$})}),(0,qn.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectExampleRobot})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Load online URDF: "}),(0,qn.jsx)("input",{ref:this._urdfURLInput,type:"text",placeholder:" URL "}),(0,qn.jsx)("label",{children:"  "}),(0,qn.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadURDFURL})]})]})]}),(0,qn.jsxs)("div",{className:"top-line ",children:[(0,qn.jsxs)("label",{children:[" ",(0,qn.jsx)("b",{children:"  Motion "}),"  "]}),(0,qn.jsxs)("div",{className:"LoadCSV",children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Upload a CSV file "}),(0,qn.jsx)(Az,{accept:[".csv"],vertical:!1,onChange:this.onUploadAnimationCSV})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Load CSV from a url: "}),(0,qn.jsx)("input",{ref:this._animationCsvUrlInput,type:"text",placeholder:" URL "}),(0,qn.jsx)("label",{children:"  "}),(0,qn.jsx)("input",{type:"button",value:"Load",onClick:this.onLoadAnimationCSV})]})]}),(0,qn.jsx)("div",{className:"LoadRosbag",children:(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:" Upload a Rosbag: "}),(0,qn.jsx)(Az,{accept:[".bag"],vertical:!1,onChange:this.onUploadAnimationRosbag})]})})]})]})}}class h${constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};this._canvas=void 0,this._camera=void 0,this._preprocess=void 0,this._postprocess=void 0,this._canvas=e,this._camera=t,this._preprocess=n,this._postprocess=r}canvas(){return this._canvas}camera(){return this._camera}preprocess(){this._preprocess(this._canvas)}postprocess(){this._postprocess(this._canvas)}}const d$={type:"change"},p$={type:"start"},f$={type:"end"};class m$ extends ja{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ps,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ar.ROTATE,MIDDLE:ar.DOLLY,RIGHT:ar.PAN},this.touches={ONE:sr.ROTATE,TWO:sr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",V),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(d$),n.update(),i=r.NONE},this.update=function(){const t=new ps,h=(new ds).setFromUnitVectors(e.up,new ps(0,1,0)),d=h.clone().invert(),p=new ps,f=new ds,m=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(h),a.setFromVector3(t),n.autoRotate&&i===r.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(a.theta+=s.theta*n.dampingFactor,a.phi+=s.phi*n.dampingFactor):(a.theta+=s.theta,a.phi+=s.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),a.theta=g<=v?Math.max(g,Math.min(v,a.theta)):a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),t.setFromSpherical(a),t.applyQuaternion(d),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),c.set(0,0,0)),l=1,!!(u||p.distanceToSquared(n.object.position)>o||8*(1-f.dot(n.object.quaternion))>o)&&(n.dispatchEvent(d$),p.copy(n.object.position),f.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",U),n.domElement.removeEventListener("wheel",G),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",B),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",V)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const o=1e-6,a=new dv,s=new dv;let l=1;const c=new ps;let u=!1;const h=new Ka,d=new Ka,p=new Ka,f=new Ka,m=new Ka,g=new Ka,v=new Ka,b=new Ka,y=new Ka,x=[],w={};function _(){return Math.pow(.95,n.zoomSpeed)}function S(e){s.theta-=e}function M(e){s.phi-=e}const T=function(){const e=new ps;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),E=function(){const e=new ps;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),C=function(){const e=new ps;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*a/i.clientHeight,n.object.matrix),E(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),E(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function A(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){h.set(e.clientX,e.clientY)}function P(e){f.set(e.clientX,e.clientY)}function L(){if(1===x.length)h.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);h.set(e,t)}}function O(){if(1===x.length)f.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);f.set(e,t)}}function N(){const e=x[0].pageX-x[1].pageX,t=x[0].pageY-x[1].pageY,n=Math.sqrt(e*e+t*t);v.set(0,n)}function I(e){if(1==x.length)d.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);d.set(n,r)}p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),M(2*Math.PI*p.y/t.clientHeight),h.copy(d)}function D(e){if(1===x.length)m.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}g.subVectors(m,f).multiplyScalar(n.panSpeed),C(g.x,g.y),f.copy(m)}function j(e){const t=q(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);b.set(0,o),y.set(0,Math.pow(b.y/v.y,n.zoomSpeed)),A(y.y),v.copy(b)}function F(e){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",B)),function(e){x.push(e)}(e),"touch"===e.pointerType?function(e){switch($(e),x.length){case 1:switch(n.touches.ONE){case sr.ROTATE:if(!1===n.enableRotate)return;L(),i=r.TOUCH_ROTATE;break;case sr.PAN:if(!1===n.enablePan)return;O(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case sr.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&N(),n.enablePan&&O(),i=r.TOUCH_DOLLY_PAN;break;case sr.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&N(),n.enableRotate&&L(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(p$)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case ar.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case ar.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;P(e),i=r.PAN}else{if(!1===n.enableRotate)return;k(e),i=r.ROTATE}break;case ar.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;k(e),i=r.ROTATE}else{if(!1===n.enablePan)return;P(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(p$)}(e))}function z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch($(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;I(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&j(e),n.enablePan&&D(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&j(e),n.enableRotate&&I(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){if(!1===n.enabled)return;switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),p.subVectors(d,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;S(2*Math.PI*p.x/t.clientHeight),M(2*Math.PI*p.y/t.clientHeight),h.copy(d),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),y.subVectors(b,v),y.y>0?A(_()):y.y<0&&R(_()),v.copy(b),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(n.panSpeed),C(g.x,g.y),f.copy(m),n.update()}(e)}}(e))}function B(e){W(e),0===x.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",B)),n.dispatchEvent(f$),i=r.NONE}function U(e){W(e)}function G(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(p$),function(e){e.deltaY<0?R(_()):e.deltaY>0&&A(_()),n.update()}(e),n.dispatchEvent(f$))}function V(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function H(e){!1!==n.enabled&&e.preventDefault()}function W(e){delete w[e.pointerId];for(let t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId)return void x.splice(t,1)}function $(e){let t=w[e.pointerId];void 0===t&&(t=new Ka,w[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){const t=e.pointerId===x[0].pointerId?x[1]:x[0];return w[t.pointerId]}n.domElement.addEventListener("contextmenu",H),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",U),n.domElement.addEventListener("wheel",G,{passive:!1}),this.update()}}class g$ extends t.Component{constructor(e){super(e),this._orbitView=void 0,this._orbitCamera=void 0,this._perspecCamera=void 0,this._orthoCamera=void 0,this._controls=void 0,this._canvasRef=void 0,this._resize_observer=void 0,this._raycaster=void 0,this._pointer=void 0,this._syncViewCallback=void 0,this._perspecCamera=new Bb.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3),this._perspecCamera.position.set(3,3,3),this._perspecCamera.lookAt(0,0,0),this._perspecCamera.up.set(0,0,1),this._orthoCamera=new Bb.OrthographicCamera(window.innerWidth/-500,window.innerWidth/500,window.innerHeight/500,window.innerHeight/-500,.001,1e3),this._orthoCamera.position.set(3,3,3),this._orthoCamera.lookAt(0,0,0),this._orthoCamera.up.set(0,0,1),this._orbitCamera=this._perspecCamera,this._controls=void 0,this._raycaster=new Bb.Raycaster,this.onCanvasMouseDown=this.onCanvasMouseDown.bind(this),this.onCanvasMouseMove=this.onCanvasMouseMove.bind(this),this.onCanvasMouseOut=this.onCanvasMouseOut.bind(this),this._pointer=new Bb.Mesh(new Bb.SphereGeometry(.01,30,30),new Bb.MeshBasicMaterial({transparent:!0,opacity:.75,color:new Bb.Color(16777215*Math.random())})),this._canvasRef=t.createRef(),this.initScene(this.props.robotScene)}canSelectRobot(){var e;return null!==(e=this.props.allowSelecting)&&void 0!==e&&e&&this.props.robotSceneManager.allowRobotSelection()}addPointer(e,t){if(this.props.allowSelecting){const n=e.scene();-1===n.children.indexOf(this._pointer)&&n.add(this._pointer),this._pointer.position.copy(t),e.render()}}removePointer(e){const t=e.scene();-1!==t.children.indexOf(this._pointer)&&(t.remove(this._pointer),e.render())}initScene(e){e.runOnce(nr.INIT,(()=>{e.scene().background=new Bb.Color(e.backgroundColor()),e.scene().position.set(0,0,0);let t=16777215;const n=new Bb.DirectionalLight(t,e.directionalLightIntensity());n.castShadow=!0,n.shadow.mapSize.setScalar(1024),n.position.set(5,5,30),n.shadow.bias=-5e-4,n.lookAt(0,0,0),e.scene().add(n),e.setDirectionalLight(n);const r=new Bb.AmbientLight(t,e.ambientLightIntensity());e.scene().add(r),e.setAmbientLight(r);const i=new Bb.Mesh(new Bb.PlaneBufferGeometry,new Bb.MeshStandardMaterial({color:new Bb.Color(e.groundPlaneColor()),opacity:e.groundPlaneOpacity(),transparent:!0,depthWrite:!0}));i.scale.setScalar(20),i.position.z=-.002,i.receiveShadow=!0,i.visible=e.isGroundPlaneVisible(),e.scene().add(i);const o=new Bb.GridHelper(20,20,16777215,3355443);o.rotation.x=Math.PI/2,o.position.z=-.001,o.visible=e.isGroundPlaneVisible(),e.scene().add(o),e.setGroundPlane(i,o)}))}onCanvasMouseOut(){this.props.robotSceneManager.allowRobotSelection()&&this.removePointer(this.props.robotScene)}onCanvasMouseMove(e){if(this._canvasRef.current){const t=new Bb.Vector2;let n=e.target;if(n){let r=n,i=e.clientX-(e.clientX-e.offsetX),o=e.clientY-(e.clientY-e.offsetY);t.x=i/r.clientWidth*2-1,t.y=-o/r.clientHeight*2+1}const r=this.props.robotScene.robots(),i=[],o=new Map;for(const e of r)if(e.visible())for(const t of e.meshes())t.visible&&(o.set(t,e),i.push(t));this._raycaster.setFromCamera(t,this._orbitCamera);let a=this._raycaster.intersectObjects(i);if(a.length>0){let e=a[0],t=o.get(e.object);t?this.canSelectRobot()&&this.props.robotScene.setHoveredRobot(t):(console.error("Intersected object was not a robot!"),this.props.robotScene.setHoveredRobot(void 0)),this.addPointer(this.props.robotScene,e.point)}else this.props.robotScene.setHoveredRobot(void 0),this.removePointer(this.props.robotScene)}}onCanvasMouseDown(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");if(t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.canSelectRobot()){let e=this.props.robotSceneManager,t=this.props.robotScene;for(const n of e.allManagedRobotScenes())n.setSelectedRobot(void 0);t.setSelectedRobot(t.hoveredRobot()),e.setCurrRobotScene(t),void 0===t.hoveredRobot()?void 0!==this.props.setSceneOptionPanelActive&&this.props.setSceneOptionPanelActive():void 0!==this.props.setRobotOptionPanelActive&&this.props.setRobotOptionPanelActive();for(const n of e.allManagedRobotScenes())n!==t&&n.setHoveredRobot(void 0)}}updateOrbitControls(e,t){void 0===this._controls||this._controls.dispose(),this._controls=new m$(this._orbitCamera,t);let n=this._controls.update.bind(this._controls);this._controls.update=()=>{let t=n();return this.props.robotSceneManager.setCurrSyncViewpoint([this._orbitCamera.getWorldPosition(new Bb.Vector3),(new Bb.Quaternion).setFromEuler(this._orbitCamera.rotation)]),e.render(),t},this._controls.target.y=0,this._controls.enableDamping=!0,this._controls.dampingFactor=.5,this._controls.rotateSpeed=.5,this._controls.update()}mount(e,t){t&&(this.initScene(e),this.updateOrbitControls(e,t),this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._syncViewCallback=e=>{let[t,n]=e;this._orbitCamera.position.copy(t),this._orbitCamera.rotation.setFromQuaternion(n),this.props.robotScene.render()},this.props.robotSceneManager.addSyncViewCallback(this._syncViewCallback),this._orbitView=new h$(t,this._orbitCamera,(e=>{let t=Math.floor(e.clientWidth),n=Math.floor(e.clientHeight);e.width===t&&e.height===n||(e.width=t,e.height=n)})),e.addView(this._orbitView),e.render(),t.addEventListener("mouseout",this.onCanvasMouseOut),t.addEventListener("mousemove",this.onCanvasMouseMove),t.addEventListener("click",this.onCanvasMouseDown),this._resize_observer&&this._resize_observer.unobserve(t),this._resize_observer=new ResizeObserver((()=>{this.props.robotScene.render()})),this._resize_observer.observe(t))}unmount(e,t){var n;(this._syncViewCallback&&(this.props.robotSceneManager.removeSyncViewCallback(this._syncViewCallback),this._syncViewCallback=void 0),this._controls&&(this._controls.dispose(),this._controls=void 0),this._orbitView&&(e.removeView(this._orbitView),this._orbitView=void 0),t)&&(t.removeEventListener("mouseout",this.onCanvasMouseOut),t.removeEventListener("mousemove",this.onCanvasMouseMove),t.removeEventListener("click",this.onCanvasMouseDown),null===(n=this._resize_observer)||void 0===n||n.unobserve(t));this.removePointer(e)}componentDidUpdate(e){e.robotScene!==this.props.robotScene&&(this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current)),this.props.robotScene.isToggleWorldFrame()&&("ROS"===this.props.robotScene.worldFrame()?this._orbitCamera.up.set(0,0,1):this._orbitCamera.up.set(0,1,0),this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current),this.props.robotScene.finishToggleWorldFrame()),this.props.robotScene.isToggleCamera()&&("Orthographic"===this.props.robotScene.cameraType()?this._orbitCamera=this._orthoCamera:this._orbitCamera=this._perspecCamera,this.unmount(e.robotScene,this._canvasRef.current),this.mount(this.props.robotScene,this._canvasRef.current),this.props.robotScene.finishToggleCamera())}componentDidMount(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.mount(this.props.robotScene,this._canvasRef.current)}componentWillUnmount(){this.unmount(this.props.robotScene,this._canvasRef.current)}decomposeId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}dragOverHandler(e){e.preventDefault()}dropHandler(e){e.preventDefault();let t=e.dataTransfer.getData("text/plain");const[n,r,i]=this.decomposeId(t);let o=this.props.robotSceneManager.robotSceneById(n);if(void 0===o)return;let a=o.getRobotByName(r);if(void 0===a)return;const s=this.props.robotScene;if(void 0!==i){let e=a.jointMap().get(i);void 0===e&&(e=a.linkMap().get(i)),s===o?s.hasChildTrace(a,e)||s.addChildTrace(a,_R.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),e):s.hasReceivedGhostTrace(a,e)||o.sendGhostTracesTo(a,_R.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),e,s)}else if(a.controlledCloneInScene(s));else{a.addControlledClone(s).setOpacity(.5),s.render()}}render(){return(0,qn.jsx)("div",{className:"RobotCanvas",onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),children:(0,qn.jsx)("canvas",{className:"RobotCanvasCanvas",ref:this._canvasRef})})}}const v$=hy(5e3);class b$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this.prevTimes=void 0,this.prevVals=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this),this.state={prev_x:null,prev_y:null,margin:{top:20,right:10,bottom:40,left:60},prev_lines:new Map,time_min:-999,time_max:-999,val_concat:[],newCurr:this.props.currTime,mouseXCoord:-1,originalMouseXCoord:-1,currDragItem:null},this.prevTimes=this.props.times,this.prevVals=this.props.vals}componentDidMount(){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let{height:e,width:t}=this.props;t-=20,e-=20;let n=this.drawGraph(!0,!0);n&&AC(this._graphDiv.current).append("svg").attr("width",t).attr("height",e).node().appendChild(n)}componentDidUpdate(e){const t=e.startTime!==this.props.startTime||e.endTime!==this.props.endTime,n=e.lineWidth!==this.props.lineWidth,r=e.axisColor!==this.props.axisColor;let i=!gy().isEqual(new Set(e.line_colors),new Set(this.props.line_colors))&&e.line_colors.length===this.props.line_colors.length,o=e.height!==this.props.height||e.width!==this.props.width;if(e.times!==this.props.times||e.vals!==this.props.vals||o||i||t||n||r){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let{width:e,height:r}=this.props;e-=20,r-=20;let a=this.drawGraph(t,i,o,n);a&&AC(this._graphDiv.current).append("svg").attr("width",e).attr("height",r).node().appendChild(a)}}filterData(e,t){let n=[],r=[];const{times:i,vals:o}=this.props;if(0===i.length||0===o.length)return[[[0,8]],[[0,8]]];let a=0,s=i[0].length-1;for(let l=0;l<i[0].length;l++)if(i[0][l]>=e){a=l;break}for(let l=i[0].length-1;l>=0;l--)if(i[0][l]<=t){s=l;break}for(let l=0;l<i.length;l++){let e=0;n[l]=[],r[l]=[];for(let t=a;t<s;t++)n[l][e]=i[l][t],r[l][e]=o[l][t],e++}return[n,r]}static parseData(e,t){if(void 0==e||void 0==t)return v$("ERROR: undefined arrays!"),[];if(e.length!==t.length)return v$("ERROR: parseData param arrays length discrepancy"),[{times:-99999,vals:0}];let n=[];for(let r=0;r<e.length;r++)n.push({times:e[r],vals:t[r]});return n}static concatData(e){let t=[];for(let n=0;n<e.length;n++)t=t.concat(e[n]);return t}static xPositionFromTime(e,t,n,r){return(r-t)/(n-t)*e}static TimeFromXPosition(e,t,n,r){let i=r/e*(n-t);return i>n?i=n:i<t&&(i=t),i}prevMapChanged(){const{prev_map:e}=this.props,{prev_lines:t}=this.state;if(0===e.size)return!0;for(const[n]of e)if(!(n in t))return!0;return!1}dragCurr(e){const{time_min:t,time_max:n,margin:r,mouseXCoord:i,originalMouseXCoord:o,currDragItem:a}=this.state;let s=this.props.width-r.right-r.left,l=e.x;if(l>s&&this.state.mouseXCoord<0)return void this.setState({mouseXCoord:l,currDragItem:"curr"});if(l>s){if("curr"!==a)return;l=l-i+o}let c=b$.TimeFromXPosition(s,t,n,l);c<t?c=t:c>n&&(c=n),this.props.onCurrChange(c)}dragStart(e){const{time_min:t,time_max:n,margin:r,mouseXCoord:i,originalMouseXCoord:o,currDragItem:a}=this.state;let s=this.props.width-r.right-r.left,l=e.x;if(e.x<0&&(l=0),l>s&&this.state.mouseXCoord<0)return void this.setState({mouseXCoord:l,currDragItem:"start"});if(l>s){if("start"!==a)return;l=l-i+o}let c=b$.TimeFromXPosition(s,t,n,l);c>n?c=n:c<t&&(c=t),this.props.onStartChange(c)}dragEnd(e){const{time_min:t,time_max:n,margin:r,mouseXCoord:i,originalMouseXCoord:o,currDragItem:a}=this.state;let s=this.props.width-r.right-r.left,l=e.x;if(l>s&&this.state.mouseXCoord<0)return void this.setState({mouseXCoord:l,currDragItem:"end"});if(l>s){if("end"!==a)return;l=l-i+o}let c=b$.TimeFromXPosition(s,t,n,l);c>n?c=n:c<t&&(c=t),this.props.onEndChange(c)}currMouse(e){this.setState({originalMouseXCoord:e.x})}endMouse(e){this.setState({mouseXCoord:-1,originalMouseXCoord:-1})}createOnClickHandler(e){return()=>{this.props.onDeleteChange&&this.props.onDeleteChange(e)}}drawGraph(e,t,n,r){const{times:i,vals:o,startTime:a,endTime:s,currTime:l,isZoom:c,isTimeWarp:u,isDiff:h,line_names:d,line_colors:p,prev_map:f,line_ids:m,title:g,lineWidth:v,axisColor:b,onGraphUpdate:y}=this.props,x=this.props.width,w=this.props.height,_=this.prevMapChanged(),{margin:S,prev_lines:M,prev_x:T,prev_y:E}=this.state,C=x-S.left-S.right-20,A=w-S.top-S.bottom-20;let R=AC(this._graphDiv.current).append("svg").remove().attr("width",C).attr("height",A).append("g").attr("transform","translate(".concat(S.left,",     ").concat(S.top,")")),[k,P]=this.filterData(a,s),L=[b$.parseData(k[0],P[0])];for(let Y=1;Y<k.length;Y++)L.push(b$.parseData(k[Y],P[Y]));let O=BC().on("start",(e=>{this.currMouse(e)})).on("drag",(e=>{this.dragCurr(e)})).on("end",(e=>{this.endMouse(e)})),N=b$.concatData(k),I=b$.concatData(P);b$.xPositionFromTime(C,lS(N),sS(N),a);const D=b$.xPositionFromTime(C,lS(N),sS(N),l);b$.xPositionFromTime(C,lS(N),sS(N),s);var j,F;R.append("rect").attr("x",D-1).attr("y",0).attr("width",2).attr("height",A).attr("fill","#b00").attr("fill-opacity","75%"),console.log("width: "+C+" height: "+A),y(!1)||_||e||n||!T||!E||r?(j=UA().range([0,C]).domain(aS(N)),F=UA().range([A,0]).domain(aS(I))):(j=T,F=E);let z,B=_S(j).tickSize(0).tickPadding(10).tickValues(cS(lS(N),sS(N)+(sS(N)-lS(N))/8,(sS(N)-lS(N))/8)),U=SS(F).tickSize(0).tickPadding(10).tickValues(cS(lS(I),sS(I)+(sS(I)-lS(I))/8,(sS(I)-lS(I))/8)),G=R.append("g").attr("transform","translate(0, ".concat(A,")")).classed("GraphAxis",!0).call(B),V=R.append("g").classed("GraphAxis",!0).call(U),H=U.tickSizeInner(-C).tickPadding(10).tickFormat("").tickSizeOuter(0),W=R.append("g").classed("GraphGrid",!0).call(H);V.select(".domain").attr("stroke-width",0),W.select(".domain").attr("stroke-width",0),G.selectAll("line, path").style("stroke",b),V.selectAll("line, path").style("stroke",b),W.selectAll("line, path").style("stroke",b),G.selectAll("text").style("fill",b),V.selectAll("text").style("fill",b);let $=bR().x((e=>j(e.times))).y((e=>F(e.vals)));if(u){if(2===L.length){let e=R.append("path").remove().append("path").data([L[1]]).attr("class","line").attr("fill","none").attr("stroke",p[1]).attr("stroke-width",v).attr("d",$).node();R.node().appendChild(e);let t=R.append("path").remove().append("path").data([L[0]]).attr("class","line").attr("fill","none").attr("stroke",p[0]).attr("stroke-width",v).attr("d",$).node();R.node().appendChild(t)}}else for(let Y=0;Y<L.length;Y++)if(z=m[Y],-1===f.get(z)||!M.has(z)||e||t||n||y(!1)||r){let e=R.append("path").remove().append("path").data([L[Y]]).attr("class","line").attr("fill","none").attr("stroke",p[Y]).attr("stroke-width",v).attr("d",$).node();R.node().appendChild(e),M.set(z,e)}else R.node().appendChild(M.get(z));let q="Time",X=g;return u&&(q="Base Scene Time",X="Time Warped Scene Time"),R.append("text").attr("class","xLabel").attr("fill",b).attr("text-anchor","middle").attr("x",.5*C).attr("y",A+35).text(q),R.append("text").attr("class","yLabel").attr("fill",b).attr("text-anchor","middle").attr("y",-45).attr("x",-.5*A).attr("transform","rotate(-90)").text(X),R.append("rect").attr("x",D-20).attr("y",0).attr("width",40).attr("height",A).attr("fill","#b00").attr("fill-opacity","0%").call(O),this.setState({prev_lines:M,prev_x:j,prev_y:F,time_min:lS(N),time_max:sS(N)}),y(!0),R.node()}render(){const{isZoom:e,isDiff:t,isTimeWarp:n,times:r,title:i,selected:o,axisColor:a}=this.props;let s={display:"inline-block",marginBottom:"10px",color:a};return(0,qn.jsxs)("div",{children:[e&&!t&&!n&&0!==r.length&&(0,qn.jsx)("p",{style:s,children:"Zoomed-in Pos/Vel/Acc/Jerk Graph"}),!e&&t&&!n&&(0,qn.jsx)("div",{style:{textAlign:"center"},children:(0,qn.jsxs)("p",{style:s,children:[i," Difference Graph"]})}),!e&&!t&&n&&(0,qn.jsxs)("p",{style:s,children:[i," Graph"]}),(0,qn.jsx)("div",{className:"lineGraph",ref:this._graphDiv})]})}}const y$=hy(5e3);class x$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.times=void 0,this.values=void 0,this.clickHandler=e=>{var t;let n=document.querySelectorAll(".RobotCanvasCanvas");n.forEach((e=>e.classList.remove("selected"))),n=document.querySelectorAll(".GraphPanel"),n.forEach((e=>e.classList.remove("selected"))),null===(t=this._graphDiv.current)||void 0===t||t.classList.add("selected"),this.props.graph.setCurrProperty(this.state.currProperty),this.props.robotSceneManager.setCurrGraph(this.props.graph.id()),this.props.setGraphOptionPanelActive()},this.getPositions.bind(this),this.fillGraphData.bind(this);const n=this.props.robotSceneManager;this.state={counter:0,graph_list:new Map,prev_times:{start:n.currStartTime(),end:n.currEndTime(),curr:n.currTime()},use_timeWarp:!1,line_names:[],line_ids:[],color_map:new Map,refresh:!1,currObjects:new Set,currProperty:this.props.graph.currProperty(),currScene:void 0,panelHeight:200,panelWidth:300,is_part_changed:new Map,need_update:!0,graph_update:!1,filter:this.props.graph.filter(),velocity_map:new Map,acceleration_map:new Map},this.times=[],this.values=[],this._graphDiv=(0,t.createRef)()}getPositions(e,t,n,r,i,o){let a;const s=this.props.robotSceneManager,l=s.robotSceneById(e),c=s.startTime(),u=s.endTime();let h,d=l.timeWarping();if(h=o&&d?d.timeWarpMap()[1]:_R.frameRange(c,u,20,2e3),void 0===n)return a=l.frameDataFor(t,h,void 0),[a.times,this.getNumArr(a.robotPositions,i)];if(n instanceof p_)return console.log("robot link"),a=l.frameDataFor(t,h,n),[a.times,this.getNumArr(a.linkPositions,i)];if(n instanceof d_)return console.log("robot joint"),a=l.frameDataFor(t,h,n),console.log("positions"),console.log(a),r?[a.times,a.jointAngles]:[a.times,this.getNumArr(a.jointPositions,i)];throw new Error("Unknown robot part type")}getNumArr(e,t){let n=[];if("magnitude"===t)for(let r=0;r<e.length;r++){let t=e[r].x,i=e[r].y,o=e[r].z;n.push(Math.sqrt(t*t+i*i+o*o))}else for(let r=0;r<e.length;r++)n.push(e[r][t]);return n}isAllJoints(e,t,n,r){if("x"!==n&&"y"!==n&&"z"!==n&&"angle"!==n&&"magnitude"!==n)return y$("invalid type in isAllJoints"),!1;for(const[i]of e.jointMap()){if(!t.has(i))return!1;if("angle"===n){if("position"===r&&!t.get(i).angle[0])return!1;if("velocity"===r&&!t.get(i).angle[1])return!1;if("acceleration"===r&&!t.get(i).angle[2])return!1;if("jerk"===r&&!t.get(i).angle[3])return!1}else{if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(i).position_type.includes(n)||"position"!==r))return!1;if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(i).velocity_type.includes(n)||"velocity"!==r))return!1;if(!("x"!==n&&"y"!==n&&"z"!==n&&"magnitude"!==n||t.get(i).acceleration_type.includes(n)||"acceleration"!==r))return!1;if(("x"===n||"y"===n||"z"===n||"magnitude"===n)&&!t.get(i).jerk_type.includes(n)&&"jerk"===r)return!1}}return!0}onGraphUpdate(e){const{graph_update:t}=this.state;return e?(this.setState({graph_update:!1}),!1):t}booleanSum(e){let t=0;for(const n of e)t+=Number(n);return t}static getRobotByName(e,t){const n=e.robots();for(let r=0;r<n.length;r++)if(n[r].name()===t)return n[r]}isPartChanged(){const{is_part_changed:e}=this.state;for(const[,t]of e)if(-1===t)return!0;return!1}genChangeData(e,t,n){void 0===n&&(n=this.state.filter);let r=[];r[0]=[],r[1]=[];let i=[];for(;n&&n>0&&t.length>1;){i[0]=t[0]/4+t[0]/2+t[1]/4;for(let e=1;e<t.length-1;e++)i[e]=t[e-1]/4+t[e]/2+t[e+1]/4;i[t.length-1]=t[t.length-1]/4+t[t.length-1]/2+t[t.length-2]/4,t=gy().cloneDeep(i),n--}for(let o=0;o<e.length-1;o++)r[0][o]=e[o],r[1][o]=(t[o+1]-t[o])/(e[o+1]-e[o]);return r[0][e.length-1]=e[e.length-1],r[1][e.length-1]=r[1][e.length-2],r}getPositionVector(e,t,n,r){let i;const o=this.props.robotSceneManager,a=o.robotSceneById(e),s=o.startTime(),l=o.endTime();let c,u=a.timeWarping();if(c=r&&u?u.timeWarpMap()[1]:_R.frameRange(s,l,20,2e3),void 0===n)return i=a.frameDataFor(t,c,void 0),[i.times,i.robotPositions];if(n instanceof p_)return i=a.frameDataFor(t,c,n),[i.times,i.linkPositions];if(n instanceof d_)return i=a.frameDataFor(t,c,n),[i.times,i.jointPositions];throw new Error("Unknown robot part type")}getVectorArray(e){let t=[[],[],[]];for(let n=0;n<e.length;n++)t[0].push(e[n].x),t[1].push(e[n].y),t[2].push(e[n].z);return t}getVelocityVector(e,t,n,r,i){let o=this.getPositionVector(e,t,n,r),[a,s,l]=this.getVectorArray(o[1]),c=this.genChangeData(o[0],a)[1],u=this.genChangeData(o[0],s)[1],h=this.genChangeData(o[0],l)[1];return[o[0],c,u,h]}getAccelerationVector(e,t,n,r,i){let[o,a,s,l]=this.getVelocityVector(e,t,n,r,i);return[o,this.genChangeData(o,a)[1],this.genChangeData(o,s)[1],this.genChangeData(o,l)[1]]}getJerkVector(e,t,n,r,i){let[o,a,s,l]=this.getAccelerationVector(e,t,n,r,i);return[o,this.genChangeData(o,a)[1],this.genChangeData(o,s)[1],this.genChangeData(o,l)[1]]}calculateMagitude(e,t,n){let r=[];for(let i=0;i<e.length;i++)r.push(Math.sqrt(e[i]*e[i]+t[i]*t[i]+n[i]*n[i]));return r}fillTimeValData(e,t,n,r){t.push(r),n.push(e)}checkId(e,t,n){if(!t.has(e.value)){if(!t.has(e.value+"&tw"))return console.log("Error: ".concat(e," does not exist in is_part_changed but in graph_list!")),!1;n.value=!0,e.value+="&tw"}return!0}fillGraphData(e,t,n){const{graph_list:r,is_part_changed:i,color_map:o,currScene:a,refresh:s,velocity_map:l,acceleration_map:c}=this.state,u=this.props.robotSceneManager,h=this.props.graph;let d=this.times,p=this.values,f=0,m=[],g=[],v=[],b=[],y=new Map,x="",w="",_=this.state.use_timeWarp,S=new Map;s||(y=gy().cloneDeep(o));for(const[j,F]of r){const[e,t]=j.split("#"),r=F.position_type,o=F.velocity_type,a=F.acceleration_type,s=F.jerk_type;for(let l=0;l<r.length;l++){var M;if(console.log("object position"+j),w="".concat(j,"&").concat(r[l],"&position"),!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(-1===o||n){const t=this.getPositions(e,F.robot,void 0,!1,r[l],_);m[f]=t[0],g[f]=t[1]}else m[f]=d[o],g[f]=p[o];S.set(r[l],f),i.set(w,f),x="".concat(null===(M=u.robotSceneById(e))||void 0===M?void 0:M.name(),"_").concat(t,"_").concat(r[l],"_Cartesian position").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let c=0;c<o.length;c++){var T;if(_=!1,console.log("object velocity"+j),w="".concat(j,"&").concat(o[c],"&velocity"),!this.checkId({value:w},i,{value:_}))continue;let r=i.get(w);if(-1===r||n)if("magnitude"===o[c]){let t=this.getVelocityVector(e,F.robot,void 0,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=S.get(o[c]);t=n?[m[n],g[n]]:this.getPositions(e,F.robot,void 0,!1,o[c],_);let r=this.genChangeData(t[0],t[1]);l.set(j+"&"+o[c],this.genChangeData(t[0],t[1],0)),m[f]=r[0],g[f]=r[1]}else m[f]=d[r],g[f]=p[r];i.set(w,f),x="".concat(null===(T=u.robotSceneById(e))||void 0===T?void 0:T.name(),"_").concat(t,"_").concat(o[c],"_Cartesian velocity").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let M=0;M<a.length;M++){var E;if(_=!1,console.log("object acceleration"+j),w="".concat(j,"&").concat(a[M],"&acceleration"),!this.checkId({value:w},i,{value:_}))continue;let r=i.get(w);if(-1===r||n)if("magnitude"===a[M]){let t=this.getAccelerationVector(e,F.robot,void 0,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=l.get(w);if(n)t=[n[0],n[1]];else{let n;y$("no index for velocity");let r=S.get(a[M]);r?(y$("has position"),n=[m[r],g[r]]):(y$("no index for position"),n=this.getPositions(e,F.robot,void 0,!1,a[M],_)),y$("computed velocity");let i=this.genChangeData(n[0],n[1],0);l.set(j+"&"+a[M],i),t=[i[0],i[1]]}let r=this.genChangeData(t[0],t[1]);c.set(j+"&"+a[M],this.genChangeData(t[0],t[1],0)),m[f]=r[0],g[f]=r[1]}else m[f]=d[r],g[f]=p[r];i.set(w,f),x="".concat(null===(E=u.robotSceneById(e))||void 0===E?void 0:E.name(),"_").concat(t,"_").concat(a[M],"_Cartesian acceleration").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let M=0;M<s.length;M++){var C;if(console.log("object jerk"+j),_=!1,w="".concat(j,"&").concat(s[M],"&jerk"),!this.checkId({value:w},i,{value:_}))continue;let r=i.get(w);if(-1===r||n)if("magnitude"===s[M]){let t=this.getJerkVector(e,F.robot,void 0,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=c.get(j+"&"+s[M]);if(n)t=[n[0],n[1]];else{let n,r=l.get(j+"&"+s[M]);if(r)n=[r[0],r[1]];else{let t,r=S.get(s[M]);t=r?[m[r],g[r]]:this.getPositions(e,F.robot,void 0,!1,s[M],_);let i=this.genChangeData(t[0],t[1],0);l.set(j+"&"+s[M],i),n=[i[0],i[1]]}let i=this.genChangeData(n[0],n[1],0);c.set(j+"&"+s[M],i),t=[i[0],i[1]]}let r=this.genChangeData(t[0],t[1]);m[f]=r[0],g[f]=r[1]}else m[f]=d[r],g[f]=p[r];i.set(w,f),x="".concat(null===(C=u.robotSceneById(e))||void 0===C?void 0:C.name(),"_").concat(t,"_").concat(s[M],"_Cartesian jerk").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(const[S,M]of F.robotParts){if(_=!1,M.angle[0]){var A;if(w=j+"&"+S+"&angle&position",!this.checkId({value:w},i,{value:_}))continue;let r=i.get(w);if(-1===r||n){console.log("filter changes");const t=this.getPositions(e,F.robot,M.robotPart,!0,"x",_);m[f]=t[0],g[f]=t[1]}else m[f]=d[r],g[f]=p[r];i.set(w,f),x="".concat(null===(A=u.robotSceneById(e))||void 0===A?void 0:A.name(),"_").concat(t,"_\n").concat(S,"_joint_position").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}if(M.angle[1]){var R;if(w=j+"&"+S+"&angle&velocity",!this.checkId({value:w},i,{value:_}))continue;let r=i.get(w);if(-1===r||n){let t;t=M.angle[0]?[m[f-1],g[f-1]]:this.getPositions(e,F.robot,M.robotPart,!0,"x",_);let n=this.genChangeData(t[0],t[1]);m[f]=n[0],g[f]=n[1]}else m[f]=d[r],g[f]=p[r];i.set(w,f),x="".concat(null===(R=u.robotSceneById(e))||void 0===R?void 0:R.name(),"_").concat(t,"_\n").concat(S,"_joint_velocity").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}if(M.angle[2]){var k;let r=j+"&"+S+"&angle";if(w=r+"&acceleration",!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(-1===o||n){let t,n=l.get(r);if(n)t=[n[0],n[1]];else{let n;console.log("no cache for velocity "+r);let o=i.get(r+"&position");o?(console.log("has position"),n=[m[o],g[o]]):n=this.getPositions(e,F.robot,M.robotPart,!0,"x",_),console.log(m);let a=this.genChangeData(n[0],n[1],0);l.set(r,a),t=[a[0],a[1]]}let o=this.genChangeData(t[0],t[1]);c.set(r,this.genChangeData(t[0],t[1],0)),m[f]=o[0],g[f]=o[1]}else m[f]=d[o],g[f]=p[o];i.set(w,f),x="".concat(null===(k=u.robotSceneById(e))||void 0===k?void 0:k.name(),"_").concat(t,"_\n").concat(S,"_joint_acceleration").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}if(M.angle[3]){var P;let r=j+"&"+S+"&angle";if(w=r+"&jerk",!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(-1===o||n){let t,n=c.get(r);if(n)t=[n[0],n[1]];else{let n,o=l.get(r);if(o)n=[o[0],o[1]];else{let t;y$("no cache for velocity "+r);let o=i.get(r+"&position");o?(y$("has position"),t=[m[o],g[o]]):t=this.getPositions(e,F.robot,M.robotPart,!0,"x",_),y$("computed velocity");let a=this.genChangeData(t[0],t[1],0);l.set(r,a),n=[a[0],a[1]]}let a=this.genChangeData(n[0],n[1]);c.set(r,this.genChangeData(n[0],n[1],0)),t=[a[0],a[1]]}let o=this.genChangeData(t[0],t[1]);c.set(r,this.genChangeData(t[0],t[1],0)),m[f]=o[0],g[f]=o[1]}else m[f]=d[o],g[f]=p[o];i.set(w,f),x="".concat(null===(P=u.robotSceneById(e))||void 0===P?void 0:P.name(),"_").concat(t,"_\n").concat(S,"_joint_jerk").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}const r=M.position_type,o=M.velocity_type,a=M.acceleration_type,s=M.jerk_type;let T=new Map;for(let l=0;l<r.length;l++){var L;if(_=!1,w=j+"&"+S+"&"+r[l]+"&position",console.log("id is "+w),!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(console.log("generate positions"),-1===o||n){console.log("new one");const t=this.getPositions(e,F.robot,M.robotPart,!1,r[l],_);console.log("positions"),console.log(t),m[f]=t[0],g[f]=t[1]}else console.log("old one"),m[f]=d[o],g[f]=p[o];T.set(r[l],f),i.set(w,f),x="".concat(null===(L=u.robotSceneById(e))||void 0===L?void 0:L.name(),"_").concat(t,"_").concat(S,"_").concat(r[l],"_Cartesian position").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let c=0;c<o.length;c++){var O;_=!1;let r=j+"&"+S+"&"+o[c];if(w=r+"&velocity",console.log(w),!this.checkId({value:w},i,{value:_}))continue;let a=i.get(w);if(-1===a||n)if("magnitude"===o[c]){let t=this.getVelocityVector(e,F.robot,M.robotPart,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=T.get(o[c]);t=n?[m[n],g[n]]:this.getPositions(e,F.robot,M.robotPart,!1,o[c],_);let i=this.genChangeData(t[0],t[1]);l.set(r,this.genChangeData(t[0],t[1],0)),m[f]=i[0],g[f]=i[1]}else m[f]=d[a],g[f]=p[a];i.set(w,f),x="".concat(null===(O=u.robotSceneById(e))||void 0===O?void 0:O.name(),"_").concat(t,"_").concat(S,"_").concat(o[c],"_Cartesian velocity").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let E=0;E<a.length;E++){var N;_=!1;let r=j+"&"+S+"&"+a[E];if(w="".concat(r,"&acceleration"),!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(-1===o||n)if("magnitude"===a[E]){let t=this.getAccelerationVector(e,F.robot,M.robotPart,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=l.get(r);if(n)t=[n[0],n[1]];else{let n;y$("no cache for velocity "+r);let i=T.get(a[E]);i?(y$("has position"),n=[m[i],g[i]]):(y$("no index for position"),n=this.getPositions(e,F.robot,M.robotPart,!1,a[E],_)),y$("computed velocity");let o=this.genChangeData(n[0],n[1],0);l.set(r,o),t=[o[0],o[1]]}let i=this.genChangeData(t[0],t[1]);c.set(r,this.genChangeData(t[0],t[1],0)),m[f]=i[0],g[f]=i[1]}else m[f]=d[o],g[f]=p[o];i.set(w,f),x="".concat(null===(N=u.robotSceneById(e))||void 0===N?void 0:N.name(),"_").concat(t,"_").concat(S,"_").concat(a[E],"_Cartesian acceleration").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}for(let E=0;E<s.length;E++){var I;_=!1;let r=j+"&"+S+"&"+s[E];if(w="".concat(r,"&jerk"),!this.checkId({value:w},i,{value:_}))continue;let o=i.get(w);if(-1===o||n)if("magnitude"===a[E]){let t=this.getJerkVector(e,F.robot,M.robotPart,_);m[f]=t[0],g[f]=this.calculateMagitude(t[1],t[2],t[3])}else{let t,n=c.get(r);if(n)t=[n[0],n[1]];else{let n,i=l.get(r);if(i)n=[i[0],i[1]];else{let t,i=T.get(s[E]);t=i?[m[i],g[i]]:this.getPositions(e,F.robot,M.robotPart,!1,s[E],_);let o=this.genChangeData(t[0],t[1],0);l.set(r,o),n=[o[0],o[1]]}let o=this.genChangeData(n[0],n[1],0);c.set(r,o),t=[o[0],o[1]]}let i=this.genChangeData(t[0],t[1]);m[f]=i[0],g[f]=i[1]}else m[f]=d[o],g[f]=p[o];i.set(w,f),x="".concat(null===(I=u.robotSceneById(e))||void 0===I?void 0:I.name(),"_").concat(t,"_").concat(S,"_").concat(s[E],"_Cartesian jerk").concat(_?"_tw":""),this.fillTimeValData(w,v,b,x),y.has(w)||y.set(w,h.getColor()),f++}}}d=m,p=g,this.times=d,this.values=p,this.setState({prev_times:{start:u.currStartTime(),end:u.currEndTime(),curr:u.currTime()},line_names:v,line_ids:b,color_map:y,refresh:!1,is_part_changed:i,need_update:!1,velocity_map:l,acceleration_map:c}),this.props.graph.setLineNames(v),this.props.graph.setLineIds(b);let D=[];for(const j of b)D.push(y.get(j));this.props.graph.setLineColors(D)}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:.85*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);const{graph:n}=this.props;let r=[];for(const i of n.lineIds()){const[e,t,n,o,a]=this.decomposeEventName(i);let s=e+"#"+t+"&"+n;r.push(s)}this.addNewLines(r,n.currProperty())}componentDidUpdate(e){let t=this.props.graph.deleteLine();if(void 0!==t){const[e,n,r,i]=t.split("&");this.state.currObjects.has(e+"&"+n)&&(x$.removeRobotPartFromGraph(t,this.props.robotSceneManager),this.state.currObjects.delete(e+"&"+n),this.OnChangeGraph([t],!1),this.props.graph.setDeleteLine(void 0,void 0))}const{prev_times:n,refresh:r,need_update:i}=this.state,o=n.start!==this.props.robotSceneManager.currStartTime()||n.end!==this.props.robotSceneManager.currEndTime();o&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}});const a=n.curr!==this.props.robotSceneManager.currTime();(a||r||i)&&this.fillGraphData(o,a);const{force_update:s}=this.props;if(s!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph()!==this.props.graph)return;const{eventName:l,add:c}=this.props;(l!==e.eventName||c!==e.add)&&this.onChangeGraphWithManyLines(l,c),this.props.graph.filter()!==this.state.filter&&(this.setState({filter:this.props.graph.filter()}),this.onChangeFilter(this.props.graph.filter()))}decomposeEventName(e){const t=e.split("&"),[n,r,i,o]=t,[a,s]=n.split("#");return[a,s,r,i,o]}convertStringToDataType(e){let t;if("position"!==e&&"velocity"!==e&&"acceleration"!==e&&"jerk"!==e)throw Error("".concat(e," is not a property!!!!"));return t=e,t}onChangeGraphWithManyLines(e,t){this.setState({currProperty:e[0]}),this.state.graph_list.clear(),this.props.graph.resetColor(),this.state.color_map.clear(),this.state.is_part_changed.clear();let n=[],r=Gb(e[0]);for(const i of this.state.currObjects)n.push(i+r);this.OnChangeGraph(n,t)}OnChangeGraph(e,t){for(const n of e)this.OnChangeGraphHelper(n,t);this.fillGraphData()}OnChangeGraphHelper(e,t){console.log("on change graph called in GraphPanel"),console.log("event name is "+e);const n=this.decomposeEventName(e),r=this.props.robotSceneManager,i=r.robotSceneById(n[0]);if(void 0==i)return;console.log("scene id is "+n[0]);const o=n[1];if(void 0==o)return;console.log("robot name is "+o);const a=n[2];if(void 0==a)return;console.log("part name is "+a);const s=n[3];if(void 0==s)return;if(console.log("current specific prop is "+s),"rotation"===n[4])return;const l=this.convertStringToDataType(n[4]);if(void 0==l)return;console.log("current data type is "+l);const c=n[0]+"#"+o;let{graph_list:u,is_part_changed:h,use_timeWarp:d}=this.state,{line_ids:p}=this.state;const f=i.id().value();let m=u.get(c);if(d&&(e+="&tw"),p.includes(e)?h.set(e,p.indexOf(e)):h.set(e,-1),t||(h.delete(e),this.state.color_map.delete(e)),m){let e=m.robotParts.get(a);if(e){if("angle"===s)"position"===l?e.angle[0]=!e.angle[0]:"velocity"===l?e.angle[1]=!e.angle[1]:"acceleration"===l?e.angle[2]=!e.angle[2]:"jerk"===l&&(e.angle[3]=!e.angle[3]);else if("x"===s||"y"===s||"z"===s||"magnitude"===s){let t;if("position"===l)t=e.position_type;else if("velocity"===l)t=e.velocity_type;else if("acceleration"===l)t=e.acceleration_type;else{if("jerk"!==l)return void y$("Error: Checkbox invalid data type: "+l);t=e.jerk_type}let n=t.indexOf(s);-1!==n?t.splice(n,1):t.push(s),t.sort(),"position"===l?e.position_type=t:"velocity"===l?e.velocity_type=t:"acceleration"===l?e.acceleration_type=t:"jerk"===l&&(e.jerk_type=t)}e.angle||e.position_type.length||e.velocity_type.length||e.acceleration_type.length||e.jerk_type.length?m.robotParts.set(a,e):m.robotParts.delete(a)}else{let e;if(0===m.robot.jointMap().size&&0===m.robot.linkMap().size)e=void 0;else if(e=m.robot.jointMap().get(a),!e&&(e=m.robot.linkMap().get(a),!e))return void y$("Error: robot joint name cannot be found");let t={robotPart:e,position_type:"position"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],velocity_type:"velocity"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],acceleration_type:"acceleration"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],jerk_type:"jerk"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],angle:["position"===l&&"angle"===s,"velocity"===l&&"angle"===s,"acceleration"===l&&"angle"===s,"jerk"===l&&"angle"===s]};m.robotParts.set(a,t)}m.robotParts.size||m.position_type.length||m.velocity_type.length||m.acceleration_type.length||m.jerk_type.length?u.set(c,m):u.delete(c)}else{let e=x$.getRobotByName(r.robotSceneById(f),o);if(!e)return void y$("Error: robot name cannot be found");let t,n={robotScene:f,robot:e,position_type:[],velocity_type:[],acceleration_type:[],jerk_type:[],robotParts:new Map};if(0===n.robot.jointMap().size&&0===n.robot.linkMap().size)t=void 0;else if(t=n.robot.jointMap().get(a),!t&&(t=n.robot.linkMap().get(a),!t))return void y$("Error: robot joint name cannot be found");let i={robotPart:t,position_type:"position"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],velocity_type:"velocity"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],acceleration_type:"acceleration"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],jerk_type:"jerk"===l&&("x"===s||"y"===s||"z"===s||"magnitude"===s)?[s]:[],angle:["position"===l&&"angle"===s,"velocity"===l&&"angle"===s,"acceleration"===l&&"angle"===s,"jerk"===l&&"angle"===s]};n.robotParts.set(a,i),u.set(c,n)}this.setState({graph_list:u,is_part_changed:h,graph_update:!0})}onCheckUseTW(e){const{use_timeWarp:t}=this.state;this.setState({use_timeWarp:!t,graph_update:!0,need_update:!0})}onChangeFilter(e){console.log("on change filter"),this.setState({filter:e,graph_update:!0}),this.fillGraphData(!1,!1,!0)}onCurrTimeChange(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}onStartTimeChange(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}onEndTimeChange(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}onDeleteChange(e){const[t,n,r,i]=e.split("&");this.state.currObjects.delete(t+"&"+n),this.OnChangeGraph([e],!1)}static removeRobotPartFromGraph(e,t){let[n,r]=e.split("#"),[i,o,,]=r.split("&"),a=t.robotSceneById(n);if(void 0!==a){let e=a.getJointByName(i,o);if(void 0===e&&(e=a.getLinkByName(i,o)),void 0!==e)e.removeFromGraph();else{let e=a.getRobotByName(i);void 0!==e&&e.removeFromGraph()}ir.render(),ir.updateUI(),console.log(e)}}dragOverHandler(e){e.preventDefault()}dropHandler(e){e.preventDefault();let t=e.dataTransfer.getData("text/plain");this.addNewLines([t],this.state.currProperty)}addNewLines(e,t){let n=Gb(t);const{currObjects:r}=this.state;let i=[];for(const o of e){if(r.has(o))continue;r.add(o);const[e,t,a]=this.decomposeId(o),{robotSceneManager:s}=this.props;let l=s.robotSceneById(e);if(void 0!==l){s.isActiveRobotScene(l)||s.activateRobotScene(l);let e=l.getJointByName(t,a);if(void 0===e&&(e=l.getLinkByName(t,a)),void 0!==e)e.addToGraph();else{let e=l.getRobotByName(t);void 0!==e&&e.addToGraph()}}i.push(o+n)}i.length>0&&this.OnChangeGraph(i,!0)}decomposeId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}render(){const e=this.times,t=this.values,{color_map:n,is_part_changed:r,prev_times:i,panelHeight:o,panelWidth:a,currProperty:s,line_names:l,line_ids:c}=this.state;let u=[];for(const m of c)u.push(n.get(m));const[,h,d]=s.split("&");let p=d+" in "+h;"rotation"===d&&(p="the rotation can only be shown in difference"),d.startsWith("joint")&&(p=d);let f=this.props.robotSceneManager.getCurrGraph()===this.props.graph;return(0,qn.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,qn.jsxs)("div",{className:"LegendMessage",children:[(0,qn.jsx)(dG,{buttonValue:"Legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>["LineGraphLegend&".concat(Zb(4),"&").concat(this.props.graph.id()),e=>{}]}),(0,qn.jsx)("div",{className:"PopUpGroup",children:(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.GraphPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})})]}),(0,qn.jsx)(b$,{times:e,vals:t,startTime:i.start,endTime:i.end,currTime:i.curr,isZoom:!1,isDiff:!1,isTimeWarp:!1,line_names:l,line_colors:u,title:p,width:a,height:o,line_ids:c,prev_map:r,selected:f,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this),onDeleteChange:this.onDeleteChange.bind(this)})]})}}class w$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.times=void 0,this.values=void 0,this.line_ids_diff=[],this.currProperty=void 0,this.clickHandler=()=>{var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this.props.setGraphOptionPanelActive(),this.props.graph.setCurrProperty(this.currProperty),this.props.robotSceneManager.setCurrGraph(this.props.graph.id())},this.fillGraphData.bind(this);const n=this.props.robotSceneManager;this.state={counter:0,diff_times:[],diff_values:[],line_names_diff:[],line_ids:[],prev_times:{start:n.currStartTime(),end:n.currEndTime(),curr:n.currTime()},use_timeWarp:!1,color_map:new Map,currObjects:[],panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1,is_part_changed:new Map,filter:this.props.graph.filter()},this._graphDiv=(0,t.createRef)(),this.times=[],this.values=[],this.currProperty=this.props.graph.currProperty()}onGraphUpdate(e){const{graph_update:t}=this.state;return e?(this.setState({graph_update:!1}),!1):t}getRotations(e,t,n,r){let i;const o=this.props.robotSceneManager,a=o.robotSceneById(e),s=o.startTime(),l=o.endTime();let c,u=a.timeWarping();if(c=r&&u?u.timeWarpMap()[1]:_R.frameRange(s,l,20,2e3),void 0===n)return i=a.frameDataFor(t,c,void 0),[i.times,i.robotRotations];if(n instanceof p_)return i=a.frameDataFor(t,c,n),[i.times,i.linkRotations];if(n instanceof d_)return i=a.frameDataFor(t,c,n),[i.times,i.jointRotations];throw new Error("Unknown robot part type")}getPositions(e,t,n,r,i,o){let a;const s=this.props.robotSceneManager,l=s.robotSceneById(e),c=s.startTime(),u=s.endTime();let h,d=l.timeWarping();if(h=o&&d?d.timeWarpMap()[1]:_R.frameRange(c,u,20,2e3),void 0===n)return a=l.frameDataFor(t,h,void 0),[a.times,this.getNumArr(a.robotPositions,i)];if(n instanceof p_)return a=l.frameDataFor(t,h,n),[a.times,this.getNumArr(a.linkPositions,i)];if(n instanceof d_)return a=l.frameDataFor(t,h,n),r?[a.times,a.jointAngles]:[a.times,this.getNumArr(a.jointPositions,i)];throw new Error("Unknown robot part type")}getVelocity(e,t,n,r,i,o){if("magnitude"===i){let r=this.getVelocityVector(e,t,n,o);return[r[0],this.calculateMagitude(r[1],r[2],r[3])]}{const a=this.getPositions(e,t,n,r,i,o);return this.genChangeData(a[0],a[1])}}getAcceleration(e,t,n,r,i,o){if("magnitude"===i){let r=this.getAccelerationVector(e,t,n,o);return[r[0],this.calculateMagitude(r[1],r[2],r[3])]}{const a=this.getVelocity(e,t,n,r,i,o);return this.genChangeData(a[0],a[1])}}getJerk(e,t,n,r,i,o){if("magnitude"===i){let r=this.getJerkVector(e,t,n,o);return[r[0],this.calculateMagitude(r[1],r[2],r[3])]}{const a=this.getAcceleration(e,t,n,r,i,o);return this.genChangeData(a[0],a[1])}}getPositionVector(e,t,n,r){let i;const o=this.props.robotSceneManager,a=o.robotSceneById(e),s=o.startTime(),l=o.endTime();let c,u=a.timeWarping();if(c=r&&u?u.timeWarpMap()[1]:_R.frameRange(s,l,20,2e3),void 0===n)return i=a.frameDataFor(t,c,void 0),[i.times,i.robotPositions];if(n instanceof p_)return i=a.frameDataFor(t,c,n),[i.times,i.linkPositions];if(n instanceof d_)return i=a.frameDataFor(t,c,n),[i.times,i.jointPositions];throw new Error("Unknown robot part type")}getVectorArray(e){let t=[[],[],[]];for(let n=0;n<e.length;n++)t[0].push(e[n].x),t[1].push(e[n].y),t[2].push(e[n].z);return t}getVelocityVector(e,t,n,r,i){let o=this.getPositionVector(e,t,n,r),[a,s,l]=this.getVectorArray(o[1]),c=this.genChangeData(o[0],a)[1],u=this.genChangeData(o[0],s)[1],h=this.genChangeData(o[0],l)[1];return[o[0],c,u,h]}getAccelerationVector(e,t,n,r,i){let[o,a,s,l]=this.getVelocityVector(e,t,n,r,i);return[o,this.genChangeData(o,a)[1],this.genChangeData(o,s)[1],this.genChangeData(o,l)[1]]}getJerkVector(e,t,n,r,i){let[o,a,s,l]=this.getAccelerationVector(e,t,n,r,i);return[o,this.genChangeData(o,a)[1],this.genChangeData(o,s)[1],this.genChangeData(o,l)[1]]}calculateMagitude(e,t,n){let r=[];for(let i=0;i<e.length;i++)r.push(Math.sqrt(e[i]*e[i]+t[i]*t[i]+n[i]*n[i]));return r}getPositionsBounded(e,t,n,r,i,o){let a;const s=this.props.robotSceneManager,l=s.robotSceneById(e),c=s.currStartTime(),u=s.currEndTime()+.1;let h;var d;o?h=_R.frameRange(c,u,20,2e3,null===(d=l.timeWarping())||void 0===d?void 0:d.timeWarp):h=_R.frameRange(c,u,20,2e3);if(void 0===n)return a=l.frameDataFor(t,h,void 0),[a.times,this.getNumArr(a.robotPositions,i)];if(n instanceof p_)return a=l.frameDataFor(t,h,n),[a.times,this.getNumArr(a.linkPositions,i)];if(n instanceof d_)return a=l.frameDataFor(t,h,n),r?[a.times,a.jointAngles]:[a.times,this.getNumArr(a.jointPositions,i)];throw new Error("Unknown robot part type")}getNumArr(e,t){let n=[];if("magnitude"===t)for(let r=0;r<e.length;r++){let t=e[r].x,i=e[r].y,o=e[r].z;n.push(Math.sqrt(t*t+i*i+o*o))}else for(let r=0;r<e.length;r++)n.push(e[r][t]);return n}genChangeData(e,t,n){void 0===n&&(n=this.state.filter);let r=[[],[]];r[0]=[],r[1]=[];let i=[];for(;n&&n>0&&t.length>1;){i[0]=t[0]/4+t[0]/2+t[1]/4;for(let e=1;e<t.length-1;e++)i[e]=t[e-1]/4+t[e]/2+t[e+1]/4;i[t.length-1]=t[t.length-1]/4+t[t.length-1]/2+t[t.length-2]/4,t=gy().cloneDeep(i),n--}for(let o=0;o<e.length-1;o++)r[0][o]=e[o],r[1][o]=(t[o+1]-t[o])/(e[o+1]-e[o]);return r[0][e.length-1]=e[e.length-1],r[1][e.length-1]=r[1][e.length-2],r}calculateDifference(e,t){if("number"===typeof e&&"number"===typeof t)return t-e;if(e instanceof ds&&t instanceof ds){e=e.normalize();const n=(t=t.normalize()).clone().multiply(e.clone().invert());let r=2*Math.acos(n.w);return r>Math.PI&&(r=2*Math.PI-r),r}return 0}decomposePropertyName(e){const t=e.split("&"),[,n,r]=t;return[n,r]}fillGraphData(e,t,n){console.log("fill graph data is called");const r=Gb(this.currProperty);let{currObjects:i,is_part_changed:o,line_ids:a,use_timeWarp:s,color_map:l}=this.state;const c=this.props.robotSceneManager,[u,h]=this.decomposePropertyName(r);if(void 0==u)return;console.log("current specific prop is "+u);let d=!1;if("angle"==u&&(d=!0),void 0===h)return;const p=this.convertStringToDataType(h);if(void 0==p)return;console.log("current data type is "+p);let f=[],m=[],g=this.times,v=this.values,b=0,y=[],x=[],w=[],_=new Map;_=gy().cloneDeep(l);for(const S of i){console.log("fillGraphData called in DifferenceGraphPanel");const e=this.decomposeDragButtonId(S),t=e[0],i=c.robotSceneById(t);if(void 0==i)return;console.log("scene id is "+t);const l=e[1];if(void 0==l)return;const h=i.getRobotByName(l);if(void 0===h)return;console.log("robot name is "+l);const y=e[2];if(void 0==y)return;let _=h.jointMap().get(y);if(void 0===_&&(_=h.linkMap().get(y),void 0===_)){if(y!==l)return;_=void 0}console.log("part name is "+y);e[0];const M=S+r;a.includes(M)?o.set(M,a.indexOf(M)):o.set(M,-1);let T=o.get(M);if(-1===T||n){const e=d?"x":this.convertStringToVectorKey(u);if("rotation"===p){const e=this.getRotations(t,h,_,s);f[b]=e[0],m[b]=e[1]}else if("position"===p){const n=this.getPositions(t,h,_,d,e,s);f[b]=n[0],m[b]=n[1]}else if("velocity"===p){const n=this.getVelocity(t,h,_,d,e,s);f[b]=n[0],m[b]=n[1]}else if("acceleration"===p){const n=this.getAcceleration(t,h,_,d,e,s);f[b]=n[0],m[b]=n[1]}else if("jerk"===p){const n=this.getJerk(t,h,_,d,e,s);f[b]=n[0],m[b]=n[1]}else console.log("wrong data type")}else f[b]=g[T],m[b]=v[T];const E="".concat(i.name(),"_").concat(l,"_").concat(y);x[b]=M,w[b]=E,o.set(M,b++)}if(2===m.length&&2===f.length&&m[0].length===m[1].length){console.log("Can draw diff"),y[0]=[],y[1]=[];for(let t=0;t<m[0].length;t++)y[0][t]=0,y[1][t]=this.calculateDifference(m[0][t],m[1][t]),_.has(x[t])||_.set(x[t],this.props.graph.getColor());this.line_ids_diff=x,this.setState({line_names_diff:w}),this.props.graph.setLineNames(w),this.props.graph.setLineIds(x);let e=[];for(const t of x)e.push(_.get(t));this.props.graph.setLineColors(e)}g=f,v=m,this.times=g,this.values=v,this.setState({diff_values:y,diff_times:f,prev_times:{start:c.currStartTime(),end:c.currEndTime(),curr:c.currTime()},color_map:_,is_part_changed:o,need_update:!1})}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:.85*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);const{graph:n}=this.props;this.currProperty=n.currProperty();for(const r of n.lineIds()){const[e,t,i,o,a]=this.decomposeEventName(r);let s=e+"#"+t+"&"+i;this.addNewLine(s,n.currProperty())}}componentDidUpdate(e){const{prev_times:t,need_update:n}=this.state,r=t.start!==this.props.robotSceneManager.currStartTime()||t.end!==this.props.robotSceneManager.currEndTime(),i=t.curr!==this.props.robotSceneManager.currTime();r&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}}),(i||n)&&this.fillGraphData(r,i);const{force_update:o}=this.props;if(o!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph()!==this.props.graph)return;const{eventName:a,add:s}=this.props;(a!==e.eventName||s!==e.add)&&(this.currProperty=a[0],this.props.graph.resetColor(),this.fillGraphData()),this.props.graph.filter()!==this.state.filter&&(this.setState({filter:this.props.graph.filter()}),this.onChangeFilter(this.props.graph.filter()))}onChangeFilter(e){console.log("on change filter"),this.setState({filter:e,graph_update:!0}),this.fillGraphData(!1,!1,!0)}decomposeEventName(e){const t=e.split("&"),[n,r,i,o]=t,[a,s]=n.split("#");return[a,s,r,i,o]}convertStringToDataType(e){let t;if("position"!==e&&"velocity"!==e&&"acceleration"!==e&&"jerk"!==e&&"rotation"!==e)throw Error("".concat(e," is not a property!!!!"));return t=e,t}convertStringToVectorKey(e){let t;if("x"!==e&&"y"!==e&&"z"!==e&&"magnitude"!==e)throw Error("".concat(e," is not a property!!!!"));return t=e,t}onCheckUseTW(e){const{use_timeWarp:t}=this.state;this.setState({use_timeWarp:!t,graph_update:!0,need_update:!0})}onCurrTimeChange(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}onStartTimeChange(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}onEndTimeChange(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}onDeleteChange(e){}dragOverHandler(e){e.preventDefault()}dropHandler(e){e.preventDefault();e.target;let t=e.dataTransfer.getData("text/plain"),n=Gb(this.currProperty);this.addNewLine(t,n)}addNewLine(e,t){const[n,r,i]=this.decomposeId(e),{robotSceneManager:o}=this.props;let a=o.robotSceneById(n);if(void 0!==a){o.isActiveRobotScene(a)||o.activateRobotScene(a);let e=a.getJointByName(r,i);if(void 0===e&&(e=a.getLinkByName(r,i)),void 0!==e)e.addToGraph();else{let e=a.getRobotByName(r);void 0!==e&&e.addToGraph()}}const{currObjects:s}=this.state;s.length>2||(s.push(e),this.line_ids_diff.push(e+t),2===this.line_ids_diff.length&&this.fillGraphData(),this.setState({currObjects:this.state.currObjects}))}decomposeId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}decomposeDragButtonId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}decomposeLineId(e){const t=e.split("&"),[n,r,i,o]=t,[a,s]=n.split("#");return[a,s,r,i,o]}showDiffLineNames(){const{currObjects:e}=this.state;let t=[];for(let r=0;r<2;r++)if(void 0!==e[r]){var n;const[i,o,a]=this.decomposeDragButtonId(e[r]),s=null===(n=this.props.robotSceneManager.robotSceneById(i))||void 0===n?void 0:n.name();t[r]=s+"_"+o+"_"+a}return(0,qn.jsxs)("div",{children:[void 0!==t[0]&&(0,qn.jsxs)("p",{children:["the first (reference) line is ",t[0]]}),void 0!==t[1]&&(0,qn.jsxs)("p",{children:["the second line is ",t[1]]})]})}render(){const{diff_values:e,diff_times:t,use_timeWarp:n,color_map:r,prev_times:i,panelHeight:o,panelWidth:a,line_names_diff:s}=this.state,l=this.currProperty,{is_part_changed:c}=this.props,u=this.props.robotSceneManager;let h=this.line_ids_diff,d=[];for(const v of h)d.push(r.get(v));const[,p,f]=l.split("&");let m=f+" in "+p;"rotation"===f&&(m="Rotational"),f.startsWith("joint")&&(m=f);let g=this.props.robotSceneManager.getCurrGraph()===this.props.graph;return(0,qn.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,qn.jsxs)("div",{className:"LegendMessage",children:[(0,qn.jsx)(dG,{buttonValue:"Legend",className:"Legend",title:"Click and drag to open the legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>["LineGraphLegend&".concat(Zb(4),"&").concat(this.props.graph.id()),e=>{}]}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.DifferenceGraphPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),this.showDiffLineNames(),(0,qn.jsx)(b$,{times:t,vals:e,startTime:u.currStartTime(),endTime:u.currEndTime(),currTime:u.currTime(),isZoom:!1,isDiff:!0,isTimeWarp:!1,line_names:s,line_colors:d,title:m,width:a,height:o,line_ids:h,prev_map:c,selected:g,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this),onDeleteChange:this.onDeleteChange.bind(this)})]})}}class _$ extends t.Component{constructor(e){super(e),this._button=void 0,this._button=t.createRef()}render(){return(0,qn.jsx)("button",{className:"DeleteButton",ref:this._button,onClick:this.props.onClick,style:this.props.style,id:this.props.id,children:(0,qn.jsx)(Fn,{className:"TrashIcon",icon:Un})})}}class S$ extends t.Component{constructor(e){super(e),this.genGoToSceneCallback=(e,t)=>(t.stopPropagation(),()=>{this.props.robotSceneManager.setCurrRobotScene(e),console.log("shit"),this.props.robotSceneManager.isActiveRobotScene(e)||(console.log("hello"),this.props.robotSceneManager.activateRobotScene(e))}),this.state={selectedScenes:new Map,selectedRobots:new Map}}componentDidMount(){document.getElementById("SelectionPanel"),document.getElementById("group1")}genSceneOptions(){let e=[];const t=this.props.robotSceneManager;for(const n of t.allManagedRobotScenes())e.push({value:n.id().value(),label:n.name()});return e}genRobotOptions(e){let t=[];if(null!=e){for(const n of e.robots())t.push({value:n.id().value(),label:n.name(),ghost:!1});for(const n of e.ghostRobots())t.push({value:n.id().value(),label:n.name()+"-ghost",ghost:!0})}return t}genRobotPartOptions(e,t){if(null!=e&&void 0!=t){const n=x$.getRobotByName(e,t);if(void 0!==(null===n||void 0===n?void 0:n.objectType))return this.genPartOptions(t,n)}}genPartOptions(e,t){let n=[];0!==t.getArticuatedJointMap().size&&n.push({value:"Articulated Joints",label:"Articulated Joints",id:"Articulated Joints",inScene:!1,inGraph:!1});for(const[r,i]of t.getArticuatedJointMap())n.push({value:"".concat(e,"&").concat(r),label:r,id:i.id().value(),inScene:i.isInScene(),inGraph:i.isInGraph()});0!==t.getFixedJointMap().size&&n.push({value:"Fixed Joints",label:"Fixed Joints",id:"Fixed Joints",inScene:!1,inGraph:!1});for(const[r,i]of t.getFixedJointMap())n.push({value:"".concat(e,"&").concat(r),label:r,id:i.id().value(),inScene:i.isInScene(),inGraph:i.isInGraph()});0!==t.linkMap().size&&n.push({value:"Links",label:"Links",id:"Links",inScene:!1,inGraph:!1});for(const[r,i]of t.linkMap())n.push({value:"".concat(e,"&").concat(r),label:r,id:i.id().value(),inScene:i.isInScene(),inGraph:i.isInGraph()});return n.push({value:"Robot",label:"Robot",id:"Robot",inScene:!1,inGraph:!1}),n.push({value:"".concat(e,"&").concat(e),label:"".concat(e),id:t.id().value(),inScene:t.isInScene(),inGraph:t.isInGraph()}),n}dragStartHandler(e){e.dataTransfer.setData("text/plain",e.target.id)}appendRobotPartOptions(e,t,n){let r=e.id().value()+"#"+n,i=this.state.selectedRobots.get(r);var o;return void 0!==i&&i?null===(o=this.genRobotPartOptions(e,t))||void 0===o?void 0:o.map((t=>(0,qn.jsx)(hV,{children:this.genRobotPartList(e,t)},t.id))):void 0}genRobotPartList(e,t){return"Articulated Joints"===t.value||"Fixed Joints"===t.value||"Links"===t.value||"Robot"===t.value?(0,qn.jsx)("div",{children:t.value}):(0,qn.jsxs)("div",{style:{marginLeft:"-10px",display:"inline-block",whiteSpace:"nowrap"},children:[t.inScene&&(0,qn.jsx)("span",{children:"S\xa0"}),!t.inScene&&(0,qn.jsx)("span",{children:"\xa0 \xa0"}),t.inGraph&&(0,qn.jsx)("span",{children:"G\xa0"}),!t.inGraph&&(0,qn.jsx)("span",{children:"\xa0 \xa0"}),(0,qn.jsx)("button",{className:"DragButton_RobotPart",title:"Click and drop it to a 3D scene or a 2D graph to see its traces",id:e.id().value()+"#"+t.value,draggable:"true",onDragStart:this.dragStartHandler,onMouseEnter:e=>{this.displayAxis(e,!0)},onMouseLeave:e=>{this.displayAxis(e,!1)},children:t.label})]})}displayAxis(e,t){const{robotSceneManager:n}=this.props;let[r,i]=e.target.id.split("#"),o=n.robotSceneById(r);if(void 0===o)return;let[a,s]=i.split("&"),l=o.getRobotByName(a);if(void 0===l)return;let c=l.jointMap().get(s);void 0===c&&(c=l.linkMap().get(s),void 0===c)||c.setAxisVisibility(t)}onSelectRobot(e,t,n){n.stopPropagation(),this.props.setRobotOptionPanelActive(),void 0!==e&&(this.props.robotSceneManager.setCurrRobotScene(e),this.props.robotSceneManager.isActiveRobotScene(e)||this.props.robotSceneManager.activateRobotScene(e),void 0!==t&&e.setSelectedRobot(t))}appendRobotOptions(e){let t=this.state.selectedScenes.get(e.id().value());return void 0!==t&&t?(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,onChange:this.onChangeRobot.bind(this),children:this.genRobotOptions(e).map((t=>(0,qn.jsxs)(qG,{uuid:e.id().value()+"#"+t.value,children:[(0,qn.jsx)(cV,{children:(0,qn.jsxs)(sV,{children:[(0,qn.jsx)(_$,{onClick:n=>this.onDelete(n,e.id().value()+"#"+t.value,"robot",t.ghost)}),(0,qn.jsx)("button",{className:"DragButton_Robot",title:"Click and drop it to a 3D scene or a 2D graph to add a ghost",id:e.id().value()+"#"+t.label,draggable:"true",onDragStart:this.dragStartHandler,onClick:n=>this.onSelectRobot(e,e.robotById(t.value),n),children:t.label})]})}),this.appendRobotPartOptions(e,t.label,t.value)]},e.id().value()+"#"+t.value)))}):void 0}onChangeRobot(e){const t=new Map;for(const n of e)t.set(n,!0);this.setState({selectedRobots:t})}onChangeScene(e){const t=new Map;for(const n of e)t.set(n,!0);this.setState({selectedScenes:t})}onDelete(e,t,n,r){e.stopPropagation();const{robotSceneManager:i}=this.props;if("scene"===n){let e=this.props.robotSceneManager.robotSceneById(t);e&&i.removeRobotScene(e)}else if("robot"===n){const[e,n]=t.split("#");let i=this.props.robotSceneManager.robotSceneById(e);if(i)if(void 0!==r&&!0===r)i.removeGhostRobot(n);else{let e=i.robotById(n);e&&i.removeChildRobot(e)}}}onSelectScene(e,t){t.stopPropagation(),this.props.robotSceneManager.setCurrRobotScene(e),this.props.robotSceneManager.isActiveRobotScene(e)||this.props.robotSceneManager.activateRobotScene(e),this.props.setSceneOptionPanelActive()}render(){const{selectedScenes:e}=this.state,t=this.props.robotSceneManager;let n=t.allManagedRobotScenes();const r=t.currRobotScene(),i=r?t.getManagedRobotSceneData(r):void 0;return(0,qn.jsxs)("div",{className:"SelectionPanel",id:"SelectionPanel",children:[(0,qn.jsxs)("div",{id:"group1",className:"PopUpGroup",children:[(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.SelectionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})}),(0,qn.jsx)("div",{className:"SceneSelectorPanel",children:(0,qn.jsxs)("div",{className:"ButtonGroup",children:[(0,qn.jsx)("input",{className:"Button",type:"button",value:"New Scene",onClick:()=>{let e=t.addDefaultManagedRobotScene();t.setCurrRobotScene(e)}}),(0,qn.jsx)("input",{className:"Button",type:"button",value:"Clone Scene",onClick:e=>{if(void 0!==i){let e=i.robotScene.clone(!0,!1,!0);t.addManagedRobotScenes([{path:[...i.path],robotScene:e,metrics:new Map(i.metrics)}])}}})]})})]}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,onChange:this.onChangeScene.bind(this),children:n.map((e=>(0,qn.jsxs)(qG,{uuid:e.id().value(),children:[(0,qn.jsx)(cV,{children:(0,qn.jsxs)(sV,{children:[(0,qn.jsx)(_$,{id:e.id().value(),onClick:t=>this.onDelete(t,e.id().value(),"scene")}),(0,qn.jsx)(dG,{title:"Click and drag to open the scene",className:"Scene",buttonValue:e.name(),getParentDockLayout:this.props.getParentDockLayout,onClick:t=>this.onSelectScene(e,t),onDragStart:()=>{t.setAllowRobotSelection(!1);return["RobotScene&".concat(Zb(4),"&").concat(e.id().value()),n=>{t.setAllowRobotSelection(!0),t.isActiveRobotScene(e)||t.activateRobotScene(e),t.setCurrRobotScene(e)}]}},"".concat(e.name()))]})}),(0,qn.jsx)(hV,{children:this.appendRobotOptions(e)})]},e.id().value())))})]})}}class M$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.data_types=["joint position","joint velocity","joint acceleration","joint jerk","Cartesian position","Cartesian velocity","Cartesian acceleration","Cartesian jerk","rotation"],this.speci_property_types=["magnitude","x","y","z","angle"],this.selectedOptions=[],this.dropdownRef=[],this.currDataType=void 0,this.currSpeciProperty=void 0,this.state={counter:0,panelHeight:620,panelWidth:1200,dropdowns:[!1,!1],currScene:null,currRobot:new Map,currJoint:new Map,need_update:!0,currSelectedGraph:void 0},this._graphDiv=(0,t.createRef)();for(let n=0;n<2;n++)this.dropdownRef[n]=(0,t.createRef)();this.currDataType=this.data_types[0],this.currSpeciProperty=this.speci_property_types[0]}booleanSum(e){let t=0;for(const n of e)t+=Number(n);return t}genPropertyOptions(){let e=[],t=this.props.robotSceneManager.getCurrGraph();for(const n of this.data_types)("rotation"!==n||void 0===t||t.isDiff())&&e.push({value:n,label:n});return e}genSpeciPropertyOptions(){let e=[];for(const t of this.speci_property_types)e.push({value:t,label:t});return e}componentDidUpdate(e){this.props.robotSceneManager.getCurrGraph()!==this.state.currSelectedGraph&&(this.setState({currSelectedGraph:this.props.robotSceneManager.getCurrGraph()}),this.setOptions())}deselectDropdowns(e){this.state.dropdowns[e]=!1,void 0!=this.dropdownRef[e+1]&&void 0!=this.dropdownRef[e+1].current&&this.dropdownRef[e+1].current.setValue(this.dropdownRef[e+1].current.state.prevProps.placeholder)}selectDropdowns(e){this.state.dropdowns[e]=!0}onChangeProperty(e){this.deselectDropdowns(0);const t=e.value;t&&(this.currDataType=t,this.selectDropdowns(0),"rotation"===t?(this.selectDropdowns(1),this.onUpdate(t,"x")):"position"!==t&&(this.selectDropdowns(1),this.currSpeciProperty="magnitude",this.dropdownRef[1].current.setValue({value:"magnitude",label:"magnitude"}),this.onUpdate(t,"magnitude")))}onChangeSpeciProperty(e){this.state.dropdowns[1]=!1;const t=e.value;t&&(this.currSpeciProperty=t,this.selectDropdowns(1),this.onUpdate(this.currDataType,t))}onUpdate(e,t){var n;for(let i=0;i<2;i++)if(!this.state.dropdowns[i])throw new Error("".concat(i," Not every dropdown is selected. Need to select all dropdowns to show the graph"));console.log("on Update");let r=[];r[0]="&"+t+"&"+e,null===(n=this.props.robotSceneManager.getCurrGraph())||void 0===n||n.setCurrProperty(r[0]),this.props.updateGraphPropertyPanelState(r,!0,void 0,void 0)}decomposeEventName(e){const t=e.split("&"),[n,r,i,o]=t,[a,s]=n.split("#");return[a,s,r,i,o]}convertOptionListtoSpeciProperties(e){let t=[];for(let n=0;n<e.length;n++){const r=e[n].name;if("x"!==r&&"y"!==r&&"z"!==r&&"angle"!==r)throw Error("".concat(r," is not a valid specific property"));t[n]=r}return t}setOptions(){let e=this.props.robotSceneManager.getCurrGraph();if(void 0===e)return;const[,t,n]=e.currProperty().split("&");this.dropdownRef[0].current.setValue({value:n,label:n}),this.dropdownRef[1].current.setValue({value:t,label:t})}createNewGraphTab(e,t){let n=new NR(e,t,!1);this.props.updateGraphPropertyPanelState(void 0,void 0,void 0,n)}onChangeFilter(e){var t;console.log("on change filter"),this.props.forceUpdateTabNames(),null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setFilter(e)}onChangeLineWidth(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setLineWidth(e)}onBackgroundColorChange(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setBackgroundColor(e),this.props.forceUpdateTabNames()}onAxisColorChange(e){var t;null===(t=this.props.robotSceneManager.getCurrGraph())||void 0===t||t.setAxisColor(e),this.props.forceUpdateTabNames()}render(){const{filter_prop:e}=this.props;let t={display:"flex"};this.currDataType.startsWith("joint")&&(t={display:"none"});let n=this.props.robotSceneManager.getCurrGraph();return(0,qn.jsxs)("div",{className:"GraphOptionPanel",ref:this._graphDiv,children:[(0,qn.jsxs)("div",{style:{marginBottom:"5px"},className:"PopUpGroup",children:[(0,qn.jsx)(_W,{labelValue:"Name:",value:null===n||void 0===n?void 0:n.name(),onReturnPressed:e=>{null===n||void 0===n||n.setName(e),this.props.forceUpdateTabNames()}}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.GraphOptionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsxs)("div",{className:"labeledSelect",children:[(0,qn.jsx)("label",{children:" Y-axis: "}),(0,qn.jsx)("div",{className:"select-container",children:(0,qn.jsx)(aG,{placeholder:"Select a property ...",ref:this.dropdownRef[0],options:this.genPropertyOptions(),onChange:this.onChangeProperty.bind(this),isSearchable:!0,styles:s$})}),(0,qn.jsxs)("div",{className:"Select",style:t,children:[(0,qn.jsx)("span",{children:"Details:"}),(0,qn.jsx)("div",{className:"Select-container",children:(0,qn.jsx)(aG,{placeholder:"Select a specific property ...",ref:this.dropdownRef[1],options:this.genSpeciPropertyOptions(),onChange:this.onChangeSpeciProperty.bind(this),isSearchable:!0,styles:s$})})]})]}),(0,qn.jsxs)("div",{className:"ButtonsContainer",children:[(0,qn.jsx)(dG,{buttonValue:"New Graph",title:"Click and drag to create a new graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let e=Zb(4);return["Graph&".concat(e,"&motion"),t=>{this.createNewGraphTab(e,!1)}]}}),(0,qn.jsx)(dG,{buttonValue:"Difference Graph",title:"Click and drag to create a new difference graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let e=Zb(4);return["DifferenceGraph&".concat(e,"&motion"),t=>{this.createNewGraphTab(e,!0)}]}})]}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Graph Views"})}),(0,qn.jsx)(hV,{children:(0,qn.jsxs)("div",{className:"GraphViews",children:[(0,qn.jsx)(uG,{label:"Convolution Filtering Level: ",min:0,max:10,step:1,value:null===n||void 0===n?void 0:n.filter(),onChange:this.onChangeFilter.bind(this)}),(0,qn.jsx)(uG,{label:"Line width: ",min:.1,max:10,step:.1,value:null===n||void 0===n?void 0:n.lineWidth(),onChange:this.onChangeLineWidth.bind(this)}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===n||void 0===n?void 0:n.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Axis Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===n||void 0===n?void 0:n.axisColor(),onColorMapChange:this.onAxisColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})})]})})]})}}class T$ extends t.Component{constructor(e){super(e),this.jointAngleCallbackGen=this.jointAngleCallbackGen.bind(this),this.onSizeChange=this.onSizeChange.bind(this),this.positionCallbackGen=this.positionCallbackGen.bind(this),this.toggleRotType=this.toggleRotType.bind(this),this.toggleAngleType=this.toggleAngleType.bind(this),this.state={rotationType:"Euler",angleType:"Degree"}}toggleRotType(){this.setState({rotationType:"Quaternion"===this.state.rotationType?"Euler":"Quaternion"})}toggleAngleType(){this.setState({angleType:"Degree"===this.state.angleType?"Radian":"Degree"})}onSizeChange(e){return t=>{e?this.props.robot.setScaleOffset(new Bb.Vector3(t,t,t)):this.props.robot.setScale(new Bb.Vector3(t,t,t)),this.props.robotScene.render()}}positionCallbackGen(e,t){return"x"!==e&&"y"!==e&&"z"!==e&&(console.error('Postion "'.concat(e,'" is not one of "x", "y", "z"!')),e="x"),n=>{let r,i=this.props.robot;r=t?i.getPositionOffset():i.getPosition();let[o,a,s]=[r.x,r.y,r.z];"x"===e?o=n:"y"===e?a=n:"z"===e&&(s=n),t?i.setPositionOffset(new Bb.Vector3(o,a,s)):i.setPosition(new Bb.Vector3(o,a,s))}}rotationCallbackGen(e,t,n,r){return"x"!==e&&"y"!==e&&"z"!==e&&"w"!==e&&(console.error('Rotation axis "'.concat(e,'" is not one of ["x", "y", "z", "w"]!')),e="x"),i=>{let o,a=this.props.robot;if(o=t?a.getQuaternionOffset().clone():a.getQuaternion().clone(),"Euler"===n){let t=this.props.robot.eulerRotation();if(console.log("before"),console.log(t),console.log(o),"Degree"===r&&(i=Xb(i)),"x"===e)t.x=i;else if("y"===e)t.y=i;else if("z"===e)t.z=i;else if("w"===e)return;o.setFromEuler(t),console.log("after"),console.log(t),console.log(o)}else"Quaternion"===n&&("x"===e?o.x=i:"y"===e?o.y=i:"z"===e?o.z=i:"w"===e&&(o.w=i));t?a.setQuaternionOffset(o):a.setQuaternion(o)}}jointAngleCallbackGen(e,t){return n=>{"Degree"===t?e.setAngle(Xb(n)):e.setAngle(n)}}render(){const e=this.state.rotationType,t=this.state.angleType;let n=[],r=this.props.robot,i=r.idValue();(o=>{let a=o?r.getScaleOffset():r.getScale();n.push((0,qn.jsx)(uG,{label:"".concat(o?"":"Relative ","Scale"),min:0,max:2,step:.001,value:a.x,onChange:this.onSizeChange(o)},"".concat(i," ").concat(o?"Absolute":"Relative"," Scale")));for(const e of["x","y","z"]){let t,a;t=o?r.getPositionOffset():r.getPosition(),"x"===e?a=t.x:"y"===e?a=t.y:"z"===e&&(a=t.z),n.push((0,qn.jsx)(uG,{label:"".concat(o?"":"Relative ","Position ").concat(e.toUpperCase()),value:a,min:-3,max:3,step:.001,onChange:this.positionCallbackGen(e,o)},"".concat(i," ").concat(o?"Absolute":"Relative"," ").concat(e," Position")))}let s=.001;for(const l of["x","y","z","w"]){let a,c=l,u=0,h=1,d=-1;if(a=o?r.getQuaternionOffset():r.getQuaternion(),"Euler"===e){let e=this.props.robot.eulerRotation();if("x"===c)u=e.x;else if("y"===c)u=e.y;else{if("z"!==c){if("w"===c)continue;console.error('Unknown axis "'.concat(c,'"'));continue}u=e.z}"Degree"===t?(u=Yb(u),h=360,d=-360):(h=2*Math.PI,d=2*-Math.PI,s=Math.PI/180*.001)}else if("Quaternion"===e)if("x"===c)u=a.x;else if("y"===c)u=a.y;else if("z"===c)u=a.z;else{if("w"!==c){console.error('Unknown axis "'.concat(c,'"'));continue}u=a.w}n.push((0,qn.jsx)(uG,{label:"".concat(o?"":"Relative ","Rotation ").concat(c.toUpperCase()),value:u,min:d,max:h,step:s,onChange:this.rotationCallbackGen(c,o,e,t)},"".concat(i," ").concat(o?"Absolute":"Relative"," ").concat(l," Rotation")))}})(!0);for(const[o,a]of this.props.robot.getArticuatedJointMap()){let e=a.minAngle(),r=a.maxAngle(),i=a.angle(),s=Math.PI/180*.001;"Degree"===t&&(e=Yb(e),r=Yb(r),i=Yb(i),s=.001),n.push((0,qn.jsx)(uG,{label:"Joint "+o,min:e,max:r,value:i,step:s,onChange:this.jointAngleCallbackGen(a,t)},"".concat(a.idValue()," Rotation")))}return(0,qn.jsxs)("div",{className:"RobotJointsPanel",children:[(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Rotations"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" Euler"}),(0,qn.jsx)(xW,{checked:"Euler"===this.state.rotationType,onChange:this.toggleRotType}),(0,qn.jsx)("label",{className:"switch-right-label",children:" Quaternion "})]}),(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Unit"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" Degree"}),(0,qn.jsx)(xW,{checked:"Degree"===this.state.angleType,onChange:this.toggleAngleType}),(0,qn.jsx)("label",{className:"switch-right-label",children:" Radian "})]})]}),(0,qn.jsx)("div",{children:n})]})}}class E$ extends t.Component{constructor(e){super(e),this.onAddGroup=this.onAddGroup.bind(this),this.state={updateCnt:0}}update(){this.setState({updateCnt:(this.state.updateCnt+1)%1e6})}onAddGroup(){this.props.animationManager.addStoredAnimation(new fy),this.update()}render(){var e;let t=this.props.robotScene.robots(),n=this.props.robotSceneManager.animationTables(),r=this.props.animationManager.animationGroups(),i="";const o="This tab binds motions to robots. You can not do it now because ";let a;0===t.length?i=o+"no robots have been loaded in.":0===n.length?i=o+"no motions have been loaded in.":0===r.length&&this.onAddGroup();for(const[s,l]of oy(this.props.animationManager.animationGroups()))for(const[e,t]of oy(l.animations()))t.robot()===this.props.robot&&(a=t);return(0,qn.jsx)("div",{className:"AnimationEditor",children:i.length>0?(0,qn.jsx)("label",{children:i}):(0,qn.jsx)("div",{children:(0,qn.jsx)(_W,{labelValue:"Offset:",value:"".concat(null===(e=a)||void 0===e?void 0:e.offset()),filter:iy,onReturnPressed:e=>{let t=parseFloat(e);var n;isNaN(t)||(null===(n=a)||void 0===n||n.setOffset(t))}})})})}}class C$ extends t.Component{constructor(e){super(e),this._table=void 0,this._table=t.createRef()}render(){console.log("render");const{animationManager:e,robotSceneManager:t,robot:n}=this.props;let r;for(const[o,a]of oy(e.animationGroups()))for(const[e,t]of oy(a.animations()))t.robot()===n&&(r=t);if(void 0===r)return;let i=r.animationTable().toCSV().slice(0,10);for(let o=0;o<i.length;o++)for(let e=0;e<i[o].length;e++)isNaN(Number(i[o][e]))||(i[o][e]=Number(i[o][e]).toFixed(3));return(0,qn.jsxs)("div",{className:"DataTable",children:[(0,qn.jsx)("span",{children:"Note: The data table only shows the first 10 rows of the data"}),(0,qn.jsx)("table",{children:(0,qn.jsx)("tbody",{children:i.map(((e,t)=>(0,qn.jsx)("tr",{children:e.map(((e,t)=>(0,qn.jsx)("td",{style:{paddingRight:"10px"},children:e})))},t)))})})]})}}class A$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this._jointMotionOptions=[],this.dropdownRef=void 0;const{robotSceneManager:n}=this.props;this.state={counter:0,panelHeight:620,panelWidth:1200,need_update:!0,show_data:!1},this._graphDiv=(0,t.createRef)(),this.dropdownRef=[];for(let r=0;r<2;r++)this.dropdownRef[r]=(0,t.createRef)();this.onShowRobot=this.onShowRobot.bind(this),this.onOpacityChange=this.onOpacityChange.bind(this)}booleanSum(e){let t=0;for(const n of e)t+=Number(n);return t}componentDidUpdate(e){}onSelectJointMotion(){document.querySelectorAll(".SelectJointMotionMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));const{robotSceneManager:e}=this.props,t=e.currRobotScene();if(void 0===t)return;const n=t.selectedRobot();if(void 0===n)return;let r=this.dropdownRef[0].current;if(r&&r.props&&r.props.value){let i=r.props.value.value,o=(r.props.value.label,e.getJointMotionById(i));if(console.log(o),void 0===o)return;let a=Zw.createTableWithJointMotion(n.name(),o.time,o.motion);this.props.robotSceneManager.addAnimationTable(a),0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new fy),console.log(a);for(const[e,t]of oy(this.props.animationManager.animationGroups())){let e=u$.deleteAnimationAssociatedwithRobot(t,n);if(void 0!==e){let t=e.animationTable();a.setDescMap(t.descMap())}console.log(a),t.addAnimation(new py(n,a)),-1===this.props.animationManager.activeAnimations().indexOf(t)&&this.props.animationManager.addActiveAnimation(t)}this.props.robotSceneManager.activateRobotScene(t);const s="Joint Motion Binded Successfully!",l=document.createElement("p");l.innerText=s,l.classList.add("SelectJointMotionMessage");const c=document.querySelector(".RobotOptionPanel"),u=null===c||void 0===c?void 0:c.querySelector(".Select-JointMotion");null===u||void 0===u||u.appendChild(l)}else{const e="Error binding joint",t=document.createElement("p");t.innerText=e,t.style.color="red",t.classList.add("SelectJointMotionMessage");const n=document.querySelector(".RobotOptionPanel"),r=null===n||void 0===n?void 0:n.querySelector(".Select-JointMotion");null===r||void 0===r||r.appendChild(t)}}isChildJoint(e,t){let n=e.getArticuatedJointMap();for(const r of t.motion.keys())if(!n.has(r))return!1;return!0}genJointMotionOptions(){let e=[];const{robotSceneManager:t}=this.props,n=t.currRobotScene();if(void 0===n)return[];const r=n.selectedRobot();if(void 0===r)return[];for(const[i,o]of t.getAllJointMotions())this.isChildJoint(r,o)&&e.push({label:o.name,value:o.id});return e}onSelectTF(){document.querySelectorAll(".SelectTransformationMessage").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}));const{robotSceneManager:e}=this.props,t=e.currRobotScene();if(void 0===t)return;const n=t.selectedRobot();if(void 0===n)return;let r=this.dropdownRef[1].current;if(r&&r.props&&r.props.value){let i=r.props.value.value,o=(r.props.value.label,e.getTFById(i));if(void 0===o)return;let a=Zw.createTableWithTF(n.name(),o.time,o.tfs);this.props.robotSceneManager.addAnimationTable(a),0===this.props.animationManager.animationGroups.length&&this.props.animationManager.addStoredAnimation(new fy);for(const[e,t]of oy(this.props.animationManager.animationGroups())){let e=u$.deleteAnimationAssociatedwithRobot(t,n);if(void 0!==e){let t=e.animationTable();a.setAngleMap(t.angleMap())}console.log(a),t.addAnimation(new py(n,a)),-1===this.props.animationManager.activeAnimations().indexOf(t)&&this.props.animationManager.addActiveAnimation(t)}this.props.robotSceneManager.activateRobotScene(t);const s="Transformation Binded Successfully!",l=document.createElement("p");l.innerText=s,l.classList.add("SelectTransformationMessage");const c=document.querySelector(".RobotOptionPanel"),u=null===c||void 0===c?void 0:c.querySelector(".Select-Transformation");null===u||void 0===u||u.appendChild(l)}else{const e="Error binding transformation",t=document.createElement("p");t.innerText=e,t.style.color="red",t.classList.add("SelectTransformationMessage");const n=document.querySelector(".RobotOptionPanel"),r=null===n||void 0===n?void 0:n.querySelector(".Select-Transformation");null===r||void 0===r||r.appendChild(t)}}isRobotTf(e,t){return e.links()[0].getLinkName()===t.first_link}genTFOptions(){let e=[];const{robotSceneManager:t}=this.props,n=t.currRobotScene();if(void 0===n)return[];const r=n.selectedRobot();if(void 0===r)return[];for(const[i,o]of t.getAllTFs())this.isRobotTf(r,o)&&e.push({label:o.name,value:o.id});return e}decomposeEventName(e){const t=e.split("&"),[n,r,i,o]=t,[a,s]=n.split("#");return[a,s,r,i,o]}onShowRobot(e){const{robotSceneManager:t}=this.props,n=t.currRobotScene();if(void 0===n)return;const r=n.selectedRobot();void 0!==r&&(r.setVisible(e.currentTarget.checked),ir.updateUI())}onOpacityChange(){return e=>{const{robotSceneManager:t}=this.props,n=t.currRobotScene();if(void 0===n)return;const r=n.selectedRobot();void 0!==r&&(r.setOpacity(e),this.forceUpdate())}}onAxisSizeChange(){return e=>{const{robotSceneManager:t}=this.props,n=t.currRobotScene();if(void 0===n)return;const r=n.selectedRobot();void 0!==r&&(r.setAxisSize(e),this.forceUpdate())}}onShowData(){this.setState({show_data:!this.state.show_data})}render(){const{robotSceneManager:e}=this.props,t=e.currRobotScene();if(void 0===t)return(0,qn.jsx)("div",{className:"RobotOptionPanel",children:"This tab is for selecting which robot (if any) you would like. You do not have an robot selected currently, so this cannot be done. Please select an robot."},Zb(4));const n=t.selectedRobot();if(void 0===n)return(0,qn.jsx)("div",{className:"RobotOptionPanel",children:"This tab is for selecting which robot (if any) you would like. You do not have an robot selected currently, so this cannot be done. Please select an robot."},Zb(4));let r=n.opacity();return(0,qn.jsxs)("div",{className:"RobotOptionPanel",ref:this._graphDiv,children:[(0,qn.jsxs)("div",{className:"PopUpGroup",children:[(0,qn.jsx)(_W,{labelValue:"Name:",value:n.name(),onReturnPressed:e=>{n.setName(e)}}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.RobotOptionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Robot Appearance"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)("div",{className:"RobotSelectorPanel",children:(0,qn.jsxs)("div",{className:"RobotPanel",style:{marginBottom:"10px"},children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Show Object"}),(0,qn.jsx)("label",{className:"switch-left-label",children:" Show"}),(0,qn.jsx)(xW,{checked:n.visible(),onChange:this.onShowRobot}),(0,qn.jsx)("label",{className:"switch-right-label",children:" Hide "})]}),(0,qn.jsx)(uG,{label:"Robot Opacity",min:-.01,step:.01,max:1,value:r,onChange:this.onOpacityChange()},"Robot Opacity"),(0,qn.jsx)(uG,{label:"Axis Size",min:.01,step:.01,max:1,value:n.axisSize(),onChange:this.onAxisSizeChange()},"Axis Size")]})})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Edit Object Positions/Robot Joints"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(T$,{robotScene:t,robot:n})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Edit Motion Data"})}),(0,qn.jsx)(hV,{children:(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"top-line",children:[(0,qn.jsx)(E$,{robotScene:t,animationManager:this.props.animationManager,robotSceneManager:this.props.robotSceneManager,robot:n}),(0,qn.jsx)("input",{type:"button",value:"show raw data",onClick:this.onShowData.bind(this),style:{marginTop:"1rem"}}),this.state.show_data&&(0,qn.jsx)(C$,{robotScene:t,animationManager:this.props.animationManager,robotSceneManager:this.props.robotSceneManager,robot:n})]}),(0,qn.jsx)("div",{className:"top-line",children:(0,qn.jsxs)("div",{className:"Select-JointMotion",children:[(0,qn.jsx)("label",{children:" Available Joint Motions "}),(0,qn.jsx)("div",{className:"Select-container",children:(0,qn.jsx)(aG,{placeholder:"Select a joint motion ...",options:this.genJointMotionOptions(),ref:this.dropdownRef[0],isSearchable:!0,styles:s$})}),(0,qn.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectJointMotion.bind(this)})]})}),(0,qn.jsx)("div",{className:"top-line",children:(0,qn.jsxs)("div",{className:"Select-Transformation",children:[(0,qn.jsx)("label",{children:"Available Transformations"}),(0,qn.jsx)("div",{className:"Select-container",children:(0,qn.jsx)(aG,{placeholder:"Select a transformation",options:this.genTFOptions(),ref:this.dropdownRef[1],isSearchable:!0,styles:s$})}),(0,qn.jsx)("input",{type:"button",value:"Confirm",onClick:this.onSelectTF.bind(this)})]})})]})})]})})]})}}class R$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.times=void 0,this.values=void 0,this.clickHandler=()=>{var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this.props.setGraphOptionPanelActive(),this.props.robotSceneManager.setCurrGraph(this.props.graph.id())},this.fillGraphData.bind(this);const n=this.props.robotSceneManager;this.state={counter:0,zoomed_times:[],zoomed_values:[],prev_times:{start:n.currStartTime(),end:n.currEndTime(),curr:n.currTime()},show_zoomed:!1,line_names:[],line_ids:[],color_map:new Map,refresh:!1,clear:!1,currScene:void 0,panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1},this.times=[],this.values=[],this._graphDiv=(0,t.createRef)()}onGraphUpdate(e){const{graph_update:t}=this.state;return e?(this.setState({graph_update:!1}),!1):t}interpolate(e,t,n,r,i){if(n===e)return i;let o=(t-e)/(n-e);return o*i+(1-o)*r}fillGraphData(e,t,n){console.log("fill graph data is called");const{zoomed_times:r,zoomed_values:i,refresh:o,clear:a,show_zoomed:s}=this.state,{robotScene:l}=this.props,c=this.props.robotSceneManager;let u=this.times,h=this.values;if(a)return u=[],h=[],this.times=u,this.values=h,void this.setState({zoomed_times:[],zoomed_values:[],line_names:[],line_ids:[],clear:!1,need_update:!1});let d=[],p=[],f=[],m=[],g=[],v=[],b=new Map;if(this.props.isTimeWarp){var y;if(void 0===l)return;let e=null===(y=l.timeWarping())||void 0===y?void 0:y.timeWarpMap(),t=c.startTime(),n=c.endTime();e&&2===e.length?(d.push(e[0].concat()),p.push(e[1].concat())):(d.push([t,n]),p.push([t,n]));let r=[];for(const o of d[0])r.push(this.interpolate(t,o,n,t,n));d.push(d[0]),p.push(r),g=["time warp","reference"],v=["warp","ref"],b.set("time warp","#99f"),b.set("reference","green"),u=[],h=[],this.times=d,this.values=p,this.setState({zoomed_times:f,zoomed_values:m,prev_times:{start:c.currStartTime(),end:c.currEndTime(),curr:c.currTime()},line_names:g,line_ids:v,color_map:b,need_update:!1}),this.props.graph.setLineNames(g),this.props.graph.setLineIds(v);let i=[];for(const o of g)i.push(b.get(o));this.props.graph.setLineColors(i)}else;}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:.85*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this.fillGraphData()}componentDidUpdate(e){const{prev_times:t,refresh:n,clear:r,need_update:i}=this.state,o=t.start!==this.props.robotSceneManager.currStartTime()||t.end!==this.props.robotSceneManager.currEndTime(),a=t.curr!==this.props.robotSceneManager.currTime();o&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}}),(a||n||r||i)&&this.fillGraphData(o,a);const{force_update:s}=this.props;s!==e.force_update&&this.setState({need_update:!0}),this.props.robotSceneManager.getCurrGraph(),this.props.graph}onCurrTimeChange(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}onStartTimeChange(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}onEndTimeChange(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}render(){const e=this.times,t=this.values,{robotScene:n}=this.props,{zoomed_times:r,color_map:i,prev_times:o,panelHeight:a,panelWidth:s,line_names:l,line_ids:c}=this.state;let u=[];for(const p of l)u.push(i.get(p));let h=this.props.robotSceneManager.getCurrGraph()===this.props.graph,d=void 0===n?"Time Warp":n.name();return(0,qn.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor(),overflow:"auto"},children:[(0,qn.jsxs)("div",{className:"LegendMessage",children:[(0,qn.jsx)(dG,{buttonValue:"Legend",title:"Click and drag to open the legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>["LineGraphLegend&".concat(Zb(4),"&").concat(this.props.graph.id()),e=>{}]}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.TimeWarpedGraphPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsx)(b$,{times:e,vals:t,startTime:o.start,endTime:o.end,currTime:o.curr,isZoom:!1,isDiff:!1,isTimeWarp:!0,line_names:l,line_colors:u,title:d,width:s,height:a,line_ids:c,prev_map:new Map,selected:h,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this)})]})}}class k$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this._panel_resize_observer=void 0,this.w=void 0,this.h=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this),this.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors(),panelHeight:0,panelWidth:294},this.w=0,this.h=0}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:e[0].contentRect.height}),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let t=this.drawGraph(e[0].contentRect.width,e[0].contentRect.height);t&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}componentDidUpdate(e){let t=!gy().isEqual(new Set(this.state.line_colors),new Set(this.props.graph.lineColors()))||this.state.line_colors.length!==this.props.graph.lineColors().length,n=!gy().isEqual(new Set(this.state.line_names),new Set(this.props.graph.lineNames()))||this.state.line_names.length!==this.props.graph.lineNames().length;if(t||n){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]),this.setState({line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors()});let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}}createOnClickHandler(e,t){return()=>{this.props.graph.setDeleteLine(e,t),this.props.updateLegendState(!0)}}drawGraph(e,t){const{graph:n}=this.props,r=n.lineNames(),i=n.lineIds(),o=n.lineColors(),{margin:a,prev_lines:s,panelHeight:l,panelWidth:c}=this.state,u=void 0===e?c:e,h=void 0===t?l:t,d=u;let p=AC(this._graphDiv.current).append("svg").remove().attr("width",u).attr("height",h).append("g");let f=5;f+=18;for(let m=0;m<r.length;m++){p.append("circle").attr("fill",o[m]).attr("cx",15).attr("cy",f).attr("r",8);let e=r[m];if(!n.isDiff()&&!n.isTimeWarp()){const e=.99*d-16;p.append("foreignObject").attr("x",0+e).attr("y",f-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",this.createOnClickHandler(i[m],o[m])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n')}const t=7,a=.9*d-16-16,s=20*Math.ceil(e.length*t/a),l=p.append("foreignObject").attr("x",25).attr("y",f-8).attr("width",a).attr("height",s);i[m],l.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",o[m]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(e,"</p>")),f+=s+5}return this.w=u,this.h=50*(r.length+1)+100,this.setState({prev_lines:s}),p.node()}render(){return(0,qn.jsx)("div",{children:(0,qn.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}class P$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this._panel_resize_observer=void 0,this.w=void 0,this.h=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this),this.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,panelHeight:0,panelWidth:294},this.w=0,this.h=0}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:e[0].contentRect.height}),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let t=this.drawGraph(e[0].contentRect.width,e[0].contentRect.height);t&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}componentDidUpdate(e){if(this.props.robotScene.update()){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();console.log("width "+this.w+" height "+this.h),e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e),this.props.robotScene.setUpdate(!1)}}onDeleteTraceHandler(e){return()=>{const t=e.split("&"),[n,r]=t,[i,o]=n.split("#"),{robotScene:a,robotSceneManager:s}=this.props;let l=s.robotSceneById(i);if(void 0===l)return;let c=l.robotById(o);if(void 0===c)return;let u=c.jointMap().get(r);void 0===u&&(u=c.linkMap().get(r),void 0===u&&r!==c.name())||(l===a?a.removeChildTrace(c,u):l.removeGhostTracesFrom(c,u,a))}}onDeleteArrowHandler(e){return()=>{this.props.robotScene.removeArrow(e)}}getTraceName(e){var t;let n=e.robot(),r=e.robotPart();return(null===(t=n.parentScene())||void 0===t?void 0:t.name())+"_"+n.name()+"_"+(null===r||void 0===r?void 0:r.name())}createLineNames(e,t){let n=[],r=[],i=[],o=[],a=[],s=[];const{robotScene:l}=this.props;for(const p of e){var c,u;let e=p.robot(),t=p.robotPart(),o=(null===(c=e.parentScene())||void 0===c?void 0:c.name())+"_"+e.name()+"_"+(null===t||void 0===t?void 0:t.name()),a=(null===(u=e.parentScene())||void 0===u?void 0:u.id().value())+"#"+e.id().value()+"&"+(null===t||void 0===t?void 0:t.name());var h,d;if(void 0===t)o=(null===(h=e.parentScene())||void 0===h?void 0:h.name())+"_"+e.name()+"_"+e.name(),a=(null===(d=e.parentScene())||void 0===d?void 0:d.id().value())+"#"+e.id().value()+"&"+e.name();const s=p.color();n.push(o),r.push(a),i.push(s)}for(const p of t){const e="From "+this.getTraceName(p.traceFrom())+" to "+this.getTraceName(p.traceTo()),t=p.id(),n=p.color();o.push(e),a.push(t),s.push(n)}return[n,r,i,o,a,s]}drawGraph(e,t){const{robotScene:n}=this.props,{margin:r,prev_lines:i,panelHeight:o,panelWidth:a}=this.state;let s=n.getAllTraces(),l=n.getAllArrows();const[c,u,h,d,p,f]=this.createLineNames(s,l),m=void 0===e?a:e,g=void 0===t?o:t,v=m;let b=AC(this._graphDiv.current).append("svg").remove().attr("width",m).attr("height",g).append("g");let y=5;b.append("foreignObject").attr("x",15).attr("y",y).attr("width",50).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Traces:</p>');const x=b.append("g").attr("class","context-menu").style("display","none");document.addEventListener("click",(()=>{x.style("display","none")}));const w=x.append("g").attr("class","option").style("cursor","pointer").on("click",(()=>{console.log("Option 1 clicked")}));w.append("rect").attr("width",140).attr("height",20).attr("fill","white"),w.append("text").attr("x",60).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Select for compare");const _=x.append("g").attr("class","option").attr("transform","translate(0,".concat(20,")")).style("cursor","pointer").on("click",(()=>{console.log("Option 2 clicked")}));_.append("rect").attr("width",140).attr("height",20).attr("fill","white"),_.append("text").attr("x",70).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Compare with selected");const S='\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n';y+=30;for(let M=0;M<c.length;M++){b.append("circle").attr("fill",h[M]).attr("cx",15).attr("cy",y).attr("r",8);let e=c[M];const t=.99*v-16;b.append("foreignObject").attr("x",0+t).attr("y",y-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",this.onDeleteTraceHandler(u[M])).html(S);const r=7,i=.9*v-16-16,o=20*Math.ceil(e.length*r/i),a=b.append("foreignObject").attr("x",25).attr("y",y-8).attr("width",i).attr("height",o);(t=>{a.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",h[M]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(e,"</p>")).on("contextmenu",(e=>{e.preventDefault();const r=b.node().getBoundingClientRect(),i=e.pageX-r.left,o=e.pageY-r.top;x.attr("transform","translate(".concat(i,", ").concat(o,")")),x.style("display","block"),w.on("click",(()=>{n.setTraceFrom(t)})),_.on("click",(()=>{n.setTraceTo(t)})),b.node().appendChild(x.node())}))})(s[M]),y+=o+5}l.length>0&&(b.append("foreignObject").attr("x",15).attr("y",y).attr("width",200).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Difference between Traces:</p>'),y+=30);for(let M=0;M<d.length;M++){b.append("circle").attr("fill",f[M]).attr("cx",15).attr("cy",y).attr("r",8);let e=d[M];const t=.99*v-16;b.append("foreignObject").attr("x",0+t).attr("y",y-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",this.onDeleteArrowHandler(p[M])).html(S);const n=7,r=.9*v-16-16,i=20*Math.ceil(e.length*n/r),o=b.append("foreignObject").attr("x",25).attr("y",y-8).attr("width",r).attr("height",i);l[M],o.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",f[M]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(e,"</p>")),y+=i+5}return this.w=m,this.h=50*(c.length+d.length+1)+100,this.setState({prev_lines:i}),b.node()}render(){return(0,qn.jsx)("div",{children:(0,qn.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}class L$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._quaternionDiv=void 0,this.state={counter:0,update:!1},this._quaternionDiv=(0,t.createRef)()}componentDidUpdate(e){}onBackgroundColorChange(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setBackgroundColor(e)}onLineGroupColorChange(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setLineGroupColor(e)}onChangeLineOpacity(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setLineGroupOpacity(e)}onCheckWorldFrame(e){var t;null===(t=this.props.currQuaternionSpaceScene)||void 0===t||t.setWorldFrameObjectVisibility(e.currentTarget.checked),this.setState({update:!this.state.update})}render(){const{currQuaternionSpaceScene:e}=this.props;return(0,qn.jsxs)("div",{className:"SceneOptionPanel",ref:this._quaternionDiv,children:[(0,qn.jsxs)("div",{className:"PopUpGroup",children:[(0,qn.jsx)(_W,{labelValue:"Name:",value:void 0===e?"No Scene":e.name(),onReturnPressed:t=>{void 0!==e&&(e.setName(t),this.props.forceUpdateTabNames())}}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.QSceneOptionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsxs)("div",{className:"ButtonsContainer",style:{display:"flex",gap:"1rem"},children:[(0,qn.jsx)(dG,{buttonValue:"New Quaternion Space",title:"Click and drag to create a new quaternion space",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let e=(new yy).value();return["QuaternionSpaceScene&".concat(e,"&motion"),e=>{}]}}),(0,qn.jsx)(dG,{buttonValue:"Legend",className:"Legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let t=void 0===e?Zb(4):e.id().value();return["QuaternionSpaceLegend&".concat(Zb(4),"&").concat(t),e=>{}]}})]}),(0,qn.jsxs)("div",{className:"top-line bottom-line",children:[(0,qn.jsxs)("div",{className:"row-container",children:[(0,qn.jsx)("label",{children:"Show World Frame"}),(0,qn.jsx)("label",{className:"switch-right-label",children:"Show"}),(0,qn.jsx)(xW,{checked:null===e||void 0===e?void 0:e.isWorldFrameObjectVisible(),onChange:this.onCheckWorldFrame.bind(this)}),(0,qn.jsx)("label",{className:"switch-left-label",children:"Hide"})]}),(0,qn.jsx)(uG,{label:"Opacity of Longitude and Latitude: ",min:0,max:1,step:.01,value:null===e||void 0===e?void 0:e.lineGroupOpacity(),onChange:this.onChangeLineOpacity.bind(this)})]}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===e||void 0===e?void 0:e.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Longitude and Latitude Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===e||void 0===e?void 0:e.lineGroupColor(),onColorMapChange:this.onLineGroupColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})}}class O$ extends t.Component{constructor(e){super(e),this._orbitView=void 0,this._orbitCamera=void 0,this._canvasRef=void 0,this._resize_observer=void 0,this._raycaster=void 0,this._pointer=void 0,this._orbitCamera=new Bb.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3),this._orbitCamera.position.set(2,2,2),this._orbitCamera.lookAt(0,0,0),this._orbitCamera.up.set(0,0,1),this._raycaster=new Bb.Raycaster,this.onCanvasMouseDown=this.onCanvasMouseDown.bind(this),this._pointer=new Bb.Mesh(new Bb.SphereGeometry(.01,30,30),new Bb.MeshBasicMaterial({transparent:!0,opacity:.75,color:new Bb.Color(16777215*Math.random())})),this._canvasRef=t.createRef(),this.initScene(this.props.quaternionSpaceScene)}canSelectRobot(){var e;return null!==(e=this.props.allowSelecting)&&void 0!==e&&e&&this.props.robotSceneManager.allowRobotSelection()}addPointer(e,t){if(this.props.allowSelecting){const n=e.scene();-1===n.children.indexOf(this._pointer)&&n.add(this._pointer),this._pointer.position.copy(t),e.render()}}removePointer(e){const t=e.scene();-1!==t.children.indexOf(this._pointer)&&(t.remove(this._pointer),e.render())}initScene(e){e.runOnce(nr.INIT,(()=>{e.scene().background=new Bb.Color(e.backgroundColor()),e.scene().position.set(0,0,0);let t=16777215;const n=new Bb.DirectionalLight(t,1);n.castShadow=!0,n.shadow.mapSize.setScalar(1024),n.position.set(5,5,30),n.shadow.bias=-5e-4,n.lookAt(0,0,0),e.scene().add(n);const r=new Bb.AmbientLight(t,.2);e.scene().add(r);const i=new Bb.Mesh(new Bb.PlaneBufferGeometry,new Bb.ShadowMaterial({opacity:.25}));i.scale.setScalar(30),i.receiveShadow=!0,e.scene().add(i)}))}onCanvasMouseDown(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.props.robotSceneManager.setCurrQuaternionSpaceScene(this.props.quaternionSpaceScene.id().value()),this.props.setQuaternionSceneOptionPanelActive()}mount(e,t){if(t){this.initScene(e);const n=new m$(this._orbitCamera,t);let r=n.update.bind(n);n.update=()=>{let t=r();return e.render(),t},n.target.y=0,n.enableDamping=!0,n.dampingFactor=.5,n.rotateSpeed=.5,n.update(),this._orbitView=new h$(t,this._orbitCamera,(e=>{let t=Math.floor(e.clientWidth),n=Math.floor(e.clientHeight);e.width===t&&e.height===n||(e.width=t,e.height=n)})),e.addView(this._orbitView),e.render(),t.addEventListener("click",this.onCanvasMouseDown),this._resize_observer&&this._resize_observer.unobserve(t),this._resize_observer=new ResizeObserver((()=>{this.props.quaternionSpaceScene.render()})),this._resize_observer.observe(t)}}unmount(e,t){var n;(this._orbitView&&(e.removeView(this._orbitView),this._orbitView=void 0),t)&&(t.removeEventListener("click",this.onCanvasMouseDown),null===(n=this._resize_observer)||void 0===n||n.unobserve(t));this.removePointer(e)}componentDidUpdate(e){e.quaternionSpaceScene!==this.props.quaternionSpaceScene&&(this.unmount(e.quaternionSpaceScene,this._canvasRef.current),this.mount(this.props.quaternionSpaceScene,this._canvasRef.current))}componentDidMount(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._canvasRef.current)||void 0===e||e.classList.add("selected"),this.mount(this.props.quaternionSpaceScene,this._canvasRef.current)}componentWillUnmount(){this.unmount(this.props.quaternionSpaceScene,this._canvasRef.current)}decomposeId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}dragOverHandler(e){e.preventDefault()}dropHandler(e){e.preventDefault();let t=e.dataTransfer.getData("text/plain");const[n,r,i]=this.decomposeId(t);let o=this.props.robotSceneManager.robotSceneById(n);if(void 0===o)return;this.props.robotSceneManager.isActiveRobotScene(o)||this.props.robotSceneManager.activateRobotScene(o);let a=o.getRobotByName(r);if(void 0===a)return;const s=this.props.quaternionSpaceScene;if(void 0!==i){let e=a.jointMap().get(i);void 0===e&&(e=a.linkMap().get(i)),s.hasChildTrace(a,e)||s.addChildTrace(o,a,_R.frameRange(this.props.robotSceneManager.startTime(),this.props.robotSceneManager.endTime()),e)}}render(){return(0,qn.jsx)("div",{className:"RobotCanvas",onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),children:(0,qn.jsx)("canvas",{className:"RobotCanvasCanvas",ref:this._canvasRef})})}}class N$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this._panel_resize_observer=void 0,this.w=void 0,this.h=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this),this.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,panelHeight:0,panelWidth:294},this.w=0,this.h=0}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:e[0].contentRect.height}),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let t=this.drawGraph(e[0].contentRect.width,e[0].contentRect.height);t&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}componentDidUpdate(e){if(this.props.quaternionSpaceScene.update()){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e),this.props.quaternionSpaceScene.setUpdate(!1)}}onDeleteTraceHandler(e){return()=>{const t=e.split("&"),[n,r]=t,[i,o]=n.split("#"),{quaternionSpaceScene:a,robotSceneManager:s}=this.props;let l=s.robotSceneById(i);if(void 0===l)return;let c=l.robotById(o);if(void 0===c)return;let u=c.jointMap().get(r);void 0===u&&(u=c.linkMap().get(r),void 0===u&&r!==c.name())||a.removeChildTrace(c,u)}}getTraceName(e){var t;let n=e.robot(),r=e.robotPart();return(null===(t=n.parentScene())||void 0===t?void 0:t.name())+"_"+n.name()+"_"+(null===r||void 0===r?void 0:r.name())}createLineNames(e){let t=[],n=[],r=[];const{quaternionSpaceScene:i}=this.props;for(const c of e){var o,a;let e=c.robot(),i=c.robotPart(),u=(null===(o=e.parentScene())||void 0===o?void 0:o.name())+"_"+e.name()+"_"+(null===i||void 0===i?void 0:i.name()),h=(null===(a=e.parentScene())||void 0===a?void 0:a.id().value())+"#"+e.id().value()+"&"+(null===i||void 0===i?void 0:i.name());var s,l;if(void 0===i)u=(null===(s=e.parentScene())||void 0===s?void 0:s.name())+"_"+e.name()+"_"+e.name(),h=(null===(l=e.parentScene())||void 0===l?void 0:l.id().value())+"#"+e.id().value()+"&"+e.name();const d=c.color();t.push(u),n.push(h),r.push(d)}return[t,n,r]}drawGraph(e,t){const{quaternionSpaceScene:n}=this.props,{margin:r,prev_lines:i,panelHeight:o,panelWidth:a}=this.state;let s=n.getAllTraces();const[l,c,u]=this.createLineNames(s),h=void 0===e?a:e,d=void 0===t?o:t,p=h;let f=AC(this._graphDiv.current).append("svg").remove().attr("width",h).attr("height",d).append("g");let m=5;f.append("foreignObject").attr("x",15).attr("y",m).attr("width",50).attr("height",30).append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color","white").html('<p style="word-wrap: break-word; margin: 0;">Traces:</p>');const g=f.append("g").attr("class","context-menu").style("display","none");document.addEventListener("click",(()=>{g.style("display","none")}));const v=g.append("g").attr("class","option").style("cursor","pointer").on("click",(()=>{console.log("Option 1 clicked")}));v.append("rect").attr("width",80).attr("height",20).attr("fill","white"),v.append("text").attr("x",40).attr("y",10).attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill","black").text("Flip Trace");m+=30;for(let b=0;b<l.length;b++){f.append("circle").attr("fill",u[b]).attr("cx",15).attr("cy",m).attr("r",8);let e=l[b];const t=.99*p-16;f.append("foreignObject").attr("x",0+t).attr("y",m-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",this.onDeleteTraceHandler(c[b])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n');const n=7,r=.9*p-16-16,i=20*Math.ceil(e.length*n/r),o=f.append("foreignObject").attr("x",25).attr("y",m-8).attr("width",r).attr("height",i);(t=>{o.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",u[b]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(e,"</p>")).on("contextmenu",(e=>{e.preventDefault();const n=f.node().getBoundingClientRect(),r=e.pageX-n.left,i=e.pageY-n.top;g.attr("transform","translate(".concat(r,", ").concat(i,")")),g.style("display","block"),v.on("click",(()=>{t.flipTrace()})),f.node().appendChild(g.node())}))})(s[b]),m+=i+5}return this.w=h,this.h=50*(l.length+1)+100,this.setState({prev_lines:i}),f.node()}render(){return(0,qn.jsx)("div",{children:(0,qn.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}class I$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.state={counter:0,panelHeight:620,panelWidth:1200,currRobot:new Map,need_update:!0},this._graphDiv=(0,t.createRef)()}componentDidUpdate(e){}onChangeLineWidth(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setLineWidth(e)}onChangeNNeighbors(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setNNeighbors(e)}onChangeMinDis(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setMinDis(e)}onChangeSpread(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setSpread(e)}onBackgroundColorChange(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setBackgroundColor(e),this.props.forceUpdateTabNames()}onAxisColorChange(e){var t;null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t||t.setAxisColor(e),this.props.forceUpdateTabNames()}render(){var e,t,n;const{currSelectedGraph:r}=this.props;return(0,qn.jsxs)("div",{className:"GraphOptionPanel",ref:this._graphDiv,children:[(0,qn.jsxs)("div",{style:{marginBottom:"5px"},className:"PopUpGroup",children:[(0,qn.jsx)(_W,{labelValue:"Name:",value:void 0===r?"No Umap Graph":r.name(),onReturnPressed:e=>{void 0!==r&&(r.setName(e),this.props.forceUpdateTabNames())}}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.UmapGraphOptionPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsx)("div",{className:"ButtonsContainer",children:(0,qn.jsx)(dG,{buttonValue:"New Umap Graph",title:"Click and drag to create a new Umap Graph",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>{let e=Zb(4);return["UmapGraph&".concat(e,"&motion"),e=>{}]}})}),(0,qn.jsxs)("div",{className:"top-line bottom-line",children:[(0,qn.jsx)(uG,{label:"Line width: ",min:.1,max:10,step:.1,value:null===r||void 0===r?void 0:r.lineWidth(),onChange:this.onChangeLineWidth.bind(this)}),(0,qn.jsx)(uG,{label:"number of neighbors: ",min:1,max:100,step:1,value:null===r||void 0===r?void 0:r.nNeighbors(),onMouseUp:null===(e=this.props.robotSceneManager.getCurrUmapGraph())||void 0===e?void 0:e.setNNeighbors.bind(this.props.robotSceneManager.getCurrUmapGraph())}),(0,qn.jsx)(uG,{label:"min distance: ",min:.1,max:10,step:.1,value:null===r||void 0===r?void 0:r.minDis(),onMouseUp:null===(t=this.props.robotSceneManager.getCurrUmapGraph())||void 0===t?void 0:t.setMinDis.bind(this.props.robotSceneManager.getCurrUmapGraph())}),(0,qn.jsx)(uG,{label:"spread: ",min:.1,max:1,step:.01,value:null===r||void 0===r?void 0:r.spread(),onMouseUp:null===(n=this.props.robotSceneManager.getCurrUmapGraph())||void 0===n?void 0:n.setSpread.bind(this.props.robotSceneManager.getCurrUmapGraph())})]}),(0,qn.jsxs)("div",{children:[(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Background Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===r||void 0===r?void 0:r.backgroundColor(),onColorMapChange:this.onBackgroundColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})}),(0,qn.jsx)(DG,{allowZeroExpanded:!0,allowMultipleExpanded:!0,children:(0,qn.jsxs)(qG,{children:[(0,qn.jsx)(cV,{children:(0,qn.jsx)(sV,{style:{fontWeight:"bold"},children:"Axis Color:"})}),(0,qn.jsx)(hV,{children:(0,qn.jsx)(a$,{color:null===r||void 0===r?void 0:r.axisColor(),onColorMapChange:this.onAxisColorChange.bind(this),forceUpdateTabNames:this.props.forceUpdateTabNames})})]})})]})]})}}var D$=n(742);class j$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this);const{width:n,height:r}=this.props;this.state={prev_x:null,prev_y:null,margin:{top:0,right:10,bottom:20,left:10},time_min:-999,time_max:-999,val_concat:[],newCurr:this.props.currTime,mouseXCoord:-1,originalMouseXCoord:-1,currDragItem:null}}componentDidMount(){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);const{height:e,width:t}=this.props;let n=this.drawGraph(!0,!0);n&&AC(this._graphDiv.current).append("svg").attr("width",t).attr("height",e).node().appendChild(n)}componentDidUpdate(e){const t=e.startTime!==this.props.startTime||e.endTime!==this.props.endTime;let n=!gy().isEqual(new Set(e.line_colors),new Set(this.props.line_colors))&&e.line_colors.length===this.props.line_colors.length,r=e.height!==this.props.height||e.width!==this.props.width;const i=e.currTime!==this.props.currTime,o=e.lineWidth!==this.props.lineWidth,a=e.axisColor!==this.props.axisColor;if(e.times!==this.props.times||e.xVals!==this.props.xVals||r||n||o||a||t||i){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);const{width:e,height:i}=this.props;let o=this.drawGraph(t,n,r);o&&AC(this._graphDiv.current).append("svg").attr("width",e).attr("height",i).node().appendChild(o)}}filterData(e,t){let n=[],r=[],i=[];const{times:o,xVals:a,yVals:s}=this.props;if(0===o.length)return[[[0]],[[0]],[[0]]];for(let l=0;l<o.length;l++){let c=0;n[l]=[],r[l]=[],i[l]=[];let u=Wb(o[l],e),h=Hb(o[l],t);void 0===u&&(u=0),void 0===h&&(h=o[l].length-1);for(let e=u;e<h;e++)n[l][c]=o[l][e],r[l][c]=a[l][e],i[l][c]=s[l][e],c++}return[n,r,i]}parseData(e,t){let n=[];for(let r=0;r<e.length;r++)n.push({x:e[r],y:t[r]});return n}concatData(e){let t=[];for(let n=0;n<e.length;n++)t=t.concat(e[n]);return t}calculateOffset(e,t,n,r){if(n===t)return 0;return(r-t)/(n-t)*e}getCurrTimeIndex(e,t){return Ub(e,t)}getCurrCoordinate(e,t,n,r,i){let o=e,a=e+1;if(a>=t.length)return[t[t.length-1],n[t.length-1]];if(-1===o)return[t[0],n[0]];let s=(e,t,n)=>e*(1-n)+t*n,l=(r-i[o])/(i[a]-i[o]);return[s(t[o],t[a],l),s(n[o],n[a],l)]}static TimeFromXPosition(e,t,n,r){let i=r/e*(n-t);return i>n?i=n:i<t&&(i=t),i}currMouse(e){this.setState({originalMouseXCoord:e.x})}endMouse(e){this.setState({mouseXCoord:-1,originalMouseXCoord:-1})}calculateDistance(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}filterDataByDistance(e){let t=[];if(0==e.length)return t;let n=[];n.push(e[0]);for(let r=1;r<e.length;r++)this.calculateDistance(e[r],e[r-1])<=2||(t.push(n),n=[]),n.push(e[r]);return n.length>0&&t.push(n),t}drawGraph(e,t,n){const{times:r,xVals:i,yVals:o,startTime:a,endTime:s,currTime:l,isTimeWarp:c,lineWidth:u,axisColor:h,line_names:d,line_colors:p,line_ids:f,onGraphUpdate:m}=this.props,g=this.props.width,v=this.props.height,{margin:b,prev_x:y,prev_y:x}=this.state,w=g-b.left-b.right,_=v-b.top-b.bottom;let S=AC(this._graphDiv.current).append("svg").remove().attr("width",w+b.left+b.right).attr("height",_+b.top+b.bottom).append("g").attr("transform","translate(".concat(b.left,",     ").concat(b.top,")"));let[M,T,E]=this.filterData(a,s),C=[this.parseData(T[0],E[0])];for(let V=1;V<T.length;V++)C.push(this.parseData(T[V],E[V])),console.log(V+" "+C[V].length);let A=this.concatData(T),R=this.concatData(E);for(let V=0;V<i.length;V++){let e=this.getCurrTimeIndex(r[V],l);const[t,n]=this.getCurrCoordinate(e,i[V],o[V],l,r[V]),a=this.calculateOffset(w,lS(A),sS(A),t),s=this.calculateOffset(_,lS(R),sS(R),n),c=4;S.append("circle").attr("cx",a).attr("cy",_-s).attr("r",c).attr("fill","#b00").attr("fill-opacity","75%")}var k,P;m(!1),k=UA().range([0,w]).domain(aS(A)),P=UA().range([_,0]).domain(aS(R));let L=_S(k).tickSize(0).tickValues([]),O=SS(P).tickSize(0).tickValues([]),N=(I=k,wS(hS,I)).tickSize(0).tickValues([]);var I;let D,j=function(e){return wS(dS,e)}(P).tickSize(0).tickValues([]),F=S.append("g").attr("transform","translate(0, ".concat(_,")")).classed("GraphAxis",!0).call(L),z=S.append("g").classed("GraphAxis",!0).call(O),B=S.append("g").classed("GraphAxis",!0).call(N),U=S.append("g").attr("transform","translate(".concat(w,", 0)")).classed("GraphAxis",!0).call(j);F.selectAll("line, path").style("stroke",h),z.selectAll("line, path").style("stroke",h),B.selectAll("line, path").style("stroke",h),U.selectAll("line, path").style("stroke",h);let G=bR().x((e=>k(e.x))).y((e=>P(e.y)));if(c){let e=S.append("path").remove().append("path").data([C[1]]).attr("class","line").attr("fill","none").attr("stroke",p[1]).attr("stroke-width",u).attr("d",G).node();S.node().appendChild(e);let t=S.append("path").remove().append("path").data([C[0]]).attr("class","line").attr("fill","none").attr("stroke",p[0]).attr("stroke-width",u).attr("d",G).node();S.node().appendChild(t)}else for(let V=0;V<C.length;V++){D=f[V];for(const e of this.filterDataByDistance(C[V])){let t=S.append("path").remove().append("path").data([e]).attr("class","line").attr("fill","none").attr("stroke",p[V]).attr("stroke-width",u).attr("d",G).node();S.node().appendChild(t)}}return this.setState({prev_x:k,prev_y:P}),m(!0),S.node()}render(){const{isTimeWarp:e,times:t,selected:n,axisColor:r}=this.props;return(0,qn.jsxs)("div",{children:[(0,qn.jsx)("div",{style:{textAlign:"center"}}),(0,qn.jsx)("div",{className:"UmapGraph",ref:this._graphDiv})]})}}class F$ extends t.Component{constructor(e){super(e),this._panel_resize_observer=void 0,this._graphDiv=void 0,this.times=void 0,this.xVals=void 0,this.yVals=void 0,this.clickHandler=()=>{var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this.props.robotSceneManager.setCurrUmapGraph(this.props.graph.id()),this.props.setUmapGraphOptionPanelActive()},this.fillGraphData.bind(this);const n=this.props.robotSceneManager;this.state={counter:0,line_names:[],line_ids:[],line_colors:[],prev_times:{start:n.currStartTime(),end:n.currEndTime(),curr:n.currTime()},use_timeWarp:!1,color_map:new Map,currRobots:new Map,panelHeight:200,panelWidth:300,need_update:!0,graph_update:!1,nNeighbors:this.props.graph.nNeighbors(),minDis:this.props.graph.minDis(),spread:this.props.graph.spread()},this._graphDiv=(0,t.createRef)(),this.times=[],this.xVals=[],this.yVals=[]}onGraphUpdate(e){const{graph_update:t}=this.state;return e?(this.setState({graph_update:!1}),!1):t}getAllArticulatedJointsPositions(e,t,n){const r=this.props.robotSceneManager,i=r.startTime(),o=r.endTime();let a,s=e.timeWarping();a=n&&s?s.timeWarpMap()[1]:_R.frameRange(i,o,20,2e3);let l=[],c=[],u=[];for(const[,h]of t.getArticuatedJointMap()){let n=e.frameDataFor(t,a,h);u.push(n.jointAngles),c=n.times}if(u.length>0)for(let h=0;h<u[0].length;h++){let e=[];for(let t=0;t<u.length;t++)e.push(u[t][h]);l.push(e)}return[c,l]}async convertJointDataToUmap(e){ir.setPopupHelpPage({page:Xn.LoadingStarted,type:"UMAP"});const{graph:t}=this.props,n=new D$.Q({nNeighbors:t.nNeighbors(),minDist:t.minDis(),spread:t.spread()}),r=await n.fitAsync(e,(e=>{}));return ir.setPopupHelpPage({page:Xn.LoadingSuccess,type:"UMAP"}),r}generateLineName(e){const[t,n]=this.decomposeId(e),{robotSceneManager:r}=this.props;let i=r.robotSceneById(t);return(null===i||void 0===i?void 0:i.name())+"_"+n}decomposeUmapData(e){let t=[],n=[];for(let r=0;r<e.length;r++)t.push(e[r][0]),n.push(e[r][1]);return[t,n]}compareJointData(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(Math.abs(e[n]-t[n])>.01)return!1;return!0}filterUmapData(e,t){for(let n=1;n<e.length;n++)this.compareJointData(e[n-1],e[n])&&(t[n]=t[n-1]);return t}filterJointData(e,t){let n=[],r=[];for(let i=0;i<e.length;i++)0!==i&&this.compareJointData(e[i-1],e[i])||(n.push(e[i]),r.push(t[i]));return[n,r]}async fillGraphData(){const{currRobots:e,color_map:t}=this.state;let n=[],r=[],i=[],a=[],s=[],l=[],c=[],u=[],h=[];for(const[d,[p,f]]of e){let[e,t]=this.filterJointData(f,p);c=c.concat(e),u.push(t),o()(e.length===t.length),h.push(e.length)}if(0!==c.length){let d=await this.convertJointDataToUmap(c),p=0,f=0;for(const[c,[m,g]]of e){n.push(this.generateLineName(c)),r.push(c),i.push(t.get(c));let e=d.slice(p,p+h[f]),[g,v]=this.decomposeUmapData(e);o()(g.length===h[f]),o()(v.length===h[f]);let b=0,y=[],x=[],w=[];for(let t=0;t<m.length;t++)b+1<u[f].length&&m[t]>=u[f][b+1]&&b++,y.push(g[b]),x.push(v[b]),w.push(m[t]);a.push(y),s.push(x),l.push(m),p+=h[f],f++}}this.xVals=a,this.yVals=s,this.times=l,this.props.graph.setLineNames(n),this.props.graph.setLineIds(r),this.props.graph.setLineColors(i),this.setState({line_names:n,line_colors:i,line_ids:r,need_update:!1})}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){var e;let t=document.querySelectorAll(".RobotCanvasCanvas");t.forEach((e=>e.classList.remove("selected"))),t=document.querySelectorAll(".GraphPanel"),t.forEach((e=>e.classList.remove("selected"))),null===(e=this._graphDiv.current)||void 0===e||e.classList.add("selected"),this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:.9*e[0].contentRect.height})})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current);const{graph:n}=this.props;let r=[];for(const i of n.lineIds()){const[e,t]=this.decomposeId(i);let n=e+"#"+t;this.changeLines(n,!0),r.push(n)}}componentDidUpdate(e){let t=this.props.graph.deleteLine();void 0!==t&&this.state.currRobots.has(t)&&(this.state.currRobots.delete(t),this.changeLines(t,!1),this.props.graph.setDeleteLine(void 0,void 0)),this.props.graph.nNeighbors()===this.state.nNeighbors&&this.props.graph.minDis()===this.state.minDis&&this.props.graph.spread()===this.state.spread||(this.setState({nNeighbors:this.props.graph.nNeighbors(),minDis:this.props.graph.minDis(),spread:this.props.graph.spread()}),this.props.graph.resetColor(),this.fillGraphData());const{prev_times:n,need_update:r}=this.state,i=n.start!==this.props.robotSceneManager.currStartTime()||n.end!==this.props.robotSceneManager.currEndTime(),o=n.curr!==this.props.robotSceneManager.currTime();(i||o)&&this.setState({prev_times:{start:this.props.robotSceneManager.currStartTime(),end:this.props.robotSceneManager.currEndTime(),curr:this.props.robotSceneManager.currTime()}});const{force_update:a}=this.props;a!==e.force_update&&this.setState({need_update:!0})}onCurrTimeChange(e){e<=this.props.robotSceneManager.currEndTime()&&e>=this.props.robotSceneManager.currStartTime()&&this.props.robotSceneManager.setCurrTime(e)}onStartTimeChange(e){this.props.robotSceneManager.currTime()<e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currEndTime()>=e&&this.props.robotSceneManager.setCurrStartTime(e)}onEndTimeChange(e){this.props.robotSceneManager.currTime()>e&&this.props.robotSceneManager.setCurrTime(e),this.props.robotSceneManager.currStartTime()<=e&&this.props.robotSceneManager.setCurrEndTime(e)}changeLines(e,t){if(this.state.currRobots.has(e))return;const[n,r]=this.decomposeId(e),{robotSceneManager:i}=this.props;let o=i.robotSceneById(n);if(void 0===o)return;i.isActiveRobotScene(o)||i.activateRobotScene(o);let a=o.getRobotByName(r);if(void 0!==a){if(t){let[t,n]=this.getAllArticulatedJointsPositions(o,a);this.state.currRobots.set(e,[t,n]),this.state.color_map.set(e,this.props.graph.getColor())}else this.state.currRobots.delete(e),this.state.color_map.delete(e);this.fillGraphData()}}dragOverHandler(e){e.preventDefault()}dropHandler(e){e.preventDefault();e.target;let t=e.dataTransfer.getData("text/plain");this.changeLines(t,!0)}decomposeId(e){const[t,n]=e.split("#");return[t,n]}decomposeDragButtonId(e){const t=e.split("&"),[n,r]=t,[i,o]=n.split("#");return[i,o,r]}render(){const{line_names:e,line_ids:t,line_colors:n,use_timeWarp:r,color_map:i,prev_times:o,panelHeight:a,panelWidth:s}=this.state;this.props.isTimeWarp;return(0,qn.jsxs)("div",{className:"GraphPanel",ref:this._graphDiv,onDrop:this.dropHandler.bind(this),onDragOver:this.dragOverHandler.bind(this),onClick:this.clickHandler.bind(this),style:{backgroundColor:this.props.graph.backgroundColor()},children:[(0,qn.jsxs)("div",{className:"LegendMessage",children:[(0,qn.jsx)(dG,{buttonValue:"Legend",className:"Legend",title:"Click and drag to open the legend",getParentDockLayout:this.props.getParentDockLayout,onDragStart:()=>["UmapLegend&".concat(Zb(4),"&").concat(this.props.graph.id()),e=>{}]}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.UmapGraphPanel),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})})]}),(0,qn.jsx)(j$,{times:this.times,xVals:this.xVals,yVals:this.yVals,startTime:o.start,endTime:o.end,currTime:o.curr,isTimeWarp:!1,line_names:e,line_colors:n,width:s,height:a,line_ids:t,selected:this.props.robotSceneManager.getCurrUmapGraph()===this.props.graph,lineWidth:this.props.graph.lineWidth(),axisColor:this.props.graph.axisColor(),onGraphUpdate:this.onGraphUpdate.bind(this),onCurrChange:this.onCurrTimeChange.bind(this),onStartChange:this.onStartTimeChange.bind(this),onEndChange:this.onEndTimeChange.bind(this)})]})}}class z$ extends t.Component{constructor(e){super(e),this._graphDiv=void 0,this._panel_resize_observer=void 0,this.w=void 0,this.h=void 0,this._graphDiv=(0,t.createRef)(),this.drawGraph.bind(this),this.state={margin:{top:20,right:60,bottom:40,left:60},prev_lines:new Map,line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors(),panelHeight:0,panelWidth:294},this.w=0,this.h=0}componentWillUnmount(){this._panel_resize_observer&&this._panel_resize_observer.disconnect()}componentDidMount(){this._panel_resize_observer=new ResizeObserver((e=>{this.setState({panelWidth:e[0].contentRect.width,panelHeight:e[0].contentRect.height}),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let t=this.drawGraph(e[0].contentRect.width,e[0].contentRect.height);t&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(t)})),this._graphDiv&&this._graphDiv.current&&this._panel_resize_observer.observe(this._graphDiv.current),this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]);let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}componentDidUpdate(e){let t=!gy().isEqual(new Set(this.state.line_colors),new Set(this.props.graph.lineColors()))||this.state.line_colors.length!==this.props.graph.lineColors().length,n=!gy().isEqual(new Set(this.state.line_names),new Set(this.props.graph.lineNames()))||this.state.line_names.length!==this.props.graph.lineNames().length;if(t||n){this._graphDiv.current&&this._graphDiv.current.children.length>0&&this._graphDiv.current.removeChild(this._graphDiv.current.children[0]),this.setState({line_names:this.props.graph.lineNames(),line_ids:this.props.graph.lineIds(),line_colors:this.props.graph.lineColors()});let e=this.drawGraph();e&&AC(this._graphDiv.current).append("svg").attr("width",this.w).attr("height",this.h).node().appendChild(e)}}createOnClickHandler(e,t){return()=>{this.props.graph.setDeleteLine(e,t),this.props.updateLegendState(!0)}}drawGraph(e,t){const{graph:n}=this.props,r=n.lineNames(),i=n.lineIds(),o=n.lineColors(),{margin:a,prev_lines:s,panelHeight:l,panelWidth:c}=this.state,u=void 0===e?c:e,h=void 0===t?l:t,d=u;let p=AC(this._graphDiv.current).append("svg").remove().attr("width",u).attr("height",h).append("g");let f=5;f+=18;for(let m=0;m<r.length;m++){p.append("circle").attr("fill",o[m]).attr("cx",15).attr("cy",f).attr("r",8);let e=r[m];const t=.99*d-16;p.append("foreignObject").attr("x",0+t).attr("y",f-8).attr("width",15).attr("height",17).attr("class","white-icon").style("cursor","pointer").on("click",this.createOnClickHandler(i[m],o[m])).html('\n  <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">\n    \x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e\n    <path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>\n  </svg>\n');const n=7,a=.9*d-16-16,s=20*Math.ceil(e.length*n/a),l=p.append("foreignObject").attr("x",25).attr("y",f-8).attr("width",a).attr("height",s);i[m],l.append("xhtml:div").style("font-weight",600).style("font-size","13px").style("max-width","100%").style("color",o[m]).html('<p style="word-wrap: break-word; margin: 0;">'.concat(e,"</p>")),f+=s+5}return this.w=u,this.h=50*(r.length+1)+100,this.setState({prev_lines:s}),p.node()}render(){return(0,qn.jsx)("div",{children:(0,qn.jsx)("div",{className:"Legend",ref:this._graphDiv})})}}const B$="Time Bar",U$="File",G$="Home",V$="Selection",H$="Graph Options",W$="Scene Options",$$="Robot Options",q$=Zb(4),X$="Graph&".concat(q$,"&motion"),Y$="Quaternion Options",K$="UMAP Options",J$=t.createContext();class Q$ extends t.Component{constructor(e){var n;super(e),n=this,this._layoutRef=void 0,this.hasTabById=e=>{let t=this._layoutRef.current;return!!t&&void 0!==t.find(e)},this.removeTabById=e=>{let t=this._layoutRef.current;if(t){let n=t.find(e);void 0!==n&&t.dockMove(n,null,"remove")}},this.robotSceneIdParts=e=>{let t,n,r=e.indexOf("&"),i=e.slice(0,r),o=e.slice(r+1,e.length);if(r=o.indexOf("&"),-1!==r?(n=o.slice(0,r),t=o.slice(r+1,o.length)):t=o,void 0===n)throw new Error("RobotScene with undefined ID in DockLayout");return[i,n,t]},this.getDefaultLayout=()=>{let e="vertical";return{dockbox:{mode:e,children:[{mode:"horizontal",children:[{tabs:[{id:V$}]},{size:700,tabs:[{id:G$}]},{size:300,mode:e,children:[{tabs:[{id:U$},{id:W$},{id:$$},{id:H$},{id:Y$},{id:K$}]},{size:250,tabs:[{id:X$}]}]}]},{size:30,tabs:[{id:B$}]}]}}},this.getLayout=()=>{let e=this._layoutRef.current;return e||void 0},this.missingTab=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Missing Tab";return setTimeout(n.removeTabById,0,e),(0,qn.jsx)("div",{children:t},e)},this.tabWrap=e=>t=>{let{id:n}=t,r=e(n);return void 0!==r?r:(setTimeout(this.removeTabById,0,n),{id:n,closable:!0,cached:!0,title:"Missing Tab",content:(0,qn.jsx)("div",{children:"Missing Tab Data"},"Undefined Tab!")})},this.loadTab=e=>{if(void 0===e)return console.error("Undefined ID"),{closable:!0,title:"Undefined Tab",content:(0,qn.jsx)("div",{},"Undefined Tab!")};if(e===B$)return{id:B$,title:B$,cached:!0,content:(0,qn.jsx)(J$.Consumer,{children:e=>(0,qn.jsx)(Cz,{robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,event_x:this.state.event_x,global:!0})})};if(e.startsWith("TimeWarpTimeBar")){const t=e.substring(15);let n=this.props.robotSceneManager.robotSceneById(t),r=null===n||void 0===n?void 0:n.name();return{id:e,title:void 0===r?"Animate Timewarp":r+" Time Bar",cached:!0,closable:!0,content:(0,qn.jsx)(J$.Consumer,{children:e=>(0,qn.jsx)(Cz,{robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,event_x:this.state.event_x,currTimeBar_prop:"double",global:!1,targetSceneId:t})})}}if(e===U$)return{id:U$,title:U$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:e=>(0,qn.jsx)(u$,{robotSceneManager:e.robotSceneManager,animationManager:e.robotScene.animationManager(),onSaveLayout:this.onSaveLayout.bind(this),onRestoreLayout:this.onRestoreLayout.bind(this)})})};if(e===G$)return{id:G$,title:G$,content:this.createHomeTab()};if(e===H$){let e=this.props.robotSceneManager;return{id:H$,title:H$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:t=>(0,qn.jsx)(M$,{robotSceneManager:e,updateGraphPropertyPanelState:this.updateGraphPropertyPanelState.bind(this),filter_prop:this.state.filter,getParentDockLayout:t.getParentDockLayout,forceUpdateTabNames:this.forceUpdateTabNames.bind(this)})})}}if(e===W$){this.props.robotSceneManager;return{id:W$,title:W$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:e=>(0,qn.jsx)(l$,{getParentDockLayout:e.getParentDockLayout,robotSceneManager:e.robotSceneManager,robotScene:e.robotScene,animationManager:e.robotScene.animationManager(),addNewTimeWarpTimeBar:this.addNewTimeWarpTimeBar.bind(this),forceUpdateTabNames:this.forceUpdateTabNames.bind(this)})})}}if(e===$$){let e=this.props.robotSceneManager;return{id:$$,title:$$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:t=>(0,qn.jsx)(A$,{robotSceneManager:e,getParentDockLayout:t.getParentDockLayout,animationManager:t.robotScene.animationManager()})})}}if(e===Y$){let e=this.props.robotSceneManager;return{id:Y$,title:Y$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:t=>(0,qn.jsx)(L$,{robotSceneManager:e,getParentDockLayout:t.getParentDockLayout,forceUpdateTabNames:this.forceUpdateTabNames.bind(this),currQuaternionSpaceScene:e.getCurrQuaternionSpaceScene()})})}}if(e===K$){let e=this.props.robotSceneManager;return{id:K$,title:K$,group:"OptionPanels",content:(0,qn.jsx)(J$.Consumer,{children:t=>(0,qn.jsx)(I$,{robotSceneManager:e,getParentDockLayout:t.getParentDockLayout,currSelectedGraph:e.getCurrUmapGraph(),forceUpdateTabNames:this.forceUpdateTabNames.bind(this)})})}}if(e===V$)return{id:V$,title:V$,content:(0,qn.jsx)(J$.Consumer,{children:e=>(0,qn.jsx)(S$,{robotSceneManager:e.robotSceneManager,getParentDockLayout:e.getParentDockLayout,setSceneOptionPanelActive:this.setSceneOptionPanelActive.bind(this),setRobotOptionPanelActive:this.setRobotOptionPanelActive.bind(this)})})};if(e===X$){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getGraphById(t);return void 0===i&&(i=new NR(t,!1,!1),r.addGraph(i),r.setCurrGraph(i.id())),{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(x$,{robotSceneManager:r,getParentDockLayout:e.getParentDockLayout,eventName:this.state.eventName,add:this.state.add,filter_prop:this.state.filter,is_part_changed:this.state.is_part_changed,force_update:this.state.force_update,graph:i,graph_update:this.state.graph_update,setGraphOptionPanelActive:this.setGraphOptionPanelActive.bind(this)},t)}})}}if(e.startsWith("Graph")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getGraphById(t);return void 0===i&&(i=new NR(t,!1,!1),r.addGraph(i),r.setCurrGraph(i.id())),{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(x$,{robotSceneManager:r,getParentDockLayout:e.getParentDockLayout,eventName:this.state.eventName,add:this.state.add,filter_prop:this.state.filter,is_part_changed:this.state.is_part_changed,force_update:this.state.force_update,graph:i,graph_update:this.state.graph_update,setGraphOptionPanelActive:this.setGraphOptionPanelActive.bind(this)},t)}})}}if(e.startsWith("DifferenceGraph")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getGraphById(t);return void 0===i&&(i=new NR(t,!0,!1),r.addGraph(i),r.setCurrGraph(i.id())),{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(w$,{robotSceneManager:r,getParentDockLayout:e.getParentDockLayout,is_part_changed:this.state.is_part_changed,eventName:this.state.eventName,add:this.state.add,filter_prop:this.state.filter,force_update:this.state.force_update,graph:i,setGraphOptionPanelActive:this.setGraphOptionPanelActive.bind(this)},t)}})}}if(e.startsWith("TimeWarpedGraph")){let[,t,n,r]=e.split("&"),i=this.props.robotSceneManager,o=i.robotSceneById(n);if(void 0===o)return;let a=i.getGraphById(t);return void 0===a&&(a=new NR(t,!1,!0),i.addGraph(a)),{id:e,closable:!0,cached:!0,title:a.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==a)return(0,qn.jsx)(R$,{robotSceneManager:i,robotScene:o,isTimeWarp:!0,force_update:this.state.force_update,getParentDockLayout:e.getParentDockLayout,graph:a,setGraphOptionPanelActive:this.setGraphOptionPanelActive.bind(this)},t)}})}}if(e.startsWith("UmapGraph")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getUmapGraphById(t);return void 0===i&&(i=new DR(t),r.addUmapGraph(i),r.setCurrUmapGraph(t)),{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(F$,{robotSceneManager:r,isTimeWarp:"warp"===n,getParentDockLayout:e.getParentDockLayout,force_update:this.state.force_update,graph:i,setUmapGraphOptionPanelActive:this.setUmapGraphOptionPanelActive.bind(this)},t)}})}}if(e.startsWith("LineGraphLegend")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager.getGraphById(n);if(void 0===r)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+r.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==r)return(0,qn.jsx)(k$,{graph:r,updateLegendState:this.updateLegendState.bind(this)})}})}}if(e.startsWith("SceneLegend")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.robotSceneById(n);return{id:e,closable:!0,cached:!0,title:"Legend of "+(null===i||void 0===i?void 0:i.name()),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(P$,{robotSceneManager:r,robotScene:i})}})}}if(e.startsWith("QuaternionSpaceLegend")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getQuaternionSpaceSceneById(n);if(void 0===i)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+(null===i||void 0===i?void 0:i.name()),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==i)return(0,qn.jsx)(N$,{robotSceneManager:r,quaternionSpaceScene:i})}})}}if(e.startsWith("UmapLegend")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager.getUmapGraphById(n);if(void 0===r)return;return{id:e,closable:!0,cached:!0,title:"Legend of "+r.name(),content:(0,qn.jsx)(J$.Consumer,{children:e=>{if(void 0!==r)return(0,qn.jsx)(z$,{graph:r,updateLegendState:this.updateLegendState.bind(this)})}})}}if(e.startsWith("RobotScene")){let[,t,n]=this.robotSceneIdParts(e),r=this.props.robotSceneManager,i=r.robotSceneById(n);if(void 0===i)return;{let n=i,o=e;return{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:()=>r.hasManagedRobotScene(n)?(0,qn.jsx)(g$,{allowSelecting:!0,robotScene:n,robotSceneManager:r,setSceneOptionPanelActive:this.setSceneOptionPanelActive.bind(this),setRobotOptionPanelActive:this.setRobotOptionPanelActive.bind(this)},t):this.missingTab(o,"Missing Scene")})}}}if(e.startsWith("QuaternionSpaceScene")){let[,t,n]=e.split("&"),r=this.props.robotSceneManager,i=r.getQuaternionSpaceSceneById(t);return void 0===i&&(i=new LR(r,t),r.setCurrQuaternionSpaceScene(t)),{id:e,closable:!0,cached:!0,title:i.name(),content:(0,qn.jsx)(J$.Consumer,{children:()=>{if(void 0!==i)return(0,qn.jsx)(O$,{allowSelecting:!0,quaternionSpaceScene:i,robotSceneManager:r,setQuaternionSceneOptionPanelActive:this.setQuaternionSceneOptionPanelActive.bind(this)},t)}})}}return console.error('Unknown tab with id "'.concat(e,'"')),{id:e,closable:!0,title:"Unknown Tab",content:this.missingTab(e,"Missing Tab")}},this.onLayoutChange=(e,t,n)=>{if(e!==this.state.layoutBase){if(null!==t&&void 0!==t&&t.startsWith("RobotScene")&&"remove"===n){let[,,e]=this.robotSceneIdParts(t),n=this.props.robotSceneManager,r=n.robotSceneById(e);r&&n.deactivateRobotScene(r)}if(null!==t&&void 0!==t&&(t.startsWith("Graph")||t.startsWith("DifferenceGraph")||t===X$)&&"remove"===n){let[,e,n]=t.split("&"),r=this.props.robotSceneManager,i=r.getGraphById(e);if(void 0!==i){r.removeGraph(e);for(const e of i.lineIds())x$.removeRobotPartFromGraph(e,this.props.robotSceneManager)}}if(null!==t&&void 0!==t&&t.startsWith("QuaternionSpaceScene")&&"remove"===n){let[,e,n]=t.split("&");this.props.robotSceneManager.removeQuaternionSpaceScene(e)}this.setState({layoutBase:e})}},this._layoutRef=t.createRef(),this.state={layoutBase:this.getDefaultLayout(),eventName:[],add:!0,clear:!1,refresh:!1,line_names:[],times:[],values:[],line_ids:[],legend:!0,need_update:!0,filter:0,show_diff:!1,diff_line_ids:[],is_part_changed:new Map,clear_options:!1,event_x:0,time_warp_time_bars:[],force_update:!1,graph_update:!1};let r=new NR(q$,!1,!1);this.props.robotSceneManager.addGraph(r),this.props.robotSceneManager.setCurrGraph(q$),this.drag=this.drag.bind(this),this.onRestoreLayout=this.onRestoreLayout.bind(this)}addNewTimeWarpTimeBar(e){var t;const n="TimeWarpTimeBar"+e,r={...this.state.layoutBase};null===(t=r.dockbox.children[1].tabs)||void 0===t||t.push({id:n}),this.setState({layoutBase:r})}onSaveLayout(){let e=this.getLayout();return null===e||void 0===e?void 0:e.saveLayout()}onRestoreLayout(e){var t;(console.log("restore layout"),void 0!==this.getLayout()&&void 0!==e)&&(console.log(e),null===(t=this._layoutRef.current)||void 0===t||t.loadLayout(e),this.setState({layoutBase:e}))}setSceneOptionPanelActive(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(W$,null,!0)}setRobotOptionPanelActive(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab($$,null,!0)}setGraphOptionPanelActive(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(H$,null,!0)}setQuaternionSceneOptionPanelActive(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(Y$,null,!0)}setUmapGraphOptionPanelActive(){var e;null===(e=this.getLayout())||void 0===e||e.updateTab(K$,null,!0)}forceUpdateTabNames(){const e={...this.state.layoutBase};this.setState({layoutBase:e,force_update:!this.state.force_update})}updateLegendState(e){this.setState({graph_update:void 0===e?this.state.graph_update:e})}updateGraphPropertyPanelState(e,t,n,r,i,o){this.setState({eventName:void 0===e?this.state.eventName:e,add:void 0===t?this.state.add:t,filter:void 0===n?this.state.filter:n,legend:void 0===i?this.state.legend:i,clear_options:void 0===o?this.state.clear_options:o})}onClickImage(e){this.props.robotSceneManager.loadSessionFromURL(e,this.onRestoreLayout)}createHomeTab(){return(0,qn.jsx)("div",{className:"HomeTab",children:(0,qn.jsxs)("div",{children:[(0,qn.jsx)("h1",{children:"\ud83d\udc4b Welcome to Motion Comparator"}),(0,qn.jsx)("br",{}),(0,qn.jsx)("br",{}),(0,qn.jsx)("h3",{children:" Motion Comparator helps roboticists visualize \ud83d\udc40, understand \ud83d\udca1, compare \ud83d\udd0d, and communiate \ud83d\udcac robot motions. "}),(0,qn.jsx)("br",{}),(0,qn.jsx)("br",{}),(0,qn.jsxs)("div",{className:"PopUpGroup",style:{justifyContent:"center",alignItems:"center"},children:[(0,qn.jsx)("p",{children:" Explore the examples below or click on the help icon "}),(0,qn.jsx)("button",{id:"open-popup",className:"OpenPop",onClick:()=>ir.setPopupHelpPage(Xn.Home),children:(0,qn.jsx)(Fn,{className:"Icon",icon:Vn})}),(0,qn.jsx)("p",{children:"to get started."})]}),(0,qn.jsx)("br",{}),(0,qn.jsx)("br",{}),(0,qn.jsxs)("div",{children:[(0,qn.jsxs)("div",{className:"ExampleImageGroup",children:[(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/panda_pick_and_place/panda_pick_and_place.png",className:"ExampleImage",alt:"Panda Pick and Place"}),(0,qn.jsx)("div",{className:"ExampleImageOverlay",onClick:()=>this.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/panda_pick_and_place/panda_pick_and_place.json"),children:(0,qn.jsx)("div",{className:"ExampleImageOverlayText",children:"Pick and Place Motions of Panda Robot "})})]}),(0,qn.jsxs)("div",{className:"ExampleImageGroup",children:[(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/mico_legible/mico_legible.png",className:"ExampleImage",alt:"Mico Legible"}),(0,qn.jsx)("div",{className:"ExampleImageOverlay",onClick:()=>this.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/mico_legible/mico_legible.json"),children:(0,qn.jsx)("div",{className:"ExampleImageOverlayText",children:"Legible Motions of Mico Robot "})})]}),(0,qn.jsxs)("div",{className:"ExampleImageGroup",children:[(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/spot_arm_sweep/spot_arm_sweep.png",className:"ExampleImage",alt:"Pick and Place"}),(0,qn.jsx)("div",{className:"ExampleImageOverlay",onClick:()=>this.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/spot_arm_sweep/spot_arm_sweep.json"),children:(0,qn.jsx)("div",{className:"ExampleImageOverlayText",children:"Sweeping Motions of Spot Robot "})})]}),(0,qn.jsxs)("div",{className:"ExampleImageGroup",children:[(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/sawyer_teleop/sawyer_teleop.png",className:"ExampleImage",alt:"Pick and Place"}),(0,qn.jsx)("div",{className:"ExampleImageOverlay",onClick:()=>this.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/sawyer_teleop/sawyer_teleop.json"),children:(0,qn.jsx)("div",{className:"ExampleImageOverlayText",children:"Teleoperation of Sawyer Robot "})})]}),(0,qn.jsxs)("div",{className:"ExampleImageGroup",children:[(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/ur5_rangedik/ur5_rangedik.png",className:"ExampleImage",alt:"Trajectory Tracking"}),(0,qn.jsx)("div",{className:"ExampleImageOverlay",onClick:()=>this.onClickImage("https://raw.githubusercontent.com/uwgraphics/MotionComparator-Examples/main/workspaces/ur5_rangedik/ur5_rangedik.json"),children:(0,qn.jsx)("div",{className:"ExampleImageOverlayText",children:"Trajectory Tracking of UR5 Robot "})})]}),(0,qn.jsx)("br",{}),(0,qn.jsx)("br",{}),(0,qn.jsx)("a",{href:"https://github.com/motion-comparator/MotionComparator",target:"_blank",rel:"noopener noreferrer",children:(0,qn.jsx)("img",{src:"https://raw.githubusercontent.com/tandpfun/skill-icons/main/icons/Github-Light.svg",className:"GithubIcon",alt:"Github"})})]})]})})}drag(e){const t=e.target.className;"string"===typeof t&&t.includes("-option")||this.setState({event_x:e.pageX})}render(){let e=this.props.robotSceneManager,t=this.props.robotSceneManager.currRobotScene(!1),n=t.selectedRobot();this._layoutRef.current;return(0,qn.jsx)("div",{className:"RobotWorkspace",onMouseMove:this.drag,children:(0,qn.jsx)(J$.Provider,{value:{robotSceneManager:e,robotScene:t,selectedRobot:n,getParentDockLayout:this.getLayout},children:(0,qn.jsx)(bz,{ref:this._layoutRef,layout:this.state.layoutBase,onLayoutChange:this.onLayoutChange,loadTab:this.tabWrap(this.loadTab),groups:{OptionPanels:{tabLocked:!0}}})})})}}class Z$ extends t.Component{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this._disallowUpdateUI=void 0,this._workspaceRef=void 0,this.goToPage=this.goToPage.bind(this),this.currPage=this.currPage.bind(this),this.href=this.href.bind(this),this.updateUI=this.updateUI.bind(this),this.error=this.error.bind(this),this._disallowUpdateUI=0;let e,n,r=new zR,i=this.href().split("?");if(1===i.length)e=rr.BUILD_PAGE;else if(2===i.length){e=rr.BUILD_PAGE,n=i[1]}else e=rr.BUILD_PAGE,this.warn("More than one question mark \"?\" in this page's URL. Did you mean to go to the view/playback page instead? If so, include only 1 question mark at the end of the website's url and put the url to the json of the scene you want to go to after it.");this.state={currPageName:e,robotSceneManager:r,jsonURL:n,uiUpdateCnt:0,currPopupHelpPage:{page:Xn.None},prev_times:{startTime:r.startTime(),endTime:r.endTime()}},this._workspaceRef=t.createRef()}recalculateTimeWarping(){for(const e of this.state.robotSceneManager.allManagedRobotScenes())if(e.isTimeWarping()){let t=e.currTimeWarpBase();e.setTimeWarpBase(void 0),e.setTimeWarpBase(t)}}robotSceneManager(){return this.state.robotSceneManager}addAnimationTable(e){this.state.robotSceneManager.addAnimationTable(e)}removeAnimationTable(e){this.state.robotSceneManager.removeAnimationTable(e)}renderScenes(){var e;null===(e=this.state.robotSceneManager.currRobotScene())||void 0===e||e.render()}href(){return window.location.href}goToPage(e){this.setState({currPageName:e})}currPage(){return this.state.currPageName}error(e){console.error(e)}warn(e){console.warn(e)}popupHelpPage(){return this.state.currPopupHelpPage}setPopupHelpPage(e){let t="string"===typeof e?{page:e}:e;this.setState({currPopupHelpPage:t})}updateUI(){this._disallowUpdateUI<=0&&this.setState({uiUpdateCnt:(this.state.uiUpdateCnt+1)%1e9}),this._disallowUpdateUI<0&&console.warn("disallowUpdateUI is less than 0!")}allowUpdateUI(){this._disallowUpdateUI+=1}disallowUpdateUI(){this._disallowUpdateUI-=1}componentDidMount(){if(ir.setApp(this),this.state.jsonURL){var e;let t=this.state.jsonURL;null===(e=this.state.robotSceneManager.currRobotScene())||void 0===e||e.runOnce("Load:".concat(t),(()=>{var e;this.state.robotSceneManager.loadSessionFromURL(t,null===(e=this._workspaceRef.current)||void 0===e?void 0:e.onRestoreLayout)}))}}componentDidUpdate(){let{startTime:e,endTime:t}=this.state.prev_times,n=this.state.robotSceneManager,[r,i]=[n.startTime(),n.endTime()];e===r&&t===i||(this.recalculateTimeWarping(),this.setState({prev_times:{startTime:r,endTime:i}}))}render(){return(0,qn.jsxs)("div",{className:"App",children:[(0,qn.jsx)("div",{className:"BuildPage",children:(0,qn.jsx)(Q$,{ref:this._workspaceRef,robotSceneManager:this.state.robotSceneManager})}),Yn(this.state.currPopupHelpPage)]})}}const eq=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))};r.createRoot(document.getElementById("root")).render((0,qn.jsx)(t.StrictMode,{children:(0,qn.jsx)(Z$,{})})),eq()})()})();
//# sourceMappingURL=main.1b105c30.js.map